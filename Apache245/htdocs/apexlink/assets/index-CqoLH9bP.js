var kL=Object.defineProperty;var PL=(e,t,n)=>t in e?kL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $e=(e,t,n)=>PL(e,typeof t!="symbol"?t+"":t,n);function CL(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ct(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function AL(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var U_={exports:{}},Pg={},z_={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf=Symbol.for("react.element"),EL=Symbol.for("react.portal"),_L=Symbol.for("react.fragment"),TL=Symbol.for("react.strict_mode"),OL=Symbol.for("react.profiler"),IL=Symbol.for("react.provider"),DL=Symbol.for("react.context"),RL=Symbol.for("react.forward_ref"),ML=Symbol.for("react.suspense"),$L=Symbol.for("react.memo"),LL=Symbol.for("react.lazy"),Yj=Symbol.iterator;function FL(e){return e===null||typeof e!="object"?null:(e=Yj&&e[Yj]||e["@@iterator"],typeof e=="function"?e:null)}var H_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W_=Object.assign,q_={};function bc(e,t,n){this.props=e,this.context=t,this.refs=q_,this.updater=n||H_}bc.prototype.isReactComponent={};bc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function V_(){}V_.prototype=bc.prototype;function Gw(e,t,n){this.props=e,this.context=t,this.refs=q_,this.updater=n||H_}var Yw=Gw.prototype=new V_;Yw.constructor=Gw;W_(Yw,bc.prototype);Yw.isPureReactComponent=!0;var Xj=Array.isArray,K_=Object.prototype.hasOwnProperty,Xw={current:null},Q_={key:!0,ref:!0,__self:!0,__source:!0};function G_(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)K_.call(t,r)&&!Q_.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:wf,type:e,key:s,ref:a,props:i,_owner:Xw.current}}function BL(e,t){return{$$typeof:wf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zw(e){return typeof e=="object"&&e!==null&&e.$$typeof===wf}function UL(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zj=/\/+/g;function sx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?UL(""+e.key):t.toString(36)}function tp(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case wf:case EL:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+sx(a,0):r,Xj(i)?(n="",e!=null&&(n=e.replace(Zj,"$&/")+"/"),tp(i,t,n,"",function(u){return u})):i!=null&&(Zw(i)&&(i=BL(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Zj,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",Xj(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+sx(s,l);a+=tp(s,t,n,c,i)}else if(c=FL(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+sx(s,l++),a+=tp(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function eh(e,t,n){if(e==null)return e;var r=[],i=0;return tp(e,r,"","",function(s){return t.call(n,s,i++)}),r}function zL(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wn={current:null},np={transition:null},HL={ReactCurrentDispatcher:Wn,ReactCurrentBatchConfig:np,ReactCurrentOwner:Xw};function Y_(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:eh,forEach:function(e,t,n){eh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return eh(e,function(){t++}),t},toArray:function(e){return eh(e,function(t){return t})||[]},only:function(e){if(!Zw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Je.Component=bc;Je.Fragment=_L;Je.Profiler=OL;Je.PureComponent=Gw;Je.StrictMode=TL;Je.Suspense=ML;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HL;Je.act=Y_;Je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=W_({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Xw.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)K_.call(t,c)&&!Q_.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:wf,type:e.type,key:i,ref:s,props:r,_owner:a}};Je.createContext=function(e){return e={$$typeof:DL,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:IL,_context:e},e.Consumer=e};Je.createElement=G_;Je.createFactory=function(e){var t=G_.bind(null,e);return t.type=e,t};Je.createRef=function(){return{current:null}};Je.forwardRef=function(e){return{$$typeof:RL,render:e}};Je.isValidElement=Zw;Je.lazy=function(e){return{$$typeof:LL,_payload:{_status:-1,_result:e},_init:zL}};Je.memo=function(e,t){return{$$typeof:$L,type:e,compare:t===void 0?null:t}};Je.startTransition=function(e){var t=np.transition;np.transition={};try{e()}finally{np.transition=t}};Je.unstable_act=Y_;Je.useCallback=function(e,t){return Wn.current.useCallback(e,t)};Je.useContext=function(e){return Wn.current.useContext(e)};Je.useDebugValue=function(){};Je.useDeferredValue=function(e){return Wn.current.useDeferredValue(e)};Je.useEffect=function(e,t){return Wn.current.useEffect(e,t)};Je.useId=function(){return Wn.current.useId()};Je.useImperativeHandle=function(e,t,n){return Wn.current.useImperativeHandle(e,t,n)};Je.useInsertionEffect=function(e,t){return Wn.current.useInsertionEffect(e,t)};Je.useLayoutEffect=function(e,t){return Wn.current.useLayoutEffect(e,t)};Je.useMemo=function(e,t){return Wn.current.useMemo(e,t)};Je.useReducer=function(e,t,n){return Wn.current.useReducer(e,t,n)};Je.useRef=function(e){return Wn.current.useRef(e)};Je.useState=function(e){return Wn.current.useState(e)};Je.useSyncExternalStore=function(e,t,n){return Wn.current.useSyncExternalStore(e,t,n)};Je.useTransition=function(){return Wn.current.useTransition()};Je.version="18.3.1";z_.exports=Je;var b=z_.exports;const W=ct(b),Op=CL({__proto__:null,default:W},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WL=b,qL=Symbol.for("react.element"),VL=Symbol.for("react.fragment"),KL=Object.prototype.hasOwnProperty,QL=WL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GL={key:!0,ref:!0,__self:!0,__source:!0};function X_(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)KL.call(t,r)&&!GL.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:qL,type:e,key:s,ref:a,props:i,_owner:QL.current}}Pg.Fragment=VL;Pg.jsx=X_;Pg.jsxs=X_;U_.exports=Pg;var o=U_.exports,Z_={exports:{}},wr={},J_={exports:{}},eT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,D){var H=T.length;T.push(D);e:for(;0<H;){var F=H-1>>>1,B=T[F];if(0<i(B,D))T[F]=D,T[H]=B,H=F;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var D=T[0],H=T.pop();if(H!==D){T[0]=H;e:for(var F=0,B=T.length,Z=B>>>1;F<Z;){var V=2*(F+1)-1,G=T[V],X=V+1,U=T[X];if(0>i(G,H))X<B&&0>i(U,G)?(T[F]=U,T[X]=H,F=X):(T[F]=G,T[V]=H,F=V);else if(X<B&&0>i(U,H))T[F]=U,T[X]=H,F=X;else break e}}return D}function i(T,D){var H=T.sortIndex-D.sortIndex;return H!==0?H:T.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=T)r(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(u)}}function j(T){if(m=!1,w(T),!g)if(n(c)!==null)g=!0,$(S);else{var D=n(u);D!==null&&E(j,D.startTime-T)}}function S(T,D){g=!1,m&&(m=!1,v(P),P=-1),p=!0;var H=h;try{for(w(D),f=n(c);f!==null&&(!(f.expirationTime>D)||T&&!_());){var F=f.callback;if(typeof F=="function"){f.callback=null,h=f.priorityLevel;var B=F(f.expirationTime<=D);D=e.unstable_now(),typeof B=="function"?f.callback=B:f===n(c)&&r(c),w(D)}else r(c);f=n(c)}if(f!==null)var Z=!0;else{var V=n(u);V!==null&&E(j,V.startTime-D),Z=!1}return Z}finally{f=null,h=H,p=!1}}var k=!1,N=null,P=-1,A=5,C=-1;function _(){return!(e.unstable_now()-C<A)}function R(){if(N!==null){var T=e.unstable_now();C=T;var D=!0;try{D=N(!0,T)}finally{D?z():(k=!1,N=null)}}else k=!1}var z;if(typeof x=="function")z=function(){x(R)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,I=M.port2;M.port1.onmessage=R,z=function(){I.postMessage(null)}}else z=function(){y(R,0)};function $(T){N=T,k||(k=!0,z())}function E(T,D){P=y(function(){T(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,$(S))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var H=h;h=D;try{return T()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,D){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var H=h;h=T;try{return D()}finally{h=H}},e.unstable_scheduleCallback=function(T,D,H){var F=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?F+H:F):H=F,T){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=H+B,T={id:d++,callback:D,priorityLevel:T,startTime:H,expirationTime:B,sortIndex:-1},H>F?(T.sortIndex=H,t(u,T),n(c)===null&&T===n(u)&&(m?(v(P),P=-1):m=!0,E(j,H-F))):(T.sortIndex=B,t(c,T),g||p||(g=!0,$(S))),T},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(T){var D=h;return function(){var H=h;h=D;try{return T.apply(this,arguments)}finally{h=H}}}})(eT);J_.exports=eT;var YL=J_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XL=b,vr=YL;function we(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tT=new Set,ad={};function bo(e,t){Rl(e,t),Rl(e+"Capture",t)}function Rl(e,t){for(ad[e]=t,e=0;e<t.length;e++)tT.add(t[e])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L0=Object.prototype.hasOwnProperty,ZL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jj={},eN={};function JL(e){return L0.call(eN,e)?!0:L0.call(Jj,e)?!1:ZL.test(e)?eN[e]=!0:(Jj[e]=!0,!1)}function e3(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function t3(e,t,n,r){if(t===null||typeof t>"u"||e3(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qn(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wn[e]=new qn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wn[t]=new qn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wn[e]=new qn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wn[e]=new qn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wn[e]=new qn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wn[e]=new qn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wn[e]=new qn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wn[e]=new qn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wn[e]=new qn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jw=/[\-:]([a-z])/g;function e1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jw,e1);wn[t]=new qn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jw,e1);wn[t]=new qn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jw,e1);wn[t]=new qn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wn[e]=new qn(e,1,!1,e.toLowerCase(),null,!1,!1)});wn.xlinkHref=new qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wn[e]=new qn(e,1,!1,e.toLowerCase(),null,!0,!0)});function t1(e,t,n,r){var i=wn.hasOwnProperty(t)?wn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t3(t,n,i,r)&&(n=null),r||i===null?JL(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ys=XL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,th=Symbol.for("react.element"),el=Symbol.for("react.portal"),tl=Symbol.for("react.fragment"),n1=Symbol.for("react.strict_mode"),F0=Symbol.for("react.profiler"),nT=Symbol.for("react.provider"),rT=Symbol.for("react.context"),r1=Symbol.for("react.forward_ref"),B0=Symbol.for("react.suspense"),U0=Symbol.for("react.suspense_list"),i1=Symbol.for("react.memo"),Es=Symbol.for("react.lazy"),iT=Symbol.for("react.offscreen"),tN=Symbol.iterator;function Jc(e){return e===null||typeof e!="object"?null:(e=tN&&e[tN]||e["@@iterator"],typeof e=="function"?e:null)}var Ut=Object.assign,ax;function ku(e){if(ax===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ax=t&&t[1]||""}return`
`+ax+e}var ox=!1;function lx(e,t){if(!e||ox)return"";ox=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{ox=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ku(e):""}function n3(e){switch(e.tag){case 5:return ku(e.type);case 16:return ku("Lazy");case 13:return ku("Suspense");case 19:return ku("SuspenseList");case 0:case 2:case 15:return e=lx(e.type,!1),e;case 11:return e=lx(e.type.render,!1),e;case 1:return e=lx(e.type,!0),e;default:return""}}function z0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tl:return"Fragment";case el:return"Portal";case F0:return"Profiler";case n1:return"StrictMode";case B0:return"Suspense";case U0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rT:return(e.displayName||"Context")+".Consumer";case nT:return(e._context.displayName||"Context")+".Provider";case r1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case i1:return t=e.displayName||null,t!==null?t:z0(e.type)||"Memo";case Es:t=e._payload,e=e._init;try{return z0(e(t))}catch{}}return null}function r3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z0(t);case 8:return t===n1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function na(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function i3(e){var t=sT(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nh(e){e._valueTracker||(e._valueTracker=i3(e))}function aT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=sT(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ip(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function H0(e,t){var n=t.checked;return Ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function nN(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=na(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oT(e,t){t=t.checked,t!=null&&t1(e,"checked",t,!1)}function W0(e,t){oT(e,t);var n=na(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?q0(e,t.type,n):t.hasOwnProperty("defaultValue")&&q0(e,t.type,na(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rN(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function q0(e,t,n){(t!=="number"||Ip(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Pu=Array.isArray;function bl(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+na(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function V0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(we(91));return Ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function iN(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(we(92));if(Pu(n)){if(1<n.length)throw Error(we(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:na(n)}}function lT(e,t){var n=na(t.value),r=na(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sN(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rh,uT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rh=rh||document.createElement("div"),rh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function od(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Fu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s3=["Webkit","ms","Moz","O"];Object.keys(Fu).forEach(function(e){s3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fu[t]=Fu[e]})});function dT(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Fu.hasOwnProperty(e)&&Fu[e]?(""+t).trim():t+"px"}function fT(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=dT(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var a3=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Q0(e,t){if(t){if(a3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(we(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(we(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(we(61))}if(t.style!=null&&typeof t.style!="object")throw Error(we(62))}}function G0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y0=null;function s1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var X0=null,wl=null,Sl=null;function aN(e){if(e=Nf(e)){if(typeof X0!="function")throw Error(we(280));var t=e.stateNode;t&&(t=Tg(t),X0(e.stateNode,e.type,t))}}function hT(e){wl?Sl?Sl.push(e):Sl=[e]:wl=e}function pT(){if(wl){var e=wl,t=Sl;if(Sl=wl=null,aN(e),t)for(e=0;e<t.length;e++)aN(t[e])}}function mT(e,t){return e(t)}function gT(){}var cx=!1;function yT(e,t,n){if(cx)return e(t,n);cx=!0;try{return mT(e,t,n)}finally{cx=!1,(wl!==null||Sl!==null)&&(gT(),pT())}}function ld(e,t){var n=e.stateNode;if(n===null)return null;var r=Tg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(we(231,t,typeof n));return n}var Z0=!1;if(as)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){Z0=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{Z0=!1}function o3(e,t,n,r,i,s,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Bu=!1,Dp=null,Rp=!1,J0=null,l3={onError:function(e){Bu=!0,Dp=e}};function c3(e,t,n,r,i,s,a,l,c){Bu=!1,Dp=null,o3.apply(l3,arguments)}function u3(e,t,n,r,i,s,a,l,c){if(c3.apply(this,arguments),Bu){if(Bu){var u=Dp;Bu=!1,Dp=null}else throw Error(we(198));Rp||(Rp=!0,J0=u)}}function wo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oN(e){if(wo(e)!==e)throw Error(we(188))}function d3(e){var t=e.alternate;if(!t){if(t=wo(e),t===null)throw Error(we(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return oN(i),e;if(s===r)return oN(i),t;s=s.sibling}throw Error(we(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(we(189))}}if(n.alternate!==r)throw Error(we(190))}if(n.tag!==3)throw Error(we(188));return n.stateNode.current===n?e:t}function vT(e){return e=d3(e),e!==null?bT(e):null}function bT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bT(e);if(t!==null)return t;e=e.sibling}return null}var wT=vr.unstable_scheduleCallback,lN=vr.unstable_cancelCallback,f3=vr.unstable_shouldYield,h3=vr.unstable_requestPaint,qt=vr.unstable_now,p3=vr.unstable_getCurrentPriorityLevel,a1=vr.unstable_ImmediatePriority,ST=vr.unstable_UserBlockingPriority,Mp=vr.unstable_NormalPriority,m3=vr.unstable_LowPriority,jT=vr.unstable_IdlePriority,Cg=null,ji=null;function g3(e){if(ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(Cg,e,void 0,(e.current.flags&128)===128)}catch{}}var ri=Math.clz32?Math.clz32:v3,y3=Math.log,x3=Math.LN2;function v3(e){return e>>>=0,e===0?32:31-(y3(e)/x3|0)|0}var ih=64,sh=4194304;function Cu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $p(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Cu(l):(s&=a,s!==0&&(r=Cu(s)))}else a=n&~i,a!==0?r=Cu(a):s!==0&&(r=Cu(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ri(t),i=1<<n,r|=e[n],t&=~i;return r}function b3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w3(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-ri(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=b3(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function ev(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function NT(){var e=ih;return ih<<=1,!(ih&4194240)&&(ih=64),e}function ux(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Sf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ri(t),e[t]=n}function S3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ri(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function o1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ri(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function kT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var PT,l1,CT,AT,ET,tv=!1,ah=[],Ws=null,qs=null,Vs=null,cd=new Map,ud=new Map,Is=[],j3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cN(e,t){switch(e){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":cd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ud.delete(t.pointerId)}}function tu(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Nf(t),t!==null&&l1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function N3(e,t,n,r,i){switch(t){case"focusin":return Ws=tu(Ws,e,t,n,r,i),!0;case"dragenter":return qs=tu(qs,e,t,n,r,i),!0;case"mouseover":return Vs=tu(Vs,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return cd.set(s,tu(cd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ud.set(s,tu(ud.get(s)||null,e,t,n,r,i)),!0}return!1}function _T(e){var t=Ba(e.target);if(t!==null){var n=wo(t);if(n!==null){if(t=n.tag,t===13){if(t=xT(n),t!==null){e.blockedOn=t,ET(e.priority,function(){CT(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Y0=r,n.target.dispatchEvent(r),Y0=null}else return t=Nf(n),t!==null&&l1(t),e.blockedOn=n,!1;t.shift()}return!0}function uN(e,t,n){rp(e)&&n.delete(t)}function k3(){tv=!1,Ws!==null&&rp(Ws)&&(Ws=null),qs!==null&&rp(qs)&&(qs=null),Vs!==null&&rp(Vs)&&(Vs=null),cd.forEach(uN),ud.forEach(uN)}function nu(e,t){e.blockedOn===t&&(e.blockedOn=null,tv||(tv=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,k3)))}function dd(e){function t(i){return nu(i,e)}if(0<ah.length){nu(ah[0],e);for(var n=1;n<ah.length;n++){var r=ah[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ws!==null&&nu(Ws,e),qs!==null&&nu(qs,e),Vs!==null&&nu(Vs,e),cd.forEach(t),ud.forEach(t),n=0;n<Is.length;n++)r=Is[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Is.length&&(n=Is[0],n.blockedOn===null);)_T(n),n.blockedOn===null&&Is.shift()}var jl=ys.ReactCurrentBatchConfig,Lp=!0;function P3(e,t,n,r){var i=xt,s=jl.transition;jl.transition=null;try{xt=1,c1(e,t,n,r)}finally{xt=i,jl.transition=s}}function C3(e,t,n,r){var i=xt,s=jl.transition;jl.transition=null;try{xt=4,c1(e,t,n,r)}finally{xt=i,jl.transition=s}}function c1(e,t,n,r){if(Lp){var i=nv(e,t,n,r);if(i===null)bx(e,t,r,Fp,n),cN(e,r);else if(N3(i,e,t,n,r))r.stopPropagation();else if(cN(e,r),t&4&&-1<j3.indexOf(e)){for(;i!==null;){var s=Nf(i);if(s!==null&&PT(s),s=nv(e,t,n,r),s===null&&bx(e,t,r,Fp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else bx(e,t,r,null,n)}}var Fp=null;function nv(e,t,n,r){if(Fp=null,e=s1(r),e=Ba(e),e!==null)if(t=wo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xT(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fp=e,null}function TT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p3()){case a1:return 1;case ST:return 4;case Mp:case m3:return 16;case jT:return 536870912;default:return 16}default:return 16}}var Ms=null,u1=null,ip=null;function OT(){if(ip)return ip;var e,t=u1,n=t.length,r,i="value"in Ms?Ms.value:Ms.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return ip=i.slice(e,1<r?1-r:void 0)}function sp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function oh(){return!0}function dN(){return!1}function Sr(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?oh:dN,this.isPropagationStopped=dN,this}return Ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=oh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=oh)},persist:function(){},isPersistent:oh}),t}var wc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},d1=Sr(wc),jf=Ut({},wc,{view:0,detail:0}),A3=Sr(jf),dx,fx,ru,Ag=Ut({},jf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:f1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ru&&(ru&&e.type==="mousemove"?(dx=e.screenX-ru.screenX,fx=e.screenY-ru.screenY):fx=dx=0,ru=e),dx)},movementY:function(e){return"movementY"in e?e.movementY:fx}}),fN=Sr(Ag),E3=Ut({},Ag,{dataTransfer:0}),_3=Sr(E3),T3=Ut({},jf,{relatedTarget:0}),hx=Sr(T3),O3=Ut({},wc,{animationName:0,elapsedTime:0,pseudoElement:0}),I3=Sr(O3),D3=Ut({},wc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),R3=Sr(D3),M3=Ut({},wc,{data:0}),hN=Sr(M3),$3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F3[e])?!!t[e]:!1}function f1(){return B3}var U3=Ut({},jf,{key:function(e){if(e.key){var t=$3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?L3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:f1,charCode:function(e){return e.type==="keypress"?sp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),z3=Sr(U3),H3=Ut({},Ag,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pN=Sr(H3),W3=Ut({},jf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:f1}),q3=Sr(W3),V3=Ut({},wc,{propertyName:0,elapsedTime:0,pseudoElement:0}),K3=Sr(V3),Q3=Ut({},Ag,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G3=Sr(Q3),Y3=[9,13,27,32],h1=as&&"CompositionEvent"in window,Uu=null;as&&"documentMode"in document&&(Uu=document.documentMode);var X3=as&&"TextEvent"in window&&!Uu,IT=as&&(!h1||Uu&&8<Uu&&11>=Uu),mN=" ",gN=!1;function DT(e,t){switch(e){case"keyup":return Y3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nl=!1;function Z3(e,t){switch(e){case"compositionend":return RT(t);case"keypress":return t.which!==32?null:(gN=!0,mN);case"textInput":return e=t.data,e===mN&&gN?null:e;default:return null}}function J3(e,t){if(nl)return e==="compositionend"||!h1&&DT(e,t)?(e=OT(),ip=u1=Ms=null,nl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return IT&&t.locale!=="ko"?null:t.data;default:return null}}var eF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eF[e.type]:t==="textarea"}function MT(e,t,n,r){hT(r),t=Bp(t,"onChange"),0<t.length&&(n=new d1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zu=null,fd=null;function tF(e){KT(e,0)}function Eg(e){var t=sl(e);if(aT(t))return e}function nF(e,t){if(e==="change")return t}var $T=!1;if(as){var px;if(as){var mx="oninput"in document;if(!mx){var xN=document.createElement("div");xN.setAttribute("oninput","return;"),mx=typeof xN.oninput=="function"}px=mx}else px=!1;$T=px&&(!document.documentMode||9<document.documentMode)}function vN(){zu&&(zu.detachEvent("onpropertychange",LT),fd=zu=null)}function LT(e){if(e.propertyName==="value"&&Eg(fd)){var t=[];MT(t,fd,e,s1(e)),yT(tF,t)}}function rF(e,t,n){e==="focusin"?(vN(),zu=t,fd=n,zu.attachEvent("onpropertychange",LT)):e==="focusout"&&vN()}function iF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Eg(fd)}function sF(e,t){if(e==="click")return Eg(t)}function aF(e,t){if(e==="input"||e==="change")return Eg(t)}function oF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ai=typeof Object.is=="function"?Object.is:oF;function hd(e,t){if(ai(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!L0.call(t,i)||!ai(e[i],t[i]))return!1}return!0}function bN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wN(e,t){var n=bN(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bN(n)}}function FT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?FT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function BT(){for(var e=window,t=Ip();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ip(e.document)}return t}function p1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lF(e){var t=BT(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&FT(n.ownerDocument.documentElement,n)){if(r!==null&&p1(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=wN(n,s);var a=wN(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var cF=as&&"documentMode"in document&&11>=document.documentMode,rl=null,rv=null,Hu=null,iv=!1;function SN(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iv||rl==null||rl!==Ip(r)||(r=rl,"selectionStart"in r&&p1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hu&&hd(Hu,r)||(Hu=r,r=Bp(rv,"onSelect"),0<r.length&&(t=new d1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rl)))}function lh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var il={animationend:lh("Animation","AnimationEnd"),animationiteration:lh("Animation","AnimationIteration"),animationstart:lh("Animation","AnimationStart"),transitionend:lh("Transition","TransitionEnd")},gx={},UT={};as&&(UT=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function _g(e){if(gx[e])return gx[e];if(!il[e])return e;var t=il[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in UT)return gx[e]=t[n];return e}var zT=_g("animationend"),HT=_g("animationiteration"),WT=_g("animationstart"),qT=_g("transitionend"),VT=new Map,jN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fa(e,t){VT.set(e,t),bo(t,[e])}for(var yx=0;yx<jN.length;yx++){var xx=jN[yx],uF=xx.toLowerCase(),dF=xx[0].toUpperCase()+xx.slice(1);fa(uF,"on"+dF)}fa(zT,"onAnimationEnd");fa(HT,"onAnimationIteration");fa(WT,"onAnimationStart");fa("dblclick","onDoubleClick");fa("focusin","onFocus");fa("focusout","onBlur");fa(qT,"onTransitionEnd");Rl("onMouseEnter",["mouseout","mouseover"]);Rl("onMouseLeave",["mouseout","mouseover"]);Rl("onPointerEnter",["pointerout","pointerover"]);Rl("onPointerLeave",["pointerout","pointerover"]);bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Au));function NN(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,u3(r,t,void 0,e),e.currentTarget=null}function KT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;NN(i,l,u),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;NN(i,l,u),s=c}}}if(Rp)throw e=J0,Rp=!1,J0=null,e}function At(e,t){var n=t[cv];n===void 0&&(n=t[cv]=new Set);var r=e+"__bubble";n.has(r)||(QT(t,e,2,!1),n.add(r))}function vx(e,t,n){var r=0;t&&(r|=4),QT(n,e,r,t)}var ch="_reactListening"+Math.random().toString(36).slice(2);function pd(e){if(!e[ch]){e[ch]=!0,tT.forEach(function(n){n!=="selectionchange"&&(fF.has(n)||vx(n,!1,e),vx(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ch]||(t[ch]=!0,vx("selectionchange",!1,t))}}function QT(e,t,n,r){switch(TT(t)){case 1:var i=P3;break;case 4:i=C3;break;default:i=c1}n=i.bind(null,t,n,e),i=void 0,!Z0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function bx(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Ba(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}yT(function(){var u=s,d=s1(n),f=[];e:{var h=VT.get(e);if(h!==void 0){var p=d1,g=e;switch(e){case"keypress":if(sp(n)===0)break e;case"keydown":case"keyup":p=z3;break;case"focusin":g="focus",p=hx;break;case"focusout":g="blur",p=hx;break;case"beforeblur":case"afterblur":p=hx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=fN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=_3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=q3;break;case zT:case HT:case WT:p=I3;break;case qT:p=K3;break;case"scroll":p=A3;break;case"wheel":p=G3;break;case"copy":case"cut":case"paste":p=R3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=pN}var m=(t&4)!==0,y=!m&&e==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var x=u,w;x!==null;){w=x;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,v!==null&&(j=ld(x,v),j!=null&&m.push(md(x,j,w)))),y)break;x=x.return}0<m.length&&(h=new p(h,g,null,n,d),f.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&n!==Y0&&(g=n.relatedTarget||n.fromElement)&&(Ba(g)||g[os]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?Ba(g):null,g!==null&&(y=wo(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(m=fN,j="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(m=pN,j="onPointerLeave",v="onPointerEnter",x="pointer"),y=p==null?h:sl(p),w=g==null?h:sl(g),h=new m(j,x+"leave",p,n,d),h.target=y,h.relatedTarget=w,j=null,Ba(d)===u&&(m=new m(v,x+"enter",g,n,d),m.target=w,m.relatedTarget=y,j=m),y=j,p&&g)t:{for(m=p,v=g,x=0,w=m;w;w=Fo(w))x++;for(w=0,j=v;j;j=Fo(j))w++;for(;0<x-w;)m=Fo(m),x--;for(;0<w-x;)v=Fo(v),w--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=Fo(m),v=Fo(v)}m=null}else m=null;p!==null&&kN(f,h,p,m,!1),g!==null&&y!==null&&kN(f,y,g,m,!0)}}e:{if(h=u?sl(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=nF;else if(yN(h))if($T)S=aF;else{S=iF;var k=rF}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=sF);if(S&&(S=S(e,u))){MT(f,S,n,d);break e}k&&k(e,h,u),e==="focusout"&&(k=h._wrapperState)&&k.controlled&&h.type==="number"&&q0(h,"number",h.value)}switch(k=u?sl(u):window,e){case"focusin":(yN(k)||k.contentEditable==="true")&&(rl=k,rv=u,Hu=null);break;case"focusout":Hu=rv=rl=null;break;case"mousedown":iv=!0;break;case"contextmenu":case"mouseup":case"dragend":iv=!1,SN(f,n,d);break;case"selectionchange":if(cF)break;case"keydown":case"keyup":SN(f,n,d)}var N;if(h1)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else nl?DT(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(IT&&n.locale!=="ko"&&(nl||P!=="onCompositionStart"?P==="onCompositionEnd"&&nl&&(N=OT()):(Ms=d,u1="value"in Ms?Ms.value:Ms.textContent,nl=!0)),k=Bp(u,P),0<k.length&&(P=new hN(P,e,null,n,d),f.push({event:P,listeners:k}),N?P.data=N:(N=RT(n),N!==null&&(P.data=N)))),(N=X3?Z3(e,n):J3(e,n))&&(u=Bp(u,"onBeforeInput"),0<u.length&&(d=new hN("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=N))}KT(f,t)})}function md(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bp(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ld(e,n),s!=null&&r.unshift(md(e,s,i)),s=ld(e,t),s!=null&&r.push(md(e,s,i))),e=e.return}return r}function Fo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kN(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=ld(n,s),c!=null&&a.unshift(md(n,c,l))):i||(c=ld(n,s),c!=null&&a.push(md(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var hF=/\r\n?/g,pF=/\u0000|\uFFFD/g;function PN(e){return(typeof e=="string"?e:""+e).replace(hF,`
`).replace(pF,"")}function uh(e,t,n){if(t=PN(t),PN(e)!==t&&n)throw Error(we(425))}function Up(){}var sv=null,av=null;function ov(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lv=typeof setTimeout=="function"?setTimeout:void 0,mF=typeof clearTimeout=="function"?clearTimeout:void 0,CN=typeof Promise=="function"?Promise:void 0,gF=typeof queueMicrotask=="function"?queueMicrotask:typeof CN<"u"?function(e){return CN.resolve(null).then(e).catch(yF)}:lv;function yF(e){setTimeout(function(){throw e})}function wx(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),dd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);dd(t)}function Ks(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function AN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Sc=Math.random().toString(36).slice(2),bi="__reactFiber$"+Sc,gd="__reactProps$"+Sc,os="__reactContainer$"+Sc,cv="__reactEvents$"+Sc,xF="__reactListeners$"+Sc,vF="__reactHandles$"+Sc;function Ba(e){var t=e[bi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[os]||n[bi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=AN(e);e!==null;){if(n=e[bi])return n;e=AN(e)}return t}e=n,n=e.parentNode}return null}function Nf(e){return e=e[bi]||e[os],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(we(33))}function Tg(e){return e[gd]||null}var uv=[],al=-1;function ha(e){return{current:e}}function Ot(e){0>al||(e.current=uv[al],uv[al]=null,al--)}function Pt(e,t){al++,uv[al]=e.current,e.current=t}var ra={},Dn=ha(ra),Zn=ha(!1),io=ra;function Ml(e,t){var n=e.type.contextTypes;if(!n)return ra;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Jn(e){return e=e.childContextTypes,e!=null}function zp(){Ot(Zn),Ot(Dn)}function EN(e,t,n){if(Dn.current!==ra)throw Error(we(168));Pt(Dn,t),Pt(Zn,n)}function GT(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(we(108,r3(e)||"Unknown",i));return Ut({},n,r)}function Hp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ra,io=Dn.current,Pt(Dn,e),Pt(Zn,Zn.current),!0}function _N(e,t,n){var r=e.stateNode;if(!r)throw Error(we(169));n?(e=GT(e,t,io),r.__reactInternalMemoizedMergedChildContext=e,Ot(Zn),Ot(Dn),Pt(Dn,e)):Ot(Zn),Pt(Zn,n)}var qi=null,Og=!1,Sx=!1;function YT(e){qi===null?qi=[e]:qi.push(e)}function bF(e){Og=!0,YT(e)}function pa(){if(!Sx&&qi!==null){Sx=!0;var e=0,t=xt;try{var n=qi;for(xt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qi=null,Og=!1}catch(i){throw qi!==null&&(qi=qi.slice(e+1)),wT(a1,pa),i}finally{xt=t,Sx=!1}}return null}var ol=[],ll=0,Wp=null,qp=0,Er=[],_r=0,so=null,Ki=1,Qi="";function Ta(e,t){ol[ll++]=qp,ol[ll++]=Wp,Wp=e,qp=t}function XT(e,t,n){Er[_r++]=Ki,Er[_r++]=Qi,Er[_r++]=so,so=e;var r=Ki;e=Qi;var i=32-ri(r)-1;r&=~(1<<i),n+=1;var s=32-ri(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ki=1<<32-ri(t)+i|n<<i|r,Qi=s+e}else Ki=1<<s|n<<i|r,Qi=e}function m1(e){e.return!==null&&(Ta(e,1),XT(e,1,0))}function g1(e){for(;e===Wp;)Wp=ol[--ll],ol[ll]=null,qp=ol[--ll],ol[ll]=null;for(;e===so;)so=Er[--_r],Er[_r]=null,Qi=Er[--_r],Er[_r]=null,Ki=Er[--_r],Er[_r]=null}var pr=null,hr=null,It=!1,ti=null;function ZT(e,t){var n=Dr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function TN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pr=e,hr=Ks(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pr=e,hr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=so!==null?{id:Ki,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Dr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,pr=e,hr=null,!0):!1;default:return!1}}function dv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fv(e){if(It){var t=hr;if(t){var n=t;if(!TN(e,t)){if(dv(e))throw Error(we(418));t=Ks(n.nextSibling);var r=pr;t&&TN(e,t)?ZT(r,n):(e.flags=e.flags&-4097|2,It=!1,pr=e)}}else{if(dv(e))throw Error(we(418));e.flags=e.flags&-4097|2,It=!1,pr=e}}}function ON(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pr=e}function dh(e){if(e!==pr)return!1;if(!It)return ON(e),It=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ov(e.type,e.memoizedProps)),t&&(t=hr)){if(dv(e))throw JT(),Error(we(418));for(;t;)ZT(e,t),t=Ks(t.nextSibling)}if(ON(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(we(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){hr=Ks(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}hr=null}}else hr=pr?Ks(e.stateNode.nextSibling):null;return!0}function JT(){for(var e=hr;e;)e=Ks(e.nextSibling)}function $l(){hr=pr=null,It=!1}function y1(e){ti===null?ti=[e]:ti.push(e)}var wF=ys.ReactCurrentBatchConfig;function iu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(we(309));var r=n.stateNode}if(!r)throw Error(we(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(we(284));if(!n._owner)throw Error(we(290,e))}return e}function fh(e,t){throw e=Object.prototype.toString.call(t),Error(we(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function IN(e){var t=e._init;return t(e._payload)}function eO(e){function t(v,x){if(e){var w=v.deletions;w===null?(v.deletions=[x],v.flags|=16):w.push(x)}}function n(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=Xs(v,x),v.index=0,v.sibling=null,v}function s(v,x,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<x?(v.flags|=2,x):w):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,w,j){return x===null||x.tag!==6?(x=Ex(w,v.mode,j),x.return=v,x):(x=i(x,w),x.return=v,x)}function c(v,x,w,j){var S=w.type;return S===tl?d(v,x,w.props.children,j,w.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Es&&IN(S)===x.type)?(j=i(x,w.props),j.ref=iu(v,x,w),j.return=v,j):(j=fp(w.type,w.key,w.props,null,v.mode,j),j.ref=iu(v,x,w),j.return=v,j)}function u(v,x,w,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=_x(w,v.mode,j),x.return=v,x):(x=i(x,w.children||[]),x.return=v,x)}function d(v,x,w,j,S){return x===null||x.tag!==7?(x=Ya(w,v.mode,j,S),x.return=v,x):(x=i(x,w),x.return=v,x)}function f(v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ex(""+x,v.mode,w),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case th:return w=fp(x.type,x.key,x.props,null,v.mode,w),w.ref=iu(v,null,x),w.return=v,w;case el:return x=_x(x,v.mode,w),x.return=v,x;case Es:var j=x._init;return f(v,j(x._payload),w)}if(Pu(x)||Jc(x))return x=Ya(x,v.mode,w,null),x.return=v,x;fh(v,x)}return null}function h(v,x,w,j){var S=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(v,x,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case th:return w.key===S?c(v,x,w,j):null;case el:return w.key===S?u(v,x,w,j):null;case Es:return S=w._init,h(v,x,S(w._payload),j)}if(Pu(w)||Jc(w))return S!==null?null:d(v,x,w,j,null);fh(v,w)}return null}function p(v,x,w,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(w)||null,l(x,v,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case th:return v=v.get(j.key===null?w:j.key)||null,c(x,v,j,S);case el:return v=v.get(j.key===null?w:j.key)||null,u(x,v,j,S);case Es:var k=j._init;return p(v,x,w,k(j._payload),S)}if(Pu(j)||Jc(j))return v=v.get(w)||null,d(x,v,j,S,null);fh(x,j)}return null}function g(v,x,w,j){for(var S=null,k=null,N=x,P=x=0,A=null;N!==null&&P<w.length;P++){N.index>P?(A=N,N=null):A=N.sibling;var C=h(v,N,w[P],j);if(C===null){N===null&&(N=A);break}e&&N&&C.alternate===null&&t(v,N),x=s(C,x,P),k===null?S=C:k.sibling=C,k=C,N=A}if(P===w.length)return n(v,N),It&&Ta(v,P),S;if(N===null){for(;P<w.length;P++)N=f(v,w[P],j),N!==null&&(x=s(N,x,P),k===null?S=N:k.sibling=N,k=N);return It&&Ta(v,P),S}for(N=r(v,N);P<w.length;P++)A=p(N,v,P,w[P],j),A!==null&&(e&&A.alternate!==null&&N.delete(A.key===null?P:A.key),x=s(A,x,P),k===null?S=A:k.sibling=A,k=A);return e&&N.forEach(function(_){return t(v,_)}),It&&Ta(v,P),S}function m(v,x,w,j){var S=Jc(w);if(typeof S!="function")throw Error(we(150));if(w=S.call(w),w==null)throw Error(we(151));for(var k=S=null,N=x,P=x=0,A=null,C=w.next();N!==null&&!C.done;P++,C=w.next()){N.index>P?(A=N,N=null):A=N.sibling;var _=h(v,N,C.value,j);if(_===null){N===null&&(N=A);break}e&&N&&_.alternate===null&&t(v,N),x=s(_,x,P),k===null?S=_:k.sibling=_,k=_,N=A}if(C.done)return n(v,N),It&&Ta(v,P),S;if(N===null){for(;!C.done;P++,C=w.next())C=f(v,C.value,j),C!==null&&(x=s(C,x,P),k===null?S=C:k.sibling=C,k=C);return It&&Ta(v,P),S}for(N=r(v,N);!C.done;P++,C=w.next())C=p(N,v,P,C.value,j),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?P:C.key),x=s(C,x,P),k===null?S=C:k.sibling=C,k=C);return e&&N.forEach(function(R){return t(v,R)}),It&&Ta(v,P),S}function y(v,x,w,j){if(typeof w=="object"&&w!==null&&w.type===tl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case th:e:{for(var S=w.key,k=x;k!==null;){if(k.key===S){if(S=w.type,S===tl){if(k.tag===7){n(v,k.sibling),x=i(k,w.props.children),x.return=v,v=x;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Es&&IN(S)===k.type){n(v,k.sibling),x=i(k,w.props),x.ref=iu(v,k,w),x.return=v,v=x;break e}n(v,k);break}else t(v,k);k=k.sibling}w.type===tl?(x=Ya(w.props.children,v.mode,j,w.key),x.return=v,v=x):(j=fp(w.type,w.key,w.props,null,v.mode,j),j.ref=iu(v,x,w),j.return=v,v=j)}return a(v);case el:e:{for(k=w.key;x!==null;){if(x.key===k)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(v,x.sibling),x=i(x,w.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else t(v,x);x=x.sibling}x=_x(w,v.mode,j),x.return=v,v=x}return a(v);case Es:return k=w._init,y(v,x,k(w._payload),j)}if(Pu(w))return g(v,x,w,j);if(Jc(w))return m(v,x,w,j);fh(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,w),x.return=v,v=x):(n(v,x),x=Ex(w,v.mode,j),x.return=v,v=x),a(v)):n(v,x)}return y}var Ll=eO(!0),tO=eO(!1),Vp=ha(null),Kp=null,cl=null,x1=null;function v1(){x1=cl=Kp=null}function b1(e){var t=Vp.current;Ot(Vp),e._currentValue=t}function hv(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Nl(e,t){Kp=e,x1=cl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gn=!0),e.firstContext=null)}function Lr(e){var t=e._currentValue;if(x1!==e)if(e={context:e,memoizedValue:t,next:null},cl===null){if(Kp===null)throw Error(we(308));cl=e,Kp.dependencies={lanes:0,firstContext:e}}else cl=cl.next=e;return t}var Ua=null;function w1(e){Ua===null?Ua=[e]:Ua.push(e)}function nO(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,w1(t)):(n.next=i.next,i.next=n),t.interleaved=n,ls(e,r)}function ls(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var _s=!1;function S1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function es(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,it&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ls(e,n)}return i=r.interleaved,i===null?(t.next=t,w1(r)):(t.next=i.next,i.next=t),r.interleaved=t,ls(e,n)}function ap(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,o1(e,n)}}function DN(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qp(e,t,n,r){var i=e.updateQueue;_s=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;a=0,d=u=c=null,l=s;do{var h=l.lane,p=l.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,m=l;switch(h=t,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=Ut({},f,h);break e;case 2:_s=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);oo|=a,e.lanes=a,e.memoizedState=f}}function RN(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(we(191,i));i.call(r)}}}var kf={},Ni=ha(kf),yd=ha(kf),xd=ha(kf);function za(e){if(e===kf)throw Error(we(174));return e}function j1(e,t){switch(Pt(xd,t),Pt(yd,e),Pt(Ni,kf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:K0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=K0(t,e)}Ot(Ni),Pt(Ni,t)}function Fl(){Ot(Ni),Ot(yd),Ot(xd)}function iO(e){za(xd.current);var t=za(Ni.current),n=K0(t,e.type);t!==n&&(Pt(yd,e),Pt(Ni,n))}function N1(e){yd.current===e&&(Ot(Ni),Ot(yd))}var $t=ha(0);function Gp(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jx=[];function k1(){for(var e=0;e<jx.length;e++)jx[e]._workInProgressVersionPrimary=null;jx.length=0}var op=ys.ReactCurrentDispatcher,Nx=ys.ReactCurrentBatchConfig,ao=0,Ft=null,rn=null,pn=null,Yp=!1,Wu=!1,vd=0,SF=0;function jn(){throw Error(we(321))}function P1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function C1(e,t,n,r,i,s){if(ao=s,Ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,op.current=e===null||e.memoizedState===null?PF:CF,e=n(r,i),Wu){s=0;do{if(Wu=!1,vd=0,25<=s)throw Error(we(301));s+=1,pn=rn=null,t.updateQueue=null,op.current=AF,e=n(r,i)}while(Wu)}if(op.current=Xp,t=rn!==null&&rn.next!==null,ao=0,pn=rn=Ft=null,Yp=!1,t)throw Error(we(300));return e}function A1(){var e=vd!==0;return vd=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Ft.memoizedState=pn=e:pn=pn.next=e,pn}function Fr(){if(rn===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=rn.next;var t=pn===null?Ft.memoizedState:pn.next;if(t!==null)pn=t,rn=e;else{if(e===null)throw Error(we(310));rn=e,e={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},pn===null?Ft.memoizedState=pn=e:pn=pn.next=e}return pn}function bd(e,t){return typeof t=="function"?t(e):t}function kx(e){var t=Fr(),n=t.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=e;var r=rn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ao&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,Ft.lanes|=d,oo|=d}u=u.next}while(u!==null&&u!==s);c===null?a=r:c.next=l,ai(r,t.memoizedState)||(Gn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ft.lanes|=s,oo|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Px(e){var t=Fr(),n=t.queue;if(n===null)throw Error(we(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);ai(s,t.memoizedState)||(Gn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function sO(){}function aO(e,t){var n=Ft,r=Fr(),i=t(),s=!ai(r.memoizedState,i);if(s&&(r.memoizedState=i,Gn=!0),r=r.queue,E1(cO.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||pn!==null&&pn.memoizedState.tag&1){if(n.flags|=2048,wd(9,lO.bind(null,n,r,i,t),void 0,null),gn===null)throw Error(we(349));ao&30||oO(n,t,i)}return i}function oO(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lO(e,t,n,r){t.value=n,t.getSnapshot=r,uO(t)&&dO(e)}function cO(e,t,n){return n(function(){uO(t)&&dO(e)})}function uO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch{return!0}}function dO(e){var t=ls(e,1);t!==null&&ii(t,e,1,-1)}function MN(e){var t=xi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bd,lastRenderedState:e},t.queue=e,e=e.dispatch=kF.bind(null,Ft,e),[t.memoizedState,e]}function wd(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function fO(){return Fr().memoizedState}function lp(e,t,n,r){var i=xi();Ft.flags|=e,i.memoizedState=wd(1|t,n,void 0,r===void 0?null:r)}function Ig(e,t,n,r){var i=Fr();r=r===void 0?null:r;var s=void 0;if(rn!==null){var a=rn.memoizedState;if(s=a.destroy,r!==null&&P1(r,a.deps)){i.memoizedState=wd(t,n,s,r);return}}Ft.flags|=e,i.memoizedState=wd(1|t,n,s,r)}function $N(e,t){return lp(8390656,8,e,t)}function E1(e,t){return Ig(2048,8,e,t)}function hO(e,t){return Ig(4,2,e,t)}function pO(e,t){return Ig(4,4,e,t)}function mO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gO(e,t,n){return n=n!=null?n.concat([e]):null,Ig(4,4,mO.bind(null,t,e),n)}function _1(){}function yO(e,t){var n=Fr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&P1(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xO(e,t){var n=Fr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&P1(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function vO(e,t,n){return ao&21?(ai(n,t)||(n=NT(),Ft.lanes|=n,oo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gn=!0),e.memoizedState=n)}function jF(e,t){var n=xt;xt=n!==0&&4>n?n:4,e(!0);var r=Nx.transition;Nx.transition={};try{e(!1),t()}finally{xt=n,Nx.transition=r}}function bO(){return Fr().memoizedState}function NF(e,t,n){var r=Ys(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wO(e))SO(t,n);else if(n=nO(e,t,n,r),n!==null){var i=Un();ii(n,e,r,i),jO(n,t,r)}}function kF(e,t,n){var r=Ys(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wO(e))SO(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,ai(l,a)){var c=t.interleaved;c===null?(i.next=i,w1(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=nO(e,t,i,r),n!==null&&(i=Un(),ii(n,e,r,i),jO(n,t,r))}}function wO(e){var t=e.alternate;return e===Ft||t!==null&&t===Ft}function SO(e,t){Wu=Yp=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function jO(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,o1(e,n)}}var Xp={readContext:Lr,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},PF={readContext:Lr,useCallback:function(e,t){return xi().memoizedState=[e,t===void 0?null:t],e},useContext:Lr,useEffect:$N,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,lp(4194308,4,mO.bind(null,t,e),n)},useLayoutEffect:function(e,t){return lp(4194308,4,e,t)},useInsertionEffect:function(e,t){return lp(4,2,e,t)},useMemo:function(e,t){var n=xi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=NF.bind(null,Ft,e),[r.memoizedState,e]},useRef:function(e){var t=xi();return e={current:e},t.memoizedState=e},useState:MN,useDebugValue:_1,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=MN(!1),t=e[0];return e=jF.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ft,i=xi();if(It){if(n===void 0)throw Error(we(407));n=n()}else{if(n=t(),gn===null)throw Error(we(349));ao&30||oO(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,$N(cO.bind(null,r,s,e),[e]),r.flags|=2048,wd(9,lO.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=xi(),t=gn.identifierPrefix;if(It){var n=Qi,r=Ki;n=(r&~(1<<32-ri(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=vd++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=SF++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},CF={readContext:Lr,useCallback:yO,useContext:Lr,useEffect:E1,useImperativeHandle:gO,useInsertionEffect:hO,useLayoutEffect:pO,useMemo:xO,useReducer:kx,useRef:fO,useState:function(){return kx(bd)},useDebugValue:_1,useDeferredValue:function(e){var t=Fr();return vO(t,rn.memoizedState,e)},useTransition:function(){var e=kx(bd)[0],t=Fr().memoizedState;return[e,t]},useMutableSource:sO,useSyncExternalStore:aO,useId:bO,unstable_isNewReconciler:!1},AF={readContext:Lr,useCallback:yO,useContext:Lr,useEffect:E1,useImperativeHandle:gO,useInsertionEffect:hO,useLayoutEffect:pO,useMemo:xO,useReducer:Px,useRef:fO,useState:function(){return Px(bd)},useDebugValue:_1,useDeferredValue:function(e){var t=Fr();return rn===null?t.memoizedState=e:vO(t,rn.memoizedState,e)},useTransition:function(){var e=Px(bd)[0],t=Fr().memoizedState;return[e,t]},useMutableSource:sO,useSyncExternalStore:aO,useId:bO,unstable_isNewReconciler:!1};function Gr(e,t){if(e&&e.defaultProps){t=Ut({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pv(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ut({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Dg={isMounted:function(e){return(e=e._reactInternals)?wo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Un(),i=Ys(e),s=es(r,i);s.payload=t,n!=null&&(s.callback=n),t=Qs(e,s,i),t!==null&&(ii(t,e,i,r),ap(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Un(),i=Ys(e),s=es(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Qs(e,s,i),t!==null&&(ii(t,e,i,r),ap(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Un(),r=Ys(e),i=es(n,r);i.tag=2,t!=null&&(i.callback=t),t=Qs(e,i,r),t!==null&&(ii(t,e,r,n),ap(t,e,r))}};function LN(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!hd(n,r)||!hd(i,s):!0}function NO(e,t,n){var r=!1,i=ra,s=t.contextType;return typeof s=="object"&&s!==null?s=Lr(s):(i=Jn(t)?io:Dn.current,r=t.contextTypes,s=(r=r!=null)?Ml(e,i):ra),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Dg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function FN(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Dg.enqueueReplaceState(t,t.state,null)}function mv(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},S1(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Lr(s):(s=Jn(t)?io:Dn.current,i.context=Ml(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(pv(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Dg.enqueueReplaceState(i,i.state,null),Qp(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Bl(e,t){try{var n="",r=t;do n+=n3(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Cx(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gv(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var EF=typeof WeakMap=="function"?WeakMap:Map;function kO(e,t,n){n=es(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Jp||(Jp=!0,Pv=r),gv(e,t)},n}function PO(e,t,n){n=es(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){gv(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){gv(e,t),typeof r!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function BN(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new EF;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=HF.bind(null,e,t,n),t.then(e,e))}function UN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zN(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=es(-1,1),t.tag=2,Qs(n,t,1))),n.lanes|=1),e)}var _F=ys.ReactCurrentOwner,Gn=!1;function $n(e,t,n,r){t.child=e===null?tO(t,null,n,r):Ll(t,e.child,n,r)}function HN(e,t,n,r,i){n=n.render;var s=t.ref;return Nl(t,i),r=C1(e,t,n,r,s,i),n=A1(),e!==null&&!Gn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cs(e,t,i)):(It&&n&&m1(t),t.flags|=1,$n(e,t,r,i),t.child)}function WN(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!L1(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,CO(e,t,s,r,i)):(e=fp(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:hd,n(a,r)&&e.ref===t.ref)return cs(e,t,i)}return t.flags|=1,e=Xs(s,r),e.ref=t.ref,e.return=t,t.child=e}function CO(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(hd(s,r)&&e.ref===t.ref)if(Gn=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Gn=!0);else return t.lanes=e.lanes,cs(e,t,i)}return yv(e,t,n,r,i)}function AO(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(dl,or),or|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pt(dl,or),or|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pt(dl,or),or|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Pt(dl,or),or|=r;return $n(e,t,i,n),t.child}function EO(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function yv(e,t,n,r,i){var s=Jn(n)?io:Dn.current;return s=Ml(t,s),Nl(t,i),n=C1(e,t,n,r,s,i),r=A1(),e!==null&&!Gn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cs(e,t,i)):(It&&r&&m1(t),t.flags|=1,$n(e,t,n,i),t.child)}function qN(e,t,n,r,i){if(Jn(n)){var s=!0;Hp(t)}else s=!1;if(Nl(t,i),t.stateNode===null)cp(e,t),NO(t,n,r),mv(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Lr(u):(u=Jn(n)?io:Dn.current,u=Ml(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&FN(t,a,r,u),_s=!1;var h=t.memoizedState;a.state=h,Qp(t,r,a,i),c=t.memoizedState,l!==r||h!==c||Zn.current||_s?(typeof d=="function"&&(pv(t,n,d,r),c=t.memoizedState),(l=_s||LN(t,n,l,r,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,rO(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Gr(t.type,l),a.props=u,f=t.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Lr(c):(c=Jn(n)?io:Dn.current,c=Ml(t,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||h!==c)&&FN(t,a,r,c),_s=!1,h=t.memoizedState,a.state=h,Qp(t,r,a,i);var g=t.memoizedState;l!==f||h!==g||Zn.current||_s?(typeof p=="function"&&(pv(t,n,p,r),g=t.memoizedState),(u=_s||LN(t,n,u,r,h,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return xv(e,t,n,r,s,i)}function xv(e,t,n,r,i,s){EO(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&_N(t,n,!1),cs(e,t,s);r=t.stateNode,_F.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ll(t,e.child,null,s),t.child=Ll(t,null,l,s)):$n(e,t,l,s),t.memoizedState=r.state,i&&_N(t,n,!0),t.child}function _O(e){var t=e.stateNode;t.pendingContext?EN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&EN(e,t.context,!1),j1(e,t.containerInfo)}function VN(e,t,n,r,i){return $l(),y1(i),t.flags|=256,$n(e,t,n,r),t.child}var vv={dehydrated:null,treeContext:null,retryLane:0};function bv(e){return{baseLanes:e,cachePool:null,transitions:null}}function TO(e,t,n){var r=t.pendingProps,i=$t.current,s=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Pt($t,i&1),e===null)return fv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=$g(a,r,0,null),e=Ya(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=bv(n),t.memoizedState=vv,e):T1(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return TF(e,t,a,r,l,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Xs(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Xs(l,s):(s=Ya(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?bv(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=vv,r}return s=e.child,e=s.sibling,r=Xs(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function T1(e,t){return t=$g({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hh(e,t,n,r){return r!==null&&y1(r),Ll(t,e.child,null,n),e=T1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TF(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Cx(Error(we(422))),hh(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=$g({mode:"visible",children:r.children},i,0,null),s=Ya(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ll(t,e.child,null,a),t.child.memoizedState=bv(a),t.memoizedState=vv,s);if(!(t.mode&1))return hh(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(we(419)),r=Cx(s,r,void 0),hh(e,t,a,r)}if(l=(a&e.childLanes)!==0,Gn||l){if(r=gn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ls(e,i),ii(r,e,i,-1))}return $1(),r=Cx(Error(we(421))),hh(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=WF.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,hr=Ks(i.nextSibling),pr=t,It=!0,ti=null,e!==null&&(Er[_r++]=Ki,Er[_r++]=Qi,Er[_r++]=so,Ki=e.id,Qi=e.overflow,so=t),t=T1(t,r.children),t.flags|=4096,t)}function KN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),hv(e.return,t,n)}function Ax(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function OO(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if($n(e,t,r.children,n),r=$t.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&KN(e,n,t);else if(e.tag===19)KN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pt($t,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Gp(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ax(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Gp(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ax(t,!0,n,null,s);break;case"together":Ax(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),oo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(we(153));if(t.child!==null){for(e=t.child,n=Xs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Xs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function OF(e,t,n){switch(t.tag){case 3:_O(t),$l();break;case 5:iO(t);break;case 1:Jn(t.type)&&Hp(t);break;case 4:j1(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Pt(Vp,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Pt($t,$t.current&1),t.flags|=128,null):n&t.child.childLanes?TO(e,t,n):(Pt($t,$t.current&1),e=cs(e,t,n),e!==null?e.sibling:null);Pt($t,$t.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return OO(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pt($t,$t.current),r)break;return null;case 22:case 23:return t.lanes=0,AO(e,t,n)}return cs(e,t,n)}var IO,wv,DO,RO;IO=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wv=function(){};DO=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,za(Ni.current);var s=null;switch(n){case"input":i=H0(e,i),r=H0(e,r),s=[];break;case"select":i=Ut({},i,{value:void 0}),r=Ut({},r,{value:void 0}),s=[];break;case"textarea":i=V0(e,i),r=V0(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Up)}Q0(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ad.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ad.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&At("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};RO=function(e,t,n,r){n!==r&&(t.flags|=4)};function su(e,t){if(!It)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Nn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function IF(e,t,n){var r=t.pendingProps;switch(g1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(t),null;case 1:return Jn(t.type)&&zp(),Nn(t),null;case 3:return r=t.stateNode,Fl(),Ot(Zn),Ot(Dn),k1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(dh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ti!==null&&(Ev(ti),ti=null))),wv(e,t),Nn(t),null;case 5:N1(t);var i=za(xd.current);if(n=t.type,e!==null&&t.stateNode!=null)DO(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(we(166));return Nn(t),null}if(e=za(Ni.current),dh(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[bi]=t,r[gd]=s,e=(t.mode&1)!==0,n){case"dialog":At("cancel",r),At("close",r);break;case"iframe":case"object":case"embed":At("load",r);break;case"video":case"audio":for(i=0;i<Au.length;i++)At(Au[i],r);break;case"source":At("error",r);break;case"img":case"image":case"link":At("error",r),At("load",r);break;case"details":At("toggle",r);break;case"input":nN(r,s),At("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},At("invalid",r);break;case"textarea":iN(r,s),At("invalid",r)}Q0(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&uh(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&uh(r.textContent,l,e),i=["children",""+l]):ad.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&At("scroll",r)}switch(n){case"input":nh(r),rN(r,s,!0);break;case"textarea":nh(r),sN(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Up)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cT(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[bi]=t,e[gd]=r,IO(e,t,!1,!1),t.stateNode=e;e:{switch(a=G0(n,r),n){case"dialog":At("cancel",e),At("close",e),i=r;break;case"iframe":case"object":case"embed":At("load",e),i=r;break;case"video":case"audio":for(i=0;i<Au.length;i++)At(Au[i],e);i=r;break;case"source":At("error",e),i=r;break;case"img":case"image":case"link":At("error",e),At("load",e),i=r;break;case"details":At("toggle",e),i=r;break;case"input":nN(e,r),i=H0(e,r),At("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ut({},r,{value:void 0}),At("invalid",e);break;case"textarea":iN(e,r),i=V0(e,r),At("invalid",e);break;default:i=r}Q0(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?fT(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&uT(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&od(e,c):typeof c=="number"&&od(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ad.hasOwnProperty(s)?c!=null&&s==="onScroll"&&At("scroll",e):c!=null&&t1(e,s,c,a))}switch(n){case"input":nh(e),rN(e,r,!1);break;case"textarea":nh(e),sN(e);break;case"option":r.value!=null&&e.setAttribute("value",""+na(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?bl(e,!!r.multiple,s,!1):r.defaultValue!=null&&bl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Up)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Nn(t),null;case 6:if(e&&t.stateNode!=null)RO(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(we(166));if(n=za(xd.current),za(Ni.current),dh(t)){if(r=t.stateNode,n=t.memoizedProps,r[bi]=t,(s=r.nodeValue!==n)&&(e=pr,e!==null))switch(e.tag){case 3:uh(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&uh(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bi]=t,t.stateNode=r}return Nn(t),null;case 13:if(Ot($t),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(It&&hr!==null&&t.mode&1&&!(t.flags&128))JT(),$l(),t.flags|=98560,s=!1;else if(s=dh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(we(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(we(317));s[bi]=t}else $l(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Nn(t),s=!1}else ti!==null&&(Ev(ti),ti=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||$t.current&1?ln===0&&(ln=3):$1())),t.updateQueue!==null&&(t.flags|=4),Nn(t),null);case 4:return Fl(),wv(e,t),e===null&&pd(t.stateNode.containerInfo),Nn(t),null;case 10:return b1(t.type._context),Nn(t),null;case 17:return Jn(t.type)&&zp(),Nn(t),null;case 19:if(Ot($t),s=t.memoizedState,s===null)return Nn(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)su(s,!1);else{if(ln!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Gp(e),a!==null){for(t.flags|=128,su(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pt($t,$t.current&1|2),t.child}e=e.sibling}s.tail!==null&&qt()>Ul&&(t.flags|=128,r=!0,su(s,!1),t.lanes=4194304)}else{if(!r)if(e=Gp(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),su(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!It)return Nn(t),null}else 2*qt()-s.renderingStartTime>Ul&&n!==1073741824&&(t.flags|=128,r=!0,su(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=qt(),t.sibling=null,n=$t.current,Pt($t,r?n&1|2:n&1),t):(Nn(t),null);case 22:case 23:return M1(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?or&1073741824&&(Nn(t),t.subtreeFlags&6&&(t.flags|=8192)):Nn(t),null;case 24:return null;case 25:return null}throw Error(we(156,t.tag))}function DF(e,t){switch(g1(t),t.tag){case 1:return Jn(t.type)&&zp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fl(),Ot(Zn),Ot(Dn),k1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return N1(t),null;case 13:if(Ot($t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(we(340));$l()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ot($t),null;case 4:return Fl(),null;case 10:return b1(t.type._context),null;case 22:case 23:return M1(),null;case 24:return null;default:return null}}var ph=!1,Cn=!1,RF=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function ul(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zt(e,t,r)}else n.current=null}function Sv(e,t,n){try{n()}catch(r){zt(e,t,r)}}var QN=!1;function MF(e,t){if(sv=Lp,e=BT(),p1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(l=a+i),f!==s||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===i&&(l=a),h===s&&++d===r&&(c=a),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(av={focusedElem:e,selectionRange:n},Lp=!1,Ie=t;Ie!==null;)if(t=Ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ie=e;else for(;Ie!==null;){t=Ie;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Gr(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(j){zt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}return g=QN,QN=!1,g}function qu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Sv(t,n,s)}i=i.next}while(i!==r)}}function Rg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jv(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function MO(e){var t=e.alternate;t!==null&&(e.alternate=null,MO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bi],delete t[gd],delete t[cv],delete t[xF],delete t[vF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $O(e){return e.tag===5||e.tag===3||e.tag===4}function GN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$O(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Up));else if(r!==4&&(e=e.child,e!==null))for(Nv(e,t,n),e=e.sibling;e!==null;)Nv(e,t,n),e=e.sibling}function kv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(kv(e,t,n),e=e.sibling;e!==null;)kv(e,t,n),e=e.sibling}var vn=null,Yr=!1;function ks(e,t,n){for(n=n.child;n!==null;)LO(e,t,n),n=n.sibling}function LO(e,t,n){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(Cg,n)}catch{}switch(n.tag){case 5:Cn||ul(n,t);case 6:var r=vn,i=Yr;vn=null,ks(e,t,n),vn=r,Yr=i,vn!==null&&(Yr?(e=vn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):vn.removeChild(n.stateNode));break;case 18:vn!==null&&(Yr?(e=vn,n=n.stateNode,e.nodeType===8?wx(e.parentNode,n):e.nodeType===1&&wx(e,n),dd(e)):wx(vn,n.stateNode));break;case 4:r=vn,i=Yr,vn=n.stateNode.containerInfo,Yr=!0,ks(e,t,n),vn=r,Yr=i;break;case 0:case 11:case 14:case 15:if(!Cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Sv(n,t,a),i=i.next}while(i!==r)}ks(e,t,n);break;case 1:if(!Cn&&(ul(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){zt(n,t,l)}ks(e,t,n);break;case 21:ks(e,t,n);break;case 22:n.mode&1?(Cn=(r=Cn)||n.memoizedState!==null,ks(e,t,n),Cn=r):ks(e,t,n);break;default:ks(e,t,n)}}function YN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new RF),t.forEach(function(r){var i=qF.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:vn=l.stateNode,Yr=!1;break e;case 3:vn=l.stateNode.containerInfo,Yr=!0;break e;case 4:vn=l.stateNode.containerInfo,Yr=!0;break e}l=l.return}if(vn===null)throw Error(we(160));LO(s,a,i),vn=null,Yr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){zt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)FO(t,e),t=t.sibling}function FO(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qr(t,e),pi(e),r&4){try{qu(3,e,e.return),Rg(3,e)}catch(m){zt(e,e.return,m)}try{qu(5,e,e.return)}catch(m){zt(e,e.return,m)}}break;case 1:qr(t,e),pi(e),r&512&&n!==null&&ul(n,n.return);break;case 5:if(qr(t,e),pi(e),r&512&&n!==null&&ul(n,n.return),e.flags&32){var i=e.stateNode;try{od(i,"")}catch(m){zt(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&oT(i,s),G0(l,a);var u=G0(l,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?fT(i,f):d==="dangerouslySetInnerHTML"?uT(i,f):d==="children"?od(i,f):t1(i,d,f,u)}switch(l){case"input":W0(i,s);break;case"textarea":lT(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?bl(i,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?bl(i,!!s.multiple,s.defaultValue,!0):bl(i,!!s.multiple,s.multiple?[]:"",!1))}i[gd]=s}catch(m){zt(e,e.return,m)}}break;case 6:if(qr(t,e),pi(e),r&4){if(e.stateNode===null)throw Error(we(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){zt(e,e.return,m)}}break;case 3:if(qr(t,e),pi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dd(t.containerInfo)}catch(m){zt(e,e.return,m)}break;case 4:qr(t,e),pi(e);break;case 13:qr(t,e),pi(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(D1=qt())),r&4&&YN(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Cn=(u=Cn)||d,qr(t,e),Cn=u):qr(t,e),pi(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ie=e,d=e.child;d!==null;){for(f=Ie=d;Ie!==null;){switch(h=Ie,p=h.child,h.tag){case 0:case 11:case 14:case 15:qu(4,h,h.return);break;case 1:ul(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){zt(r,n,m)}}break;case 5:ul(h,h.return);break;case 22:if(h.memoizedState!==null){ZN(f);continue}}p!==null?(p.return=h,Ie=p):ZN(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=dT("display",a))}catch(m){zt(e,e.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){zt(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qr(t,e),pi(e),r&4&&YN(e);break;case 21:break;default:qr(t,e),pi(e)}}function pi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($O(n)){var r=n;break e}n=n.return}throw Error(we(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(od(i,""),r.flags&=-33);var s=GN(e);kv(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=GN(e);Nv(e,l,a);break;default:throw Error(we(161))}}catch(c){zt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $F(e,t,n){Ie=e,BO(e)}function BO(e,t,n){for(var r=(e.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ph;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Cn;l=ph;var u=Cn;if(ph=a,(Cn=c)&&!u)for(Ie=i;Ie!==null;)a=Ie,c=a.child,a.tag===22&&a.memoizedState!==null?JN(i):c!==null?(c.return=a,Ie=c):JN(i);for(;s!==null;)Ie=s,BO(s),s=s.sibling;Ie=i,ph=l,Cn=u}XN(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ie=s):XN(e)}}function XN(e){for(;Ie!==null;){var t=Ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Cn||Rg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Cn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Gr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&RN(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}RN(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&dd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}Cn||t.flags&512&&jv(t)}catch(h){zt(t,t.return,h)}}if(t===e){Ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ie=n;break}Ie=t.return}}function ZN(e){for(;Ie!==null;){var t=Ie;if(t===e){Ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ie=n;break}Ie=t.return}}function JN(e){for(;Ie!==null;){var t=Ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rg(4,t)}catch(c){zt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){zt(t,i,c)}}var s=t.return;try{jv(t)}catch(c){zt(t,s,c)}break;case 5:var a=t.return;try{jv(t)}catch(c){zt(t,a,c)}}}catch(c){zt(t,t.return,c)}if(t===e){Ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ie=l;break}Ie=t.return}}var LF=Math.ceil,Zp=ys.ReactCurrentDispatcher,O1=ys.ReactCurrentOwner,$r=ys.ReactCurrentBatchConfig,it=0,gn=null,Xt=null,bn=0,or=0,dl=ha(0),ln=0,Sd=null,oo=0,Mg=0,I1=0,Vu=null,Kn=null,D1=0,Ul=1/0,Hi=null,Jp=!1,Pv=null,Gs=null,mh=!1,$s=null,em=0,Ku=0,Cv=null,up=-1,dp=0;function Un(){return it&6?qt():up!==-1?up:up=qt()}function Ys(e){return e.mode&1?it&2&&bn!==0?bn&-bn:wF.transition!==null?(dp===0&&(dp=NT()),dp):(e=xt,e!==0||(e=window.event,e=e===void 0?16:TT(e.type)),e):1}function ii(e,t,n,r){if(50<Ku)throw Ku=0,Cv=null,Error(we(185));Sf(e,n,r),(!(it&2)||e!==gn)&&(e===gn&&(!(it&2)&&(Mg|=n),ln===4&&Ds(e,bn)),er(e,r),n===1&&it===0&&!(t.mode&1)&&(Ul=qt()+500,Og&&pa()))}function er(e,t){var n=e.callbackNode;w3(e,t);var r=$p(e,e===gn?bn:0);if(r===0)n!==null&&lN(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lN(n),t===1)e.tag===0?bF(ek.bind(null,e)):YT(ek.bind(null,e)),gF(function(){!(it&6)&&pa()}),n=null;else{switch(kT(r)){case 1:n=a1;break;case 4:n=ST;break;case 16:n=Mp;break;case 536870912:n=jT;break;default:n=Mp}n=QO(n,UO.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function UO(e,t){if(up=-1,dp=0,it&6)throw Error(we(327));var n=e.callbackNode;if(kl()&&e.callbackNode!==n)return null;var r=$p(e,e===gn?bn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=tm(e,r);else{t=r;var i=it;it|=2;var s=HO();(gn!==e||bn!==t)&&(Hi=null,Ul=qt()+500,Ga(e,t));do try{UF();break}catch(l){zO(e,l)}while(!0);v1(),Zp.current=s,it=i,Xt!==null?t=0:(gn=null,bn=0,t=ln)}if(t!==0){if(t===2&&(i=ev(e),i!==0&&(r=i,t=Av(e,i))),t===1)throw n=Sd,Ga(e,0),Ds(e,r),er(e,qt()),n;if(t===6)Ds(e,r);else{if(i=e.current.alternate,!(r&30)&&!FF(i)&&(t=tm(e,r),t===2&&(s=ev(e),s!==0&&(r=s,t=Av(e,s))),t===1))throw n=Sd,Ga(e,0),Ds(e,r),er(e,qt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(we(345));case 2:Oa(e,Kn,Hi);break;case 3:if(Ds(e,r),(r&130023424)===r&&(t=D1+500-qt(),10<t)){if($p(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Un(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=lv(Oa.bind(null,e,Kn,Hi),t);break}Oa(e,Kn,Hi);break;case 4:if(Ds(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ri(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=qt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LF(r/1960))-r,10<r){e.timeoutHandle=lv(Oa.bind(null,e,Kn,Hi),r);break}Oa(e,Kn,Hi);break;case 5:Oa(e,Kn,Hi);break;default:throw Error(we(329))}}}return er(e,qt()),e.callbackNode===n?UO.bind(null,e):null}function Av(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(Ga(e,t).flags|=256),e=tm(e,t),e!==2&&(t=Kn,Kn=n,t!==null&&Ev(t)),e}function Ev(e){Kn===null?Kn=e:Kn.push.apply(Kn,e)}function FF(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ai(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ds(e,t){for(t&=~I1,t&=~Mg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ri(t),r=1<<n;e[n]=-1,t&=~r}}function ek(e){if(it&6)throw Error(we(327));kl();var t=$p(e,0);if(!(t&1))return er(e,qt()),null;var n=tm(e,t);if(e.tag!==0&&n===2){var r=ev(e);r!==0&&(t=r,n=Av(e,r))}if(n===1)throw n=Sd,Ga(e,0),Ds(e,t),er(e,qt()),n;if(n===6)throw Error(we(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Oa(e,Kn,Hi),er(e,qt()),null}function R1(e,t){var n=it;it|=1;try{return e(t)}finally{it=n,it===0&&(Ul=qt()+500,Og&&pa())}}function lo(e){$s!==null&&$s.tag===0&&!(it&6)&&kl();var t=it;it|=1;var n=$r.transition,r=xt;try{if($r.transition=null,xt=1,e)return e()}finally{xt=r,$r.transition=n,it=t,!(it&6)&&pa()}}function M1(){or=dl.current,Ot(dl)}function Ga(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mF(n)),Xt!==null)for(n=Xt.return;n!==null;){var r=n;switch(g1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zp();break;case 3:Fl(),Ot(Zn),Ot(Dn),k1();break;case 5:N1(r);break;case 4:Fl();break;case 13:Ot($t);break;case 19:Ot($t);break;case 10:b1(r.type._context);break;case 22:case 23:M1()}n=n.return}if(gn=e,Xt=e=Xs(e.current,null),bn=or=t,ln=0,Sd=null,I1=Mg=oo=0,Kn=Vu=null,Ua!==null){for(t=0;t<Ua.length;t++)if(n=Ua[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Ua=null}return e}function zO(e,t){do{var n=Xt;try{if(v1(),op.current=Xp,Yp){for(var r=Ft.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Yp=!1}if(ao=0,pn=rn=Ft=null,Wu=!1,vd=0,O1.current=null,n===null||n.return===null){ln=1,Sd=t,Xt=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=bn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=UN(a);if(p!==null){p.flags&=-257,zN(p,a,l,s,t),p.mode&1&&BN(s,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}else{if(!(t&1)){BN(s,u,t),$1();break e}c=Error(we(426))}}else if(It&&l.mode&1){var y=UN(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),zN(y,a,l,s,t),y1(Bl(c,l));break e}}s=c=Bl(c,l),ln!==4&&(ln=2),Vu===null?Vu=[s]:Vu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=kO(s,c,t);DN(s,v);break e;case 1:l=c;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Gs===null||!Gs.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var j=PO(s,l,t);DN(s,j);break e}}s=s.return}while(s!==null)}qO(n)}catch(S){t=S,Xt===n&&n!==null&&(Xt=n=n.return);continue}break}while(!0)}function HO(){var e=Zp.current;return Zp.current=Xp,e===null?Xp:e}function $1(){(ln===0||ln===3||ln===2)&&(ln=4),gn===null||!(oo&268435455)&&!(Mg&268435455)||Ds(gn,bn)}function tm(e,t){var n=it;it|=2;var r=HO();(gn!==e||bn!==t)&&(Hi=null,Ga(e,t));do try{BF();break}catch(i){zO(e,i)}while(!0);if(v1(),it=n,Zp.current=r,Xt!==null)throw Error(we(261));return gn=null,bn=0,ln}function BF(){for(;Xt!==null;)WO(Xt)}function UF(){for(;Xt!==null&&!f3();)WO(Xt)}function WO(e){var t=KO(e.alternate,e,or);e.memoizedProps=e.pendingProps,t===null?qO(e):Xt=t,O1.current=null}function qO(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=DF(n,t),n!==null){n.flags&=32767,Xt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ln=6,Xt=null;return}}else if(n=IF(n,t,or),n!==null){Xt=n;return}if(t=t.sibling,t!==null){Xt=t;return}Xt=t=e}while(t!==null);ln===0&&(ln=5)}function Oa(e,t,n){var r=xt,i=$r.transition;try{$r.transition=null,xt=1,zF(e,t,n,r)}finally{$r.transition=i,xt=r}return null}function zF(e,t,n,r){do kl();while($s!==null);if(it&6)throw Error(we(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(we(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(S3(e,s),e===gn&&(Xt=gn=null,bn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mh||(mh=!0,QO(Mp,function(){return kl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=$r.transition,$r.transition=null;var a=xt;xt=1;var l=it;it|=4,O1.current=null,MF(e,n),FO(n,e),lF(av),Lp=!!sv,av=sv=null,e.current=n,$F(n),h3(),it=l,xt=a,$r.transition=s}else e.current=n;if(mh&&(mh=!1,$s=e,em=i),s=e.pendingLanes,s===0&&(Gs=null),g3(n.stateNode),er(e,qt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Jp)throw Jp=!1,e=Pv,Pv=null,e;return em&1&&e.tag!==0&&kl(),s=e.pendingLanes,s&1?e===Cv?Ku++:(Ku=0,Cv=e):Ku=0,pa(),null}function kl(){if($s!==null){var e=kT(em),t=$r.transition,n=xt;try{if($r.transition=null,xt=16>e?16:e,$s===null)var r=!1;else{if(e=$s,$s=null,em=0,it&6)throw Error(we(331));var i=it;for(it|=4,Ie=e.current;Ie!==null;){var s=Ie,a=s.child;if(Ie.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ie=u;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:qu(8,d,s)}var f=d.child;if(f!==null)f.return=d,Ie=f;else for(;Ie!==null;){d=Ie;var h=d.sibling,p=d.return;if(MO(d),d===u){Ie=null;break}if(h!==null){h.return=p,Ie=h;break}Ie=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}Ie=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Ie=a;else e:for(;Ie!==null;){if(s=Ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qu(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ie=v;break e}Ie=s.return}}var x=e.current;for(Ie=x;Ie!==null;){a=Ie;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Ie=w;else e:for(a=x;Ie!==null;){if(l=Ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Rg(9,l)}}catch(S){zt(l,l.return,S)}if(l===a){Ie=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Ie=j;break e}Ie=l.return}}if(it=i,pa(),ji&&typeof ji.onPostCommitFiberRoot=="function")try{ji.onPostCommitFiberRoot(Cg,e)}catch{}r=!0}return r}finally{xt=n,$r.transition=t}}return!1}function tk(e,t,n){t=Bl(n,t),t=kO(e,t,1),e=Qs(e,t,1),t=Un(),e!==null&&(Sf(e,1,t),er(e,t))}function zt(e,t,n){if(e.tag===3)tk(e,e,n);else for(;t!==null;){if(t.tag===3){tk(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gs===null||!Gs.has(r))){e=Bl(n,e),e=PO(t,e,1),t=Qs(t,e,1),e=Un(),t!==null&&(Sf(t,1,e),er(t,e));break}}t=t.return}}function HF(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Un(),e.pingedLanes|=e.suspendedLanes&n,gn===e&&(bn&n)===n&&(ln===4||ln===3&&(bn&130023424)===bn&&500>qt()-D1?Ga(e,0):I1|=n),er(e,t)}function VO(e,t){t===0&&(e.mode&1?(t=sh,sh<<=1,!(sh&130023424)&&(sh=4194304)):t=1);var n=Un();e=ls(e,t),e!==null&&(Sf(e,t,n),er(e,n))}function WF(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),VO(e,n)}function qF(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(we(314))}r!==null&&r.delete(t),VO(e,n)}var KO;KO=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zn.current)Gn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Gn=!1,OF(e,t,n);Gn=!!(e.flags&131072)}else Gn=!1,It&&t.flags&1048576&&XT(t,qp,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;cp(e,t),e=t.pendingProps;var i=Ml(t,Dn.current);Nl(t,n),i=C1(null,t,r,e,i,n);var s=A1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Jn(r)?(s=!0,Hp(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,S1(t),i.updater=Dg,t.stateNode=i,i._reactInternals=t,mv(t,r,e,n),t=xv(null,t,r,!0,s,n)):(t.tag=0,It&&s&&m1(t),$n(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(cp(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=KF(r),e=Gr(r,e),i){case 0:t=yv(null,t,r,e,n);break e;case 1:t=qN(null,t,r,e,n);break e;case 11:t=HN(null,t,r,e,n);break e;case 14:t=WN(null,t,r,Gr(r.type,e),n);break e}throw Error(we(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gr(r,i),yv(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gr(r,i),qN(e,t,r,i,n);case 3:e:{if(_O(t),e===null)throw Error(we(387));r=t.pendingProps,s=t.memoizedState,i=s.element,rO(e,t),Qp(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Bl(Error(we(423)),t),t=VN(e,t,r,n,i);break e}else if(r!==i){i=Bl(Error(we(424)),t),t=VN(e,t,r,n,i);break e}else for(hr=Ks(t.stateNode.containerInfo.firstChild),pr=t,It=!0,ti=null,n=tO(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($l(),r===i){t=cs(e,t,n);break e}$n(e,t,r,n)}t=t.child}return t;case 5:return iO(t),e===null&&fv(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,ov(r,i)?a=null:s!==null&&ov(r,s)&&(t.flags|=32),EO(e,t),$n(e,t,a,n),t.child;case 6:return e===null&&fv(t),null;case 13:return TO(e,t,n);case 4:return j1(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ll(t,null,r,n):$n(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gr(r,i),HN(e,t,r,i,n);case 7:return $n(e,t,t.pendingProps,n),t.child;case 8:return $n(e,t,t.pendingProps.children,n),t.child;case 12:return $n(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Pt(Vp,r._currentValue),r._currentValue=a,s!==null)if(ai(s.value,a)){if(s.children===i.children&&!Zn.current){t=cs(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=es(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),hv(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(we(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),hv(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}$n(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Nl(t,n),i=Lr(i),r=r(i),t.flags|=1,$n(e,t,r,n),t.child;case 14:return r=t.type,i=Gr(r,t.pendingProps),i=Gr(r.type,i),WN(e,t,r,i,n);case 15:return CO(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gr(r,i),cp(e,t),t.tag=1,Jn(r)?(e=!0,Hp(t)):e=!1,Nl(t,n),NO(t,r,i),mv(t,r,i,n),xv(null,t,r,!0,e,n);case 19:return OO(e,t,n);case 22:return AO(e,t,n)}throw Error(we(156,t.tag))};function QO(e,t){return wT(e,t)}function VF(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(e,t,n,r){return new VF(e,t,n,r)}function L1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function KF(e){if(typeof e=="function")return L1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===r1)return 11;if(e===i1)return 14}return 2}function Xs(e,t){var n=e.alternate;return n===null?(n=Dr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fp(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")L1(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case tl:return Ya(n.children,i,s,t);case n1:a=8,i|=8;break;case F0:return e=Dr(12,n,t,i|2),e.elementType=F0,e.lanes=s,e;case B0:return e=Dr(13,n,t,i),e.elementType=B0,e.lanes=s,e;case U0:return e=Dr(19,n,t,i),e.elementType=U0,e.lanes=s,e;case iT:return $g(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nT:a=10;break e;case rT:a=9;break e;case r1:a=11;break e;case i1:a=14;break e;case Es:a=16,r=null;break e}throw Error(we(130,e==null?e:typeof e,""))}return t=Dr(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Ya(e,t,n,r){return e=Dr(7,e,r,t),e.lanes=n,e}function $g(e,t,n,r){return e=Dr(22,e,r,t),e.elementType=iT,e.lanes=n,e.stateNode={isHidden:!1},e}function Ex(e,t,n){return e=Dr(6,e,null,t),e.lanes=n,e}function _x(e,t,n){return t=Dr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function QF(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ux(0),this.expirationTimes=ux(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ux(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function F1(e,t,n,r,i,s,a,l,c){return e=new QF(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Dr(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},S1(s),e}function GF(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:el,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function GO(e){if(!e)return ra;e=e._reactInternals;e:{if(wo(e)!==e||e.tag!==1)throw Error(we(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Jn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(we(171))}if(e.tag===1){var n=e.type;if(Jn(n))return GT(e,n,t)}return t}function YO(e,t,n,r,i,s,a,l,c){return e=F1(n,r,!0,e,i,s,a,l,c),e.context=GO(null),n=e.current,r=Un(),i=Ys(n),s=es(r,i),s.callback=t??null,Qs(n,s,i),e.current.lanes=i,Sf(e,i,r),er(e,r),e}function Lg(e,t,n,r){var i=t.current,s=Un(),a=Ys(i);return n=GO(n),t.context===null?t.context=n:t.pendingContext=n,t=es(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Qs(i,t,a),e!==null&&(ii(e,i,a,s),ap(e,i,a)),a}function nm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function B1(e,t){nk(e,t),(e=e.alternate)&&nk(e,t)}function YF(){return null}var XO=typeof reportError=="function"?reportError:function(e){console.error(e)};function U1(e){this._internalRoot=e}Fg.prototype.render=U1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(we(409));Lg(e,t,null,null)};Fg.prototype.unmount=U1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lo(function(){Lg(null,e,null,null)}),t[os]=null}};function Fg(e){this._internalRoot=e}Fg.prototype.unstable_scheduleHydration=function(e){if(e){var t=AT();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Is.length&&t!==0&&t<Is[n].priority;n++);Is.splice(n,0,e),n===0&&_T(e)}};function z1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rk(){}function XF(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=nm(a);s.call(u)}}var a=YO(t,r,e,0,null,!1,!1,"",rk);return e._reactRootContainer=a,e[os]=a.current,pd(e.nodeType===8?e.parentNode:e),lo(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=nm(c);l.call(u)}}var c=F1(e,0,!1,null,null,!1,!1,"",rk);return e._reactRootContainer=c,e[os]=c.current,pd(e.nodeType===8?e.parentNode:e),lo(function(){Lg(t,c,n,r)}),c}function Ug(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=nm(a);l.call(c)}}Lg(t,a,e,i)}else a=XF(n,t,e,i,r);return nm(a)}PT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Cu(t.pendingLanes);n!==0&&(o1(t,n|1),er(t,qt()),!(it&6)&&(Ul=qt()+500,pa()))}break;case 13:lo(function(){var r=ls(e,1);if(r!==null){var i=Un();ii(r,e,1,i)}}),B1(e,1)}};l1=function(e){if(e.tag===13){var t=ls(e,134217728);if(t!==null){var n=Un();ii(t,e,134217728,n)}B1(e,134217728)}};CT=function(e){if(e.tag===13){var t=Ys(e),n=ls(e,t);if(n!==null){var r=Un();ii(n,e,t,r)}B1(e,t)}};AT=function(){return xt};ET=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}};X0=function(e,t,n){switch(t){case"input":if(W0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Tg(r);if(!i)throw Error(we(90));aT(r),W0(r,i)}}}break;case"textarea":lT(e,n);break;case"select":t=n.value,t!=null&&bl(e,!!n.multiple,t,!1)}};mT=R1;gT=lo;var ZF={usingClientEntryPoint:!1,Events:[Nf,sl,Tg,hT,pT,R1]},au={findFiberByHostInstance:Ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JF={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vT(e),e===null?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||YF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{Cg=gh.inject(JF),ji=gh}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZF;wr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!z1(t))throw Error(we(200));return GF(e,t,null,n)};wr.createRoot=function(e,t){if(!z1(e))throw Error(we(299));var n=!1,r="",i=XO;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=F1(e,1,!1,null,null,n,!1,r,i),e[os]=t.current,pd(e.nodeType===8?e.parentNode:e),new U1(t)};wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(we(188)):(e=Object.keys(e).join(","),Error(we(268,e)));return e=vT(t),e=e===null?null:e.stateNode,e};wr.flushSync=function(e){return lo(e)};wr.hydrate=function(e,t,n){if(!Bg(t))throw Error(we(200));return Ug(null,e,t,!0,n)};wr.hydrateRoot=function(e,t,n){if(!z1(e))throw Error(we(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=XO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=YO(t,null,e,1,n??null,i,!1,s,a),e[os]=t.current,pd(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Fg(t)};wr.render=function(e,t,n){if(!Bg(t))throw Error(we(200));return Ug(null,e,t,!1,n)};wr.unmountComponentAtNode=function(e){if(!Bg(e))throw Error(we(40));return e._reactRootContainer?(lo(function(){Ug(null,null,e,!1,function(){e._reactRootContainer=null,e[os]=null})}),!0):!1};wr.unstable_batchedUpdates=R1;wr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bg(n))throw Error(we(200));if(e==null||e._reactInternals===void 0)throw Error(we(38));return Ug(e,t,n,!1,r)};wr.version="18.3.1-next-f1338f8080-20240426";function ZO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZO)}catch(e){console.error(e)}}ZO(),Z_.exports=wr;var So=Z_.exports;const e6=ct(So);var H1,ik=So;H1=ik.createRoot,ik.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jd.apply(this,arguments)}var Ls;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ls||(Ls={}));const sk="popstate";function t6(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:l}=r.location;return _v("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:rm(i)}return r6(t,n,null,e)}function Bt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function JO(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function n6(){return Math.random().toString(36).substr(2,8)}function ak(e,t){return{usr:e.state,key:e.key,idx:t}}function _v(e,t,n,r){return n===void 0&&(n=null),jd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jc(t):t,{state:n,key:t&&t.key||r||n6()})}function rm(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function jc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function r6(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=Ls.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(jd({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=Ls.Pop;let y=d(),v=y==null?null:y-u;u=y,c&&c({action:l,location:m.location,delta:v})}function h(y,v){l=Ls.Push;let x=_v(m.location,y,v);u=d()+1;let w=ak(x,u),j=m.createHref(x);try{a.pushState(w,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(j)}s&&c&&c({action:l,location:m.location,delta:1})}function p(y,v){l=Ls.Replace;let x=_v(m.location,y,v);u=d();let w=ak(x,u),j=m.createHref(x);a.replaceState(w,"",j),s&&c&&c({action:l,location:m.location,delta:0})}function g(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof y=="string"?y:rm(y);return x=x.replace(/ $/,"%20"),Bt(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let m={get action(){return l},get location(){return e(i,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(sk,f),c=y,()=>{i.removeEventListener(sk,f),c=null}},createHref(y){return t(i,y)},createURL:g,encodeLocation(y){let v=g(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(y){return a.go(y)}};return m}var ok;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ok||(ok={}));function i6(e,t,n){return n===void 0&&(n="/"),s6(e,t,n,!1)}function s6(e,t,n,r){let i=typeof t=="string"?jc(t):t,s=zl(i.pathname||"/",n);if(s==null)return null;let a=eI(e);a6(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=y6(s);l=m6(a[c],u,r)}return l}function eI(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(Bt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Zs([r,c.relativePath]),d=n.concat(c);s.children&&s.children.length>0&&(Bt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),eI(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:h6(u,s.index),routesMeta:d})};return e.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let c of tI(s.path))i(s,a,c)}),t}function tI(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=tI(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function a6(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:p6(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const o6=/^:[\w-]+$/,l6=3,c6=2,u6=1,d6=10,f6=-2,lk=e=>e==="*";function h6(e,t){let n=e.split("/"),r=n.length;return n.some(lk)&&(r+=f6),t&&(r+=c6),n.filter(i=>!lk(i)).reduce((i,s)=>i+(o6.test(s)?l6:s===""?u6:d6),r)}function p6(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function m6(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=s==="/"?t:t.slice(s.length)||"/",f=im({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=im({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Zs([s,f.pathname]),pathnameBase:w6(Zs([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=Zs([s,f.pathnameBase]))}return a}function im(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=g6(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let m=l[f]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const g=l[f];return p&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:e}}function g6(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),JO(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function y6(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return JO(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function zl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function x6(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?jc(e):e;return{pathname:n?n.startsWith("/")?n:v6(n,t):t,search:S6(r),hash:j6(i)}}function v6(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Tx(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function b6(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function W1(e,t){let n=b6(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function q1(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=jc(e):(i=jd({},e),Bt(!i.pathname||!i.pathname.includes("?"),Tx("?","pathname","search",i)),Bt(!i.pathname||!i.pathname.includes("#"),Tx("#","pathname","hash",i)),Bt(!i.search||!i.search.includes("#"),Tx("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=x6(i,l),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Zs=e=>e.join("/").replace(/\/\/+/g,"/"),w6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),S6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,j6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function N6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nI=["post","put","patch","delete"];new Set(nI);const k6=["get",...nI];new Set(k6);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nd.apply(this,arguments)}const zg=b.createContext(null),rI=b.createContext(null),xs=b.createContext(null),Hg=b.createContext(null),vs=b.createContext({outlet:null,matches:[],isDataRoute:!1}),iI=b.createContext(null);function P6(e,t){let{relative:n}=t===void 0?{}:t;Nc()||Bt(!1);let{basename:r,navigator:i}=b.useContext(xs),{hash:s,pathname:a,search:l}=Wg(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Zs([r,a])),i.createHref({pathname:c,search:l,hash:s})}function Nc(){return b.useContext(Hg)!=null}function ma(){return Nc()||Bt(!1),b.useContext(Hg).location}function sI(e){b.useContext(xs).static||b.useLayoutEffect(e)}function St(){let{isDataRoute:e}=b.useContext(vs);return e?F6():C6()}function C6(){Nc()||Bt(!1);let e=b.useContext(zg),{basename:t,future:n,navigator:r}=b.useContext(xs),{matches:i}=b.useContext(vs),{pathname:s}=ma(),a=JSON.stringify(W1(i,n.v7_relativeSplatPath)),l=b.useRef(!1);return sI(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=q1(u,JSON.parse(a),s,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Zs([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,a,s,e])}function Pf(){let{matches:e}=b.useContext(vs),t=e[e.length-1];return t?t.params:{}}function Wg(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=b.useContext(xs),{matches:i}=b.useContext(vs),{pathname:s}=ma(),a=JSON.stringify(W1(i,r.v7_relativeSplatPath));return b.useMemo(()=>q1(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function A6(e,t){return E6(e,t)}function E6(e,t,n,r){Nc()||Bt(!1);let{navigator:i,static:s}=b.useContext(xs),{matches:a}=b.useContext(vs),l=a[a.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let d=ma(),f;if(t){var h;let v=typeof t=="string"?jc(t):t;u==="/"||(h=v.pathname)!=null&&h.startsWith(u)||Bt(!1),f=v}else f=d;let p=f.pathname||"/",g=p;if(u!=="/"){let v=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=!s&&n&&n.matches&&n.matches.length>0?n.matches:i6(e,{pathname:g}),y=D6(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:Zs([u,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:Zs([u,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,r);return t&&y?b.createElement(Hg.Provider,{value:{location:Nd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ls.Pop}},y):y}function _6(){let e=L6(),t=N6(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:i},n):null,null)}const T6=b.createElement(_6,null);class O6 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(vs.Provider,{value:this.props.routeContext},b.createElement(iI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I6(e){let{routeContext:t,match:n,children:r}=e,i=b.useContext(zg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(vs.Provider,{value:t},r)}function D6(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Bt(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=n,g=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,h)=>{let p,g=!1,m=null,y=null;n&&(p=l&&f.route.id?l[f.route.id]:void 0,m=f.route.errorElement||T6,c&&(u<0&&h===0?(g=!0,y=null):u===h&&(g=!0,y=f.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,h+1)),x=()=>{let w;return p?w=m:g?w=y:f.route.Component?w=b.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,b.createElement(I6,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?b.createElement(O6,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var aI=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(aI||{}),sm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(sm||{});function R6(e){let t=b.useContext(zg);return t||Bt(!1),t}function M6(e){let t=b.useContext(rI);return t||Bt(!1),t}function $6(e){let t=b.useContext(vs);return t||Bt(!1),t}function oI(e){let t=$6(),n=t.matches[t.matches.length-1];return n.route.id||Bt(!1),n.route.id}function L6(){var e;let t=b.useContext(iI),n=M6(sm.UseRouteError),r=oI(sm.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function F6(){let{router:e}=R6(aI.UseNavigateStable),t=oI(sm.UseNavigateStable),n=b.useRef(!1);return sI(()=>{n.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Nd({fromRouteId:t},s)))},[e,t])}function B6(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Qu(e){let{to:t,replace:n,state:r,relative:i}=e;Nc()||Bt(!1);let{future:s,static:a}=b.useContext(xs),{matches:l}=b.useContext(vs),{pathname:c}=ma(),u=St(),d=q1(t,W1(l,s.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function nt(e){Bt(!1)}function U6(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ls.Pop,navigator:s,static:a=!1,future:l}=e;Nc()&&Bt(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:s,static:a,future:Nd({v7_relativeSplatPath:!1},l)}),[c,l,s,a]);typeof r=="string"&&(r=jc(r));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:g="default"}=r,m=b.useMemo(()=>{let y=zl(d,c);return y==null?null:{location:{pathname:y,search:f,hash:h,state:p,key:g},navigationType:i}},[c,d,f,h,p,g,i]);return m==null?null:b.createElement(xs.Provider,{value:u},b.createElement(Hg.Provider,{children:n,value:m}))}function z6(e){let{children:t,location:n}=e;return A6(Tv(t),n)}new Promise(()=>{});function Tv(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(r,i)=>{if(!b.isValidElement(r))return;let s=[...t,i];if(r.type===b.Fragment){n.push.apply(n,Tv(r.props.children,s));return}r.type!==nt&&Bt(!1),!r.props.index||!r.props.children||Bt(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Tv(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function am(){return am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},am.apply(this,arguments)}function lI(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function H6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function W6(e,t){return e.button===0&&(!t||t==="_self")&&!H6(e)}const q6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],V6=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],K6="6";try{window.__reactRouterVersion=K6}catch{}const Q6=b.createContext({isTransitioning:!1}),G6="startTransition",ck=Op[G6];function Y6(e){let{basename:t,children:n,future:r,window:i}=e,s=b.useRef();s.current==null&&(s.current=t6({window:i,v5Compat:!0}));let a=s.current,[l,c]=b.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=b.useCallback(f=>{u&&ck?ck(()=>c(f)):c(f)},[c,u]);return b.useLayoutEffect(()=>a.listen(d),[a,d]),b.useEffect(()=>B6(r),[r]),b.createElement(U6,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const X6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J6=b.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=lI(t,q6),{basename:p}=b.useContext(xs),g,m=!1;if(typeof u=="string"&&Z6.test(u)&&(g=u,X6))try{let w=new URL(window.location.href),j=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=zl(j.pathname,p);j.origin===w.origin&&S!=null?u=S+j.search+j.hash:m=!0}catch{}let y=P6(u,{relative:i}),v=nB(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:f});function x(w){r&&r(w),w.defaultPrevented||v(w)}return b.createElement("a",am({},h,{href:g||y,onClick:m||s?r:x,ref:n,target:c}))}),eB=b.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=t,f=lI(t,V6),h=Wg(c,{relative:f.relative}),p=ma(),g=b.useContext(rI),{navigator:m,basename:y}=b.useContext(xs),v=g!=null&&rB(h)&&u===!0,x=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,w=p.pathname,j=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(w=w.toLowerCase(),j=j?j.toLowerCase():null,x=x.toLowerCase()),j&&y&&(j=zl(j,y)||j);const S=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let k=w===x||!a&&w.startsWith(x)&&w.charAt(S)==="/",N=j!=null&&(j===x||!a&&j.startsWith(x)&&j.charAt(x.length)==="/"),P={isActive:k,isPending:N,isTransitioning:v},A=k?r:void 0,C;typeof s=="function"?C=s(P):C=[s,k?"active":null,N?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let _=typeof l=="function"?l(P):l;return b.createElement(J6,am({},f,{"aria-current":A,className:C,ref:n,style:_,to:c,viewTransition:u}),typeof d=="function"?d(P):d)});var Ov;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ov||(Ov={}));var uk;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uk||(uk={}));function tB(e){let t=b.useContext(zg);return t||Bt(!1),t}function nB(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:l}=t===void 0?{}:t,c=St(),u=ma(),d=Wg(e,{relative:a});return b.useCallback(f=>{if(W6(f,n)){f.preventDefault();let h=r!==void 0?r:rm(u)===rm(d);c(e,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:l})}},[u,c,d,r,i,n,e,s,a,l])}function rB(e,t){t===void 0&&(t={});let n=b.useContext(Q6);n==null&&Bt(!1);let{basename:r}=tB(Ov.useViewTransitionState),i=Wg(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=zl(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=zl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return im(i.pathname,a)!=null||im(i.pathname,s)!=null}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ae=(e,t)=>{const n=b.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>b.createElement("svg",{ref:d,...iB,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${sB(e)}`,l].join(" "),...u},[...t.map(([f,h])=>b.createElement(f,h)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=Ae("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=Ae("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=Ae("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=Ae("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=Ae("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=Ae("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=Ae("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=Ae("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=Ae("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=Ae("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=Ae("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=Ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=Ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=Ae("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=Ae("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=Ae("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=Ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=Ae("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=Ae("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=Ae("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=Ae("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=Ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Ae("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Ae("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=Ae("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=Ae("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=Ae("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=Ae("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=Ae("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=Ae("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=Ae("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=Ae("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=Ae("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Ae("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=Ae("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=Ae("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Ae("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=Ae("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=Ae("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=Ae("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=Ae("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=Ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=Ae("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Ae("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=Ae("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=Ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=Ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=Ae("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=Ae("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=Ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=Ae("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=Ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=Ae("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=Ae("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=Ae("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=Ae("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=Ae("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=Ae("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=Ae("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=Ae("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=Ae("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=Ae("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=Ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=Ae("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=Ae("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=Ae("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=Ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=Ae("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=Ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=Ae("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=Ae("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);class fl{constructor(){this.isInitialized=!1,this.preserveSaleData=!0}static getInstance(){return fl.instance||(fl.instance=new fl),fl.instance}initialize(){this.isInitialized||(this.setupBeforeUnloadHandler(),this.isInitialized=!0,console.log("StorageManager initialized - Using sessionStorage for auth (auto-clears on browser close)"))}setupBeforeUnloadHandler(){const t=()=>{localStorage.removeItem("user"),console.log("localStorage auth data cleared on browser close")};window.addEventListener("beforeunload",t),window.__storageCleanup=()=>{window.removeEventListener("beforeunload",t)}}clearAuthData(){try{localStorage.removeItem("user"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),console.log("Authentication data cleared (sale/form data preserved)")}catch(t){console.error("Error clearing auth data:",t)}}clearAuth(){this.clearAuthData()}setSaleDataPersistence(t){this.preserveSaleData=t}}const xI=fl.getInstance();typeof window<"u"&&xI.initialize();const MB="https://localhost:5443";let hp=null;const $B=async()=>{if(hp)return hp;console.log(" Detecting available backend server..."),console.log(" Environment variables:",{VITE_SERVER_URL:"https://192.168.0.10:5443",VITE_NETWORK_SERVER_IP:"192.168.0.10",VITE_BACKEND_HTTPS_PORT:"5443"});const e="https://192.168.0.10:5443";return console.log(" Using explicit VITE_SERVER_URL:",e),hp=e,e},Gi=()=>hp||MB,vI=()=>Gi(),Or=()=>`${vI()}/api`,bI=()=>vI(),pp="lastBackendUrl",_f=()=>{const e=Gi(),t=localStorage.getItem(pp);return console.log(" Auth Manager Check:",{currentBackendUrl:e,lastBackendUrl:t,hasToken:!!sessionStorage.getItem("authToken"),hasUser:!!sessionStorage.getItem("user")}),t&&t!==e?(console.log(" Backend URL changed from",t,"to",e),console.log(" Clearing authentication data for backend change..."),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("currentCustomer"),localStorage.removeItem("currentCustomerSearch"),localStorage.removeItem("currentCustomer2"),localStorage.removeItem("currentCustomerSearch2"),localStorage.setItem(pp,e),!0):(t||localStorage.setItem(pp,e),!1)},LB=e=>{const t=Gi();sessionStorage.setItem("authToken",e),localStorage.setItem(pp,t)},wI=()=>{if(_f())return console.log(" Auth token invalidated due to backend change"),null;const t=sessionStorage.getItem("authToken");return console.log(" Getting auth token:",t?"Token exists":"No token found"),t},FB=()=>{const e=wI(),t=sessionStorage.getItem("user");return!!(e&&t)},BB=()=>{const e=_f(),t=FB();return{isValid:!e&&t,backendChanged:e}},SI=b.createContext(null),UB=({children:e})=>{const[t,n]=b.useState(null),[r,i]=b.useState(!0);b.useEffect(()=>{(async()=>{try{const c=BB();if(c.backendChanged){console.log(" Backend URL changed - requiring fresh login"),n(null),i(!1);return}const u=sessionStorage.getItem("user"),d=sessionStorage.getItem("authToken");if(!u||!d||!c.isValid){n(null),console.log("No valid session found - requiring login"),i(!1);return}const f=JSON.parse(u);if(f&&f.id&&f.name&&f.role){n(f),console.log("Session found - restoring user");try{const h=await fetch(`${Or()}/auth/validate`,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${d}`}});if(h.status===404)console.log("Session validation endpoint not available, using sessionStorage");else if(h.ok){const p=await h.json();n(p),sessionStorage.setItem("user",JSON.stringify(p))}else h.status===401||h.status===403?(console.log("Session validation failed with auth error, requiring fresh login"),console.log("Validation failed but keeping user logged in for now")):console.log("Session validation failed with server error, keeping user logged in")}catch(h){console.error("Session validation failed:",h),console.log("Network error during validation, keeping user logged in for page refresh")}}else console.log("Invalid user data format - clearing session"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),n(null)}catch(c){console.error("Error checking existing session:",c),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),n(null)}finally{i(!1)}})(),xI.initialize()},[]);const s=(l,c)=>{n(l),l?(sessionStorage.setItem("user",JSON.stringify(l)),c&&LB(c),console.log("User logged in - stored in sessionStorage with backend URL tracking")):(sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),console.log("User data cleared from sessionStorage"))},a=()=>{n(null),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),localStorage.removeItem("user"),console.log("User logged out explicitly")};return o.jsx(SI.Provider,{value:{currentUser:t,setCurrentUser:s,logout:a,isAuthenticated:!!t,isLoading:r},children:e})},ko=()=>{const e=b.useContext(SI);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Ar={Printer:Yn,ChevronDown:dI,Search:ci,Edit2:jo,X:Lt,Eye:ia,EyeOff:Pd},jI=()=>{const e=St(),{currentUser:t,setCurrentUser:n}=ko(),[r,i]=b.useState(!1),s=b.useRef(null);b.useEffect(()=>{const l=c=>{s.current&&!s.current.contains(c.target)&&i(!1)};return r&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[r]);const a=async()=>{try{await fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),n(null),e("/login")}catch(l){console.error("Logout error:",l),n(null),e("/login")}};return t?o.jsxs("div",{className:"relative",ref:s,children:[o.jsxs("button",{onClick:()=>i(!r),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-sm font-medium",children:t.name.charAt(0).toUpperCase()})}),o.jsx("span",{className:"text-gray-700",children:t.name}),o.jsx(Ar.ChevronDown,{className:"w-4 h-4 text-gray-500"})]}),r&&o.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("div",{className:"px-4 py-2 text-sm text-gray-700",children:[o.jsx("div",{className:"font-medium",children:t.name}),o.jsx("div",{className:"text-gray-500",children:t.email})]}),o.jsx("hr",{className:"my-1"}),o.jsx("button",{onClick:()=>{e("/profile"),i(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Profile Settings"}),o.jsx("button",{onClick:a,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})})]}):null},zB=()=>{const{currentUser:e}=ko(),t=St(),n=ma(),r=a=>{a.preventDefault();const l=localStorage.getItem("activeSaleId");l&&!n.pathname.includes(`/sales/${l}`)?t(`/sales/${l}/edit`):t("/sales")},i=[{icon:mB,label:"Dashboard",path:"/dashboard",roles:["ADMIN"]},{icon:Rv,label:"POS",path:"/pos",roles:["ADMIN","USER"]},{icon:Rv,label:"POS 2",path:"/pos2",roles:["ADMIN","USER"]},{icon:gI,label:"Retail POS",path:"/retail-pos",roles:["ADMIN","USER"]},{icon:Ef,label:"Sales",path:"/sales",roles:["ADMIN","USER"]},{icon:xB,label:"Held Sales",path:"/held-sales",roles:["ADMIN","USER"]}];(e==null?void 0:e.role)==="ADMIN"&&i.push({icon:Fs,label:"Products",path:"/products",roles:["ADMIN"]},{icon:pB,label:"Categories",path:"/categories",roles:["ADMIN"]},{icon:jB,label:"Units",path:"/units",roles:["ADMIN"]},{icon:DB,label:"Customers",path:"/customers",roles:["ADMIN"]},{icon:OB,label:"Suppliers",path:"/suppliers",roles:["ADMIN"]},{icon:fB,label:"Purchases",path:"/purchases",roles:["ADMIN"]},{icon:Iv,label:"Reports",path:"/reports",roles:["ADMIN"]},{icon:uI,label:"Date Report",path:"/reports/date",roles:["ADMIN"]},{icon:IB,label:"Users",path:"/users",roles:["ADMIN"]},{icon:PB,label:"Group Permissions",path:"/group-permissions",roles:["ADMIN"]},{icon:Vg,label:"Debtors",path:"/debtors",roles:["ADMIN"]},{icon:hI,label:"Database",path:"/database",roles:["ADMIN"]},{icon:K1,label:"Settings",path:"/settings",roles:["ADMIN"]});const s=i.filter(a=>e!=null&&e.role?a.roles.includes(e.role):!1);return o.jsxs("div",{className:"w-64 bg-white shadow-lg flex flex-col h-screen",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("img",{src:"/apexlink-logo.svg",alt:"Apexlink Logo",className:"w-8 h-8"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Apexlink POS"})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:o.jsx("nav",{className:"mt-6",children:s.map(a=>o.jsx("div",{children:a.path==="/sales"?o.jsxs("button",{onClick:r,className:`w-full flex items-center px-6 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left ${n.pathname.startsWith("/sales")?"bg-gray-100 border-r-4 border-blue-500":""}`,children:[o.jsx(a.icon,{className:"w-5 h-5 mr-3"}),o.jsx("span",{children:a.label})]}):o.jsxs(eB,{to:a.path,className:({isActive:l})=>`flex items-center px-6 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${l?"bg-gray-100 border-r-4 border-blue-500":""}`,children:[o.jsx(a.icon,{className:"w-5 h-5 mr-3"}),o.jsx("span",{children:a.label})]})},a.path))})}),e&&o.jsx("div",{className:"border-t p-4",children:o.jsx(jI,{})})]})},Vr=({children:e,allowedRoles:t,redirectPath:n="/pos"})=>{const{currentUser:r}=ko(),i=ma();return r&&t.includes(r.role)?o.jsx(o.Fragment,{children:e}):(r==null?void 0:r.role)==="USER"&&(["/pos","/pos2","/sales"].includes(i.pathname)||i.pathname.startsWith("/sales/"))?o.jsx(o.Fragment,{children:e}):o.jsx(Qu,{to:n,replace:!0})};let $v=!1;const Q1=async()=>{if($v)return Gi();console.log(" Initializing backend connection...");const e=await $B();return $v=!0,console.log(` Backend initialized: ${e}`),e},HB=()=>`${Gi()}/api`,gk=e=>{console.log(`Authentication failed from ${e}, redirecting to login...`),_f()?(console.log(" Authentication failure due to backend change"),window.location.href="/login?reason=backend-change"):(console.log(" Regular authentication failure"),localStorage.removeItem("user"),sessionStorage.removeItem("authToken"),localStorage.removeItem("currentCustomer"),localStorage.removeItem("currentCustomerSearch"),window.location.href="/login")},pe=async(e,t={})=>{$v||(console.warn("Backend not initialized - calling initializeBackend..."),await Q1());let n;if(e.startsWith("http")?n=e:e.startsWith("/api/")?n=`${Gi()}${e}`:n=`${HB()}/${e.replace(/^\/+/,"")}`,_f())throw console.log(" Backend change detected - authentication required"),gk("Backend URL change detected"),new Error("Backend changed - authentication required");const i=wI();console.log(" API Request Auth Debug:",{endpoint:n,hasToken:!!i,tokenLength:(i==null?void 0:i.length)||0,backendUrl:Gi()});const s={credentials:"include",headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`},...t.headers||{}},...t};try{console.log(` API Request: ${s.method||"GET"} ${n}`);const a=await fetch(n,s);if(a.status===401)throw console.warn("Authentication failed - token may be expired or invalid"),gk("API request"),new Error("Authentication required");if(!a.ok){const l=await a.text().catch(()=>"Unknown error");throw console.error(`API Error ${a.status}:`,l),new Error(`API Error ${a.status}: ${l}`)}return a}catch(a){throw a instanceof TypeError&&a.message.includes("fetch")?(console.error(` Connection failed to ${Gi()}:`,a.message),new Error(`Cannot connect to server at ${Gi()}. Please check if the server is running.`)):a}},Uo=async e=>pe(e,{method:"GET"}),WB=()=>{console.log(" Clearing all authentication data for network backend..."),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("currentCustomer"),localStorage.removeItem("currentCustomerSearch"),localStorage.removeItem("currentCustomer2"),localStorage.removeItem("currentCustomerSearch2"),localStorage.setItem("lastBackendUrl","https://192.168.0.10:5443"),console.log(" Authentication data cleared. Please refresh and login again."),window.location.reload()};typeof window<"u"&&(window.clearAuthForNetworkBackend=WB);function NI(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=NI(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ye(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=NI(e))&&(r&&(r+=" "),r+=t);return r}var qB=Array.isArray,nr=qB,VB=typeof Nu=="object"&&Nu&&Nu.Object===Object&&Nu,kI=VB,KB=kI,QB=typeof self=="object"&&self&&self.Object===Object&&self,GB=KB||QB||Function("return this")(),Di=GB,YB=Di,XB=YB.Symbol,Tf=XB,yk=Tf,PI=Object.prototype,ZB=PI.hasOwnProperty,JB=PI.toString,ou=yk?yk.toStringTag:void 0;function eU(e){var t=ZB.call(e,ou),n=e[ou];try{e[ou]=void 0;var r=!0}catch{}var i=JB.call(e);return r&&(t?e[ou]=n:delete e[ou]),i}var tU=eU,nU=Object.prototype,rU=nU.toString;function iU(e){return rU.call(e)}var sU=iU,xk=Tf,aU=tU,oU=sU,lU="[object Null]",cU="[object Undefined]",vk=xk?xk.toStringTag:void 0;function uU(e){return e==null?e===void 0?cU:lU:vk&&vk in Object(e)?aU(e):oU(e)}var bs=uU;function dU(e){return e!=null&&typeof e=="object"}var ws=dU,fU=bs,hU=ws,pU="[object Symbol]";function mU(e){return typeof e=="symbol"||hU(e)&&fU(e)==pU}var kc=mU,gU=nr,yU=kc,xU=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vU=/^\w*$/;function bU(e,t){if(gU(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||yU(e)?!0:vU.test(e)||!xU.test(e)||t!=null&&e in Object(t)}var G1=bU;function wU(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ga=wU;const Pc=ct(ga);var SU=bs,jU=ga,NU="[object AsyncFunction]",kU="[object Function]",PU="[object GeneratorFunction]",CU="[object Proxy]";function AU(e){if(!jU(e))return!1;var t=SU(e);return t==kU||t==PU||t==NU||t==CU}var Y1=AU;const He=ct(Y1);var EU=Di,_U=EU["__core-js_shared__"],TU=_U,Ox=TU,bk=function(){var e=/[^.]+$/.exec(Ox&&Ox.keys&&Ox.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function OU(e){return!!bk&&bk in e}var IU=OU,DU=Function.prototype,RU=DU.toString;function MU(e){if(e!=null){try{return RU.call(e)}catch{}try{return e+""}catch{}}return""}var CI=MU,$U=Y1,LU=IU,FU=ga,BU=CI,UU=/[\\^$.*+?()[\]{}|]/g,zU=/^\[object .+?Constructor\]$/,HU=Function.prototype,WU=Object.prototype,qU=HU.toString,VU=WU.hasOwnProperty,KU=RegExp("^"+qU.call(VU).replace(UU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function QU(e){if(!FU(e)||LU(e))return!1;var t=$U(e)?KU:zU;return t.test(BU(e))}var GU=QU;function YU(e,t){return e==null?void 0:e[t]}var XU=YU,ZU=GU,JU=XU;function ez(e,t){var n=JU(e,t);return ZU(n)?n:void 0}var Po=ez,tz=Po,nz=tz(Object,"create"),Qg=nz,wk=Qg;function rz(){this.__data__=wk?wk(null):{},this.size=0}var iz=rz;function sz(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var az=sz,oz=Qg,lz="__lodash_hash_undefined__",cz=Object.prototype,uz=cz.hasOwnProperty;function dz(e){var t=this.__data__;if(oz){var n=t[e];return n===lz?void 0:n}return uz.call(t,e)?t[e]:void 0}var fz=dz,hz=Qg,pz=Object.prototype,mz=pz.hasOwnProperty;function gz(e){var t=this.__data__;return hz?t[e]!==void 0:mz.call(t,e)}var yz=gz,xz=Qg,vz="__lodash_hash_undefined__";function bz(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xz&&t===void 0?vz:t,this}var wz=bz,Sz=iz,jz=az,Nz=fz,kz=yz,Pz=wz;function Cc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Cc.prototype.clear=Sz;Cc.prototype.delete=jz;Cc.prototype.get=Nz;Cc.prototype.has=kz;Cc.prototype.set=Pz;var Cz=Cc;function Az(){this.__data__=[],this.size=0}var Ez=Az;function _z(e,t){return e===t||e!==e&&t!==t}var X1=_z,Tz=X1;function Oz(e,t){for(var n=e.length;n--;)if(Tz(e[n][0],t))return n;return-1}var Gg=Oz,Iz=Gg,Dz=Array.prototype,Rz=Dz.splice;function Mz(e){var t=this.__data__,n=Iz(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Rz.call(t,n,1),--this.size,!0}var $z=Mz,Lz=Gg;function Fz(e){var t=this.__data__,n=Lz(t,e);return n<0?void 0:t[n][1]}var Bz=Fz,Uz=Gg;function zz(e){return Uz(this.__data__,e)>-1}var Hz=zz,Wz=Gg;function qz(e,t){var n=this.__data__,r=Wz(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Vz=qz,Kz=Ez,Qz=$z,Gz=Bz,Yz=Hz,Xz=Vz;function Ac(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ac.prototype.clear=Kz;Ac.prototype.delete=Qz;Ac.prototype.get=Gz;Ac.prototype.has=Yz;Ac.prototype.set=Xz;var Yg=Ac,Zz=Po,Jz=Di,e8=Zz(Jz,"Map"),Z1=e8,Sk=Cz,t8=Yg,n8=Z1;function r8(){this.size=0,this.__data__={hash:new Sk,map:new(n8||t8),string:new Sk}}var i8=r8;function s8(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var a8=s8,o8=a8;function l8(e,t){var n=e.__data__;return o8(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Xg=l8,c8=Xg;function u8(e){var t=c8(this,e).delete(e);return this.size-=t?1:0,t}var d8=u8,f8=Xg;function h8(e){return f8(this,e).get(e)}var p8=h8,m8=Xg;function g8(e){return m8(this,e).has(e)}var y8=g8,x8=Xg;function v8(e,t){var n=x8(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var b8=v8,w8=i8,S8=d8,j8=p8,N8=y8,k8=b8;function Ec(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ec.prototype.clear=w8;Ec.prototype.delete=S8;Ec.prototype.get=j8;Ec.prototype.has=N8;Ec.prototype.set=k8;var J1=Ec,AI=J1,P8="Expected a function";function eS(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(P8);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=e.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(eS.Cache||AI),n}eS.Cache=AI;var EI=eS;const C8=ct(EI);var A8=EI,E8=500;function _8(e){var t=A8(e,function(r){return n.size===E8&&n.clear(),r}),n=t.cache;return t}var T8=_8,O8=T8,I8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D8=/\\(\\)?/g,R8=O8(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(I8,function(n,r,i,s){t.push(i?s.replace(D8,"$1"):r||n)}),t}),M8=R8;function $8(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var tS=$8,jk=Tf,L8=tS,F8=nr,B8=kc,U8=1/0,Nk=jk?jk.prototype:void 0,kk=Nk?Nk.toString:void 0;function _I(e){if(typeof e=="string")return e;if(F8(e))return L8(e,_I)+"";if(B8(e))return kk?kk.call(e):"";var t=e+"";return t=="0"&&1/e==-U8?"-0":t}var z8=_I,H8=z8;function W8(e){return e==null?"":H8(e)}var TI=W8,q8=nr,V8=G1,K8=M8,Q8=TI;function G8(e,t){return q8(e)?e:V8(e,t)?[e]:K8(Q8(e))}var OI=G8,Y8=kc,X8=1/0;function Z8(e){if(typeof e=="string"||Y8(e))return e;var t=e+"";return t=="0"&&1/e==-X8?"-0":t}var Zg=Z8,J8=OI,e7=Zg;function t7(e,t){t=J8(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[e7(t[n++])];return n&&n==r?e:void 0}var nS=t7,n7=nS;function r7(e,t,n){var r=e==null?void 0:n7(e,t);return r===void 0?n:r}var II=r7;const mr=ct(II);function i7(e){return e==null}var s7=i7;const Qe=ct(s7);var a7=bs,o7=nr,l7=ws,c7="[object String]";function u7(e){return typeof e=="string"||!o7(e)&&l7(e)&&a7(e)==c7}var d7=u7;const Of=ct(d7);var DI={exports:{}},vt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rS=Symbol.for("react.element"),iS=Symbol.for("react.portal"),Jg=Symbol.for("react.fragment"),ey=Symbol.for("react.strict_mode"),ty=Symbol.for("react.profiler"),ny=Symbol.for("react.provider"),ry=Symbol.for("react.context"),f7=Symbol.for("react.server_context"),iy=Symbol.for("react.forward_ref"),sy=Symbol.for("react.suspense"),ay=Symbol.for("react.suspense_list"),oy=Symbol.for("react.memo"),ly=Symbol.for("react.lazy"),h7=Symbol.for("react.offscreen"),RI;RI=Symbol.for("react.module.reference");function Hr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case rS:switch(e=e.type,e){case Jg:case ty:case ey:case sy:case ay:return e;default:switch(e=e&&e.$$typeof,e){case f7:case ry:case iy:case ly:case oy:case ny:return e;default:return t}}case iS:return t}}}vt.ContextConsumer=ry;vt.ContextProvider=ny;vt.Element=rS;vt.ForwardRef=iy;vt.Fragment=Jg;vt.Lazy=ly;vt.Memo=oy;vt.Portal=iS;vt.Profiler=ty;vt.StrictMode=ey;vt.Suspense=sy;vt.SuspenseList=ay;vt.isAsyncMode=function(){return!1};vt.isConcurrentMode=function(){return!1};vt.isContextConsumer=function(e){return Hr(e)===ry};vt.isContextProvider=function(e){return Hr(e)===ny};vt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===rS};vt.isForwardRef=function(e){return Hr(e)===iy};vt.isFragment=function(e){return Hr(e)===Jg};vt.isLazy=function(e){return Hr(e)===ly};vt.isMemo=function(e){return Hr(e)===oy};vt.isPortal=function(e){return Hr(e)===iS};vt.isProfiler=function(e){return Hr(e)===ty};vt.isStrictMode=function(e){return Hr(e)===ey};vt.isSuspense=function(e){return Hr(e)===sy};vt.isSuspenseList=function(e){return Hr(e)===ay};vt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Jg||e===ty||e===ey||e===sy||e===ay||e===h7||typeof e=="object"&&e!==null&&(e.$$typeof===ly||e.$$typeof===oy||e.$$typeof===ny||e.$$typeof===ry||e.$$typeof===iy||e.$$typeof===RI||e.getModuleId!==void 0)};vt.typeOf=Hr;DI.exports=vt;var p7=DI.exports,m7=bs,g7=ws,y7="[object Number]";function x7(e){return typeof e=="number"||g7(e)&&m7(e)==y7}var MI=x7;const v7=ct(MI);var b7=MI;function w7(e){return b7(e)&&e!=+e}var S7=w7;const If=ct(S7);var Ln=function(t){return t===0?0:t>0?1:-1},Ha=function(t){return Of(t)&&t.indexOf("%")===t.length-1},Pe=function(t){return v7(t)&&!If(t)},cn=function(t){return Pe(t)||Of(t)},j7=0,_c=function(t){var n=++j7;return"".concat(t||"").concat(n)},Fn=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pe(t)&&!Of(t))return r;var s;if(Ha(t)){var a=t.indexOf("%");s=n*parseFloat(t.slice(0,a))/100}else s=+t;return If(s)&&(s=r),i&&s>n&&(s=n),s},Rs=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},N7=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},i=0;i<n;i++)if(!r[t[i]])r[t[i]]=!0;else return!0;return!1},ur=function(t,n){return Pe(t)&&Pe(n)?function(r){return t+r*(n-t)}:function(){return n}};function lm(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):mr(r,t))===n})}function Cl(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Lv(e){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lv(e)}var k7=["viewBox","children"],P7=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Pk=["points","pathLength"],Ix={svg:k7,polygon:Pk,polyline:Pk},sS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],cm=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(b.isValidElement(t)&&(r=t.props),!Pc(r))return null;var i={};return Object.keys(r).forEach(function(s){sS.includes(s)&&(i[s]=n||function(a){return r[s](r,a)})}),i},C7=function(t,n,r){return function(i){return t(n,r,i),null}},co=function(t,n,r){if(!Pc(t)||Lv(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(s){var a=t[s];sS.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=C7(a,n,r))}),i},A7=["children"],E7=["children"];function Ck(e,t){if(e==null)return{};var n=_7(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _7(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Fv(e){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fv(e)}var Ak={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ts=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Ek=null,Dx=null,aS=function e(t){if(t===Ek&&Array.isArray(Dx))return Dx;var n=[];return b.Children.forEach(t,function(r){Qe(r)||(p7.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),Dx=n,Ek=t,n};function gr(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(i){return ts(i)}):r=[ts(t)],aS(e).forEach(function(i){var s=mr(i,"type.displayName")||mr(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function lr(e,t){var n=gr(e,t);return n&&n[0]}var _k=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,i=n.height;return!(!Pe(r)||r<=0||!Pe(i)||i<=0)},T7=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],O7=function(t){return t&&t.type&&Of(t.type)&&T7.indexOf(t.type)>=0},I7=function(t){return t&&Fv(t)==="object"&&"clipDot"in t},D7=function(t,n,r,i){var s,a=(s=Ix==null?void 0:Ix[i])!==null&&s!==void 0?s:[];return!He(t)&&(i&&a.includes(n)||P7.includes(n))||r&&sS.includes(n)},Be=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(b.isValidElement(t)&&(i=t.props),!Pc(i))return null;var s={};return Object.keys(i).forEach(function(a){var l;D7((l=i)===null||l===void 0?void 0:l[a],a,n,r)&&(s[a]=i[a])}),s},Bv=function e(t,n){if(t===n)return!0;var r=b.Children.count(t);if(r!==b.Children.count(n))return!1;if(r===0)return!0;if(r===1)return Tk(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=t[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!e(s,a))return!1}else if(!Tk(s,a))return!1}return!0},Tk=function(t,n){if(Qe(t)&&Qe(n))return!0;if(!Qe(t)&&!Qe(n)){var r=t.props||{},i=r.children,s=Ck(r,A7),a=n.props||{},l=a.children,c=Ck(a,E7);return i&&l?Cl(s,c)&&Bv(i,l):!i&&!l?Cl(s,c):!1}return!1},Ok=function(t,n){var r=[],i={};return aS(t).forEach(function(s,a){if(O7(s))r.push(s);else if(s){var l=ts(s.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var f=u(s,l,a);r.push(f),i[l]=!0}}}),r},R7=function(t){var n=t&&t.type;return n&&Ak[n]?Ak[n]:null},M7=function(t,n){return aS(n).indexOf(t)},$7=["children","width","height","viewBox","className","style","title","desc"];function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uv.apply(this,arguments)}function L7(e,t){if(e==null)return{};var n=F7(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function F7(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function zv(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,s=e.className,a=e.style,l=e.title,c=e.desc,u=L7(e,$7),d=i||{width:n,height:r,x:0,y:0},f=Ye("recharts-surface",s);return W.createElement("svg",Uv({},Be(u,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),W.createElement("title",null,l),W.createElement("desc",null,c),t)}var B7=["children","className"];function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hv.apply(this,arguments)}function U7(e,t){if(e==null)return{};var n=z7(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function z7(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var ot=W.forwardRef(function(e,t){var n=e.children,r=e.className,i=U7(e,B7),s=Ye("recharts-layer",r);return W.createElement("g",Hv({className:s},Be(i,!0),{ref:t}),n)}),si=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function H7(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}var W7=H7,q7=W7;function V7(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:q7(e,t,n)}var K7=V7,Q7="\\ud800-\\udfff",G7="\\u0300-\\u036f",Y7="\\ufe20-\\ufe2f",X7="\\u20d0-\\u20ff",Z7=G7+Y7+X7,J7="\\ufe0e\\ufe0f",eH="\\u200d",tH=RegExp("["+eH+Q7+Z7+J7+"]");function nH(e){return tH.test(e)}var $I=nH;function rH(e){return e.split("")}var iH=rH,LI="\\ud800-\\udfff",sH="\\u0300-\\u036f",aH="\\ufe20-\\ufe2f",oH="\\u20d0-\\u20ff",lH=sH+aH+oH,cH="\\ufe0e\\ufe0f",uH="["+LI+"]",Wv="["+lH+"]",qv="\\ud83c[\\udffb-\\udfff]",dH="(?:"+Wv+"|"+qv+")",FI="[^"+LI+"]",BI="(?:\\ud83c[\\udde6-\\uddff]){2}",UI="[\\ud800-\\udbff][\\udc00-\\udfff]",fH="\\u200d",zI=dH+"?",HI="["+cH+"]?",hH="(?:"+fH+"(?:"+[FI,BI,UI].join("|")+")"+HI+zI+")*",pH=HI+zI+hH,mH="(?:"+[FI+Wv+"?",Wv,BI,UI,uH].join("|")+")",gH=RegExp(qv+"(?="+qv+")|"+mH+pH,"g");function yH(e){return e.match(gH)||[]}var xH=yH,vH=iH,bH=$I,wH=xH;function SH(e){return bH(e)?wH(e):vH(e)}var jH=SH,NH=K7,kH=$I,PH=jH,CH=TI;function AH(e){return function(t){t=CH(t);var n=kH(t)?PH(t):void 0,r=n?n[0]:t.charAt(0),i=n?NH(n,1).join(""):t.slice(1);return r[e]()+i}}var EH=AH,_H=EH,TH=_H("toUpperCase"),OH=TH;const cy=ct(OH);function kt(e){return function(){return e}}const WI=Math.cos,um=Math.sin,ui=Math.sqrt,dm=Math.PI,uy=2*dm,Vv=Math.PI,Kv=2*Vv,Ia=1e-6,IH=Kv-Ia;function qI(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function DH(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return qI;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class RH{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?qI:DH(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,c=r-t,u=i-n,d=a-t,f=l-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Ia)if(!(Math.abs(f*c-u*d)>Ia)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-a,g=i-l,m=c*c+u*u,y=p*p+g*g,v=Math.sqrt(m),x=Math.sqrt(h),w=s*Math.tan((Vv-Math.acos((m+h-y)/(2*v*x)))/2),j=w/x,S=w/v;Math.abs(j-1)>Ia&&this._append`L${t+j*d},${n+j*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=t+S*c},${this._y1=n+S*u}`}}arc(t,n,r,i,s,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=t+l,d=n+c,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ia||Math.abs(this._y1-d)>Ia)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%Kv+Kv),h>IH?this._append`A${r},${r},0,1,${f},${t-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>Ia&&this._append`A${r},${r},0,${+(h>=Vv)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function oS(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new RH(t)}function lS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function VI(e){this._context=e}VI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function dy(e){return new VI(e)}function KI(e){return e[0]}function QI(e){return e[1]}function GI(e,t){var n=kt(!0),r=null,i=dy,s=null,a=oS(l);e=typeof e=="function"?e:e===void 0?KI:kt(e),t=typeof t=="function"?t:t===void 0?QI:kt(t);function l(c){var u,d=(c=lS(c)).length,f,h=!1,p;for(r==null&&(s=i(p=a())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(p)return s=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:kt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:kt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:kt(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),l):r},l}function yh(e,t,n){var r=null,i=kt(!0),s=null,a=dy,l=null,c=oS(u);e=typeof e=="function"?e:e===void 0?KI:kt(+e),t=typeof t=="function"?t:kt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?QI:kt(+n);function u(f){var h,p,g,m=(f=lS(f)).length,y,v=!1,x,w=new Array(m),j=new Array(m);for(s==null&&(l=a(x=c())),h=0;h<=m;++h){if(!(h<m&&i(y=f[h],h,f))===v)if(v=!v)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=p;--g)l.point(w[g],j[g]);l.lineEnd(),l.areaEnd()}v&&(w[h]=+e(y,h,f),j[h]=+t(y,h,f),l.point(r?+r(y,h,f):w[h],n?+n(y,h,f):j[h]))}if(x)return l=null,x+""||null}function d(){return GI().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:kt(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:kt(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:kt(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:kt(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:kt(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:kt(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:kt(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(l=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=l=null:l=a(s=f),u):s},u}class YI{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function MH(e){return new YI(e,!0)}function $H(e){return new YI(e,!1)}const cS={draw(e,t){const n=ui(t/dm);e.moveTo(n,0),e.arc(0,0,n,0,uy)}},LH={draw(e,t){const n=ui(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},XI=ui(1/3),FH=XI*2,BH={draw(e,t){const n=ui(t/FH),r=n*XI;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},UH={draw(e,t){const n=ui(t),r=-n/2;e.rect(r,r,n,n)}},zH=.8908130915292852,ZI=um(dm/10)/um(7*dm/10),HH=um(uy/10)*ZI,WH=-WI(uy/10)*ZI,qH={draw(e,t){const n=ui(t*zH),r=HH*n,i=WH*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const a=uy*s/5,l=WI(a),c=um(a);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*i,c*r+l*i)}e.closePath()}},Rx=ui(3),VH={draw(e,t){const n=-ui(t/(Rx*3));e.moveTo(0,n*2),e.lineTo(-Rx*n,-n),e.lineTo(Rx*n,-n),e.closePath()}},Nr=-.5,kr=ui(3)/2,Qv=1/ui(12),KH=(Qv/2+1)*3,QH={draw(e,t){const n=ui(t/KH),r=n/2,i=n*Qv,s=r,a=n*Qv+n,l=-s,c=a;e.moveTo(r,i),e.lineTo(s,a),e.lineTo(l,c),e.lineTo(Nr*r-kr*i,kr*r+Nr*i),e.lineTo(Nr*s-kr*a,kr*s+Nr*a),e.lineTo(Nr*l-kr*c,kr*l+Nr*c),e.lineTo(Nr*r+kr*i,Nr*i-kr*r),e.lineTo(Nr*s+kr*a,Nr*a-kr*s),e.lineTo(Nr*l+kr*c,Nr*c-kr*l),e.closePath()}};function GH(e,t){let n=null,r=oS(i);e=typeof e=="function"?e:kt(e||cS),t=typeof t=="function"?t:kt(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:kt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:kt(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function fm(){}function hm(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function JI(e){this._context=e}JI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YH(e){return new JI(e)}function eD(e){this._context=e}eD.prototype={areaStart:fm,areaEnd:fm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:hm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XH(e){return new eD(e)}function tD(e){this._context=e}tD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:hm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ZH(e){return new tD(e)}function nD(e){this._context=e}nD.prototype={areaStart:fm,areaEnd:fm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function JH(e){return new nD(e)}function Ik(e){return e<0?-1:1}function Dk(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),l=(s*i+a*r)/(r+i);return(Ik(s)+Ik(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function Rk(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Mx(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,l=(s-r)/3;e._context.bezierCurveTo(r+l,i+l*t,s-l,a-l*n,s,a)}function pm(e){this._context=e}pm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mx(this,this._t0,Rk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Mx(this,Rk(this,n=Dk(this,e,t)),n);break;default:Mx(this,this._t0,n=Dk(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function rD(e){this._context=new iD(e)}(rD.prototype=Object.create(pm.prototype)).point=function(e,t){pm.prototype.point.call(this,t,e)};function iD(e){this._context=e}iD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function eW(e){return new pm(e)}function tW(e){return new rD(e)}function sD(e){this._context=e}sD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Mk(e),i=Mk(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Mk(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function nW(e){return new sD(e)}function fy(e,t){this._context=e,this._t=t}fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function rW(e){return new fy(e,.5)}function iW(e){return new fy(e,0)}function sW(e){return new fy(e,1)}function ql(e,t){if((a=e.length)>1)for(var n=1,r,i,s=e[t[0]],a,l=s.length;n<a;++n)for(i=s,s=e[t[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Gv(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function aW(e,t){return e[t]}function oW(e){const t=[];return t.key=e,t}function lW(){var e=kt([]),t=Gv,n=ql,r=aW;function i(s){var a=Array.from(e.apply(this,arguments),oW),l,c=a.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(a[l][u]=[0,+r(f,a[l].key,u,s)]).data=f;for(l=0,d=lS(t(a));l<c;++l)a[d[l]].index=l;return n(a,d),a}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:kt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:kt(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Gv:typeof s=="function"?s:kt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??ql,i):n},i}function cW(e,t){if((r=e.length)>0){for(var n,r,i=0,s=e[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=e[n][i][1]||0;if(a)for(n=0;n<r;++n)e[n][i][1]/=a}ql(e,t)}}function uW(e,t){if((i=e.length)>0){for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var a=0,l=0;a<i;++a)l+=e[a][n][1]||0;r[n][1]+=r[n][0]=-l/2}ql(e,t)}}function dW(e,t){if(!(!((a=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var l=0,c=0,u=0;l<a;++l){for(var d=e[t[l]],f=d[r][1]||0,h=d[r-1][1]||0,p=(f-h)/2,g=0;g<l;++g){var m=e[t[g]],y=m[r][1]||0,v=m[r-1][1]||0;p+=y-v}c+=f,u+=p*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,ql(e,t)}}function Cd(e){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(e)}var fW=["type","size","sizeType"];function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yv.apply(this,arguments)}function $k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Lk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$k(Object(n),!0).forEach(function(r){hW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$k(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hW(e,t,n){return t=pW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pW(e){var t=mW(e,"string");return Cd(t)=="symbol"?t:t+""}function mW(e,t){if(Cd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gW(e,t){if(e==null)return{};var n=yW(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yW(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var aD={symbolCircle:cS,symbolCross:LH,symbolDiamond:BH,symbolSquare:UH,symbolStar:qH,symbolTriangle:VH,symbolWye:QH},xW=Math.PI/180,vW=function(t){var n="symbol".concat(cy(t));return aD[n]||cS},bW=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*xW;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},wW=function(t,n){aD["symbol".concat(cy(t))]=n},uS=function(t){var n=t.type,r=n===void 0?"circle":n,i=t.size,s=i===void 0?64:i,a=t.sizeType,l=a===void 0?"area":a,c=gW(t,fW),u=Lk(Lk({},c),{},{type:r,size:s,sizeType:l}),d=function(){var y=vW(r),v=GH().type(y).size(bW(s,l,r));return v()},f=u.className,h=u.cx,p=u.cy,g=Be(u,!0);return h===+h&&p===+p&&s===+s?W.createElement("path",Yv({},g,{className:Ye("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};uS.registerSymbol=wW;function Vl(e){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(e)}function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xv.apply(this,arguments)}function Fk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function SW(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fk(Object(n),!0).forEach(function(r){Ad(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NW(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lD(r.key),r)}}function kW(e,t,n){return t&&NW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PW(e,t,n){return t=mm(t),CW(e,oD()?Reflect.construct(t,n||[],mm(e).constructor):t.apply(e,n))}function CW(e,t){if(t&&(Vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AW(e)}function AW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oD=function(){return!!e})()}function mm(e){return mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mm(e)}function EW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zv(e,t)}function Zv(e,t){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Zv(e,t)}function Ad(e,t,n){return t=lD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lD(e){var t=_W(e,"string");return Vl(t)=="symbol"?t:t+""}function _W(e,t){if(Vl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pr=32,dS=function(e){function t(){return jW(this,t),PW(this,t,arguments)}return EW(t,e),kW(t,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=Pr/2,a=Pr/6,l=Pr/3,c=r.inactive?i:r.color;if(r.type==="plainline")return W.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:Pr,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return W.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Pr,"M").concat(2*l,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return W.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Pr/8,"h").concat(Pr,"v").concat(Pr*3/4,"h").concat(-Pr,"z"),className:"recharts-legend-icon"});if(W.isValidElement(r.legendIcon)){var u=SW({},r);return delete u.legendIcon,W.cloneElement(r.legendIcon,u)}return W.createElement(uS,{fill:c,cx:s,cy:s,size:Pr,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,a=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Pr,height:Pr},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,g){var m=p.formatter||c,y=Ye(Ad(Ad({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=He(p.value)?null:p.value;si(!He(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=p.inactive?u:p.color;return W.createElement("li",Xv({className:y,style:f,key:"legend-item-".concat(g)},co(r.props,p,g)),W.createElement(zv,{width:a,height:a,viewBox:d,style:h},r.renderIcon(p)),W.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},m?m(v,p,g):v))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,a=r.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return W.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(b.PureComponent);Ad(dS,"displayName","Legend");Ad(dS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var TW=Yg;function OW(){this.__data__=new TW,this.size=0}var IW=OW;function DW(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var RW=DW;function MW(e){return this.__data__.get(e)}var $W=MW;function LW(e){return this.__data__.has(e)}var FW=LW,BW=Yg,UW=Z1,zW=J1,HW=200;function WW(e,t){var n=this.__data__;if(n instanceof BW){var r=n.__data__;if(!UW||r.length<HW-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new zW(r)}return n.set(e,t),this.size=n.size,this}var qW=WW,VW=Yg,KW=IW,QW=RW,GW=$W,YW=FW,XW=qW;function Tc(e){var t=this.__data__=new VW(e);this.size=t.size}Tc.prototype.clear=KW;Tc.prototype.delete=QW;Tc.prototype.get=GW;Tc.prototype.has=YW;Tc.prototype.set=XW;var cD=Tc,ZW="__lodash_hash_undefined__";function JW(e){return this.__data__.set(e,ZW),this}var eq=JW;function tq(e){return this.__data__.has(e)}var nq=tq,rq=J1,iq=eq,sq=nq;function gm(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new rq;++t<n;)this.add(e[t])}gm.prototype.add=gm.prototype.push=iq;gm.prototype.has=sq;var uD=gm;function aq(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var dD=aq;function oq(e,t){return e.has(t)}var fD=oq,lq=uD,cq=dD,uq=fD,dq=1,fq=2;function hq(e,t,n,r,i,s){var a=n&dq,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var u=s.get(e),d=s.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,p=n&fq?new lq:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var g=e[f],m=t[f];if(r)var y=a?r(m,g,f,t,e,s):r(g,m,f,e,t,s);if(y!==void 0){if(y)continue;h=!1;break}if(p){if(!cq(t,function(v,x){if(!uq(p,x)&&(g===v||i(g,v,n,r,s)))return p.push(x)})){h=!1;break}}else if(!(g===m||i(g,m,n,r,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var hD=hq,pq=Di,mq=pq.Uint8Array,gq=mq;function yq(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var xq=yq;function vq(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var fS=vq,Bk=Tf,Uk=gq,bq=X1,wq=hD,Sq=xq,jq=fS,Nq=1,kq=2,Pq="[object Boolean]",Cq="[object Date]",Aq="[object Error]",Eq="[object Map]",_q="[object Number]",Tq="[object RegExp]",Oq="[object Set]",Iq="[object String]",Dq="[object Symbol]",Rq="[object ArrayBuffer]",Mq="[object DataView]",zk=Bk?Bk.prototype:void 0,$x=zk?zk.valueOf:void 0;function $q(e,t,n,r,i,s,a){switch(n){case Mq:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Rq:return!(e.byteLength!=t.byteLength||!s(new Uk(e),new Uk(t)));case Pq:case Cq:case _q:return bq(+e,+t);case Aq:return e.name==t.name&&e.message==t.message;case Tq:case Iq:return e==t+"";case Eq:var l=Sq;case Oq:var c=r&Nq;if(l||(l=jq),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=kq,a.set(e,t);var d=wq(l(e),l(t),r,i,s,a);return a.delete(e),d;case Dq:if($x)return $x.call(e)==$x.call(t)}return!1}var Lq=$q;function Fq(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var pD=Fq,Bq=pD,Uq=nr;function zq(e,t,n){var r=t(e);return Uq(e)?r:Bq(r,n(e))}var Hq=zq;function Wq(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}var qq=Wq;function Vq(){return[]}var Kq=Vq,Qq=qq,Gq=Kq,Yq=Object.prototype,Xq=Yq.propertyIsEnumerable,Hk=Object.getOwnPropertySymbols,Zq=Hk?function(e){return e==null?[]:(e=Object(e),Qq(Hk(e),function(t){return Xq.call(e,t)}))}:Gq,Jq=Zq;function eV(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var tV=eV,nV=bs,rV=ws,iV="[object Arguments]";function sV(e){return rV(e)&&nV(e)==iV}var aV=sV,Wk=aV,oV=ws,mD=Object.prototype,lV=mD.hasOwnProperty,cV=mD.propertyIsEnumerable,uV=Wk(function(){return arguments}())?Wk:function(e){return oV(e)&&lV.call(e,"callee")&&!cV.call(e,"callee")},hS=uV,ym={exports:{}};function dV(){return!1}var fV=dV;ym.exports;(function(e,t){var n=Di,r=fV,i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,l=a?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(ym,ym.exports);var gD=ym.exports,hV=9007199254740991,pV=/^(?:0|[1-9]\d*)$/;function mV(e,t){var n=typeof e;return t=t??hV,!!t&&(n=="number"||n!="symbol"&&pV.test(e))&&e>-1&&e%1==0&&e<t}var pS=mV,gV=9007199254740991;function yV(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=gV}var mS=yV,xV=bs,vV=mS,bV=ws,wV="[object Arguments]",SV="[object Array]",jV="[object Boolean]",NV="[object Date]",kV="[object Error]",PV="[object Function]",CV="[object Map]",AV="[object Number]",EV="[object Object]",_V="[object RegExp]",TV="[object Set]",OV="[object String]",IV="[object WeakMap]",DV="[object ArrayBuffer]",RV="[object DataView]",MV="[object Float32Array]",$V="[object Float64Array]",LV="[object Int8Array]",FV="[object Int16Array]",BV="[object Int32Array]",UV="[object Uint8Array]",zV="[object Uint8ClampedArray]",HV="[object Uint16Array]",WV="[object Uint32Array]",Et={};Et[MV]=Et[$V]=Et[LV]=Et[FV]=Et[BV]=Et[UV]=Et[zV]=Et[HV]=Et[WV]=!0;Et[wV]=Et[SV]=Et[DV]=Et[jV]=Et[RV]=Et[NV]=Et[kV]=Et[PV]=Et[CV]=Et[AV]=Et[EV]=Et[_V]=Et[TV]=Et[OV]=Et[IV]=!1;function qV(e){return bV(e)&&vV(e.length)&&!!Et[xV(e)]}var VV=qV;function KV(e){return function(t){return e(t)}}var yD=KV,xm={exports:{}};xm.exports;(function(e,t){var n=kI,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();e.exports=l})(xm,xm.exports);var QV=xm.exports,GV=VV,YV=yD,qk=QV,Vk=qk&&qk.isTypedArray,XV=Vk?YV(Vk):GV,xD=XV,ZV=tV,JV=hS,e9=nr,t9=gD,n9=pS,r9=xD,i9=Object.prototype,s9=i9.hasOwnProperty;function a9(e,t){var n=e9(e),r=!n&&JV(e),i=!n&&!r&&t9(e),s=!n&&!r&&!i&&r9(e),a=n||r||i||s,l=a?ZV(e.length,String):[],c=l.length;for(var u in e)(t||s9.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||n9(u,c)))&&l.push(u);return l}var o9=a9,l9=Object.prototype;function c9(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||l9;return e===n}var u9=c9;function d9(e,t){return function(n){return e(t(n))}}var vD=d9,f9=vD,h9=f9(Object.keys,Object),p9=h9,m9=u9,g9=p9,y9=Object.prototype,x9=y9.hasOwnProperty;function v9(e){if(!m9(e))return g9(e);var t=[];for(var n in Object(e))x9.call(e,n)&&n!="constructor"&&t.push(n);return t}var b9=v9,w9=Y1,S9=mS;function j9(e){return e!=null&&S9(e.length)&&!w9(e)}var Df=j9,N9=o9,k9=b9,P9=Df;function C9(e){return P9(e)?N9(e):k9(e)}var hy=C9,A9=Hq,E9=Jq,_9=hy;function T9(e){return A9(e,_9,E9)}var O9=T9,Kk=O9,I9=1,D9=Object.prototype,R9=D9.hasOwnProperty;function M9(e,t,n,r,i,s){var a=n&I9,l=Kk(e),c=l.length,u=Kk(t),d=u.length;if(c!=d&&!a)return!1;for(var f=c;f--;){var h=l[f];if(!(a?h in t:R9.call(t,h)))return!1}var p=s.get(e),g=s.get(t);if(p&&g)return p==t&&g==e;var m=!0;s.set(e,t),s.set(t,e);for(var y=a;++f<c;){h=l[f];var v=e[h],x=t[h];if(r)var w=a?r(x,v,h,t,e,s):r(v,x,h,e,t,s);if(!(w===void 0?v===x||i(v,x,n,r,s):w)){m=!1;break}y||(y=h=="constructor")}if(m&&!y){var j=e.constructor,S=t.constructor;j!=S&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof S=="function"&&S instanceof S)&&(m=!1)}return s.delete(e),s.delete(t),m}var $9=M9,L9=Po,F9=Di,B9=L9(F9,"DataView"),U9=B9,z9=Po,H9=Di,W9=z9(H9,"Promise"),q9=W9,V9=Po,K9=Di,Q9=V9(K9,"Set"),bD=Q9,G9=Po,Y9=Di,X9=G9(Y9,"WeakMap"),Z9=X9,Jv=U9,eb=Z1,tb=q9,nb=bD,rb=Z9,wD=bs,Oc=CI,Qk="[object Map]",J9="[object Object]",Gk="[object Promise]",Yk="[object Set]",Xk="[object WeakMap]",Zk="[object DataView]",eK=Oc(Jv),tK=Oc(eb),nK=Oc(tb),rK=Oc(nb),iK=Oc(rb),Da=wD;(Jv&&Da(new Jv(new ArrayBuffer(1)))!=Zk||eb&&Da(new eb)!=Qk||tb&&Da(tb.resolve())!=Gk||nb&&Da(new nb)!=Yk||rb&&Da(new rb)!=Xk)&&(Da=function(e){var t=wD(e),n=t==J9?e.constructor:void 0,r=n?Oc(n):"";if(r)switch(r){case eK:return Zk;case tK:return Qk;case nK:return Gk;case rK:return Yk;case iK:return Xk}return t});var sK=Da,Lx=cD,aK=hD,oK=Lq,lK=$9,Jk=sK,eP=nr,tP=gD,cK=xD,uK=1,nP="[object Arguments]",rP="[object Array]",xh="[object Object]",dK=Object.prototype,iP=dK.hasOwnProperty;function fK(e,t,n,r,i,s){var a=eP(e),l=eP(t),c=a?rP:Jk(e),u=l?rP:Jk(t);c=c==nP?xh:c,u=u==nP?xh:u;var d=c==xh,f=u==xh,h=c==u;if(h&&tP(e)){if(!tP(t))return!1;a=!0,d=!1}if(h&&!d)return s||(s=new Lx),a||cK(e)?aK(e,t,n,r,i,s):oK(e,t,c,n,r,i,s);if(!(n&uK)){var p=d&&iP.call(e,"__wrapped__"),g=f&&iP.call(t,"__wrapped__");if(p||g){var m=p?e.value():e,y=g?t.value():t;return s||(s=new Lx),i(m,y,n,r,s)}}return h?(s||(s=new Lx),lK(e,t,n,r,i,s)):!1}var hK=fK,pK=hK,sP=ws;function SD(e,t,n,r,i){return e===t?!0:e==null||t==null||!sP(e)&&!sP(t)?e!==e&&t!==t:pK(e,t,n,r,SD,i)}var gS=SD,mK=cD,gK=gS,yK=1,xK=2;function vK(e,t,n,r){var i=n.length,s=i,a=!r;if(e==null)return!s;for(e=Object(e);i--;){var l=n[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<s;){l=n[i];var c=l[0],u=e[c],d=l[1];if(a&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new mK;if(r)var h=r(u,d,c,e,t,f);if(!(h===void 0?gK(d,u,yK|xK,r,f):h))return!1}}return!0}var bK=vK,wK=ga;function SK(e){return e===e&&!wK(e)}var jD=SK,jK=jD,NK=hy;function kK(e){for(var t=NK(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,jK(i)]}return t}var PK=kK;function CK(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var ND=CK,AK=bK,EK=PK,_K=ND;function TK(e){var t=EK(e);return t.length==1&&t[0][2]?_K(t[0][0],t[0][1]):function(n){return n===e||AK(n,e,t)}}var OK=TK;function IK(e,t){return e!=null&&t in Object(e)}var DK=IK,RK=OI,MK=hS,$K=nr,LK=pS,FK=mS,BK=Zg;function UK(e,t,n){t=RK(t,e);for(var r=-1,i=t.length,s=!1;++r<i;){var a=BK(t[r]);if(!(s=e!=null&&n(e,a)))break;e=e[a]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&FK(i)&&LK(a,i)&&($K(e)||MK(e)))}var zK=UK,HK=DK,WK=zK;function qK(e,t){return e!=null&&WK(e,t,HK)}var VK=qK,KK=gS,QK=II,GK=VK,YK=G1,XK=jD,ZK=ND,JK=Zg,eQ=1,tQ=2;function nQ(e,t){return YK(e)&&XK(t)?ZK(JK(e),t):function(n){var r=QK(n,e);return r===void 0&&r===t?GK(n,e):KK(t,r,eQ|tQ)}}var rQ=nQ;function iQ(e){return e}var Ic=iQ;function sQ(e){return function(t){return t==null?void 0:t[e]}}var aQ=sQ,oQ=nS;function lQ(e){return function(t){return oQ(t,e)}}var cQ=lQ,uQ=aQ,dQ=cQ,fQ=G1,hQ=Zg;function pQ(e){return fQ(e)?uQ(hQ(e)):dQ(e)}var mQ=pQ,gQ=OK,yQ=rQ,xQ=Ic,vQ=nr,bQ=mQ;function wQ(e){return typeof e=="function"?e:e==null?xQ:typeof e=="object"?vQ(e)?yQ(e[0],e[1]):gQ(e):bQ(e)}var Ri=wQ;function SQ(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}var kD=SQ;function jQ(e){return e!==e}var NQ=jQ;function kQ(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var PQ=kQ,CQ=kD,AQ=NQ,EQ=PQ;function _Q(e,t,n){return t===t?EQ(e,t,n):CQ(e,AQ,n)}var TQ=_Q,OQ=TQ;function IQ(e,t){var n=e==null?0:e.length;return!!n&&OQ(e,t,0)>-1}var DQ=IQ;function RQ(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var MQ=RQ;function $Q(){}var LQ=$Q,Fx=bD,FQ=LQ,BQ=fS,UQ=1/0,zQ=Fx&&1/BQ(new Fx([,-0]))[1]==UQ?function(e){return new Fx(e)}:FQ,HQ=zQ,WQ=uD,qQ=DQ,VQ=MQ,KQ=fD,QQ=HQ,GQ=fS,YQ=200;function XQ(e,t,n){var r=-1,i=qQ,s=e.length,a=!0,l=[],c=l;if(n)a=!1,i=VQ;else if(s>=YQ){var u=t?null:QQ(e);if(u)return GQ(u);a=!1,i=KQ,c=new WQ}else c=t?[]:l;e:for(;++r<s;){var d=e[r],f=t?t(d):d;if(d=n||d!==0?d:0,a&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else i(c,f,n)||(c!==l&&c.push(f),l.push(d))}return l}var ZQ=XQ,JQ=Ri,eG=ZQ;function tG(e,t){return e&&e.length?eG(e,JQ(t)):[]}var nG=tG;const aP=ct(nG);function PD(e,t,n){return t===!0?aP(e,n):He(t)?aP(e,t):e}function Kl(e){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kl(e)}var rG=["ref"];function oP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(n),!0).forEach(function(r){py(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AD(r.key),r)}}function sG(e,t,n){return t&&lP(e.prototype,t),n&&lP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function aG(e,t,n){return t=vm(t),oG(e,CD()?Reflect.construct(t,n||[],vm(e).constructor):t.apply(e,n))}function oG(e,t){if(t&&(Kl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lG(e)}function lG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CD=function(){return!!e})()}function vm(e){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vm(e)}function cG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ib(e,t)}function ib(e,t){return ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ib(e,t)}function py(e,t,n){return t=AD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AD(e){var t=uG(e,"string");return Kl(t)=="symbol"?t:t+""}function uG(e,t){if(Kl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dG(e,t){if(e==null)return{};var n=fG(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fG(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function hG(e){return e.value}function pG(e,t){if(W.isValidElement(e))return W.cloneElement(e,t);if(typeof e=="function")return W.createElement(e,t);t.ref;var n=dG(t,rG);return W.createElement(dS,n)}var cP=1,ns=function(e){function t(){var n;iG(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=aG(this,t,[].concat(i)),py(n,"lastBoundingBox",{width:-1,height:-1}),n}return cG(t,e),sG(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>cP||Math.abs(i.height-this.lastBoundingBox.height)>cP)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Fi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,a=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Fi(Fi({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,a=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=Fi(Fi({position:"absolute",width:a||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return W.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){r.wrapperNode=p}},pG(s,Fi(Fi({},this.props),{},{payload:PD(d,u,hG)})))}}],[{key:"getWithHeight",value:function(r,i){var s=Fi(Fi({},this.defaultProps),r.props),a=s.layout;return a==="vertical"&&Pe(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(b.PureComponent);py(ns,"displayName","Legend");py(ns,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var uP=Tf,mG=hS,gG=nr,dP=uP?uP.isConcatSpreadable:void 0;function yG(e){return gG(e)||mG(e)||!!(dP&&e&&e[dP])}var xG=yG,vG=pD,bG=xG;function ED(e,t,n,r,i){var s=-1,a=e.length;for(n||(n=bG),i||(i=[]);++s<a;){var l=e[s];t>0&&n(l)?t>1?ED(l,t-1,n,r,i):vG(i,l):r||(i[i.length]=l)}return i}var _D=ED;function wG(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),l=a.length;l--;){var c=a[e?l:++i];if(n(s[c],c,s)===!1)break}return t}}var SG=wG,jG=SG,NG=jG(),kG=NG,PG=kG,CG=hy;function AG(e,t){return e&&PG(e,t,CG)}var TD=AG,EG=Df;function _G(e,t){return function(n,r){if(n==null)return n;if(!EG(n))return e(n,r);for(var i=n.length,s=t?i:-1,a=Object(n);(t?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var TG=_G,OG=TD,IG=TG,DG=IG(OG),yS=DG,RG=yS,MG=Df;function $G(e,t){var n=-1,r=MG(e)?Array(e.length):[];return RG(e,function(i,s,a){r[++n]=t(i,s,a)}),r}var OD=$G;function LG(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var FG=LG,fP=kc;function BG(e,t){if(e!==t){var n=e!==void 0,r=e===null,i=e===e,s=fP(e),a=t!==void 0,l=t===null,c=t===t,u=fP(t);if(!l&&!u&&!s&&e>t||s&&a&&c&&!l&&!u||r&&a&&c||!n&&c||!i)return 1;if(!r&&!s&&!u&&e<t||u&&n&&i&&!r&&!s||l&&n&&i||!a&&i||!c)return-1}return 0}var UG=BG,zG=UG;function HG(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,a=i.length,l=n.length;++r<a;){var c=zG(i[r],s[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var WG=HG,Bx=tS,qG=nS,VG=Ri,KG=OD,QG=FG,GG=yD,YG=WG,XG=Ic,ZG=nr;function JG(e,t,n){t.length?t=Bx(t,function(s){return ZG(s)?function(a){return qG(a,s.length===1?s[0]:s)}:s}):t=[XG];var r=-1;t=Bx(t,GG(VG));var i=KG(e,function(s,a,l){var c=Bx(t,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return QG(i,function(s,a){return YG(s,a,n)})}var eY=JG;function tY(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var nY=tY,rY=nY,hP=Math.max;function iY(e,t,n){return t=hP(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=hP(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),rY(e,this,l)}}var sY=iY;function aY(e){return function(){return e}}var oY=aY,lY=Po,cY=function(){try{var e=lY(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ID=cY,uY=oY,pP=ID,dY=Ic,fY=pP?function(e,t){return pP(e,"toString",{configurable:!0,enumerable:!1,value:uY(t),writable:!0})}:dY,hY=fY,pY=800,mY=16,gY=Date.now;function yY(e){var t=0,n=0;return function(){var r=gY(),i=mY-(r-n);if(n=r,i>0){if(++t>=pY)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var xY=yY,vY=hY,bY=xY,wY=bY(vY),SY=wY,jY=Ic,NY=sY,kY=SY;function PY(e,t){return kY(NY(e,t,jY),e+"")}var CY=PY,AY=X1,EY=Df,_Y=pS,TY=ga;function OY(e,t,n){if(!TY(n))return!1;var r=typeof t;return(r=="number"?EY(n)&&_Y(t,n.length):r=="string"&&t in n)?AY(n[t],e):!1}var my=OY,IY=_D,DY=eY,RY=CY,mP=my,MY=RY(function(e,t){if(e==null)return[];var n=t.length;return n>1&&mP(e,t[0],t[1])?t=[]:n>2&&mP(t[0],t[1],t[2])&&(t=[t[0]]),DY(e,IY(t,1),[])}),$Y=MY;const xS=ct($Y);function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function sb(){return sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sb.apply(this,arguments)}function LY(e,t){return zY(e)||UY(e,t)||BY(e,t)||FY()}function FY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BY(e,t){if(e){if(typeof e=="string")return gP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gP(e,t)}}function gP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function UY(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function zY(e){if(Array.isArray(e))return e}function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ux(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(n),!0).forEach(function(r){HY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HY(e,t,n){return t=WY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WY(e){var t=qY(e,"string");return Ed(t)=="symbol"?t:t+""}function qY(e,t){if(Ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VY(e){return Array.isArray(e)&&cn(e[0])&&cn(e[1])?e.join(" ~ "):e}var KY=function(t){var n=t.separator,r=n===void 0?" : ":n,i=t.contentStyle,s=i===void 0?{}:i,a=t.itemStyle,l=a===void 0?{}:a,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,p=t.wrapperClassName,g=t.labelClassName,m=t.label,y=t.labelFormatter,v=t.accessibilityLayer,x=v===void 0?!1:v,w=function(){if(d&&d.length){var R={padding:0,margin:0},z=(h?xS(d,h):d).map(function(M,I){if(M.type==="none")return null;var $=Ux({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),E=M.formatter||f||VY,T=M.value,D=M.name,H=T,F=D;if(E&&H!=null&&F!=null){var B=E(T,D,M,I,d);if(Array.isArray(B)){var Z=LY(B,2);H=Z[0],F=Z[1]}else H=B}return W.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:$},cn(F)?W.createElement("span",{className:"recharts-tooltip-item-name"},F):null,cn(F)?W.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,W.createElement("span",{className:"recharts-tooltip-item-value"},H),W.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return W.createElement("ul",{className:"recharts-tooltip-item-list",style:R},z)}return null},j=Ux({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),S=Ux({margin:0},u),k=!Qe(m),N=k?m:"",P=Ye("recharts-default-tooltip",p),A=Ye("recharts-tooltip-label",g);k&&y&&d!==void 0&&d!==null&&(N=y(m,d));var C=x?{role:"status","aria-live":"assertive"}:{};return W.createElement("div",sb({className:P,style:j},C),W.createElement("p",{className:A,style:S},W.isValidElement(N)?N:"".concat(N)),w())};function _d(e){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d(e)}function vh(e,t,n){return t=QY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QY(e){var t=GY(e,"string");return _d(t)=="symbol"?t:t+""}function GY(e,t){if(_d(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lu="recharts-tooltip-wrapper",YY={visibility:"hidden"};function XY(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Ye(lu,vh(vh(vh(vh({},"".concat(lu,"-right"),Pe(n)&&t&&Pe(t.x)&&n>=t.x),"".concat(lu,"-left"),Pe(n)&&t&&Pe(t.x)&&n<t.x),"".concat(lu,"-bottom"),Pe(r)&&t&&Pe(t.y)&&r>=t.y),"".concat(lu,"-top"),Pe(r)&&t&&Pe(t.y)&&r<t.y))}function xP(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,s=e.position,a=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&Pe(s[r]))return s[r];var d=n[r]-l-i,f=n[r]+i;if(t[r])return a[r]?d:f;if(a[r]){var h=d,p=c[r];return h<p?Math.max(f,c[r]):Math.max(d,c[r])}var g=f+l,m=c[r]+u;return g>m?Math.max(d,c[r]):Math.max(f,c[r])}function ZY(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function JY(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,i=e.position,s=e.reverseDirection,a=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return a.height>0&&a.width>0&&n?(d=xP({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),f=xP({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=ZY({translateX:d,translateY:f,useTranslate3d:l})):u=YY,{cssProperties:u,cssClasses:XY({translateX:d,translateY:f,coordinate:n})}}function Ql(e){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(e)}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(n),!0).forEach(function(r){ob(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RD(r.key),r)}}function nX(e,t,n){return t&&tX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rX(e,t,n){return t=bm(t),iX(e,DD()?Reflect.construct(t,n||[],bm(e).constructor):t.apply(e,n))}function iX(e,t){if(t&&(Ql(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sX(e)}function sX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DD=function(){return!!e})()}function bm(e){return bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bm(e)}function aX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ab(e,t)}function ab(e,t){return ab=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ab(e,t)}function ob(e,t,n){return t=RD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RD(e){var t=oX(e,"string");return Ql(t)=="symbol"?t:t+""}function oX(e,t){if(Ql(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wP=1,lX=function(e){function t(){var n;eX(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=rX(this,t,[].concat(i)),ob(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),ob(n,"handleKeyDown",function(a){if(a.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return aX(t,e),nX(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>wP||Math.abs(r.height-this.state.lastBoundingBox.height)>wP)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,p=i.offset,g=i.position,m=i.reverseDirection,y=i.useTranslate3d,v=i.viewBox,x=i.wrapperStyle,w=JY({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:p,position:g,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:v}),j=w.cssClasses,S=w.cssProperties,k=bP(bP({transition:h&&s?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},x);return W.createElement("div",{tabIndex:-1,className:j,style:k,ref:function(P){r.wrapperNode=P}},u)}}])}(b.PureComponent),cX=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ki={isSsr:cX(),get:function(t){return ki[t]},set:function(t,n){if(typeof t=="string")ki[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(i){ki[i]=t[i]})}}};function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function SP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(n),!0).forEach(function(r){vS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$D(r.key),r)}}function fX(e,t,n){return t&&dX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hX(e,t,n){return t=wm(t),pX(e,MD()?Reflect.construct(t,n||[],wm(e).constructor):t.apply(e,n))}function pX(e,t){if(t&&(Gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mX(e)}function mX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MD=function(){return!!e})()}function wm(e){return wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wm(e)}function gX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lb(e,t)}function lb(e,t){return lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lb(e,t)}function vS(e,t,n){return t=$D(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $D(e){var t=yX(e,"string");return Gl(t)=="symbol"?t:t+""}function yX(e,t){if(Gl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xX(e){return e.dataKey}function vX(e,t){return W.isValidElement(e)?W.cloneElement(e,t):typeof e=="function"?W.createElement(e,t):W.createElement(KY,t)}var cr=function(e){function t(){return uX(this,t),hX(this,t,arguments)}return gX(t,e),fX(t,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,p=i.offset,g=i.payload,m=i.payloadUniqBy,y=i.position,v=i.reverseDirection,x=i.useTranslate3d,w=i.viewBox,j=i.wrapperStyle,S=g??[];f&&S.length&&(S=PD(g.filter(function(N){return N.value!=null&&(N.hide!==!0||r.props.includeHidden)}),m,xX));var k=S.length>0;return W.createElement(lX,{allowEscapeViewBox:a,animationDuration:l,animationEasing:c,isAnimationActive:h,active:s,coordinate:d,hasPayload:k,offset:p,position:y,reverseDirection:v,useTranslate3d:x,viewBox:w,wrapperStyle:j},vX(u,jP(jP({},this.props),{},{payload:S})))}}])}(b.PureComponent);vS(cr,"displayName","Tooltip");vS(cr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ki.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var bX=Di,wX=function(){return bX.Date.now()},SX=wX,jX=/\s/;function NX(e){for(var t=e.length;t--&&jX.test(e.charAt(t)););return t}var kX=NX,PX=kX,CX=/^\s+/;function AX(e){return e&&e.slice(0,PX(e)+1).replace(CX,"")}var EX=AX,_X=EX,NP=ga,TX=kc,kP=NaN,OX=/^[-+]0x[0-9a-f]+$/i,IX=/^0b[01]+$/i,DX=/^0o[0-7]+$/i,RX=parseInt;function MX(e){if(typeof e=="number")return e;if(TX(e))return kP;if(NP(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=NP(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=_X(e);var n=IX.test(e);return n||DX.test(e)?RX(e.slice(2),n?2:8):OX.test(e)?kP:+e}var LD=MX,$X=ga,zx=SX,PP=LD,LX="Expected a function",FX=Math.max,BX=Math.min;function UX(e,t,n){var r,i,s,a,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(LX);t=PP(t)||0,$X(n)&&(d=!!n.leading,f="maxWait"in n,s=f?FX(PP(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h);function p(k){var N=r,P=i;return r=i=void 0,u=k,a=e.apply(P,N),a}function g(k){return u=k,l=setTimeout(v,t),d?p(k):a}function m(k){var N=k-c,P=k-u,A=t-N;return f?BX(A,s-P):A}function y(k){var N=k-c,P=k-u;return c===void 0||N>=t||N<0||f&&P>=s}function v(){var k=zx();if(y(k))return x(k);l=setTimeout(v,m(k))}function x(k){return l=void 0,h&&r?p(k):(r=i=void 0,a)}function w(){l!==void 0&&clearTimeout(l),u=0,r=c=i=l=void 0}function j(){return l===void 0?a:x(zx())}function S(){var k=zx(),N=y(k);if(r=arguments,i=this,c=k,N){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(v,t),p(c)}return l===void 0&&(l=setTimeout(v,t)),a}return S.cancel=w,S.flush=j,S}var zX=UX,HX=zX,WX=ga,qX="Expected a function";function VX(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(qX);return WX(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),HX(e,t,{leading:r,maxWait:t,trailing:i})}var KX=VX;const FD=ct(KX);function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}function CP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(n),!0).forEach(function(r){QX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QX(e,t,n){return t=GX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GX(e){var t=YX(e,"string");return Td(t)=="symbol"?t:t+""}function YX(e,t){if(Td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XX(e,t){return tZ(e)||eZ(e,t)||JX(e,t)||ZX()}function ZX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JX(e,t){if(e){if(typeof e=="string")return AP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AP(e,t)}}function AP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eZ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function tZ(e){if(Array.isArray(e))return e}var EP=b.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=e.width,a=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,p=e.children,g=e.debounce,m=g===void 0?0:g,y=e.id,v=e.className,x=e.onResize,w=e.style,j=w===void 0?{}:w,S=b.useRef(null),k=b.useRef();k.current=x,b.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var N=b.useState({containerWidth:i.width,containerHeight:i.height}),P=XX(N,2),A=P[0],C=P[1],_=b.useCallback(function(z,M){C(function(I){var $=Math.round(z),E=Math.round(M);return I.containerWidth===$&&I.containerHeight===E?I:{containerWidth:$,containerHeight:E}})},[]);b.useEffect(function(){var z=function(D){var H,F=D[0].contentRect,B=F.width,Z=F.height;_(B,Z),(H=k.current)===null||H===void 0||H.call(k,B,Z)};m>0&&(z=FD(z,m,{trailing:!0,leading:!1}));var M=new ResizeObserver(z),I=S.current.getBoundingClientRect(),$=I.width,E=I.height;return _($,E),M.observe(S.current),function(){M.disconnect()}},[_,m]);var R=b.useMemo(function(){var z=A.containerWidth,M=A.containerHeight;if(z<0||M<0)return null;si(Ha(a)||Ha(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,c),si(!n||n>0,"The aspect(%s) must be greater than zero.",n);var I=Ha(a)?z:a,$=Ha(c)?M:c;n&&n>0&&(I?$=I/n:$&&(I=$*n),h&&$>h&&($=h)),si(I>0||$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,$,a,c,d,f,n);var E=!Array.isArray(p)&&ts(p.type).endsWith("Chart");return W.Children.map(p,function(T){return W.isValidElement(T)?b.cloneElement(T,bh({width:I,height:$},E?{style:bh({height:"100%",width:"100%",maxHeight:$,maxWidth:I},T.props.style)}:{})):T})},[n,p,c,h,f,d,A,a]);return W.createElement("div",{id:y?"".concat(y):void 0,className:Ye("recharts-responsive-container",v),style:bh(bh({},j),{},{width:a,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:S},R)}),Rf=function(t){return null};Rf.displayName="Cell";function Od(e){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(e)}function _P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(n),!0).forEach(function(r){nZ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nZ(e,t,n){return t=rZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rZ(e){var t=iZ(e,"string");return Od(t)=="symbol"?t:t+""}function iZ(e,t){if(Od(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zo={widthCache:{},cacheCount:0},sZ=2e3,aZ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},TP="recharts_measurement_span";function oZ(e){var t=cb({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Gu=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ki.isSsr)return{width:0,height:0};var r=oZ(n),i=JSON.stringify({text:t,copyStyle:r});if(zo.widthCache[i])return zo.widthCache[i];try{var s=document.getElementById(TP);s||(s=document.createElement("span"),s.setAttribute("id",TP),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=cb(cb({},aZ),r);Object.assign(s.style,a),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return zo.widthCache[i]=c,++zo.cacheCount>sZ&&(zo.cacheCount=0,zo.widthCache={}),c}catch{return{width:0,height:0}}},lZ=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Id(e){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Id(e)}function Sm(e,t){return fZ(e)||dZ(e,t)||uZ(e,t)||cZ()}function cZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uZ(e,t){if(e){if(typeof e=="string")return OP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OP(e,t)}}function OP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dZ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function fZ(e){if(Array.isArray(e))return e}function hZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mZ(r.key),r)}}function pZ(e,t,n){return t&&IP(e.prototype,t),n&&IP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mZ(e){var t=gZ(e,"string");return Id(t)=="symbol"?t:t+""}function gZ(e,t){if(Id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var DP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,RP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yZ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xZ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,BD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vZ=Object.keys(BD),hl="NaN";function bZ(e,t){return e*BD[t]}var wh=function(){function e(t,n){hZ(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!yZ.test(n)&&(this.num=NaN,this.unit=""),vZ.includes(n)&&(this.num=bZ(t,n),this.unit="px")}return pZ(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=xZ.exec(n))!==null&&r!==void 0?r:[],s=Sm(i,3),a=s[1],l=s[2];return new e(parseFloat(a),l??"")}}])}();function UD(e){if(e.includes(hl))return hl;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=DP.exec(t))!==null&&n!==void 0?n:[],i=Sm(r,4),s=i[1],a=i[2],l=i[3],c=wh.parse(s??""),u=wh.parse(l??""),d=a==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return hl;t=t.replace(DP,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=RP.exec(t))!==null&&f!==void 0?f:[],p=Sm(h,4),g=p[1],m=p[2],y=p[3],v=wh.parse(g??""),x=wh.parse(y??""),w=m==="+"?v.add(x):v.subtract(x);if(w.isNaN())return hl;t=t.replace(RP,w.toString())}return t}var MP=/\(([^()]*)\)/;function wZ(e){for(var t=e;t.includes("(");){var n=MP.exec(t),r=Sm(n,2),i=r[1];t=t.replace(MP,UD(i))}return t}function SZ(e){var t=e.replace(/\s+/g,"");return t=wZ(t),t=UD(t),t}function jZ(e){try{return SZ(e)}catch{return hl}}function Hx(e){var t=jZ(e.slice(5,-1));return t===hl?"":t}var NZ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],kZ=["dx","dy","angle","className","breakAll"];function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ub.apply(this,arguments)}function $P(e,t){if(e==null)return{};var n=PZ(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function PZ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function LP(e,t){return _Z(e)||EZ(e,t)||AZ(e,t)||CZ()}function CZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AZ(e,t){if(e){if(typeof e=="string")return FP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FP(e,t)}}function FP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function EZ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function _Z(e){if(Array.isArray(e))return e}var zD=/[ \f\n\r\t\v\u2028\u2029]+/,HD=function(t){var n=t.children,r=t.breakAll,i=t.style;try{var s=[];Qe(n)||(r?s=n.toString().split(""):s=n.toString().split(zD));var a=s.map(function(c){return{word:c,width:Gu(c,i).width}}),l=r?0:Gu("",i).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}},TZ=function(t,n,r,i,s){var a=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Pe(a),f=l,h=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function($,E){var T=E.word,D=E.width,H=$[$.length-1];if(H&&(i==null||s||H.width+D+r<Number(i)))H.words.push(T),H.width+=D+r;else{var F={words:[T],width:D};$.push(F)}return $},[])},p=h(n),g=function(I){return I.reduce(function($,E){return $.width>E.width?$:E})};if(!d)return p;for(var m="",y=function(I){var $=f.slice(0,I),E=HD({breakAll:u,style:c,children:$+m}).wordsWithComputedWidth,T=h(E),D=T.length>a||g(T).width>Number(i);return[D,T]},v=0,x=f.length-1,w=0,j;v<=x&&w<=f.length-1;){var S=Math.floor((v+x)/2),k=S-1,N=y(k),P=LP(N,2),A=P[0],C=P[1],_=y(S),R=LP(_,1),z=R[0];if(!A&&!z&&(v=S+1),A&&z&&(x=S-1),!A&&z){j=C;break}w++}return j||p},BP=function(t){var n=Qe(t)?[]:t.toString().split(zD);return[{words:n}]},OZ=function(t){var n=t.width,r=t.scaleToFit,i=t.children,s=t.style,a=t.breakAll,l=t.maxLines;if((n||r)&&!ki.isSsr){var c,u,d=HD({breakAll:a,children:i,style:s});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return BP(i);return TZ({breakAll:a,children:i,maxLines:l,style:s},c,u,n,r)}return BP(i)},UP="#808080",uo=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,s=i===void 0?0:i,a=t.lineHeight,l=a===void 0?"1em":a,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,p=h===void 0?"start":h,g=t.verticalAnchor,m=g===void 0?"end":g,y=t.fill,v=y===void 0?UP:y,x=$P(t,NZ),w=b.useMemo(function(){return OZ({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:f,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,f,x.style,x.width]),j=x.dx,S=x.dy,k=x.angle,N=x.className,P=x.breakAll,A=$P(x,kZ);if(!cn(r)||!cn(s))return null;var C=r+(Pe(j)?j:0),_=s+(Pe(S)?S:0),R;switch(m){case"start":R=Hx("calc(".concat(u,")"));break;case"middle":R=Hx("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:R=Hx("calc(".concat(w.length-1," * -").concat(l,")"));break}var z=[];if(f){var M=w[0].width,I=x.width;z.push("scale(".concat((Pe(I)?I/M:1)/M,")"))}return k&&z.push("rotate(".concat(k,", ").concat(C,", ").concat(_,")")),z.length&&(A.transform=z.join(" ")),W.createElement("text",ub({},Be(A,!0),{x:C,y:_,className:Ye("recharts-text",N),textAnchor:p,fill:v.includes("url")?UP:v}),w.map(function($,E){var T=$.words.join(P?"":" ");return W.createElement("tspan",{x:C,dy:E===0?R:l,key:"".concat(T,"-").concat(E)},T)}))};function Js(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IZ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bS(e){let t,n,r;e.length!==2?(t=Js,n=(l,c)=>Js(e(l),c),r=(l,c)=>e(l)-c):(t=e===Js||e===IZ?e:DZ,n=e,r=e);function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function a(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:a,right:s}}function DZ(){return 0}function WD(e){return e===null?NaN:+e}function*RZ(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const MZ=bS(Js),Mf=MZ.right;bS(WD).center;class zP extends Map{constructor(t,n=FZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(HP(this,t))}has(t){return super.has(HP(this,t))}set(t,n){return super.set($Z(this,t),n)}delete(t){return super.delete(LZ(this,t))}}function HP({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function $Z({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function LZ({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function FZ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function BZ(e=Js){if(e===Js)return qD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function qD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const UZ=Math.sqrt(50),zZ=Math.sqrt(10),HZ=Math.sqrt(2);function jm(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=UZ?10:s>=zZ?5:s>=HZ?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/a,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*a,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?jm(e,t,n*2):[l,c,u]}function db(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,a]=r?jm(t,e,n):jm(e,t,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(r)if(a<0)for(let u=0;u<l;++u)c[u]=(s-u)/-a;else for(let u=0;u<l;++u)c[u]=(s-u)*a;else if(a<0)for(let u=0;u<l;++u)c[u]=(i+u)/-a;else for(let u=0;u<l;++u)c[u]=(i+u)*a;return c}function fb(e,t,n){return t=+t,e=+e,n=+n,jm(e,t,n)[2]}function hb(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?fb(t,e,n):fb(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function WP(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function qP(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function VD(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?qD:BZ(i);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(n,Math.floor(t-u*f/c+h)),g=Math.min(r,Math.floor(t+(c-u)*f/c+h));VD(e,t,p,g,i)}const s=e[t];let a=n,l=r;for(cu(e,n,t),i(e[r],s)>0&&cu(e,n,r);a<l;){for(cu(e,a,l),++a,--l;i(e[a],s)<0;)++a;for(;i(e[l],s)>0;)--l}i(e[n],s)===0?cu(e,n,l):(++l,cu(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function cu(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function WZ(e,t,n){if(e=Float64Array.from(RZ(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return qP(e);if(t>=1)return WP(e);var r,i=(r-1)*t,s=Math.floor(i),a=WP(VD(e,s).subarray(0,s+1)),l=qP(e.subarray(s+1));return a+(l-a)*(i-s)}}function qZ(e,t,n=WD){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),a=+n(e[s],s,e),l=+n(e[s+1],s+1,e);return a+(l-a)*(i-s)}}function VZ(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Wr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ss(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const pb=Symbol("implicit");function wS(){var e=new zP,t=[],n=[],r=pb;function i(s){let a=e.get(s);if(a===void 0){if(r!==pb)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new zP;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return wS(t,n).unknown(r)},Wr.apply(i,arguments),i}function Dd(){var e=wS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,a,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=i<r,g=p?i:r,m=p?r:i;s=(m-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(m-g-s*(h-c))*d,a=s*(1-c),l&&(g=Math.round(g),a=Math.round(a));var y=VZ(h).map(function(v){return g+s*v});return n(p?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,l=!0,f()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Dd(t(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},Wr.apply(f(),arguments)}function KD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return KD(t())},e}function Yu(){return KD(Dd.apply(null,arguments).paddingInner(1))}function SS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function QD(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function $f(){}var Rd=.7,Nm=1/Rd,Al="\\s*([+-]?\\d+)\\s*",Md="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",KZ=/^#([0-9a-f]{3,8})$/,QZ=new RegExp(`^rgb\\(${Al},${Al},${Al}\\)$`),GZ=new RegExp(`^rgb\\(${Pi},${Pi},${Pi}\\)$`),YZ=new RegExp(`^rgba\\(${Al},${Al},${Al},${Md}\\)$`),XZ=new RegExp(`^rgba\\(${Pi},${Pi},${Pi},${Md}\\)$`),ZZ=new RegExp(`^hsl\\(${Md},${Pi},${Pi}\\)$`),JZ=new RegExp(`^hsla\\(${Md},${Pi},${Pi},${Md}\\)$`),VP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};SS($f,$d,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:KP,formatHex:KP,formatHex8:eJ,formatHsl:tJ,formatRgb:QP,toString:QP});function KP(){return this.rgb().formatHex()}function eJ(){return this.rgb().formatHex8()}function tJ(){return GD(this).formatHsl()}function QP(){return this.rgb().formatRgb()}function $d(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=KZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?GP(t):n===3?new Xn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Sh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Sh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=QZ.exec(e))?new Xn(t[1],t[2],t[3],1):(t=GZ.exec(e))?new Xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=YZ.exec(e))?Sh(t[1],t[2],t[3],t[4]):(t=XZ.exec(e))?Sh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ZZ.exec(e))?ZP(t[1],t[2]/100,t[3]/100,1):(t=JZ.exec(e))?ZP(t[1],t[2]/100,t[3]/100,t[4]):VP.hasOwnProperty(e)?GP(VP[e]):e==="transparent"?new Xn(NaN,NaN,NaN,0):null}function GP(e){return new Xn(e>>16&255,e>>8&255,e&255,1)}function Sh(e,t,n,r){return r<=0&&(e=t=n=NaN),new Xn(e,t,n,r)}function nJ(e){return e instanceof $f||(e=$d(e)),e?(e=e.rgb(),new Xn(e.r,e.g,e.b,e.opacity)):new Xn}function mb(e,t,n,r){return arguments.length===1?nJ(e):new Xn(e,t,n,r??1)}function Xn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}SS(Xn,mb,QD($f,{brighter(e){return e=e==null?Nm:Math.pow(Nm,e),new Xn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rd:Math.pow(Rd,e),new Xn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xn(Xa(this.r),Xa(this.g),Xa(this.b),km(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YP,formatHex:YP,formatHex8:rJ,formatRgb:XP,toString:XP}));function YP(){return`#${Wa(this.r)}${Wa(this.g)}${Wa(this.b)}`}function rJ(){return`#${Wa(this.r)}${Wa(this.g)}${Wa(this.b)}${Wa((isNaN(this.opacity)?1:this.opacity)*255)}`}function XP(){const e=km(this.opacity);return`${e===1?"rgb(":"rgba("}${Xa(this.r)}, ${Xa(this.g)}, ${Xa(this.b)}${e===1?")":`, ${e})`}`}function km(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wa(e){return e=Xa(e),(e<16?"0":"")+e.toString(16)}function ZP(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ni(e,t,n,r)}function GD(e){if(e instanceof ni)return new ni(e.h,e.s,e.l,e.opacity);if(e instanceof $f||(e=$d(e)),!e)return new ni;if(e instanceof ni)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,l=s-i,c=(s+i)/2;return l?(t===s?a=(n-r)/l+(n<r)*6:n===s?a=(r-t)/l+2:a=(t-n)/l+4,l/=c<.5?s+i:2-s-i,a*=60):l=c>0&&c<1?0:a,new ni(a,l,c,e.opacity)}function iJ(e,t,n,r){return arguments.length===1?GD(e):new ni(e,t,n,r??1)}function ni(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}SS(ni,iJ,QD($f,{brighter(e){return e=e==null?Nm:Math.pow(Nm,e),new ni(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rd:Math.pow(Rd,e),new ni(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Xn(Wx(e>=240?e-240:e+120,i,r),Wx(e,i,r),Wx(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ni(JP(this.h),jh(this.s),jh(this.l),km(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=km(this.opacity);return`${e===1?"hsl(":"hsla("}${JP(this.h)}, ${jh(this.s)*100}%, ${jh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function JP(e){return e=(e||0)%360,e<0?e+360:e}function jh(e){return Math.max(0,Math.min(1,e||0))}function Wx(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const jS=e=>()=>e;function sJ(e,t){return function(n){return e+n*t}}function aJ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function oJ(e){return(e=+e)==1?YD:function(t,n){return n-t?aJ(t,n,e):jS(isNaN(t)?n:t)}}function YD(e,t){var n=t-e;return n?sJ(e,n):jS(isNaN(e)?t:e)}const e2=function e(t){var n=oJ(t);function r(i,s){var a=n((i=mb(i)).r,(s=mb(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),u=YD(i.opacity,s.opacity);return function(d){return i.r=a(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=e,r}(1);function lJ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function cJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function uJ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Dc(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(l){for(a=0;a<r;++a)s[a]=i[a](l);return s}}function dJ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Pm(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function fJ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Dc(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var gb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qx=new RegExp(gb.source,"g");function hJ(e){return function(){return e}}function pJ(e){return function(t){return e(t)+""}}function mJ(e,t){var n=gb.lastIndex=qx.lastIndex=0,r,i,s,a=-1,l=[],c=[];for(e=e+"",t=t+"";(r=gb.exec(e))&&(i=qx.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,c.push({i:a,x:Pm(r,i)})),n=qx.lastIndex;return n<t.length&&(s=t.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?pJ(c[0].x):hJ(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Dc(e,t){var n=typeof t,r;return t==null||n==="boolean"?jS(t):(n==="number"?Pm:n==="string"?(r=$d(t))?(t=r,e2):mJ:t instanceof $d?e2:t instanceof Date?dJ:cJ(t)?lJ:Array.isArray(t)?uJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?fJ:Pm)(e,t)}function NS(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function gJ(e,t){t===void 0&&(t=e,e=Dc);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(a){var l=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[l](a-l)}}function yJ(e){return function(){return e}}function Cm(e){return+e}var t2=[0,1];function Bn(e){return e}function yb(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:yJ(isNaN(t)?NaN:.5)}function xJ(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function vJ(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=yb(i,r),s=n(a,s)):(r=yb(r,i),s=n(s,a)),function(l){return s(r(l))}}function bJ(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=yb(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(l){var c=Mf(e,l,1,r)-1;return s[c](i[c](l))}}function Lf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gy(){var e=t2,t=t2,n=Dc,r,i,s,a=Bn,l,c,u;function d(){var h=Math.min(e.length,t.length);return a!==Bn&&(a=xJ(e[0],e[h-1])),l=h>2?bJ:vJ,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(r),t,n)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=l(t,e.map(r),Pm)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Cm),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=NS,d()},f.clamp=function(h){return arguments.length?(a=h?!0:Bn,d()):a!==Bn},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return r=h,i=p,d()}}function kS(){return gy()(Bn,Bn)}function wJ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Am(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Yl(e){return e=Am(Math.abs(e)),e?e[1]:NaN}function SJ(e,t){return function(n,r){for(var i=n.length,s=[],a=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=e[a=(a+1)%e.length];return s.reverse().join(t)}}function jJ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var NJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ld(e){if(!(t=NJ.exec(e)))throw new Error("invalid format: "+e);var t;return new PS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ld.prototype=PS.prototype;function PS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}PS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kJ(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var XD;function PJ(e,t){var n=Am(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(XD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Am(e,Math.max(0,t+s-1))[0]}function n2(e,t){var n=Am(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const r2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wJ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>n2(e*100,t),r:n2,s:PJ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function i2(e){return e}var s2=Array.prototype.map,a2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function CJ(e){var t=e.grouping===void 0||e.thousands===void 0?i2:SJ(s2.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?i2:jJ(s2.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Ld(f);var h=f.fill,p=f.align,g=f.sign,m=f.symbol,y=f.zero,v=f.width,x=f.comma,w=f.precision,j=f.trim,S=f.type;S==="n"?(x=!0,S="g"):r2[S]||(w===void 0&&(w=12),j=!0,S="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var k=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",N=m==="$"?r:/[%p]/.test(S)?a:"",P=r2[S],A=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function C(_){var R=k,z=N,M,I,$;if(S==="c")z=P(_)+z,_="";else{_=+_;var E=_<0||1/_<0;if(_=isNaN(_)?c:P(Math.abs(_),w),j&&(_=kJ(_)),E&&+_==0&&g!=="+"&&(E=!1),R=(E?g==="("?g:l:g==="-"||g==="("?"":g)+R,z=(S==="s"?a2[8+XD/3]:"")+z+(E&&g==="("?")":""),A){for(M=-1,I=_.length;++M<I;)if($=_.charCodeAt(M),48>$||$>57){z=($===46?i+_.slice(M+1):_.slice(M))+z,_=_.slice(0,M);break}}}x&&!y&&(_=t(_,1/0));var T=R.length+_.length+z.length,D=T<v?new Array(v-T+1).join(h):"";switch(x&&y&&(_=t(D+_,D.length?v-z.length:1/0),D=""),p){case"<":_=R+_+z+D;break;case"=":_=R+D+_+z;break;case"^":_=D.slice(0,T=D.length>>1)+R+_+z+D.slice(T);break;default:_=D+R+_+z;break}return s(_)}return C.toString=function(){return f+""},C}function d(f,h){var p=u((f=Ld(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Yl(h)/3)))*3,m=Math.pow(10,-g),y=a2[8+g/3];return function(v){return p(m*v)+y}}return{format:u,formatPrefix:d}}var Nh,CS,ZD;AJ({thousands:",",grouping:[3],currency:["$",""]});function AJ(e){return Nh=CJ(e),CS=Nh.format,ZD=Nh.formatPrefix,Nh}function EJ(e){return Math.max(0,-Yl(Math.abs(e)))}function _J(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yl(t)/3)))*3-Yl(Math.abs(e)))}function TJ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Yl(t)-Yl(e))+1}function JD(e,t,n,r){var i=hb(e,t,n),s;switch(r=Ld(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=_J(i,a))&&(r.precision=s),ZD(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=TJ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=EJ(i))&&(r.precision=s-(r.type==="%")*2);break}}return CS(r)}function ya(e){var t=e.domain;return e.ticks=function(n){var r=t();return db(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return JD(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],l=r[s],c,u,d=10;for(l<a&&(u=a,a=l,l=u,u=i,i=s,s=u);d-- >0;){if(u=fb(a,l,n),u===c)return r[i]=a,r[s]=l,t(r);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Em(){var e=kS();return e.copy=function(){return Lf(e,Em())},Wr.apply(e,arguments),ya(e)}function eR(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Cm),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return eR(e).unknown(t)},e=arguments.length?Array.from(e,Cm):[0,1],ya(n)}function tR(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),e[n]=t.floor(i),e[r]=t.ceil(s),e}function o2(e){return Math.log(e)}function l2(e){return Math.exp(e)}function OJ(e){return-Math.log(-e)}function IJ(e){return-Math.exp(-e)}function DJ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function RJ(e){return e===10?DJ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function MJ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function c2(e){return(t,n)=>-e(-t,n)}function AS(e){const t=e(o2,l2),n=t.domain;let r=10,i,s;function a(){return i=MJ(r),s=RJ(r),n()[0]<0?(i=c2(i),s=c2(s),e(OJ,IJ)):e(o2,l2),t}return t.base=function(l){return arguments.length?(r=+l,a()):r},t.domain=function(l){return arguments.length?(n(l),a()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),p=i(d),g,m;const y=l==null?10:+l;let v=[];if(!(r%1)&&p-h<y){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<r;++g)if(m=h<0?g/s(-h):g*s(h),!(m<u)){if(m>d)break;v.push(m)}}else for(;h<=p;++h)for(g=r-1;g>=1;--g)if(m=h>0?g/s(-h):g*s(h),!(m<u)){if(m>d)break;v.push(m)}v.length*2<y&&(v=db(u,d,y))}else v=db(h,p,Math.min(p-h,y)).map(s);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Ld(c)).precision==null&&(c.trim=!0),c=CS(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},t.nice=()=>n(tR(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),t}function nR(){const e=AS(gy()).domain([1,10]);return e.copy=()=>Lf(e,nR()).base(e.base()),Wr.apply(e,arguments),e}function u2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function d2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ES(e){var t=1,n=e(u2(t),d2(t));return n.constant=function(r){return arguments.length?e(u2(t=+r),d2(t)):t},ya(n)}function rR(){var e=ES(gy());return e.copy=function(){return Lf(e,rR()).constant(e.constant())},Wr.apply(e,arguments)}function f2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function $J(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function LJ(e){return e<0?-e*e:e*e}function _S(e){var t=e(Bn,Bn),n=1;function r(){return n===1?e(Bn,Bn):n===.5?e($J,LJ):e(f2(n),f2(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ya(t)}function TS(){var e=_S(gy());return e.copy=function(){return Lf(e,TS()).exponent(e.exponent())},Wr.apply(e,arguments),e}function FJ(){return TS.apply(null,arguments).exponent(.5)}function h2(e){return Math.sign(e)*e*e}function BJ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function iR(){var e=kS(),t=[0,1],n=!1,r;function i(s){var a=BJ(e(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return e.invert(h2(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Cm)).map(h2)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return iR(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Wr.apply(i,arguments),ya(i)}function sR(){var e=[],t=[],n=[],r;function i(){var a=0,l=Math.max(1,t.length);for(n=new Array(l-1);++a<l;)n[a-1]=qZ(e,a/l);return s}function s(a){return a==null||isNaN(a=+a)?r:t[Mf(n,a)]}return s.invertExtent=function(a){var l=t.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},s.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Js),i()},s.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return sR().domain(e).range(t).unknown(r)},Wr.apply(s,arguments)}function aR(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function a(c){return c!=null&&c<=c?i[Mf(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},a.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},a.unknown=function(c){return arguments.length&&(s=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return aR().domain([e,t]).range(i).unknown(s)},Wr.apply(ya(a),arguments)}function oR(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Mf(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var a=t.indexOf(s);return[e[a-1],e[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return oR().domain(e).range(t).unknown(n)},Wr.apply(i,arguments)}const Vx=new Date,Kx=new Date;function dn(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<a);return c},i.filter=s=>dn(a=>{if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;t(a,-1),!s(a););else for(;--l>=0;)for(;t(a,1),!s(a););}),n&&(i.count=(s,a)=>(Vx.setTime(+s),Kx.setTime(+a),e(Vx),e(Kx),Math.floor(n(Vx,Kx))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const _m=dn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_m.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):_m);_m.range;const Yi=1e3,Rr=Yi*60,Xi=Rr*60,us=Xi*24,OS=us*7,p2=us*30,Qx=us*365,qa=dn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yi)},(e,t)=>(t-e)/Yi,e=>e.getUTCSeconds());qa.range;const IS=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yi)},(e,t)=>{e.setTime(+e+t*Rr)},(e,t)=>(t-e)/Rr,e=>e.getMinutes());IS.range;const DS=dn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Rr)},(e,t)=>(t-e)/Rr,e=>e.getUTCMinutes());DS.range;const RS=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yi-e.getMinutes()*Rr)},(e,t)=>{e.setTime(+e+t*Xi)},(e,t)=>(t-e)/Xi,e=>e.getHours());RS.range;const MS=dn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xi)},(e,t)=>(t-e)/Xi,e=>e.getUTCHours());MS.range;const Ff=dn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Rr)/us,e=>e.getDate()-1);Ff.range;const yy=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/us,e=>e.getUTCDate()-1);yy.range;const lR=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/us,e=>Math.floor(e/us));lR.range;function Co(e){return dn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Rr)/OS)}const xy=Co(0),Tm=Co(1),UJ=Co(2),zJ=Co(3),Xl=Co(4),HJ=Co(5),WJ=Co(6);xy.range;Tm.range;UJ.range;zJ.range;Xl.range;HJ.range;WJ.range;function Ao(e){return dn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/OS)}const vy=Ao(0),Om=Ao(1),qJ=Ao(2),VJ=Ao(3),Zl=Ao(4),KJ=Ao(5),QJ=Ao(6);vy.range;Om.range;qJ.range;VJ.range;Zl.range;KJ.range;QJ.range;const $S=dn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$S.range;const LS=dn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());LS.range;const ds=dn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ds.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ds.range;const fs=dn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());fs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});fs.range;function cR(e,t,n,r,i,s){const a=[[qa,1,Yi],[qa,5,5*Yi],[qa,15,15*Yi],[qa,30,30*Yi],[s,1,Rr],[s,5,5*Rr],[s,15,15*Rr],[s,30,30*Rr],[i,1,Xi],[i,3,3*Xi],[i,6,6*Xi],[i,12,12*Xi],[r,1,us],[r,2,2*us],[n,1,OS],[t,1,p2],[t,3,3*p2],[e,1,Qx]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,p=bS(([,,y])=>y).right(a,h);if(p===a.length)return e.every(hb(u/Qx,d/Qx,f));if(p===0)return _m.every(Math.max(hb(u,d,f),1));const[g,m]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return g.every(m)}return[l,c]}const[GJ,YJ]=cR(fs,LS,vy,lR,MS,DS),[XJ,ZJ]=cR(ds,$S,xy,Ff,RS,IS);function Gx(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Yx(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function uu(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function JJ(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,l=e.months,c=e.shortMonths,u=du(i),d=fu(i),f=du(s),h=fu(s),p=du(a),g=fu(a),m=du(l),y=fu(l),v=du(c),x=fu(c),w={a:E,A:T,b:D,B:H,c:null,d:b2,e:b2,f:See,g:Oee,G:Dee,H:vee,I:bee,j:wee,L:uR,m:jee,M:Nee,p:F,q:B,Q:j2,s:N2,S:kee,u:Pee,U:Cee,V:Aee,w:Eee,W:_ee,x:null,X:null,y:Tee,Y:Iee,Z:Ree,"%":S2},j={a:Z,A:V,b:G,B:X,c:null,d:w2,e:w2,f:Fee,g:Gee,G:Xee,H:Mee,I:$ee,j:Lee,L:fR,m:Bee,M:Uee,p:U,q:ne,Q:j2,s:N2,S:zee,u:Hee,U:Wee,V:qee,w:Vee,W:Kee,x:null,X:null,y:Qee,Y:Yee,Z:Zee,"%":S2},S={a:C,A:_,b:R,B:z,c:M,d:x2,e:x2,f:mee,g:y2,G:g2,H:v2,I:v2,j:dee,L:pee,m:uee,M:fee,p:A,q:cee,Q:yee,s:xee,S:hee,u:iee,U:see,V:aee,w:ree,W:oee,x:I,X:$,y:y2,Y:g2,Z:lee,"%":gee};w.x=k(n,w),w.X=k(r,w),w.c=k(t,w),j.x=k(n,j),j.X=k(r,j),j.c=k(t,j);function k(q,ie){return function(re){var ee=[],he=-1,fe=0,je=q.length,Se,Ce,Oe;for(re instanceof Date||(re=new Date(+re));++he<je;)q.charCodeAt(he)===37&&(ee.push(q.slice(fe,he)),(Ce=m2[Se=q.charAt(++he)])!=null?Se=q.charAt(++he):Ce=Se==="e"?" ":"0",(Oe=ie[Se])&&(Se=Oe(re,Ce)),ee.push(Se),fe=he+1);return ee.push(q.slice(fe,he)),ee.join("")}}function N(q,ie){return function(re){var ee=uu(1900,void 0,1),he=P(ee,q,re+="",0),fe,je;if(he!=re.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(ie&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(fe=Yx(uu(ee.y,0,1)),je=fe.getUTCDay(),fe=je>4||je===0?Om.ceil(fe):Om(fe),fe=yy.offset(fe,(ee.V-1)*7),ee.y=fe.getUTCFullYear(),ee.m=fe.getUTCMonth(),ee.d=fe.getUTCDate()+(ee.w+6)%7):(fe=Gx(uu(ee.y,0,1)),je=fe.getDay(),fe=je>4||je===0?Tm.ceil(fe):Tm(fe),fe=Ff.offset(fe,(ee.V-1)*7),ee.y=fe.getFullYear(),ee.m=fe.getMonth(),ee.d=fe.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),je="Z"in ee?Yx(uu(ee.y,0,1)).getUTCDay():Gx(uu(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(je+5)%7:ee.w+ee.U*7-(je+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,Yx(ee)):Gx(ee)}}function P(q,ie,re,ee){for(var he=0,fe=ie.length,je=re.length,Se,Ce;he<fe;){if(ee>=je)return-1;if(Se=ie.charCodeAt(he++),Se===37){if(Se=ie.charAt(he++),Ce=S[Se in m2?ie.charAt(he++):Se],!Ce||(ee=Ce(q,re,ee))<0)return-1}else if(Se!=re.charCodeAt(ee++))return-1}return ee}function A(q,ie,re){var ee=u.exec(ie.slice(re));return ee?(q.p=d.get(ee[0].toLowerCase()),re+ee[0].length):-1}function C(q,ie,re){var ee=p.exec(ie.slice(re));return ee?(q.w=g.get(ee[0].toLowerCase()),re+ee[0].length):-1}function _(q,ie,re){var ee=f.exec(ie.slice(re));return ee?(q.w=h.get(ee[0].toLowerCase()),re+ee[0].length):-1}function R(q,ie,re){var ee=v.exec(ie.slice(re));return ee?(q.m=x.get(ee[0].toLowerCase()),re+ee[0].length):-1}function z(q,ie,re){var ee=m.exec(ie.slice(re));return ee?(q.m=y.get(ee[0].toLowerCase()),re+ee[0].length):-1}function M(q,ie,re){return P(q,t,ie,re)}function I(q,ie,re){return P(q,n,ie,re)}function $(q,ie,re){return P(q,r,ie,re)}function E(q){return a[q.getDay()]}function T(q){return s[q.getDay()]}function D(q){return c[q.getMonth()]}function H(q){return l[q.getMonth()]}function F(q){return i[+(q.getHours()>=12)]}function B(q){return 1+~~(q.getMonth()/3)}function Z(q){return a[q.getUTCDay()]}function V(q){return s[q.getUTCDay()]}function G(q){return c[q.getUTCMonth()]}function X(q){return l[q.getUTCMonth()]}function U(q){return i[+(q.getUTCHours()>=12)]}function ne(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var ie=k(q+="",w);return ie.toString=function(){return q},ie},parse:function(q){var ie=N(q+="",!1);return ie.toString=function(){return q},ie},utcFormat:function(q){var ie=k(q+="",j);return ie.toString=function(){return q},ie},utcParse:function(q){var ie=N(q+="",!0);return ie.toString=function(){return q},ie}}}var m2={"-":"",_:" ",0:"0"},yn=/^\s*\d+/,eee=/^%/,tee=/[\\^$*+?|[\]().{}]/g;function lt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function nee(e){return e.replace(tee,"\\$&")}function du(e){return new RegExp("^(?:"+e.map(nee).join("|")+")","i")}function fu(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ree(e,t,n){var r=yn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function iee(e,t,n){var r=yn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function see(e,t,n){var r=yn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function aee(e,t,n){var r=yn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function oee(e,t,n){var r=yn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function g2(e,t,n){var r=yn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function y2(e,t,n){var r=yn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lee(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function cee(e,t,n){var r=yn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function uee(e,t,n){var r=yn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function x2(e,t,n){var r=yn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function dee(e,t,n){var r=yn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function v2(e,t,n){var r=yn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function fee(e,t,n){var r=yn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function hee(e,t,n){var r=yn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function pee(e,t,n){var r=yn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function mee(e,t,n){var r=yn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function gee(e,t,n){var r=eee.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function yee(e,t,n){var r=yn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function xee(e,t,n){var r=yn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function b2(e,t){return lt(e.getDate(),t,2)}function vee(e,t){return lt(e.getHours(),t,2)}function bee(e,t){return lt(e.getHours()%12||12,t,2)}function wee(e,t){return lt(1+Ff.count(ds(e),e),t,3)}function uR(e,t){return lt(e.getMilliseconds(),t,3)}function See(e,t){return uR(e,t)+"000"}function jee(e,t){return lt(e.getMonth()+1,t,2)}function Nee(e,t){return lt(e.getMinutes(),t,2)}function kee(e,t){return lt(e.getSeconds(),t,2)}function Pee(e){var t=e.getDay();return t===0?7:t}function Cee(e,t){return lt(xy.count(ds(e)-1,e),t,2)}function dR(e){var t=e.getDay();return t>=4||t===0?Xl(e):Xl.ceil(e)}function Aee(e,t){return e=dR(e),lt(Xl.count(ds(e),e)+(ds(e).getDay()===4),t,2)}function Eee(e){return e.getDay()}function _ee(e,t){return lt(Tm.count(ds(e)-1,e),t,2)}function Tee(e,t){return lt(e.getFullYear()%100,t,2)}function Oee(e,t){return e=dR(e),lt(e.getFullYear()%100,t,2)}function Iee(e,t){return lt(e.getFullYear()%1e4,t,4)}function Dee(e,t){var n=e.getDay();return e=n>=4||n===0?Xl(e):Xl.ceil(e),lt(e.getFullYear()%1e4,t,4)}function Ree(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+lt(t/60|0,"0",2)+lt(t%60,"0",2)}function w2(e,t){return lt(e.getUTCDate(),t,2)}function Mee(e,t){return lt(e.getUTCHours(),t,2)}function $ee(e,t){return lt(e.getUTCHours()%12||12,t,2)}function Lee(e,t){return lt(1+yy.count(fs(e),e),t,3)}function fR(e,t){return lt(e.getUTCMilliseconds(),t,3)}function Fee(e,t){return fR(e,t)+"000"}function Bee(e,t){return lt(e.getUTCMonth()+1,t,2)}function Uee(e,t){return lt(e.getUTCMinutes(),t,2)}function zee(e,t){return lt(e.getUTCSeconds(),t,2)}function Hee(e){var t=e.getUTCDay();return t===0?7:t}function Wee(e,t){return lt(vy.count(fs(e)-1,e),t,2)}function hR(e){var t=e.getUTCDay();return t>=4||t===0?Zl(e):Zl.ceil(e)}function qee(e,t){return e=hR(e),lt(Zl.count(fs(e),e)+(fs(e).getUTCDay()===4),t,2)}function Vee(e){return e.getUTCDay()}function Kee(e,t){return lt(Om.count(fs(e)-1,e),t,2)}function Qee(e,t){return lt(e.getUTCFullYear()%100,t,2)}function Gee(e,t){return e=hR(e),lt(e.getUTCFullYear()%100,t,2)}function Yee(e,t){return lt(e.getUTCFullYear()%1e4,t,4)}function Xee(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Zl(e):Zl.ceil(e),lt(e.getUTCFullYear()%1e4,t,4)}function Zee(){return"+0000"}function S2(){return"%"}function j2(e){return+e}function N2(e){return Math.floor(+e/1e3)}var Ho,pR,mR;Jee({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Jee(e){return Ho=JJ(e),pR=Ho.format,Ho.parse,mR=Ho.utcFormat,Ho.utcParse,Ho}function ete(e){return new Date(e)}function tte(e){return e instanceof Date?+e:+new Date(+e)}function FS(e,t,n,r,i,s,a,l,c,u){var d=kS(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),m=u("%I:%M"),y=u("%I %p"),v=u("%a %d"),x=u("%b %d"),w=u("%B"),j=u("%Y");function S(k){return(c(k)<k?p:l(k)<k?g:a(k)<k?m:s(k)<k?y:r(k)<k?i(k)<k?v:x:n(k)<k?w:j)(k)}return d.invert=function(k){return new Date(f(k))},d.domain=function(k){return arguments.length?h(Array.from(k,tte)):h().map(ete)},d.ticks=function(k){var N=h();return e(N[0],N[N.length-1],k??10)},d.tickFormat=function(k,N){return N==null?S:u(N)},d.nice=function(k){var N=h();return(!k||typeof k.range!="function")&&(k=t(N[0],N[N.length-1],k??10)),k?h(tR(N,k)):d},d.copy=function(){return Lf(d,FS(e,t,n,r,i,s,a,l,c,u))},d}function nte(){return Wr.apply(FS(XJ,ZJ,ds,$S,xy,Ff,RS,IS,qa,pR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rte(){return Wr.apply(FS(GJ,YJ,fs,LS,vy,yy,MS,DS,qa,mR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function by(){var e=0,t=1,n,r,i,s,a=Bn,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(s(f)-n)*i,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(a=f,u):a};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,a=f(p,g),u):[a(0),a(1)]}}return u.range=d(Dc),u.rangeRound=d(NS),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function xa(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function gR(){var e=ya(by()(Bn));return e.copy=function(){return xa(e,gR())},Ss.apply(e,arguments)}function yR(){var e=AS(by()).domain([1,10]);return e.copy=function(){return xa(e,yR()).base(e.base())},Ss.apply(e,arguments)}function xR(){var e=ES(by());return e.copy=function(){return xa(e,xR()).constant(e.constant())},Ss.apply(e,arguments)}function BS(){var e=_S(by());return e.copy=function(){return xa(e,BS()).exponent(e.exponent())},Ss.apply(e,arguments)}function ite(){return BS.apply(null,arguments).exponent(.5)}function vR(){var e=[],t=Bn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Mf(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let i of r)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Js),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,i)=>t(i/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>WZ(e,s/r))},n.copy=function(){return vR(t).domain(e)},Ss.apply(n,arguments)}function wy(){var e=0,t=.5,n=1,r=1,i,s,a,l,c,u=Bn,d,f=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+d(m))-s)*(r*m<r*s?l:c),u(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,i=d(e=+e),s=d(t=+t),a=d(n=+n),l=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(u=m,p):u};function g(m){return function(y){var v,x,w;return arguments.length?([v,x,w]=y,u=gJ(m,[v,x,w]),p):[u(0),u(.5),u(1)]}}return p.range=g(Dc),p.rangeRound=g(NS),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return d=m,i=m(e),s=m(t),a=m(n),l=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,p}}function bR(){var e=ya(wy()(Bn));return e.copy=function(){return xa(e,bR())},Ss.apply(e,arguments)}function wR(){var e=AS(wy()).domain([.1,1,10]);return e.copy=function(){return xa(e,wR()).base(e.base())},Ss.apply(e,arguments)}function SR(){var e=ES(wy());return e.copy=function(){return xa(e,SR()).constant(e.constant())},Ss.apply(e,arguments)}function US(){var e=_S(wy());return e.copy=function(){return xa(e,US()).exponent(e.exponent())},Ss.apply(e,arguments)}function ste(){return US.apply(null,arguments).exponent(.5)}const k2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Dd,scaleDiverging:bR,scaleDivergingLog:wR,scaleDivergingPow:US,scaleDivergingSqrt:ste,scaleDivergingSymlog:SR,scaleIdentity:eR,scaleImplicit:pb,scaleLinear:Em,scaleLog:nR,scaleOrdinal:wS,scalePoint:Yu,scalePow:TS,scaleQuantile:sR,scaleQuantize:aR,scaleRadial:iR,scaleSequential:gR,scaleSequentialLog:yR,scaleSequentialPow:BS,scaleSequentialQuantile:vR,scaleSequentialSqrt:ite,scaleSequentialSymlog:xR,scaleSqrt:FJ,scaleSymlog:rR,scaleThreshold:oR,scaleTime:nte,scaleUtc:rte,tickFormat:JD},Symbol.toStringTag,{value:"Module"}));var ate=kc;function ote(e,t,n){for(var r=-1,i=e.length;++r<i;){var s=e[r],a=t(s);if(a!=null&&(l===void 0?a===a&&!ate(a):n(a,l)))var l=a,c=s}return c}var Sy=ote;function lte(e,t){return e>t}var jR=lte,cte=Sy,ute=jR,dte=Ic;function fte(e){return e&&e.length?cte(e,dte,ute):void 0}var hte=fte;const jy=ct(hte);function pte(e,t){return e<t}var NR=pte,mte=Sy,gte=NR,yte=Ic;function xte(e){return e&&e.length?mte(e,yte,gte):void 0}var vte=xte;const Ny=ct(vte);var bte=tS,wte=Ri,Ste=OD,jte=nr;function Nte(e,t){var n=jte(e)?bte:Ste;return n(e,wte(t))}var kte=Nte,Pte=_D,Cte=kte;function Ate(e,t){return Pte(Cte(e,t),1)}var Ete=Ate;const _te=ct(Ete);var Tte=gS;function Ote(e,t){return Tte(e,t)}var Ite=Ote;const Bf=ct(Ite);var Rc=1e9,Dte={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},HS,Dt=!0,Br="[DecimalError] ",Za=Br+"Invalid argument: ",zS=Br+"Exponent out of range: ",Mc=Math.floor,Ra=Math.pow,Rte=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fr,hn=1e7,Tt=7,kR=9007199254740991,Im=Mc(kR/Tt),De={};De.absoluteValue=De.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};De.comparedTo=De.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,i=e.d.length,t=0,n=r<i?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};De.decimalPlaces=De.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Tt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};De.dividedBy=De.div=function(e){return rs(this,new this.constructor(e))};De.dividedToIntegerBy=De.idiv=function(e){var t=this,n=t.constructor;return jt(rs(t,new n(e),0,1),n.precision)};De.equals=De.eq=function(e){return!this.cmp(e)};De.exponent=function(){return Jt(this)};De.greaterThan=De.gt=function(e){return this.cmp(e)>0};De.greaterThanOrEqualTo=De.gte=function(e){return this.cmp(e)>=0};De.isInteger=De.isint=function(){return this.e>this.d.length-2};De.isNegative=De.isneg=function(){return this.s<0};De.isPositive=De.ispos=function(){return this.s>0};De.isZero=function(){return this.s===0};De.lessThan=De.lt=function(e){return this.cmp(e)<0};De.lessThanOrEqualTo=De.lte=function(e){return this.cmp(e)<1};De.logarithm=De.log=function(e){var t,n=this,r=n.constructor,i=r.precision,s=i+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(fr))throw Error(Br+"NaN");if(n.s<1)throw Error(Br+(n.s?"NaN":"-Infinity"));return n.eq(fr)?new r(0):(Dt=!1,t=rs(Fd(n,s),Fd(e,s),s),Dt=!0,jt(t,i))};De.minus=De.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?AR(t,e):PR(t,(e.s=-e.s,e))};De.modulo=De.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(e=new r(e),!e.s)throw Error(Br+"NaN");return n.s?(Dt=!1,t=rs(n,e,0,1).times(e),Dt=!0,n.minus(t)):jt(new r(n),i)};De.naturalExponential=De.exp=function(){return CR(this)};De.naturalLogarithm=De.ln=function(){return Fd(this)};De.negated=De.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};De.plus=De.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?PR(t,e):AR(t,(e.s=-e.s,e))};De.precision=De.sd=function(e){var t,n,r,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Za+e);if(t=Jt(i)+1,r=i.d.length-1,n=r*Tt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};De.squareRoot=De.sqrt=function(){var e,t,n,r,i,s,a,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Br+"NaN")}for(e=Jt(l),Dt=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Si(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Mc((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(i.toString()),n=c.precision,i=a=n+3;;)if(s=r,r=s.plus(rs(l,s,a+2)).times(.5),Si(s.d).slice(0,a)===(t=Si(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&t=="4999"){if(jt(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(t!="9999")break;a+=4}return Dt=!0,jt(r,n)};De.times=De.mul=function(e){var t,n,r,i,s,a,l,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,n=d.e+e.e,c=h.length,u=p.length,c<u&&(s=h,h=p,p=s,a=c,c=u,u=a),s=[],a=c+u,r=a;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)l=s[i]+p[r]*h[i-r-1]+t,s[i--]=l%hn|0,t=l/hn|0;s[i]=(s[i]+t)%hn|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Dt?jt(e,f.precision):e};De.toDecimalPlaces=De.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(_i(e,0,Rc),t===void 0?t=r.rounding:_i(t,0,8),jt(n,e+Jt(n)+1,t))};De.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=fo(r,!0):(_i(e,0,Rc),t===void 0?t=i.rounding:_i(t,0,8),r=jt(new i(r),e+1,t),n=fo(r,!0,e+1)),n};De.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?fo(i):(_i(e,0,Rc),t===void 0?t=s.rounding:_i(t,0,8),r=jt(new s(i),e+Jt(i)+1,t),n=fo(r.abs(),!1,e+Jt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};De.toInteger=De.toint=function(){var e=this,t=e.constructor;return jt(new t(e),Jt(e)+1,t.rounding)};De.toNumber=function(){return+this};De.toPower=De.pow=function(e){var t,n,r,i,s,a,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(fr);if(l=new c(l),!l.s){if(e.s<1)throw Error(Br+"Infinity");return l}if(l.eq(fr))return l;if(r=c.precision,e.eq(fr))return jt(l,r);if(t=e.e,n=e.d.length-1,a=t>=n,s=l.s,a){if((n=d<0?-d:d)<=kR){for(i=new c(fr),t=Math.ceil(r/Tt+4),Dt=!1;n%2&&(i=i.times(l),C2(i.d,t)),n=Mc(n/2),n!==0;)l=l.times(l),C2(l.d,t);return Dt=!0,e.s<0?new c(fr).div(i):jt(i,r)}}else if(s<0)throw Error(Br+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Dt=!1,i=e.times(Fd(l,r+u)),Dt=!0,i=CR(i),i.s=s,i};De.toPrecision=function(e,t){var n,r,i=this,s=i.constructor;return e===void 0?(n=Jt(i),r=fo(i,n<=s.toExpNeg||n>=s.toExpPos)):(_i(e,1,Rc),t===void 0?t=s.rounding:_i(t,0,8),i=jt(new s(i),e,t),n=Jt(i),r=fo(i,e<=n||n<=s.toExpNeg,e)),r};De.toSignificantDigits=De.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(_i(e,1,Rc),t===void 0?t=r.rounding:_i(t,0,8)),jt(new r(n),e,t)};De.toString=De.valueOf=De.val=De.toJSON=De[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Jt(e),n=e.constructor;return fo(e,t<=n.toExpNeg||t>=n.toExpPos)};function PR(e,t){var n,r,i,s,a,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Dt?jt(t,f):t;if(c=e.d,u=t.d,a=e.e,i=t.e,c=c.slice(),s=a-i,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,i=a,l=c.length),a=Math.ceil(f/Tt),l=a>l?a+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/hn|0,c[s]%=hn;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,Dt?jt(t,f):t}function _i(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Za+e)}function Si(e){var t,n,r,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)r=e[t]+"",n=Tt-r.length,n&&(s+=Ts(n)),s+=r;a=e[t],r=a+"",n=Tt-r.length,n&&(s+=Ts(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var rs=function(){function e(r,i){var s,a=0,l=r.length;for(r=r.slice();l--;)s=r[l]*i+a,r[l]=s%hn|0,a=s/hn|0;return a&&r.unshift(a),r}function t(r,i,s,a){var l,c;if(s!=a)c=s>a?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*hn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var l,c,u,d,f,h,p,g,m,y,v,x,w,j,S,k,N,P,A=r.constructor,C=r.s==i.s?1:-1,_=r.d,R=i.d;if(!r.s)return new A(r);if(!i.s)throw Error(Br+"Division by zero");for(c=r.e-i.e,N=R.length,S=_.length,p=new A(C),g=p.d=[],u=0;R[u]==(_[u]||0);)++u;if(R[u]>(_[u]||0)&&--c,s==null?x=s=A.precision:a?x=s+(Jt(r)-Jt(i))+1:x=s,x<0)return new A(0);if(x=x/Tt+2|0,u=0,N==1)for(d=0,R=R[0],x++;(u<S||d)&&x--;u++)w=d*hn+(_[u]||0),g[u]=w/R|0,d=w%R|0;else{for(d=hn/(R[0]+1)|0,d>1&&(R=e(R,d),_=e(_,d),N=R.length,S=_.length),j=N,m=_.slice(0,N),y=m.length;y<N;)m[y++]=0;P=R.slice(),P.unshift(0),k=R[0],R[1]>=hn/2&&++k;do d=0,l=t(R,m,N,y),l<0?(v=m[0],N!=y&&(v=v*hn+(m[1]||0)),d=v/k|0,d>1?(d>=hn&&(d=hn-1),f=e(R,d),h=f.length,y=m.length,l=t(f,m,h,y),l==1&&(d--,n(f,N<h?P:R,h))):(d==0&&(l=d=1),f=R.slice()),h=f.length,h<y&&f.unshift(0),n(m,f,y),l==-1&&(y=m.length,l=t(R,m,N,y),l<1&&(d++,n(m,N<y?P:R,y))),y=m.length):l===0&&(d++,m=[0]),g[u++]=d,l&&m[0]?m[y++]=_[j]||0:(m=[_[j]],y=1);while((j++<S||m[0]!==void 0)&&x--)}return g[0]||g.shift(),p.e=c,jt(p,a?s+Jt(p)+1:s)}}();function CR(e,t){var n,r,i,s,a,l,c=0,u=0,d=e.constructor,f=d.precision;if(Jt(e)>16)throw Error(zS+Jt(e));if(!e.s)return new d(fr);for(t==null?(Dt=!1,l=f):l=t,a=new d(.03125);e.abs().gte(.1);)e=e.times(a),u+=5;for(r=Math.log(Ra(2,u))/Math.LN10*2+5|0,l+=r,n=i=s=new d(fr),d.precision=l;;){if(i=jt(i.times(e),l),n=n.times(++c),a=s.plus(rs(i,n,l)),Si(a.d).slice(0,l)===Si(s.d).slice(0,l)){for(;u--;)s=jt(s.times(s),l);return d.precision=f,t==null?(Dt=!0,jt(s,f)):s}s=a}}function Jt(e){for(var t=e.e*Tt,n=e.d[0];n>=10;n/=10)t++;return t}function Xx(e,t,n){if(t>e.LN10.sd())throw Dt=!0,n&&(e.precision=n),Error(Br+"LN10 precision limit exceeded");return jt(new e(e.LN10),t)}function Ts(e){for(var t="";e--;)t+="0";return t}function Fd(e,t){var n,r,i,s,a,l,c,u,d,f=1,h=10,p=e,g=p.d,m=p.constructor,y=m.precision;if(p.s<1)throw Error(Br+(p.s?"NaN":"-Infinity"));if(p.eq(fr))return new m(0);if(t==null?(Dt=!1,u=y):u=t,p.eq(10))return t==null&&(Dt=!0),Xx(m,u);if(u+=h,m.precision=u,n=Si(g),r=n.charAt(0),s=Jt(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Si(p.d),r=n.charAt(0),f++;s=Jt(p),r>1?(p=new m("0."+n),s++):p=new m(r+"."+n.slice(1))}else return c=Xx(m,u+2,y).times(s+""),p=Fd(new m(r+"."+n.slice(1)),u-h).plus(c),m.precision=y,t==null?(Dt=!0,jt(p,y)):p;for(l=a=p=rs(p.minus(fr),p.plus(fr),u),d=jt(p.times(p),u),i=3;;){if(a=jt(a.times(d),u),c=l.plus(rs(a,new m(i),u)),Si(c.d).slice(0,u)===Si(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(Xx(m,u+2,y).times(s+""))),l=rs(l,new m(f),u),m.precision=y,t==null?(Dt=!0,jt(l,y)):l;l=c,i+=2}}function P2(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(r,i),t){if(i-=r,n=n-r-1,e.e=Mc(n/Tt),e.d=[],r=(n+1)%Tt,n<0&&(r+=Tt),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Tt;r<i;)e.d.push(+t.slice(r,r+=Tt));t=t.slice(r),r=Tt-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),Dt&&(e.e>Im||e.e<-Im))throw Error(zS+n)}else e.s=0,e.e=0,e.d=[0];return e}function jt(e,t,n){var r,i,s,a,l,c,u,d,f=e.d;for(a=1,s=f[0];s>=10;s/=10)a++;if(r=t-a,r<0)r+=Tt,i=t,u=f[d=0];else{if(d=Math.ceil((r+1)/Tt),s=f.length,d>=s)return e;for(u=s=f[d],a=1;s>=10;s/=10)a++;r%=Tt,i=r-Tt+a}if(n!==void 0&&(s=Ra(10,a-i-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?u/Ra(10,a-i):0:f[d-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return c?(s=Jt(e),f.length=1,t=t-s-1,f[0]=Ra(10,(Tt-t%Tt)%Tt),e.e=Mc(-t/Tt)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(r==0?(f.length=d,s=1,d--):(f.length=d+1,s=Ra(10,Tt-r),f[d]=i>0?(u/Ra(10,a-i)%Ra(10,i)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==hn&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=hn)break;f[d--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Dt&&(e.e>Im||e.e<-Im))throw Error(zS+Jt(e));return e}function AR(e,t){var n,r,i,s,a,l,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Dt?jt(t,p):t;if(c=e.d,f=t.d,r=t.e,u=e.e,c=c.slice(),a=u-r,a){for(d=a<0,d?(n=c,a=-a,l=f.length):(n=f,r=u,l=c.length),i=Math.max(Math.ceil(p/Tt),l)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=f.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}a=0}for(d&&(n=c,c=f,f=n,t.s=-t.s),l=c.length,i=f.length-l;i>0;--i)c[l++]=0;for(i=f.length;i>a;){if(c[--i]<f[i]){for(s=i;s&&c[--s]===0;)c[s]=hn-1;--c[s],c[i]+=hn}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Dt?jt(t,p):t):new h(0)}function fo(e,t,n){var r,i=Jt(e),s=Si(e.d),a=s.length;return t?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+Ts(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ts(-i-1)+s,n&&(r=n-a)>0&&(s+=Ts(r))):i>=a?(s+=Ts(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+Ts(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=Ts(r))),e.s<0?"-"+s:s}function C2(e,t){if(e.length>t)return e.length=t,!0}function ER(e){var t,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Za+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return P2(a,s.toString())}else if(typeof s!="string")throw Error(Za+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,Rte.test(s))P2(a,s);else throw Error(Za+s)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=ER,i.config=i.set=Mte,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function Mte(e){if(!e||typeof e!="object")throw Error(Br+"Object expected");var t,n,r,i=["precision",1,Rc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((r=e[n=i[t]])!==void 0)if(Mc(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(Za+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Za+n+": "+r);return this}var HS=ER(Dte);fr=new HS(1);const wt=HS;function $te(e){return Ute(e)||Bte(e)||Fte(e)||Lte()}function Lte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fte(e,t){if(e){if(typeof e=="string")return xb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xb(e,t)}}function Bte(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Ute(e){if(Array.isArray(e))return xb(e)}function xb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zte=function(t){return t},_R={"@@functional/placeholder":!0},TR=function(t){return t===_R},A2=function(t){return function n(){return arguments.length===0||arguments.length===1&&TR(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Hte=function e(t,n){return t===1?n:A2(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter(function(l){return l!==_R}).length;return a>=t?n.apply(void 0,i):e(t-a,A2(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(f){return TR(f)?c.shift():f});return n.apply(void 0,$te(d).concat(c))}))})},ky=function(t){return Hte(t.length,t)},vb=function(t,n){for(var r=[],i=t;i<n;++i)r[i-t]=i;return r},Wte=ky(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),qte=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return zte;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},bb=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},OR=function(t){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=t.apply(void 0,s)),r}};function Vte(e){var t;return e===0?t=1:t=Math.floor(new wt(e).abs().log(10).toNumber())+1,t}function Kte(e,t,n){for(var r=new wt(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Qte=ky(function(e,t,n){var r=+e,i=+t;return r+n*(i-r)}),Gte=ky(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),Yte=ky(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Py={rangeStep:Kte,getDigitCount:Vte,interpolateNumber:Qte,uninterpolateNumber:Gte,uninterpolateTruncation:Yte};function wb(e){return Jte(e)||Zte(e)||IR(e)||Xte()}function Xte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zte(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Jte(e){if(Array.isArray(e))return Sb(e)}function Bd(e,t){return nne(e)||tne(e,t)||IR(e,t)||ene()}function ene(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IR(e,t){if(e){if(typeof e=="string")return Sb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sb(e,t)}}function Sb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tne(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=e[Symbol.iterator](),l;!(r=(l=a.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){i=!0,s=c}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function nne(e){if(Array.isArray(e))return e}function DR(e){var t=Bd(e,2),n=t[0],r=t[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function RR(e,t,n){if(e.lte(0))return new wt(0);var r=Py.getDigitCount(e.toNumber()),i=new wt(10).pow(r),s=e.div(i),a=r!==1?.05:.1,l=new wt(Math.ceil(s.div(a).toNumber())).add(n).mul(a),c=l.mul(i);return t?c:new wt(Math.ceil(c))}function rne(e,t,n){var r=1,i=new wt(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new wt(10).pow(Py.getDigitCount(e)-1),i=new wt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new wt(Math.floor(e)))}else e===0?i=new wt(Math.floor((t-1)/2)):n||(i=new wt(Math.floor(e)));var a=Math.floor((t-1)/2),l=qte(Wte(function(c){return i.add(new wt(c-a).mul(r)).toNumber()}),vb);return l(0,t)}function MR(e,t,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new wt(0),tickMin:new wt(0),tickMax:new wt(0)};var s=RR(new wt(t).sub(e).div(n-1),r,i),a;e<=0&&t>=0?a=new wt(0):(a=new wt(e).add(t).div(2),a=a.sub(new wt(a).mod(s)));var l=Math.ceil(a.sub(e).div(s).toNumber()),c=Math.ceil(new wt(t).sub(a).div(s).toNumber()),u=l+c+1;return u>n?MR(e,t,n,r,i+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:s,tickMin:a.sub(new wt(l).mul(s)),tickMax:a.add(new wt(c).mul(s))})}function ine(e){var t=Bd(e,2),n=t[0],r=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),l=DR([n,r]),c=Bd(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(wb(vb(0,i-1).map(function(){return 1/0}))):[].concat(wb(vb(0,i-1).map(function(){return-1/0})),[d]);return n>r?bb(f):f}if(u===d)return rne(u,i,s);var h=MR(u,d,a,s),p=h.step,g=h.tickMin,m=h.tickMax,y=Py.rangeStep(g,m.add(new wt(.1).mul(p)),p);return n>r?bb(y):y}function sne(e,t){var n=Bd(e,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=DR([r,i]),l=Bd(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(t,2),f=RR(new wt(u).sub(c).div(d-1),s,0),h=[].concat(wb(Py.rangeStep(new wt(c),new wt(u).sub(new wt(.99).mul(f)),f)),[u]);return r>i?bb(h):h}var ane=OR(ine),one=OR(sne),lne="Invariant failed";function ho(e,t){throw new Error(lne)}var cne=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Jl(e){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jl(e)}function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dm.apply(this,arguments)}function une(e,t){return pne(e)||hne(e,t)||fne(e,t)||dne()}function dne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fne(e,t){if(e){if(typeof e=="string")return E2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E2(e,t)}}function E2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hne(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function pne(e){if(Array.isArray(e))return e}function mne(e,t){if(e==null)return{};var n=gne(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gne(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function yne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FR(r.key),r)}}function vne(e,t,n){return t&&xne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bne(e,t,n){return t=Rm(t),wne(e,$R()?Reflect.construct(t,n||[],Rm(e).constructor):t.apply(e,n))}function wne(e,t){if(t&&(Jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sne(e)}function Sne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($R=function(){return!!e})()}function Rm(e){return Rm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rm(e)}function jne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jb(e,t)}function jb(e,t){return jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jb(e,t)}function LR(e,t,n){return t=FR(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FR(e){var t=Nne(e,"string");return Jl(t)=="symbol"?t:t+""}function Nne(e,t){if(Jl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uf=function(e){function t(){return yne(this,t),bne(this,t,arguments)}return jne(t,e),vne(t,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,a=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,h=mne(r,cne),p=Be(h,!1);this.props.direction==="x"&&d.type!=="number"&&ho();var g=c.map(function(m){var y=u(m,l),v=y.x,x=y.y,w=y.value,j=y.errorVal;if(!j)return null;var S=[],k,N;if(Array.isArray(j)){var P=une(j,2);k=P[0],N=P[1]}else k=N=j;if(s==="vertical"){var A=d.scale,C=x+i,_=C+a,R=C-a,z=A(w-k),M=A(w+N);S.push({x1:M,y1:_,x2:M,y2:R}),S.push({x1:z,y1:C,x2:M,y2:C}),S.push({x1:z,y1:_,x2:z,y2:R})}else if(s==="horizontal"){var I=f.scale,$=v+i,E=$-a,T=$+a,D=I(w-k),H=I(w+N);S.push({x1:E,y1:H,x2:T,y2:H}),S.push({x1:$,y1:D,x2:$,y2:H}),S.push({x1:E,y1:D,x2:T,y2:D})}return W.createElement(ot,Dm({className:"recharts-errorBar",key:"bar-".concat(S.map(function(F){return"".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))},p),S.map(function(F){return W.createElement("line",Dm({},F,{key:"line-".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))}))});return W.createElement(ot,{className:"recharts-errorBars"},g)}}])}(W.Component);LR(Uf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});LR(Uf,"displayName","ErrorBar");function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}function _2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(n),!0).forEach(function(r){kne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kne(e,t,n){return t=Pne(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pne(e){var t=Cne(e,"string");return Ud(t)=="symbol"?t:t+""}function Cne(e,t){if(Ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BR=function(t){var n=t.children,r=t.formattedGraphicalItems,i=t.legendWidth,s=t.legendContent,a=lr(n,ns);if(!a)return null;var l=ns.defaultProps,c=l!==void 0?ka(ka({},l),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:s==="children"?u=(r||[]).reduce(function(d,f){var h=f.item,p=f.props,g=p.sectors||p.data||[];return d.concat(g.map(function(m){return{type:a.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(r||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?ka(ka({},h),f.props):{},g=p.dataKey,m=p.name,y=p.legendType,v=p.hide;return{inactive:v,dataKey:g,type:c.iconType||y||"square",color:WS(f),value:m||g,payload:p}}),ka(ka(ka({},c),ns.getWithHeight(a,i)),{},{payload:u,item:a})};function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function T2(e){return Tne(e)||_ne(e)||Ene(e)||Ane()}function Ane(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ene(e,t){if(e){if(typeof e=="string")return Nb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nb(e,t)}}function _ne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tne(e){if(Array.isArray(e))return Nb(e)}function Nb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O2(Object(n),!0).forEach(function(r){El(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function El(e,t,n){return t=One(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function One(e){var t=Ine(e,"string");return zd(t)=="symbol"?t:t+""}function Ine(e,t){if(zd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function an(e,t,n){return Qe(e)||Qe(t)?n:cn(t)?mr(e,t,n):He(t)?t(e):n}function Xu(e,t,n,r){var i=_te(e,function(l){return an(l,t)});if(n==="number"){var s=i.filter(function(l){return Pe(l)||parseFloat(l)});return s.length?[Ny(s),jy(s)]:[1/0,-1/0]}var a=r?i.filter(function(l){return!Qe(l)}):i;return a.map(function(l){return cn(l)||l instanceof Date?l:""})}var Dne=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,f=i[u].coordinate,h=u>=l-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Ln(f-d)!==Ln(h-f)){var g=[];if(Ln(h-f)===Ln(c[1]-c[0])){p=h;var m=f+c[1]-c[0];g[0]=Math.min(m,(m+d)/2),g[1]=Math.max(m,(m+d)/2)}else{p=d;var y=h+c[1]-c[0];g[0]=Math.min(f,(y+f)/2),g[1]=Math.max(f,(y+f)/2)}var v=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>v[0]&&t<=v[1]||t>=g[0]&&t<=g[1]){a=i[u].index;break}}else{var x=Math.min(d,h),w=Math.max(d,h);if(t>(x+f)/2&&t<=(w+f)/2){a=i[u].index;break}}}else for(var j=0;j<l;j++)if(j===0&&t<=(r[j].coordinate+r[j+1].coordinate)/2||j>0&&j<l-1&&t>(r[j].coordinate+r[j-1].coordinate)/2&&t<=(r[j].coordinate+r[j+1].coordinate)/2||j===l-1&&t>(r[j].coordinate+r[j-1].coordinate)/2){a=r[j].index;break}return a},WS=function(t){var n,r=t,i=r.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Ht(Ht({},t.type.defaultProps),t.props):t.props,a=s.stroke,l=s.fill,c;switch(i){case"Line":c=a;break;case"Area":case"Radar":c=a&&a!=="none"?a:l;break;default:c=l;break}return c},Rne=function(t){var n=t.barSize,r=t.totalSize,i=t.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var g=d[f[h]],m=g.items,y=g.cateAxisId,v=m.filter(function(N){return ts(N.type).indexOf("Bar")>=0});if(v&&v.length){var x=v[0].type.defaultProps,w=x!==void 0?Ht(Ht({},x),v[0].props):v[0].props,j=w.barSize,S=w[y];a[S]||(a[S]=[]);var k=Qe(j)?n:j;a[S].push({item:v[0],stackList:v.slice(1),barSize:Qe(k)?void 0:Fn(k,r,0)})}}return a},Mne=function(t){var n=t.barGap,r=t.barCategoryGap,i=t.bandSize,s=t.sizeList,a=s===void 0?[]:s,l=t.maxBarSize,c=a.length;if(c<1)return null;var u=Fn(n,i,0,!0),d,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,p=i/c,g=a.reduce(function(j,S){return j+S.barSize||0},0);g+=(c-1)*u,g>=i&&(g-=(c-1)*u,u=0),g>=i&&p>0&&(h=!0,p*=.9,g=c*p);var m=(i-g)/2>>0,y={offset:m-u,size:0};d=a.reduce(function(j,S){var k={item:S.item,position:{offset:y.offset+y.size+u,size:h?p:S.barSize}},N=[].concat(T2(j),[k]);return y=N[N.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){N.push({item:P,position:y})}),N},f)}else{var v=Fn(r,i,0,!0);i-2*v-(c-1)*u<=0&&(u=0);var x=(i-2*v-(c-1)*u)/c;x>1&&(x>>=0);var w=l===+l?Math.min(x,l):x;d=a.reduce(function(j,S,k){var N=[].concat(T2(j),[{item:S.item,position:{offset:v+(x+u)*k+(x-w)/2,size:w}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){N.push({item:P,position:N[N.length-1].position})}),N},f)}return d},$ne=function(t,n,r,i){var s=r.children,a=r.width,l=r.margin,c=a-(l.left||0)-(l.right||0),u=BR({children:s,legendWidth:c});if(u){var d=i||{},f=d.width,h=d.height,p=u.align,g=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&g==="middle")&&p!=="center"&&Pe(t[p]))return Ht(Ht({},t),{},El({},p,t[p]+(f||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&g!=="middle"&&Pe(t[g]))return Ht(Ht({},t),{},El({},g,t[g]+(h||0)))}return t},Lne=function(t,n,r){return Qe(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},UR=function(t,n,r,i,s){var a=n.props.children,l=gr(a,Uf).filter(function(u){return Lne(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=an(d,r);if(Qe(f))return u;var h=Array.isArray(f)?[Ny(f),jy(f)]:[f,f],p=c.reduce(function(g,m){var y=an(d,m,0),v=h[0]-Math.abs(Array.isArray(y)?y[0]:y),x=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(v,g[0]),Math.max(x,g[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},Fne=function(t,n,r,i,s){var a=n.map(function(l){return UR(t,l,r,s,i)}).filter(function(l){return!Qe(l)});return a&&a.length?a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},zR=function(t,n,r,i,s){var a=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&UR(t,c,u,i)||Xu(t,u,r,s)});if(r==="number")return a.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return a.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},HR=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},WR=function(t,n,r,i){if(i)return t.map(function(c){return c.coordinate});var s,a,l=t.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(a=!0),c.coordinate});return s||l.push(n),a||l.push(r),l},Zi=function(t,n,r){if(!t)return null;var i=t.scale,s=t.duplicateDomain,a=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ln(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=s?s.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return d.filter(function(f){return!If(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!r?i.ticks(t.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:s?s[f]:f,index:h,offset:u}})},Zx=new WeakMap,kh=function(t,n){if(typeof n!="function")return t;Zx.has(t)||Zx.set(t,new WeakMap);var r=Zx.get(t);if(r.has(n))return r.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},qR=function(t,n,r){var i=t.scale,s=t.type,a=t.layout,l=t.axisType;if(i==="auto")return a==="radial"&&l==="radiusAxis"?{scale:Dd(),realScaleType:"band"}:a==="radial"&&l==="angleAxis"?{scale:Em(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Yu(),realScaleType:"point"}:s==="category"?{scale:Dd(),realScaleType:"band"}:{scale:Em(),realScaleType:"linear"};if(Of(i)){var c="scale".concat(cy(i));return{scale:(k2[c]||Yu)(),realScaleType:k2[c]?c:"point"}}return He(i)?{scale:i}:{scale:Yu(),realScaleType:"point"}},I2=1e-4,VR=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,i=t.range(),s=Math.min(i[0],i[1])-I2,a=Math.max(i[0],i[1])+I2,l=t(n[0]),c=t(n[r-1]);(l<s||l>a||c<s||c>a)&&t.domain([n[0],n[r-1]])}},Bne=function(t,n){if(!t)return null;for(var r=0,i=t.length;r<i;r++)if(t[r].item===n)return t[r].position;return null},Une=function(t,n){if(!n||n.length!==2||!Pe(n[0])||!Pe(n[1]))return t;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!Pe(t[0])||t[0]<r)&&(s[0]=r),(!Pe(t[1])||t[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},zne=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var s=0,a=0,l=0;l<n;++l){var c=If(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=s,t[l][r][1]=s+c,s=t[l][r][1]):(t[l][r][0]=a,t[l][r][1]=a+c,a=t[l][r][1])}},Hne=function(t){var n=t.length;if(!(n<=0))for(var r=0,i=t[0].length;r<i;++r)for(var s=0,a=0;a<n;++a){var l=If(t[a][r][1])?t[a][r][0]:t[a][r][1];l>=0?(t[a][r][0]=s,t[a][r][1]=s+l,s=t[a][r][1]):(t[a][r][0]=0,t[a][r][1]=0)}},Wne={sign:zne,expand:cW,none:ql,silhouette:uW,wiggle:dW,positive:Hne},qne=function(t,n,r){var i=n.map(function(l){return l.props.dataKey}),s=Wne[r],a=lW().keys(i).value(function(l,c){return+an(l,c,0)}).order(Gv).offset(s);return a(t)},Vne=function(t,n,r,i,s,a){if(!t)return null;var l=a?n.reverse():n,c={},u=l.reduce(function(f,h){var p,g=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Ht(Ht({},h.type.defaultProps),h.props):h.props,m=g.stackId,y=g.hide;if(y)return f;var v=g[r],x=f[v]||{hasStack:!1,stackGroups:{}};if(cn(m)){var w=x.stackGroups[m]||{numericAxisId:r,cateAxisId:i,items:[]};w.items.push(h),x.hasStack=!0,x.stackGroups[m]=w}else x.stackGroups[_c("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Ht(Ht({},f),{},El({},v,x))},c),d={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var g={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,y){var v=p.stackGroups[y];return Ht(Ht({},m),{},El({},y,{numericAxisId:r,cateAxisId:i,items:v.items,stackedData:qne(t,v.items,s)}))},g)}return Ht(Ht({},f),{},El({},h,p))},d)},KR=function(t,n){var r=n.realScaleType,i=n.type,s=n.tickCount,a=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=ane(u,s,l);return t.domain([Ny(d),jy(d)]),{niceTicks:d}}if(s&&i==="number"){var f=t.domain(),h=one(f,s,l);return{niceTicks:h}}return null};function D2(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,s=e.index,a=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qe(i[t.dataKey])){var l=lm(n,"value",i[t.dataKey]);if(l)return l.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var c=an(i,Qe(a)?t.dataKey:a);return Qe(c)?null:t.scale(c)}var R2=function(t){var n=t.axis,r=t.ticks,i=t.offset,s=t.bandSize,a=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+i:null;var c=an(a,n.dataKey,n.domain[l]);return Qe(c)?null:n.scale(c)-s/2+i},Kne=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},Qne=function(t,n){var r,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Ht(Ht({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(cn(s)){var a=n[s];if(a){var l=a.items.indexOf(t);return l>=0?a.stackedData[l]:null}}return null},Gne=function(t){return t.reduce(function(n,r){return[Ny(r.concat([n[0]]).filter(Pe)),jy(r.concat([n[1]]).filter(Pe))]},[1/0,-1/0])},QR=function(t,n,r){return Object.keys(t).reduce(function(i,s){var a=t[s],l=a.stackedData,c=l.reduce(function(u,d){var f=Gne(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},M2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kb=function(t,n,r){if(He(t))return t(n,r);if(!Array.isArray(t))return n;var i=[];if(Pe(t[0]))i[0]=r?t[0]:Math.min(t[0],n[0]);else if(M2.test(t[0])){var s=+M2.exec(t[0])[1];i[0]=n[0]-s}else He(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(Pe(t[1]))i[1]=r?t[1]:Math.max(t[1],n[1]);else if($2.test(t[1])){var a=+$2.exec(t[1])[1];i[1]=n[1]+a}else He(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},Mm=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!r||i>0)return i}if(t&&n&&n.length>=2){for(var s=xS(n,function(f){return f.coordinate}),a=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},L2=function(t,n,r){return!t||!t.length||Bf(t,mr(r,"type.defaultProps.domain"))?n:t},GR=function(t,n){var r=t.type.defaultProps?Ht(Ht({},t.type.defaultProps),t.props):t.props,i=r.dataKey,s=r.name,a=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return Ht(Ht({},Be(t,!1)),{},{dataKey:i,unit:a,formatter:l,name:s||i,color:WS(t),value:an(n,i),type:c,payload:n,chartType:u,hide:d})};function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function F2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F2(Object(n),!0).forEach(function(r){YR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YR(e,t,n){return t=Yne(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yne(e){var t=Xne(e,"string");return Hd(t)=="symbol"?t:t+""}function Xne(e,t){if(Hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zne(e,t){return nre(e)||tre(e,t)||ere(e,t)||Jne()}function Jne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ere(e,t){if(e){if(typeof e=="string")return B2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B2(e,t)}}function B2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tre(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function nre(e){if(Array.isArray(e))return e}var $m=Math.PI/180,rre=function(t){return t*180/Math.PI},Ct=function(t,n,r,i){return{x:t+Math.cos(-$m*i)*r,y:n+Math.sin(-$m*i)*r}},XR=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},ire=function(t,n,r,i,s){var a=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=Fn(t.cx,a,a/2),f=Fn(t.cy,l,l/2),h=XR(a,l,r),p=Fn(t.innerRadius,h,0),g=Fn(t.outerRadius,h,h*.8),m=Object.keys(n);return m.reduce(function(y,v){var x=n[v],w=x.domain,j=x.reversed,S;if(Qe(x.range))i==="angleAxis"?S=[c,u]:i==="radiusAxis"&&(S=[p,g]),j&&(S=[S[1],S[0]]);else{S=x.range;var k=S,N=Zne(k,2);c=N[0],u=N[1]}var P=qR(x,s),A=P.realScaleType,C=P.scale;C.domain(w).range(S),VR(C);var _=KR(C,Wi(Wi({},x),{},{realScaleType:A})),R=Wi(Wi(Wi({},x),_),{},{range:S,radius:g,realScaleType:A,scale:C,cx:d,cy:f,innerRadius:p,outerRadius:g,startAngle:c,endAngle:u});return Wi(Wi({},y),{},YR({},v,R))},{})},sre=function(t,n){var r=t.x,i=t.y,s=n.x,a=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-a,2))},are=function(t,n){var r=t.x,i=t.y,s=n.cx,a=n.cy,l=sre({x:r,y:i},{x:s,y:a});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return i>a&&(u=2*Math.PI-u),{radius:l,angle:rre(u),angleInRadian:u}},ore=function(t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return{startAngle:n-a*360,endAngle:r-a*360}},lre=function(t,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),a=Math.floor(i/360),l=Math.min(s,a);return t+l*360},U2=function(t,n){var r=t.x,i=t.y,s=are({x:r,y:i},n),a=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(a<c||a>u)return!1;if(a===0)return!0;var d=ore(n),f=d.startAngle,h=d.endAngle,p=l,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?Wi(Wi({},n),{},{radius:a,angle:lre(p,n)}):null},ZR=function(t){return!b.isValidElement(t)&&!He(t)&&typeof t!="boolean"?t.className:""};function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}var cre=["offset"];function ure(e){return pre(e)||hre(e)||fre(e)||dre()}function dre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fre(e,t){if(e){if(typeof e=="string")return Pb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pb(e,t)}}function hre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pre(e){if(Array.isArray(e))return Pb(e)}function Pb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mre(e,t){if(e==null)return{};var n=gre(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gre(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function z2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z2(Object(n),!0).forEach(function(r){yre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yre(e,t,n){return t=xre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xre(e){var t=vre(e,"string");return Wd(t)=="symbol"?t:t+""}function vre(e,t){if(Wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qd(){return qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qd.apply(this,arguments)}var bre=function(t){var n=t.value,r=t.formatter,i=Qe(t.children)?n:t.children;return He(r)?r(i):i},wre=function(t,n){var r=Ln(n-t),i=Math.min(Math.abs(n-t),360);return r*i},Sre=function(t,n,r){var i=t.position,s=t.viewBox,a=t.offset,l=t.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,g=c.endAngle,m=c.clockWise,y=(f+h)/2,v=wre(p,g),x=v>=0?1:-1,w,j;i==="insideStart"?(w=p+x*a,j=m):i==="insideEnd"?(w=g-x*a,j=!m):i==="end"&&(w=g+x*a,j=m),j=v<=0?j:!j;var S=Ct(u,d,y,w),k=Ct(u,d,y,w+(j?1:-1)*359),N="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(j?0:1,`,
    `).concat(k.x,",").concat(k.y),P=Qe(t.id)?_c("recharts-radial-line-"):t.id;return W.createElement("text",qd({},r,{dominantBaseline:"central",className:Ye("recharts-radial-bar-label",l)}),W.createElement("defs",null,W.createElement("path",{id:P,d:N})),W.createElement("textPath",{xlinkHref:"#".concat(P)},n))},jre=function(t){var n=t.viewBox,r=t.offset,i=t.position,s=n,a=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,h=(d+f)/2;if(i==="outside"){var p=Ct(a,l,u+r,h),g=p.x,m=p.y;return{x:g,y:m,textAnchor:g>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,v=Ct(a,l,y,h),x=v.x,w=v.y;return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Nre=function(t){var n=t.viewBox,r=t.parentViewBox,i=t.offset,s=t.position,a=n,l=a.x,c=a.y,u=a.width,d=a.height,f=d>=0?1:-1,h=f*i,p=f>0?"end":"start",g=f>0?"start":"end",m=u>=0?1:-1,y=m*i,v=m>0?"end":"start",x=m>0?"start":"end";if(s==="top"){var w={x:l+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:p};return nn(nn({},w),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var j={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return nn(nn({},j),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(s==="left"){var S={x:l-y,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return nn(nn({},S),r?{width:Math.max(S.x-r.x,0),height:d}:{})}if(s==="right"){var k={x:l+u+y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return nn(nn({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:d}:{})}var N=r?{width:u,height:d}:{};return s==="insideLeft"?nn({x:l+y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},N):s==="insideRight"?nn({x:l+u-y,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},N):s==="insideTop"?nn({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},N):s==="insideBottom"?nn({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:p},N):s==="insideTopLeft"?nn({x:l+y,y:c+h,textAnchor:x,verticalAnchor:g},N):s==="insideTopRight"?nn({x:l+u-y,y:c+h,textAnchor:v,verticalAnchor:g},N):s==="insideBottomLeft"?nn({x:l+y,y:c+d-h,textAnchor:x,verticalAnchor:p},N):s==="insideBottomRight"?nn({x:l+u-y,y:c+d-h,textAnchor:v,verticalAnchor:p},N):Pc(s)&&(Pe(s.x)||Ha(s.x))&&(Pe(s.y)||Ha(s.y))?nn({x:l+Fn(s.x,u),y:c+Fn(s.y,d),textAnchor:"end",verticalAnchor:"end"},N):nn({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},N)},kre=function(t){return"cx"in t&&Pe(t.cx)};function mn(e){var t=e.offset,n=t===void 0?5:t,r=mre(e,cre),i=nn({offset:n},r),s=i.viewBox,a=i.position,l=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!s||Qe(l)&&Qe(c)&&!b.isValidElement(u)&&!He(u))return null;if(b.isValidElement(u))return b.cloneElement(u,i);var p;if(He(u)){if(p=b.createElement(u,i),b.isValidElement(p))return p}else p=bre(i);var g=kre(s),m=Be(i,!0);if(g&&(a==="insideStart"||a==="insideEnd"||a==="end"))return Sre(i,p,m);var y=g?jre(i):Nre(i);return W.createElement(uo,qd({className:Ye("recharts-label",f)},m,y,{breakAll:h}),p)}mn.displayName="Label";var JR=function(t){var n=t.cx,r=t.cy,i=t.angle,s=t.startAngle,a=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,p=t.top,g=t.left,m=t.width,y=t.height,v=t.clockWise,x=t.labelViewBox;if(x)return x;if(Pe(m)&&Pe(y)){if(Pe(f)&&Pe(h))return{x:f,y:h,width:m,height:y};if(Pe(p)&&Pe(g))return{x:p,y:g,width:m,height:y}}return Pe(f)&&Pe(h)?{x:f,y:h,width:0,height:0}:Pe(n)&&Pe(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},Pre=function(t,n){return t?t===!0?W.createElement(mn,{key:"label-implicit",viewBox:n}):cn(t)?W.createElement(mn,{key:"label-implicit",viewBox:n,value:t}):b.isValidElement(t)?t.type===mn?b.cloneElement(t,{key:"label-implicit",viewBox:n}):W.createElement(mn,{key:"label-implicit",content:t,viewBox:n}):He(t)?W.createElement(mn,{key:"label-implicit",content:t,viewBox:n}):Pc(t)?W.createElement(mn,qd({viewBox:n},t,{key:"label-implicit"})):null:null},Cre=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var i=t.children,s=JR(t),a=gr(i,mn).map(function(c,u){return b.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return a;var l=Pre(t.label,n||s);return[l].concat(ure(a))};mn.parseViewBox=JR;mn.renderCallByParent=Cre;function Are(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ere=Are;const _re=ct(Ere);function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}var Tre=["valueAccessor"],Ore=["data","dataKey","clockWise","id","textBreakAll"];function Ire(e){return $re(e)||Mre(e)||Rre(e)||Dre()}function Dre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rre(e,t){if(e){if(typeof e=="string")return Cb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cb(e,t)}}function Mre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $re(e){if(Array.isArray(e))return Cb(e)}function Cb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lm.apply(this,arguments)}function H2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function W2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H2(Object(n),!0).forEach(function(r){Lre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lre(e,t,n){return t=Fre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fre(e){var t=Bre(e,"string");return Vd(t)=="symbol"?t:t+""}function Bre(e,t){if(Vd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q2(e,t){if(e==null)return{};var n=Ure(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ure(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var zre=function(t){return Array.isArray(t.value)?_re(t.value):t.value};function is(e){var t=e.valueAccessor,n=t===void 0?zre:t,r=q2(e,Tre),i=r.data,s=r.dataKey,a=r.clockWise,l=r.id,c=r.textBreakAll,u=q2(r,Ore);return!i||!i.length?null:W.createElement(ot,{className:"recharts-label-list"},i.map(function(d,f){var h=Qe(s)?n(d,f):an(d&&d.payload,s),p=Qe(l)?{}:{id:"".concat(l,"-").concat(f)};return W.createElement(mn,Lm({},Be(d,!0),u,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:mn.parseViewBox(Qe(a)?d:W2(W2({},d),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}is.displayName="LabelList";function Hre(e,t){return e?e===!0?W.createElement(is,{key:"labelList-implicit",data:t}):W.isValidElement(e)||He(e)?W.createElement(is,{key:"labelList-implicit",data:t,content:e}):Pc(e)?W.createElement(is,Lm({data:t},e,{key:"labelList-implicit"})):null:null}function Wre(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=gr(r,is).map(function(a,l){return b.cloneElement(a,{data:t,key:"labelList-".concat(l)})});if(!n)return i;var s=Hre(e.label,t);return[s].concat(Ire(i))}is.renderCallByParent=Wre;function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ab.apply(this,arguments)}function V2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function K2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V2(Object(n),!0).forEach(function(r){qre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qre(e,t,n){return t=Vre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vre(e){var t=Kre(e,"string");return Kd(t)=="symbol"?t:t+""}function Kre(e,t){if(Kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qre=function(t,n){var r=Ln(n-t),i=Math.min(Math.abs(n-t),359.999);return r*i},Ph=function(t){var n=t.cx,r=t.cy,i=t.radius,s=t.angle,a=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+i,f=Math.asin(c/d)/$m,h=u?s:s+a*f,p=Ct(n,r,d,h),g=Ct(n,r,i,h),m=u?s-a*f:s,y=Ct(n,r,d*Math.cos(f*$m),m);return{center:p,circleTangency:g,lineTangency:y,theta:f}},eM=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,s=t.outerRadius,a=t.startAngle,l=t.endAngle,c=Qre(a,l),u=a+c,d=Ct(n,r,s,a),f=Ct(n,r,s,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=Ct(n,r,i,a),g=Ct(n,r,i,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},Gre=function(t){var n=t.cx,r=t.cy,i=t.innerRadius,s=t.outerRadius,a=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Ln(d-u),h=Ph({cx:n,cy:r,radius:s,angle:u,sign:f,cornerRadius:a,cornerIsExternal:c}),p=h.circleTangency,g=h.lineTangency,m=h.theta,y=Ph({cx:n,cy:r,radius:s,angle:d,sign:-f,cornerRadius:a,cornerIsExternal:c}),v=y.circleTangency,x=y.lineTangency,w=y.theta,j=c?Math.abs(u-d):Math.abs(u-d)-m-w;if(j<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):eM({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var S="M ".concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(j>180),",").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
  `);if(i>0){var k=Ph({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),N=k.circleTangency,P=k.lineTangency,A=k.theta,C=Ph({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),_=C.circleTangency,R=C.lineTangency,z=C.theta,M=c?Math.abs(u-d):Math.abs(u-d)-A-z;if(M<0&&a===0)return"".concat(S,"L").concat(n,",").concat(r,"Z");S+="L".concat(R.x,",").concat(R.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else S+="L".concat(n,",").concat(r,"Z");return S},Yre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tM=function(t){var n=K2(K2({},Yre),t),r=n.cx,i=n.cy,s=n.innerRadius,a=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,h=n.className;if(a<s||d===f)return null;var p=Ye("recharts-sector",h),g=a-s,m=Fn(l,g,0,!0),y;return m>0&&Math.abs(d-f)<360?y=Gre({cx:r,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(m,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):y=eM({cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:d,endAngle:f}),W.createElement("path",Ab({},Be(n,!0),{className:p,d:y,role:"img"}))};function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eb.apply(this,arguments)}function Q2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function G2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q2(Object(n),!0).forEach(function(r){Xre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xre(e,t,n){return t=Zre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zre(e){var t=Jre(e,"string");return Qd(t)=="symbol"?t:t+""}function Jre(e,t){if(Qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y2={curveBasisClosed:XH,curveBasisOpen:ZH,curveBasis:YH,curveBumpX:MH,curveBumpY:$H,curveLinearClosed:JH,curveLinear:dy,curveMonotoneX:eW,curveMonotoneY:tW,curveNatural:nW,curveStep:rW,curveStepAfter:sW,curveStepBefore:iW},Ch=function(t){return t.x===+t.x&&t.y===+t.y},hu=function(t){return t.x},pu=function(t){return t.y},eie=function(t,n){if(He(t))return t;var r="curve".concat(cy(t));return(r==="curveMonotone"||r==="curveBump")&&n?Y2["".concat(r).concat(n==="vertical"?"Y":"X")]:Y2[r]||dy},tie=function(t){var n=t.type,r=n===void 0?"linear":n,i=t.points,s=i===void 0?[]:i,a=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=eie(r,l),f=u?s.filter(function(m){return Ch(m)}):s,h;if(Array.isArray(a)){var p=u?a.filter(function(m){return Ch(m)}):a,g=f.map(function(m,y){return G2(G2({},m),{},{base:p[y]})});return l==="vertical"?h=yh().y(pu).x1(hu).x0(function(m){return m.base.x}):h=yh().x(hu).y1(pu).y0(function(m){return m.base.y}),h.defined(Ch).curve(d),h(g)}return l==="vertical"&&Pe(a)?h=yh().y(pu).x1(hu).x0(a):Pe(a)?h=yh().x(hu).y1(pu).y0(a):h=GI().x(hu).y(pu),h.defined(Ch).curve(d),h(f)},Fm=function(t){var n=t.className,r=t.points,i=t.path,s=t.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?tie(t):i;return W.createElement("path",Eb({},Be(t,!1),cm(t),{className:Ye("recharts-curve",n),d:a,ref:s}))},nM={exports:{}},nie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rie=nie,iie=rie;function rM(){}function iM(){}iM.resetWarningCache=rM;var sie=function(){function e(r,i,s,a,l,c){if(c!==iie){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:iM,resetWarningCache:rM};return n.PropTypes=n,n};nM.exports=sie();var aie=nM.exports;const ft=ct(aie);var oie=Object.getOwnPropertyNames,lie=Object.getOwnPropertySymbols,cie=Object.prototype.hasOwnProperty;function X2(e,t){return function(r,i,s){return e(r,i,s)&&t(r,i,s)}}function Ah(e){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,i);var s=i.cache,a=s.get(n),l=s.get(r);if(a&&l)return a===r&&l===n;s.set(n,r),s.set(r,n);var c=e(n,r,i);return s.delete(n),s.delete(r),c}}function Z2(e){return oie(e).concat(lie(e))}var uie=Object.hasOwn||function(e,t){return cie.call(e,t)};function Eo(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var die="__v",fie="__o",hie="_owner",J2=Object.getOwnPropertyDescriptor,eC=Object.keys;function pie(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function mie(e,t){return Eo(e.getTime(),t.getTime())}function gie(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function yie(e,t){return e===t}function tC(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),s=e.entries(),a,l,c=0;(a=s.next())&&!a.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(i[f]){f++;continue}var h=a.value,p=l.value;if(n.equals(h[0],p[0],c,f,e,t,n)&&n.equals(h[1],p[1],h[0],p[0],e,t,n)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}var xie=Eo;function vie(e,t,n){var r=eC(e),i=r.length;if(eC(t).length!==i)return!1;for(;i-- >0;)if(!sM(e,t,n,r[i]))return!1;return!0}function mu(e,t,n){var r=Z2(e),i=r.length;if(Z2(t).length!==i)return!1;for(var s,a,l;i-- >0;)if(s=r[i],!sM(e,t,n,s)||(a=J2(e,s),l=J2(t,s),(a||l)&&(!a||!l||a.configurable!==l.configurable||a.enumerable!==l.enumerable||a.writable!==l.writable)))return!1;return!0}function bie(e,t){return Eo(e.valueOf(),t.valueOf())}function wie(e,t){return e.source===t.source&&e.flags===t.flags}function nC(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),s=e.values(),a,l;(a=s.next())&&!a.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!i[d]&&n.equals(a.value,l.value,a.value,l.value,e,t,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Sie(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function jie(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function sM(e,t,n,r){return(r===hie||r===fie||r===die)&&(e.$$typeof||t.$$typeof)?!0:uie(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var Nie="[object Arguments]",kie="[object Boolean]",Pie="[object Date]",Cie="[object Error]",Aie="[object Map]",Eie="[object Number]",_ie="[object Object]",Tie="[object RegExp]",Oie="[object Set]",Iie="[object String]",Die="[object URL]",Rie=Array.isArray,rC=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,iC=Object.assign,Mie=Object.prototype.toString.call.bind(Object.prototype.toString);function $ie(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,s=e.areMapsEqual,a=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,m,y){if(g===m)return!0;if(g==null||m==null)return!1;var v=typeof g;if(v!==typeof m)return!1;if(v!=="object")return v==="number"?a(g,m,y):v==="function"?i(g,m,y):!1;var x=g.constructor;if(x!==m.constructor)return!1;if(x===Object)return l(g,m,y);if(Rie(g))return t(g,m,y);if(rC!=null&&rC(g))return f(g,m,y);if(x===Date)return n(g,m,y);if(x===RegExp)return u(g,m,y);if(x===Map)return s(g,m,y);if(x===Set)return d(g,m,y);var w=Mie(g);return w===Pie?n(g,m,y):w===Tie?u(g,m,y):w===Aie?s(g,m,y):w===Oie?d(g,m,y):w===_ie?typeof g.then!="function"&&typeof m.then!="function"&&l(g,m,y):w===Die?h(g,m,y):w===Cie?r(g,m,y):w===Nie?l(g,m,y):w===kie||w===Eie||w===Iie?c(g,m,y):!1}}function Lie(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?mu:pie,areDatesEqual:mie,areErrorsEqual:gie,areFunctionsEqual:yie,areMapsEqual:r?X2(tC,mu):tC,areNumbersEqual:xie,areObjectsEqual:r?mu:vie,arePrimitiveWrappersEqual:bie,areRegExpsEqual:wie,areSetsEqual:r?X2(nC,mu):nC,areTypedArraysEqual:r?mu:Sie,areUrlsEqual:jie};if(n&&(i=iC({},i,n(i))),t){var s=Ah(i.areArraysEqual),a=Ah(i.areMapsEqual),l=Ah(i.areObjectsEqual),c=Ah(i.areSetsEqual);i=iC({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:l,areSetsEqual:c})}return i}function Fie(e){return function(t,n,r,i,s,a,l){return e(t,n,l)}}function Bie(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,s=e.strict;if(r)return function(c,u){var d=r(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,p=d.meta;return n(c,u,{cache:h,equals:i,meta:p,strict:s})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return n(c,u,a)}}var Uie=va();va({strict:!0});va({circular:!0});va({circular:!0,strict:!0});va({createInternalComparator:function(){return Eo}});va({strict:!0,createInternalComparator:function(){return Eo}});va({circular:!0,createInternalComparator:function(){return Eo}});va({circular:!0,createInternalComparator:function(){return Eo},strict:!0});function va(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,i=e.createState,s=e.strict,a=s===void 0?!1:s,l=Lie(e),c=$ie(l),u=r?r(c):Fie(c);return Bie({circular:n,comparator:c,createState:i,equals:u,strict:a})}function zie(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function sC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>t?(e(s),n=-1):zie(i)};requestAnimationFrame(r)}function _b(e){"@babel/helpers - typeof";return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_b(e)}function Hie(e){return Kie(e)||Vie(e)||qie(e)||Wie()}function Wie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qie(e,t){if(e){if(typeof e=="string")return aC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aC(e,t)}}function aC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kie(e){if(Array.isArray(e))return e}function Qie(){var e={},t=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,l=Hie(a),c=l[0],u=l.slice(1);if(typeof c=="number"){sC(i.bind(null,u),c);return}i(c),sC(i.bind(null,u));return}_b(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(n),!0).forEach(function(r){aM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aM(e,t,n){return t=Gie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gie(e){var t=Yie(e,"string");return Gd(t)==="symbol"?t:String(t)}function Yie(e,t){if(Gd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xie=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},Zie=function(t){return t},Jie=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Zu=function(t,n){return Object.keys(n).reduce(function(r,i){return lC(lC({},r),{},aM({},i,t(i,n[i])))},{})},cC=function(t,n,r){return t.map(function(i){return"".concat(Jie(i)," ").concat(n,"ms ").concat(r)}).join(",")};function ese(e,t){return rse(e)||nse(e,t)||oM(e,t)||tse()}function tse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nse(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function rse(e){if(Array.isArray(e))return e}function ise(e){return ose(e)||ase(e)||oM(e)||sse()}function sse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oM(e,t){if(e){if(typeof e=="string")return Tb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tb(e,t)}}function ase(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ose(e){if(Array.isArray(e))return Tb(e)}function Tb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bm=1e-4,lM=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},cM=function(t,n){return t.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},uC=function(t,n){return function(r){var i=lM(t,n);return cM(i,r)}},lse=function(t,n){return function(r){var i=lM(t,n),s=[].concat(ise(i.map(function(a,l){return a*l}).slice(1)),[0]);return cM(s,r)}},dC=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],s=n[1],a=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,a=1,l=1;break;case"ease":i=.25,s=.1,a=.25,l=1;break;case"ease-in":i=.42,s=0,a=1,l=1;break;case"ease-out":i=.42,s=0,a=.58,l=1;break;case"ease-in-out":i=0,s=0,a=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=ese(u,4);i=d[0],s=d[1],a=d[2],l=d[3]}}}var f=uC(i,a),h=uC(s,l),p=lse(i,a),g=function(v){return v>1?1:v<0?0:v},m=function(v){for(var x=v>1?1:v,w=x,j=0;j<8;++j){var S=f(w)-x,k=p(w);if(Math.abs(S-x)<Bm||k<Bm)return h(w);w=g(w-S/k)}return h(w)};return m.isStepper=!1,m},cse=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,i=t.damping,s=i===void 0?8:i,a=t.dt,l=a===void 0?17:a,c=function(d,f,h){var p=-(d-f)*r,g=h*s,m=h+(p-g)*l/1e3,y=h*l/1e3+d;return Math.abs(y-f)<Bm&&Math.abs(m)<Bm?[f,0]:[y,m]};return c.isStepper=!0,c.dt=l,c},use=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return dC(i);case"spring":return cse();default:if(i.split("(")[0]==="cubic-bezier")return dC(i)}return typeof i=="function"?i:null};function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function fC(e){return hse(e)||fse(e)||uM(e)||dse()}function dse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hse(e){if(Array.isArray(e))return Ib(e)}function hC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(n),!0).forEach(function(r){Ob(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ob(e,t,n){return t=pse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pse(e){var t=mse(e,"string");return Yd(t)==="symbol"?t:String(t)}function mse(e,t){if(Yd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gse(e,t){return vse(e)||xse(e,t)||uM(e,t)||yse()}function yse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uM(e,t){if(e){if(typeof e=="string")return Ib(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ib(e,t)}}function Ib(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xse(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function vse(e){if(Array.isArray(e))return e}var Um=function(t,n,r){return t+(n-t)*r},Db=function(t){var n=t.from,r=t.to;return n!==r},bse=function e(t,n,r){var i=Zu(function(s,a){if(Db(a)){var l=t(a.from,a.to,a.velocity),c=gse(l,2),u=c[0],d=c[1];return xn(xn({},a),{},{from:u,velocity:d})}return a},n);return r<1?Zu(function(s,a){return Db(a)?xn(xn({},a),{},{velocity:Um(a.velocity,i[s].velocity,r),from:Um(a.from,i[s].from,r)}):a},n):e(t,i,r-1)};const wse=function(e,t,n,r,i){var s=Xie(e,t),a=s.reduce(function(y,v){return xn(xn({},y),{},Ob({},v,[e[v],t[v]]))},{}),l=s.reduce(function(y,v){return xn(xn({},y),{},Ob({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Zu(function(v,x){return x.from},l)},p=function(){return!Object.values(l).filter(Db).length},g=function(v){u||(u=v);var x=v-u,w=x/n.dt;l=bse(n,l,w),i(xn(xn(xn({},e),t),h())),u=v,p()||(c=requestAnimationFrame(f))},m=function(v){d||(d=v);var x=(v-d)/r,w=Zu(function(S,k){return Um.apply(void 0,fC(k).concat([n(x)]))},a);if(i(xn(xn(xn({},e),t),w)),x<1)c=requestAnimationFrame(f);else{var j=Zu(function(S,k){return Um.apply(void 0,fC(k).concat([n(1)]))},a);i(xn(xn(xn({},e),t),j))}};return f=n.isStepper?g:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function ec(e){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(e)}var Sse=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function jse(e,t){if(e==null)return{};var n=Nse(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Nse(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Jx(e){return Ase(e)||Cse(e)||Pse(e)||kse()}function kse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pse(e,t){if(e){if(typeof e=="string")return Rb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rb(e,t)}}function Cse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ase(e){if(Array.isArray(e))return Rb(e)}function Rb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(n),!0).forEach(function(r){Eu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Eu(e,t,n){return t=dM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ese(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dM(r.key),r)}}function Tse(e,t,n){return t&&_se(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dM(e){var t=Ose(e,"string");return ec(t)==="symbol"?t:String(t)}function Ose(e,t){if(ec(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ec(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ise(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mb(e,t)}function Mb(e,t){return Mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Mb(e,t)}function Dse(e){var t=Rse();return function(){var r=zm(e),i;if(t){var s=zm(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return $b(this,i)}}function $b(e,t){if(t&&(ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lb(e)}function Lb(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rse(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zm(e){return zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zm(e)}var Ti=function(e){Ise(n,e);var t=Dse(n);function n(r,i){var s;Ese(this,n),s=t.call(this,r,i);var a=s.props,l=a.isActive,c=a.attributeName,u=a.from,d=a.to,f=a.steps,h=a.children,p=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(Lb(s)),s.changeStyle=s.changeStyle.bind(Lb(s)),!l||p<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:d}),$b(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof h=="function")return s.state={style:u},$b(s);s.state={style:c?Eu({},c,u):u}}else s.state={style:{}};return s}return Tse(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,h=this.state.style;if(l){if(!a){var p={style:c?Eu({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(p);return}if(!(Uie(i.to,d)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=g||u?f:i.to;if(this.state&&h){var y={style:c?Eu({},c,m):m};(c&&h[c]!==m||!c&&h!==m)&&this.setState(y)}this.runAnimation(Kr(Kr({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,p=wse(a,l,use(u),c,this.changeStyle),g=function(){s.stopJSAnimation=p()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,l=i.begin,c=i.onAnimationStart,u=a[0],d=u.style,f=u.duration,h=f===void 0?0:f,p=function(m,y,v){if(v===0)return m;var x=y.duration,w=y.easing,j=w===void 0?"ease":w,S=y.style,k=y.properties,N=y.onAnimationEnd,P=v>0?a[v-1]:y,A=k||Object.keys(S);if(typeof j=="function"||j==="spring")return[].concat(Jx(m),[s.runJSAnimation.bind(s,{from:P.style,to:S,duration:x,easing:j}),x]);var C=cC(A,x,j),_=Kr(Kr(Kr({},P.style),S),{},{transition:C});return[].concat(Jx(m),[_,x,N]).filter(Zie)};return this.manager.start([c].concat(Jx(a.reduce(p,[d,Math.max(h,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Qie());var s=i.begin,a=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,p=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var m=l?Eu({},l,c):c,y=cC(Object.keys(m),a,u);g.start([d,s,Kr(Kr({},m),{},{transition:y}),a,f])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=jse(i,Sse),u=b.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||a<=0)return s;var f=function(p){var g=p.props,m=g.style,y=m===void 0?{}:m,v=g.className,x=b.cloneElement(p,Kr(Kr({},c),{},{style:Kr(Kr({},y),d),className:v}));return x};return u===1?f(b.Children.only(s)):W.createElement("div",null,b.Children.map(s,function(h){return f(h)}))}}]),n}(b.PureComponent);Ti.displayName="Animate";Ti.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ti.propTypes={from:ft.oneOfType([ft.object,ft.string]),to:ft.oneOfType([ft.object,ft.string]),attributeName:ft.string,duration:ft.number,begin:ft.number,easing:ft.oneOfType([ft.string,ft.func]),steps:ft.arrayOf(ft.shape({duration:ft.number.isRequired,style:ft.object.isRequired,easing:ft.oneOfType([ft.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ft.func]),properties:ft.arrayOf("string"),onAnimationEnd:ft.func})),children:ft.oneOfType([ft.node,ft.func]),isActive:ft.bool,canBegin:ft.bool,onAnimationEnd:ft.func,shouldReAnimate:ft.bool,onAnimationStart:ft.func,onAnimationReStart:ft.func};function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function Hm(){return Hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hm.apply(this,arguments)}function Mse(e,t){return Bse(e)||Fse(e,t)||Lse(e,t)||$se()}function $se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lse(e,t){if(e){if(typeof e=="string")return mC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mC(e,t)}}function mC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fse(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Bse(e){if(Array.isArray(e))return e}function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function yC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(r){Use(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Use(e,t,n){return t=zse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zse(e){var t=Hse(e,"string");return Xd(t)=="symbol"?t:t+""}function Hse(e,t){if(Xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xC=function(t,n,r,i,s){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),l=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(a>0&&s instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=s[h]>a?a:s[h];d="M".concat(t,",").concat(n+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(n)),d+="L ".concat(t+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*f[1])),d+="L ".concat(t+r,",").concat(n+i-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+r-c*f[2],",").concat(n+i)),d+="L ".concat(t+c*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+i-l*f[3])),d+="Z"}else if(a>0&&s===+s&&s>0){var g=Math.min(a,s);d="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*g,`
            L `).concat(t+r,",").concat(n+i-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r-c*g,",").concat(n+i,`
            L `).concat(t+c*g,",").concat(n+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(n+i-l*g," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},Wse=function(t,n){if(!t||!n)return!1;var r=t.x,i=t.y,s=n.x,a=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),f=Math.min(a,a+c),h=Math.max(a,a+c);return r>=u&&r<=d&&i>=f&&i<=h}return!1},qse={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qS=function(t){var n=yC(yC({},qse),t),r=b.useRef(),i=b.useState(-1),s=Mse(i,2),a=s[0],l=s[1];b.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var j=r.current.getTotalLength();j&&l(j)}catch{}},[]);var c=n.x,u=n.y,d=n.width,f=n.height,h=n.radius,p=n.className,g=n.animationEasing,m=n.animationDuration,y=n.animationBegin,v=n.isAnimationActive,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=Ye("recharts-rectangle",p);return x?W.createElement(Ti,{canBegin:a>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:m,animationEasing:g,isActive:x},function(j){var S=j.width,k=j.height,N=j.x,P=j.y;return W.createElement(Ti,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:m,isActive:v,easing:g},W.createElement("path",Hm({},Be(n,!0),{className:w,d:xC(N,P,S,k,h),ref:r})))}):W.createElement("path",Hm({},Be(n,!0),{className:w,d:xC(c,u,d,f,h)}))},Vse=["points","className","baseLinePoints","connectNulls"];function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pl.apply(this,arguments)}function Kse(e,t){if(e==null)return{};var n=Qse(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vC(e){return Zse(e)||Xse(e)||Yse(e)||Gse()}function Gse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yse(e,t){if(e){if(typeof e=="string")return Fb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fb(e,t)}}function Xse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zse(e){if(Array.isArray(e))return Fb(e)}function Fb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bC=function(t){return t&&t.x===+t.x&&t.y===+t.y},Jse=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){bC(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),bC(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Ju=function(t,n){var r=Jse(t);n&&(r=[r.reduce(function(s,a){return[].concat(vC(s),vC(a))},[])]);var i=r.map(function(s){return s.reduce(function(a,l,c){return"".concat(a).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},eae=function(t,n,r){var i=Ju(t,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Ju(n.reverse(),r).slice(1))},tae=function(t){var n=t.points,r=t.className,i=t.baseLinePoints,s=t.connectNulls,a=Kse(t,Vse);if(!n||!n.length)return null;var l=Ye("recharts-polygon",r);if(i&&i.length){var c=a.stroke&&a.stroke!=="none",u=eae(n,i,s);return W.createElement("g",{className:l},W.createElement("path",pl({},Be(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),c?W.createElement("path",pl({},Be(a,!0),{fill:"none",d:Ju(n,s)})):null,c?W.createElement("path",pl({},Be(a,!0),{fill:"none",d:Ju(i,s)})):null)}var d=Ju(n,s);return W.createElement("path",pl({},Be(a,!0),{fill:d.slice(-1)==="Z"?a.fill:"none",className:l,d}))};function Bb(){return Bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bb.apply(this,arguments)}var Cy=function(t){var n=t.cx,r=t.cy,i=t.r,s=t.className,a=Ye("recharts-dot",s);return n===+n&&r===+r&&i===+i?W.createElement("circle",Bb({},Be(t,!1),cm(t),{className:a,cx:n,cy:r,r:i})):null};function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}var nae=["x","y","top","left","width","height","className"];function Ub(){return Ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ub.apply(this,arguments)}function wC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(n),!0).forEach(function(r){iae(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iae(e,t,n){return t=sae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sae(e){var t=aae(e,"string");return Zd(t)=="symbol"?t:t+""}function aae(e,t){if(Zd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oae(e,t){if(e==null)return{};var n=lae(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var cae=function(t,n,r,i,s,a){return"M".concat(t,",").concat(s,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},uae=function(t){var n=t.x,r=n===void 0?0:n,i=t.y,s=i===void 0?0:i,a=t.top,l=a===void 0?0:a,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,p=h===void 0?0:h,g=t.className,m=oae(t,nae),y=rae({x:r,y:s,top:l,left:u,width:f,height:p},m);return!Pe(r)||!Pe(s)||!Pe(f)||!Pe(p)||!Pe(l)||!Pe(u)?null:W.createElement("path",Ub({},Be(y,!0),{className:Ye("recharts-cross",g),d:cae(r,s,f,p,l,u)}))},dae=Sy,fae=jR,hae=Ri;function pae(e,t){return e&&e.length?dae(e,hae(t),fae):void 0}var mae=pae;const gae=ct(mae);var yae=Sy,xae=Ri,vae=NR;function bae(e,t){return e&&e.length?yae(e,xae(t),vae):void 0}var wae=bae;const Sae=ct(wae);var jae=["cx","cy","angle","ticks","axisLine"],Nae=["ticks","tick","angle","tickFormatter","stroke"];function tc(e){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function ed(){return ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ed.apply(this,arguments)}function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(n),!0).forEach(function(r){Ay(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jC(e,t){if(e==null)return{};var n=kae(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Pae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hM(r.key),r)}}function Cae(e,t,n){return t&&NC(e.prototype,t),n&&NC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Aae(e,t,n){return t=Wm(t),Eae(e,fM()?Reflect.construct(t,n||[],Wm(e).constructor):t.apply(e,n))}function Eae(e,t){if(t&&(tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ae(e)}function _ae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fM=function(){return!!e})()}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wm(e)}function Tae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zb(e,t)}function zb(e,t){return zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zb(e,t)}function Ay(e,t,n){return t=hM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hM(e){var t=Oae(e,"string");return tc(t)=="symbol"?t:t+""}function Oae(e,t){if(tc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ey=function(e){function t(){return Pae(this,t),Aae(this,t,arguments)}return Tae(t,e),Cae(t,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,s=this.props,a=s.angle,l=s.cx,c=s.cy;return Ct(l,c,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,l=r.ticks,c=gae(l,function(d){return d.coordinate||0}),u=Sae(l,function(d){return d.coordinate||0});return{cx:i,cy:s,startAngle:a,endAngle:a,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,l=r.ticks,c=r.axisLine,u=jC(r,jae),d=l.reduce(function(g,m){return[Math.min(g[0],m.coordinate),Math.max(g[1],m.coordinate)]},[1/0,-1/0]),f=Ct(i,s,d[0],a),h=Ct(i,s,d[1],a),p=Pa(Pa(Pa({},Be(u,!1)),{},{fill:"none"},Be(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return W.createElement("line",ed({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,d=jC(i,Nae),f=this.getTickTextAnchor(),h=Be(d,!1),p=Be(a,!1),g=s.map(function(m,y){var v=r.getTickValueCoord(m),x=Pa(Pa(Pa(Pa({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(v.x,", ").concat(v.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:y},v),{},{payload:m});return W.createElement(ot,ed({className:Ye("recharts-polar-radius-axis-tick",ZR(a)),key:"tick-".concat(m.coordinate)},co(r.props,m,y)),t.renderTickItem(a,x,c?c(m.value,y):m.value))});return W.createElement(ot,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.axisLine,a=r.tick;return!i||!i.length?null:W.createElement(ot,{className:Ye("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),a&&this.renderTicks(),mn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,s){var a;return W.isValidElement(r)?a=W.cloneElement(r,i):He(r)?a=r(i):a=W.createElement(uo,ed({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}])}(b.PureComponent);Ay(Ey,"displayName","PolarRadiusAxis");Ay(Ey,"axisType","radiusAxis");Ay(Ey,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function nc(e){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(e)}function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},La.apply(this,arguments)}function kC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(n),!0).forEach(function(r){_y(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Iae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mM(r.key),r)}}function Dae(e,t,n){return t&&PC(e.prototype,t),n&&PC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rae(e,t,n){return t=qm(t),Mae(e,pM()?Reflect.construct(t,n||[],qm(e).constructor):t.apply(e,n))}function Mae(e,t){if(t&&(nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ae(e)}function $ae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pM=function(){return!!e})()}function qm(e){return qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qm(e)}function Lae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hb(e,t)}function Hb(e,t){return Hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Hb(e,t)}function _y(e,t,n){return t=mM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mM(e){var t=Fae(e,"string");return nc(t)=="symbol"?t:t+""}function Fae(e,t){if(nc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bae=Math.PI/180,CC=1e-5,Ty=function(e){function t(){return Iae(this,t),Rae(this,t,arguments)}return Lae(t,e),Dae(t,[{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.cx,a=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,d=u||8,f=Ct(s,a,l,r.coordinate),h=Ct(s,a,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,s=Math.cos(-r.coordinate*Bae),a;return s>CC?a=i==="outer"?"start":"end":s<-CC?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.radius,l=r.axisLine,c=r.axisLineType,u=Ca(Ca({},Be(this.props,!1)),{},{fill:"none"},Be(l,!1));if(c==="circle")return W.createElement(Cy,La({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:a}));var d=this.props.ticks,f=d.map(function(h){return Ct(i,s,a,h.coordinate)});return W.createElement(tae,La({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,d=Be(this.props,!1),f=Be(a,!1),h=Ca(Ca({},d),{},{fill:"none"},Be(l,!1)),p=s.map(function(g,m){var y=r.getTickLineCoord(g),v=r.getTickTextAnchor(g),x=Ca(Ca(Ca({textAnchor:v},d),{},{stroke:"none",fill:u},f),{},{index:m,payload:g,x:y.x2,y:y.y2});return W.createElement(ot,La({className:Ye("recharts-polar-angle-axis-tick",ZR(a)),key:"tick-".concat(g.coordinate)},co(r.props,g,m)),l&&W.createElement("line",La({className:"recharts-polar-angle-axis-tick-line"},h,y)),a&&t.renderTickItem(a,x,c?c(g.value,m):g.value))});return W.createElement(ot,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.radius,a=r.axisLine;return s<=0||!i||!i.length?null:W.createElement(ot,{className:Ye("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,s){var a;return W.isValidElement(r)?a=W.cloneElement(r,i):He(r)?a=r(i):a=W.createElement(uo,La({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}])}(b.PureComponent);_y(Ty,"displayName","PolarAngleAxis");_y(Ty,"axisType","angleAxis");_y(Ty,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Uae=vD,zae=Uae(Object.getPrototypeOf,Object),Hae=zae,Wae=bs,qae=Hae,Vae=ws,Kae="[object Object]",Qae=Function.prototype,Gae=Object.prototype,gM=Qae.toString,Yae=Gae.hasOwnProperty,Xae=gM.call(Object);function Zae(e){if(!Vae(e)||Wae(e)!=Kae)return!1;var t=qae(e);if(t===null)return!0;var n=Yae.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&gM.call(n)==Xae}var Jae=Zae;const eoe=ct(Jae);var toe=bs,noe=ws,roe="[object Boolean]";function ioe(e){return e===!0||e===!1||noe(e)&&toe(e)==roe}var soe=ioe;const aoe=ct(soe);function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}function Vm(){return Vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vm.apply(this,arguments)}function ooe(e,t){return doe(e)||uoe(e,t)||coe(e,t)||loe()}function loe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function coe(e,t){if(e){if(typeof e=="string")return AC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AC(e,t)}}function AC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uoe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function doe(e){if(Array.isArray(e))return e}function EC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _C(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(n),!0).forEach(function(r){foe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function foe(e,t,n){return t=hoe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hoe(e){var t=poe(e,"string");return Jd(t)=="symbol"?t:t+""}function poe(e,t){if(Jd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TC=function(t,n,r,i,s){var a=r-i,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-a/2,",").concat(n+s),l+="L ".concat(t+r-a/2-i,",").concat(n+s),l+="L ".concat(t,",").concat(n," Z"),l},moe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},goe=function(t){var n=_C(_C({},moe),t),r=b.useRef(),i=b.useState(-1),s=ooe(i,2),a=s[0],l=s[1];b.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,h=n.height,p=n.className,g=n.animationEasing,m=n.animationDuration,y=n.animationBegin,v=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var x=Ye("recharts-trapezoid",p);return v?W.createElement(Ti,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:m,animationEasing:g,isActive:v},function(w){var j=w.upperWidth,S=w.lowerWidth,k=w.height,N=w.x,P=w.y;return W.createElement(Ti,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:m,easing:g},W.createElement("path",Vm({},Be(n,!0),{className:x,d:TC(N,P,j,S,k),ref:r})))}):W.createElement("g",null,W.createElement("path",Vm({},Be(n,!0),{className:x,d:TC(c,u,d,f,h)})))},yoe=["option","shapeType","propTransformer","activeClassName","isActive"];function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function xoe(e,t){if(e==null)return{};var n=voe(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function voe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function OC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Km(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(n),!0).forEach(function(r){boe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function boe(e,t,n){return t=woe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function woe(e){var t=Soe(e,"string");return ef(t)=="symbol"?t:t+""}function Soe(e,t){if(ef(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function joe(e,t){return Km(Km({},t),e)}function Noe(e,t){return e==="symbols"}function IC(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return W.createElement(qS,n);case"trapezoid":return W.createElement(goe,n);case"sector":return W.createElement(tM,n);case"symbols":if(Noe(t))return W.createElement(uS,n);break;default:return null}}function koe(e){return b.isValidElement(e)?e.props:e}function yM(e){var t=e.option,n=e.shapeType,r=e.propTransformer,i=r===void 0?joe:r,s=e.activeClassName,a=s===void 0?"recharts-active-shape":s,l=e.isActive,c=xoe(e,yoe),u;if(b.isValidElement(t))u=b.cloneElement(t,Km(Km({},c),koe(t)));else if(He(t))u=t(c);else if(eoe(t)&&!aoe(t)){var d=i(t,c);u=W.createElement(IC,{shapeType:n,elementProps:d})}else{var f=c;u=W.createElement(IC,{shapeType:n,elementProps:f})}return l?W.createElement(ot,{className:a},u):u}function Oy(e,t){return t!=null&&"trapezoids"in e.props}function Iy(e,t){return t!=null&&"sectors"in e.props}function tf(e,t){return t!=null&&"points"in e.props}function Poe(e,t){var n,r,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return i&&s}function Coe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function Aoe(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function Eoe(e,t){var n;return Oy(e,t)?n=Poe:Iy(e,t)?n=Coe:tf(e,t)&&(n=Aoe),n}function _oe(e,t){var n;return Oy(e,t)?n="trapezoids":Iy(e,t)?n="sectors":tf(e,t)&&(n="points"),n}function Toe(e,t){if(Oy(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Iy(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return tf(e,t)?t.payload:{}}function Ooe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=_oe(n,t),s=Toe(n,t),a=r.filter(function(c,u){var d=Bf(s,c),f=n.props[i].filter(function(g){var m=Eoe(n,t);return m(g,t)}),h=n.props[i].indexOf(f[f.length-1]),p=u===h;return d&&p}),l=r.indexOf(a[a.length-1]);return l}var mp;function rc(e){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rc(e)}function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ml.apply(this,arguments)}function DC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(n),!0).forEach(function(r){Ir(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ioe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vM(r.key),r)}}function Doe(e,t,n){return t&&RC(e.prototype,t),n&&RC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Roe(e,t,n){return t=Qm(t),Moe(e,xM()?Reflect.construct(t,n||[],Qm(e).constructor):t.apply(e,n))}function Moe(e,t){if(t&&(rc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $oe(e)}function $oe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xM=function(){return!!e})()}function Qm(e){return Qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qm(e)}function Loe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wb(e,t)}function Wb(e,t){return Wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Wb(e,t)}function Ir(e,t,n){return t=vM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vM(e){var t=Foe(e,"string");return rc(t)=="symbol"?t:t+""}function Foe(e,t){if(rc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mi=function(e){function t(n){var r;return Ioe(this,t),r=Roe(this,t,[n]),Ir(r,"pieRef",null),Ir(r,"sectorRefs",[]),Ir(r,"id",_c("recharts-pie-")),Ir(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),He(i)&&i()}),Ir(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),He(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return Loe(t,e),Doe(t,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,d=Be(this.props,!1),f=Be(a,!1),h=Be(l,!1),p=a&&a.offsetRadius||20,g=r.map(function(m,y){var v=(m.startAngle+m.endAngle)/2,x=Ct(m.cx,m.cy,m.outerRadius+p,v),w=Nt(Nt(Nt(Nt({},d),m),{},{stroke:"none"},f),{},{index:y,textAnchor:t.getTextAnchor(x.x,m.cx)},x),j=Nt(Nt(Nt(Nt({},d),m),{},{fill:"none",stroke:m.fill},h),{},{index:y,points:[Ct(m.cx,m.cy,m.outerRadius,v),x]}),S=c;return Qe(c)&&Qe(u)?S="value":Qe(c)&&(S=u),W.createElement(ot,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(y)},l&&t.renderLabelLineItem(l,j,"line"),t.renderLabelItem(a,w,an(m,S)))});return W.createElement(ot,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(r){var i=this,s=this.props,a=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(d),h=c&&i.hasActiveIndex()?c:null,p=f?a:h,g=Nt(Nt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return W.createElement(ot,ml({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},co(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),W.createElement(yM,ml({option:p,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,s=i.sectors,a=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return W.createElement(Ti,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var m=g.t,y=[],v=s&&s[0],x=v.startAngle;return s.forEach(function(w,j){var S=h&&h[j],k=j>0?mr(w,"paddingAngle",0):0;if(S){var N=ur(S.endAngle-S.startAngle,w.endAngle-w.startAngle),P=Nt(Nt({},w),{},{startAngle:x+k,endAngle:x+N(m)+k});y.push(P),x=P.endAngle}else{var A=w.endAngle,C=w.startAngle,_=ur(0,A-C),R=_(m),z=Nt(Nt({},w),{},{startAngle:x+k,endAngle:x+R+k});y.push(z),x=z.endAngle}}),W.createElement(ot,null,r.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,s=r.isAnimationActive,a=this.state.prevSectors;return s&&i&&i.length&&(!a||!Bf(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,s=i.hide,a=i.sectors,l=i.className,c=i.label,u=i.cx,d=i.cy,f=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,g=this.state.isAnimationFinished;if(s||!a||!a.length||!Pe(u)||!Pe(d)||!Pe(f)||!Pe(h))return null;var m=Ye("recharts-pie",l);return W.createElement(ot,{tabIndex:this.props.rootTabIndex,className:m,ref:function(v){r.pieRef=v}},this.renderSectors(),c&&this.renderLabels(a),mn.renderCallByParent(this.props,null,!1),(!p||g)&&is.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,s){if(W.isValidElement(r))return W.cloneElement(r,i);if(He(r))return r(i);var a=Ye("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return W.createElement(Fm,ml({},i,{key:s,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,s){if(W.isValidElement(r))return W.cloneElement(r,i);var a=s;if(He(r)&&(a=r(i),W.isValidElement(a)))return a;var l=Ye("recharts-pie-label-text",typeof r!="boolean"&&!He(r)?r.className:"");return W.createElement(uo,ml({},i,{alignmentBaseline:"middle",className:l}),a)}}])}(b.PureComponent);mp=Mi;Ir(Mi,"displayName","Pie");Ir(Mi,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ki.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ir(Mi,"parseDeltaAngle",function(e,t){var n=Ln(t-e),r=Math.min(Math.abs(t-e),360);return n*r});Ir(Mi,"getRealPieData",function(e){var t=e.data,n=e.children,r=Be(e,!1),i=gr(n,Rf);return t&&t.length?t.map(function(s,a){return Nt(Nt(Nt({payload:s},r),s),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(s){return Nt(Nt({},r),s.props)}):[]});Ir(Mi,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,i=t.width,s=t.height,a=XR(i,s),l=r+Fn(e.cx,i,i/2),c=n+Fn(e.cy,s,s/2),u=Fn(e.innerRadius,a,0),d=Fn(e.outerRadius,a,a*.8),f=e.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Ir(Mi,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?Nt(Nt({},t.type.defaultProps),t.props):t.props,i=mp.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,a=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,f=r.valueKey,h=r.tooltipType,p=Math.abs(r.minAngle),g=mp.parseCoordinateOfPie(r,n),m=mp.parseDeltaAngle(a,l),y=Math.abs(m),v=u;Qe(u)&&Qe(f)?(si(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):Qe(u)&&(si(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=f);var x=i.filter(function(P){return an(P,v,0)!==0}).length,w=(y>=360?x:x-1)*c,j=y-x*p-w,S=i.reduce(function(P,A){var C=an(A,v,0);return P+(Pe(C)?C:0)},0),k;if(S>0){var N;k=i.map(function(P,A){var C=an(P,v,0),_=an(P,d,A),R=(Pe(C)?C:0)/S,z;A?z=N.endAngle+Ln(m)*c*(C!==0?1:0):z=a;var M=z+Ln(m)*((C!==0?p:0)+R*j),I=(z+M)/2,$=(g.innerRadius+g.outerRadius)/2,E=[{name:_,value:C,payload:P,dataKey:v,type:h}],T=Ct(g.cx,g.cy,$,I);return N=Nt(Nt(Nt({percent:R,cornerRadius:s,name:_,tooltipPayload:E,midAngle:I,middleRadius:$,tooltipPosition:T},P),g),{},{value:an(P,v),startAngle:z,endAngle:M,payload:P,paddingAngle:Ln(m)*c}),N})}return Nt(Nt({},g),{},{sectors:k,data:i})});var Boe=Math.ceil,Uoe=Math.max;function zoe(e,t,n,r){for(var i=-1,s=Uoe(Boe((t-e)/(n||1)),0),a=Array(s);s--;)a[r?s:++i]=e,e+=n;return a}var Hoe=zoe,Woe=LD,MC=1/0,qoe=17976931348623157e292;function Voe(e){if(!e)return e===0?e:0;if(e=Woe(e),e===MC||e===-MC){var t=e<0?-1:1;return t*qoe}return e===e?e:0}var bM=Voe,Koe=Hoe,Qoe=my,e0=bM;function Goe(e){return function(t,n,r){return r&&typeof r!="number"&&Qoe(t,n,r)&&(n=r=void 0),t=e0(t),n===void 0?(n=t,t=0):n=e0(n),r=r===void 0?t<n?1:-1:e0(r),Koe(t,n,r,e)}}var Yoe=Goe,Xoe=Yoe,Zoe=Xoe(),Joe=Zoe;const Gm=ct(Joe);function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function $C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(n),!0).forEach(function(r){wM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$C(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wM(e,t,n){return t=ele(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ele(e){var t=tle(e,"string");return nf(t)=="symbol"?t:t+""}function tle(e,t){if(nf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nle=["Webkit","Moz","O","ms"],rle=function(t,n){var r=t.replace(/(\w)/,function(s){return s.toUpperCase()}),i=nle.reduce(function(s,a){return LC(LC({},s),{},wM({},a+r,n))},{});return i[t]=n,i};function ic(e){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ic(e)}function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ym.apply(this,arguments)}function FC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function t0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(n),!0).forEach(function(r){sr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ile(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jM(r.key),r)}}function sle(e,t,n){return t&&BC(e.prototype,t),n&&BC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ale(e,t,n){return t=Xm(t),ole(e,SM()?Reflect.construct(t,n||[],Xm(e).constructor):t.apply(e,n))}function ole(e,t){if(t&&(ic(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lle(e)}function lle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SM=function(){return!!e})()}function Xm(e){return Xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xm(e)}function cle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qb(e,t)}function qb(e,t){return qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qb(e,t)}function sr(e,t,n){return t=jM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jM(e){var t=ule(e,"string");return ic(t)=="symbol"?t:t+""}function ule(e,t){if(ic(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ic(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dle=function(t){var n=t.data,r=t.startIndex,i=t.endIndex,s=t.x,a=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Yu().domain(Gm(0,c)).range([s,s+a-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},UC=function(t){return t.changedTouches&&!!t.changedTouches.length},sc=function(e){function t(n){var r;return ile(this,t),r=ale(this,t,[n]),sr(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),sr(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),sr(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,a=i.onDragEnd,l=i.startIndex;a==null||a({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),sr(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),sr(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),sr(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),sr(r,"handleSlideDragStart",function(i){var s=UC(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return cle(t,e),sle(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,a=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(i,s),h=Math.max(i,s),p=t.getIndexInRange(a,f),g=t.getIndexInRange(a,h);return{startIndex:p-p%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,a=i.tickFormatter,l=i.dataKey,c=an(s[r],l,r);return He(a)?a(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,a=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,g=c.onChange,m=r.pageX-s;m>0?m=Math.min(m,u+d-f-l,u+d-f-a):m<0&&(m=Math.max(m,u-a,u-l));var y=this.getIndex({startX:a+m,endX:l+m});(y.startIndex!==h||y.endIndex!==p)&&g&&g(y),this.setState({startX:a+m,endX:l+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=UC(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[a],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,g=d.onChange,m=d.gap,y=d.data,v={startX:this.state.startX,endX:this.state.endX},x=r.pageX-s;x>0?x=Math.min(x,f+h-p-u):x<0&&(x=Math.max(x,f-u)),v[a]=u+x;var w=this.getIndex(v),j=w.startIndex,S=w.endIndex,k=function(){var P=y.length-1;return a==="startX"&&(l>c?j%m===0:S%m===0)||l<c&&S===P||a==="endX"&&(l>c?S%m===0:j%m===0)||l>c&&S===P};this.setState(sr(sr({},a,u+x),"brushMoveStartX",r.pageX),function(){g&&k()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,a=this.state,l=a.scaleValues,c=a.startX,u=a.endX,d=this.state[i],f=l.indexOf(d);if(f!==-1){var h=f+r;if(!(h===-1||h>=l.length)){var p=l[h];i==="startX"&&p>=u||i==="endX"&&p<=c||this.setState(sr({},i,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,l=r.height,c=r.fill,u=r.stroke;return W.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:a,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,f=b.Children.only(u);return f?W.cloneElement(f,{x:i,y:s,width:a,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,a,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,g=c.data,m=c.startIndex,y=c.endIndex,v=Math.max(r,this.props.x),x=t0(t0({},Be(this.props,!1)),{},{x:v,y:u,width:d,height:f}),w=p||"Min value: ".concat((s=g[m])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=g[y])===null||a===void 0?void 0:a.name);return W.createElement(ot,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,x))}},{key:"renderSlide",value:function(r,i){var s=this.props,a=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return W.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:a,width:f,height:l})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,a=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,h=d.endX,p=5,g={pointerEvents:"none",fill:u};return W.createElement(ot,{className:"recharts-brush-texts"},W.createElement(uo,Ym({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:a+l/2},g),this.getTextOfTick(i)),W.createElement(uo,Ym({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:a+l/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,a=r.children,l=r.x,c=r.y,u=r.width,d=r.height,f=r.alwaysShowText,h=this.state,p=h.startX,g=h.endX,m=h.isTextActive,y=h.isSlideMoving,v=h.isTravellerMoving,x=h.isTravellerFocused;if(!i||!i.length||!Pe(l)||!Pe(c)||!Pe(u)||!Pe(d)||u<=0||d<=0)return null;var w=Ye("recharts-brush",s),j=W.Children.count(a)===1,S=rle("userSelect","none");return W.createElement(ot,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(p,g),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(g,"endX"),(m||y||v||x||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,a=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return W.createElement(W.Fragment,null,W.createElement("rect",{x:i,y:s,width:a,height:l,fill:c,stroke:"none"}),W.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),W.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return W.isValidElement(r)?s=W.cloneElement(r,i):He(r)?s=r(i):s=t.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,a=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return t0({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a},s&&s.length?dle({data:s,width:a,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+a-c]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,a=0,l=s-1;l-a>1;){var c=Math.floor((a+l)/2);r[c]>i?l=c:a=c}return i>=r[l]?l:a}}])}(b.PureComponent);sr(sc,"displayName","Brush");sr(sc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var fle=yS;function hle(e,t){var n;return fle(e,function(r,i,s){return n=t(r,i,s),!n}),!!n}var ple=hle,mle=dD,gle=Ri,yle=ple,xle=nr,vle=my;function ble(e,t,n){var r=xle(e)?mle:yle;return n&&vle(e,t,n)&&(t=void 0),r(e,gle(t))}var wle=ble;const Sle=ct(wle);var Ci=function(t,n){var r=t.alwaysShow,i=t.ifOverflow;return r&&(i="extendDomain"),i===n},zC=ID;function jle(e,t,n){t=="__proto__"&&zC?zC(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Nle=jle,kle=Nle,Ple=TD,Cle=Ri;function Ale(e,t){var n={};return t=Cle(t),Ple(e,function(r,i,s){kle(n,i,t(r,i,s))}),n}var Ele=Ale;const _le=ct(Ele);function Tle(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var Ole=Tle,Ile=yS;function Dle(e,t){var n=!0;return Ile(e,function(r,i,s){return n=!!t(r,i,s),n}),n}var Rle=Dle,Mle=Ole,$le=Rle,Lle=Ri,Fle=nr,Ble=my;function Ule(e,t,n){var r=Fle(e)?Mle:$le;return n&&Ble(e,t,n)&&(t=void 0),r(e,Lle(t))}var zle=Ule;const NM=ct(zle);var Hle=["x","y"];function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function Vb(){return Vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vb.apply(this,arguments)}function HC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(n),!0).forEach(function(r){Wle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wle(e,t,n){return t=qle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qle(e){var t=Vle(e,"string");return rf(t)=="symbol"?t:t+""}function Vle(e,t){if(rf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kle(e,t){if(e==null)return{};var n=Qle(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qle(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Gle(e,t){var n=e.x,r=e.y,i=Kle(e,Hle),s="".concat(n),a=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||i.height),d=parseInt(u,10),f="".concat(t.width||i.width),h=parseInt(f,10);return gu(gu(gu(gu(gu({},t),i),a?{x:a}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function WC(e){return W.createElement(yM,Vb({shapeType:"rectangle",propTransformer:Gle,activeClassName:"recharts-active-bar"},e))}var Yle=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof t=="number")return t;var s=typeof r=="number";return s?t(r,i):(s||ho(),n)}},Xle=["value","background"],kM;function ac(e){"@babel/helpers - typeof";return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ac(e)}function Zle(e,t){if(e==null)return{};var n=Jle(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jle(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Zm(){return Zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zm.apply(this,arguments)}function qC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(n),!0).forEach(function(r){Bs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ece(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,CM(r.key),r)}}function tce(e,t,n){return t&&VC(e.prototype,t),n&&VC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nce(e,t,n){return t=Jm(t),rce(e,PM()?Reflect.construct(t,n||[],Jm(e).constructor):t.apply(e,n))}function rce(e,t){if(t&&(ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ice(e)}function ice(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PM=function(){return!!e})()}function Jm(e){return Jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jm(e)}function sce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kb(e,t)}function Kb(e,t){return Kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Kb(e,t)}function Bs(e,t,n){return t=CM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CM(e){var t=ace(e,"string");return ac(t)=="symbol"?t:t+""}function ace(e,t){if(ac(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _o=function(e){function t(){var n;ece(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=nce(this,t,[].concat(i)),Bs(n,"state",{isAnimationFinished:!1}),Bs(n,"id",_c("recharts-bar-")),Bs(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Bs(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return sce(t,e),tce(t,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,a=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=Be(this.props,!1);return r&&r.map(function(f,h){var p=h===c,g=p?u:a,m=Gt(Gt(Gt({},d),f),{},{isActive:p,option:g,index:h,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return W.createElement(ot,Zm({className:"recharts-bar-rectangle"},co(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),W.createElement(WC,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,a=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return W.createElement(Ti,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,m=s.map(function(y,v){var x=h&&h[v];if(x){var w=ur(x.x,y.x),j=ur(x.y,y.y),S=ur(x.width,y.width),k=ur(x.height,y.height);return Gt(Gt({},y),{},{x:w(g),y:j(g),width:S(g),height:k(g)})}if(a==="horizontal"){var N=ur(0,y.height),P=N(g);return Gt(Gt({},y),{},{y:y.y+y.height-P,height:P})}var A=ur(0,y.width),C=A(g);return Gt(Gt({},y),{},{width:C})});return W.createElement(ot,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!Bf(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,a=i.dataKey,l=i.activeIndex,c=Be(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,h=Zle(u,Xle);if(!f)return null;var p=Gt(Gt(Gt(Gt(Gt({},h),{},{fill:"#eee"},f),c),co(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:d,className:"recharts-bar-background-rectangle"});return W.createElement(WC,Zm({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=gr(d,Uf);if(!f)return null;var h=u==="vertical"?a[0].height/2:a[0].width/2,p=function(y,v){var x=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:x,errorVal:an(y,v)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return W.createElement(ot,g,f.map(function(m){return W.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,a=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,f=r.width,h=r.height,p=r.isAnimationActive,g=r.background,m=r.id;if(i||!s||!s.length)return null;var y=this.state.isAnimationFinished,v=Ye("recharts-bar",a),x=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,j=x||w,S=Qe(m)?this.id:m;return W.createElement(ot,{className:v},x||w?W.createElement("defs",null,W.createElement("clipPath",{id:"clipPath-".concat(S)},W.createElement("rect",{x:x?u:u-f/2,y:w?d:d-h/2,width:x?f:f*2,height:w?h:h*2}))):null,W.createElement(ot,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(S,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,S),(!p||y)&&is.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(b.PureComponent);kM=_o;Bs(_o,"displayName","Bar");Bs(_o,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ki.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Bs(_o,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,s=e.xAxis,a=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,p=Bne(r,n);if(!p)return null;var g=t.layout,m=n.type.defaultProps,y=m!==void 0?Gt(Gt({},m),n.props):n.props,v=y.dataKey,x=y.children,w=y.minPointSize,j=g==="horizontal"?a:s,S=u?j.scale.domain():null,k=Kne({numericAxis:j}),N=gr(x,Rf),P=f.map(function(A,C){var _,R,z,M,I,$;u?_=Une(u[d+C],S):(_=an(A,v),Array.isArray(_)||(_=[k,_]));var E=Yle(w,kM.defaultProps.minPointSize)(_[1],C);if(g==="horizontal"){var T,D=[a.scale(_[0]),a.scale(_[1])],H=D[0],F=D[1];R=R2({axis:s,ticks:l,bandSize:i,offset:p.offset,entry:A,index:C}),z=(T=F??H)!==null&&T!==void 0?T:void 0,M=p.size;var B=H-F;if(I=Number.isNaN(B)?0:B,$={x:R,y:a.y,width:M,height:a.height},Math.abs(E)>0&&Math.abs(I)<Math.abs(E)){var Z=Ln(I||E)*(Math.abs(E)-Math.abs(I));z-=Z,I+=Z}}else{var V=[s.scale(_[0]),s.scale(_[1])],G=V[0],X=V[1];if(R=G,z=R2({axis:a,ticks:c,bandSize:i,offset:p.offset,entry:A,index:C}),M=X-G,I=p.size,$={x:s.x,y:z,width:s.width,height:I},Math.abs(E)>0&&Math.abs(M)<Math.abs(E)){var U=Ln(M||E)*(Math.abs(E)-Math.abs(M));M+=U}}return Gt(Gt(Gt({},A),{},{x:R,y:z,width:M,height:I,value:u?_:_[1],payload:A,background:$},N&&N[C]&&N[C].props),{},{tooltipPayload:[GR(n,A)],tooltipPosition:{x:R+M/2,y:z+I/2}})});return Gt({data:P,layout:g},h)});function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function oce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AM(r.key),r)}}function lce(e,t,n){return t&&KC(e.prototype,t),n&&KC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function QC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QC(Object(n),!0).forEach(function(r){Dy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dy(e,t,n){return t=AM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AM(e){var t=cce(e,"string");return sf(t)=="symbol"?t:t+""}function cce(e,t){if(sf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EM=function(t,n,r,i,s){var a=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},h=!!lr(u,_o);return d.reduce(function(p,g){var m=n[g],y=m.orientation,v=m.domain,x=m.padding,w=x===void 0?{}:x,j=m.mirror,S=m.reversed,k="".concat(y).concat(j?"Mirror":""),N,P,A,C,_;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var R=v[1]-v[0],z=1/0,M=m.categoricalDomain.sort();if(M.forEach(function(V,G){G>0&&(z=Math.min((V||0)-(M[G-1]||0),z))}),Number.isFinite(z)){var I=z/R,$=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(N=I*$/2),m.padding==="no-gap"){var E=Fn(t.barCategoryGap,I*$),T=I*$/2;N=T-E-(T-E)/$*E}}}i==="xAxis"?P=[r.left+(w.left||0)+(N||0),r.left+r.width-(w.right||0)-(N||0)]:i==="yAxis"?P=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(N||0),r.top+r.height-(w.bottom||0)-(N||0)]:P=m.range,S&&(P=[P[1],P[0]]);var D=qR(m,s,h),H=D.scale,F=D.realScaleType;H.domain(v).range(P),VR(H);var B=KR(H,Xr(Xr({},m),{},{realScaleType:F}));i==="xAxis"?(_=y==="top"&&!j||y==="bottom"&&j,A=r.left,C=f[k]-_*m.height):i==="yAxis"&&(_=y==="left"&&!j||y==="right"&&j,A=f[k]-_*m.width,C=r.top);var Z=Xr(Xr(Xr({},m),B),{},{realScaleType:F,x:A,y:C,scale:H,width:i==="xAxis"?r.width:m.width,height:i==="yAxis"?r.height:m.height});return Z.bandSize=Mm(Z,B),!m.hide&&i==="xAxis"?f[k]+=(_?-1:1)*Z.height:m.hide||(f[k]+=(_?-1:1)*Z.width),Xr(Xr({},p),{},Dy({},g,Z))},{})},_M=function(t,n){var r=t.x,i=t.y,s=n.x,a=n.y;return{x:Math.min(r,s),y:Math.min(i,a),width:Math.abs(s-r),height:Math.abs(a-i)}},uce=function(t){var n=t.x1,r=t.y1,i=t.x2,s=t.y2;return _M({x:n,y:r},{x:i,y:s})},TM=function(){function e(t){oce(this,e),this.scale=t}return lce(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();Dy(TM,"EPS",1e-4);var VS=function(t){var n=Object.keys(t).reduce(function(r,i){return Xr(Xr({},r),{},Dy({},i,TM.create(t[i])))},{});return Xr(Xr({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,l=s.position;return _le(i,function(c,u){return n[u].apply(c,{bandAware:a,position:l})})},isInRange:function(i){return NM(i,function(s,a){return n[a].isInRange(s)})}})};function dce(e){return(e%180+180)%180}var fce=function(t){var n=t.width,r=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=dce(i),a=s*Math.PI/180,l=Math.atan(r/n),c=a>l&&a<Math.PI-l?r/Math.sin(a):n/Math.cos(a);return Math.abs(c)},hce=Ri,pce=Df,mce=hy;function gce(e){return function(t,n,r){var i=Object(t);if(!pce(t)){var s=hce(n);t=mce(t),n=function(l){return s(i[l],l,i)}}var a=e(t,n,r);return a>-1?i[s?t[a]:a]:void 0}}var yce=gce,xce=bM;function vce(e){var t=xce(e),n=t%1;return t===t?n?t-n:t:0}var bce=vce,wce=kD,Sce=Ri,jce=bce,Nce=Math.max;function kce(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var i=n==null?0:jce(n);return i<0&&(i=Nce(r+i,0)),wce(e,Sce(t),i)}var Pce=kce,Cce=yce,Ace=Pce,Ece=Cce(Ace),_ce=Ece;const Tce=ct(_ce);var Oce=C8(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),KS=b.createContext(void 0),QS=b.createContext(void 0),OM=b.createContext(void 0),IM=b.createContext({}),DM=b.createContext(void 0),RM=b.createContext(0),MM=b.createContext(0),GC=function(t){var n=t.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,a=t.clipPathId,l=t.children,c=t.width,u=t.height,d=Oce(s);return W.createElement(KS.Provider,{value:r},W.createElement(QS.Provider,{value:i},W.createElement(IM.Provider,{value:s},W.createElement(OM.Provider,{value:d},W.createElement(DM.Provider,{value:a},W.createElement(RM.Provider,{value:u},W.createElement(MM.Provider,{value:c},l)))))))},Ice=function(){return b.useContext(DM)},$M=function(t){var n=b.useContext(KS);n==null&&ho();var r=n[t];return r==null&&ho(),r},Dce=function(){var t=b.useContext(KS);return Rs(t)},Rce=function(){var t=b.useContext(QS),n=Tce(t,function(r){return NM(r.domain,Number.isFinite)});return n||Rs(t)},LM=function(t){var n=b.useContext(QS);n==null&&ho();var r=n[t];return r==null&&ho(),r},Mce=function(){var t=b.useContext(OM);return t},$ce=function(){return b.useContext(IM)},GS=function(){return b.useContext(MM)},YS=function(){return b.useContext(RM)};function oc(e){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oc(e)}function Lce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BM(r.key),r)}}function Bce(e,t,n){return t&&Fce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uce(e,t,n){return t=eg(t),zce(e,FM()?Reflect.construct(t,n||[],eg(e).constructor):t.apply(e,n))}function zce(e,t){if(t&&(oc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hce(e)}function Hce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FM=function(){return!!e})()}function eg(e){return eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eg(e)}function Wce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qb(e,t)}function Qb(e,t){return Qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Qb(e,t)}function YC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function XC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(n),!0).forEach(function(r){XS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XS(e,t,n){return t=BM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BM(e){var t=qce(e,"string");return oc(t)=="symbol"?t:t+""}function qce(e,t){if(oc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(oc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vce(e,t){return Yce(e)||Gce(e,t)||Qce(e,t)||Kce()}function Kce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qce(e,t){if(e){if(typeof e=="string")return ZC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZC(e,t)}}function ZC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Yce(e){if(Array.isArray(e))return e}function Gb(){return Gb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gb.apply(this,arguments)}var Xce=function(t,n){var r;return W.isValidElement(t)?r=W.cloneElement(t,n):He(t)?r=t(n):r=W.createElement("line",Gb({},n,{className:"recharts-reference-line-line"})),r},Zce=function(t,n,r,i,s,a,l,c,u){var d=s.x,f=s.y,h=s.width,p=s.height;if(r){var g=u.y,m=t.y.apply(g,{position:a});if(Ci(u,"discard")&&!t.y.isInRange(m))return null;var y=[{x:d+h,y:m},{x:d,y:m}];return c==="left"?y.reverse():y}if(n){var v=u.x,x=t.x.apply(v,{position:a});if(Ci(u,"discard")&&!t.x.isInRange(x))return null;var w=[{x,y:f+p},{x,y:f}];return l==="top"?w.reverse():w}if(i){var j=u.segment,S=j.map(function(k){return t.apply(k,{position:a})});return Ci(u,"discard")&&Sle(S,function(k){return!t.isInRange(k)})?null:S}return null};function Jce(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,s=e.yAxisId,a=e.shape,l=e.className,c=e.alwaysShow,u=Ice(),d=$M(i),f=LM(s),h=Mce();if(!u||!h)return null;si(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=VS({x:d.scale,y:f.scale}),g=cn(t),m=cn(n),y=r&&r.length===2,v=Zce(p,g,m,y,h,e.position,d.orientation,f.orientation,e);if(!v)return null;var x=Vce(v,2),w=x[0],j=w.x,S=w.y,k=x[1],N=k.x,P=k.y,A=Ci(e,"hidden")?"url(#".concat(u,")"):void 0,C=XC(XC({clipPath:A},Be(e,!0)),{},{x1:j,y1:S,x2:N,y2:P});return W.createElement(ot,{className:Ye("recharts-reference-line",l)},Xce(a,C),mn.renderCallByParent(e,uce({x1:j,y1:S,x2:N,y2:P})))}var ZS=function(e){function t(){return Lce(this,t),Uce(this,t,arguments)}return Wce(t,e),Bce(t,[{key:"render",value:function(){return W.createElement(Jce,this.props)}}])}(W.Component);XS(ZS,"displayName","ReferenceLine");XS(ZS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Yb(){return Yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yb.apply(this,arguments)}function lc(e){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(e)}function JC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JC(Object(n),!0).forEach(function(r){Ry(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zM(r.key),r)}}function nue(e,t,n){return t&&tue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rue(e,t,n){return t=tg(t),iue(e,UM()?Reflect.construct(t,n||[],tg(e).constructor):t.apply(e,n))}function iue(e,t){if(t&&(lc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sue(e)}function sue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UM=function(){return!!e})()}function tg(e){return tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tg(e)}function aue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xb(e,t)}function Xb(e,t){return Xb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Xb(e,t)}function Ry(e,t,n){return t=zM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zM(e){var t=oue(e,"string");return lc(t)=="symbol"?t:t+""}function oue(e,t){if(lc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lue=function(t){var n=t.x,r=t.y,i=t.xAxis,s=t.yAxis,a=VS({x:i.scale,y:s.scale}),l=a.apply({x:n,y:r},{bandAware:!0});return Ci(t,"discard")&&!a.isInRange(l)?null:l},My=function(e){function t(){return eue(this,t),rue(this,t,arguments)}return aue(t,e),nue(t,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,a=r.r,l=r.alwaysShow,c=r.clipPathId,u=cn(i),d=cn(s);if(si(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=lue(this.props);if(!f)return null;var h=f.x,p=f.y,g=this.props,m=g.shape,y=g.className,v=Ci(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=eA(eA({clipPath:v},Be(this.props,!0)),{},{cx:h,cy:p});return W.createElement(ot,{className:Ye("recharts-reference-dot",y)},t.renderDot(m,x),mn.renderCallByParent(this.props,{x:h-a,y:p-a,width:2*a,height:2*a}))}}])}(W.Component);Ry(My,"displayName","ReferenceDot");Ry(My,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ry(My,"renderDot",function(e,t){var n;return W.isValidElement(e)?n=W.cloneElement(e,t):He(e)?n=e(t):n=W.createElement(Cy,Yb({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zb.apply(this,arguments)}function cc(e){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(e)}function tA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tA(Object(n),!0).forEach(function(r){$y(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WM(r.key),r)}}function due(e,t,n){return t&&uue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fue(e,t,n){return t=ng(t),hue(e,HM()?Reflect.construct(t,n||[],ng(e).constructor):t.apply(e,n))}function hue(e,t){if(t&&(cc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pue(e)}function pue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HM=function(){return!!e})()}function ng(e){return ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ng(e)}function mue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jb(e,t)}function Jb(e,t){return Jb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Jb(e,t)}function $y(e,t,n){return t=WM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WM(e){var t=gue(e,"string");return cc(t)=="symbol"?t:t+""}function gue(e,t){if(cc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yue=function(t,n,r,i,s){var a=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var h=VS({x:d.scale,y:f.scale}),p={x:t?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Ci(s,"discard")&&(!h.isInRange(p)||!h.isInRange(g))?null:_M(p,g)},Ly=function(e){function t(){return cue(this,t),fue(this,t,arguments)}return mue(t,e),due(t,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,a=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;si(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=cn(i),h=cn(s),p=cn(a),g=cn(l),m=this.props.shape;if(!f&&!h&&!p&&!g&&!m)return null;var y=yue(f,h,p,g,this.props);if(!y&&!m)return null;var v=Ci(this.props,"hidden")?"url(#".concat(d,")"):void 0;return W.createElement(ot,{className:Ye("recharts-reference-area",c)},t.renderRect(m,nA(nA({clipPath:v},Be(this.props,!0)),y)),mn.renderCallByParent(this.props,y))}}])}(W.Component);$y(Ly,"displayName","ReferenceArea");$y(Ly,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});$y(Ly,"renderRect",function(e,t){var n;return W.isValidElement(e)?n=W.cloneElement(e,t):He(e)?n=e(t):n=W.createElement(qS,Zb({},t,{className:"recharts-reference-area-rect"})),n});function qM(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function xue(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return fce(r,n)}function vue(e,t,n){var r=n==="width",i=e.x,s=e.y,a=e.width,l=e.height;return t===1?{start:r?i:s,end:r?i+a:s+l}:{start:r?i+a:s+l,end:r?i:s}}function rg(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-i)<=0}function bue(e,t){return qM(e,t+1)}function wue(e,t,n,r,i){for(var s=(r||[]).slice(),a=t.start,l=t.end,c=0,u=1,d=a,f=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:qM(r,u)};var m=c,y,v=function(){return y===void 0&&(y=n(g,m)),y},x=g.coordinate,w=c===0||rg(e,x,v,d,l);w||(c=0,d=a,u+=1),w&&(d=x+e*(v()/2+i),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function rA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rA(Object(n),!0).forEach(function(r){Sue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sue(e,t,n){return t=jue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jue(e){var t=Nue(e,"string");return af(t)=="symbol"?t:t+""}function Nue(e,t){if(af(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kue(e,t,n,r,i){for(var s=(r||[]).slice(),a=s.length,l=t.start,c=t.end,u=function(h){var p=s[h],g,m=function(){return g===void 0&&(g=n(p,h)),g};if(h===a-1){var y=e*(p.coordinate+e*m()/2-c);s[h]=p=Pn(Pn({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate})}else s[h]=p=Pn(Pn({},p),{},{tickCoord:p.coordinate});var v=rg(e,p.tickCoord,m,l,c);v&&(c=p.tickCoord-e*(m()/2+i),s[h]=Pn(Pn({},p),{},{isShow:!0}))},d=a-1;d>=0;d--)u(d);return s}function Pue(e,t,n,r,i,s){var a=(r||[]).slice(),l=a.length,c=t.start,u=t.end;if(s){var d=r[l-1],f=n(d,l-1),h=e*(d.coordinate+e*f/2-u);a[l-1]=d=Pn(Pn({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=rg(e,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-e*(f/2+i),a[l-1]=Pn(Pn({},d),{},{isShow:!0}))}for(var g=s?l-1:l,m=function(x){var w=a[x],j,S=function(){return j===void 0&&(j=n(w,x)),j};if(x===0){var k=e*(w.coordinate-e*S()/2-c);a[x]=w=Pn(Pn({},w),{},{tickCoord:k<0?w.coordinate-k*e:w.coordinate})}else a[x]=w=Pn(Pn({},w),{},{tickCoord:w.coordinate});var N=rg(e,w.tickCoord,S,c,u);N&&(c=w.tickCoord+e*(S()/2+i),a[x]=Pn(Pn({},w),{},{isShow:!0}))},y=0;y<g;y++)m(y);return a}function JS(e,t,n){var r=e.tick,i=e.ticks,s=e.viewBox,a=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!i||!i.length||!r)return[];if(Pe(c)||ki.isSsr)return bue(i,typeof c=="number"&&Pe(c)?c:0);var h=[],p=l==="top"||l==="bottom"?"width":"height",g=d&&p==="width"?Gu(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(w,j){var S=He(u)?u(w.value,j):w.value;return p==="width"?xue(Gu(S,{fontSize:t,letterSpacing:n}),g,f):Gu(S,{fontSize:t,letterSpacing:n})[p]},y=i.length>=2?Ln(i[1].coordinate-i[0].coordinate):1,v=vue(s,y,p);return c==="equidistantPreserveStart"?wue(y,v,m,i,a):(c==="preserveStart"||c==="preserveStartEnd"?h=Pue(y,v,m,i,a,c==="preserveStartEnd"):h=kue(y,v,m,i,a),h.filter(function(x){return x.isShow}))}var Cue=["viewBox"],Aue=["viewBox"],Eue=["ticks"];function uc(e){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uc(e)}function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gl.apply(this,arguments)}function iA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iA(Object(n),!0).forEach(function(r){ej(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n0(e,t){if(e==null)return{};var n=_ue(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _ue(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Tue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KM(r.key),r)}}function Oue(e,t,n){return t&&sA(e.prototype,t),n&&sA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Iue(e,t,n){return t=ig(t),Due(e,VM()?Reflect.construct(t,n||[],ig(e).constructor):t.apply(e,n))}function Due(e,t){if(t&&(uc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rue(e)}function Rue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VM=function(){return!!e})()}function ig(e){return ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ig(e)}function Mue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ew(e,t)}function ew(e,t){return ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ew(e,t)}function ej(e,t,n){return t=KM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KM(e){var t=$ue(e,"string");return uc(t)=="symbol"?t:t+""}function $ue(e,t){if(uc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $c=function(e){function t(n){var r;return Tue(this,t),r=Iue(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Mue(t,e),Oue(t,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,a=n0(r,Cue),l=this.props,c=l.viewBox,u=n0(l,Aue);return!Cl(s,c)||!Cl(a,u)||!Cl(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,a=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,p,g,m,y,v,x,w=f?-1:1,j=r.tickSize||d,S=Pe(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=g=r.coordinate,y=a+ +!f*c,m=y-w*j,x=m-w*h,v=S;break;case"left":m=y=r.coordinate,g=s+ +!f*l,p=g-w*j,v=p-w*h,x=S;break;case"right":m=y=r.coordinate,g=s+ +f*l,p=g+w*j,v=p+w*h,x=S;break;default:p=g=r.coordinate,y=a+ +f*c,m=y+w*j,x=m+w*h,v=S;break}return{line:{x1:p,y1:m,x2:g,y2:y},tick:{x:v,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,f=Mn(Mn(Mn({},Be(this.props,!1)),Be(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Mn(Mn({},f),{},{x1:i,y1:s+h*l,x2:i+a,y2:s+h*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=Mn(Mn({},f),{},{x1:i+p*a,y1:s,x2:i+p*a,y2:s+l})}return W.createElement("line",gl({},f,{className:Ye("recharts-cartesian-axis-line",mr(d,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var a=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,p=JS(Mn(Mn({},this.props),{},{ticks:r}),i,s),g=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),y=Be(this.props,!1),v=Be(d,!1),x=Mn(Mn({},y),{},{fill:"none"},Be(c,!1)),w=p.map(function(j,S){var k=a.getTickLineCoord(j),N=k.line,P=k.tick,A=Mn(Mn(Mn(Mn({textAnchor:g,verticalAnchor:m},y),{},{stroke:"none",fill:u},v),P),{},{index:S,payload:j,visibleTicksCount:p.length,tickFormatter:f});return W.createElement(ot,gl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},co(a.props,j,S)),c&&W.createElement("line",gl({},x,N,{className:Ye("recharts-cartesian-axis-tick-line",mr(c,"className"))})),d&&t.renderTickItem(d,A,"".concat(He(f)?f(j.value,S):j.value).concat(h||"")))});return W.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,a=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,p=n0(f,Eue),g=h;return He(c)&&(g=h&&h.length>0?c(this.props):c(p)),a<=0||l<=0||!g||!g.length?null:W.createElement(ot,{className:Ye("recharts-cartesian-axis",u),ref:function(y){r.layerReference=y}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),mn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var a;return W.isValidElement(r)?a=W.cloneElement(r,i):He(r)?a=r(i):a=W.createElement(uo,gl({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(b.Component);ej($c,"displayName","CartesianAxis");ej($c,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Lue=["x1","y1","x2","y2","key"],Fue=["offset"];function po(e){"@babel/helpers - typeof";return po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},po(e)}function aA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aA(Object(n),!0).forEach(function(r){Bue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bue(e,t,n){return t=Uue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uue(e){var t=zue(e,"string");return po(t)=="symbol"?t:t+""}function zue(e,t){if(po(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(po(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Va(){return Va=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Va.apply(this,arguments)}function oA(e,t){if(e==null)return{};var n=Hue(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Hue(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Wue=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,s=t.y,a=t.width,l=t.height,c=t.ry;return W.createElement("rect",{x:i,y:s,ry:c,width:a,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function QM(e,t){var n;if(W.isValidElement(e))n=W.cloneElement(e,t);else if(He(e))n=e(t);else{var r=t.x1,i=t.y1,s=t.x2,a=t.y2,l=t.key,c=oA(t,Lue),u=Be(c,!1);u.offset;var d=oA(u,Fue);n=W.createElement("line",Va({},d,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:l}))}return n}function que(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,s=e.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(l,c){var u=En(En({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return QM(i,u)});return W.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function Vue(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,s=e.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(l,c){var u=En(En({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return QM(i,u)});return W.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function Kue(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,s=e.width,a=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var g=!d[p+1],m=g?i+a-h:d[p+1]-h;if(m<=0)return null;var y=p%t.length;return W.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:m,width:s,stroke:"none",fill:t[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return W.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Que(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,s=e.x,a=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,p){return h-p});s!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var g=!d[p+1],m=g?s+l-h:d[p+1]-h;if(m<=0)return null;var y=p%r.length;return W.createElement("rect",{key:"react-".concat(p),x:h,y:a,width:m,height:c,stroke:"none",fill:r[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return W.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Gue=function(t,n){var r=t.xAxis,i=t.width,s=t.height,a=t.offset;return WR(JS(En(En(En({},$c.defaultProps),r),{},{ticks:Zi(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.left,a.left+a.width,n)},Yue=function(t,n){var r=t.yAxis,i=t.width,s=t.height,a=t.offset;return WR(JS(En(En(En({},$c.defaultProps),r),{},{ticks:Zi(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.top,a.top+a.height,n)},Wo={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function tj(e){var t,n,r,i,s,a,l=GS(),c=YS(),u=$ce(),d=En(En({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Wo.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Wo.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Wo.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Wo.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:Wo.vertical,verticalFill:(a=e.verticalFill)!==null&&a!==void 0?a:Wo.verticalFill,x:Pe(e.x)?e.x:u.left,y:Pe(e.y)?e.y:u.top,width:Pe(e.width)?e.width:u.width,height:Pe(e.height)?e.height:u.height}),f=d.x,h=d.y,p=d.width,g=d.height,m=d.syncWithTicks,y=d.horizontalValues,v=d.verticalValues,x=Dce(),w=Rce();if(!Pe(p)||p<=0||!Pe(g)||g<=0||!Pe(f)||f!==+f||!Pe(h)||h!==+h)return null;var j=d.verticalCoordinatesGenerator||Gue,S=d.horizontalCoordinatesGenerator||Yue,k=d.horizontalPoints,N=d.verticalPoints;if((!k||!k.length)&&He(S)){var P=y&&y.length,A=S({yAxis:w?En(En({},w),{},{ticks:P?y:w.ticks}):void 0,width:l,height:c,offset:u},P?!0:m);si(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(po(A),"]")),Array.isArray(A)&&(k=A)}if((!N||!N.length)&&He(j)){var C=v&&v.length,_=j({xAxis:x?En(En({},x),{},{ticks:C?v:x.ticks}):void 0,width:l,height:c,offset:u},C?!0:m);si(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(po(_),"]")),Array.isArray(_)&&(N=_)}return W.createElement("g",{className:"recharts-cartesian-grid"},W.createElement(Wue,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),W.createElement(que,Va({},d,{offset:u,horizontalPoints:k,xAxis:x,yAxis:w})),W.createElement(Vue,Va({},d,{offset:u,verticalPoints:N,xAxis:x,yAxis:w})),W.createElement(Kue,Va({},d,{horizontalPoints:k})),W.createElement(Que,Va({},d,{verticalPoints:N})))}tj.displayName="CartesianGrid";var Xue=["type","layout","connectNulls","ref"],Zue=["key"];function dc(e){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dc(e)}function lA(e,t){if(e==null)return{};var n=Jue(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jue(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function td(){return td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},td.apply(this,arguments)}function cA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(n),!0).forEach(function(r){Zr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qo(e){return rde(e)||nde(e)||tde(e)||ede()}function ede(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tde(e,t){if(e){if(typeof e=="string")return tw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tw(e,t)}}function nde(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rde(e){if(Array.isArray(e))return tw(e)}function tw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ide(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YM(r.key),r)}}function sde(e,t,n){return t&&uA(e.prototype,t),n&&uA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ade(e,t,n){return t=sg(t),ode(e,GM()?Reflect.construct(t,n||[],sg(e).constructor):t.apply(e,n))}function ode(e,t){if(t&&(dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lde(e)}function lde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GM=function(){return!!e})()}function sg(e){return sg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sg(e)}function cde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nw(e,t)}function nw(e,t){return nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nw(e,t)}function Zr(e,t,n){return t=YM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YM(e){var t=ude(e,"string");return dc(t)=="symbol"?t:t+""}function ude(e,t){if(dc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(dc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zf=function(e){function t(){var n;ide(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=ade(this,t,[].concat(i)),Zr(n,"state",{isAnimationFinished:!0,totalLength:0}),Zr(n,"generateSimpleStrokeDasharray",function(a,l){return"".concat(l,"px ").concat(a-l,"px")}),Zr(n,"getStrokeDasharray",function(a,l,c){var u=c.reduce(function(v,x){return v+x});if(!u)return n.generateSimpleStrokeDasharray(l,a);for(var d=Math.floor(a/u),f=a%u,h=l-a,p=[],g=0,m=0;g<c.length;m+=c[g],++g)if(m+c[g]>f){p=[].concat(qo(c.slice(0,g)),[f-m]);break}var y=p.length%2===0?[0,h]:[h];return[].concat(qo(t.repeat(c,d)),qo(p),y).map(function(v){return"".concat(v,"px")}).join(", ")}),Zr(n,"id",_c("recharts-line-")),Zr(n,"pathRef",function(a){n.mainCurve=a}),Zr(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Zr(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return cde(t,e),sde(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=gr(d,Uf);if(!f)return null;var h=function(m,y){return{x:m.x,y:m.y,value:m.value,errorVal:an(m.payload,y)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return W.createElement(ot,p,f.map(function(g){return W.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=Be(this.props,!1),h=Be(c,!0),p=u.map(function(m,y){var v=ir(ir(ir({key:"dot-".concat(y),r:3},f),h),{},{value:m.value,dataKey:d,cx:m.x,cy:m.y,index:y,payload:m.payload});return t.renderDotItem(c,v)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return W.createElement(ot,td({className:"recharts-line-dots",key:"dots"},g),p)}},{key:"renderCurveStatically",value:function(r,i,s,a){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=lA(l,Xue),h=ir(ir(ir({},Be(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},a),{},{type:c,layout:u,connectNulls:d});return W.createElement(Fm,td({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,a=this.props,l=a.points,c=a.strokeDasharray,u=a.isAnimationActive,d=a.animationBegin,f=a.animationDuration,h=a.animationEasing,p=a.animationId,g=a.animateNewValues,m=a.width,y=a.height,v=this.state,x=v.prevPoints,w=v.totalLength;return W.createElement(Ti,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var S=j.t;if(x){var k=x.length/l.length,N=l.map(function(R,z){var M=Math.floor(z*k);if(x[M]){var I=x[M],$=ur(I.x,R.x),E=ur(I.y,R.y);return ir(ir({},R),{},{x:$(S),y:E(S)})}if(g){var T=ur(m*2,R.x),D=ur(y/2,R.y);return ir(ir({},R),{},{x:T(S),y:D(S)})}return ir(ir({},R),{},{x:R.x,y:R.y})});return s.renderCurveStatically(N,r,i)}var P=ur(0,w),A=P(S),C;if(c){var _="".concat(c).split(/[,\s]+/gim).map(function(R){return parseFloat(R)});C=s.getStrokeDasharray(A,w,_)}else C=s.generateSimpleStrokeDasharray(w,A);return s.renderCurveStatically(l,r,i,{strokeDasharray:C})})}},{key:"renderCurve",value:function(r,i){var s=this.props,a=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&a&&a.length&&(!u&&d>0||!Bf(u,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,l=i.points,c=i.className,u=i.xAxis,d=i.yAxis,f=i.top,h=i.left,p=i.width,g=i.height,m=i.isAnimationActive,y=i.id;if(s||!l||!l.length)return null;var v=this.state.isAnimationFinished,x=l.length===1,w=Ye("recharts-line",c),j=u&&u.allowDataOverflow,S=d&&d.allowDataOverflow,k=j||S,N=Qe(y)?this.id:y,P=(r=Be(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},A=P.r,C=A===void 0?3:A,_=P.strokeWidth,R=_===void 0?2:_,z=I7(a)?a:{},M=z.clipDot,I=M===void 0?!0:M,$=C*2+R;return W.createElement(ot,{className:w},j||S?W.createElement("defs",null,W.createElement("clipPath",{id:"clipPath-".concat(N)},W.createElement("rect",{x:j?h:h-p/2,y:S?f:f-g/2,width:j?p:p*2,height:S?g:g*2})),!I&&W.createElement("clipPath",{id:"clipPath-dots-".concat(N)},W.createElement("rect",{x:h-$/2,y:f-$/2,width:p+$,height:g+$}))):null,!x&&this.renderCurve(k,N),this.renderErrorBar(k,N),(x||a)&&this.renderDots(k,I,N),(!m||v)&&is.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(qo(r),[0]):r,a=[],l=0;l<i;++l)a=[].concat(qo(a),qo(s));return a}},{key:"renderDotItem",value:function(r,i){var s;if(W.isValidElement(r))s=W.cloneElement(r,i);else if(He(r))s=r(i);else{var a=i.key,l=lA(i,Zue),c=Ye("recharts-line-dot",typeof r!="boolean"?r.className:"");s=W.createElement(Cy,td({key:a},l,{className:c}))}return s}}])}(b.PureComponent);Zr(zf,"displayName","Line");Zr(zf,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ki.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Zr(zf,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,s=e.yAxisTicks,a=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,p){var g=an(h,a);return d==="horizontal"?{x:D2({axis:n,ticks:i,bandSize:l,entry:h,index:p}),y:Qe(g)?null:r.scale(g),value:g,payload:h}:{x:Qe(g)?null:n.scale(g),y:D2({axis:r,ticks:s,bandSize:l,entry:h,index:p}),value:g,payload:h}});return ir({points:f,layout:d},u)});function fc(e){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fc(e)}function dde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JM(r.key),r)}}function hde(e,t,n){return t&&fde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pde(e,t,n){return t=ag(t),mde(e,XM()?Reflect.construct(t,n||[],ag(e).constructor):t.apply(e,n))}function mde(e,t){if(t&&(fc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gde(e)}function gde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XM=function(){return!!e})()}function ag(e){return ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ag(e)}function yde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rw(e,t)}function rw(e,t){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rw(e,t)}function ZM(e,t,n){return t=JM(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JM(e){var t=xde(e,"string");return fc(t)=="symbol"?t:t+""}function xde(e,t){if(fc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iw.apply(this,arguments)}function vde(e){var t=e.xAxisId,n=GS(),r=YS(),i=$M(t);return i==null?null:W.createElement($c,iw({},i,{className:Ye("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Zi(a,!0)}}))}var Lc=function(e){function t(){return dde(this,t),pde(this,t,arguments)}return yde(t,e),hde(t,[{key:"render",value:function(){return W.createElement(vde,this.props)}}])}(W.Component);ZM(Lc,"displayName","XAxis");ZM(Lc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function hc(e){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(e)}function bde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n$(r.key),r)}}function Sde(e,t,n){return t&&wde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jde(e,t,n){return t=og(t),Nde(e,e$()?Reflect.construct(t,n||[],og(e).constructor):t.apply(e,n))}function Nde(e,t){if(t&&(hc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kde(e)}function kde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e$=function(){return!!e})()}function og(e){return og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},og(e)}function Pde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sw(e,t)}function sw(e,t){return sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sw(e,t)}function t$(e,t,n){return t=n$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n$(e){var t=Cde(e,"string");return hc(t)=="symbol"?t:t+""}function Cde(e,t){if(hc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aw(){return aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aw.apply(this,arguments)}var Ade=function(t){var n=t.yAxisId,r=GS(),i=YS(),s=LM(n);return s==null?null:W.createElement($c,aw({},s,{className:Ye("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(l){return Zi(l,!0)}}))},Fc=function(e){function t(){return bde(this,t),jde(this,t,arguments)}return Pde(t,e),Sde(t,[{key:"render",value:function(){return W.createElement(Ade,this.props)}}])}(W.Component);t$(Fc,"displayName","YAxis");t$(Fc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function dA(e){return Ode(e)||Tde(e)||_de(e)||Ede()}function Ede(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _de(e,t){if(e){if(typeof e=="string")return ow(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ow(e,t)}}function Tde(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ode(e){if(Array.isArray(e))return ow(e)}function ow(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lw=function(t,n,r,i,s){var a=gr(t,ZS),l=gr(t,My),c=[].concat(dA(a),dA(l)),u=gr(t,Ly),d="".concat(i,"Id"),f=i[0],h=n;if(c.length&&(h=c.reduce(function(m,y){if(y.props[d]===r&&Ci(y.props,"extendDomain")&&Pe(y.props[f])){var v=y.props[f];return[Math.min(m[0],v),Math.max(m[1],v)]}return m},h)),u.length){var p="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(m,y){if(y.props[d]===r&&Ci(y.props,"extendDomain")&&Pe(y.props[p])&&Pe(y.props[g])){var v=y.props[p],x=y.props[g];return[Math.min(m[0],v,x),Math.max(m[1],v,x)]}return m},h)}return s&&s.length&&(h=s.reduce(function(m,y){return Pe(y)?[Math.min(m[0],y),Math.max(m[1],y)]:m},h)),h},r$={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||c,h),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,p,g){var m=n?n+u:u;if(!this._events[m])return!1;var y=this._events[m],v=arguments.length,x,w;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,p),!0;case 6:return y.fn.call(y.context,d,f,h,p,g),!0}for(w=1,x=new Array(v-1);w<v;w++)x[w-1]=arguments[w];y.fn.apply(y.context,x)}else{var j=y.length,S;for(w=0;w<j;w++)switch(y[w].once&&this.removeListener(u,y[w].fn,void 0,!0),v){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,d);break;case 3:y[w].fn.call(y[w].context,d,f);break;case 4:y[w].fn.call(y[w].context,d,f,h);break;default:if(!x)for(S=1,x=new Array(v-1);S<v;S++)x[S-1]=arguments[S];y[w].fn.apply(y[w].context,x)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&a(this,p);else{for(var m=0,y=[],v=g.length;m<v;m++)(g[m].fn!==d||h&&!g[m].once||f&&g[m].context!==f)&&y.push(g[m]);y.length?this._events[p]=y.length===1?y[0]:y:a(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(r$);var Ide=r$.exports;const Dde=ct(Ide);var r0=new Dde,i0="recharts.syncMouseEvents";function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function Rde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i$(r.key),r)}}function $de(e,t,n){return t&&Mde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s0(e,t,n){return t=i$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i$(e){var t=Lde(e,"string");return of(t)=="symbol"?t:t+""}function Lde(e,t){if(of(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Fde=function(){function e(){Rde(this,e),s0(this,"activeIndex",0),s0(this,"coordinateList",[]),s0(this,"layout","horizontal")}return $de(e,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,a=n.container,l=a===void 0?null:a,c=n.layout,u=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,h=n.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=s+c+u,h=a+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function Bde(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],i=e==null?void 0:e[1];if(r&&i&&Pe(r)&&Pe(i))return!0}return!1}function Ude(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function s$(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,s=e.endAngle,a=Ct(t,n,r,i),l=Ct(t,n,r,s);return{points:[a,l],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function zde(e,t,n){var r,i,s,a;if(e==="horizontal")r=t.x,s=r,i=n.top,a=n.top+n.height;else if(e==="vertical")i=t.y,a=i,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=Ct(l,c,u,f),p=Ct(l,c,d,f);r=h.x,i=h.y,s=p.x,a=p.y}else return s$(t);return[{x:r,y:i},{x:s,y:a}]}function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function fA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Eh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(n),!0).forEach(function(r){Hde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hde(e,t,n){return t=Wde(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wde(e){var t=qde(e,"string");return lf(t)=="symbol"?t:t+""}function qde(e,t){if(lf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vde(e){var t,n,r=e.element,i=e.tooltipEventType,s=e.isActive,a=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!s||!a||h!=="ScatterChart"&&i!=="axis")return null;var g,m=Fm;if(h==="ScatterChart")g=a,m=uae;else if(h==="BarChart")g=Ude(f,a,c,d),m=qS;else if(f==="radial"){var y=s$(a),v=y.cx,x=y.cy,w=y.radius,j=y.startAngle,S=y.endAngle;g={cx:v,cy:x,startAngle:j,endAngle:S,innerRadius:w,outerRadius:w},m=tM}else g={points:zde(f,a,c)},m=Fm;var k=Eh(Eh(Eh(Eh({stroke:"#ccc",pointerEvents:"none"},c),g),Be(p,!1)),{},{payload:l,payloadIndex:u,className:Ye("recharts-tooltip-cursor",p.className)});return b.isValidElement(p)?b.cloneElement(p,k):b.createElement(m,k)}var Kde=["item"],Qde=["children","className","width","height","style","compact","title","desc"];function pc(e){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pc(e)}function yl(){return yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yl.apply(this,arguments)}function hA(e,t){return Xde(e)||Yde(e,t)||o$(e,t)||Gde()}function Gde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yde(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Xde(e){if(Array.isArray(e))return e}function pA(e,t){if(e==null)return{};var n=Zde(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zde(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Jde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function efe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l$(r.key),r)}}function tfe(e,t,n){return t&&efe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nfe(e,t,n){return t=lg(t),rfe(e,a$()?Reflect.construct(t,n||[],lg(e).constructor):t.apply(e,n))}function rfe(e,t){if(t&&(pc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ife(e)}function ife(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a$=function(){return!!e})()}function lg(e){return lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lg(e)}function sfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cw(e,t)}function cw(e,t){return cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cw(e,t)}function mc(e){return lfe(e)||ofe(e)||o$(e)||afe()}function afe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o$(e,t){if(e){if(typeof e=="string")return uw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uw(e,t)}}function ofe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lfe(e){if(Array.isArray(e))return uw(e)}function uw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(n),!0).forEach(function(r){ze(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ze(e,t,n){return t=l$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l$(e){var t=cfe(e,"string");return pc(t)=="symbol"?t:t+""}function cfe(e,t){if(pc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ufe={xAxis:["bottom","top"],yAxis:["left","right"]},dfe={width:"100%",height:"100%"},c$={x:0,y:0};function _h(e){return e}var ffe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},hfe=function(t,n,r,i){var s=n.find(function(d){return d&&d.index===r});if(s){if(t==="horizontal")return{x:s.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:s.coordinate};if(t==="centric"){var a=s.coordinate,l=i.radius;return de(de(de({},i),Ct(i.cx,i.cy,l,a)),{},{angle:a,radius:l})}var c=s.coordinate,u=i.angle;return de(de(de({},i),Ct(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return c$},Fy=function(t,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,a=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(mc(l),mc(u)):l},[]);return a.length>0?a:t&&t.length&&Pe(i)&&Pe(s)?t.slice(i,s+1):[]};function u$(e){return e==="number"?[0,"auto"]:void 0}var dw=function(t,n,r,i){var s=t.graphicalItems,a=t.tooltipAxis,l=Fy(n,t);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var p=f===void 0?l:f;h=lm(p,a.dataKey,i)}else h=f&&f[r]||l[r];return h?[].concat(mc(c),[GR(u,h)]):c},[])},gA=function(t,n,r,i){var s=i||{x:t.chartX,y:t.chartY},a=ffe(s,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=Dne(a,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=dw(t,n,d,f),p=hfe(r,l,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},pfe=function(t,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,a=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,p=HR(d,s);return r.reduce(function(g,m){var y,v=m.type.defaultProps!==void 0?de(de({},m.type.defaultProps),m.props):m.props,x=v.type,w=v.dataKey,j=v.allowDataOverflow,S=v.allowDuplicatedCategory,k=v.scale,N=v.ticks,P=v.includeHidden,A=v[a];if(g[A])return g;var C=Fy(t.data,{graphicalItems:i.filter(function(B){var Z,V=a in B.props?B.props[a]:(Z=B.type.defaultProps)===null||Z===void 0?void 0:Z[a];return V===A}),dataStartIndex:c,dataEndIndex:u}),_=C.length,R,z,M;Bde(v.domain,j,x)&&(R=kb(v.domain,null,j),p&&(x==="number"||k!=="auto")&&(M=Xu(C,w,"category")));var I=u$(x);if(!R||R.length===0){var $,E=($=v.domain)!==null&&$!==void 0?$:I;if(w){if(R=Xu(C,w,x),x==="category"&&p){var T=N7(R);S&&T?(z=R,R=Gm(0,_)):S||(R=L2(E,R,m).reduce(function(B,Z){return B.indexOf(Z)>=0?B:[].concat(mc(B),[Z])},[]))}else if(x==="category")S?R=R.filter(function(B){return B!==""&&!Qe(B)}):R=L2(E,R,m).reduce(function(B,Z){return B.indexOf(Z)>=0||Z===""||Qe(Z)?B:[].concat(mc(B),[Z])},[]);else if(x==="number"){var D=Fne(C,i.filter(function(B){var Z,V,G=a in B.props?B.props[a]:(Z=B.type.defaultProps)===null||Z===void 0?void 0:Z[a],X="hide"in B.props?B.props.hide:(V=B.type.defaultProps)===null||V===void 0?void 0:V.hide;return G===A&&(P||!X)}),w,s,d);D&&(R=D)}p&&(x==="number"||k!=="auto")&&(M=Xu(C,w,"category"))}else p?R=Gm(0,_):l&&l[A]&&l[A].hasStack&&x==="number"?R=h==="expand"?[0,1]:QR(l[A].stackGroups,c,u):R=zR(C,i.filter(function(B){var Z=a in B.props?B.props[a]:B.type.defaultProps[a],V="hide"in B.props?B.props.hide:B.type.defaultProps.hide;return Z===A&&(P||!V)}),x,d,!0);if(x==="number")R=lw(f,R,A,s,N),E&&(R=kb(E,R,j));else if(x==="category"&&E){var H=E,F=R.every(function(B){return H.indexOf(B)>=0});F&&(R=H)}}return de(de({},g),{},ze({},A,de(de({},v),{},{axisType:s,domain:R,categoricalDomain:M,duplicateDomain:z,originalDomain:(y=v.domain)!==null&&y!==void 0?y:I,isCategorical:p,layout:d})))},{})},mfe=function(t,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,a=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,f=t.children,h=Fy(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),p=h.length,g=HR(d,s),m=-1;return r.reduce(function(y,v){var x=v.type.defaultProps!==void 0?de(de({},v.type.defaultProps),v.props):v.props,w=x[a],j=u$("number");if(!y[w]){m++;var S;return g?S=Gm(0,p):l&&l[w]&&l[w].hasStack?(S=QR(l[w].stackGroups,c,u),S=lw(f,S,w,s)):(S=kb(j,zR(h,r.filter(function(k){var N,P,A=a in k.props?k.props[a]:(N=k.type.defaultProps)===null||N===void 0?void 0:N[a],C="hide"in k.props?k.props.hide:(P=k.type.defaultProps)===null||P===void 0?void 0:P.hide;return A===w&&!C}),"number",d),i.defaultProps.allowDataOverflow),S=lw(f,S,w,s)),de(de({},y),{},ze({},w,de(de({axisType:s},i.defaultProps),{},{hide:!0,orientation:mr(ufe,"".concat(s,".").concat(m%2),null),domain:S,originalDomain:j,isCategorical:g,layout:d})))}return y},{})},gfe=function(t,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,a=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.children,f="".concat(i,"Id"),h=gr(d,s),p={};return h&&h.length?p=pfe(t,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):a&&a.length&&(p=mfe(t,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},yfe=function(t){var n=Rs(t),r=Zi(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:xS(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Mm(n,r)}},yA=function(t){var n=t.children,r=t.defaultShowTooltip,i=lr(n,sc),s=0,a=0;return t.data&&t.data.length!==0&&(a=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},xfe=function(t){return!t||!t.length?!1:t.some(function(n){var r=ts(n&&n.type);return r&&r.indexOf("Bar")>=0})},xA=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},vfe=function(t,n){var r=t.props,i=t.graphicalItems,s=t.xAxisMap,a=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,f=r.children,h=r.margin||{},p=lr(f,sc),g=lr(f,ns),m=Object.keys(c).reduce(function(S,k){var N=c[k],P=N.orientation;return!N.mirror&&!N.hide?de(de({},S),{},ze({},P,S[P]+N.width)):S},{left:h.left||0,right:h.right||0}),y=Object.keys(a).reduce(function(S,k){var N=a[k],P=N.orientation;return!N.mirror&&!N.hide?de(de({},S),{},ze({},P,mr(S,"".concat(P))+N.height)):S},{top:h.top||0,bottom:h.bottom||0}),v=de(de({},y),m),x=v.bottom;p&&(v.bottom+=p.props.height||sc.defaultProps.height),g&&n&&(v=$ne(v,i,r,n));var w=u-v.left-v.right,j=d-v.top-v.bottom;return de(de({brushBottom:x},v),{},{width:Math.max(w,0),height:Math.max(j,0)})},bfe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},nj=function(t){var n=t.chartName,r=t.GraphicalChild,i=t.defaultTooltipEventType,s=i===void 0?"axis":i,a=t.validateTooltipEventTypes,l=a===void 0?["axis"]:a,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(v,x){var w=x.graphicalItems,j=x.stackGroups,S=x.offset,k=x.updateId,N=x.dataStartIndex,P=x.dataEndIndex,A=v.barSize,C=v.layout,_=v.barGap,R=v.barCategoryGap,z=v.maxBarSize,M=xA(C),I=M.numericAxisName,$=M.cateAxisName,E=xfe(w),T=[];return w.forEach(function(D,H){var F=Fy(v.data,{graphicalItems:[D],dataStartIndex:N,dataEndIndex:P}),B=D.type.defaultProps!==void 0?de(de({},D.type.defaultProps),D.props):D.props,Z=B.dataKey,V=B.maxBarSize,G=B["".concat(I,"Id")],X=B["".concat($,"Id")],U={},ne=c.reduce(function(J,oe){var me=x["".concat(oe.axisType,"Map")],xe=B["".concat(oe.axisType,"Id")];me&&me[xe]||oe.axisType==="zAxis"||ho();var Re=me[xe];return de(de({},J),{},ze(ze({},oe.axisType,Re),"".concat(oe.axisType,"Ticks"),Zi(Re)))},U),q=ne[$],ie=ne["".concat($,"Ticks")],re=j&&j[G]&&j[G].hasStack&&Qne(D,j[G].stackGroups),ee=ts(D.type).indexOf("Bar")>=0,he=Mm(q,ie),fe=[],je=E&&Rne({barSize:A,stackGroups:j,totalSize:bfe(ne,$)});if(ee){var Se,Ce,Oe=Qe(V)?z:V,se=(Se=(Ce=Mm(q,ie,!0))!==null&&Ce!==void 0?Ce:Oe)!==null&&Se!==void 0?Se:0;fe=Mne({barGap:_,barCategoryGap:R,bandSize:se!==he?se:he,sizeList:je[X],maxBarSize:Oe}),se!==he&&(fe=fe.map(function(J){return de(de({},J),{},{position:de(de({},J.position),{},{offset:J.position.offset-se/2})})}))}var K=D&&D.type&&D.type.getComposedData;K&&T.push({props:de(de({},K(de(de({},ne),{},{displayedData:F,props:v,dataKey:Z,item:D,bandSize:he,barPosition:fe,offset:S,stackedData:re,layout:C,dataStartIndex:N,dataEndIndex:P}))),{},ze(ze(ze({key:D.key||"item-".concat(H)},I,ne[I]),$,ne[$]),"animationId",k)),childIndex:M7(D,v.children),item:D})}),T},p=function(v,x){var w=v.props,j=v.dataStartIndex,S=v.dataEndIndex,k=v.updateId;if(!_k({props:w}))return null;var N=w.children,P=w.layout,A=w.stackOffset,C=w.data,_=w.reverseStackOrder,R=xA(P),z=R.numericAxisName,M=R.cateAxisName,I=gr(N,r),$=Vne(C,I,"".concat(z,"Id"),"".concat(M,"Id"),A,_),E=c.reduce(function(B,Z){var V="".concat(Z.axisType,"Map");return de(de({},B),{},ze({},V,gfe(w,de(de({},Z),{},{graphicalItems:I,stackGroups:Z.axisType===z&&$,dataStartIndex:j,dataEndIndex:S}))))},{}),T=vfe(de(de({},E),{},{props:w,graphicalItems:I}),x==null?void 0:x.legendBBox);Object.keys(E).forEach(function(B){E[B]=d(w,E[B],T,B.replace("Map",""),n)});var D=E["".concat(M,"Map")],H=yfe(D),F=h(w,de(de({},E),{},{dataStartIndex:j,dataEndIndex:S,updateId:k,graphicalItems:I,stackGroups:$,offset:T}));return de(de({formattedGraphicalItems:F,graphicalItems:I,offset:T,stackGroups:$},H),E)},g=function(y){function v(x){var w,j,S;return Jde(this,v),S=nfe(this,v,[x]),ze(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ze(S,"accessibilityManager",new Fde),ze(S,"handleLegendBBoxUpdate",function(k){if(k){var N=S.state,P=N.dataStartIndex,A=N.dataEndIndex,C=N.updateId;S.setState(de({legendBBox:k},p({props:S.props,dataStartIndex:P,dataEndIndex:A,updateId:C},de(de({},S.state),{},{legendBBox:k}))))}}),ze(S,"handleReceiveSyncEvent",function(k,N,P){if(S.props.syncId===k){if(P===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(N)}}),ze(S,"handleBrushChange",function(k){var N=k.startIndex,P=k.endIndex;if(N!==S.state.dataStartIndex||P!==S.state.dataEndIndex){var A=S.state.updateId;S.setState(function(){return de({dataStartIndex:N,dataEndIndex:P},p({props:S.props,dataStartIndex:N,dataEndIndex:P,updateId:A},S.state))}),S.triggerSyncEvent({dataStartIndex:N,dataEndIndex:P})}}),ze(S,"handleMouseEnter",function(k){var N=S.getMouseInfo(k);if(N){var P=de(de({},N),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var A=S.props.onMouseEnter;He(A)&&A(P,k)}}),ze(S,"triggeredAfterMouseMove",function(k){var N=S.getMouseInfo(k),P=N?de(de({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(P),S.triggerSyncEvent(P);var A=S.props.onMouseMove;He(A)&&A(P,k)}),ze(S,"handleItemMouseEnter",function(k){S.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),ze(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),ze(S,"handleMouseMove",function(k){k.persist(),S.throttleTriggeredAfterMouseMove(k)}),ze(S,"handleMouseLeave",function(k){S.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};S.setState(N),S.triggerSyncEvent(N);var P=S.props.onMouseLeave;He(P)&&P(N,k)}),ze(S,"handleOuterEvent",function(k){var N=R7(k),P=mr(S.props,"".concat(N));if(N&&He(P)){var A,C;/.*touch.*/i.test(N)?C=S.getMouseInfo(k.changedTouches[0]):C=S.getMouseInfo(k),P((A=C)!==null&&A!==void 0?A:{},k)}}),ze(S,"handleClick",function(k){var N=S.getMouseInfo(k);if(N){var P=de(de({},N),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var A=S.props.onClick;He(A)&&A(P,k)}}),ze(S,"handleMouseDown",function(k){var N=S.props.onMouseDown;if(He(N)){var P=S.getMouseInfo(k);N(P,k)}}),ze(S,"handleMouseUp",function(k){var N=S.props.onMouseUp;if(He(N)){var P=S.getMouseInfo(k);N(P,k)}}),ze(S,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),ze(S,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&S.handleMouseDown(k.changedTouches[0])}),ze(S,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&S.handleMouseUp(k.changedTouches[0])}),ze(S,"handleDoubleClick",function(k){var N=S.props.onDoubleClick;if(He(N)){var P=S.getMouseInfo(k);N(P,k)}}),ze(S,"handleContextMenu",function(k){var N=S.props.onContextMenu;if(He(N)){var P=S.getMouseInfo(k);N(P,k)}}),ze(S,"triggerSyncEvent",function(k){S.props.syncId!==void 0&&r0.emit(i0,S.props.syncId,k,S.eventEmitterSymbol)}),ze(S,"applySyncEvent",function(k){var N=S.props,P=N.layout,A=N.syncMethod,C=S.state.updateId,_=k.dataStartIndex,R=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)S.setState(de({dataStartIndex:_,dataEndIndex:R},p({props:S.props,dataStartIndex:_,dataEndIndex:R,updateId:C},S.state)));else if(k.activeTooltipIndex!==void 0){var z=k.chartX,M=k.chartY,I=k.activeTooltipIndex,$=S.state,E=$.offset,T=$.tooltipTicks;if(!E)return;if(typeof A=="function")I=A(T,k);else if(A==="value"){I=-1;for(var D=0;D<T.length;D++)if(T[D].value===k.activeLabel){I=D;break}}var H=de(de({},E),{},{x:E.left,y:E.top}),F=Math.min(z,H.x+H.width),B=Math.min(M,H.y+H.height),Z=T[I]&&T[I].value,V=dw(S.state,S.props.data,I),G=T[I]?{x:P==="horizontal"?T[I].coordinate:F,y:P==="horizontal"?B:T[I].coordinate}:c$;S.setState(de(de({},k),{},{activeLabel:Z,activeCoordinate:G,activePayload:V,activeTooltipIndex:I}))}else S.setState(k)}),ze(S,"renderCursor",function(k){var N,P=S.state,A=P.isTooltipActive,C=P.activeCoordinate,_=P.activePayload,R=P.offset,z=P.activeTooltipIndex,M=P.tooltipAxisBandSize,I=S.getTooltipEventType(),$=(N=k.props.active)!==null&&N!==void 0?N:A,E=S.props.layout,T=k.key||"_recharts-cursor";return W.createElement(Vde,{key:T,activeCoordinate:C,activePayload:_,activeTooltipIndex:z,chartName:n,element:k,isActive:$,layout:E,offset:R,tooltipAxisBandSize:M,tooltipEventType:I})}),ze(S,"renderPolarAxis",function(k,N,P){var A=mr(k,"type.axisType"),C=mr(S.state,"".concat(A,"Map")),_=k.type.defaultProps,R=_!==void 0?de(de({},_),k.props):k.props,z=C&&C[R["".concat(A,"Id")]];return b.cloneElement(k,de(de({},z),{},{className:Ye(A,z.className),key:k.key||"".concat(N,"-").concat(P),ticks:Zi(z,!0)}))}),ze(S,"renderPolarGrid",function(k){var N=k.props,P=N.radialLines,A=N.polarAngles,C=N.polarRadius,_=S.state,R=_.radiusAxisMap,z=_.angleAxisMap,M=Rs(R),I=Rs(z),$=I.cx,E=I.cy,T=I.innerRadius,D=I.outerRadius;return b.cloneElement(k,{polarAngles:Array.isArray(A)?A:Zi(I,!0).map(function(H){return H.coordinate}),polarRadius:Array.isArray(C)?C:Zi(M,!0).map(function(H){return H.coordinate}),cx:$,cy:E,innerRadius:T,outerRadius:D,key:k.key||"polar-grid",radialLines:P})}),ze(S,"renderLegend",function(){var k=S.state.formattedGraphicalItems,N=S.props,P=N.children,A=N.width,C=N.height,_=S.props.margin||{},R=A-(_.left||0)-(_.right||0),z=BR({children:P,formattedGraphicalItems:k,legendWidth:R,legendContent:u});if(!z)return null;var M=z.item,I=pA(z,Kde);return b.cloneElement(M,de(de({},I),{},{chartWidth:A,chartHeight:C,margin:_,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),ze(S,"renderTooltip",function(){var k,N=S.props,P=N.children,A=N.accessibilityLayer,C=lr(P,cr);if(!C)return null;var _=S.state,R=_.isTooltipActive,z=_.activeCoordinate,M=_.activePayload,I=_.activeLabel,$=_.offset,E=(k=C.props.active)!==null&&k!==void 0?k:R;return b.cloneElement(C,{viewBox:de(de({},$),{},{x:$.left,y:$.top}),active:E,label:I,payload:E?M:[],coordinate:z,accessibilityLayer:A})}),ze(S,"renderBrush",function(k){var N=S.props,P=N.margin,A=N.data,C=S.state,_=C.offset,R=C.dataStartIndex,z=C.dataEndIndex,M=C.updateId;return b.cloneElement(k,{key:k.key||"_recharts-brush",onChange:kh(S.handleBrushChange,k.props.onChange),data:A,x:Pe(k.props.x)?k.props.x:_.left,y:Pe(k.props.y)?k.props.y:_.top+_.height+_.brushBottom-(P.bottom||0),width:Pe(k.props.width)?k.props.width:_.width,startIndex:R,endIndex:z,updateId:"brush-".concat(M)})}),ze(S,"renderReferenceElement",function(k,N,P){if(!k)return null;var A=S,C=A.clipPathId,_=S.state,R=_.xAxisMap,z=_.yAxisMap,M=_.offset,I=k.type.defaultProps||{},$=k.props,E=$.xAxisId,T=E===void 0?I.xAxisId:E,D=$.yAxisId,H=D===void 0?I.yAxisId:D;return b.cloneElement(k,{key:k.key||"".concat(N,"-").concat(P),xAxis:R[T],yAxis:z[H],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:C})}),ze(S,"renderActivePoints",function(k){var N=k.item,P=k.activePoint,A=k.basePoint,C=k.childIndex,_=k.isRange,R=[],z=N.props.key,M=N.item.type.defaultProps!==void 0?de(de({},N.item.type.defaultProps),N.item.props):N.item.props,I=M.activeDot,$=M.dataKey,E=de(de({index:C,dataKey:$,cx:P.x,cy:P.y,r:4,fill:WS(N.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Be(I,!1)),cm(I));return R.push(v.renderActiveDot(I,E,"".concat(z,"-activePoint-").concat(C))),A?R.push(v.renderActiveDot(I,de(de({},E),{},{cx:A.x,cy:A.y}),"".concat(z,"-basePoint-").concat(C))):_&&R.push(null),R}),ze(S,"renderGraphicChild",function(k,N,P){var A=S.filterFormatItem(k,N,P);if(!A)return null;var C=S.getTooltipEventType(),_=S.state,R=_.isTooltipActive,z=_.tooltipAxis,M=_.activeTooltipIndex,I=_.activeLabel,$=S.props.children,E=lr($,cr),T=A.props,D=T.points,H=T.isRange,F=T.baseLine,B=A.item.type.defaultProps!==void 0?de(de({},A.item.type.defaultProps),A.item.props):A.item.props,Z=B.activeDot,V=B.hide,G=B.activeBar,X=B.activeShape,U=!!(!V&&R&&E&&(Z||G||X)),ne={};C!=="axis"&&E&&E.props.trigger==="click"?ne={onClick:kh(S.handleItemMouseEnter,k.props.onClick)}:C!=="axis"&&(ne={onMouseLeave:kh(S.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:kh(S.handleItemMouseEnter,k.props.onMouseEnter)});var q=b.cloneElement(k,de(de({},A.props),ne));function ie(oe){return typeof z.dataKey=="function"?z.dataKey(oe.payload):null}if(U)if(M>=0){var re,ee;if(z.dataKey&&!z.allowDuplicatedCategory){var he=typeof z.dataKey=="function"?ie:"payload.".concat(z.dataKey.toString());re=lm(D,he,I),ee=H&&F&&lm(F,he,I)}else re=D==null?void 0:D[M],ee=H&&F&&F[M];if(X||G){var fe=k.props.activeIndex!==void 0?k.props.activeIndex:M;return[b.cloneElement(k,de(de(de({},A.props),ne),{},{activeIndex:fe})),null,null]}if(!Qe(re))return[q].concat(mc(S.renderActivePoints({item:A,activePoint:re,basePoint:ee,childIndex:M,isRange:H})))}else{var je,Se=(je=S.getItemByXY(S.state.activeCoordinate))!==null&&je!==void 0?je:{graphicalItem:q},Ce=Se.graphicalItem,Oe=Ce.item,se=Oe===void 0?k:Oe,K=Ce.childIndex,J=de(de(de({},A.props),ne),{},{activeIndex:K});return[b.cloneElement(se,J),null,null]}return H?[q,null,null]:[q,null]}),ze(S,"renderCustomized",function(k,N,P){return b.cloneElement(k,de(de({key:"recharts-customized-".concat(P)},S.props),S.state))}),ze(S,"renderMap",{CartesianGrid:{handler:_h,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:_h},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:_h},YAxis:{handler:_h},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((w=x.id)!==null&&w!==void 0?w:_c("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=FD(S.triggeredAfterMouseMove,(j=x.throttleDelay)!==null&&j!==void 0?j:1e3/60),S.state={},S}return sfe(v,y),tfe(v,[{key:"componentDidMount",value:function(){var w,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,j=w.children,S=w.data,k=w.height,N=w.layout,P=lr(j,cr);if(P){var A=P.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var C=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,_=dw(this.state,S,A,C),R=this.state.tooltipTicks[A].coordinate,z=(this.state.offset.top+k)/2,M=N==="horizontal",I=M?{x:R,y:z}:{y:R,x:z},$=this.state.formattedGraphicalItems.find(function(T){var D=T.item;return D.type.name==="Scatter"});$&&(I=de(de({},I),$.props.points[A].tooltipPosition),_=$.props.points[A].tooltipPayload);var E={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:C,activePayload:_,activeCoordinate:I};this.setState(E),this.renderCursor(P),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var S,k;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(w){Bv([lr(w.children,cr)],[lr(this.props.children,cr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=lr(this.props.children,cr);if(w&&typeof w.props.shared=="boolean"){var j=w.props.shared?"axis":"item";return l.indexOf(j)>=0?j:s}return s}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var j=this.container,S=j.getBoundingClientRect(),k=lZ(S),N={chartX:Math.round(w.pageX-k.left),chartY:Math.round(w.pageY-k.top)},P=S.width/j.offsetWidth||1,A=this.inRange(N.chartX,N.chartY,P);if(!A)return null;var C=this.state,_=C.xAxisMap,R=C.yAxisMap,z=this.getTooltipEventType();if(z!=="axis"&&_&&R){var M=Rs(_).scale,I=Rs(R).scale,$=M&&M.invert?M.invert(N.chartX):null,E=I&&I.invert?I.invert(N.chartY):null;return de(de({},N),{},{xValue:$,yValue:E})}var T=gA(this.state,this.props.data,this.props.layout,A);return T?de(de({},N),T):null}},{key:"inRange",value:function(w,j){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,N=w/S,P=j/S;if(k==="horizontal"||k==="vertical"){var A=this.state.offset,C=N>=A.left&&N<=A.left+A.width&&P>=A.top&&P<=A.top+A.height;return C?{x:N,y:P}:null}var _=this.state,R=_.angleAxisMap,z=_.radiusAxisMap;if(R&&z){var M=Rs(R);return U2({x:N,y:P},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,j=this.getTooltipEventType(),S=lr(w,cr),k={};S&&j==="axis"&&(S.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=cm(this.props,this.handleOuterEvent);return de(de({},N),k)}},{key:"addListener",value:function(){r0.on(i0,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){r0.removeListener(i0,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,j,S){for(var k=this.state.formattedGraphicalItems,N=0,P=k.length;N<P;N++){var A=k[N];if(A.item===w||A.props.key===w.key||j===ts(A.item.type)&&S===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,j=this.state.offset,S=j.left,k=j.top,N=j.height,P=j.width;return W.createElement("defs",null,W.createElement("clipPath",{id:w},W.createElement("rect",{x:S,y:k,height:N,width:P})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(j,S){var k=hA(S,2),N=k[0],P=k[1];return de(de({},j),{},ze({},N,P.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(j,S){var k=hA(S,2),N=k[0],P=k[1];return de(de({},j),{},ze({},N,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[w])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(w){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[w])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(w){var j=this.state,S=j.formattedGraphicalItems,k=j.activeItem;if(S&&S.length)for(var N=0,P=S.length;N<P;N++){var A=S[N],C=A.props,_=A.item,R=_.type.defaultProps!==void 0?de(de({},_.type.defaultProps),_.props):_.props,z=ts(_.type);if(z==="Bar"){var M=(C.data||[]).find(function(T){return Wse(w,T)});if(M)return{graphicalItem:A,payload:M}}else if(z==="RadialBar"){var I=(C.data||[]).find(function(T){return U2(w,T)});if(I)return{graphicalItem:A,payload:I}}else if(Oy(A,k)||Iy(A,k)||tf(A,k)){var $=Ooe({graphicalItem:A,activeTooltipItem:k,itemData:R.data}),E=R.activeIndex===void 0?$:R.activeIndex;return{graphicalItem:de(de({},A),{},{childIndex:E}),payload:tf(A,k)?R.data[$]:A.props.data[$]}}}return null}},{key:"render",value:function(){var w=this;if(!_k(this))return null;var j=this.props,S=j.children,k=j.className,N=j.width,P=j.height,A=j.style,C=j.compact,_=j.title,R=j.desc,z=pA(j,Qde),M=Be(z,!1);if(C)return W.createElement(GC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},W.createElement(zv,yl({},M,{width:N,height:P,title:_,desc:R}),this.renderClipPath(),Ok(S,this.renderMap)));if(this.props.accessibilityLayer){var I,$;M.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,M.role=($=this.props.role)!==null&&$!==void 0?$:"application",M.onKeyDown=function(T){w.accessibilityManager.keyboardEvent(T)},M.onFocus=function(){w.accessibilityManager.focus()}}var E=this.parseEventsOfWrapper();return W.createElement(GC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},W.createElement("div",yl({className:Ye("recharts-wrapper",k),style:de({position:"relative",cursor:"default",width:N,height:P},A)},E,{ref:function(D){w.container=D}}),W.createElement(zv,yl({},M,{width:N,height:P,title:_,desc:R,style:dfe}),this.renderClipPath(),Ok(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(b.Component);ze(g,"displayName",n),ze(g,"defaultProps",de({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),ze(g,"getDerivedStateFromProps",function(y,v){var x=y.dataKey,w=y.data,j=y.children,S=y.width,k=y.height,N=y.layout,P=y.stackOffset,A=y.margin,C=v.dataStartIndex,_=v.dataEndIndex;if(v.updateId===void 0){var R=yA(y);return de(de(de({},R),{},{updateId:0},p(de(de({props:y},R),{},{updateId:0}),v)),{},{prevDataKey:x,prevData:w,prevWidth:S,prevHeight:k,prevLayout:N,prevStackOffset:P,prevMargin:A,prevChildren:j})}if(x!==v.prevDataKey||w!==v.prevData||S!==v.prevWidth||k!==v.prevHeight||N!==v.prevLayout||P!==v.prevStackOffset||!Cl(A,v.prevMargin)){var z=yA(y),M={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},I=de(de({},gA(v,w,N)),{},{updateId:v.updateId+1}),$=de(de(de({},z),M),I);return de(de(de({},$),p(de({props:y},$),v)),{},{prevDataKey:x,prevData:w,prevWidth:S,prevHeight:k,prevLayout:N,prevStackOffset:P,prevMargin:A,prevChildren:j})}if(!Bv(j,v.prevChildren)){var E,T,D,H,F=lr(j,sc),B=F&&(E=(T=F.props)===null||T===void 0?void 0:T.startIndex)!==null&&E!==void 0?E:C,Z=F&&(D=(H=F.props)===null||H===void 0?void 0:H.endIndex)!==null&&D!==void 0?D:_,V=B!==C||Z!==_,G=!Qe(w),X=G&&!V?v.updateId:v.updateId+1;return de(de({updateId:X},p(de(de({props:y},v),{},{updateId:X,dataStartIndex:B,dataEndIndex:Z}),v)),{},{prevChildren:j,dataStartIndex:B,dataEndIndex:Z})}return null}),ze(g,"renderActiveDot",function(y,v,x){var w;return b.isValidElement(y)?w=b.cloneElement(y,v):He(y)?w=y(v):w=W.createElement(Cy,v),W.createElement(ot,{className:"recharts-active-dot",key:x},w)});var m=b.forwardRef(function(v,x){return W.createElement(g,yl({},v,{ref:x}))});return m.displayName=g.displayName,m},wfe=nj({chartName:"LineChart",GraphicalChild:zf,axisComponents:[{axisType:"xAxis",AxisComp:Lc},{axisType:"yAxis",AxisComp:Fc}],formatAxisMap:EM}),Sfe=nj({chartName:"BarChart",GraphicalChild:_o,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Lc},{axisType:"yAxis",AxisComp:Fc}],formatAxisMap:EM}),d$=nj({chartName:"PieChart",GraphicalChild:Mi,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ty},{axisType:"radiusAxis",AxisComp:Ey}],formatAxisMap:ire,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const jfe=()=>{const e=St(),[t,n]=b.useState(!0),[r,i]=b.useState(null),[s,a]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState({totalSales:0,totalRevenue:0,totalCustomers:0,totalProducts:0,todaysSales:0,todaysRevenue:0}),[f,h]=b.useState([]),[p,g]=b.useState([]),[m,y]=b.useState([]),[v,x]=b.useState([]),[w,j]=b.useState(null),[S,k]=b.useState(null),[N,P]=b.useState(null);if(b.useEffect(()=>{(async()=>{var _,R,z;try{n(!0),i(null);const M=new Date,I=M.getFullYear(),$=String(M.getMonth()+1).padStart(2,"0"),E=String(M.getDate()).padStart(2,"0"),T=`${I}-${$}-${E}`,[D,H,F,B,Z,V]=await Promise.all([Uo("/api/sales?limit=100"),Uo("/api/products?limit=1000"),Uo("/api/customers"),Uo("/api/sales?limit=1"),Uo(`/api/sales/daily-summary?startDate=1970-01-01&endDate=${T}`),Uo("/api/sales/today/summary")]);if(!D.ok||!H.ok||!F.ok||!B.ok||!Z.ok||!V.ok)throw new Error("Failed to fetch dashboard data");const[G,X,U,ne,q,ie]=await Promise.all([D.json(),H.json(),F.json(),B.json(),Z.json(),V.json()]);console.log("=== DASHBOARD DEBUG INFO ==="),console.log("Sales count:",Array.isArray(G)?G.length:((_=G==null?void 0:G.sales)==null?void 0:_.length)||0),console.log("Products count:",Array.isArray(X)?X.length:((R=X==null?void 0:X.products)==null?void 0:R.length)||0),console.log("Customers count:",Array.isArray(U)?U.length:0);let re=[];Array.isArray(G)?re=G:G&&Array.isArray(G.sales)?re=G.sales:G&&Array.isArray(G.data)&&(re=G.data),x(re);let ee=null;ne&&ne.pagination&&typeof ne.pagination.totalCount=="number"&&(ee=ne.pagination.totalCount),j(ee);let he=null;q&&q.data&&typeof q.data.totalSales=="number"&&(he=q.data.totalSales),k(he);let fe=null;ie&&ie.data&&typeof ie.data.totalSales=="number"&&(fe=ie.data.totalSales),P(fe);let je=[],Se=0;Array.isArray(X)?(je=X,Se=X.length):X&&Array.isArray(X.products)?(je=X.products,Se=X.total||X.products.length):X&&Array.isArray(X.data)&&(je=X.data,Se=X.total||X.data.length);let Ce=[];Array.isArray(U)?Ce=U:U&&Array.isArray(U.data)&&(Ce=U.data),console.log("=== FINAL COUNTS ==="),console.log("Processed sales count:",re.length),console.log("Processed products count:",je.length),console.log("Processed customers count:",Ce.length),re.length>0?console.log("Sample sale has",((z=re[0].saleitem)==null?void 0:z.length)||0,"items"):console.log("No sales found - check if you have sales data in your database");const Oe=re.reduce((ge,_e)=>ge+Number(_e.totalAmount||0),0),se=new Date().toDateString(),K=re.filter(ge=>new Date(ge.createdAt).toDateString()===se),J=K.reduce((ge,_e)=>ge+Number(_e.totalAmount||0),0);d({totalSales:re.length,totalRevenue:Oe,totalCustomers:Ce.length,totalProducts:Se,todaysSales:K.length,todaysRevenue:J});const oe=new Map;console.log("Processing sales for top products. Sales count:",re.length),re.forEach(ge=>{const _e=ge.saleitem||ge.saleItems||ge.items||[];console.log(`Sale ${ge.id} has ${_e.length} items`),Array.isArray(_e)&&_e.forEach(qe=>{var bt;const Ze=((bt=qe.product)==null?void 0:bt.name)||"Unknown Product",Ue=Number(qe.quantity||0),ut=Number(qe.price||0),Qt=oe.get(Ze)||{name:Ze,quantity:0,revenue:0};Qt.quantity+=Ue,Qt.revenue+=ut*Ue,oe.set(Ze,Qt),console.log(`Added ${Ue} of ${Ze} (price: ${ut})`)})}),console.log("Product sales map:",Array.from(oe.entries()));const me=Array.from(oe.values()).sort((ge,_e)=>_e.quantity-ge.quantity).slice(0,5);console.log("Top products array:",me),h(me);const xe=new Map;re.forEach(ge=>{var _e;if(ge.customer){const qe=ge.customer.id,Ze=xe.get(qe)||{name:ge.customer.name,total_purchases:0,phone:((_e=Ce.find(Ue=>Ue.id===qe))==null?void 0:_e.phone)||""};Ze.total_purchases+=Number(ge.totalAmount||0),xe.set(qe,Ze)}});const Re=Array.from(xe.values()).sort((ge,_e)=>_e.total_purchases-ge.total_purchases).slice(0,5);g(Re);const Te=re.sort((ge,_e)=>new Date(_e.createdAt).getTime()-new Date(ge.createdAt).getTime()).slice(0,10);y(Te)}catch(M){console.error("Error fetching dashboard data:",M),i(M instanceof Error?M.message:"Failed to load dashboard data")}finally{n(!1)}})()},[e]),t)return o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});if(r)return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[o.jsx("div",{className:"text-red-500 text-xl mb-4",children:"Error loading dashboard"}),o.jsx("div",{className:"text-gray-600 mb-4",children:r}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]});const A=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Sales"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w!==null?w:""})]}),o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow relative",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),o.jsx("button",{onClick:()=>a(!s),className:"p-1 hover:bg-gray-100 rounded",children:s?o.jsx(ia,{className:"w-4 h-4 text-gray-600"}):o.jsx(Pd,{className:"w-4 h-4 text-gray-600"})})]}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:s&&S!==null?`${S.toFixed(2)}`:"****.**"})]}),o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Today's Sales"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.todaysSales})]}),o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow relative",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Today's Revenue"}),o.jsx("button",{onClick:()=>c(!l),className:"p-1 hover:bg-gray-100 rounded",children:l?o.jsx(ia,{className:"w-4 h-4 text-gray-600"}):o.jsx(Pd,{className:"w-4 h-4 text-gray-600"})})]}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:l&&N!==null?`${N.toFixed(2)}`:"****.**"})]}),o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Customers"}),o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:u.totalCustomers})]}),o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),o.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:u.totalProducts})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Top Selling Products"}),f.length>0?o.jsx("div",{className:"h-80",children:o.jsx(EP,{width:"100%",height:"100%",children:o.jsxs(Sfe,{data:f,children:[o.jsx(tj,{strokeDasharray:"3 3"}),o.jsx(Lc,{dataKey:"name",tick:{fontSize:12},interval:0,angle:-45,textAnchor:"end",height:100}),o.jsx(Fc,{}),o.jsx(cr,{formatter:(C,_)=>[_==="quantity"?`${C} units`:`${C.toFixed(2)}`,_==="quantity"?"Quantity Sold":"Revenue"]}),o.jsx(_o,{dataKey:"quantity",fill:"#0088FE",name:"quantity"})]})})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-80 text-gray-500",children:[o.jsx("div",{className:"text-lg font-medium mb-2",children:"No sales data available"}),o.jsx("div",{className:"text-sm text-center",children:v.length===0?o.jsxs(o.Fragment,{children:["Make some sales to see analytics here.",o.jsx("br",{}),"Go to ",o.jsx("span",{className:"font-medium",children:"POS"})," to start making sales."]}):o.jsxs(o.Fragment,{children:["Found ",v.length," sales but no product data.",o.jsx("br",{}),"Check browser console for debugging information."]})})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Top 5 Customers by Revenue"}),p.length>0?o.jsx("div",{className:"h-80",children:o.jsx(EP,{width:"100%",height:"100%",children:o.jsxs(d$,{children:[o.jsx(Mi,{data:p,dataKey:"total_purchases",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:C,value:_})=>`${C}: ${Number(_).toFixed(2)}`,children:p.map((C,_)=>o.jsx(Rf,{fill:A[_%A.length]},`cell-${_}`))}),o.jsx(cr,{formatter:C=>[`${C.toFixed(2)}`,"Total Purchases"]}),o.jsx(ns,{})]})})}):o.jsx("div",{className:"flex items-center justify-center h-80 text-gray-500",children:"No customer data available"})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Sales"}),m.length>0?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale ID"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(C=>{var _;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",C.id]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((_=C.customer)==null?void 0:_.name)||"Walk-in Customer"}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(C.totalAmount||0).toFixed(2)]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(C.createdAt).toLocaleDateString()," ",new Date(C.createdAt).toLocaleTimeString()]})]},C.id)})})]})}):o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No recent sales found"})]})]})},Nfe=({isOpen:e,onClose:t,onSave:n,baseUnit:r,productId:i})=>{const[s,a]=b.useState([]),[l,c]=b.useState([]),[u,d]=b.useState({unitId:"",conversionRate:1,price:0,upc:""});b.useEffect(()=>{const p=async()=>{try{const m=await fetch("/api/units",{credentials:"include"});if(m.ok){const y=await m.json();c(y)}}catch(m){console.error("Error fetching units:",m)}},g=async()=>{if(i)try{const m=await fetch(`/api/products/${i}`,{credentials:"include"});if(m.ok){const y=await m.json();if(y.productunit){const v=y.productunit.map(x=>({unitId:x.unitId.toString(),conversionRate:x.conversionRate,price:x.price,upc:x.upc}));a(v)}}}catch(m){console.error("Error fetching existing conversions:",m)}};e&&(p(),g())},[e,i]);const f=()=>{if(!u.unitId){alert("Please select a unit");return}if(!u.conversionRate||u.conversionRate<=0){alert("Please enter a valid conversion rate greater than 0");return}if(!u.price||u.price<0){alert("Please enter a valid price");return}if(s.some(g=>g.unitId===u.unitId)){alert("This unit has already been added");return}const p={unitId:u.unitId.toString(),conversionRate:Number(u.conversionRate),price:Number(u.price),upc:u.upc||void 0};a(g=>[...g,p]),d({unitId:"",conversionRate:1,price:0,upc:""})},h=()=>{n(s),a([]),d({unitId:"",conversionRate:1,price:0,upc:""})};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-[800px] max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Product Units"}),o.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:o.jsx(Lt,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Base Unit - ",r]}),o.jsx("p",{className:"text-sm text-gray-600",children:"All conversions will be relative to this base unit"})]}),o.jsxs("div",{className:"space-y-4",children:[s.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h3",{className:"font-medium mb-2",children:"Current Conversions"}),o.jsx("div",{className:"space-y-2",children:s.map((p,g)=>{const m=l.find(y=>y.id.toString()===p.unitId);return o.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:(m==null?void 0:m.name)||"Unknown"}),o.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["1 ",r," = ",p.conversionRate," ",(m==null?void 0:m.name)||"units"]})]}),o.jsx("button",{onClick:()=>a(s.filter((y,v)=>v!==g)),className:"text-red-500 hover:text-red-700",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},g)})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Unit Conversion"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unit"}),o.jsxs("select",{value:u.unitId,onChange:p=>d({...u,unitId:p.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[o.jsx("option",{value:"",children:"Select Unit"}),l.map(p=>o.jsx("option",{value:p.id,children:p.name},p.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Conversion Rate"}),o.jsx("input",{type:"number",min:"0.0001",step:"0.0001",value:u.conversionRate,onChange:p=>d({...u,conversionRate:parseFloat(p.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Number of base units"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price"}),o.jsx("input",{type:"number",min:"0.01",step:"0.01",value:u.price,onChange:p=>d({...u,price:parseFloat(p.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"UPC (Optional)"}),o.jsx("input",{type:"text",value:u.upc||"",onChange:p=>d({...u,upc:p.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),o.jsx("div",{className:"mt-4",children:o.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Add Unit"})})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 border rounded-md text-gray-600 hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Save Changes"})]})]})]})}):null};var f$={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(Nu,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,l={},c=0,u={};function d(P){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(A){var C=S(A);C.chunkSize=parseInt(C.chunkSize),A.step||A.chunk||(C.chunkSize=null),this._handle=new m(C),(this._handle.streamer=this)._config=C}).call(this,P),this.parseChunk=function(A,C){var _=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<_){let z=this._config.newline;z||(R=this._config.quoteChar||'"',z=this._handle.guessLineEndings(A,R)),A=[...A.split(z).slice(_)].join(z)}this.isFirstChunk&&N(this._config.beforeFirstChunk)&&(R=this._config.beforeFirstChunk(A))!==void 0&&(A=R),this.isFirstChunk=!1,this._halted=!1;var _=this._partialLine+A,R=(this._partialLine="",this._handle.parse(_,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(A=R.meta.cursor,_=(this._finished||(this._partialLine=_.substring(A-this._baseIndex),this._baseIndex=A),R&&R.data&&(this._rowCount+=R.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:R,workerId:u.WORKER_ID,finished:_});else if(N(this._config.chunk)&&!C){if(this._config.chunk(R,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=R=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(R.data),this._completeResults.errors=this._completeResults.errors.concat(R.errors),this._completeResults.meta=R.meta),this._completed||!_||!N(this._config.complete)||R&&R.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),_||R&&R.meta.paused||this._nextChunk(),R}this._halted=!0},this._sendError=function(A){N(this._config.error)?this._config.error(A):a&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:A,finished:!1})}}function f(P){var A;(P=P||{}).chunkSize||(P.chunkSize=u.RemoteChunkSize),d.call(this,P),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(C){this._input=C,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(A=new XMLHttpRequest,this._config.withCredentials&&(A.withCredentials=this._config.withCredentials),s||(A.onload=k(this._chunkLoaded,this),A.onerror=k(this._chunkError,this)),A.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var C,_=this._config.downloadRequestHeaders;for(C in _)A.setRequestHeader(C,_[C])}var R;this._config.chunkSize&&(R=this._start+this._config.chunkSize-1,A.setRequestHeader("Range","bytes="+this._start+"-"+R));try{A.send(this._config.downloadRequestBody)}catch(z){this._chunkError(z.message)}s&&A.status===0&&this._chunkError()}},this._chunkLoaded=function(){A.readyState===4&&(A.status<200||400<=A.status?this._chunkError():(this._start+=this._config.chunkSize||A.responseText.length,this._finished=!this._config.chunkSize||this._start>=(C=>(C=C.getResponseHeader("Content-Range"))!==null?parseInt(C.substring(C.lastIndexOf("/")+1)):-1)(A),this.parseChunk(A.responseText)))},this._chunkError=function(C){C=A.statusText||C,this._sendError(new Error(C))}}function h(P){(P=P||{}).chunkSize||(P.chunkSize=u.LocalChunkSize),d.call(this,P);var A,C,_=typeof FileReader<"u";this.stream=function(R){this._input=R,C=R.slice||R.webkitSlice||R.mozSlice,_?((A=new FileReader).onload=k(this._chunkLoaded,this),A.onerror=k(this._chunkError,this)):A=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var R=this._input,z=(this._config.chunkSize&&(z=Math.min(this._start+this._config.chunkSize,this._input.size),R=C.call(R,this._start,z)),A.readAsText(R,this._config.encoding));_||this._chunkLoaded({target:{result:z}})},this._chunkLoaded=function(R){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(R.target.result)},this._chunkError=function(){this._sendError(A.error)}}function p(P){var A;d.call(this,P=P||{}),this.stream=function(C){return A=C,this._nextChunk()},this._nextChunk=function(){var C,_;if(!this._finished)return C=this._config.chunkSize,A=C?(_=A.substring(0,C),A.substring(C)):(_=A,""),this._finished=!A,this.parseChunk(_)}}function g(P){d.call(this,P=P||{});var A=[],C=!0,_=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(R){this._input=R,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){_&&A.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),A.length?this.parseChunk(A.shift()):C=!0},this._streamData=k(function(R){try{A.push(typeof R=="string"?R:R.toString(this._config.encoding)),C&&(C=!1,this._checkIsFinished(),this.parseChunk(A.shift()))}catch(z){this._streamError(z)}},this),this._streamError=k(function(R){this._streamCleanUp(),this._sendError(R)},this),this._streamEnd=k(function(){this._streamCleanUp(),_=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(P){var A,C,_,R,z=Math.pow(2,53),M=-z,I=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,$=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,E=this,T=0,D=0,H=!1,F=!1,B=[],Z={data:[],errors:[],meta:{}};function V(ne){return P.skipEmptyLines==="greedy"?ne.join("").trim()==="":ne.length===1&&ne[0].length===0}function G(){if(Z&&_&&(U("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),_=!1),P.skipEmptyLines&&(Z.data=Z.data.filter(function(ee){return!V(ee)})),X()){let ee=function(he,fe){N(P.transformHeader)&&(he=P.transformHeader(he,fe)),B.push(he)};var re=ee;if(Z)if(Array.isArray(Z.data[0])){for(var ne=0;X()&&ne<Z.data.length;ne++)Z.data[ne].forEach(ee);Z.data.splice(0,1)}else Z.data.forEach(ee)}function q(ee,he){for(var fe=P.header?{}:[],je=0;je<ee.length;je++){var Se=je,Ce=ee[je],Ce=((Oe,se)=>(K=>(P.dynamicTypingFunction&&P.dynamicTyping[K]===void 0&&(P.dynamicTyping[K]=P.dynamicTypingFunction(K)),(P.dynamicTyping[K]||P.dynamicTyping)===!0))(Oe)?se==="true"||se==="TRUE"||se!=="false"&&se!=="FALSE"&&((K=>{if(I.test(K)&&(K=parseFloat(K),M<K&&K<z))return 1})(se)?parseFloat(se):$.test(se)?new Date(se):se===""?null:se):se)(Se=P.header?je>=B.length?"__parsed_extra":B[je]:Se,Ce=P.transform?P.transform(Ce,Se):Ce);Se==="__parsed_extra"?(fe[Se]=fe[Se]||[],fe[Se].push(Ce)):fe[Se]=Ce}return P.header&&(je>B.length?U("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+je,D+he):je<B.length&&U("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+je,D+he)),fe}var ie;Z&&(P.header||P.dynamicTyping||P.transform)&&(ie=1,!Z.data.length||Array.isArray(Z.data[0])?(Z.data=Z.data.map(q),ie=Z.data.length):Z.data=q(Z.data,0),P.header&&Z.meta&&(Z.meta.fields=B),D+=ie)}function X(){return P.header&&B.length===0}function U(ne,q,ie,re){ne={type:ne,code:q,message:ie},re!==void 0&&(ne.row=re),Z.errors.push(ne)}N(P.step)&&(R=P.step,P.step=function(ne){Z=ne,X()?G():(G(),Z.data.length!==0&&(T+=ne.data.length,P.preview&&T>P.preview?C.abort():(Z.data=Z.data[0],R(Z,E))))}),this.parse=function(ne,q,ie){var re=P.quoteChar||'"',re=(P.newline||(P.newline=this.guessLineEndings(ne,re)),_=!1,P.delimiter?N(P.delimiter)&&(P.delimiter=P.delimiter(ne),Z.meta.delimiter=P.delimiter):((re=((ee,he,fe,je,Se)=>{var Ce,Oe,se,K;Se=Se||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var J=0;J<Se.length;J++){for(var oe,me=Se[J],xe=0,Re=0,Te=0,ge=(se=void 0,new v({comments:je,delimiter:me,newline:he,preview:10}).parse(ee)),_e=0;_e<ge.data.length;_e++)fe&&V(ge.data[_e])?Te++:(oe=ge.data[_e].length,Re+=oe,se===void 0?se=oe:0<oe&&(xe+=Math.abs(oe-se),se=oe));0<ge.data.length&&(Re/=ge.data.length-Te),(Oe===void 0||xe<=Oe)&&(K===void 0||K<Re)&&1.99<Re&&(Oe=xe,Ce=me,K=Re)}return{successful:!!(P.delimiter=Ce),bestDelimiter:Ce}})(ne,P.newline,P.skipEmptyLines,P.comments,P.delimitersToGuess)).successful?P.delimiter=re.bestDelimiter:(_=!0,P.delimiter=u.DefaultDelimiter),Z.meta.delimiter=P.delimiter),S(P));return P.preview&&P.header&&re.preview++,A=ne,C=new v(re),Z=C.parse(A,q,ie),G(),H?{meta:{paused:!0}}:Z||{meta:{paused:!1}}},this.paused=function(){return H},this.pause=function(){H=!0,C.abort(),A=N(P.chunk)?"":A.substring(C.getCharIndex())},this.resume=function(){E.streamer._halted?(H=!1,E.streamer.parseChunk(A,!0)):setTimeout(E.resume,3)},this.aborted=function(){return F},this.abort=function(){F=!0,C.abort(),Z.meta.aborted=!0,N(P.complete)&&P.complete(Z),A=""},this.guessLineEndings=function(ee,re){ee=ee.substring(0,1048576);var re=new RegExp(y(re)+"([^]*?)"+y(re),"gm"),ie=(ee=ee.replace(re,"")).split("\r"),re=ee.split(`
`),ee=1<re.length&&re[0].length<ie[0].length;if(ie.length===1||ee)return`
`;for(var he=0,fe=0;fe<ie.length;fe++)ie[fe][0]===`
`&&he++;return he>=ie.length/2?`\r
`:"\r"}}function y(P){return P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(P){var A=(P=P||{}).delimiter,C=P.newline,_=P.comments,R=P.step,z=P.preview,M=P.fastMode,I=null,$=!1,E=P.quoteChar==null?'"':P.quoteChar,T=E;if(P.escapeChar!==void 0&&(T=P.escapeChar),(typeof A!="string"||-1<u.BAD_DELIMITERS.indexOf(A))&&(A=","),_===A)throw new Error("Comment character same as delimiter");_===!0?_="#":(typeof _!="string"||-1<u.BAD_DELIMITERS.indexOf(_))&&(_=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var D=0,H=!1;this.parse=function(F,B,Z){if(typeof F!="string")throw new Error("Input must be a string");var V=F.length,G=A.length,X=C.length,U=_.length,ne=N(R),q=[],ie=[],re=[],ee=D=0;if(!F)return xe();if(M||M!==!1&&F.indexOf(E)===-1){for(var he=F.split(C),fe=0;fe<he.length;fe++){if(re=he[fe],D+=re.length,fe!==he.length-1)D+=C.length;else if(Z)return xe();if(!_||re.substring(0,U)!==_){if(ne){if(q=[],K(re.split(A)),Re(),H)return xe()}else K(re.split(A));if(z&&z<=fe)return q=q.slice(0,z),xe(!0)}}return xe()}for(var je=F.indexOf(A,D),Se=F.indexOf(C,D),Ce=new RegExp(y(T)+y(E),"g"),Oe=F.indexOf(E,D);;)if(F[D]===E)for(Oe=D,D++;;){if((Oe=F.indexOf(E,Oe+1))===-1)return Z||ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:q.length,index:D}),oe();if(Oe===V-1)return oe(F.substring(D,Oe).replace(Ce,E));if(E===T&&F[Oe+1]===T)Oe++;else if(E===T||Oe===0||F[Oe-1]!==T){je!==-1&&je<Oe+1&&(je=F.indexOf(A,Oe+1));var se=J((Se=Se!==-1&&Se<Oe+1?F.indexOf(C,Oe+1):Se)===-1?je:Math.min(je,Se));if(F.substr(Oe+1+se,G)===A){re.push(F.substring(D,Oe).replace(Ce,E)),F[D=Oe+1+se+G]!==E&&(Oe=F.indexOf(E,D)),je=F.indexOf(A,D),Se=F.indexOf(C,D);break}if(se=J(Se),F.substring(Oe+1+se,Oe+1+se+X)===C){if(re.push(F.substring(D,Oe).replace(Ce,E)),me(Oe+1+se+X),je=F.indexOf(A,D),Oe=F.indexOf(E,D),ne&&(Re(),H))return xe();if(z&&q.length>=z)return xe(!0);break}ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:q.length,index:D}),Oe++}}else if(_&&re.length===0&&F.substring(D,D+U)===_){if(Se===-1)return xe();D=Se+X,Se=F.indexOf(C,D),je=F.indexOf(A,D)}else if(je!==-1&&(je<Se||Se===-1))re.push(F.substring(D,je)),D=je+G,je=F.indexOf(A,D);else{if(Se===-1)break;if(re.push(F.substring(D,Se)),me(Se+X),ne&&(Re(),H))return xe();if(z&&q.length>=z)return xe(!0)}return oe();function K(Te){q.push(Te),ee=D}function J(Te){var ge=0;return ge=Te!==-1&&(Te=F.substring(Oe+1,Te))&&Te.trim()===""?Te.length:ge}function oe(Te){return Z||(Te===void 0&&(Te=F.substring(D)),re.push(Te),D=V,K(re),ne&&Re()),xe()}function me(Te){D=Te,K(re),re=[],Se=F.indexOf(C,D)}function xe(Te){if(P.header&&!B&&q.length&&!$){var ge=q[0],_e={},qe=new Set(ge);let Ze=!1;for(let Ue=0;Ue<ge.length;Ue++){let ut=ge[Ue];if(_e[ut=N(P.transformHeader)?P.transformHeader(ut,Ue):ut]){let Qt,bt=_e[ut];for(;Qt=ut+"_"+bt,bt++,qe.has(Qt););qe.add(Qt),ge[Ue]=Qt,_e[ut]++,Ze=!0,(I=I===null?{}:I)[Qt]=ut}else _e[ut]=1,ge[Ue]=ut;qe.add(ut)}Ze&&console.warn("Duplicate headers found and renamed."),$=!0}return{data:q,errors:ie,meta:{delimiter:A,linebreak:C,aborted:H,truncated:!!Te,cursor:ee+(B||0),renamedHeaders:I}}}function Re(){R(xe()),q=[],ie=[]}},this.abort=function(){H=!0},this.getCharIndex=function(){return D}}function x(P){var A=P.data,C=l[A.workerId],_=!1;if(A.error)C.userError(A.error,A.file);else if(A.results&&A.results.data){var R={abort:function(){_=!0,w(A.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(N(C.userStep)){for(var z=0;z<A.results.data.length&&(C.userStep({data:A.results.data[z],errors:A.results.errors,meta:A.results.meta},R),!_);z++);delete A.results}else N(C.userChunk)&&(C.userChunk(A.results,R,A.file),delete A.results)}A.finished&&!_&&w(A.workerId,A.results)}function w(P,A){var C=l[P];N(C.userComplete)&&C.userComplete(A),C.terminate(),delete l[P]}function j(){throw new Error("Not implemented.")}function S(P){if(typeof P!="object"||P===null)return P;var A,C=Array.isArray(P)?[]:{};for(A in P)C[A]=S(P[A]);return C}function k(P,A){return function(){P.apply(A,arguments)}}function N(P){return typeof P=="function"}return u.parse=function(P,A){var C=(A=A||{}).dynamicTyping||!1;if(N(C)&&(A.dynamicTypingFunction=C,C={}),A.dynamicTyping=C,A.transform=!!N(A.transform)&&A.transform,!A.worker||!u.WORKERS_SUPPORTED)return C=null,u.NODE_STREAM_INPUT,typeof P=="string"?(P=(_=>_.charCodeAt(0)!==65279?_:_.slice(1))(P),C=new(A.download?f:p)(A)):P.readable===!0&&N(P.read)&&N(P.on)?C=new g(A):(r.File&&P instanceof File||P instanceof Object)&&(C=new h(A)),C.stream(P);(C=(()=>{var _;return!!u.WORKERS_SUPPORTED&&(_=(()=>{var R=r.URL||r.webkitURL||null,z=n.toString();return u.BLOB_URL||(u.BLOB_URL=R.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",z,")();"],{type:"text/javascript"})))})(),(_=new r.Worker(_)).onmessage=x,_.id=c++,l[_.id]=_)})()).userStep=A.step,C.userChunk=A.chunk,C.userComplete=A.complete,C.userError=A.error,A.step=N(A.step),A.chunk=N(A.chunk),A.complete=N(A.complete),A.error=N(A.error),delete A.worker,C.postMessage({input:P,config:A,workerId:C.id})},u.unparse=function(P,A){var C=!1,_=!0,R=",",z=`\r
`,M='"',I=M+M,$=!1,E=null,T=!1,D=((()=>{if(typeof A=="object"){if(typeof A.delimiter!="string"||u.BAD_DELIMITERS.filter(function(B){return A.delimiter.indexOf(B)!==-1}).length||(R=A.delimiter),typeof A.quotes!="boolean"&&typeof A.quotes!="function"&&!Array.isArray(A.quotes)||(C=A.quotes),typeof A.skipEmptyLines!="boolean"&&typeof A.skipEmptyLines!="string"||($=A.skipEmptyLines),typeof A.newline=="string"&&(z=A.newline),typeof A.quoteChar=="string"&&(M=A.quoteChar),typeof A.header=="boolean"&&(_=A.header),Array.isArray(A.columns)){if(A.columns.length===0)throw new Error("Option columns is empty");E=A.columns}A.escapeChar!==void 0&&(I=A.escapeChar+M),A.escapeFormulae instanceof RegExp?T=A.escapeFormulae:typeof A.escapeFormulae=="boolean"&&A.escapeFormulae&&(T=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(M),"g"));if(typeof P=="string"&&(P=JSON.parse(P)),Array.isArray(P)){if(!P.length||Array.isArray(P[0]))return H(null,P,$);if(typeof P[0]=="object")return H(E||Object.keys(P[0]),P,$)}else if(typeof P=="object")return typeof P.data=="string"&&(P.data=JSON.parse(P.data)),Array.isArray(P.data)&&(P.fields||(P.fields=P.meta&&P.meta.fields||E),P.fields||(P.fields=Array.isArray(P.data[0])?P.fields:typeof P.data[0]=="object"?Object.keys(P.data[0]):[]),Array.isArray(P.data[0])||typeof P.data[0]=="object"||(P.data=[P.data])),H(P.fields||[],P.data||[],$);throw new Error("Unable to serialize unrecognized input");function H(B,Z,V){var G="",X=(typeof B=="string"&&(B=JSON.parse(B)),typeof Z=="string"&&(Z=JSON.parse(Z)),Array.isArray(B)&&0<B.length),U=!Array.isArray(Z[0]);if(X&&_){for(var ne=0;ne<B.length;ne++)0<ne&&(G+=R),G+=F(B[ne],ne);0<Z.length&&(G+=z)}for(var q=0;q<Z.length;q++){var ie=(X?B:Z[q]).length,re=!1,ee=X?Object.keys(Z[q]).length===0:Z[q].length===0;if(V&&!X&&(re=V==="greedy"?Z[q].join("").trim()==="":Z[q].length===1&&Z[q][0].length===0),V==="greedy"&&X){for(var he=[],fe=0;fe<ie;fe++){var je=U?B[fe]:fe;he.push(Z[q][je])}re=he.join("").trim()===""}if(!re){for(var Se=0;Se<ie;Se++){0<Se&&!ee&&(G+=R);var Ce=X&&U?B[Se]:Se;G+=F(Z[q][Ce],Se)}q<Z.length-1&&(!V||0<ie&&!ee)&&(G+=z)}}return G}function F(B,Z){var V,G;return B==null?"":B.constructor===Date?JSON.stringify(B).slice(1,25):(G=!1,T&&typeof B=="string"&&T.test(B)&&(B="'"+B,G=!0),V=B.toString().replace(D,I),(G=G||C===!0||typeof C=="function"&&C(B,Z)||Array.isArray(C)&&C[Z]||((X,U)=>{for(var ne=0;ne<U.length;ne++)if(-1<X.indexOf(U[ne]))return!0;return!1})(V,u.BAD_DELIMITERS)||-1<V.indexOf(R)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?M+V+M:V)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!s&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=v,u.ParserHandle=m,u.NetworkStreamer=f,u.FileStreamer=h,u.StringStreamer=p,u.ReadableStreamStreamer=g,r.jQuery&&((i=r.jQuery).fn.parse=function(P){var A=P.config||{},C=[];return this.each(function(z){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var M=0;M<this.files.length;M++)C.push({file:this.files[M],inputElem:this,instanceConfig:i.extend({},A)})}),_(),this;function _(){if(C.length===0)N(P.complete)&&P.complete();else{var z,M,I,$,E=C[0];if(N(P.before)){var T=P.before(E.file,E.inputElem);if(typeof T=="object"){if(T.action==="abort")return z="AbortError",M=E.file,I=E.inputElem,$=T.reason,void(N(P.error)&&P.error({name:z},M,I,$));if(T.action==="skip")return void R();typeof T.config=="object"&&(E.instanceConfig=i.extend(E.instanceConfig,T.config))}else if(T==="skip")return void R()}var D=E.instanceConfig.complete;E.instanceConfig.complete=function(H){N(D)&&D(H,E.file,E.inputElem),R()},u.parse(E.file,E.instanceConfig)}}function R(){C.splice(0,1),_()}}),a&&(r.onmessage=function(P){P=P.data,u.WORKER_ID===void 0&&P&&(u.WORKER_ID=P.workerId),typeof P.input=="string"?r.postMessage({workerId:u.WORKER_ID,results:u.parse(P.input,P.config),finished:!0}):(r.File&&P.input instanceof File||P.input instanceof Object)&&(P=u.parse(P.input,P.config))&&r.postMessage({workerId:u.WORKER_ID,results:P,finished:!0})}),(f.prototype=Object.create(d.prototype)).constructor=f,(h.prototype=Object.create(d.prototype)).constructor=h,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(d.prototype)).constructor=g,u})})(f$);var kfe=f$.exports;const h$=ct(kfe),Pfe=()=>{const e=["name","description","purchasePrice","wholesalePrice","retailPrice","stock","categoryId","baseUnitId"],t=[{name:"Sample Product",description:"Sample product description",purchasePrice:10,wholesalePrice:15,retailPrice:20,stock:100,categoryId:1,baseUnitId:1}],n=h$.unparse({fields:e,data:t});return["# CSV Import Template for Products","# Instructions:","# - categoryId: Must be a valid category ID from your database","# - baseUnitId: Must be a valid unit ID from your database","# - Prices can be 0.00 or any positive number","# - Stock can be 0 or any positive number","# - Remove these comment lines before importing",""].join(`
`)+n},Cfe=e=>new Promise((t,n)=>{h$.parse(e,{header:!0,skipEmptyLines:!0,transform:r=>r.trim(),complete:r=>{try{if(r.errors.length>0){n(new Error(`CSV parsing errors: ${r.errors.map(s=>s.message).join(", ")}`));return}const i=r.data.map(s=>({name:s.name,description:s.description||"",purchasePrice:parseFloat(s.purchasePrice),wholesalePrice:parseFloat(s.wholesalePrice),retailPrice:parseFloat(s.retailPrice),stock:parseInt(s.stock),categoryId:parseInt(s.categoryId),baseUnitId:parseInt(s.baseUnitId)}));t(i)}catch{n(new Error("Failed to parse CSV data. Please check the file format."))}},error:r=>{n(new Error(`CSV parsing error: ${r.message}`))}})}),Afe=(e,t,n)=>{const r=[];return e.forEach((i,s)=>{const a=s+1;(!i.name||i.name.trim()==="")&&r.push(`Row ${a}: Name is required`),(isNaN(i.purchasePrice)||i.purchasePrice<0)&&r.push(`Row ${a}: Invalid purchase price (${i.purchasePrice})`),(isNaN(i.wholesalePrice)||i.wholesalePrice<0)&&r.push(`Row ${a}: Invalid wholesale price (${i.wholesalePrice})`),(isNaN(i.retailPrice)||i.retailPrice<0)&&r.push(`Row ${a}: Invalid retail price (${i.retailPrice})`),(isNaN(i.stock)||i.stock<0)&&r.push(`Row ${a}: Invalid stock quantity (${i.stock})`),(!i.categoryId||isNaN(i.categoryId)||i.categoryId<=0)&&r.push(`Row ${a}: Invalid category ID (${i.categoryId})`),(!i.baseUnitId||isNaN(i.baseUnitId)||i.baseUnitId<=0)&&r.push(`Row ${a}: Invalid base unit ID (${i.baseUnitId})`),t&&t.length>0&&(t.some(c=>c.id===i.categoryId)||r.push(`Row ${a}: Category ID ${i.categoryId} does not exist`)),n&&n.length>0&&(n.some(c=>c.id===i.baseUnitId)||r.push(`Row ${a}: Base Unit ID ${i.baseUnitId} does not exist`))}),r},Efe=()=>{var $;const[e,t]=b.useState([]),[n,r]=b.useState([]),[i,s]=b.useState([]),[a,l]=b.useState(!0),[c,u]=b.useState(!1),[d,f]=b.useState(!1),[h,p]=b.useState(null),[g,m]=b.useState(""),[y,v]=b.useState(""),[x,w]=b.useState(1),[j,S]=b.useState(1),k=30,[N,P]=b.useState({name:"",description:"",purchase_price:"",wholesale_price:"",retail_price:"",stock_quantity:"",base_unit_id:"",category_id:"",units:[]});b.useEffect(()=>{const E=setTimeout(()=>{v(g),w(1)},300);return()=>clearTimeout(E)},[g]);const A=b.useCallback(async()=>{try{if(l(!0),n.length===0||i.length===0){const[B,Z]=await Promise.all([pe("/api/categories"),pe("/api/units")]);if(B.ok){const V=await B.json();r(V)}if(Z.ok){const V=await Z.json();s(V)}}const E=new URLSearchParams({page:x.toString(),limit:k.toString(),showInactive:"true",...y&&{search:y}}),T=await pe(`/api/products?${E}`);if(!T.ok){if(T.status===401){window.location.href="/login";return}try{const B=await T.json();console.error("Error fetching products:",B),B.received?alert(`Error: ${B.error||B.message}
Received: ${JSON.stringify(B.received)}`):alert(B.error||B.message||"Failed to fetch products")}catch(B){console.error("Failed to parse error response:",B),alert(`Failed to fetch products: ${T.statusText}`)}return}const D=await T.json();if(!D||typeof D!="object"){alert("Invalid response format from server");return}const{products:H=[],totalPages:F=1}=D;t(Array.isArray(H)?H:[]),S(Math.max(1,F)),x>F&&F>0&&w(1)}catch(E){console.error("Error fetching data:",E)}finally{l(!1)}},[x,y,n.length,i.length]);b.useEffect(()=>{A()},[A]);const C=b.useMemo(()=>e,[e]),_=b.useCallback(E=>{w(E),window.scrollTo(0,0)},[]),R=b.useCallback(E=>{p(E),P({name:E.name,description:E.description||"",purchase_price:E.purchasePrice.toString(),wholesale_price:E.wholesalePrice.toString(),retail_price:E.retailPrice.toString(),stock_quantity:E.stock.toString(),base_unit_id:E.baseUnitId.toString(),category_id:E.categoryId.toString(),units:E.productunit?E.productunit.map(T=>({unitId:T.unitId,conversionRate:T.conversionRate,price:T.price,upc:T.upc})):[]}),u(!0)},[]),z=async E=>{E.preventDefault();try{const T=[];if(N.name.trim()||T.push("Product name is required"),N.purchase_price||T.push("Purchase price is required"),N.retail_price||T.push("Retail price is required"),N.wholesale_price||T.push("Wholesale price is required"),N.stock_quantity||T.push("Stock quantity is required"),N.base_unit_id||T.push("Base unit is required"),N.category_id||T.push("Category is required"),[{value:N.purchase_price,name:"Purchase price"},{value:N.wholesale_price,name:"Wholesale price"},{value:N.retail_price,name:"Retail price"},{value:N.stock_quantity,name:"Stock quantity"}].forEach(G=>{const X=parseFloat(G.value);(isNaN(X)||X<0)&&T.push(`${G.name} must be a valid positive number`)}),T.length>0){alert(`Please fix the following errors:
`+T.join(`
`));return}const H={name:N.name.trim(),description:N.description.trim()||null,purchasePrice:parseFloat(N.purchase_price),wholesalePrice:parseFloat(N.wholesale_price),retailPrice:parseFloat(N.retail_price),stock:parseFloat(N.stock_quantity),categoryId:parseInt(N.category_id),baseUnitId:parseInt(N.base_unit_id),units:N.units.map(G=>({unitId:Number(G.unitId),conversionRate:Number(G.conversionRate),price:Number(G.price),upc:G.upc||null}))};console.log("Sending product data:",JSON.stringify(H,null,2));const F=h?`/api/products/${h.id}`:"/api/products",B=h?"PUT":"POST";console.log("Sending product data:",H),l(!0);const Z=await pe(F,{method:B,headers:{"Content-Type":"application/json"},body:JSON.stringify(H)});let V;try{V=await Z.json()}catch(G){throw console.error("Failed to parse response:",G),new Error("Failed to parse server response")}if(!Z.ok)throw console.error("Server error response:",V),new Error(V.message||`Failed to ${h?"update":"create"} product`);h?(t(G=>G.map(X=>X.id===h.id?V:X)),P(G=>({...G,units:V.productunit.map(X=>({unitId:X.unitId,conversionRate:X.conversionRate,price:X.price,upc:X.upc}))}))):t(G=>[...G,V]),alert(`Successfully ${h?"updated":"created"} product: ${H.name}`),l(!1),u(!1),p(null),P({name:"",description:"",purchase_price:"",wholesale_price:"",retail_price:"",stock_quantity:"",base_unit_id:"",category_id:"",units:[]})}catch(T){console.error("Error saving product:",T),alert(T instanceof Error?T.message:"Failed to save product")}},M=async E=>{try{console.log("Saving units:",E);const T=E.map(F=>({unitId:Number(F.unitId),conversionRate:Number(F.conversionRate),price:Number(F.price),upc:F.upc||null}));if(!h){P(F=>({...F,units:T})),f(!1);return}const D=await pe(`/api/products/${h.id}/units`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({units:T})});if(!D.ok)throw new Error("Failed to update product units");const H=await D.json();t(F=>F.map(B=>B.id===H.id?H:B)),p(H),P(F=>({...F,units:H.productunit.map(B=>({unitId:B.unitId,conversionRate:B.conversionRate,price:B.price,upc:B.upc}))})),f(!1)}catch(T){console.error("Error saving units:",T),alert("Failed to save product units")}},I=async()=>{if(!window.confirm(`Are you sure you want to delete ALL products?

This action cannot be undone and will permanently remove all products from the database.`))return;if(window.prompt('To confirm deletion of ALL products, please type "DELETE ALL" (case sensitive):')!=="DELETE ALL"){alert('Deletion cancelled. You must type "DELETE ALL" exactly to confirm.');return}try{l(!0);const D=await pe("/api/products/delete-all",{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!D.ok){const F=await D.json();throw new Error(F.message||"Failed to delete all products")}const H=await D.json();t([]),w(1),S(1),alert(`Successfully deleted ${H.count||"all"} products.`)}catch(D){console.error("Error deleting all products:",D),alert(D instanceof Error?D.message:"Failed to delete all products. Please try again.")}finally{l(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Products"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:async E=>{var D,H,F;const T=(D=E.target.files)==null?void 0:D[0];if(T){l(!0);try{const B=await Cfe(T),Z=Afe(B,n,i);if(Z.length>0){const U=`CSV validation errors:

`+Z.join(`
`)+`

Please check your CSV file and ensure:
- All category IDs exist in your database
- All base unit IDs exist in your database
- All numeric values are valid`;console.error(U),alert(U);return}const V=B.map(U=>({name:U.name,description:U.description,purchasePrice:U.purchasePrice,wholesalePrice:U.wholesalePrice,retailPrice:U.retailPrice,stock:U.stock,categoryId:U.categoryId,baseUnitId:U.baseUnitId,units:[]})),G=await pe("/api/products/bulk",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({products:V})});if(!G.ok){const U=await G.text();try{const ne=JSON.parse(U);let q=ne.message||"Failed to import products";throw ne.code==="P2003"&&(((H=ne.details)==null?void 0:H.field_name)==="baseUnitId"?q=`Import failed: One or more base unit IDs in your CSV do not exist in the database.

Please check your CSV file and ensure all baseUnitId values correspond to existing units.`:((F=ne.details)==null?void 0:F.field_name)==="categoryId"?q=`Import failed: One or more category IDs in your CSV do not exist in the database.

Please check your CSV file and ensure all categoryId values correspond to existing categories.`:q="Import failed: Foreign key constraint violation. Please check that all ID references in your CSV exist in the database."),new Error(q)}catch(ne){throw console.error("Parse error:",ne),new Error(`Failed to import products: ${U}`)}}const X=await G.json();t(U=>[...U,...X]),alert(`Successfully imported ${X.length} products!`)}catch(B){console.error("Import error:",B),alert(B instanceof Error?B.message:"Failed to import products. Please try again.")}finally{l(!1),E.target.value=""}}},ref:b.useRef(null)}),o.jsxs("button",{onClick:()=>{const E=Pfe(),T=new Blob([E],{type:"text/csv"}),D=window.URL.createObjectURL(T),H=document.createElement("a");H.href=D,H.download="products_template.csv",H.click(),window.URL.revokeObjectURL(D)},className:"bg-green-500 text-white px-4 py-2 rounded-lg flex items-center",children:[o.jsx(kd,{className:"w-4 h-4 mr-2"}),"Download Template"]}),o.jsxs("button",{onClick:()=>{const E=document.querySelector('input[type="file"]');E instanceof HTMLInputElement&&E.click()},className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center",children:[o.jsx(om,{className:"w-4 h-4 mr-2"}),"Import CSV"]}),o.jsxs("button",{onClick:()=>{p(null),P({name:"",description:"",purchase_price:"",wholesale_price:"",retail_price:"",stock_quantity:"",base_unit_id:"",category_id:"",units:[]}),u(!0)},className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center",children:[o.jsx(Hn,{className:"w-4 h-4 mr-2"}),"Add Product"]}),e.length>0&&o.jsxs("button",{onClick:I,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center",children:[o.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Delete All Products"]})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(ci,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",placeholder:"Search products...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:g,onChange:E=>m(E.target.value)})]}),a?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):C.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Fs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:g?"No products found matching your search.":"No products found. Add your first product!"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:C.map(E=>{var T;return o.jsxs("div",{className:`bg-white rounded-lg shadow p-6 ${E.isActive?"":"opacity-60 border-2 border-gray-300"}`,children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Fs,{className:`w-8 h-8 mr-3 ${E.isActive?"text-blue-500":"text-gray-400"}`}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:`text-lg font-semibold ${E.isActive?"text-gray-900":"text-gray-500"}`,children:E.name}),!E.isActive&&o.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-200 text-gray-600 rounded-full",children:"INACTIVE"})]}),o.jsx("p",{className:"text-sm text-gray-500",children:E.description||"No description"})]})]}),"                  ",o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>window.location.href=`/products/${E.id}/analytics`,className:"text-purple-500 hover:text-purple-700",title:"View Analytics",children:o.jsx(cI,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>R(E),className:"text-blue-500 hover:text-blue-700",children:o.jsx(jo,{className:"w-5 h-5"})}),!E.isActive&&o.jsx("button",{onClick:async()=>{if(window.confirm(`Reactivate "${E.name}"?

This will make the product visible in POS and product listings again.`))try{const D=await pe(`/api/products/${E.id}/reactivate`,{method:"PATCH"});if(D.ok)A(),alert(` Product Reactivated

"${E.name}" is now active and visible in POS and product listings.`);else{const H=await D.json();throw new Error(H.message||"Failed to reactivate product")}}catch(D){console.error("Error reactivating product:",D),alert(`Failed to reactivate product: ${D instanceof Error?D.message:"Unknown error"}`)}},className:"text-green-500 hover:text-green-700",title:"Reactivate Product",children:o.jsx(oa,{className:"w-5 h-5"})}),o.jsx("button",{onClick:async()=>{const D=`Are you sure you want to delete "${E.name}"?

Note: If this product has sales, purchases, or order history, deletion will be prevented to preserve your business records.`;if(window.confirm(D))try{const H=await pe(`/api/products/${E.id}`,{method:"DELETE"});if(H.ok){const F=await H.json();if(F.action==="deactivated"){t(e.filter(Z=>Z.id!==E.id));const B=` Product Deactivated

"${E.name}" has been deactivated and will no longer appear in POS or product listings.

 Related Records Preserved: ${F.details.relatedRecords}

 All sales history, purchases, and orders have been preserved for reporting purposes.

The product can be reactivated in the future if needed.`;alert(B)}else F.action==="deleted"?(t(e.filter(B=>B.id!==E.id)),alert(` ${F.message}`)):(t(e.filter(B=>B.id!==E.id)),alert(`Successfully processed "${E.name}".`))}else{const F=await H.json();throw new Error(F.message||"Failed to delete product")}}catch(H){console.error("Error deleting product:",H);let F="Failed to delete product. Please try again.";H instanceof Error&&(F=H.message),alert(F)}},className:"text-red-500 hover:text-red-700",children:o.jsx(Rn,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Purchase Price:"}),o.jsxs("span",{className:"font-medium",children:["",Number(E.purchasePrice||0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Wholesale Price:"}),o.jsxs("span",{className:"font-medium",children:["",Number(E.wholesalePrice||0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Retail Price:"}),o.jsxs("span",{className:"font-medium",children:["",Number(E.retailPrice||0).toFixed(2)]})]}),"                  ",o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Stock:"}),o.jsxs("span",{className:"font-medium",children:[E.stock," ",((T=E.baseUnit)==null?void 0:T.name)||"units"]})]}),E.productunit&&E.productunit.length>0&&o.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Additional Units:"}),E.productunit.map(D=>{var H;return o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{className:"text-gray-500",children:[D.unit.name," (",D.conversionRate," ",((H=E.baseUnit)==null?void 0:H.name)||"units","):"]}),o.jsxs("span",{className:"font-medium",children:["",Number(D.price||0).toFixed(2)]})]},D.id)})]})]})]},E.id)})}),j>1&&o.jsxs("div",{className:"flex justify-center space-x-2 mt-6",children:[o.jsx("button",{onClick:()=>_(x-1),disabled:x===1,className:`px-4 py-2 rounded-md ${x===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Previous"}),o.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:j},(E,T)=>T+1).filter(E=>{const T=E===1,D=E===j,H=Math.abs(E-x)<=1;return T||D||H}).map((E,T,D)=>o.jsxs(W.Fragment,{children:[T>0&&D[T-1]!==E-1&&o.jsx("span",{className:"px-2",children:"..."}),o.jsx("button",{onClick:()=>_(E),className:`w-10 h-10 rounded-md ${x===E?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:E})]},E))}),o.jsx("button",{onClick:()=>_(x+1),disabled:x===j,className:`px-4 py-2 rounded-md ${x===j?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Next"})]})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px] max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:h?"Edit Product":"Add Product"}),o.jsx("button",{onClick:()=>{u(!1),p(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx(Lt,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:z,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),o.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.name,onChange:E=>P({...N,name:E.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),o.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.description,onChange:E=>P({...N,description:E.target.value}),rows:3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Purchase Price"}),o.jsx("input",{type:"number",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.purchase_price,onChange:E=>P({...N,purchase_price:E.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Retail Price"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.retail_price,onChange:E=>P({...N,retail_price:E.target.value}),required:!0}),o.jsxs("select",{className:"mt-1 block w-32 rounded-md border-gray-300 shadow-sm",onChange:E=>{const T=parseFloat(E.target.value),D=parseFloat(N.purchase_price);if(!isNaN(D)&&!isNaN(T)){const H=D*(T/100),F=(D+H).toFixed(2);P({...N,retail_price:F})}},children:[o.jsx("option",{value:"",children:"Markup %"}),Array.from({length:100},(E,T)=>T+1).map(E=>o.jsxs("option",{value:E,children:[E,"%"]},E))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Wholesale Price"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.wholesale_price,onChange:E=>P({...N,wholesale_price:E.target.value}),required:!0}),o.jsxs("select",{className:"mt-1 block w-32 rounded-md border-gray-300 shadow-sm",onChange:E=>{const T=parseFloat(E.target.value),D=parseFloat(N.purchase_price);if(!isNaN(D)&&!isNaN(T)){const H=D*(T/100),F=(D+H).toFixed(2);P({...N,wholesale_price:F})}},children:[o.jsx("option",{value:"",children:"Markup %"}),Array.from({length:100},(E,T)=>T+1).map(E=>o.jsxs("option",{value:E,children:[E,"%"]},E))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stock Quantity"}),o.jsx("input",{type:"number",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.stock_quantity,onChange:E=>P({...N,stock_quantity:E.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Base Unit"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.base_unit_id,onChange:E=>P({...N,base_unit_id:E.target.value}),required:!0,children:[o.jsx("option",{value:"",children:"Select Unit"}),Array.isArray(i)&&i.map(E=>o.jsx("option",{value:E.id,children:E.name},E.id))]}),o.jsx("button",{type:"button",className:"mt-1 px-3 py-2 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200",onClick:()=>f(!0),children:o.jsx(Hn,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),o.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.category_id,onChange:E=>P({...N,category_id:E.target.value}),required:!0,children:[o.jsx("option",{value:"",children:"Select Category"}),Array.isArray(n)&&n.map(E=>o.jsx("option",{value:E.id,children:E.name},E.id))]})]}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:()=>{u(!1),p(null)},className:"px-4 py-2 border rounded-md text-gray-600",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md",children:h?"Update":"Save"})]})]})]})}),o.jsx(Nfe,{isOpen:d,onClose:()=>f(!1),onSave:M,baseUnit:N.base_unit_id&&(($=i.find(E=>E.id.toString()===N.base_unit_id))==null?void 0:$.name)||"PCS",productId:h==null?void 0:h.id})]})},_fe=()=>{const e=St(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[s,a]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState({name:"",description:""}),[f,h]=b.useState(""),[p,g]=b.useState(null),m=b.useCallback(async()=>{try{const S=await pe("/api/categories");if(S.ok){const k=await S.json();console.log("Fetched categories:",k),n(Array.isArray(k)?k:[])}else S.status===401?e("/login"):(console.error("Failed to fetch categories"),n([]))}catch(S){console.error("Error fetching categories:",S),n([])}finally{i(!1)}},[e]);b.useEffect(()=>{m()},[m]);const y=S=>{g(null),c(S),d({name:S.name,description:S.description||""}),a(!0)},v=async S=>{if(window.confirm("Are you sure you want to delete this category?"))try{const k=await pe(`/api/categories/${S}`,{method:"DELETE"});if(k.ok)n(t.filter(N=>N.id!==S));else{const N=await k.json().catch(()=>({}));g(N.message||"Failed to delete category")}}catch(k){console.error("Error deleting category:",k),g("Failed to delete category")}},x=()=>{const S=u.name.trim();return S?!l&&t.some(k=>k.name.toLowerCase()===S.toLowerCase())||l&&t.some(k=>k.id!==l.id&&k.name.toLowerCase()===S.toLowerCase())?(g("A category with this name already exists"),!1):!0:(g("Name is required"),!1)},w=async S=>{if(S.preventDefault(),g(null),!!x())try{const k=l?`/api/categories/${l.id}`:"/api/categories",N=l?"PUT":"POST",P={name:u.name.trim(),description:u.description.trim()||null};console.log("Sending request:",{method:N,url:k,data:P});const A=await pe(k,{method:N,headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(A.ok){const C=await A.json();console.log("Response:",C),n(l?_=>_.map(R=>R.id===C.id?C:R):_=>[..._,C]),a(!1),c(null),d({name:"",description:""})}else{const C=await A.json().catch(()=>({})),_=C.message||C.details||"Failed to save category";g(_),A.status===401&&e("/login")}}catch(k){console.error("Error saving category:",k),g("An unexpected error occurred")}},j=t.filter(S=>{var k;return S.name.toLowerCase().includes(f.toLowerCase())||(((k=S.description)==null?void 0:k.toLowerCase())||"").includes(f.toLowerCase())});return r?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Categories"}),o.jsxs("button",{onClick:()=>{c(null),d({name:"",description:""}),a(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[o.jsx(Hn,{className:"w-4 h-4 mr-2"}),"Add Category"]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(ci,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",placeholder:"Search categories...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:f,onChange:S=>h(S.target.value)})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:j.map(S=>o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:S.name}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:S.description||"No description"})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>y(S),className:"text-blue-500 hover:text-blue-700",children:o.jsx(jo,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>v(S.id),className:"text-red-500 hover:text-red-700",children:o.jsx(Rn,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[o.jsxs("p",{children:["Created: ",new Date(S.createdAt).toLocaleDateString()]}),o.jsxs("p",{children:["Updated: ",new Date(S.updatedAt).toLocaleDateString()]})]})]},S.id))}),s&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px]",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:l?"Edit Category":"Add Category"}),o.jsx("button",{onClick:()=>{a(!1),c(null),g(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx(Lt,{className:"w-6 h-6"})})]}),p&&o.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded",children:p}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),o.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.name,onChange:S=>{g(null),d({...u,name:S.target.value})},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),o.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.description,onChange:S=>d({...u,description:S.target.value}),rows:3})]}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{a(!1),c(null),g(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:l?"Update":"Save"})]})]})]})})]})};function Vo(e,t,n){let r=n.initialDeps??[],i;function s(){var a,l,c,u;let d;n.key&&((a=n.debug)!=null&&a.call(n))&&(d=Date.now());const f=e();if(!(f.length!==r.length||f.some((g,m)=>r[m]!==g)))return i;r=f;let p;if(n.key&&((l=n.debug)!=null&&l.call(n))&&(p=Date.now()),i=t(...f),n.key&&((c=n.debug)!=null&&c.call(n))){const g=Math.round((Date.now()-d)*100)/100,m=Math.round((Date.now()-p)*100)/100,y=m/16,v=(x,w)=>{for(x=String(x);x.length<w;)x=" "+x;return x};console.info(`%c ${v(m,5)} /${v(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*y,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(u=n==null?void 0:n.onChange)==null||u.call(n,i),i}return s.updateDeps=a=>{r=a},s}function a0(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const Tfe=(e,t)=>Math.abs(e-t)<=1,Ofe=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},vA=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},Ife=e=>e,Dfe=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},Rfe=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=a=>{const{width:l,height:c}=a;t({width:Math.round(l),height:Math.round(c)})};if(i(vA(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const l=()=>{const c=a[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(vA(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},bA={passive:!0},wA=typeof window>"u"?!0:"onscrollend"in window,Mfe=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const s=e.options.useScrollendEvent&&wA?()=>{}:Ofe(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),a=d=>()=>{const{horizontal:f,isRtl:h}=e.options;i=f?n.scrollLeft*(h&&-1||1):n.scrollTop,s(),t(i,d)},l=a(!0),c=a(!1);c(),n.addEventListener("scroll",l,bA);const u=e.options.useScrollendEvent&&wA;return u&&n.addEventListener("scrollend",c,bA),()=>{n.removeEventListener("scroll",l),u&&n.removeEventListener("scrollend",c)}},$fe=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},Lfe=(e,{adjustments:t=0,behavior:n},r)=>{var i,s;const a=e+t;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class Ffe{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ife,rangeExtractor:Dfe,onChange:()=>{},measureElement:$fe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Vo(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const l=n[a];if(i.has(l.lane))continue;const c=s.get(l.lane);if(c==null||l.end>c.end?s.set(l.lane,l):l.end<c.end&&i.set(l.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,l)=>a.end===l.end?a.index-l.index:a.end-l.end)[0]:void 0},this.getMeasurementOptions=Vo(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=Vo(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a},l)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let d=c;d<n;d++){const f=s(d),h=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d),p=h?h.end+this.options.gap:r+i,g=l.get(f),m=typeof g=="number"?g:this.options.estimateSize(d),y=p+m,v=h?h.lane:d%this.options.lanes;u[d]={index:d,start:p,size:m,end:y,key:f,lane:v}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Vo(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?Bfe({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Vo(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,l=this.elementsCache.get(a);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Vo(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const l=n[s],c=r[l];i.push(c)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return a0(r[p$(0,r.length-1,i=>a0(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const l=this.getTotalSize()-s;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const l=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(n,r);if(!s)return;const[a,l]=s;this._scrollToOffset(a,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[u]=a0(this.getOffsetForIndex(n,l)),d=this.getScrollOffset();Tfe(u,d)||this.scrollToIndex(n,{align:l,behavior:i})}else this.scrollToIndex(n,{align:l,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(l=>l===null);){const l=r[a];s[l.lane]===null&&(s[l.lane]=l.end),a--}i=Math.max(...s.filter(l=>l!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const p$=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,s=n(i);if(s<r)e=i+1;else if(s>r)t=i-1;else return i}return e>0?e-1:0};function Bfe({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const i=e.length-1,s=c=>e[c].start;if(e.length<=r)return{startIndex:0,endIndex:i};let a=p$(0,i,s,n),l=a;if(r===1)for(;l<i&&e[l].end<n+t;)l++;else if(r>1){const c=Array(r).fill(0);for(;l<i&&c.some(d=>d<n+t);){const d=e[l];c[d.lane]=d.end,l++}const u=Array(r).fill(n+t);for(;a>=0&&u.some(d=>d>=n);){const d=e[a];u[d.lane]=d.start,a--}a=Math.max(0,a-a%r),l=Math.min(i,l+(r-1-l%r))}return{startIndex:a,endIndex:l}}const SA=typeof document<"u"?b.useLayoutEffect:b.useEffect;function Ufe(e){const t=b.useReducer(()=>({}),{})[1],n={...e,onChange:(i,s)=>{var a;s?So.flushSync(t):t(),(a=e.onChange)==null||a.call(e,i,s)}},[r]=b.useState(()=>new Ffe(n));return r.setOptions(n),SA(()=>r._didMount(),[]),SA(()=>r._willUpdate()),r}function zfe(e){return Ufe({observeElementRect:Rfe,observeElementOffset:Mfe,scrollToFn:Lfe,...e})}var Hfe=Object.defineProperty,Wfe=(e,t,n)=>t in e?Hfe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o0=(e,t,n)=>(Wfe(e,typeof t!="symbol"?t+"":t,n),n);let qfe=class{constructor(){o0(this,"current",this.detect()),o0(this,"handoffState","pending"),o0(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ja=new qfe,zn=(e,t)=>{Ja.isServer?b.useEffect(e,t):b.useLayoutEffect(e,t)};function Hf(e){let t=b.useRef(e);return zn(()=>{t.current=e},[e]),t}function rj(e,t){let[n,r]=b.useState(e),i=Hf(e);return zn(()=>r(i.current),[i,r,...t]),n}let pt=function(e){let t=Hf(e);return W.useCallback((...n)=>t.current(...n),[t])};function Vfe(e,t,n){let[r,i]=b.useState(n),s=e!==void 0,a=b.useRef(s),l=b.useRef(!1),c=b.useRef(!1);return s&&!a.current&&!l.current?(l.current=!0,a.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&a.current&&!c.current&&(c.current=!0,a.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?e:r,pt(u=>(s||i(u),t==null?void 0:t(u)))]}function Kfe(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function cg(){let e=[],t={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),t.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Kfe(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=cg();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function ij(){let[e]=b.useState(cg);return b.useEffect(()=>()=>e.dispose(),[e]),e}function Qfe(){let e=typeof document>"u";return"useSyncExternalStore"in Op?(t=>t.useSyncExternalStore)(Op)(()=>()=>{},()=>!1,()=>!e):!1}function Gfe(){let e=Qfe(),[t,n]=b.useState(Ja.isHandoffComplete);return t&&Ja.isHandoffComplete===!1&&n(!1),b.useEffect(()=>{t!==!0&&n(!0)},[t]),b.useEffect(()=>Ja.handoff(),[]),e?!1:t}var jA;let Wf=(jA=W.useId)!=null?jA:function(){let e=Gfe(),[t,n]=W.useState(e?()=>Ja.nextId():null);return zn(()=>{t===null&&n(Ja.nextId())},[t]),t!=null?""+t:void 0};function ss(e,t,...n){if(e in t){let i=t[e];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ss),r}function sj(e){return Ja.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let NA=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Yfe=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Yfe||{}),Xfe=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Xfe||{}),Zfe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Zfe||{}),m$=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(m$||{});function Jfe(e,t=0){var n;return e===((n=sj(e))==null?void 0:n.body)?!1:ss(t,{0(){return e.matches(NA)},1(){let r=e;for(;r!==null;){if(r.matches(NA))return!0;r=r.parentElement}return!1}})}var ehe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(ehe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function the(e,t=n=>n){return e.slice().sort((n,r)=>{let i=t(n),s=t(r);if(i===null||s===null)return 0;let a=i.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function nhe(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function rhe(){return/Android/gi.test(window.navigator.userAgent)}function g$(){return nhe()||rhe()}function Th(e,t,n){let r=Hf(t);b.useEffect(()=>{function i(s){r.current(s)}return document.addEventListener(e,i,n),()=>document.removeEventListener(e,i,n)},[e,n])}function ihe(e,t,n){let r=Hf(t);b.useEffect(()=>{function i(s){r.current(s)}return window.addEventListener(e,i,n),()=>window.removeEventListener(e,i,n)},[e,n])}function she(e,t,n=!0){let r=b.useRef(!1);b.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function i(a,l){if(!r.current||a.defaultPrevented)return;let c=l(a);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=function d(f){return typeof f=="function"?d(f()):Array.isArray(f)||f instanceof Set?f:[f]}(e);for(let d of u){if(d===null)continue;let f=d instanceof HTMLElement?d:d.current;if(f!=null&&f.contains(c)||a.composed&&a.composedPath().includes(f))return}return!Jfe(c,m$.Loose)&&c.tabIndex!==-1&&a.preventDefault(),t(a,c)}let s=b.useRef(null);Th("pointerdown",a=>{var l,c;r.current&&(s.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Th("mousedown",a=>{var l,c;r.current&&(s.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Th("click",a=>{g$()||s.current&&(i(a,()=>s.current),s.current=null)},!0),Th("touchend",a=>i(a,()=>a.target instanceof HTMLElement?a.target:null),!0),ihe("blur",a=>i(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ahe(...e){return b.useMemo(()=>sj(...e),[...e])}function kA(e){var t;if(e.type)return e.type;let n=(t=e.as)!=null?t:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function ohe(e,t){let[n,r]=b.useState(()=>kA(e));return zn(()=>{r(kA(e))},[e.type,e.as]),zn(()=>{n||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&r("button")},[n,t]),n}let lhe=Symbol();function qf(...e){let t=b.useRef(e);b.useEffect(()=>{t.current=e},[e]);let n=pt(r=>{for(let i of t.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return e.every(r=>r==null||(r==null?void 0:r[lhe]))?void 0:n}function PA(e){return[e.screenX,e.screenY]}function che(){let e=b.useRef([-1,-1]);return{wasMoved(t){let n=PA(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=PA(t)}}}function uhe({container:e,accept:t,walk:n,enabled:r=!0}){let i=b.useRef(t),s=b.useRef(n);b.useEffect(()=>{i.current=t,s.current=n},[t,n]),zn(()=>{if(!e||!r)return;let a=sj(e);if(!a)return;let l=i.current,c=s.current,u=Object.assign(f=>l(f),{acceptNode:l}),d=a.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u,!1);for(;d.nextNode();)c(d.currentNode)},[e,r,i,s])}function CA(e,t){let n=b.useRef([]),r=pt(e);b.useEffect(()=>{let i=[...n.current];for(let[s,a]of t.entries())if(n.current[s]!==a){let l=r(t,i);return n.current=t,l}},[r,...t])}function AA(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var fw=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(fw||{}),dhe=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(dhe||{});function To({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:s=!0,name:a,mergeRefs:l}){l=l??fhe;let c=y$(t,e);if(s)return Oh(c,n,r,a,l);let u=i??0;if(u&2){let{static:d=!1,...f}=c;if(d)return Oh(f,n,r,a,l)}if(u&1){let{unmount:d=!0,...f}=c;return ss(d?0:1,{0(){return null},1(){return Oh({...f,hidden:!0,style:{display:"none"}},n,r,a,l)}})}return Oh(c,n,r,a,l)}function Oh(e,t={},n,r,i){let{as:s=n,children:a,refName:l="ref",...c}=l0(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let f={};if(t){let h=!1,p=[];for(let[g,m]of Object.entries(t))typeof m=="boolean"&&(h=!0),m===!0&&p.push(g);h&&(f["data-headlessui-state"]=p.join(" "))}if(s===b.Fragment&&Object.keys(hw(c)).length>0){if(!b.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`));let h=d.props,p=typeof(h==null?void 0:h.className)=="function"?(...m)=>AA(h==null?void 0:h.className(...m),c.className):AA(h==null?void 0:h.className,c.className),g=p?{className:p}:{};return b.cloneElement(d,Object.assign({},y$(d.props,hw(l0(c,["ref"]))),f,u,{ref:i(d.ref,u.ref)},g))}return b.createElement(s,Object.assign({},l0(c,["ref"]),s!==b.Fragment&&u,s!==b.Fragment&&f),d)}function fhe(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function y$(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):t[i]=r[i];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](i,...s){let a=n[r];for(let l of a){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;l(i,...s)}}});return t}function Oo(e){var t;return Object.assign(b.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function hw(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function l0(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let hhe="div";var x$=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(x$||{});function phe(e,t){var n;let{features:r=1,...i}=e,s={ref:t,"aria-hidden":(r&2)===2?!0:(n=i["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return To({ourProps:s,theirProps:i,slot:{},defaultTag:hhe,name:"Hidden"})}let mhe=Oo(phe),aj=b.createContext(null);aj.displayName="OpenClosedContext";var cf=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(cf||{});function ghe(){return b.useContext(aj)}function yhe({value:e,children:t}){return W.createElement(aj.Provider,{value:e},t)}function xhe(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Fa=[];xhe(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Fa[0]!==t.target&&(Fa.unshift(t.target),Fa=Fa.filter(n=>n!=null&&n.isConnected),Fa.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function vhe(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&bhe(n)?!1:r}function bhe(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}function whe(e){throw new Error("Unexpected object: "+e)}var sn=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(sn||{});function EA(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=r??-1;switch(e.focus){case 0:{for(let s=0;s<n.length;++s)if(!t.resolveDisabled(n[s],s,n))return s;return r}case 1:{for(let s=i-1;s>=0;--s)if(!t.resolveDisabled(n[s],s,n))return s;return r}case 2:{for(let s=i+1;s<n.length;++s)if(!t.resolveDisabled(n[s],s,n))return s;return r}case 3:{for(let s=n.length-1;s>=0;--s)if(!t.resolveDisabled(n[s],s,n))return s;return r}case 4:{for(let s=0;s<n.length;++s)if(t.resolveId(n[s],s,n)===e.id)return s;return r}case 5:return null;default:whe(e)}}function v$(e={},t=null,n=[]){for(let[r,i]of Object.entries(e))w$(n,b$(t,r),i);return n}function b$(e,t){return e?e+"["+t+"]":t}function w$(e,t,n){if(Array.isArray(n))for(let[r,i]of n.entries())w$(e,b$(t,r.toString()),i);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):v$(n,t,e)}var ar=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(ar||{}),She={},jhe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(jhe||{}),Nhe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Nhe||{}),khe=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(khe||{}),Phe=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.RegisterOption=3]="RegisterOption",e[e.UnregisterOption=4]="UnregisterOption",e[e.RegisterLabel=5]="RegisterLabel",e[e.SetActivationTrigger=6]="SetActivationTrigger",e[e.UpdateVirtualOptions=7]="UpdateVirtualOptions",e))(Phe||{});function c0(e,t=n=>n){let n=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,r=t(e.options.slice()),i=r.length>0&&r[0].dataRef.current.order!==null?r.sort((a,l)=>a.dataRef.current.order-l.dataRef.current.order):the(r,a=>a.dataRef.current.domRef.current),s=n?i.indexOf(n):null;return s===-1&&(s=null),{options:i,activeOptionIndex:s}}let Che={1(e){var t;return(t=e.dataRef.current)!=null&&t.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1}},0(e){var t,n;if((t=e.dataRef.current)!=null&&t.disabled||e.comboboxState===0)return e;if((n=e.dataRef.current)!=null&&n.value){let r=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(r!==-1)return{...e,activeOptionIndex:r,comboboxState:0}}return{...e,comboboxState:0}},2(e,t){var n,r,i,s,a;if((n=e.dataRef.current)!=null&&n.disabled||(r=e.dataRef.current)!=null&&r.optionsRef.current&&!((i=e.dataRef.current)!=null&&i.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let d=t.focus===sn.Specific?t.idx:EA(t,{resolveItems:()=>e.virtual.options,resolveActiveIndex:()=>{var h,p;return(p=(h=e.activeOptionIndex)!=null?h:e.virtual.options.findIndex(g=>!e.virtual.disabled(g)))!=null?p:null},resolveDisabled:e.virtual.disabled,resolveId(){throw new Error("Function not implemented.")}}),f=(s=t.trigger)!=null?s:2;return e.activeOptionIndex===d&&e.activationTrigger===f?e:{...e,activeOptionIndex:d,activationTrigger:f}}let l=c0(e);if(l.activeOptionIndex===null){let d=l.options.findIndex(f=>!f.dataRef.current.disabled);d!==-1&&(l.activeOptionIndex=d)}let c=t.focus===sn.Specific?t.idx:EA(t,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled}),u=(a=t.trigger)!=null?a:2;return e.activeOptionIndex===c&&e.activationTrigger===u?e:{...e,...l,activeOptionIndex:c,activationTrigger:u}},3:(e,t)=>{var n,r,i;if((n=e.dataRef.current)!=null&&n.virtual)return{...e,options:[...e.options,t.payload]};let s=t.payload,a=c0(e,c=>(c.push(s),c));e.activeOptionIndex===null&&(r=e.dataRef.current)!=null&&r.isSelected(t.payload.dataRef.current.value)&&(a.activeOptionIndex=a.options.indexOf(s));let l={...e,...a,activationTrigger:2};return(i=e.dataRef.current)!=null&&i.__demoMode&&e.dataRef.current.value===void 0&&(l.activeOptionIndex=0),l},4:(e,t)=>{var n;if((n=e.dataRef.current)!=null&&n.virtual)return{...e,options:e.options.filter(i=>i.id!==t.id)};let r=c0(e,i=>{let s=i.findIndex(a=>a.id===t.id);return s!==-1&&i.splice(s,1),i});return{...e,...r,activationTrigger:2}},5:(e,t)=>e.labelId===t.id?e:{...e,labelId:t.id},6:(e,t)=>e.activationTrigger===t.trigger?e:{...e,activationTrigger:t.trigger},7:(e,t)=>{var n;if(((n=e.virtual)==null?void 0:n.options)===t.options)return e;let r=e.activeOptionIndex;if(e.activeOptionIndex!==null){let i=t.options.indexOf(e.virtual.options[e.activeOptionIndex]);i!==-1?r=i:r=null}return{...e,activeOptionIndex:r,virtual:Object.assign({},e.virtual,{options:t.options})}}},oj=b.createContext(null);oj.displayName="ComboboxActionsContext";function Vf(e){let t=b.useContext(oj);if(t===null){let n=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Vf),n}return t}let S$=b.createContext(null);function Ahe(e){var t;let n=Io("VirtualProvider"),[r,i]=b.useMemo(()=>{let c=n.optionsRef.current;if(!c)return[0,0];let u=window.getComputedStyle(c);return[parseFloat(u.paddingBlockStart||u.paddingTop),parseFloat(u.paddingBlockEnd||u.paddingBottom)]},[n.optionsRef.current]),s=zfe({scrollPaddingStart:r,scrollPaddingEnd:i,count:n.virtual.options.length,estimateSize(){return 40},getScrollElement(){var c;return(c=n.optionsRef.current)!=null?c:null},overscan:12}),[a,l]=b.useState(0);return zn(()=>{l(c=>c+1)},[(t=n.virtual)==null?void 0:t.options]),W.createElement(S$.Provider,{value:s},W.createElement("div",{style:{position:"relative",width:"100%",height:`${s.getTotalSize()}px`},ref:c=>{if(c){if(typeof process<"u"&&She.JEST_WORKER_ID!==void 0||n.activationTrigger===0)return;n.activeOptionIndex!==null&&n.virtual.options.length>n.activeOptionIndex&&s.scrollToIndex(n.activeOptionIndex)}}},s.getVirtualItems().map(c=>{var u;return W.createElement(b.Fragment,{key:c.key},W.cloneElement((u=e.children)==null?void 0:u.call(e,{option:n.virtual.options[c.index],open:n.comboboxState===0}),{key:`${a}-${c.key}`,"data-index":c.index,"aria-setsize":n.virtual.options.length,"aria-posinset":c.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${c.start}px)`,overflowAnchor:"none"}}))})))}let lj=b.createContext(null);lj.displayName="ComboboxDataContext";function Io(e){let t=b.useContext(lj);if(t===null){let n=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Io),n}return t}function Ehe(e,t){return ss(t.type,Che,e,t)}let _he=b.Fragment;function The(e,t){let{value:n,defaultValue:r,onChange:i,form:s,name:a,by:l=null,disabled:c=!1,__demoMode:u=!1,nullable:d=!1,multiple:f=!1,immediate:h=!1,virtual:p=null,...g}=e,m=!1,y=null,[v=f?[]:void 0,x]=Vfe(n,i,r),[w,j]=b.useReducer(Ehe,{dataRef:b.createRef(),comboboxState:u?0:1,options:[],virtual:null,activeOptionIndex:null,activationTrigger:2,labelId:null}),S=b.useRef(!1),k=b.useRef({static:!1,hold:!1}),N=b.useRef(null),P=b.useRef(null),A=b.useRef(null),C=b.useRef(null),_=pt(typeof l=="string"?(q,ie)=>{let re=l;return(q==null?void 0:q[re])===(ie==null?void 0:ie[re])}:l??((q,ie)=>q===ie)),R=pt(q=>w.options.findIndex(ie=>_(ie.dataRef.current.value,q))),z=b.useCallback(q=>ss(I.mode,{1:()=>v.some(ie=>_(ie,q)),0:()=>_(v,q)}),[v]),M=pt(q=>w.activeOptionIndex===R(q)),I=b.useMemo(()=>({...w,immediate:m,optionsPropsRef:k,labelRef:N,inputRef:P,buttonRef:A,optionsRef:C,value:v,defaultValue:r,disabled:c,mode:f?1:0,virtual:w.virtual,get activeOptionIndex(){if(S.current&&w.activeOptionIndex===null&&w.options.length>0){let q=w.options.findIndex(ie=>!ie.dataRef.current.disabled);if(q!==-1)return q}return w.activeOptionIndex},calculateIndex:R,compare:_,isSelected:z,isActive:M,nullable:d,__demoMode:u}),[v,r,c,f,d,u,w,y]);zn(()=>{},[y,void 0]),zn(()=>{w.dataRef.current=I},[I]),she([I.buttonRef,I.inputRef,I.optionsRef],()=>G.closeCombobox(),I.comboboxState===0);let $=b.useMemo(()=>{var q,ie,re;return{open:I.comboboxState===0,disabled:c,activeIndex:I.activeOptionIndex,activeOption:I.activeOptionIndex===null?null:I.virtual?I.virtual.options[(q=I.activeOptionIndex)!=null?q:0]:(re=(ie=I.options[I.activeOptionIndex])==null?void 0:ie.dataRef.current.value)!=null?re:null,value:v}},[I,c,v]),E=pt(()=>{if(I.activeOptionIndex!==null){if(I.virtual)Z(I.virtual.options[I.activeOptionIndex]);else{let{dataRef:q}=I.options[I.activeOptionIndex];Z(q.current.value)}G.goToOption(sn.Specific,I.activeOptionIndex)}}),T=pt(()=>{j({type:0}),S.current=!0}),D=pt(()=>{j({type:1}),S.current=!1}),H=pt((q,ie,re)=>(S.current=!1,q===sn.Specific?j({type:2,focus:sn.Specific,idx:ie,trigger:re}):j({type:2,focus:q,trigger:re}))),F=pt((q,ie)=>(j({type:3,payload:{id:q,dataRef:ie}}),()=>{I.isActive(ie.current.value)&&(S.current=!0),j({type:4,id:q})})),B=pt(q=>(j({type:5,id:q}),()=>j({type:5,id:null}))),Z=pt(q=>ss(I.mode,{0(){return x==null?void 0:x(q)},1(){let ie=I.value.slice(),re=ie.findIndex(ee=>_(ee,q));return re===-1?ie.push(q):ie.splice(re,1),x==null?void 0:x(ie)}})),V=pt(q=>{j({type:6,trigger:q})}),G=b.useMemo(()=>({onChange:Z,registerOption:F,registerLabel:B,goToOption:H,closeCombobox:D,openCombobox:T,setActivationTrigger:V,selectActiveOption:E}),[]),X=t===null?{}:{ref:t},U=b.useRef(null),ne=ij();return b.useEffect(()=>{U.current&&r!==void 0&&ne.addEventListener(U.current,"reset",()=>{x==null||x(r)})},[U,x]),W.createElement(oj.Provider,{value:G},W.createElement(lj.Provider,{value:I},W.createElement(yhe,{value:ss(I.comboboxState,{0:cf.Open,1:cf.Closed})},a!=null&&v!=null&&v$({[a]:v}).map(([q,ie],re)=>W.createElement(mhe,{features:x$.Hidden,ref:re===0?ee=>{var he;U.current=(he=ee==null?void 0:ee.closest("form"))!=null?he:null}:void 0,...hw({key:q,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:s,disabled:c,name:q,value:ie})})),To({ourProps:X,theirProps:g,slot:$,defaultTag:_he,name:"Combobox"}))))}let Ohe="input";function Ihe(e,t){var n,r,i,s,a;let l=Wf(),{id:c=`headlessui-combobox-input-${l}`,onChange:u,displayValue:d,type:f="text",...h}=e,p=Io("Combobox.Input"),g=Vf("Combobox.Input"),m=qf(p.inputRef,t),y=ahe(p.inputRef),v=b.useRef(!1),x=ij(),w=pt(()=>{g.onChange(null),p.optionsRef.current&&(p.optionsRef.current.scrollTop=0),g.goToOption(sn.Nothing)}),j=function(){var I;return typeof d=="function"&&p.value!==void 0?(I=d(p.value))!=null?I:"":typeof p.value=="string"?p.value:""}();CA(([I,$],[E,T])=>{if(v.current)return;let D=p.inputRef.current;D&&((T===0&&$===1||I!==E)&&(D.value=I),requestAnimationFrame(()=>{if(v.current||!D||(y==null?void 0:y.activeElement)!==D)return;let{selectionStart:H,selectionEnd:F}=D;Math.abs((F??0)-(H??0))===0&&H===0&&D.setSelectionRange(D.value.length,D.value.length)}))},[j,p.comboboxState,y]),CA(([I],[$])=>{if(I===0&&$===1){if(v.current)return;let E=p.inputRef.current;if(!E)return;let T=E.value,{selectionStart:D,selectionEnd:H,selectionDirection:F}=E;E.value="",E.value=T,F!==null?E.setSelectionRange(D,H,F):E.setSelectionRange(D,H)}},[p.comboboxState]);let S=b.useRef(!1),k=pt(()=>{S.current=!0}),N=pt(()=>{x.nextFrame(()=>{S.current=!1})}),P=pt(I=>{switch(v.current=!0,I.key){case ar.Enter:if(v.current=!1,p.comboboxState!==0||S.current)return;if(I.preventDefault(),I.stopPropagation(),p.activeOptionIndex===null){g.closeCombobox();return}g.selectActiveOption(),p.mode===0&&g.closeCombobox();break;case ar.ArrowDown:return v.current=!1,I.preventDefault(),I.stopPropagation(),ss(p.comboboxState,{0:()=>g.goToOption(sn.Next),1:()=>g.openCombobox()});case ar.ArrowUp:return v.current=!1,I.preventDefault(),I.stopPropagation(),ss(p.comboboxState,{0:()=>g.goToOption(sn.Previous),1:()=>{g.openCombobox(),x.nextFrame(()=>{p.value||g.goToOption(sn.Last)})}});case ar.Home:if(I.shiftKey)break;return v.current=!1,I.preventDefault(),I.stopPropagation(),g.goToOption(sn.First);case ar.PageUp:return v.current=!1,I.preventDefault(),I.stopPropagation(),g.goToOption(sn.First);case ar.End:if(I.shiftKey)break;return v.current=!1,I.preventDefault(),I.stopPropagation(),g.goToOption(sn.Last);case ar.PageDown:return v.current=!1,I.preventDefault(),I.stopPropagation(),g.goToOption(sn.Last);case ar.Escape:return v.current=!1,p.comboboxState!==0?void 0:(I.preventDefault(),p.optionsRef.current&&!p.optionsPropsRef.current.static&&I.stopPropagation(),p.nullable&&p.mode===0&&p.value===null&&w(),g.closeCombobox());case ar.Tab:if(v.current=!1,p.comboboxState!==0)return;p.mode===0&&p.activationTrigger!==1&&g.selectActiveOption(),g.closeCombobox();break}}),A=pt(I=>{u==null||u(I),p.nullable&&p.mode===0&&I.target.value===""&&w(),g.openCombobox()}),C=pt(I=>{var $,E,T;let D=($=I.relatedTarget)!=null?$:Fa.find(H=>H!==I.currentTarget);if(v.current=!1,!((E=p.optionsRef.current)!=null&&E.contains(D))&&!((T=p.buttonRef.current)!=null&&T.contains(D))&&p.comboboxState===0)return I.preventDefault(),p.mode===0&&(p.nullable&&p.value===null?w():p.activationTrigger!==1&&g.selectActiveOption()),g.closeCombobox()}),_=pt(I=>{var $,E,T;let D=($=I.relatedTarget)!=null?$:Fa.find(H=>H!==I.currentTarget);(E=p.buttonRef.current)!=null&&E.contains(D)||(T=p.optionsRef.current)!=null&&T.contains(D)||p.disabled||p.immediate&&p.comboboxState!==0&&(g.openCombobox(),x.nextFrame(()=>{g.setActivationTrigger(1)}))}),R=rj(()=>{if(p.labelId)return[p.labelId].join(" ")},[p.labelId]),z=b.useMemo(()=>({open:p.comboboxState===0,disabled:p.disabled}),[p]),M={ref:m,id:c,role:"combobox",type:f,"aria-controls":(n=p.optionsRef.current)==null?void 0:n.id,"aria-expanded":p.comboboxState===0,"aria-activedescendant":p.activeOptionIndex===null?void 0:p.virtual?(r=p.options.find(I=>{var $;return!(($=p.virtual)!=null&&$.disabled(I.dataRef.current.value))&&p.compare(I.dataRef.current.value,p.virtual.options[p.activeOptionIndex])}))==null?void 0:r.id:(i=p.options[p.activeOptionIndex])==null?void 0:i.id,"aria-labelledby":R,"aria-autocomplete":"list",defaultValue:(a=(s=e.defaultValue)!=null?s:p.defaultValue!==void 0?d==null?void 0:d(p.defaultValue):null)!=null?a:p.defaultValue,disabled:p.disabled,onCompositionStart:k,onCompositionEnd:N,onKeyDown:P,onChange:A,onFocus:_,onBlur:C};return To({ourProps:M,theirProps:h,slot:z,defaultTag:Ohe,name:"Combobox.Input"})}let Dhe="button";function Rhe(e,t){var n;let r=Io("Combobox.Button"),i=Vf("Combobox.Button"),s=qf(r.buttonRef,t),a=Wf(),{id:l=`headlessui-combobox-button-${a}`,...c}=e,u=ij(),d=pt(m=>{switch(m.key){case ar.ArrowDown:return m.preventDefault(),m.stopPropagation(),r.comboboxState===1&&i.openCombobox(),u.nextFrame(()=>{var y;return(y=r.inputRef.current)==null?void 0:y.focus({preventScroll:!0})});case ar.ArrowUp:return m.preventDefault(),m.stopPropagation(),r.comboboxState===1&&(i.openCombobox(),u.nextFrame(()=>{r.value||i.goToOption(sn.Last)})),u.nextFrame(()=>{var y;return(y=r.inputRef.current)==null?void 0:y.focus({preventScroll:!0})});case ar.Escape:return r.comboboxState!==0?void 0:(m.preventDefault(),r.optionsRef.current&&!r.optionsPropsRef.current.static&&m.stopPropagation(),i.closeCombobox(),u.nextFrame(()=>{var y;return(y=r.inputRef.current)==null?void 0:y.focus({preventScroll:!0})}));default:return}}),f=pt(m=>{if(vhe(m.currentTarget))return m.preventDefault();r.comboboxState===0?i.closeCombobox():(m.preventDefault(),i.openCombobox()),u.nextFrame(()=>{var y;return(y=r.inputRef.current)==null?void 0:y.focus({preventScroll:!0})})}),h=rj(()=>{if(r.labelId)return[r.labelId,l].join(" ")},[r.labelId,l]),p=b.useMemo(()=>({open:r.comboboxState===0,disabled:r.disabled,value:r.value}),[r]),g={ref:s,id:l,type:ohe(e,r.buttonRef),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(n=r.optionsRef.current)==null?void 0:n.id,"aria-expanded":r.comboboxState===0,"aria-labelledby":h,disabled:r.disabled,onClick:f,onKeyDown:d};return To({ourProps:g,theirProps:c,slot:p,defaultTag:Dhe,name:"Combobox.Button"})}let Mhe="label";function $he(e,t){let n=Wf(),{id:r=`headlessui-combobox-label-${n}`,...i}=e,s=Io("Combobox.Label"),a=Vf("Combobox.Label"),l=qf(s.labelRef,t);zn(()=>a.registerLabel(r),[r]);let c=pt(()=>{var d;return(d=s.inputRef.current)==null?void 0:d.focus({preventScroll:!0})}),u=b.useMemo(()=>({open:s.comboboxState===0,disabled:s.disabled}),[s]);return To({ourProps:{ref:l,id:r,onClick:c},theirProps:i,slot:u,defaultTag:Mhe,name:"Combobox.Label"})}let Lhe="ul",Fhe=fw.RenderStrategy|fw.Static;function Bhe(e,t){let n=Wf(),{id:r=`headlessui-combobox-options-${n}`,hold:i=!1,...s}=e,a=Io("Combobox.Options"),l=qf(a.optionsRef,t),c=ghe(),u=c!==null?(c&cf.Open)===cf.Open:a.comboboxState===0;zn(()=>{var p;a.optionsPropsRef.current.static=(p=e.static)!=null?p:!1},[a.optionsPropsRef,e.static]),zn(()=>{a.optionsPropsRef.current.hold=i},[a.optionsPropsRef,i]),uhe({container:a.optionsRef.current,enabled:a.comboboxState===0,accept(p){return p.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:p.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(p){p.setAttribute("role","none")}});let d=rj(()=>{var p,g;return(g=a.labelId)!=null?g:(p=a.buttonRef.current)==null?void 0:p.id},[a.labelId,a.buttonRef.current]),f=b.useMemo(()=>({open:a.comboboxState===0,option:void 0}),[a]),h={"aria-labelledby":d,role:"listbox","aria-multiselectable":a.mode===1?!0:void 0,id:r,ref:l};return a.virtual&&a.comboboxState===0&&Object.assign(s,{children:W.createElement(Ahe,null,s.children)}),To({ourProps:h,theirProps:s,slot:f,defaultTag:Lhe,features:Fhe,visible:u,name:"Combobox.Options"})}let Uhe="li";function zhe(e,t){var n;let r=Wf(),{id:i=`headlessui-combobox-option-${r}`,disabled:s=!1,value:a,order:l=null,...c}=e,u=Io("Combobox.Option"),d=Vf("Combobox.Option"),f=u.virtual?u.activeOptionIndex===u.calculateIndex(a):u.activeOptionIndex===null?!1:((n=u.options[u.activeOptionIndex])==null?void 0:n.id)===i,h=u.isSelected(a),p=b.useRef(null),g=Hf({disabled:s,value:a,domRef:p,order:l}),m=b.useContext(S$),y=qf(t,p,m?m.measureElement:null),v=pt(()=>d.onChange(a));zn(()=>d.registerOption(i,g),[g,i]);let x=b.useRef(!(u.virtual||u.__demoMode));zn(()=>{if(!u.virtual||!u.__demoMode)return;let C=cg();return C.requestAnimationFrame(()=>{x.current=!0}),C.dispose},[u.virtual,u.__demoMode]),zn(()=>{if(!x.current||u.comboboxState!==0||!f||u.activationTrigger===0)return;let C=cg();return C.requestAnimationFrame(()=>{var _,R;(R=(_=p.current)==null?void 0:_.scrollIntoView)==null||R.call(_,{block:"nearest"})}),C.dispose},[p,f,u.comboboxState,u.activationTrigger,u.activeOptionIndex]);let w=pt(C=>{var _;if(s||(_=u.virtual)!=null&&_.disabled(a))return C.preventDefault();v(),g$()||requestAnimationFrame(()=>{var R;return(R=u.inputRef.current)==null?void 0:R.focus({preventScroll:!0})}),u.mode===0&&requestAnimationFrame(()=>d.closeCombobox())}),j=pt(()=>{var C;if(s||(C=u.virtual)!=null&&C.disabled(a))return d.goToOption(sn.Nothing);let _=u.calculateIndex(a);d.goToOption(sn.Specific,_)}),S=che(),k=pt(C=>S.update(C)),N=pt(C=>{var _;if(!S.wasMoved(C)||s||(_=u.virtual)!=null&&_.disabled(a)||f)return;let R=u.calculateIndex(a);d.goToOption(sn.Specific,R,0)}),P=pt(C=>{var _;S.wasMoved(C)&&(s||(_=u.virtual)!=null&&_.disabled(a)||f&&(u.optionsPropsRef.current.hold||d.goToOption(sn.Nothing)))}),A=b.useMemo(()=>({active:f,selected:h,disabled:s}),[f,h,s]);return To({ourProps:{id:i,ref:y,role:"option",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-selected":h,disabled:void 0,onClick:w,onFocus:j,onPointerEnter:k,onMouseEnter:k,onPointerMove:N,onMouseMove:N,onPointerLeave:P,onMouseLeave:P},theirProps:c,slot:A,defaultTag:Uhe,name:"Combobox.Option"})}let Hhe=Oo(The),Whe=Oo(Rhe),qhe=Oo(Ihe),Vhe=Oo($he),Khe=Oo(Bhe),Qhe=Oo(zhe),Ko=Object.assign(Hhe,{Input:qhe,Button:Whe,Label:Vhe,Options:Khe,Option:Qhe});function j$(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ghe}=Object.prototype,{getPrototypeOf:cj}=Object,By=(e=>t=>{const n=Ghe.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),di=e=>(e=e.toLowerCase(),t=>By(t)===e),Uy=e=>t=>typeof t===e,{isArray:Bc}=Array,uf=Uy("undefined");function Yhe(e){return e!==null&&!uf(e)&&e.constructor!==null&&!uf(e.constructor)&&yr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const N$=di("ArrayBuffer");function Xhe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&N$(e.buffer),t}const Zhe=Uy("string"),yr=Uy("function"),k$=Uy("number"),zy=e=>e!==null&&typeof e=="object",Jhe=e=>e===!0||e===!1,gp=e=>{if(By(e)!=="object")return!1;const t=cj(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},epe=di("Date"),tpe=di("File"),npe=di("Blob"),rpe=di("FileList"),ipe=e=>zy(e)&&yr(e.pipe),spe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||yr(e.append)&&((t=By(e))==="formdata"||t==="object"&&yr(e.toString)&&e.toString()==="[object FormData]"))},ape=di("URLSearchParams"),[ope,lpe,cpe,upe]=["ReadableStream","Request","Response","Headers"].map(di),dpe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Kf(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Bc(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let l;for(r=0;r<a;r++)l=s[r],t.call(null,e[l],l,e)}}function P$(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const Ka=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,C$=e=>!uf(e)&&e!==Ka;function pw(){const{caseless:e}=C$(this)&&this||{},t={},n=(r,i)=>{const s=e&&P$(t,i)||i;gp(t[s])&&gp(r)?t[s]=pw(t[s],r):gp(r)?t[s]=pw({},r):Bc(r)?t[s]=r.slice():t[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Kf(arguments[r],n);return t}const fpe=(e,t,n,{allOwnKeys:r}={})=>(Kf(t,(i,s)=>{n&&yr(i)?e[s]=j$(i,n):e[s]=i},{allOwnKeys:r}),e),hpe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ppe=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},mpe=(e,t,n,r)=>{let i,s,a;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)a=i[s],(!r||r(a,e,t))&&!l[a]&&(t[a]=e[a],l[a]=!0);e=n!==!1&&cj(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},gpe=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},ype=e=>{if(!e)return null;if(Bc(e))return e;let t=e.length;if(!k$(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},xpe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&cj(Uint8Array)),vpe=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},bpe=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},wpe=di("HTMLFormElement"),Spe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),_A=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),jpe=di("RegExp"),A$=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Kf(n,(i,s)=>{let a;(a=t(i,s,e))!==!1&&(r[s]=a||i)}),Object.defineProperties(e,r)},Npe=e=>{A$(e,(t,n)=>{if(yr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(yr(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},kpe=(e,t)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Bc(e)?r(e):r(String(e).split(t)),n},Ppe=()=>{},Cpe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,u0="abcdefghijklmnopqrstuvwxyz",TA="0123456789",E$={DIGIT:TA,ALPHA:u0,ALPHA_DIGIT:u0+u0.toUpperCase()+TA},Ape=(e=16,t=E$.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Epe(e){return!!(e&&yr(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const _pe=e=>{const t=new Array(10),n=(r,i)=>{if(zy(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const s=Bc(r)?[]:{};return Kf(r,(a,l)=>{const c=n(a,i+1);!uf(c)&&(s[l]=c)}),t[i]=void 0,s}}return r};return n(e,0)},Tpe=di("AsyncFunction"),Ope=e=>e&&(zy(e)||yr(e))&&yr(e.then)&&yr(e.catch),_$=((e,t)=>e?setImmediate:t?((n,r)=>(Ka.addEventListener("message",({source:i,data:s})=>{i===Ka&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Ka.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",yr(Ka.postMessage)),Ipe=typeof queueMicrotask<"u"?queueMicrotask.bind(Ka):typeof process<"u"&&process.nextTick||_$,le={isArray:Bc,isArrayBuffer:N$,isBuffer:Yhe,isFormData:spe,isArrayBufferView:Xhe,isString:Zhe,isNumber:k$,isBoolean:Jhe,isObject:zy,isPlainObject:gp,isReadableStream:ope,isRequest:lpe,isResponse:cpe,isHeaders:upe,isUndefined:uf,isDate:epe,isFile:tpe,isBlob:npe,isRegExp:jpe,isFunction:yr,isStream:ipe,isURLSearchParams:ape,isTypedArray:xpe,isFileList:rpe,forEach:Kf,merge:pw,extend:fpe,trim:dpe,stripBOM:hpe,inherits:ppe,toFlatObject:mpe,kindOf:By,kindOfTest:di,endsWith:gpe,toArray:ype,forEachEntry:vpe,matchAll:bpe,isHTMLForm:wpe,hasOwnProperty:_A,hasOwnProp:_A,reduceDescriptors:A$,freezeMethods:Npe,toObjectSet:kpe,toCamelCase:Spe,noop:Ppe,toFiniteNumber:Cpe,findKey:P$,global:Ka,isContextDefined:C$,ALPHABET:E$,generateString:Ape,isSpecCompliantForm:Epe,toJSONObject:_pe,isAsyncFn:Tpe,isThenable:Ope,setImmediate:_$,asap:Ipe};function Ge(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}le.inherits(Ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.status}}});const T$=Ge.prototype,O$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{O$[e]={value:e}});Object.defineProperties(Ge,O$);Object.defineProperty(T$,"isAxiosError",{value:!0});Ge.from=(e,t,n,r,i,s)=>{const a=Object.create(T$);return le.toFlatObject(e,a,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Ge.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,s&&Object.assign(a,s),a};const Dpe=null;function mw(e){return le.isPlainObject(e)||le.isArray(e)}function I$(e){return le.endsWith(e,"[]")?e.slice(0,-2):e}function OA(e,t,n){return e?e.concat(t).map(function(i,s){return i=I$(i),!n&&s?"["+i+"]":i}).join(n?".":""):t}function Rpe(e){return le.isArray(e)&&!e.some(mw)}const Mpe=le.toFlatObject(le,{},null,function(t){return/^is[A-Z]/.test(t)});function Hy(e,t,n){if(!le.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=le.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!le.isUndefined(y[m])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(t);if(!le.isFunction(i))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(le.isDate(g))return g.toISOString();if(!c&&le.isBlob(g))throw new Ge("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(g)||le.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,m,y){let v=g;if(g&&!y&&typeof g=="object"){if(le.endsWith(m,"{}"))m=r?m:m.slice(0,-2),g=JSON.stringify(g);else if(le.isArray(g)&&Rpe(g)||(le.isFileList(g)||le.endsWith(m,"[]"))&&(v=le.toArray(g)))return m=I$(m),v.forEach(function(w,j){!(le.isUndefined(w)||w===null)&&t.append(a===!0?OA([m],j,s):a===null?m:m+"[]",u(w))}),!1}return mw(g)?!0:(t.append(OA(y,m,s),u(g)),!1)}const f=[],h=Object.assign(Mpe,{defaultVisitor:d,convertValue:u,isVisitable:mw});function p(g,m){if(!le.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(g),le.forEach(g,function(v,x){(!(le.isUndefined(v)||v===null)&&i.call(t,v,le.isString(x)?x.trim():x,m,h))===!0&&p(v,m?m.concat(x):[x])}),f.pop()}}if(!le.isObject(e))throw new TypeError("data must be an object");return p(e),t}function IA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function uj(e,t){this._pairs=[],e&&Hy(e,this,t)}const D$=uj.prototype;D$.append=function(t,n){this._pairs.push([t,n])};D$.toString=function(t){const n=t?function(r){return t.call(this,r,IA)}:IA;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function $pe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function R$(e,t,n){if(!t)return e;const r=n&&n.encode||$pe;le.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(t,n):s=le.isURLSearchParams(t)?t.toString():new uj(t,n).toString(r),s){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class DA{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){le.forEach(this.handlers,function(r){r!==null&&t(r)})}}const M$={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lpe=typeof URLSearchParams<"u"?URLSearchParams:uj,Fpe=typeof FormData<"u"?FormData:null,Bpe=typeof Blob<"u"?Blob:null,Upe={isBrowser:!0,classes:{URLSearchParams:Lpe,FormData:Fpe,Blob:Bpe},protocols:["http","https","file","blob","url","data"]},dj=typeof window<"u"&&typeof document<"u",gw=typeof navigator=="object"&&navigator||void 0,zpe=dj&&(!gw||["ReactNative","NativeScript","NS"].indexOf(gw.product)<0),Hpe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Wpe=dj&&window.location.href||"http://localhost",qpe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dj,hasStandardBrowserEnv:zpe,hasStandardBrowserWebWorkerEnv:Hpe,navigator:gw,origin:Wpe},Symbol.toStringTag,{value:"Module"})),_n={...qpe,...Upe};function Vpe(e,t){return Hy(e,new _n.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return _n.isNode&&le.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Kpe(e){return le.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Qpe(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}function $$(e){function t(n,r,i,s){let a=n[s++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=s>=n.length;return a=!a&&le.isArray(i)?i.length:a,c?(le.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!l):((!i[a]||!le.isObject(i[a]))&&(i[a]=[]),t(n,r,i[a],s)&&le.isArray(i[a])&&(i[a]=Qpe(i[a])),!l)}if(le.isFormData(e)&&le.isFunction(e.entries)){const n={};return le.forEachEntry(e,(r,i)=>{t(Kpe(r),i,n,0)}),n}return null}function Gpe(e,t,n){if(le.isString(e))try{return(t||JSON.parse)(e),le.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(e)}const Qf={transitional:M$,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=le.isObject(t);if(s&&le.isHTMLForm(t)&&(t=new FormData(t)),le.isFormData(t))return i?JSON.stringify($$(t)):t;if(le.isArrayBuffer(t)||le.isBuffer(t)||le.isStream(t)||le.isFile(t)||le.isBlob(t)||le.isReadableStream(t))return t;if(le.isArrayBufferView(t))return t.buffer;if(le.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Vpe(t,this.formSerializer).toString();if((l=le.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Hy(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),Gpe(t)):t}],transformResponse:[function(t){const n=this.transitional||Qf.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(le.isResponse(t)||le.isReadableStream(t))return t;if(t&&le.isString(t)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?Ge.from(l,Ge.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_n.classes.FormData,Blob:_n.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],e=>{Qf.headers[e]={}});const Ype=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xpe=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||t[n]&&Ype[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},RA=Symbol("internals");function yu(e){return e&&String(e).trim().toLowerCase()}function yp(e){return e===!1||e==null?e:le.isArray(e)?e.map(yp):String(e)}function Zpe(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Jpe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function d0(e,t,n,r,i){if(le.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!le.isString(t)){if(le.isString(r))return t.indexOf(r)!==-1;if(le.isRegExp(r))return r.test(t)}}function eme(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function tme(e,t){const n=le.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,s,a){return this[r].call(this,t,i,s,a)},configurable:!0})})}class tr{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function s(l,c,u){const d=yu(c);if(!d)throw new Error("header name must be a non-empty string");const f=le.findKey(i,d);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||c]=yp(l))}const a=(l,c)=>le.forEach(l,(u,d)=>s(u,d,c));if(le.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(le.isString(t)&&(t=t.trim())&&!Jpe(t))a(Xpe(t),n);else if(le.isHeaders(t))for(const[l,c]of t.entries())s(c,l,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=yu(t),t){const r=le.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return Zpe(i);if(le.isFunction(n))return n.call(this,i,r);if(le.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=yu(t),t){const r=le.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||d0(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function s(a){if(a=yu(a),a){const l=le.findKey(r,a);l&&(!n||d0(r,r[l],l,n))&&(delete r[l],i=!0)}}return le.isArray(t)?t.forEach(s):s(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!t||d0(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const n=this,r={};return le.forEach(this,(i,s)=>{const a=le.findKey(r,s);if(a){n[a]=yp(i),delete n[s];return}const l=t?eme(s):String(s).trim();l!==s&&delete n[s],n[l]=yp(i),r[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return le.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&le.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[RA]=this[RA]={accessors:{}}).accessors,i=this.prototype;function s(a){const l=yu(a);r[l]||(tme(i,a),r[l]=!0)}return le.isArray(t)?t.forEach(s):s(t),this}}tr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(tr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});le.freezeMethods(tr);function f0(e,t){const n=this||Qf,r=t||n,i=tr.from(r.headers);let s=r.data;return le.forEach(e,function(l){s=l.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function L$(e){return!!(e&&e.__CANCEL__)}function Uc(e,t,n){Ge.call(this,e??"canceled",Ge.ERR_CANCELED,t,n),this.name="CanceledError"}le.inherits(Uc,Ge,{__CANCEL__:!0});function F$(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Ge("Request failed with status code "+n.status,[Ge.ERR_BAD_REQUEST,Ge.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function nme(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function rme(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,s=0,a;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=r[s];a||(a=u),n[i]=c,r[i]=u;let f=s,h=0;for(;f!==i;)h+=n[f++],f=f%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),u-a<t)return;const p=d&&u-d;return p?Math.round(h*1e3/p):void 0}}function ime(e,t){let n=0,r=1e3/t,i,s;const a=(u,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),e.apply(null,u)};return[(...u)=>{const d=Date.now(),f=d-n;f>=r?a(u,d):(i=u,s||(s=setTimeout(()=>{s=null,a(i)},r-f)))},()=>i&&a(i)]}const ug=(e,t,n=3)=>{let r=0;const i=rme(50,250);return ime(s=>{const a=s.loaded,l=s.lengthComputable?s.total:void 0,c=a-r,u=i(c),d=a<=l;r=a;const f={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-a)/u:void 0,event:s,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},n)},MA=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},$A=e=>(...t)=>le.asap(()=>e(...t)),sme=_n.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,_n.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(_n.origin),_n.navigator&&/(msie|trident)/i.test(_n.navigator.userAgent)):()=>!0,ame=_n.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const a=[e+"="+encodeURIComponent(t)];le.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),le.isString(r)&&a.push("path="+r),le.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ome(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function lme(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function B$(e,t){return e&&!ome(t)?lme(e,t):t}const LA=e=>e instanceof tr?{...e}:e;function mo(e,t){t=t||{};const n={};function r(u,d,f,h){return le.isPlainObject(u)&&le.isPlainObject(d)?le.merge.call({caseless:h},u,d):le.isPlainObject(d)?le.merge({},d):le.isArray(d)?d.slice():d}function i(u,d,f,h){if(le.isUndefined(d)){if(!le.isUndefined(u))return r(void 0,u,f,h)}else return r(u,d,f,h)}function s(u,d){if(!le.isUndefined(d))return r(void 0,d)}function a(u,d){if(le.isUndefined(d)){if(!le.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function l(u,d,f){if(f in t)return r(u,d);if(f in e)return r(void 0,u)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,d,f)=>i(LA(u),LA(d),f,!0)};return le.forEach(Object.keys(Object.assign({},e,t)),function(d){const f=c[d]||i,h=f(e[d],t[d],d);le.isUndefined(h)&&f!==l||(n[d]=h)}),n}const U$=e=>{const t=mo({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:l}=t;t.headers=a=tr.from(a),t.url=R$(B$(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(le.isFormData(n)){if(_n.hasStandardBrowserEnv||_n.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([u||"multipart/form-data",...d].join("; "))}}if(_n.hasStandardBrowserEnv&&(r&&le.isFunction(r)&&(r=r(t)),r||r!==!1&&sme(t.url))){const u=i&&s&&ame.read(s);u&&a.set(i,u)}return t},cme=typeof XMLHttpRequest<"u",ume=cme&&function(e){return new Promise(function(n,r){const i=U$(e);let s=i.data;const a=tr.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=i,d,f,h,p,g;function m(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function v(){if(!y)return;const w=tr.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:w,config:e,request:y};F$(function(N){n(N),m()},function(N){r(N),m()},S),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(r(new Ge("Request aborted",Ge.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new Ge("Network Error",Ge.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const S=i.transitional||M$;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),r(new Ge(j,S.clarifyTimeoutError?Ge.ETIMEDOUT:Ge.ECONNABORTED,e,y)),y=null},s===void 0&&a.setContentType(null),"setRequestHeader"in y&&le.forEach(a.toJSON(),function(j,S){y.setRequestHeader(S,j)}),le.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),l&&l!=="json"&&(y.responseType=i.responseType),u&&([h,g]=ug(u,!0),y.addEventListener("progress",h)),c&&y.upload&&([f,p]=ug(c),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(d=w=>{y&&(r(!w||w.type?new Uc(null,e,y):w),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const x=nme(i.url);if(x&&_n.protocols.indexOf(x)===-1){r(new Ge("Unsupported protocol "+x+":",Ge.ERR_BAD_REQUEST,e));return}y.send(s||null)})},dme=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const s=function(u){if(!i){i=!0,l();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Ge?d:new Uc(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{a=null,s(new Ge(`timeout ${t} of ms exceeded`,Ge.ETIMEDOUT))},t);const l=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),e=null)};e.forEach(u=>u.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>le.asap(l),c}},fme=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},hme=async function*(e,t){for await(const n of pme(e))yield*fme(n,t)},pme=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},FA=(e,t,n,r)=>{const i=hme(e,t);let s=0,a,l=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await i.next();if(u){l(),c.close();return}let f=d.byteLength;if(n){let h=s+=f;n(h)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},Wy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",z$=Wy&&typeof ReadableStream=="function",mme=Wy&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),H$=(e,...t)=>{try{return!!e(...t)}catch{return!1}},gme=z$&&H$(()=>{let e=!1;const t=new Request(_n.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),BA=64*1024,yw=z$&&H$(()=>le.isReadableStream(new Response("").body)),dg={stream:yw&&(e=>e.body)};Wy&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!dg[t]&&(dg[t]=le.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Ge(`Response type '${t}' is not supported`,Ge.ERR_NOT_SUPPORT,r)})})})(new Response);const yme=async e=>{if(e==null)return 0;if(le.isBlob(e))return e.size;if(le.isSpecCompliantForm(e))return(await new Request(_n.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(le.isArrayBufferView(e)||le.isArrayBuffer(e))return e.byteLength;if(le.isURLSearchParams(e)&&(e=e+""),le.isString(e))return(await mme(e)).byteLength},xme=async(e,t)=>{const n=le.toFiniteNumber(e.getContentLength());return n??yme(t)},vme=Wy&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:a,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:h}=U$(e);u=u?(u+"").toLowerCase():"text";let p=dme([i,s&&s.toAbortSignal()],a),g;const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(c&&gme&&n!=="get"&&n!=="head"&&(y=await xme(d,r))!==0){let S=new Request(t,{method:"POST",body:r,duplex:"half"}),k;if(le.isFormData(r)&&(k=S.headers.get("content-type"))&&d.setContentType(k),S.body){const[N,P]=MA(y,ug($A(c)));r=FA(S.body,BA,N,P)}}le.isString(f)||(f=f?"include":"omit");const v="credentials"in Request.prototype;g=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:v?f:void 0});let x=await fetch(g);const w=yw&&(u==="stream"||u==="response");if(yw&&(l||w&&m)){const S={};["status","statusText","headers"].forEach(A=>{S[A]=x[A]});const k=le.toFiniteNumber(x.headers.get("content-length")),[N,P]=l&&MA(k,ug($A(l),!0))||[];x=new Response(FA(x.body,BA,N,()=>{P&&P(),m&&m()}),S)}u=u||"text";let j=await dg[le.findKey(dg,u)||"text"](x,e);return!w&&m&&m(),await new Promise((S,k)=>{F$(S,k,{data:j,headers:tr.from(x.headers),status:x.status,statusText:x.statusText,config:e,request:g})})}catch(v){throw m&&m(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new Ge("Network Error",Ge.ERR_NETWORK,e,g),{cause:v.cause||v}):Ge.from(v,v&&v.code,e,g)}}),xw={http:Dpe,xhr:ume,fetch:vme};le.forEach(xw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const UA=e=>`- ${e}`,bme=e=>le.isFunction(e)||e===null||e===!1,W$={getAdapter:e=>{e=le.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){n=e[s];let a;if(r=n,!bme(n)&&(r=xw[(a=String(n)).toLowerCase()],r===void 0))throw new Ge(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?s.length>1?`since :
`+s.map(UA).join(`
`):" "+UA(s[0]):"as no adapter specified";throw new Ge("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:xw};function h0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Uc(null,e)}function zA(e){return h0(e),e.headers=tr.from(e.headers),e.data=f0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),W$.getAdapter(e.adapter||Qf.adapter)(e).then(function(r){return h0(e),r.data=f0.call(e,e.transformResponse,r),r.headers=tr.from(r.headers),r},function(r){return L$(r)||(h0(e),r&&r.response&&(r.response.data=f0.call(e,e.transformResponse,r.response),r.response.headers=tr.from(r.response.headers))),Promise.reject(r)})}const q$="1.7.9",qy={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{qy[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const HA={};qy.transitional=function(t,n,r){function i(s,a){return"[Axios v"+q$+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,l)=>{if(t===!1)throw new Ge(i(a," has been removed"+(n?" in "+n:"")),Ge.ERR_DEPRECATED);return n&&!HA[a]&&(HA[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,a,l):!0}};qy.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function wme(e,t,n){if(typeof e!="object")throw new Ge("options must be an object",Ge.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],a=t[s];if(a){const l=e[s],c=l===void 0||a(l,s,e);if(c!==!0)throw new Ge("option "+s+" must be "+c,Ge.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ge("Unknown option "+s,Ge.ERR_BAD_OPTION)}}const xp={assertOptions:wme,validators:qy},mi=xp.validators;class eo{constructor(t){this.defaults=t,this.interceptors={request:new DA,response:new DA}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mo(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&xp.assertOptions(r,{silentJSONParsing:mi.transitional(mi.boolean),forcedJSONParsing:mi.transitional(mi.boolean),clarifyTimeoutError:mi.transitional(mi.boolean)},!1),i!=null&&(le.isFunction(i)?n.paramsSerializer={serialize:i}:xp.assertOptions(i,{encode:mi.function,serialize:mi.function},!0)),xp.assertOptions(n,{baseUrl:mi.spelling("baseURL"),withXsrfToken:mi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&le.merge(s.common,s[n.method]);s&&le.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),n.headers=tr.concat(a,s);const l=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,l.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let d,f=0,h;if(!c){const g=[zA.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,u),h=g.length,d=Promise.resolve(n);f<h;)d=d.then(g[f++],g[f++]);return d}h=l.length;let p=n;for(f=0;f<h;){const g=l[f++],m=l[f++];try{p=g(p)}catch(y){m.call(this,y);break}}try{d=zA.call(this,p)}catch(g){return Promise.reject(g)}for(f=0,h=u.length;f<h;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=mo(this.defaults,t);const n=B$(t.baseURL,t.url);return R$(n,t.params,t.paramsSerializer)}}le.forEach(["delete","get","head","options"],function(t){eo.prototype[t]=function(n,r){return this.request(mo(r||{},{method:t,url:n,data:(r||{}).data}))}});le.forEach(["post","put","patch"],function(t){function n(r){return function(s,a,l){return this.request(mo(l||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}eo.prototype[t]=n(),eo.prototype[t+"Form"]=n(!0)});class fj{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(l=>{r.subscribe(l),s=l}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},t(function(s,a,l){r.reason||(r.reason=new Uc(s,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new fj(function(i){t=i}),cancel:t}}}function Sme(e){return function(n){return e.apply(null,n)}}function jme(e){return le.isObject(e)&&e.isAxiosError===!0}const vw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vw).forEach(([e,t])=>{vw[t]=e});function V$(e){const t=new eo(e),n=j$(eo.prototype.request,t);return le.extend(n,eo.prototype,t,{allOwnKeys:!0}),le.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return V$(mo(e,i))},n}const en=V$(Qf);en.Axios=eo;en.CanceledError=Uc;en.CancelToken=fj;en.isCancel=L$;en.VERSION=q$;en.toFormData=Hy;en.AxiosError=Ge;en.Cancel=en.CanceledError;en.all=function(t){return Promise.all(t)};en.spread=Sme;en.isAxiosError=jme;en.mergeConfig=mo;en.AxiosHeaders=tr;en.formToJSON=e=>$$(le.isHTMLForm(e)?new FormData(e):e);en.getAdapter=W$.getAdapter;en.HttpStatusCode=vw;en.default=en;const Os=en.create({baseURL:"/api",withCredentials:!0,headers:{"Content-Type":"application/json"}}),Ke={displayProduct:async e=>{var t,n;try{console.log("VFD API: Sending product data to backend:",e);const r=await Os.post("/vfd/display",e);return console.log("VFD API: Response received:",r.data),r.data}catch(r){if(console.error("VFD API: Error calling VFD display API:",r),r&&typeof r=="object"&&"response"in r){const i=r;console.error("VFD API: Response status:",(t=i.response)==null?void 0:t.status),console.error("VFD API: Response data:",(n=i.response)==null?void 0:n.data)}return{success:!1,message:"Failed to display product on VFD",error:r instanceof Error?r.message:"Unknown error"}}},displayWelcome:async()=>{var e,t;try{console.log("VFD API: Sending welcome message to backend");const n=await Os.post("/vfd/welcome");return console.log("VFD API: Welcome response received:",n.data),n.data}catch(n){if(console.error("VFD API: Error calling VFD welcome API:",n),n&&typeof n=="object"&&"response"in n){const r=n;console.error("VFD API: Response status:",(e=r.response)==null?void 0:e.status),console.error("VFD API: Response data:",(t=r.response)==null?void 0:t.data)}return{success:!1,message:"Failed to display welcome message on VFD",error:n instanceof Error?n.message:"Unknown error"}}},displayTotal:async e=>{try{return(await Os.post("/vfd/total",{total:e})).data}catch(t){return console.error("Error calling VFD total API:",t),{success:!1,message:"Failed to display total on VFD",error:t instanceof Error?t.message:"Unknown error"}}},clearDisplay:async()=>{try{return(await Os.post("/vfd/clear")).data}catch(e){return console.error("Error calling VFD clear API:",e),{success:!1,message:"Failed to clear VFD display",error:e instanceof Error?e.message:"Unknown error"}}},getStatus:async()=>{try{return(await Os.get("/vfd/status")).data}catch(e){return console.error("Error calling VFD status API:",e),{success:!1,message:"Failed to get VFD status",error:e instanceof Error?e.message:"Unknown error"}}},reconnect:async()=>{try{return(await Os.post("/vfd/reconnect")).data}catch(e){return console.error("Error calling VFD reconnect API:",e),{success:!1,message:"Failed to reconnect VFD",error:e instanceof Error?e.message:"Unknown error"}}}},Nme=()=>{const{currentUser:e}=ko(),[t,n]=b.useState([]),[r,i]=b.useState({currentPage:1,totalPages:1,totalCount:0,hasNextPage:!1,hasPrevPage:!1}),[s,a]=b.useState(!0),[l,c]=b.useState(!1),[u,d]=b.useState(""),[f,h]=b.useState(""),[p,g]=b.useState(""),[m,y]=b.useState(""),[v,x]=b.useState([]),[w,j]=b.useState(null),[S,k]=b.useState(""),[N,P]=b.useState(1),[A]=b.useState(10),[C,_]=b.useState(!1),[R,z]=b.useState(!1),M=b.useRef(null),I=St();b.useEffect(()=>{u!==f&&c(!0);const U=setTimeout(()=>{f!==u&&(h(u),P(1))},500);return()=>clearTimeout(U)},[u,f]),b.useEffect(()=>{(async()=>{try{const ne=await pe("/api/users");if(ne.ok){const q=await ne.json();q.data&&Array.isArray(q.data.users)?x(q.data.users):Array.isArray(q)?x(q):(console.error("Unexpected user data format"),x([]))}else ne.status===401?I("/login"):(console.error("Failed to fetch users"),x([]))}catch(ne){console.error("Error fetching users:",ne),x([])}})()},[I]),b.useEffect(()=>{(async()=>{try{const ne=await Ke.getStatus();ne.success&&ne.status&&(_(ne.status.connected),ne.status.connected&&await Ke.displayWelcome())}catch(ne){console.error("Error checking VFD status:",ne),_(!1)}})()},[]),b.useEffect(()=>{const U=new AbortController,ne=async()=>{a(!0);try{const ie=new URLSearchParams({page:N.toString(),limit:A.toString()});f&&f.trim()!==""&&ie.append("search",f.trim()),p&&ie.append("startDate",p),m&&ie.append("endDate",m),w&&ie.append("userId",w.id.toString());const re=await pe(`/api/sales?${ie.toString()}`,{signal:U.signal});if(re.ok){const ee=await re.json();n(ee.sales),i(ee.pagination)}else if(re.status===401)I("/login");else try{const ee=await re.json();console.error("Failed to fetch sales:",ee)}catch{console.error("Failed to fetch sales:",re.statusText)}}catch(ie){ie instanceof Error&&ie.name!=="AbortError"&&console.error("Error fetching sales:",ie)}finally{U.signal.aborted||(a(!1),c(!1))}},q=setTimeout(()=>{ne()},100);return()=>{clearTimeout(q),U.abort()}},[I,N,A,f,p,m,w]);const $=b.useCallback(async U=>{if(d(U),setTimeout(()=>{M.current&&M.current.focus()},0),C&&U.trim())try{await Ke.displayProduct({productName:`Searching: ${U.slice(0,15)}${U.length>15?"...":""}`,price:0,total:0,quantity:0})}catch(ne){console.error("Error displaying search on VFD:",ne)}else if(C&&!U.trim())try{await Ke.displayWelcome()}catch(ne){console.error("Error displaying welcome on VFD:",ne)}},[C]);b.useEffect(()=>{const ne=setTimeout(async()=>{if(C&&!s&&t.length>=0)try{await Ke.displayProduct({productName:"Sales Found",price:t.length,total:r.totalCount,quantity:r.currentPage})}catch(q){console.error("Error displaying results count on VFD:",q)}},1e3);return()=>clearTimeout(ne)},[t.length,r.totalCount,r.currentPage,C,s]);const E=U=>{P(U)},T=b.useCallback(async U=>{try{C&&await Ke.displayProduct({productName:`Sale #${U.id}`,price:Number(U.totalAmount),total:Number(U.totalAmount),quantity:1})}catch(ne){console.error("Error displaying sale on VFD:",ne)}},[C]),D=()=>{z(!R)},H=b.useCallback(async()=>{try{(await Ke.reconnect()).success&&(_(!0),await Ke.displayWelcome())}catch(U){console.error("Error reconnecting VFD:",U)}},[]),F=()=>o.jsxs("div",{className:"flex items-center justify-between px-6 py-3 bg-white border-t border-gray-200",children:[o.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[o.jsx("button",{onClick:()=>E(r.currentPage-1),disabled:!r.hasPrevPage,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),o.jsx("button",{onClick:()=>E(r.currentPage+1),disabled:!r.hasNextPage,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),o.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",o.jsx("span",{className:"font-medium",children:(r.currentPage-1)*A+1})," to"," ",o.jsx("span",{className:"font-medium",children:Math.min(r.currentPage*A,r.totalCount)})," ","of ",o.jsx("span",{className:"font-medium",children:r.totalCount})," results"]})}),o.jsx("div",{children:o.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[o.jsxs("button",{onClick:()=>E(r.currentPage-1),disabled:!r.hasPrevPage,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"sr-only",children:"Previous"}),o.jsx(fI,{className:"h-5 w-5","aria-hidden":"true"})]}),Array.from({length:Math.min(5,r.totalPages)},(U,ne)=>{let q;return r.totalPages<=5||r.currentPage<=3?q=ne+1:r.currentPage>=r.totalPages-2?q=r.totalPages-4+ne:q=r.currentPage-2+ne,o.jsx("button",{onClick:()=>E(q),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${q===r.currentPage?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:q},q)}),o.jsxs("button",{onClick:()=>E(r.currentPage+1),disabled:!r.hasNextPage,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"sr-only",children:"Next"}),o.jsx(Pl,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]});if(s)return o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});const B=U=>{const ne=typeof U=="string"?parseFloat(U):U;return isNaN(ne)?"0.00":ne.toFixed(2)},Z=U=>{const ne="px-2 py-1 text-xs font-medium rounded-full";switch(U){case"COMPLETED":return`${ne} bg-green-100 text-green-800`;case"REFUNDED":return`${ne} bg-red-100 text-red-800`;case"PARTIALLY_REFUNDED":return`${ne} bg-yellow-100 text-yellow-800`;case"CANCELLED":return`${ne} bg-gray-100 text-gray-800`;case"HELD":return`${ne} bg-blue-100 text-blue-800`;default:return`${ne} bg-gray-100 text-gray-800`}},V=U=>{const ne="px-2 py-1 text-xs font-medium rounded-full";switch(U){case"RETAIL":return`${ne} bg-purple-100 text-purple-800`;case"WHOLESALE":return`${ne} bg-orange-100 text-orange-800`;default:return`${ne} bg-gray-100 text-gray-800`}},G=U=>{const ne="px-2 py-1 text-xs font-medium rounded-full";if(!U.isCreditSale)return`${ne} bg-green-100 text-green-800`;switch(U.paymentStatus){case"PAID":return`${ne} bg-green-100 text-green-800`;case"UNPAID":return`${ne} bg-red-100 text-red-800`;case"PARTIALLY_PAID":return`${ne} bg-yellow-100 text-yellow-800`;default:return`${ne} bg-gray-100 text-gray-800`}},X=U=>{if(!U.isCreditSale)return"Cash Sale";switch(U.paymentStatus){case"PAID":return"Credit (Paid)";case"UNPAID":return"Credit (Unpaid)";case"PARTIALLY_PAID":{const ne=typeof U.amountPaid=="string"?parseFloat(U.amountPaid):U.amountPaid,q=typeof U.totalAmount=="string"?parseFloat(U.totalAmount):U.totalAmount;return`Credit (${q>0?(ne/q*100).toFixed(0):"0"}% Paid)`}default:return"Unknown"}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Sales"}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${C?"bg-green-500":"bg-red-500"}`}),o.jsxs("span",{className:"text-sm text-gray-600",children:["VFD ",C?"Connected":"Disconnected"]}),!C&&o.jsx("button",{onClick:H,className:"text-sm text-blue-500 hover:text-blue-700 underline",children:"Reconnect"})]}),o.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600",children:o.jsx(gB,{className:"w-5 h-5"})})]})]}),R&&o.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-blue-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"VFD Display Status"}),o.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600",children:o.jsx(Lt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-4 h-4 rounded-full ${C?"bg-green-500":"bg-red-500"}`}),o.jsxs("span",{className:"text-sm font-medium",children:["Status: ",C?"Connected":"Disconnected"]})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:H,disabled:C,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reconnect"}),o.jsx("button",{onClick:async()=>{try{await Ke.clearDisplay()}catch(U){console.error("Error clearing VFD:",U)}},disabled:!C,className:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Display"}),o.jsx("button",{onClick:async()=>{try{await Ke.displayWelcome()}catch(U){console.error("Error displaying welcome:",U)}},disabled:!C,className:"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Show Welcome"})]}),o.jsx("p",{className:"text-xs text-gray-500",children:"Click on a sale row to display its information on the VFD."})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l?o.jsx(An,{className:"h-5 w-5 text-gray-400 animate-spin"}):o.jsx(ci,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{ref:M,type:"text",placeholder:"Search by sale ID or customer name...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:U=>$(U.target.value)})]}),o.jsx("div",{className:"relative w-72",children:o.jsxs(Ko,{as:"div",value:w,onChange:j,nullable:!0,children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Mv,{className:"h-5 w-5 text-gray-400"})}),o.jsx(Ko.Input,{className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:U=>k(U.target.value),displayValue:U=>(U==null?void 0:U.name)||"",placeholder:"Filter by salesperson..."}),o.jsx(Ko.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:o.jsx(dB,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),o.jsxs(Ko.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:[o.jsx(Ko.Option,{as:"div",value:null,className:({active:U})=>`relative cursor-default select-none py-2 pl-3 pr-9 ${U?"bg-blue-600 text-white":"text-gray-900"}`,children:"All Salespersons"}),v.filter(U=>U.name.toLowerCase().includes(S.toLowerCase())).map(U=>o.jsx(Ko.Option,{as:"div",value:U,className:({active:ne})=>`relative cursor-default select-none py-2 pl-3 pr-9 ${ne?"bg-blue-600 text-white":"text-gray-900"}`,children:U.name},U.id))]})]})})]}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),o.jsx("input",{type:"date",id:"start-date",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:p,onChange:U=>g(U.target.value)})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),o.jsx("input",{type:"date",id:"end-date",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:m,onChange:U=>y(U.target.value)})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale ID"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salesperson"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Refund Amount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?o.jsx("tr",{children:o.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500",children:[o.jsx(Ef,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sales found"}),o.jsx("p",{className:"text-sm text-gray-500",children:u||p||m||w?"Try adjusting your filters to see more results.":"No sales have been recorded yet."})]})}):t.map(U=>{var ne;return o.jsxs("tr",{onClick:()=>T(U),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["#",U.id]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:U.customer?U.customer.name:"Walk-in Customer"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((ne=U.user)==null?void 0:ne.name)||"Unknown"}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",B(U.totalAmount)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(U.createdAt).toLocaleString()}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",B(U.refundAmount)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:Z(U.status),children:U.status.replace("_"," ")})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:V(U.saleType),children:U.saleType})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:G(U),children:X(U)})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-4",children:[o.jsxs("button",{onClick:async q=>{q.stopPropagation(),C&&await Ke.displayProduct({productName:`Viewing Sale #${U.id}`,price:Number(U.totalAmount),total:Number(U.totalAmount),quantity:1}),I(`/sales/${U.id}`)},className:"text-blue-500 hover:text-blue-700 inline-flex items-center",children:[o.jsx(ia,{className:"w-4 h-4 mr-1"}),"View"]}),o.jsxs("button",{onClick:async q=>{q.stopPropagation(),C&&await Ke.displayProduct({productName:`Editing Sale #${U.id}`,price:Number(U.totalAmount),total:Number(U.totalAmount),quantity:1}),I(`/sales/${U.id}/edit`)},className:"text-green-500 hover:text-green-700 inline-flex items-center",children:[o.jsx(Kg,{className:"w-4 h-4 mr-1"}),"Edit"]}),(e==null?void 0:e.role)==="ADMIN"&&o.jsxs("button",{onClick:async q=>{if(q.stopPropagation(),window.confirm("Are you sure you want to delete this sale?"))try{if(C&&await Ke.displayProduct({productName:`Deleting Sale #${U.id}`,price:0,total:0,quantity:0}),(await pe(`/api/sales/${U.id}`,{method:"DELETE"})).ok){const re=new URLSearchParams({page:N.toString(),limit:A.toString()});f&&re.append("search",f),p&&re.append("startDate",p),m&&re.append("endDate",m),w&&re.append("userId",w.id.toString());const ee=await pe(`/api/sales?${re.toString()}`);if(ee.ok){const he=await ee.json();n(he.sales),i(he.pagination),C&&await Ke.displayProduct({productName:`Sale #${U.id} Deleted`,price:0,total:he.pagination.totalCount,quantity:1})}}else throw new Error("Failed to delete sale")}catch(ie){console.error("Error deleting sale:",ie),alert("Failed to delete sale. Please try again."),C&&await Ke.displayProduct({productName:"Delete Failed",price:0,total:0,quantity:0})}},className:"text-red-500 hover:text-red-700 inline-flex items-center",children:[o.jsx(Rn,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]},U.id)})})]}),r.totalPages>1&&o.jsx(F,{})]})]})},kme=({items:e,totalAmount:t,type:n,customer:r,salesperson:i,paymentMethod:s="CASH",creditPercentage:a=0,baseTotal:l,saleId:c})=>{var m;const[u,d]=b.useState(null),[f,h]=b.useState(!0);if(b.useEffect(()=>{(async()=>{try{const v=await pe(`${Or()}/settings/company`);if(v.ok){const x=await v.json();console.log("Fetched settings:",x),d(x)}else console.error("Failed to fetch settings:",v.status)}catch(v){console.error("Error fetching settings:",v)}finally{h(!1)}})()},[]),f)return o.jsx("div",{children:"Loading..."});const p=new Date().toLocaleString("en-US",{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),g=c?c.toString().padStart(7,"0"):"PREVIEW";if(n==="invoice"){const x=[];let w=[...e];for(w.length>0&&(x.push(w.slice(0,18)),w=w.slice(18));w.length>0;)x.push(w.slice(0,21)),w=w.slice(21);const j=x.length,P=(((m=x[x.length-1])==null?void 0:m.length)||0)>(j===1?15:18),A=P?j+1:j;return o.jsxs(o.Fragment,{children:[x.map((C,_)=>o.jsxs("div",{className:"print-invoice bg-white",style:{width:"148mm",height:"210mm",fontFamily:"Arial",position:"relative",padding:"0",margin:"0 auto",boxSizing:"border-box"},children:[_===0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{width:"100%",marginBottom:"1px"},children:[o.jsx("div",{style:{textAlign:"center",borderBottom:"1px solid black",paddingBottom:"1px"},children:o.jsx("h1",{style:{margin:"0",marginBottom:"1px",fontSize:"20px",fontWeight:"bold"},children:(u==null?void 0:u.companyName)||"COMPANY NAME"})}),o.jsx("div",{style:{textAlign:"left",marginTop:"1px"},children:o.jsxs("p",{style:{margin:0,whiteSpace:"nowrap",fontSize:"14px"},children:[u!=null&&u.address?`P.O. Box ${u.address}. `:"",u!=null&&u.phone1?`Tel: ${u.phone1}`:"",u!=null&&u.phone2?`, ${u.phone2}`:"",u!=null&&u.location?` Loc: ${u.location}`:""]})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",marginBottom:"1px",fontSize:"14px"},children:[o.jsx("div",{style:{textAlign:"left"},children:o.jsxs("span",{children:["Receipt: ",g]})}),o.jsx("div",{style:{textAlign:"right"},children:o.jsxs("span",{children:["Customer: ",r?r.name:"WALK-IN CUSTOMER"]})})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",marginBottom:"1px",fontSize:"14px"},children:[o.jsx("div",{style:{textAlign:"left"},children:o.jsxs("span",{children:["Date: ",p]})}),o.jsx("div",{style:{textAlign:"center",fontWeight:"bold"},children:o.jsx("span",{style:{fontSize:"16px"},children:"INVOICE"})}),o.jsx("div",{style:{textAlign:"right"},children:r&&r.phone&&o.jsxs("span",{children:["Phone: ",r.phone]})})]})]}):o.jsx(o.Fragment,{}),o.jsxs("div",{style:{width:"100%",border:"1px solid black"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"55% 15% 15% 15%",borderBottom:"1px solid black"},children:[o.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",fontWeight:"bold",textAlign:"center",fontSize:"14px"},children:"Name"}),o.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",textAlign:"center",fontWeight:"bold",fontSize:"14px"},children:"Quantity"}),o.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",textAlign:"center",fontWeight:"bold",fontSize:"14px"},children:"Price"}),o.jsx("div",{style:{padding:"2px 6px",textAlign:"center",fontWeight:"bold",fontSize:"14px"},children:"Amount"})]}),C.map((R,z)=>o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"55% 15% 15% 15%",borderBottom:z===C.length-1?"none":"1px solid black",minHeight:"16px"},children:[o.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",fontSize:"13px"},children:R.name}),o.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",textAlign:"center",fontSize:"13px"},children:R.quantity}),o.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",textAlign:"center",fontSize:"13px"},children:R.price.toFixed(2)}),o.jsx("div",{style:{padding:"2px 6px",textAlign:"center",fontSize:"13px"},children:R.total.toFixed(2)})]},R.id))]}),_===x.length-1&&!P&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{borderTop:"1px solid black",paddingTop:"4px",textAlign:"right",marginBottom:"8px"},children:o.jsxs("span",{style:{fontWeight:"bold",fontSize:"16px"},children:["Total: GH",t.toFixed(2),a&&a>0&&o.jsx("span",{style:{marginLeft:"8px",fontSize:"14px"}})]})}),o.jsxs("div",{style:{fontSize:"14px",marginBottom:"4px",marginTop:"8px"},children:[o.jsx("p",{style:{fontWeight:"bold",margin:0},children:"Sales Person:"}),o.jsx("p",{style:{margin:0},children:(i==null?void 0:i.name)||"Unknown"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px",marginTop:"16px",marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"bold",margin:0,whiteSpace:"nowrap"},children:"Served by:"}),o.jsx("div",{style:{borderBottom:"1px dotted black",height:"20px",flex:1}})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"bold",margin:0,whiteSpace:"nowrap"},children:"Checked by:"}),o.jsx("div",{style:{borderBottom:"1px dotted black",height:"20px",flex:1}})]})]}),o.jsx("div",{style:{textAlign:"center",fontSize:"14px",margin:"8px 0",fontWeight:"bold"},children:(u==null?void 0:u.mobileMoneyNumber)&&o.jsxs("p",{style:{margin:0},children:["Please pay through Mobile Money ",u.mobileMoneyNumber]})})]}),o.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"4px",right:"4px",fontSize:"12px"},children:[_>0&&o.jsx(o.Fragment,{children:o.jsx("div",{style:{textAlign:"center",borderBottom:"1px solid black",paddingBottom:"2px",marginBottom:"4px"},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"30% 40% 30%",fontSize:"11px",gap:"4px"},children:[o.jsx("div",{style:{textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(u==null?void 0:u.companyName)||"COMPANY NAME"}),o.jsxs("div",{style:{textAlign:"center"},children:["Receipt: ",g]}),o.jsxs("div",{style:{textAlign:"right",display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[o.jsx("span",{style:{whiteSpace:"nowrap",marginRight:"4px"},children:"Customer:"}),o.jsx("span",{style:{whiteSpace:"nowrap"},children:r?r.name:"WALK-IN CUSTOMER"})]})]})})}),o.jsx("div",{style:{textAlign:"center",marginTop:"2px"},children:o.jsxs("span",{children:["Page ",_+1," of ",A]})})]})]},_)),P&&o.jsxs("div",{className:"print-invoice bg-white",style:{width:"148mm",height:"210mm",fontFamily:"Arial",position:"relative",padding:"0",margin:"0 auto",boxSizing:"border-box"},children:[o.jsx("div",{style:{borderTop:"1px solid black",paddingTop:"4px",textAlign:"right",marginBottom:"8px",marginTop:"20px"},children:o.jsxs("span",{style:{fontWeight:"bold",fontSize:"16px"},children:["Total: GH",t.toFixed(2),a&&a>0&&o.jsxs("span",{style:{marginLeft:"8px",fontSize:"14px"},children:["C: ",a]})]})}),o.jsxs("div",{style:{fontSize:"14px",marginBottom:"4px",marginTop:"8px"},children:[o.jsx("p",{style:{fontWeight:"bold",margin:0},children:"Sales Person:"}),o.jsx("p",{style:{margin:0},children:(i==null?void 0:i.name)||"Unknown"})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px",marginTop:"16px",marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"bold",margin:0,whiteSpace:"nowrap"},children:"Served by:"}),o.jsx("div",{style:{borderBottom:"1px dotted black",height:"20px",flex:1}})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("p",{style:{fontSize:"14px",fontWeight:"bold",margin:0,whiteSpace:"nowrap"},children:"Checked by:"}),o.jsx("div",{style:{borderBottom:"1px dotted black",height:"20px",flex:1}})]})]}),o.jsx("div",{style:{textAlign:"center",fontSize:"14px",margin:"8px 0",fontWeight:"bold"},children:(u==null?void 0:u.mobileMoneyNumber)&&o.jsxs("p",{style:{margin:0},children:["Please pay through Mobile Money ",u.mobileMoneyNumber]})}),o.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"4px",right:"4px",fontSize:"12px"},children:[o.jsx("div",{style:{textAlign:"center",borderBottom:"1px solid black",paddingBottom:"2px",marginBottom:"4px"},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"30% 40% 30%",fontSize:"11px",gap:"4px"},children:[o.jsx("div",{style:{textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(u==null?void 0:u.companyName)||"COMPANY NAME"}),o.jsxs("div",{style:{textAlign:"center"},children:["Receipt: ",g]}),o.jsxs("div",{style:{textAlign:"right",display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[o.jsx("span",{style:{whiteSpace:"nowrap",marginRight:"4px"},children:"Customer:"}),o.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:"0"},children:r?r.name:"WALK-IN CUSTOMER"})]})]})}),o.jsx("div",{style:{textAlign:"center",marginTop:"2px"},children:o.jsxs("span",{children:["Page ",A," of ",A]})})]})]},"total-page")]})}return n==="receipt"?o.jsxs("div",{className:"print-receipt bg-white",style:{width:"80mm",fontFamily:"Arial",fontSize:"16px",lineHeight:"1.3",padding:"1mm 2mm",margin:"0 auto",boxSizing:"border-box",overflowWrap:"break-word",wordWrap:"break-word"},children:[o.jsxs("div",{className:"w-full text-center",style:{marginBottom:"1px"},children:[o.jsx("div",{style:{borderBottom:"1px solid black",marginBottom:"1px"},children:o.jsx("h1",{className:"text-lg font-bold mb-1",children:(u==null?void 0:u.companyName)||"COMPANY NAME"})}),o.jsxs("p",{className:"text-xs",style:{marginBottom:0},children:[u!=null&&u.address?`P.O. Box ${u.address}. `:"",u!=null&&u.phone1?`Tel: ${u.phone1}`:"",u!=null&&u.phone2?`, ${u.phone2}`:"",u!=null&&u.location?` Loc: ${u.location}`:""]})]}),o.jsxs("div",{className:"grid grid-cols-2 mb-1 text-xs",children:[o.jsx("div",{className:"text-left",children:o.jsxs("span",{children:["Receipt #: ",g]})}),o.jsx("div",{className:"text-right",children:o.jsxs("span",{children:["Customer: ",(r==null?void 0:r.name)||"WALK-IN CUSTOMER"]})})]}),o.jsxs("div",{className:"grid grid-cols-3 mb-2 text-[10px]",children:[o.jsx("div",{className:"text-left",children:o.jsxs("span",{children:["Date: ",p]})}),o.jsx("div",{className:"text-center font-bold",children:o.jsx("span",{children:"RECEIPT"})}),o.jsx("div",{className:"text-right",children:(r==null?void 0:r.phone)&&o.jsxs("span",{children:["Phone: ",r.phone]})})]}),o.jsxs("div",{style:{width:"100%",border:"1px solid black"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"60% 20% 20%",borderTop:"1px solid black",borderBottom:"1px solid black"},children:[o.jsx("div",{style:{padding:"2px",borderRight:"1px solid black",fontWeight:"bold",fontSize:"13px"},children:"Item"}),o.jsx("div",{style:{padding:"2px",borderRight:"1px solid black",textAlign:"center",fontWeight:"bold",fontSize:"13px"},children:"Qty"}),o.jsx("div",{style:{padding:"2px",textAlign:"center",fontWeight:"bold",fontSize:"13px"},children:"Amount"})]}),e.map(y=>o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"60% 20% 20%",borderBottom:"1px solid black"},children:[o.jsx("div",{style:{padding:"2px",borderRight:"1px solid black",fontSize:"14px"},children:y.name}),o.jsx("div",{style:{padding:"2px",borderRight:"1px solid black",textAlign:"center",fontSize:"13px"},children:y.quantity}),o.jsx("div",{style:{padding:"2px",textAlign:"center",fontSize:"13px"},children:(y.quantity*y.price).toFixed(2)})]},y.id))]}),o.jsx("div",{className:"border-t border-black mt-1 pt-1",style:{display:"flex",justifyContent:"flex-end",width:"100%"},children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"2px",fontWeight:"bold",fontSize:"16px",whiteSpace:"nowrap"},children:[o.jsx("span",{children:"Total:"}),o.jsxs("span",{children:["GH ",t.toFixed(2)]}),a&&a>0&&o.jsxs("span",{style:{marginLeft:"8px",fontSize:"14px"},children:["C: ",a]})]})}),o.jsxs("div",{className:"text-xs my-2",children:[o.jsx("p",{className:"font-bold",children:"Sales Person:"}),o.jsx("p",{children:(i==null?void 0:i.name)||"Unknown"})]}),(u==null?void 0:u.mobileMoneyNumber)&&o.jsxs("div",{className:"text-center mt-2 text-sm",children:[o.jsx("p",{className:"font-bold",children:"Payment Information"}),o.jsxs("p",{children:["Mobile Money: ",u.mobileMoneyNumber]})]}),o.jsxs("div",{className:"mt-2 text-center text-xs",children:[o.jsx("p",{children:"Thank you for your business!"}),o.jsx("span",{children:"Page 1 of 1"})]})]}):null};class xl{constructor(){this.printerSettings=null,this.settingsLoaded=!1}static getInstance(){return xl.instance||(xl.instance=new xl),xl.instance}async loadPrinterSettings(){if(this.settingsLoaded&&this.printerSettings)return this.printerSettings;try{const t=await Os.get("/settings/printers");return this.printerSettings=t.data,this.settingsLoaded=!0,this.printerSettings}catch(t){return console.warn("No printer settings found, using defaults"),console.error("Error loading printer settings:",t),this.printerSettings={wholesale:null,retail:null},this.settingsLoaded=!0,this.printerSettings}}async getWholesalePrinter(){const t=await this.loadPrinterSettings();return(t==null?void 0:t.wholesale)||null}async getRetailPrinter(){const t=await this.loadPrinterSettings();return(t==null?void 0:t.retail)||null}async printInvoice(t){const n=await this.getWholesalePrinter();if(!n)throw new Error("No wholesale printer configured. Please set up a printer for A5 invoices in Settings > Printer Setup.");return this.sendPrintJob({type:"invoice",data:t,printerConfig:n})}async printReceipt(t){const n=await this.getRetailPrinter();if(!n)throw new Error("No retail printer configured. Please set up a printer for receipts in Settings > Printer Setup.");return this.sendPrintJob({type:"receipt",data:t,printerConfig:n})}async sendPrintJob(t){var n,r,i,s,a,l;try{const c=await this.generateHtmlContent(t),u=await Os.post("/printer/print",{printer:t.printerConfig,type:t.type,data:t.data,htmlContent:c});return console.log("Print job successful:",u.data),!0}catch(c){if(console.error("Print job failed:",c),c&&typeof c=="object"&&"response"in c){const u=c;if(((n=u.response)==null?void 0:n.status)===500){const d=((i=(r=u.response)==null?void 0:r.data)==null?void 0:i.message)||"Printer error occurred";throw d.includes("timeout")||d.includes("Network printer timeout")?new Error("Printer connection timeout. Please check if the printer is online and accessible."):d.includes("not found")||d.includes("not available")?new Error("Printer not found. Please check printer settings and ensure the printer is connected."):new Error(`Printer error: ${d}`)}else throw((s=u.response)==null?void 0:s.status)===404?new Error("Printer service not available. Please contact support."):new Error(((l=(a=u.response)==null?void 0:a.data)==null?void 0:l.message)||u.message||"Print job failed")}else throw new Error("Print job failed with unknown error")}}async generateHtmlContent(t){const n=new Date().toLocaleDateString(),r=new Date().toLocaleTimeString();return t.type==="receipt"?`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Receipt</title>
  <style>
    @page { size: 80mm auto; margin: 0mm; }
    body { 
      font-family: Arial, sans-serif; 
      font-size: 9px; 
      line-height: 1.2; 
      margin: 0; 
      padding: 2mm; 
      width: 76mm;
    }
    .center { text-align: center; }
    .right { text-align: right; }
    .bold { font-weight: bold; }
    .header { margin-bottom: 10px; }
    .divider { border-bottom: 1px solid #000; margin: 5px 0; }
    .item-line { margin: 2px 0; }
    .total-section { margin-top: 10px; border-top: 1px solid #000; padding-top: 5px; }
  </style>
</head>
<body>
  <div class="center header">
    <div class="bold" style="font-size: 12px;">RECEIPT</div>
    <div class="divider"></div>
  </div>
  
  <div class="info-section">
    <div>Date: ${n}</div>
    <div>Time: ${r}</div>
    ${t.data.customer?`<div>Customer: ${t.data.customer.name}</div>`:""}
    <div class="divider"></div>
  </div>
  
  <div class="items-section">
    ${t.data.items.map(i=>`
      <div class="item-line">
        <div>${i.name}</div>
        <div>&nbsp;&nbsp;${i.quantity} ${i.unit} @ $${i.price.toFixed(2)} = $${i.total.toFixed(2)}</div>
      </div>
    `).join("")}
  </div>
  
  <div class="total-section">
    <div class="bold">TOTAL: $${t.data.totalAmount.toFixed(2)}</div>
    ${t.data.paymentMethod?`<div>Payment: ${t.data.paymentMethod}</div>`:""}
    <div class="divider"></div>
    <div class="center">Thank you for your business!</div>
  </div>
</body>
</html>`:`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Invoice</title>
  <style>
    @page { size: A5 portrait; margin: 10mm; }
    body { 
      font-family: Arial, sans-serif; 
      font-size: 11px; 
      line-height: 1.4; 
      margin: 0; 
      padding: 0;
    }
    .center { text-align: center; }
    .right { text-align: right; }
    .bold { font-weight: bold; }
    .header { margin-bottom: 15px; }
    .company-name { font-size: 16px; font-weight: bold; margin-bottom: 5px; }
    .divider { border-bottom: 1px solid #000; margin: 8px 0; }
    .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0; }
    .items-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    .items-table th, .items-table td { 
      border: 1px solid #000; 
      padding: 5px; 
      text-align: left; 
    }
    .items-table th { 
      background-color: #f0f0f0; 
      font-weight: bold; 
    }
    .total-section { margin-top: 15px; }
  </style>
</head>
<body>
  <div class="center header">
    <div class="company-name">INVOICE</div>
    <div class="divider"></div>
  </div>
  
  <div class="info-grid">
    <div>
      <div>Date: ${n}</div>
      <div>Time: ${r}</div>
    </div>
    <div>
      ${t.data.customer?`
        <div><strong>Customer:</strong> ${t.data.customer.name}</div>
        ${t.data.customer.address?`<div><strong>Address:</strong> ${t.data.customer.address}</div>`:""}
        ${t.data.customer.phone?`<div><strong>Phone:</strong> ${t.data.customer.phone}</div>`:""}
      `:"<div>Customer: WALK-IN</div>"}
    </div>
  </div>
  
  <table class="items-table">
    <thead>
      <tr>
        <th>ITEM</th>
        <th>QTY</th>
        <th>UNIT PRICE</th>
        <th>TOTAL</th>
      </tr>
    </thead>
    <tbody>
      ${t.data.items.map(i=>`
        <tr>
          <td>${i.name}</td>
          <td>${i.quantity} ${i.unit}</td>
          <td>$${i.price.toFixed(2)}</td>
          <td>$${i.total.toFixed(2)}</td>
        </tr>
      `).join("")}
    </tbody>
  </table>
  
  <div class="total-section">
    <div class="divider"></div>
    <div class="right bold" style="font-size: 14px;">TOTAL AMOUNT: $${t.data.totalAmount.toFixed(2)}</div>
    ${t.data.paymentMethod?`<div class="right">Payment Method: ${t.data.paymentMethod}</div>`:""}
    ${t.data.creditPercentage?`<div class="right">Credit Surcharge: ${t.data.creditPercentage}%</div>`:""}
    <div class="divider"></div>
    <div class="center">Thank you for your business!</div>
  </div>
</body>
</html>`}refreshSettings(){this.settingsLoaded=!1,this.printerSettings=null}async checkPrinterConfiguration(){const t=await this.loadPrinterSettings();return{wholesale:!!(t!=null&&t.wholesale),retail:!!(t!=null&&t.retail)}}}const fg=xl.getInstance();var K$={exports:{}};const Pme={},Cme=Object.freeze(Object.defineProperty({__proto__:null,default:Pme},Symbol.toStringTag,{value:"Module"})),Ame=AL(Cme);(function(e,t){/**
 * @version 2.2.5
 * @overview QZ Tray Connector
 * @license LGPL-2.1-only
 * <p/>
 * Connects a web client to the QZ Tray software.
 * Enables printing and device communication from javascript.
 */var n=function(){Array.isArray||(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}),Number.isInteger||(Number.isInteger=function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a});var r={VERSION:"2.2.5",DEBUG:!1,log:{trace:function(){r.DEBUG&&console.log.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},allay:function(){r.DEBUG&&console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}},streams:{serial:"SERIAL",usb:"USB",hid:"HID",printer:"PRINTER",file:"FILE",socket:"SOCKET"},websocket:{connection:null,shutdown:!1,connectConfig:{host:["localhost","localhost.qz.io"],hostIndex:0,usingSecure:!0,protocol:{secure:"wss://",insecure:"ws://"},port:{secure:[8181,8282,8383,8484],insecure:[8182,8283,8384,8485],portIndex:0},keepAlive:60,retries:0,delay:0},setup:{findConnection:function(a,l,c){if(r.websocket.shutdown){c(new Error("Connection attempt cancelled by user"));return}if(a.port.secure.length)!a.port.insecure.length&&!a.usingSecure&&(r.log.trace("No insecure ports specified - forcing secure connection"),a.usingSecure=!0);else if(a.port.insecure.length)a.usingSecure&&(r.log.error("No secure ports specified - forcing insecure connection"),a.usingSecure=!1);else{c(new Error("No ports have been specified to connect over"));return}var u=function(){if(r.websocket.shutdown){c(new Error("Connection attempt cancelled by user"));return}if(a.port.portIndex++,a.usingSecure&&a.port.portIndex>=a.port.secure.length||!a.usingSecure&&a.port.portIndex>=a.port.insecure.length)if(a.hostIndex>=a.host.length-1){c(new Error("Unable to establish connection with QZ"));return}else a.hostIndex++,a.port.portIndex=0;r.websocket.setup.findConnection(a,l,c)},d;a.usingSecure?d=a.protocol.secure+a.host[a.hostIndex]+":"+a.port.secure[a.port.portIndex]:d=a.protocol.insecure+a.host[a.hostIndex]+":"+a.port.insecure[a.port.portIndex];try{r.log.trace("Attempting connection",d),r.websocket.connection=new r.tools.ws(d)}catch(f){r.log.error(f),u();return}r.websocket.connection!=null?(r.websocket.connection.established=!1,r.websocket.connection.onopen=function(f){if(!r.websocket.connection.established&&(r.log.trace(f),r.log.info("Established connection with QZ Tray on "+d),r.websocket.setup.openConnection({resolve:l,reject:c}),a.keepAlive>0)){var h=setInterval(function(){if(!r.tools.isActive()||r.websocket.connection.interval!==h){clearInterval(h);return}r.websocket.connection.send("ping")},a.keepAlive*1e3);r.websocket.connection.interval=h}},r.websocket.connection.onclose=function(){r.websocket.connection&&typeof navigator<"u"&&navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&r.websocket.connection.onerror()},r.websocket.connection.onerror=function(f){r.log.trace(f),r.websocket.connection=null,u()}):c(new Error("Unable to create a websocket connection"))},openConnection:function(a){r.websocket.connection.established=!0,r.websocket.connection.onclose=function(c){r.log.trace(c),r.websocket.connection=null,r.websocket.callClose(c),r.log.info("Closed connection with QZ Tray");for(var u in r.websocket.pendingCalls)r.websocket.pendingCalls.hasOwnProperty(u)&&r.websocket.pendingCalls[u].reject(new Error("Connection closed before response received"));this.promise!=null&&this.promise.resolve()},r.websocket.connection.onerror=function(c){r.websocket.callError(c)},r.websocket.connection.sendData=function(c){r.log.trace("Preparing object for websocket",c),c.timestamp==null&&(c.timestamp=Date.now(),typeof c.timestamp!="number"&&(c.timestamp=new Date().getTime())),c.promise!=null&&(c.uid=r.websocket.setup.newUID(),r.websocket.pendingCalls[c.uid]=c.promise),c.position={x:typeof screen<"u"?(screen.availWidth||screen.width)/2+(screen.left||screen.availLeft||0):0,y:typeof screen<"u"?(screen.availHeight||screen.height)/2+(screen.top||screen.availTop||0):0};try{if(c.call!=null&&c.signature==null&&r.security.needsSigned(c.call)){var u={call:c.call,params:c.params,timestamp:c.timestamp},d=r.tools.hash(r.tools.stringify(u));d.then||(d=r.tools.promise(function(f){f(d)})),d.then(function(f){return r.security.callSign(f)}).then(function(f){r.log.trace("Signature for call",f),c.signature=f||"",c.signAlgorithm=r.security.signAlgorithm,r.signContent=void 0,r.websocket.connection.send(r.tools.stringify(c))}).catch(function(f){r.log.error("Signing failed",f),c.promise!=null&&(c.promise.reject(new Error("Failed to sign request")),delete r.websocket.pendingCalls[c.uid])})}else r.log.trace("Signature for call",c.signature),r.websocket.connection.send(r.tools.stringify(c))}catch(f){r.log.error(f),c.promise!=null&&(c.promise.reject(f),delete r.websocket.pendingCalls[c.uid])}},r.websocket.connection.onmessage=function(c){var u=JSON.parse(c.data);if(u.uid==null){if(u.type==null)r.websocket.connection.close(4003,"Connected to incompatible QZ Tray version");else switch(u.type){case r.streams.serial:u.event||(u.event=JSON.stringify({portName:u.key,output:u.data})),r.serial.callSerial(JSON.parse(u.event));break;case r.streams.socket:r.socket.callSocket(JSON.parse(u.event));break;case r.streams.usb:u.event||(u.event=JSON.stringify({vendorId:u.key[0],productId:u.key[1],output:u.data})),r.usb.callUsb(JSON.parse(u.event));break;case r.streams.hid:r.hid.callHid(JSON.parse(u.event));break;case r.streams.printer:r.printers.callPrinter(JSON.parse(u.event));break;case r.streams.file:r.file.callFile(JSON.parse(u.event));break;default:r.log.allay("Cannot determine stream type for callback",u);break}return}r.log.trace("Received response from websocket",u);var d=r.websocket.pendingCalls[u.uid];d==null?r.log.allay("No promise found for returned response"):u.error!=null?d.reject(new Error(u.error)):d.resolve(u.result),delete r.websocket.pendingCalls[u.uid]};function l(c){c===void 0&&(c=null),s.api.getVersion().then(function(u){r.websocket.connection.version=u,r.websocket.connection.semver=u.toLowerCase().replace(/-rc\./g,"-rc").split(/[\\+\\.-]/g);for(var d=0;d<r.websocket.connection.semver.length;d++){try{if(d==3&&r.websocket.connection.semver[d].toLowerCase().indexOf("rc")==0){r.websocket.connection.semver[d]=-r.websocket.connection.semver[d].replace(/\D/g,"");continue}r.websocket.connection.semver[d]=parseInt(r.websocket.connection.semver[d])}catch{}r.websocket.connection.semver.length<4&&(r.websocket.connection.semver[3]=0)}r.compatible.algorithm(!0)}).then(function(){r.websocket.connection.sendData({certificate:c,promise:a})})}r.security.callCert().then(l).catch(function(c){r.log.warn("Failed to get certificate:",c),r.security.rejectOnCertFailure?a.reject(c):l(null)})},newUID:function(){var a=6;return(new Array(a+1).join("0")+(Math.random()*Math.pow(36,a)<<0).toString(36)).slice(-a)}},dataPromise:function(a,l,c,u){return r.tools.promise(function(d,f){var h={call:a,promise:{resolve:d,reject:f},params:l,signature:c,timestamp:u};r.websocket.connection.sendData(h)})},pendingCalls:{},errorCallbacks:[],callError:function(a){if(Array.isArray(r.websocket.errorCallbacks))for(var l=0;l<r.websocket.errorCallbacks.length;l++)r.websocket.errorCallbacks[l](a);else r.websocket.errorCallbacks(a)},closedCallbacks:[],callClose:function(a){if(Array.isArray(r.websocket.closedCallbacks))for(var l=0;l<r.websocket.closedCallbacks.length;l++)r.websocket.closedCallbacks[l](a);else r.websocket.closedCallbacks(a)}},printing:{defaultConfig:{bounds:null,colorType:"color",copies:1,density:0,duplex:!1,fallbackDensity:null,interpolation:"bicubic",jobName:null,legacy:!1,margins:0,orientation:null,paperThickness:null,printerTray:null,rasterize:!1,rotation:0,scaleContent:!0,size:null,units:"in",forceRaw:!1,encoding:null,spool:null}},serial:{serialCallbacks:[],callSerial:function(a){if(Array.isArray(r.serial.serialCallbacks))for(var l=0;l<r.serial.serialCallbacks.length;l++)r.serial.serialCallbacks[l](a);else r.serial.serialCallbacks(a)}},socket:{socketCallbacks:[],callSocket:function(a){if(Array.isArray(r.socket.socketCallbacks))for(var l=0;l<r.socket.socketCallbacks.length;l++)r.socket.socketCallbacks[l](a);else r.socket.socketCallbacks(a)}},usb:{usbCallbacks:[],callUsb:function(a){if(Array.isArray(r.usb.usbCallbacks))for(var l=0;l<r.usb.usbCallbacks.length;l++)r.usb.usbCallbacks[l](a);else r.usb.usbCallbacks(a)}},hid:{hidCallbacks:[],callHid:function(a){if(Array.isArray(r.hid.hidCallbacks))for(var l=0;l<r.hid.hidCallbacks.length;l++)r.hid.hidCallbacks[l](a);else r.hid.hidCallbacks(a)}},printers:{printerCallbacks:[],callPrinter:function(a){if(Array.isArray(r.printers.printerCallbacks))for(var l=0;l<r.printers.printerCallbacks.length;l++)r.printers.printerCallbacks[l](a);else r.printers.printerCallbacks(a)}},file:{fileCallbacks:[],callFile:function(a){if(Array.isArray(r.file.fileCallbacks))for(var l=0;l<r.file.fileCallbacks.length;l++)r.file.fileCallbacks[l](a);else r.file.fileCallbacks(a)}},security:{certHandler:function(a,l){l()},callCert:function(){return typeof r.security.certHandler.then=="function"?r.security.certHandler:r.security.certHandler.constructor.name==="AsyncFunction"?r.security.certHandler():r.tools.promise(r.security.certHandler)},signatureFactory:function(){return function(a){a()}},callSign:function(a){return r.security.signatureFactory.constructor.name==="AsyncFunction"?r.security.signatureFactory(a):r.tools.promise(r.security.signatureFactory(a))},signAlgorithm:"SHA1",rejectOnCertFailure:!1,needsSigned:function(a){const l=["printers.getStatus","printers.stopListening","usb.isClaimed","usb.closeStream","usb.releaseDevice","hid.stopListening","hid.isClaimed","hid.closeStream","hid.releaseDevice","file.stopListening","getVersion"];return a!=null&&l.indexOf(a)===-1}},tools:{promise:function(a){if(typeof RSVP<"u")return new RSVP.Promise(a);if(typeof Promise<"u")return new Promise(a);r.log.error("Promise/A+ support is required.  See qz.api.setPromiseType(...)")},reject:function(a){return r.tools.promise(function(l,c){c(a)})},stringify:function(a){var l=Array.prototype.toJSON;delete Array.prototype.toJSON;function c(d,f){if(d!=="promise")return f}var u=JSON.stringify(a,c);return l&&(Array.prototype.toJSON=l),u},hash:function(a){return typeof Sha256<"u"?Sha256.hash(a):r.SHA.hash(a)},ws:typeof WebSocket<"u"?WebSocket:null,absolute:function(a){if(typeof window<"u"&&typeof document.createElement=="function"){var l=document.createElement("a");return l.href=a,l.href}else Ame.resolve(a);return a},relative:function(a){for(var l=0;l<a.length;l++)if(a[l].constructor===Object){var c=!1;a[l].data&&a[l].data.search&&a[l].data.search(/data:image\/\w+;base64,/)===0?(a[l].flavor="base64",a[l].data=a[l].data.replace(/^data:image\/\w+;base64,/,"")):a[l].flavor?["FILE","XML"].indexOf(a[l].flavor.toUpperCase())>-1&&(c=!0):(a[l].format&&["HTML","IMAGE","PDF","FILE","XML"].indexOf(a[l].format.toUpperCase())>-1||a[l].type&&(["PIXEL","IMAGE","PDF"].indexOf(a[l].type.toUpperCase())>-1&&!a[l].format||["HTML","PDF"].indexOf(a[l].type.toUpperCase())>-1&&(!a[l].format||a[l].format.toUpperCase()==="FILE")))&&(c=!0),c&&(a[l].data=r.tools.absolute(a[l].data)),a[l].options&&typeof a[l].options.overlay=="string"&&(a[l].options.overlay=r.tools.absolute(a[l].options.overlay))}},extend:function(a){typeof a!="object"&&(a={});for(var l=1;l<arguments.length;l++){var c=arguments[l];if(c){for(var u in c)if(c.hasOwnProperty(u)){if(a===c[u])continue;if(c[u]&&c[u].constructor&&c[u].constructor===Object){var d;Array.isArray(c[u])?d=a[u]||[]:d=a[u]||{},a[u]=r.tools.extend(d,c[u])}else c[u]!==void 0&&(a[u]=c[u])}}}return a},versionCompare:function(a,l,c,u){if(r.tools.assertActive()){var d=r.websocket.connection.semver;return d[0]!=a?d[0]-a:l!=null&&d[1]!=l?d[1]-l:c!=null&&d[2]!=c?d[2]-c:u!=null&&d.length>3&&d[3]!=u?Number.isInteger(d[3])&&Number.isInteger(u)?d[3]-u:d[3].toString().localeCompare(u.toString()):0}},isVersion:function(a,l,c,u){return r.tools.versionCompare(a,l,c,u)==0},isActive:function(){return!r.websocket.shutdown&&r.websocket.connection!=null&&(r.websocket.connection.readyState===r.tools.ws.OPEN||r.websocket.connection.readyState===r.tools.ws.CONNECTING)},assertActive:function(){if(r.tools.isActive())return!0;throw new Error("A connection to QZ has not been established yet")},uint8ArrayToHex:function(a){return Array.from(a).map(function(l){return l.toString(16).padStart(2,"0")}).join("")},uint8ArrayToBase64:function(a){var l=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],c="",u,d=a.length;for(u=2;u<d;u+=3)c+=l[a[u-2]>>2],c+=l[(a[u-2]&3)<<4|a[u-1]>>4],c+=l[(a[u-1]&15)<<2|a[u]>>6],c+=l[a[u]&63];return u===d+1&&(c+=l[a[u-2]>>2],c+=l[(a[u-2]&3)<<4],c+="=="),u===d&&(c+=l[a[u-2]>>2],c+=l[(a[u-2]&3)<<4|a[u-1]>>4],c+=l[(a[u-1]&15)<<2],c+="="),c}},compatible:{data:function(a){for(var l=0;l<a.length;l++)if(a[l].constructor===Object&&a[l].data instanceof Uint8Array&&a[l].flavor){var c=a[l].flavor.toString().toUpperCase();switch(c){case"BASE64":a[l].data=r.tools.uint8ArrayToBase64(a[l].data);break;case"HEX":a[l].data=r.tools.uint8ArrayToHex(a[l].data);break;default:throw new Error("Uint8Array conversion to '"+c+"' is not supported.")}}if(r.tools.versionCompare(2,2,4)<0)for(var l=0;l<a.length;l++)a[l].constructor===Object&&a[l].options&&typeof a[l].options.dotDensity=="string"&&(a[l].options.dotDensity=a[l].options.dotDensity.toLowerCase().replace("-legacy",""));if(r.tools.isVersion(2,0)){r.log.trace("Converting print data to v2.0 for "+r.websocket.connection.version);for(var l=0;l<a.length;l++)a[l].constructor===Object&&(a[l].type&&a[l].type.toUpperCase()==="RAW"&&a[l].format&&a[l].format.toUpperCase()==="IMAGE"&&(a[l].flavor&&a[l].flavor.toUpperCase()==="BASE64"&&(a[l].data="data:image/compat;base64,"+a[l].data),a[l].flavor="IMAGE"),(a[l].type&&a[l].type.toUpperCase()==="RAW"||a[l].format&&a[l].format.toUpperCase()==="COMMAND")&&(a[l].format="RAW"),a[l].type=a[l].format,a[l].format=a[l].flavor,delete a[l].flavor)}},config:function(a,l){return r.tools.isVersion(2,0)&&(l.rasterize||(a.rasterize=!0)),r.tools.versionCompare(2,2)<0&&a.forceRaw!=="undefined"&&(a.altPrinting=a.forceRaw,delete a.forceRaw),r.tools.versionCompare(2,1,2,11)<0&&a.spool&&(a.spool.size&&(a.perSpool=a.spool.size,delete a.spool.size),a.spool.end&&(a.endOfDoc=a.spool.end,delete a.spool.end),delete a.spool),a},networking:function(a,l,c,u,d){return r.tools.isVersion(2,0)?r.tools.promise(function(f,h){r.websocket.dataPromise("websocket.getNetworkInfo",{hostname:a,port:l},c,u).then(function(p){f(typeof d<"u"?d(p):p)},h)}):r.tools.promise(function(f,h){r.websocket.dataPromise("networking.device",{hostname:a,port:l},c,u).then(function(p){f({ipAddress:p.ip,macAddress:p.mac})},h)})},algorithm:function(a){return r.tools.isActive()&&r.websocket.connection.semver&&r.tools.isVersion(2,0)?(a||r.log.warn("Connected to an older version of QZ, alternate signature algorithms are not supported"),!1):!0}},SHA:{hash:function(a){a=r.SHA._utf8Encode(a)+"";for(var l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],u=a.length/4+2,d=Math.ceil(u/16),f=new Array(d),h=0;h<d;h++){f[h]=new Array(16);for(var p=0;p<16;p++)f[h][p]=a.charCodeAt(h*64+p*4)<<24|a.charCodeAt(h*64+p*4+1)<<16|a.charCodeAt(h*64+p*4+2)<<8|a.charCodeAt(h*64+p*4+3)}f[d-1][14]=(a.length-1)*8/Math.pow(2,32),f[d-1][14]=Math.floor(f[d-1][14]),f[d-1][15]=(a.length-1)*8&4294967295;for(var g=new Array(64),m,y,v,x,w,j,S,k,h=0;h<d;h++){for(var N=0;N<16;N++)g[N]=f[h][N];for(var N=16;N<64;N++)g[N]=r.SHA._dev1(g[N-2])+g[N-7]+r.SHA._dev0(g[N-15])+g[N-16]&4294967295;m=c[0],y=c[1],v=c[2],x=c[3],w=c[4],j=c[5],S=c[6],k=c[7];for(var N=0;N<64;N++){var P=k+r.SHA._sig1(w)+r.SHA._ch(w,j,S)+l[N]+g[N],A=r.SHA._sig0(m)+r.SHA._maj(m,y,v);k=S,S=j,j=w,w=x+P&4294967295,x=v,v=y,y=m,m=P+A&4294967295}c[0]=c[0]+m&4294967295,c[1]=c[1]+y&4294967295,c[2]=c[2]+v&4294967295,c[3]=c[3]+x&4294967295,c[4]=c[4]+w&4294967295,c[5]=c[5]+j&4294967295,c[6]=c[6]+S&4294967295,c[7]=c[7]+k&4294967295}return r.SHA._hexStr(c[0])+r.SHA._hexStr(c[1])+r.SHA._hexStr(c[2])+r.SHA._hexStr(c[3])+r.SHA._hexStr(c[4])+r.SHA._hexStr(c[5])+r.SHA._hexStr(c[6])+r.SHA._hexStr(c[7])},_rotr:function(a,l){return l>>>a|l<<32-a},_sig0:function(a){return r.SHA._rotr(2,a)^r.SHA._rotr(13,a)^r.SHA._rotr(22,a)},_sig1:function(a){return r.SHA._rotr(6,a)^r.SHA._rotr(11,a)^r.SHA._rotr(25,a)},_dev0:function(a){return r.SHA._rotr(7,a)^r.SHA._rotr(18,a)^a>>>3},_dev1:function(a){return r.SHA._rotr(17,a)^r.SHA._rotr(19,a)^a>>>10},_ch:function(a,l,c){return a&l^~a&c},_maj:function(a,l,c){return a&l^a&c^l&c},_hexStr:function(a){for(var l="",c,u=7;u>=0;u--)c=a>>>u*4&15,l+=c.toString(16);return l},_unescape:function(a){return a.replace(/%(u[\da-f]{4}|[\da-f]{2})/gi,function(l){if(l.length-1)return String.fromCharCode(parseInt(l.substring(l.length-3?2:1),16));var c=l.charCodeAt(0);return c<256?"%"+(0+c.toString(16)).slice(-2).toUpperCase():"%u"+("000"+c.toString(16)).slice(-4).toUpperCase()})},_utf8Encode:function(a){return r.SHA._unescape(encodeURIComponent(a))}}};function i(a,l){this.config=r.tools.extend({},r.printing.defaultConfig),this._dirtyOpts={},this.setPrinter=function(c){typeof c=="string"&&(c={name:c}),this.printer=c},this.getPrinter=function(){return this.printer},this.reconfigure=function(c){for(var u in c)c[u]!==void 0&&(this._dirtyOpts[u]=!0);r.tools.extend(this.config,c)},this.getOptions=function(){return r.compatible.config(this.config,this._dirtyOpts)},this.setPrinter(a),this.reconfigure(l)}i.prototype.print=function(a,l,c){s.print(this,a,l,c)};var s={websocket:{isActive:function(){return r.tools.isActive()},connect:function(a){return r.tools.promise(function(l,c){if(r.websocket.connection){const d=r.websocket.connection.readyState;if(d===r.tools.ws.OPEN){c(new Error("An open connection with QZ Tray already exists"));return}else if(d===r.tools.ws.CONNECTING){c(new Error("The current connection attempt has not returned yet"));return}else if(d===r.tools.ws.CLOSING){c(new Error("Waiting for previous disconnect request to complete"));return}}if(r.tools.ws){if(!r.tools.ws.CLOSED||r.tools.ws.CLOSED==2){c(new Error("Unsupported WebSocket version detected: HyBi-00/Hixie-76"));return}}else{c(new Error("WebSocket not supported by this browser"));return}a==null&&(a={}),(typeof location>"u"||location.protocol!=="https:")&&typeof a.usingSecure>"u"&&(r.log.trace("Disabling secure ports due to insecure page"),a.usingSecure=!1),typeof a.host<"u"&&!Array.isArray(a.host)&&(a.host=[a.host]),r.websocket.shutdown=!1;var u=function(d){var f=!1,h=function(){f||(f=!0,a&&d<a.retries?u(d+1):(r.websocket.connection=null,c.apply(null,arguments)))},p=function(){var g=r.tools.extend({},r.websocket.connectConfig,a);r.websocket.setup.findConnection(g,l,h)};d==0?p():setTimeout(p,a.delay*1e3)};u(0)})},disconnect:function(){return r.tools.promise(function(a,l){r.websocket.connection!=null?r.tools.isActive()?(r.websocket.shutdown=!0,r.websocket.connection.promise={resolve:a,reject:l},r.websocket.connection.close()):l(new Error("Current connection is still closing")):l(new Error("No open connection with QZ Tray"))})},setErrorCallbacks:function(a){r.websocket.errorCallbacks=a},setClosedCallbacks:function(a){r.websocket.closedCallbacks=a},getNetworkInfo:r.compatible.networking,getConnectionInfo:function(){if(r.tools.assertActive()){var a=r.websocket.connection.url.split(/[:\/]+/g);return{socket:a[0],host:a[1],port:+a[2]}}}},printers:{getDefault:function(a,l){return r.websocket.dataPromise("printers.getDefault",null,a,l)},find:function(a,l,c){return r.websocket.dataPromise("printers.find",{query:a},l,c)},details:function(){return r.websocket.dataPromise("printers.detail")},startListening:function(a,l){Array.isArray(a)||(a=[a]);var c={printerNames:a};return l&&l.jobData==!0&&(c.jobData=!0),l&&l.maxJobData&&(c.maxJobData=l.maxJobData),l&&l.flavor&&(c.flavor=l.flavor),r.websocket.dataPromise("printers.startListening",c)},clearQueue:function(a){return typeof a!="object"&&(a={printerName:a}),r.websocket.dataPromise("printers.clearQueue",a)},stopListening:function(){return r.websocket.dataPromise("printers.stopListening")},getStatus:function(){return r.websocket.dataPromise("printers.getStatus")},setPrinterCallbacks:function(a){r.printers.printerCallbacks=a}},configs:{setDefaults:function(a){r.tools.extend(r.printing.defaultConfig,a)},create:function(a,l){return new i(a,l)}},print:function(a,l){var c=!1,u=[],d=[];arguments.length>=3&&(typeof arguments[2]=="boolean"?(c=arguments[2],arguments.length>=5&&(u=arguments[3],d=arguments[4])):arguments.length>=4&&(u=arguments[2],d=arguments[3]),u&&!Array.isArray(u)&&(u=[u]),d&&!Array.isArray(d)&&(d=[d])),Array.isArray(a)||(a=[a]),Array.isArray(l[0])||(l=[l]);for(var f=0;f<l.length;f++)r.tools.relative(l[f]),r.compatible.data(l[f]);for(var h=function(x){var w={printer:x.config.getPrinter(),options:x.config.getOptions(),data:x.data};return r.websocket.dataPromise("print",w,x.signature,x.timestamp)},p=[],g=0;g<a.length||g<l.length;g++)(function(x){var w={config:a[Math.min(x,a.length-1)],data:l[Math.min(x,l.length-1)],signature:u[x],timestamp:d[x]};p.push(function(){return h(w)})})(g);var m=null;if(c){var y=[];m=function(x){y.push(x)},p.push(function(){return r.tools.promise(function(x,w){y.length?w(y):x()})})}var v=null;return p.reduce(function(x,w){return v=x.catch(m).then(w),v},r.tools.promise(function(x){x()})),v},serial:{findPorts:function(){return r.websocket.dataPromise("serial.findPorts")},setSerialCallbacks:function(a){r.serial.serialCallbacks=a},openPort:function(a,l){var c={port:a,options:l};return r.websocket.dataPromise("serial.openPort",c)},sendData:function(a,l,c){r.tools.versionCompare(2,1,0,12)>=0&&(typeof l!="object"&&(l={data:l,type:"PLAIN"}),l.type&&l.type.toUpperCase()=="FILE"&&(l.data=r.tools.absolute(l.data)));var u={port:a,data:l,options:c};return r.websocket.dataPromise("serial.sendData",u)},closePort:function(a){return r.websocket.dataPromise("serial.closePort",{port:a})}},socket:{open:function(a,l,c){var u={host:a,port:l,options:c};return r.websocket.dataPromise("socket.open",u)},close:function(a,l){var c={host:a,port:l};return r.websocket.dataPromise("socket.close",c)},sendData:function(a,l,c){typeof c!="object"&&(c={data:c,type:"PLAIN"});var u={host:a,port:l,data:c};return r.websocket.dataPromise("socket.sendData",u)},setSocketCallbacks:function(a){r.socket.socketCallbacks=a}},usb:{listDevices:function(a){return r.websocket.dataPromise("usb.listDevices",{includeHubs:a})},listInterfaces:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),r.websocket.dataPromise("usb.listInterfaces",a)},listEndpoints:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),r.websocket.dataPromise("usb.listEndpoints",a)},setUsbCallbacks:function(a){r.usb.usbCallbacks=a},claimDevice:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),r.websocket.dataPromise("usb.claimDevice",a)},isClaimed:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),r.websocket.dataPromise("usb.isClaimed",a)},sendData:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],data:arguments[3]}),r.tools.versionCompare(2,1,0,12)>=0&&(typeof a.data!="object"&&(a.data={data:a.data,type:"PLAIN"}),a.data.type&&a.data.type.toUpperCase()=="FILE"&&(a.data.data=r.tools.absolute(a.data.data))),r.websocket.dataPromise("usb.sendData",a)},readData:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3]}),r.websocket.dataPromise("usb.readData",a)},openStream:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3],interval:arguments[4]}),r.websocket.dataPromise("usb.openStream",a)},closeStream:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2]}),r.websocket.dataPromise("usb.closeStream",a)},releaseDevice:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),r.websocket.dataPromise("usb.releaseDevice",a)}},hid:{listDevices:function(){return r.websocket.dataPromise("hid.listDevices")},startListening:function(){return r.websocket.dataPromise("hid.startListening")},stopListening:function(){return r.websocket.dataPromise("hid.stopListening")},setHidCallbacks:function(a){r.hid.hidCallbacks=a},claimDevice:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),r.websocket.dataPromise("hid.claimDevice",a)},isClaimed:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),r.websocket.dataPromise("hid.isClaimed",a)},sendData:function(a){if(typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],data:arguments[2],endpoint:arguments[3]}),r.tools.versionCompare(2,1,0,12)>=0)typeof a.data!="object"&&(a.data={data:a.data,type:"PLAIN"}),a.data.type&&a.data.type.toUpperCase()=="FILE"&&(a.data.data=r.tools.absolute(a.data.data));else if(typeof a.data=="object"){if(a.data.type.toUpperCase()!=="PLAIN"||typeof a.data.data!="string")return r.tools.reject(new Error("Data format is not supported with connected QZ Tray version "+r.websocket.connection.version));a.data=a.data.data}return r.websocket.dataPromise("hid.sendData",a)},readData:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2]}),r.websocket.dataPromise("hid.readData",a)},sendFeatureReport:function(a){return r.websocket.dataPromise("hid.sendFeatureReport",a)},getFeatureReport:function(a){return r.websocket.dataPromise("hid.getFeatureReport",a)},openStream:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2],interval:arguments[3]}),r.websocket.dataPromise("hid.openStream",a)},closeStream:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),r.websocket.dataPromise("hid.closeStream",a)},releaseDevice:function(a){return typeof a!="object"&&(a={vendorId:arguments[0],productId:arguments[1]}),r.websocket.dataPromise("hid.releaseDevice",a)}},file:{list:function(a,l){var c=r.tools.extend({path:a},l);return r.websocket.dataPromise("file.list",c)},read:function(a,l){var c=r.tools.extend({path:a},l);return r.websocket.dataPromise("file.read",c)},write:function(a,l){var c=r.tools.extend({path:a},l);return r.websocket.dataPromise("file.write",c)},remove:function(a,l){var c=r.tools.extend({path:a},l);return r.websocket.dataPromise("file.remove",c)},startListening:function(a,l){l&&typeof l.include<"u"&&!Array.isArray(l.include)&&(l.include=[l.include]),l&&typeof l.exclude<"u"&&!Array.isArray(l.exclude)&&(l.exclude=[l.exclude]);var c=r.tools.extend({path:a},l);return r.websocket.dataPromise("file.startListening",c)},stopListening:function(a,l){var c=r.tools.extend({path:a},l);return r.websocket.dataPromise("file.stopListening",c)},setFileCallbacks:function(a){r.file.fileCallbacks=a}},networking:{device:function(a,l){return r.tools.isVersion(2,0)?r.compatible.networking(a,l,null,null,function(c){return{ip:c.ipAddress,mac:c.macAddress}}):r.websocket.dataPromise("networking.device",{hostname:a,port:l})},hostname:function(a,l){return r.tools.versionCompare(2,2,2)<0?r.tools.promise(function(c,u){r.websocket.dataPromise("networking.device",{hostname:a,port:l}).then(function(d){console.log(d),c(d.hostname)})}):r.websocket.dataPromise("networking.hostname")},devices:function(a,l){return r.tools.isVersion(2,0)?r.compatible.networking(a,l,null,null,function(c){return[{ip:c.ipAddress,mac:c.macAddress}]}):r.websocket.dataPromise("networking.devices",{hostname:a,port:l})}},security:{setCertificatePromise:function(a,l){r.security.certHandler=a,r.security.rejectOnCertFailure=!!(l&&l.rejectOnFailure)},setSignaturePromise:function(a){r.security.signatureFactory=a},setSignatureAlgorithm:function(a){r.compatible.algorithm()&&(["SHA1","SHA256","SHA512"].indexOf(a.toUpperCase())<0?r.log.error("Signing algorithm '"+a+"' is not supported."):r.security.signAlgorithm=a)},getSignatureAlgorithm:function(){return r.security.signAlgorithm}},api:{showDebug:function(a){return r.DEBUG=a},getVersion:function(){return r.websocket.dataPromise("getVersion")},isVersion:r.tools.isVersion,isVersionGreater:function(a,l,c,u){return r.tools.versionCompare(a,l,c,u)>0},isVersionLess:function(a,l,c,u){return r.tools.versionCompare(a,l,c,u)<0},setPromiseType:function(a){r.tools.promise=a},setSha256Type:function(a){r.tools.hash=a},setWebSocketType:function(a){r.tools.ws=a}},version:r.VERSION};return s}();(function(){e.exports=n})()})(K$);var Eme=K$.exports;const ht=ct(Eme);async function WA(e,t={},n){return window.__TAURI_INTERNALS__.invoke(e,t,n)}class vl{constructor(){this.isConnected=!1,this.connectionPromise=null,this.alreadyConnectedLogged=!1,this.securityInitialized=!1}static getInstance(){return vl.instance||(vl.instance=new vl),vl.instance}async initialize(){return this.connectionPromise?this.connectionPromise:(this.connectionPromise=this.connect(),this.connectionPromise)}async connect(){try{ht.websocket.isActive()?(this.isConnected=!0,this.alreadyConnectedLogged||(console.log("QZ Tray: Already connected"),this.alreadyConnectedLogged=!0)):(console.log("QZ Tray: Attempting to connect..."),this.securityInitialized||(ht.security.setCertificatePromise(async()=>{const t="__TAURI__"in window;if(console.log("QZ Tray: [CERT] Environment detection - isTauri:",t),console.log("QZ Tray: [CERT] Window.__TAURI__ exists:","__TAURI__"in window),console.log("QZ Tray: [CERT] Window location:",window.location.href),t){console.log("QZ Tray: [CERT] Using Tauri invoke for certificate");try{console.log('QZ Tray: [CERT] About to call invoke("get_qz_cert")...');const s=await WA("get_qz_cert");if(console.log("QZ Tray: [CERT] Tauri invoke returned:",typeof s,"length:",s==null?void 0:s.length),console.log("QZ Tray: [CERT] Certificate preview:",s==null?void 0:s.slice(0,80)),!s||!s.includes("BEGIN CERTIFICATE"))throw console.error("QZ Tray: [CERT] Invalid certificate from Tauri invoke:",s==null?void 0:s.slice(0,80)),new Error("Invalid certificate from Tauri invoke");return s}catch(s){console.error("QZ Tray: [CERT] Failed to get certificate via Tauri invoke:",s),console.error("QZ Tray: [CERT] Error details:",{name:s instanceof Error?s.name:"Unknown",message:s instanceof Error?s.message:String(s),stack:s instanceof Error?s.stack:void 0}),console.log("QZ Tray: [CERT] Falling back to fetch method...")}}const n=`${Or()}/qz/cert?t=${Date.now()}`;console.log("QZ Tray: [CERT] Using fetch for certificate from:",n),console.log("QZ Tray: [CERT] getApiUrl() returns:",Or()),console.log("QZ Tray: [CERT] Current window.location:",window.location.href);let r;try{r=await fetch(n),console.log("QZ Tray: [CERT] Fetch completed, status:",r.status,"ok:",r.ok),console.log("QZ Tray: [CERT] Response headers:",Object.fromEntries(r.headers.entries()))}catch(s){throw console.error("QZ Tray: [CERT] Network error:",s),new Error("network error fetching certificate: "+(s instanceof Error?s.message:String(s)))}if(!r.ok){let s;try{s=(await r.text()).slice(0,120)}catch{s="[unable to read response body]"}throw console.error("QZ Tray: [CERT] HTTP error - Status:",r.status,"StatusText:",r.statusText),console.error("QZ Tray: [CERT] Response body preview:",s),new Error(`certificate fetch failed status=${r.status}`)}const i=await r.text();if(console.log("QZ Tray: [CERT] Response body length:",i.length),console.log("QZ Tray: [CERT] Response preview:",i.slice(0,80)),!i.includes("BEGIN CERTIFICATE"))throw console.error("QZ Tray: [CERT] Invalid certificate format - preview:",i.slice(0,80)),new Error("certificate response not PEM formatted");return console.log("QZ Tray: [CERT] Certificate retrieved successfully, bytes:",i.length),i}),ht.security.setSignatureAlgorithm("SHA1"),ht.security.setSignaturePromise(async t=>{const n="__TAURI__"in window;if(console.log("QZ Tray: [SIGN] Environment detection - isTauri:",n),console.log("QZ Tray: [SIGN] Hash to sign (length):",t.length),console.log("QZ Tray: [SIGN] Hash preview:",t.slice(0,40)+"..."),n){console.log("QZ Tray: [SIGN] Using Tauri invoke for signing");try{console.log('QZ Tray: [SIGN] About to call invoke("sign_qz_hash")...');const c=await WA("sign_qz_hash",{hash:t});if(console.log("QZ Tray: [SIGN] Tauri invoke returned:",typeof c,"length:",c==null?void 0:c.length),!c)throw new Error("No signature returned from Tauri invoke");return c}catch(c){console.error("QZ Tray: [SIGN] Failed to sign hash via Tauri invoke:",c),console.error("QZ Tray: [SIGN] Error details:",{name:c instanceof Error?c.name:"Unknown",message:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0}),console.log("QZ Tray: [SIGN] Falling back to fetch method...")}}const r=`${Or()}/qz/sign`;console.log("QZ Tray: [SIGN] Using fetch for signing request to:",r);let i;try{i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})}),console.log("QZ Tray: [SIGN] Fetch completed, status:",i.status,"ok:",i.ok),console.log("QZ Tray: [SIGN] Response headers:",Object.fromEntries(i.headers.entries()))}catch(c){throw console.error("QZ Tray: [SIGN] Network error:",c),new Error("network error contacting sign endpoint: "+(c instanceof Error?c.message:String(c)))}if(!i.ok){let c;try{c=(await i.text()).slice(0,120)}catch{c="[unable to read response body]"}throw console.error("QZ Tray: [SIGN] HTTP error - Status:",i.status,"StatusText:",i.statusText),console.error("QZ Tray: [SIGN] Response body preview:",c),new Error(`sign endpoint failed status=${i.status}`)}let s,a="";try{a=await i.text(),console.log("QZ Tray: [SIGN] Response body:",a.slice(0,200)),s=JSON.parse(a)}catch(c){throw console.error("QZ Tray: [SIGN] JSON parse error:",c),console.error("QZ Tray: [SIGN] Raw response:",a.slice(0,200)),new Error("sign endpoint invalid JSON: "+(c instanceof Error?c.message:String(c)))}const l=s==null?void 0:s.signature;if(typeof l!="string")throw console.error("QZ Tray: [SIGN] Invalid signature response:",s),new Error("sign endpoint JSON missing signature");return console.log("QZ Tray: [SIGN] Signature received successfully, length:",l.length),l}),this.securityInitialized=!0),console.log("QZ Tray: Configuring for secure connections only..."),console.log("QZ Tray: Connecting with forced secure parameters..."),console.log("QZ Tray: Using wss://localhost:8181 (secure connection)"),await ht.websocket.connect({host:"localhost",port:{secure:[8181]}}),this.isConnected=!0,console.log("QZ Tray: Connected successfully"))}catch(t){throw this.isConnected=!1,console.error("QZ Tray: Connection failed:",t),new Error(`QZ Tray connection failed: ${t instanceof Error?t.message:"Unknown error"}`)}}async isAvailable(){try{if(ht.websocket.isActive())return this.isConnected=!0,this.alreadyConnectedLogged||(console.log("QZ Tray: Already connected"),this.alreadyConnectedLogged=!0),!0;console.log("QZ Tray: Forcing secure connection to localhost:8181");const t=15e3,n=[{label:"wss://localhost:8181 (secure only)"}];for(const r of n){if(ht.websocket.isActive())break;try{if(console.log(`QZ Tray: attempting ${r.label} connection...`),!this.securityInitialized){console.log("QZ Tray: Initializing security...");try{await this.initialize();break}catch(a){console.warn("QZ Tray: Security initialization failed:",a)}}const i=ht.websocket.connect({host:"localhost",port:{secure:[8181]}}),s=new Promise((a,l)=>setTimeout(()=>l(new Error("timeout")),t));if(await Promise.race([i,s]),ht.websocket.isActive()){console.log(`QZ Tray: ${r.label} connection successful`);break}}catch(i){const s=i instanceof Error?i.message:String(i);console.warn(`QZ Tray: ${r.label} connect failed:`,s),s.includes("timeout")&&console.warn("QZ Tray: Secure connection timeout - ensure QZ Tray is running and browser trusts the connection")}}return this.isConnected=ht.websocket.isActive(),this.isConnected||console.warn("QZ Tray: unable to establish connection. Ensure QZ Tray is running and browser trusts the secure connection on port 8181."),this.isConnected}catch(t){return console.debug("QZ Tray availability check fatal error:",t),this.isConnected=!1,!1}}async getPrinters(){try{await this.ensureConnection();const t=new Set,n=a=>{a&&(Array.isArray(a)?a.forEach(l=>l&&t.add(String(l))):t.add(String(a)))},r=async(a,l)=>{try{const c=await l();return n(c),console.debug(`QZ Tray: ${a} found ${Array.isArray(c)?c.length:c?1:0} printers`),!0}catch(c){return console.debug(`QZ Tray: printer enumeration step '${a}' failed:`,c),!1}};await r("base",()=>ht.printers.find());const i=["","\\\\","Microsoft","PDF","OneNote","Fax","HP","EPSON","Canon","Brother","Zebra","POS","Thermal","Generic"];for(const a of i)await r(`token:${a}`,()=>ht.printers.find(a));if(t.size===0){console.log("QZ Tray: No printers found in initial scan, trying delayed retries...");const a=[500,1e3,1500,3e3];for(const l of a)if(await new Promise(c=>setTimeout(c,l)),await r(`retry-${l}ms`,()=>ht.printers.find()),t.size>0)break}const s=Array.from(t).sort((a,l)=>a.localeCompare(l));return console.log(`QZ Tray: Final printer enumeration result: ${s.length} printers found:`,s),s.length===0&&(console.warn("QZ Tray: No printers returned after comprehensive scan. Possible causes:"),console.warn("- QZ Tray not trusted (check for green lock icon)"),console.warn("- Browser security blocking access"),console.warn("- Printers not properly installed in Windows"),console.warn("- QZ Tray version compatibility issue")),s}catch(t){throw console.error("QZ Tray: Failed to get printers:",t),new Error(`Failed to get printers: ${t instanceof Error?t.message:"Unknown error"}`)}}async getDefaultPrinter(){try{return await this.ensureConnection(),await ht.printers.getDefault()}catch(t){return console.error("QZ Tray: Failed to get default printer:",t),null}}async printHTML(t,n){try{await this.ensureConnection();const r=ht.configs.create(t.name),i=[{type:"html",format:"plain",data:n.content}];await ht.print(r,i),console.log("QZ Tray: Print job sent successfully")}catch(r){throw console.error("QZ Tray: Print failed:",r),new Error(`Print failed: ${r instanceof Error?r.message:"Unknown error"}`)}}async printRaw(t,n){try{await this.ensureConnection();const r=ht.configs.create(t.name),i=[{type:"raw",format:"plain",data:n}];await ht.print(r,i),console.log("QZ Tray: Raw print job sent successfully")}catch(r){throw console.error("QZ Tray: Raw print failed:",r),new Error(`Raw print failed: ${r instanceof Error?r.message:"Unknown error"}`)}}async printImage(t,n){try{await this.ensureConnection();const r=ht.configs.create(t.name),i=[{type:"image",format:n.startsWith("data:")?"base64":"file",data:n}];await ht.print(r,i),console.log("QZ Tray: Image print job sent successfully")}catch(r){throw console.error("QZ Tray: Image print failed:",r),new Error(`Image print failed: ${r instanceof Error?r.message:"Unknown error"}`)}}generateESCPOSReceipt(t){let n="";n+="\x1B@",n+="\x1Ba",n+="\x1BE",n+="!",n+=t.companyName+`
`,n+="!\0",n+="\x1BE\0";let r="";return t.address&&(r+=`P.O. Box ${t.address}. `),t.phone1&&(r+=`Tel: ${t.phone1}`),t.phone2&&(r+=`, ${t.phone2}`),t.location&&(r+=` Loc: ${t.location}`),r&&(n+=r+`
`),n+=`--------------------------------
`,n+="\x1Ba\0",n+=`Receipt #: ${t.receiptNumber}
`,t.customer?n+=`Customer: ${t.customer}
`:n+=`Customer: WALK-IN CUSTOMER
`,n+=`Date: ${t.date}
`,t.customerPhone&&(n+=`Phone: ${t.customerPhone}
`),n+="\x1Ba",n+="\x1BE",n+=`RECEIPT
`,n+="\x1BE\0",n+="\x1Ba\0",n+=`--------------------------------
`,n+=`Item                 Qty  Amount
`,n+=`--------------------------------
`,t.items.forEach(i=>{let s=i.name;if(s.length>18&&(n+=s.substring(0,18)+`
`,n+="  "+s.substring(18)+`
`,s=""),s){const a=s.padEnd(18),l=i.quantity.toString().padStart(3),c=i.total.toFixed(2).padStart(7);n+=`${a} ${l} ${c}
`}else{const a=i.quantity.toString().padStart(21),l=i.total.toFixed(2).padStart(7);n+=`${a} ${l}
`}}),n+=`--------------------------------
`,n+="\x1Ba",n+="\x1BE",n+="!",t.paymentMethod==="CREDIT"&&t.creditPercentage?n+=`Total (${t.creditPercentage}% credit):
`:n+=`Total:
`,n+=`GH ${t.totalAmount.toFixed(2)}
`,n+="!\0",n+="\x1BE\0",t.paymentMethod&&(n+="\x1Ba\0",n+=`Payment: ${t.paymentMethod}
`),t.salesperson&&(n+="\x1BE",n+=`Sales Person:
`,n+="\x1BE\0",n+=`${t.salesperson}
`),t.mobileMoneyNumber&&(n+="\x1Ba",n+="\x1BE",n+=`Payment Information
`,n+="\x1BE\0",n+=`Mobile Money: ${t.mobileMoneyNumber}
`),n+="\x1Ba",n+=`
`,n+=`Thank you for your business!
`,n+=`Page 1 of 1
`,n+=`


`,n+="VB\0",n}async ensureConnection(){if(this.isConnected||await this.initialize(),!ht.websocket.isActive())throw new Error("QZ Tray is not connected")}async disconnect(){try{ht.websocket.isActive()&&(await ht.websocket.disconnect(),this.isConnected=!1,this.connectionPromise=null,console.log("QZ Tray: Disconnected successfully"))}catch(t){console.error("QZ Tray: Disconnect failed:",t)}}async getVersion(){try{return await this.ensureConnection(),ht.websocket.isActive()?"QZ Tray Connected":"Unknown"}catch(t){return console.error("QZ Tray: Failed to get version:",t),"Unknown"}}async diagnose(){const t={timestamp:new Date().toISOString(),websocketActive:ht.websocket.isActive(),connectedFlag:this.isConnected,attempts:[]};try{await this.initialize(),t.postInitActive=ht.websocket.isActive()}catch(r){t.initError=r instanceof Error?r.message:String(r)}const n=async(r,i)=>{const s={label:r},a=performance.now();try{const l=await i();s.durationMs=Math.round(performance.now()-a),Array.isArray(l)?(s.count=l.length,s.sample=l.slice(0,5)):s.result=l}catch(l){s.error=l instanceof Error?l.message:String(l)}t.attempts.push(s)};if(ht.websocket.isActive()){await n("printers.find(base)",()=>ht.printers.find());const r=["Microsoft","PDF","HP","EPSON"];for(const i of r)await n(`printers.find(${i})`,()=>ht.printers.find(i));await n("printers.getDefault",()=>ht.printers.getDefault())}return t}}const Tn=vl.getInstance(),hs=e=>new Promise((t,n)=>{try{const r=JSON.parse(sessionStorage.getItem("user")||"{}"),i=document.createElement("div");i.id="print-container",i.style.position="fixed",i.style.left="-9999px",i.style.top="0",document.body.appendChild(i);const s=document.createElement("style");s.textContent=`
        @media print {
          /* Hide everything except our print container */
          body > *:not(#print-container) {
            display: none !important;
          }

          /* Reset body styles */
          body {
            margin: 0;
            padding: 0;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
            background: white !important;
          }

          /* Container styles */
          #print-container {
            display: block !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: auto !important;
            height: auto !important;
            overflow: visible !important;
          }

          /* Paper sizes and pagination */
          .print-invoice {
            width: 148mm !important;
            height: 210mm !important;
            padding: 5mm !important;
            margin: 0 !important;
            page-break-after: always !important;
            break-after: page !important;
            background-color: white !important;
            font-family: Arial !important;
            position: relative !important;
            box-sizing: border-box !important;
          }

          .print-invoice:last-of-type {
            page-break-after: auto !important;
            break-after: auto !important;
          }

          .print-receipt {
            width: 80mm !important;
            min-height: fit-content !important;
            padding: 0 !important;
            margin: 0 !important;
            page-break-after: always !important;
            background-color: white !important;
            font-family: Arial !important;
            font-size: 9px !important;
            line-height: 1.2 !important;
            box-sizing: border-box !important;
          }

          @page {
            size: ${e.type==="invoice"?"A5 portrait":"80mm auto"};
            margin: 0mm;
          }
        }

        /* Layout styles */
        .text-center { text-align: center !important; }
        .text-right { text-align: right !important; }
        .text-left { text-align: left !important; }
        .font-bold { font-weight: bold !important; }
        .mb-1 { margin-bottom: 0.25rem !important; }
        .mb-2 { margin-bottom: 0.5rem !important; }
        .mb-3 { margin-bottom: 0.75rem !important; }
        .mb-4 { margin-bottom: 1rem !important; }
        .mt-1 { margin-top: 0.25rem !important; }
        .mt-2 { margin-top: 0.5rem !important; }
        .mt-4 { margin-top: 1rem !important; }
        .mt-16 { margin-top: 4rem !important; }
        .mb-12 { margin-bottom: 3rem !important; }
        .px-8 { padding-left: 2rem !important; padding-right: 2rem !important; }
        .py-4 { padding-top: 1rem !important; padding-bottom: 1rem !important; }
        .p-2 { padding: 0.5rem !important; }
        
        /* Typography */
        .text-base { font-size: 1rem !important; }
        .text-sm { font-size: 0.875rem !important; }
        .text-[8px] { font-size: 8px !important; }
        .text-2xl { font-size: 1.5rem !important; }
        
        /* Grid and Table styles */
        .grid { display: grid !important; }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
        .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)) !important; }
        
        [style*="grid"] {
          border-collapse: collapse !important;
        }
        [style*="grid"] > div {
          min-height: 24px !important;
          padding: 4px 8px !important;
        }
        [style*="border-right: 1px solid black"] {
          border-right: 1px solid black !important;
        }
        [style*="border-bottom: 1px solid black"] {
          border-bottom: 1px solid black !important;
        }
        
        /* Layout utilities */
        .flex { display: flex !important; }
        .flex-col { flex-direction: column !important; }
        .items-center { align-items: center !important; }
        .justify-center { justify-content: center !important; }
        .w-full { width: 100% !important; }
        .max-w-md { max-width: 28rem !important; }
        .max-w-full { max-width: 100% !important; }
        .mx-auto { margin-left: auto !important; margin-right: auto !important; }
        .relative { position: relative !important; }
        .absolute { position: absolute !important; }
        .bottom-4 { bottom: 1rem !important; }
        .left-0 { left: 0 !important; }
        .right-0 { right: 0 !important; }
      `,document.head.appendChild(s);const a=H1(i);a.render(W.createElement(kme,{items:e.items,totalAmount:e.totalAmount,totalItems:e.totalItems,type:e.type,customer:e.customer,salesperson:e.salesperson||(r?{name:r.name}:void 0),paymentMethod:e.paymentMethod,creditPercentage:e.creditPercentage,baseTotal:e.baseTotal,saleId:e.saleId}));const l=()=>{document.head.removeChild(s),document.body.removeChild(i),a.unmount(),window.removeEventListener("afterprint",l),t()};window.addEventListener("afterprint",l),setTimeout(()=>{window.print()},500)}catch(r){n(r)}}),qA=async e=>{try{if(await Do()){console.log("QZ Tray available - attempting silent invoice printing");try{return await Ro(e)}catch(i){console.warn("QZ Tray silent printing failed, falling back to printer service:",i)}}const n={items:e.items,totalAmount:e.totalAmount,totalItems:e.totalItems,customer:e.customer,paymentMethod:e.paymentMethod,creditPercentage:e.creditPercentage,baseTotal:e.baseTotal,saleId:e.saleId},r=await fg.getWholesalePrinter();return r?(console.log("Using configured wholesale printer:",r.name),await fg.printInvoice(n),!0):(console.log("No wholesale printer configured, falling back to browser print"),await hs({...e,type:"invoice"}),!0)}catch(t){return console.error("Invoice printing failed:",t),console.log("Falling back to browser print due to error"),await hs({...e,type:"invoice"}),!0}},VA=async e=>{try{if(await Do()){console.log("QZ Tray available - attempting silent receipt printing");try{return await Mo(e,void 0,!0)}catch(i){console.warn("QZ Tray silent printing failed, falling back to printer service:",i)}}const n={items:e.items,totalAmount:e.totalAmount,totalItems:e.totalItems,customer:e.customer,paymentMethod:e.paymentMethod,creditPercentage:e.creditPercentage,baseTotal:e.baseTotal,saleId:e.saleId},r=await fg.getRetailPrinter();return r?(console.log("Using configured retail printer:",r.name),await fg.printReceipt(n),!0):(console.log("No retail printer configured, falling back to browser print"),await hs({...e,type:"receipt"}),!0)}catch(t){return console.error("Receipt printing failed:",t),console.log("Falling back to browser print due to error"),await hs({...e,type:"receipt"}),!0}},_me=async e=>{var s,a;let t=null;try{const l=await fetch(`${Or()}/settings/company`,{credentials:"include"});l.ok&&(t=await l.json())}catch(l){console.warn("Could not fetch company settings:",l)}const n=JSON.parse(localStorage.getItem("user")||"{}"),r=new Date().toLocaleString("en-US",{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),i=e.saleId?e.saleId.toString().padStart(7,"0"):"PREVIEW";if(e.type==="invoice"){const c=Math.ceil(e.items.length/17),u=Array.from({length:c},(f,h)=>e.items.slice(h*17,(h+1)*17));let d="";return u.forEach((f,h)=>{d+=`
        <div class="print-invoice" style="
          width: 148mm;
          height: 210mm;
          font-family: Arial;
          position: relative;
          padding: 0;
          margin: 0 auto;
          box-sizing: border-box;
          page-break-after: ${h<u.length-1?"always":"auto"};
        ">
          <!-- Company Name and Address -->
          <div style="width: 100%; margin-bottom: 1px;">
            <div style="text-align: center; border-bottom: 1px solid black; padding-bottom: 1px;">
              <h1 style="margin: 0; margin-bottom: 1px; font-size: 20px; font-weight: bold;">
                ${(t==null?void 0:t.companyName)||"COMPANY NAME"}
              </h1>
            </div>
            <div style="text-align: left; margin-top: 1px;">
              <p style="margin: 0; white-space: nowrap; font-size: 14px;">
                ${t!=null&&t.address?`P.O. Box ${t.address}. `:""}
                ${t!=null&&t.phone1?`Tel: ${t.phone1}`:""}
                ${t!=null&&t.phone2?`, ${t.phone2}`:""}
                ${t!=null&&t.location?` Loc: ${t.location}`:""}
              </p>
            </div>
          </div>

          <!-- Receipt # and Customer -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; margin-bottom: 1px; font-size: 14px;">
            <div style="text-align: left;">
              <span>Receipt: ${i}</span>
            </div>
            <div style="text-align: right;">
              <span>Customer: ${e.customer?e.customer.name:"WALK-IN CUSTOMER"}</span>
            </div>
          </div>

          <!-- Date and Centered INVOICE -->
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; margin-bottom: 1px; font-size: 14px;">
            <div style="text-align: left;">
              <span>Date: ${r}</span>
            </div>
            <div style="text-align: center; font-weight: bold;">
              <span style="font-size: 16px;">INVOICE</span>
            </div>
            <div style="text-align: right;">
              ${e.customer&&e.customer.phone?`<span>Phone: ${e.customer.phone}</span>`:""}
            </div>
          </div>

          <!-- Table -->
          <div style="width: 100%; border: 1px solid black;">
            <div style="display: grid; grid-template-columns: 55% 15% 15% 15%; border-bottom: 1px solid black;">
              <div style="padding: 2px 6px; border-right: 1px solid black; font-weight: bold; text-align: center; font-size: 14px;">Name</div>
              <div style="padding: 2px 6px; border-right: 1px solid black; text-align: center; font-weight: bold; font-size: 14px;">Quantity</div>
              <div style="padding: 2px 6px; border-right: 1px solid black; text-align: center; font-weight: bold; font-size: 14px;">Price</div>
              <div style="padding: 2px 6px; text-align: center; font-weight: bold; font-size: 14px;">Amount</div>
            </div>
            ${f.map((p,g)=>`
              <div style="display: grid; grid-template-columns: 55% 15% 15% 15%; border-bottom: ${g===f.length-1?"none":"1px solid black"}; min-height: 16px;">
                <div style="padding: 2px 6px; border-right: 1px solid black; font-size: 13px;">${p.name}</div>
                <div style="padding: 2px 6px; border-right: 1px solid black; text-align: center; font-size: 13px;">${p.quantity}</div>
                <div style="padding: 2px 6px; border-right: 1px solid black; text-align: center; font-size: 13px;">${p.price.toFixed(2)}</div>
                <div style="padding: 2px 6px; text-align: center; font-size: 13px;">${p.total.toFixed(2)}</div>
              </div>
            `).join("")}
          </div>

          ${h===u.length-1?`
            <!-- Total Amount -->
            ${e.paymentMethod==="CASH"?`
              <div style="border-top: 1px solid black; padding-top: 4px; text-align: right; margin-bottom: 8px;">
                <span style="font-weight: bold; font-size: 16px;">Total: GH${e.totalAmount.toFixed(2)}</span>
              </div>
            `:`
              <div style="display: grid; grid-template-columns: 75% 25%; border-top: 1px solid black; padding-top: 4px; margin-bottom: 8px;">
                <div style="padding: 4px 8px; text-align: right; font-weight: bold; font-size: 16px;">
                  Total (${e.creditPercentage}% credit):
                </div>
                <div style="padding: 4px 8px; text-align: right; font-weight: bold; font-size: 16px;">
                  GH${e.totalAmount.toFixed(2)}
                </div>
              </div>
            `}

            <!-- Sales Person -->
            <div style="font-size: 14px; margin-bottom: 4px; margin-top: 8px;">
              <p style="font-weight: bold; margin: 0;">Sales Person:</p>
              <p style="margin: 0;">${(n==null?void 0:n.name)||"Unknown"}</p>
            </div>

            <!-- Signature Section -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px; margin-top: 16px; margin-bottom: 8px;">
              <div>
                <p style="font-size: 14px; font-weight: bold; margin-bottom: 4px; margin: 0;">Served by:</p>
                <div style="border-bottom: 1px dotted black; height: 20px; width: 100%;"></div>
              </div>
              <div>
                <p style="font-size: 14px; font-weight: bold; margin-bottom: 4px; margin: 0;">Checked by:</p>
                <div style="border-bottom: 1px dotted black; height: 20px; width: 100%;"></div>
              </div>
            </div>

            <!-- Payment Info -->
            <div style="text-align: center; font-size: 14px; margin: 8px 0; font-weight: bold;">
              ${t!=null&&t.mobileMoneyNumber?`
                <p style="margin: 0;">Please pay through Mobile Money ${t.mobileMoneyNumber}</p>
              `:""}
            </div>
          `:""}

          <!-- Footer -->
          <div style="position: absolute; bottom: 4px; left: 0; right: 0; text-align: center; font-size: 14px;">
            <span>Page ${h+1} of ${c}</span>
          </div>
        </div>
      `}),d}else return`
      <div class="print-receipt" style="
        width: 80mm;
        font-family: Arial;
        font-size: 16px;
        line-height: 1.3;
        padding: 1mm 2mm;
        margin: 0 auto;
        box-sizing: border-box;
        overflow-wrap: break-word;
        word-wrap: break-word;
      ">
        <!-- Business Name -->
        <div style="width: 100%; text-align: center; margin-bottom: 1px;">
          <div style="border-bottom: 1px solid black; margin-bottom: 1px;">
            <h1 style="font-size: 18px; font-weight: bold; margin-bottom: 1px;">
              ${(t==null?void 0:t.companyName)||"COMPANY NAME"}
            </h1>
          </div>
          <p style="font-size: 12px; margin-bottom: 0;">
            ${t!=null&&t.address?`P.O. Box ${t.address}. `:""}
            ${t!=null&&t.phone1?`Tel: ${t.phone1}`:""}
            ${t!=null&&t.phone2?`, ${t.phone2}`:""}
            ${t!=null&&t.location?` Loc: ${t.location}`:""}
          </p>
        </div>

        <!-- Receipt Info -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; margin-bottom: 1px; font-size: 12px;">
          <div style="text-align: left;">
            <span>Receipt #: ${i}</span>
          </div>
          <div style="text-align: right;">
            <span>Customer: ${((s=e.customer)==null?void 0:s.name)||"WALK-IN CUSTOMER"}</span>
          </div>
        </div>

        <!-- Date and Label -->
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; margin-bottom: 2px; font-size: 10px;">
          <div style="text-align: left;">
            <span>Date: ${r}</span>
          </div>
          <div style="text-align: center; font-weight: bold;">
            <span>RECEIPT</span>
          </div>
          <div style="text-align: right;">
            ${(a=e.customer)!=null&&a.phone?`<span>Phone: ${e.customer.phone}</span>`:""}
          </div>
        </div>

        <!-- Table -->
        <div style="width: 100%; border: 1px solid black;">
          <div style="display: grid; grid-template-columns: 60% 20% 20%; border-top: 1px solid black; border-bottom: 1px solid black;">
            <div style="padding: 2px; border-right: 1px solid black; font-weight: bold; font-size: 13px;">Item</div>
            <div style="padding: 2px; border-right: 1px solid black; text-align: center; font-weight: bold; font-size: 13px;">Qty</div>
            <div style="padding: 2px; text-align: center; font-weight: bold; font-size: 13px;">Amount</div>
          </div>
          ${e.items.map(c=>`
            <div style="display: grid; grid-template-columns: 60% 20% 20%; border-bottom: 1px solid black;">
              <div style="padding: 2px; border-right: 1px solid black; font-size: 14px;">${c.name}</div>
              <div style="padding: 2px; border-right: 1px solid black; text-align: center; font-size: 13px;">${c.quantity}</div>
              <div style="padding: 2px; text-align: center; font-size: 13px;">${(c.quantity*c.price).toFixed(2)}</div>
            </div>
          `).join("")}
        </div>

        <!-- Total Section -->
        <div style="border-top: 1px solid black; margin-top: 1px; padding-top: 1px; display: flex; justify-content: flex-end; width: 100%;">
          <div style="display: flex; align-items: center; gap: 8px; padding: 2px; font-weight: bold; font-size: 16px; white-space: nowrap;">
            <span>Total ${e.paymentMethod==="CREDIT"&&e.creditPercentage&&e.creditPercentage>0?`(${e.creditPercentage}% credit)`:""}:</span>
            <span>GH ${e.totalAmount.toFixed(2)}</span>
          </div>
        </div>

        <!-- Sales Person -->
        <div style="font-size: 12px; margin: 2px 0;">
          <p style="font-weight: bold;">Sales Person:</p>
          <p>${(n==null?void 0:n.name)||"Unknown"}</p>
        </div>

        <!-- MoMo Info -->
        ${t!=null&&t.mobileMoneyNumber?`
          <div style="text-align: center; margin-top: 2px; font-size: 14px;">
            <p style="font-weight: bold;">Payment Information</p>
            <p>Mobile Money: ${t.mobileMoneyNumber}</p>
          </div>
        `:""}

        <!-- Footer -->
        <div style="margin-top: 2px; text-align: center; font-size: 12px;">
          <p>Thank you for your business!</p>
          <span>Page 1 of 1</span>
        </div>
      </div>
    `},Do=async()=>{try{return await Tn.isAvailable()}catch{return!1}},Tme=async()=>{try{return await Tn.initialize(),await Tn.getPrinters()}catch(e){return console.error("Failed to get QZ printers:",e),[]}},hj=async()=>{try{return await Tn.initialize(),await Tn.getDefaultPrinter()}catch(e){return console.error("Failed to get QZ default printer:",e),null}},Q$=async(e,t)=>{try{if(!await Do())throw new Error("QZ Tray is not available. Please ensure QZ Tray is installed and running.");let r=t;if(!r){const u=e.type==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",d=localStorage.getItem(u);d&&(r=d)}if(!r){const u=await hj();u&&(r=u)}if(!r)throw new Error("No printer specified, persisted, or default printer found");const i=await _me(e),s=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>${e.type==="invoice"?"Invoice":"Receipt"} ${e.saleId||"Preview"}</title>
  <style>
    ${e.type==="invoice"?`
      @page { size: A5 portrait; margin: 5mm; }
      body { 
        font-family: Arial, sans-serif; 
        margin: 0; 
        padding: 0;
        font-size: 12px;
        line-height: 1.4;
        color: black;
        background: white;
      }
      .print-invoice {
        width: 138mm;
        max-width: 138mm;
        margin: 0 auto;
        padding: 5mm;
        box-sizing: border-box;
      }
    `:`
      @page { size: 80mm auto; margin: 2mm; }
      body { 
        font-family: Arial, sans-serif; 
        margin: 0; 
        padding: 0;
        font-size: 10px;
        line-height: 1.2;
        width: 76mm;
        color: black;
        background: white;
      }
      .print-receipt {
        width: 76mm;
        max-width: 76mm;
        margin: 0 auto;
        padding: 2mm;
        box-sizing: border-box;
      }
    `}
    
    /* Ensure all elements are print-friendly */
    * {
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
      color-adjust: exact !important;
    }
    
    /* Grid and table styles */
    [style*="display: grid"] {
      border-collapse: collapse;
    }
    
    /* Border styles */
    [style*="border"] {
      border-color: black !important;
    }
  </style>
</head>
<body>
  ${i}
</body>
</html>`,a={name:r,type:"local"},l={content:s,options:{copies:1,jobName:`${e.type==="invoice"?"Invoice":"Receipt"} ${e.saleId||"Preview"}`,colorType:"blackwhite",orientation:(e.type==="invoice","portrait"),paperSize:e.type==="invoice"?{width:5.83,height:8.27,units:"in"}:{width:3.15,height:11,units:"in"},margins:{top:.1,right:.1,bottom:.1,left:.1,units:"in"}}};return await Tn.printHTML(a,l),console.log(`QZ Tray: Successfully sent ${e.type} to ${r}`),!0;const c={content:i,options:{copies:1,jobName:`${e.type==="invoice"?"Invoice":"Receipt"} ${e.saleId||"Preview"}`,colorType:"blackwhite",orientation:(e.type==="invoice","portrait"),paperSize:e.type==="invoice"?{width:5.83,height:8.27,units:"in"}:{width:3.15,height:11,units:"in"},margins:{top:.1,right:.1,bottom:.1,left:.1,units:"in"}}};return await Tn.printHTML(a,c),console.log(`QZ Tray: Successfully sent ${e.type} to ${r}`),!0}catch(n){throw console.error("QZ Tray silent print failed:",n),n}},Ome=async(e,t)=>{var n,r;try{if(!await Do())throw new Error("QZ Tray is not available. Please ensure QZ Tray is installed and running.");let s=t;if(!s){const d=localStorage.getItem("qz.receiptPrinter");d&&(s=d)}if(!s){const d=await hj();d&&(s=d)}if(!s)throw new Error("No printer specified, persisted, or default printer found");let a=null;try{const d=await fetch(`${Or()}/settings/company`,{credentials:"include"});d.ok&&(a=await d.json())}catch(d){console.warn("Could not fetch company settings:",d)}const l=JSON.parse(localStorage.getItem("user")||"{}"),c=Tn.generateESCPOSReceipt({companyName:(a==null?void 0:a.companyName)||"COMPANY NAME",address:(a==null?void 0:a.address)||"",phone1:(a==null?void 0:a.phone1)||"",phone2:(a==null?void 0:a.phone2)||"",location:(a==null?void 0:a.location)||"",receiptNumber:e.saleId?e.saleId.toString().padStart(7,"0"):"PREVIEW",date:new Date().toLocaleString("en-US",{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),customer:(n=e.customer)==null?void 0:n.name,customerPhone:(r=e.customer)==null?void 0:r.phone,items:e.items,totalAmount:e.totalAmount,paymentMethod:e.paymentMethod,creditPercentage:e.creditPercentage,salesperson:l==null?void 0:l.name,mobileMoneyNumber:a==null?void 0:a.mobileMoneyNumber}),u={name:s,type:"local"};return await Tn.printRaw(u,c),console.log(`QZ Tray: Successfully sent thermal receipt to ${s}`),!0}catch(i){throw console.error("QZ Tray thermal print failed:",i),i}},Ro=async(e,t)=>{try{return await Do()?(console.log("Using QZ Tray for silent invoice printing"),await Q$({...e,type:"invoice"},t)):(console.log("QZ Tray not available, falling back to printer service"),await qA(e))}catch(n){return console.error("Silent invoice printing failed:",n),console.log("Falling back to browser print due to error"),await qA(e)}},Mo=async(e,t,n=!1)=>{try{return await Do()?(console.log(`Using QZ Tray for silent receipt printing${n?" (thermal)":""}`),n?await Ome({...e,type:"receipt"},t):await Q$({...e,type:"receipt"},t)):(console.log("QZ Tray not available, falling back to printer service"),await VA(e))}catch(r){return console.error("Silent receipt printing failed:",r),console.log("Falling back to browser print due to error"),await VA(e)}},Ime=async e=>{try{await Tn.initialize();const t=`
      <div style="text-align: center; font-family: Arial;">
        <h2>QZ Tray Test Print</h2>
        <p>Date: ${new Date().toLocaleString()}</p>
        <p>Printer: ${e}</p>
        <p>Status: Connection successful!</p>
      </div>
    `,n={name:e,type:"local"},r={content:t,options:{copies:1,jobName:"QZ Tray Test Print"}};return await Tn.printHTML(n,r),console.log(`QZ Tray test print sent to ${e}`),!0}catch(t){return console.error("QZ Tray test print failed:",t),!1}},Dme=async()=>{try{if(!await Do())return{available:!1};const t=await Tn.getVersion(),n=await Tme();return{available:!0,version:t,printers:n}}catch(e){return console.error("Failed to get QZ Tray info:",e),{available:!1}}},Rme=()=>{var h,p;const{id:e}=Pf(),t=St(),[n,r]=b.useState(null),[i,s]=b.useState(!0),[a,l]=b.useState(null),[c,u]=b.useState(!1),d=g=>{const m=typeof g=="string"?parseFloat(g):g;return isNaN(m)?"0.00":m.toFixed(2)};if(b.useEffect(()=>{(async()=>{if(!e){l("Sale ID is required"),s(!1);return}try{const m=await pe(`/api/sales/${e}`);if(m.ok){const y=await m.json();if(!y||typeof y!="object")throw new Error("Invalid response format");const v={...y,items:Array.isArray(y.saleitem)?y.saleitem.map(x=>({...x,quantity:typeof x.quantity=="string"?parseFloat(x.quantity):x.quantity,price:typeof x.price=="string"?parseFloat(x.price):x.price})):[]};r(v),l(null)}else if(m.status===401)t("/login");else throw new Error(`Failed to fetch sale details: ${m.statusText}`)}catch(m){const y=m instanceof Error?m.message:"An unexpected error occurred";console.error("Error fetching sale details:",y),l(y)}finally{s(!1)}})()},[e,t]),i)return o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});if(a)return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),o.jsx("p",{className:"text-gray-600 mb-4",children:a}),o.jsx("button",{onClick:()=>t("/sales"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to Sales"})]});if(!n)return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Sale not found"}),o.jsx("button",{onClick:()=>t("/sales"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to Sales"})]});const f=async g=>{if(!n||!n.items||n.items.length===0){alert("No items to print");return}try{const m={type:g,items:n.items.map(j=>({id:j.id.toString(),name:j.product.name,price:Number(j.price),quantity:Number(j.quantity),total:Number(j.price)*Number(j.quantity),unit:j.unit})),totalAmount:Number(n.totalAmount),totalItems:n.items.reduce((j,S)=>j+Number(S.quantity),0),customer:n.customer||void 0,paymentMethod:n.paymentMethod==="CREDIT"||n.saleType==="CREDIT"?"CREDIT":"CASH",creditPercentage:n.creditPercentage?Number(n.creditPercentage):0,baseTotal:n.creditPercentage&&(n.paymentMethod==="CREDIT"||n.saleType==="CREDIT")?Number(n.totalAmount)/(1+Number(n.creditPercentage)/100):void 0,saleId:n.id},y=g==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",v=localStorage.getItem(y)||void 0;let x=!1;if((localStorage.getItem("qz.printMode")==="browser"?"browser":"silent")==="silent"&&v)try{const j={...m,salesperson:n.user?{name:n.user.name}:void 0};g==="invoice"?x=await Ro(j,v):x=await Mo(j,v)}catch(j){console.warn("Silent QZ printing failed, falling back to standard print:",j),x=!1}x||await hs({...m,salesperson:n.user?{name:n.user.name}:void 0}),u(!1)}catch(m){console.error("Error preparing print:",m),alert("Error preparing print: "+(m instanceof Error?m.message:"Unknown error"))}};return o.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[o.jsxs("div",{className:"no-print flex justify-between items-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Sale Details"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>u(!c),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:[o.jsx(Ar.Printer,{className:"w-4 h-4 mr-2"}),"Print Sale"]}),c&&o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10",children:[o.jsx("button",{onClick:()=>{f("invoice"),u(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100",children:"Print Invoice (A5)"}),o.jsx("button",{onClick:()=>{f("receipt"),u(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100",children:"Print Receipt"})]})]}),o.jsx("button",{onClick:()=>t("/sales"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to Sales"})]})]}),o.jsxs("div",{className:"no-print bg-white rounded-lg shadow-lg p-6 mb-8",children:["        ",o.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Sale Information"}),o.jsxs("p",{className:"text-gray-600",children:["Sale ID: ",n.id]}),o.jsxs("p",{className:"text-gray-600",children:["Date: ",new Date(n.createdAt).toLocaleString()]}),(n.paymentMethod==="CREDIT"||n.saleType==="CREDIT")&&n.creditPercentage&&Number(n.creditPercentage)>0?o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-gray-600",children:"Payment Method: Credit Card"}),o.jsxs("p",{className:"text-gray-600",children:["Subtotal: ",d(Number(n.totalAmount)/(1+Number(n.creditPercentage)/100))]}),o.jsxs("p",{className:"text-gray-600",children:["Credit Surcharge (",Number(n.creditPercentage).toFixed(1),"%): ",d(Number(n.totalAmount)/(1+Number(n.creditPercentage)/100)*Number(n.creditPercentage)/100)]}),o.jsxs("p",{className:"text-gray-600 font-semibold",children:["Total Amount: ",d(n.totalAmount)]})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-gray-600",children:"Payment Method: Cash"}),o.jsxs("p",{className:"text-gray-600",children:["Total Amount: ",d(n.totalAmount)]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Customer & Salesperson"}),o.jsxs("p",{className:"text-gray-600",children:["Customer: ",n.customer?n.customer.name:"Walk-in Customer",((h=n.customer)==null?void 0:h.phone)&&` (${n.customer.phone})`]}),o.jsxs("p",{className:"text-gray-600",children:["Salesperson: ",n.user.name]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Items"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(p=n.items)==null?void 0:p.map(g=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.product.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.unit}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d(g.quantity)}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",d(g.price)]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",d(Number(g.quantity)*Number(g.price))]})]},g.id))})]})})]})]})]})},Vy=({isOpen:e,onClose:t,onSelect:n,units:r})=>{if(!e)return null;const s=r.reduce((a,l)=>{const c=a.find(u=>u.name===l.name);return!c||l.unitId>c.unitId?[...a.filter(d=>d.name!==l.name),l]:a},[]).sort((a,l)=>a.conversionRate===1?-1:l.conversionRate===1?1:a.name.localeCompare(l.name));return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden w-[400px]",children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Choose Unit of Measure"}),o.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:o.jsx(Lt,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-4 grid grid-cols-2 gap-4",children:s.map(a=>o.jsxs("button",{onClick:()=>{n(a),t()},className:`p-4 rounded-lg border text-center hover:bg-blue-50 transition-colors
                ${a.conversionRate===1?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[o.jsx("div",{className:"text-lg font-semibold",children:a.name}),o.jsx("div",{className:"text-sm text-gray-600",children:a.conversionRate===1?"Base Unit":`1 ${a.name} = ${a.conversionRate} base units`}),o.jsxs("div",{className:"text-sm font-medium text-blue-600",children:["",a.price.toFixed(2)]})]},`${a.name}-${a.unitId}`))}),o.jsx("div",{className:"p-4 bg-gray-50 flex justify-end",children:o.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Cancel"})})]})})},Oi=Object.create(null);Oi.open="0";Oi.close="1";Oi.ping="2";Oi.pong="3";Oi.message="4";Oi.upgrade="5";Oi.noop="6";const vp=Object.create(null);Object.keys(Oi).forEach(e=>{vp[Oi[e]]=e});const bw={type:"error",data:"parser error"},G$=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Y$=typeof ArrayBuffer=="function",X$=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,pj=({type:e,data:t},n,r)=>G$&&t instanceof Blob?n?r(t):KA(t,r):Y$&&(t instanceof ArrayBuffer||X$(t))?n?r(t):KA(new Blob([t]),r):r(Oi[e]+(t||"")),KA=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function QA(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let p0;function Mme(e,t){if(G$&&e.data instanceof Blob)return e.data.arrayBuffer().then(QA).then(t);if(Y$&&(e.data instanceof ArrayBuffer||X$(e.data)))return t(QA(e.data));pj(e,!1,n=>{p0||(p0=new TextEncoder),t(p0.encode(n))})}const GA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_u=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<GA.length;e++)_u[GA.charCodeAt(e)]=e;const $me=e=>{let t=e.length*.75,n=e.length,r,i=0,s,a,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(r=0;r<n;r+=4)s=_u[e.charCodeAt(r)],a=_u[e.charCodeAt(r+1)],l=_u[e.charCodeAt(r+2)],c=_u[e.charCodeAt(r+3)],d[i++]=s<<2|a>>4,d[i++]=(a&15)<<4|l>>2,d[i++]=(l&3)<<6|c&63;return u},Lme=typeof ArrayBuffer=="function",mj=(e,t)=>{if(typeof e!="string")return{type:"message",data:Z$(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:Fme(e.substring(1),t)}:vp[n]?e.length>1?{type:vp[n],data:e.substring(1)}:{type:vp[n]}:bw},Fme=(e,t)=>{if(Lme){const n=$me(e);return Z$(n,t)}else return{base64:!0,data:e}},Z$=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},J$="",Bme=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((s,a)=>{pj(s,!1,l=>{r[a]=l,++i===n&&t(r.join(J$))})})},Ume=(e,t)=>{const n=e.split(J$),r=[];for(let i=0;i<n.length;i++){const s=mj(n[i],t);if(r.push(s),s.type==="error")break}return r};function zme(){return new TransformStream({transform(e,t){Mme(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let m0;function Ih(e){return e.reduce((t,n)=>t+n.length,0)}function Dh(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Hme(e,t){m0||(m0=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(r===0){if(Ih(n)<1)break;const c=Dh(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ih(n)<2)break;const c=Dh(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ih(n)<8)break;const c=Dh(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(bw);break}i=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Ih(n)<i)break;const c=Dh(n,i);l.enqueue(mj(s?c:m0.decode(c),t)),r=0}if(i===0||i>e){l.enqueue(bw);break}}}})}const e5=4;function Zt(e){if(e)return Wme(e)}function Wme(e){for(var t in Zt.prototype)e[t]=Zt.prototype[t];return e}Zt.prototype.on=Zt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Zt.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Zt.prototype.off=Zt.prototype.removeListener=Zt.prototype.removeAllListeners=Zt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Zt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this};Zt.prototype.emitReserved=Zt.prototype.emit;Zt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Zt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ky=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Tr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),qme="arraybuffer";function t5(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const Vme=Tr.setTimeout,Kme=Tr.clearTimeout;function Qy(e,t){t.useNativeTimers?(e.setTimeoutFn=Vme.bind(Tr),e.clearTimeoutFn=Kme.bind(Tr)):(e.setTimeoutFn=Tr.setTimeout.bind(Tr),e.clearTimeoutFn=Tr.clearTimeout.bind(Tr))}const Qme=1.33;function Gme(e){return typeof e=="string"?Yme(e):Math.ceil((e.byteLength||e.size)*Qme)}function Yme(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function n5(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Xme(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function Zme(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}class Jme extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class gj extends Zt{constructor(t){super(),this.writable=!1,Qy(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new Jme(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=mj(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=Xme(t);return n.length?"?"+n:""}}class ege extends gj{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Ume(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Bme(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=n5()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let r5=!1;try{r5=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const tge=r5;function nge(){}class rge extends ege{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}let _l=class bp extends Zt{constructor(t,n,r){super(),this.createRequest=t,Qy(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=t5(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=bp.requestsCount++,bp.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=nge,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete bp.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};_l.requestsCount=0;_l.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",YA);else if(typeof addEventListener=="function"){const e="onpagehide"in Tr?"pagehide":"unload";addEventListener(e,YA,!1)}}function YA(){for(let e in _l.requests)_l.requests.hasOwnProperty(e)&&_l.requests[e].abort()}const ige=function(){const e=i5({xdomain:!1});return e&&e.responseType!==null}();class sge extends rge{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=ige&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new _l(i5,this.uri(),t)}}function i5(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||tge))return new XMLHttpRequest}catch{}if(!t)try{return new Tr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const s5=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class age extends gj{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=s5?{}:t5(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;pj(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Ky(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=n5()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const g0=Tr.WebSocket||Tr.MozWebSocket;class oge extends age{createSocket(t,n,r){return s5?new g0(t,n,r):n?new g0(t,n):new g0(t)}doWrite(t,n){this.ws.send(n)}}class lge extends gj{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=Hme(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=zme();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),s())}).catch(l=>{})};s();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;this._writer.write(r).then(()=>{i&&Ky(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const cge={websocket:oge,webtransport:lge,polling:sge},uge=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,dge=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ww(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=uge.exec(e||""),s={},a=14;for(;a--;)s[dge[a]]=i[a]||"";return n!=-1&&r!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=fge(s,s.path),s.queryKey=hge(s,s.query),s}function fge(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function hge(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const Sw=typeof addEventListener=="function"&&typeof removeEventListener=="function",wp=[];Sw&&addEventListener("offline",()=>{wp.forEach(e=>e())},!1);class ea extends Zt{constructor(t,n){if(super(),this.binaryType=qme,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=ww(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=ww(n.host).host);Qy(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Zme(this.opts.query)),Sw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wp.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=e5,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ea.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ea.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=Gme(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Ky(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:t,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(ea.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Sw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=wp.indexOf(this._offlineEventListener);r!==-1&&wp.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}ea.protocol=e5;class pge extends ea{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;ea.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ea.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,d(),n.close(),n=null)}const a=f=>{const h=new Error("probe error: "+f);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function l(){a("transport closed")}function c(){a("socket closed")}function u(f){n&&f.name!==n.name&&s()}const d=()=>{n.removeListener("open",i),n.removeListener("error",a),n.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};n.once("open",i),n.once("error",a),n.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let mge=class extends pge{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>cge[i]).filter(i=>!!i)),super(t,r)}};function gge(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=ww(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const yge=typeof ArrayBuffer=="function",xge=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,a5=Object.prototype.toString,vge=typeof Blob=="function"||typeof Blob<"u"&&a5.call(Blob)==="[object BlobConstructor]",bge=typeof File=="function"||typeof File<"u"&&a5.call(File)==="[object FileConstructor]";function yj(e){return yge&&(e instanceof ArrayBuffer||xge(e))||vge&&e instanceof Blob||bge&&e instanceof File}function Sp(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Sp(e[n]))return!0;return!1}if(yj(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Sp(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Sp(e[n]))return!0;return!1}function wge(e){const t=[],n=e.data,r=e;return r.data=jw(n,t),r.attachments=t.length,{packet:r,buffers:t}}function jw(e,t){if(!e)return e;if(yj(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=jw(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=jw(e[r],t));return n}return e}function Sge(e,t){return e.data=Nw(e.data,t),delete e.attachments,e}function Nw(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Nw(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Nw(e[n],t));return e}const jge=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Nge=5;var rt;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(rt||(rt={}));class kge{constructor(t){this.replacer=t}encode(t){return(t.type===rt.EVENT||t.type===rt.ACK)&&Sp(t)?this.encodeAsBinary({type:t.type===rt.EVENT?rt.BINARY_EVENT:rt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===rt.BINARY_EVENT||t.type===rt.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=wge(t),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function XA(e){return Object.prototype.toString.call(e)==="[object Object]"}class xj extends Zt{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===rt.BINARY_EVENT;r||n.type===rt.BINARY_ACK?(n.type=r?rt.EVENT:rt.ACK,this.reconstructor=new Pge(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(yj(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(rt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===rt.BINARY_EVENT||r.type===rt.BINARY_ACK){const s=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const a=t.substring(s,n);if(a!=Number(a)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(t.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(s,n)}else r.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const a=t.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){const s=this.tryParse(t.substr(n));if(xj.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case rt.CONNECT:return XA(n);case rt.DISCONNECT:return n===void 0;case rt.CONNECT_ERROR:return typeof n=="string"||XA(n);case rt.EVENT:case rt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&jge.indexOf(n[0])===-1);case rt.ACK:case rt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Pge{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Sge(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Cge=Object.freeze(Object.defineProperty({__proto__:null,Decoder:xj,Encoder:kge,get PacketType(){return rt},protocol:Nge},Symbol.toStringTag,{value:"Module"}));function Jr(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Age=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class o5 extends Zt{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Jr(t,"open",this.onopen.bind(this)),Jr(t,"packet",this.onpacket.bind(this)),Jr(t,"error",this.onerror.bind(this)),Jr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,i,s;if(Age.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:rt.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,f=n.pop();this._registerAckCallback(d,f),a.id=d}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),a=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...n){return new Promise((r,i)=>{const s=(a,l)=>a?i(a):r(l);s.withError=!0,n.push(s),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:rt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case rt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case rt.EVENT:case rt.BINARY_EVENT:this.onevent(t);break;case rt.ACK:case rt.BINARY_ACK:this.onack(t);break;case rt.DISCONNECT:this.ondisconnect();break;case rt.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:rt.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:rt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function zc(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}zc.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};zc.prototype.reset=function(){this.attempts=0};zc.prototype.setMin=function(e){this.ms=e};zc.prototype.setMax=function(e){this.max=e};zc.prototype.setJitter=function(e){this.jitter=e};class kw extends Zt{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Qy(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new zc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||Cge;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new mge(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Jr(n,"open",function(){r.onopen(),t&&t()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},a=Jr(n,"error",s);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Jr(t,"ping",this.onping.bind(this)),Jr(t,"data",this.ondata.bind(this)),Jr(t,"error",this.onerror.bind(this)),Jr(t,"close",this.onclose.bind(this)),Jr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Ky(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new o5(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const xu={};function to(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=gge(e,t.path||"/socket.io"),r=n.source,i=n.id,s=n.path,a=xu[i]&&s in xu[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let c;return l?c=new kw(r,t):(xu[i]||(xu[i]=new kw(r,t)),c=xu[i]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(to,{Manager:kw,Socket:o5,io:to,connect:to});const Ege=3e4,_ge=()=>{const{id:e}=Pf(),t=St(),[n,r]=b.useState(""),[i,s]=b.useState(!1),[a,l]=b.useState([]),[c,u]=b.useState([]),[d,f]=b.useState([]),[h,p]=b.useState(!1),[g,m]=b.useState(null),[y,v]=b.useState(!1),[x,w]=b.useState(!0),[j,S]=b.useState(null),[k,N]=b.useState("retail"),[P,A]=b.useState(!1),[C,_]=b.useState(null),[R,z]=b.useState(0),[M,I]=b.useState(""),[$,E]=b.useState(""),[T,D]=b.useState(null),[H,F]=b.useState(!1),[B,Z]=b.useState([]),[V,G]=b.useState(null),[X,U]=b.useState("CASH"),[ne,q]=b.useState(0),[ie,re]=b.useState(!1),[ee,he]=b.useState(null),[fe,je]=b.useState(!1),[Se,Ce]=b.useState(!1),[Oe,se]=b.useState(-1),[K,J]=b.useState(-1),oe=b.useRef(null),me=b.useRef(null),xe=b.useRef(null),Re=b.useRef({}),Te=b.useRef(null),ge=b.useRef(null),[_e,qe]=b.useState({});b.useEffect(()=>{const ae=to("https://192.168.0.10:5443");return ae.on("stock-update",ce=>{f(ve=>ve.map(Ee=>Ee.id===ce.productId?{...Ee,stock:ce.newStock,version:ce.version}:Ee))}),()=>{ae.disconnect()}},[]),b.useEffect(()=>{const Y=setTimeout(()=>{E(M)},300);return()=>clearTimeout(Y)},[M]),b.useEffect(()=>{$.trim().length===0&&F(!1)},[$,M]),b.useEffect(()=>{J(-1)},[$]),b.useEffect(()=>{(async()=>{try{const ae=await Ke.getStatus();ae.success&&ae.status&&(je(ae.status.connected),ae.status.connected&&await Ke.displayWelcome())}catch(ae){console.error("Error checking VFD status:",ae),je(!1)}})()},[]),b.useEffect(()=>{(async()=>{try{e&&localStorage.setItem("activeSaleId",e);const[ae,ce]=await Promise.all([pe(`/api/sales/${e}`),pe("/api/products/pos")]);if(!ae.ok||!ce.ok){if(ae.status===401||ce.status===401){t("/login");return}throw new Error(`Failed to fetch data: ${ae.status} ${ce.status}`)}const[ve,Ee]=await Promise.all([ae.json(),ce.json()]);if(!ve)throw new Error("Sale data is empty");const Me={...ve,items:ve.saleitem||[]};S(Me),f(Ee);const Fe=Me.items.map(We=>({id:We.id,productId:We.productId,price:Number(We.price),quantity:Number(We.quantity),total:Number(We.price)*Number(We.quantity),unit:We.unit,baseUnits:Number(We.baseUnits),product:{id:We.product.id.toString(),name:We.product.name}}));l(Fe),u(Fe),N(ve.saleType==="WHOLESALE"?"wholesale":"retail"),ve.paymentMethod==="CREDIT"||ve.creditPercentage>0?(U("CREDIT"),q(Number(ve.creditPercentage)||0)):(U("CASH"),q(0))}catch(ae){console.error("Error fetching data:",ae),alert(ae instanceof Error?ae.message:"Failed to fetch sale data")}finally{w(!1)}})()},[e,t]),b.useEffect(()=>()=>{localStorage.getItem("activeSaleId")===e&&(window.location.pathname.includes(`/sales/${e}/edit`)||localStorage.removeItem("activeSaleId"))},[e]);const Ze=async Y=>{var ae;if(!(!e||!j))try{const ce={customerId:(T==null?void 0:T.id)||((ae=j==null?void 0:j.customer)==null?void 0:ae.id)||null,items:Y.map(Ee=>({productId:Ee.productId,quantity:Ee.quantity,price:Ee.price,unit:Ee.unit,baseUnits:Ee.baseUnits})),totalAmount:Y.reduce((Ee,Me)=>Ee+Me.price*Me.quantity,0),saleType:k==="wholesale"?"WHOLESALE":"RETAIL",paymentMethod:X,creditPercentage:X==="CREDIT"?ne:0},ve=await pe(`/api/sales/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)});if(!ve.ok){if(ve.status===401){t("/login");return}throw new Error("Failed to persist sale items")}u([...Y]),console.log("Sale items persisted successfully")}catch(ce){console.error("Error persisting sale items:",ce)}},Ue=b.useMemo(()=>{if(console.log("Filtering products - searchTerm:",n,"products count:",d.length),!n||n.trim().length===0)return console.log("No search term, returning empty array"),[];if(!d||d.length===0)return console.log("No products available, returning empty array"),[];const Y=n.toLowerCase().trim(),ae=d.filter(ve=>!ve||!ve.name?!1:ve.name.toLowerCase().startsWith(Y));return console.log("Filtered products:",ae.length,"matches for term:",n),ae.sort((ve,Ee)=>ve.name.toLowerCase().localeCompare(Ee.name.toLowerCase()))},[d,n]);b.useEffect(()=>{se(-1)},[Ue]),b.useEffect(()=>{if(Oe>=0&&Te.current){const Y=Te.current,ae=Y.children[Oe];if(ae){const ce=Y.getBoundingClientRect(),ve=ae.getBoundingClientRect();ve.bottom>ce.bottom?Y.scrollTop+=ve.bottom-ce.bottom:ve.top<ce.top&&(Y.scrollTop-=ce.top-ve.top)}}},[Oe]),b.useEffect(()=>{if(K>=0&&ge.current){const Y=ge.current,ae=Y.children[K];if(ae){const ce=Y.getBoundingClientRect(),ve=ae.getBoundingClientRect();ve.bottom>ce.bottom?Y.scrollTop+=ve.bottom-ce.bottom:ve.top<ce.top&&(Y.scrollTop-=ce.top-ve.top)}}},[K]);const ut=Y=>{if(Y.key==="Enter"){if(Ue.length>0){const ae=Oe>=0&&Oe<Ue.length?Ue[Oe]:Ue[0];Y.preventDefault(),console.log("Selecting product:",ae),Qt(ae)}}else Y.key==="ArrowDown"?(Y.preventDefault(),Ue.length>0&&se(ae=>ae<Ue.length-1?ae+1:0)):Y.key==="ArrowUp"?(Y.preventDefault(),Ue.length>0&&se(ae=>ae>0?ae-1:Ue.length-1)):Y.key==="Escape"&&(s(!1),se(-1))},Qt=async Y=>{const ae=Sa(Y),ce=ne>0?Number((ae*(1+ne/100)).toFixed(2)):ae,ve={name:Y.baseUnit.name,baseUnits:1,price:ce},Ee=a.find(tt=>tt.productId===parseInt(Y.id));let Me,Fe=1;if(Ee)Fe=Ee.quantity+1,Me=a.map(tt=>tt.productId===parseInt(Y.id)?{...tt,quantity:Fe,price:ce,total:Fe*ce}:tt);else{if(!Y){console.error("Error: product is undefined");return}if(!ve){console.error("Error: defaultUnit is undefined");return}const tt={id:`new-${Y.id}-${Date.now()}`,productId:parseInt(Y.id),price:ce,quantity:1,total:ce,unit:ve.name,baseUnits:ve.baseUnits,product:{id:Y.id,name:Y.name}};Me=[...a,tt]}l(Me),await Ze(Me);const We=Me.reduce((tt,fn)=>tt+fn.total,0);console.log("EditSale: About to send product to VFD:",{productName:Y.name,price:ce,total:We,quantity:Fe}),fe&&Ke.displayProduct({productName:Y.name,price:ce,total:We,quantity:Fe}).then(tt=>{console.log("EditSale: VFD API response:",tt)}).catch(tt=>{console.error("EditSale: Failed to update VFD display:",tt)}),r(""),setTimeout(()=>{let tt;if(Ee)tt=Ee.id;else{const hi=Me.find(Zc=>Zc.productId===parseInt(Y.id)&&Zc.id.startsWith(`new-${Y.id}`));tt=hi?hi.id:""}const fn=Re.current[tt];fn&&(fn.focus(),fn.select())},150)},bt=async Y=>{try{const ae=[];if(Y.forEach(Ee=>{const Me=c.find(Fe=>Fe.id===Ee.id);if(!Me)ae.push({productId:Ee.productId,quantity:Ee.quantity*Ee.baseUnits});else{const Fe=Ee.quantity-Me.quantity;Fe>0&&ae.push({productId:Ee.productId,quantity:Fe*Ee.baseUnits})}}),c.forEach(Ee=>{const Me=Y.find(Fe=>Fe.id===Ee.id);if(!Me)ae.push({productId:Ee.productId,quantity:-(Ee.quantity*Ee.baseUnits)});else{const Fe=Me.quantity-Ee.quantity;Fe<0&&ae.push({productId:Ee.productId,quantity:Fe*Ee.baseUnits})}}),ae.length===0)return!0;console.log("Sending stock updates:",ae);const ce=await pe("/api/products/stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:ae})});if(!ce.ok)throw ce.status===401?new Error("Authentication failed"):new Error(`Stock update failed: ${ce.statusText}`);const ve=await ce.json();if(console.log("Stock update response:",ve),!ve.success){const Ee=ve.results.filter(Me=>!Me.success).map(Me=>{var We;const Fe=a.find(tt=>tt.productId===Me.productId)||c.find(tt=>tt.productId===Me.productId);return`${((We=Fe==null?void 0:Fe.product)==null?void 0:We.name)||"Unknown Product"}: ${Me.message}${Me.currentStock?` (Available: ${Me.currentStock})`:""}`}).join(`
`);throw new Error(`Stock update failed:
${Ee}`)}return!0}catch(ae){return console.error("Error updating stock:",ae),alert(ae instanceof Error?ae.message:"An unexpected error occurred while updating stock"),!1}},Kc=async Y=>{const ae=a.filter(ce=>ce.id!==Y);if(l(ae),await Ze(ae),fe)if(ae.length>0){const ce=ae.reduce((Ee,Me)=>Ee+Me.total,0),ve=ae[ae.length-1];Ke.displayProduct({productName:ve.product.name,price:ve.price,total:ce,quantity:ve.quantity}).catch(Ee=>console.error("Failed to update VFD display:",Ee))}else Ke.displayWelcome().catch(ce=>console.error("Failed to update VFD display:",ce))},Sa=Y=>{if(k==="wholesale")return Number(Y.wholesalePrice);{const ae=Number(Y.retailPrice);return ae===0?Math.ceil(Number(Y.wholesalePrice)*1.2):ae}},Qc=Y=>{var Ee;console.log("Getting units for product:",Y),console.log("Available products:",d);const ae=parseInt(Y.toString()),ce=d.find(Me=>parseInt(Me.id)===ae);if(!ce)return console.log("Product not found:",Y),console.log("Available product IDs:",d.map(Me=>parseInt(Me.id))),[];console.log("Found product:",ce);const ve=[{name:ce.baseUnit.name,baseUnits:1,price:Sa(ce),unitId:ce.baseUnit.id,conversionRate:1}];return((Ee=ce.productunit)==null?void 0:Ee.length)>0&&ce.productunit.forEach(Me=>{ve.push({name:Me.unit.name,baseUnits:Number(Me.conversionRate),price:Number(Me.price),unitId:Me.unit.id,conversionRate:Number(Me.conversionRate)})}),console.log("Available units:",ve),ve},Gc=async Y=>{if(!g)return;const ae=a.find(We=>We.id===g);if(!ae)return;const ce=d.find(We=>We.id===ae.product.id);if(!ce)return;console.log("Selected unit:",Y),console.log("Current item:",ae),console.log("Found product:",ce);const ve=Y.conversionRate||1,Ee=ae.quantity*(ae.baseUnits||1);if(ce.stock<ve){alert(`Insufficient stock. Available: ${Math.floor(ce.stock/ve)} ${Y.name}(s)`);return}let Me=Math.floor(Ee/ve);Me<1&&ce.stock>=ve&&(Me=1);const Fe=a.map(We=>We.id===g?{...We,unit:String(Y.name),baseUnits:Number(ve),price:Number(Y.price),quantity:Number(Me),total:Number(Me)*Number(Y.price)}:We);l(Fe),await Ze(Fe),p(!1)},Ns=async Y=>{var ae;try{if(!j||!j.id){alert("Sale not found"),t("/sales");return}if(a.length===0){alert("No items to print");return}if(!await bt(a))return;const ve={customerId:((ae=j==null?void 0:j.customer)==null?void 0:ae.id)||null,items:a.map(dt=>({productId:dt.productId,quantity:dt.quantity,price:dt.price,unit:dt.unit,baseUnits:dt.baseUnits})),totalAmount:a.reduce((dt,tn)=>dt+tn.price*tn.quantity,0),saleType:k==="wholesale"?"WHOLESALE":"RETAIL",paymentMethod:X,creditPercentage:X==="CREDIT"?ne:0};console.log("Updating sale for print with data:",ve);const Ee=await pe(`/api/sales/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(ve)});if(console.log("Print update response status:",Ee.status),!Ee.ok){if(Ee.status===401){t("/login");return}let dt="Failed to update sale for printing";try{const tn=await Ee.json();console.log("Error response data:",tn),dt=tn.message||dt}catch{dt=`Failed to update sale: ${Ee.statusText}`}throw new Error(dt)}const Me=await Ee.json();console.log("Successfully updated sale for printing:",Me);const Fe={type:Y,items:a.map(dt=>({id:dt.id,name:dt.product.name,quantity:dt.quantity,unit:dt.unit,price:dt.price,total:dt.price*dt.quantity})),totalAmount:a.reduce((dt,tn)=>dt+tn.price*tn.quantity,0),totalItems:a.reduce((dt,tn)=>dt+tn.quantity,0),customer:(j==null?void 0:j.customer)||T||void 0,paymentMethod:X,creditPercentage:X==="CREDIT"?ne:0,baseTotal:X==="CREDIT"&&ne>0?a.reduce((dt,tn)=>dt+tn.price*tn.quantity,0):void 0,saleId:(j==null?void 0:j.id)||parseInt(e||"0")},We=Y==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",tt=localStorage.getItem(We)||void 0;let fn=!1;const hi={...Fe,salesperson:V?{name:V.name}:void 0};if((localStorage.getItem("qz.printMode")==="browser"?"browser":"silent")==="silent"&&tt)try{fn=Y==="invoice"?await Ro(hi,tt):await Mo(hi,tt)}catch(dt){console.warn("Silent QZ printing failed, falling back:",dt),fn=!1}if(fn||await hs(hi),fe){const dt=a.reduce((tn,Jf)=>tn+Jf.price*Jf.quantity,0);Ke.displayTotal(dt).then(tn=>{console.log("EditSale: VFD display total after print:",tn),setTimeout(()=>{Ke.displayWelcome().catch(Jf=>console.error("Failed to display welcome after print:",Jf))},3e3)}).catch(tn=>{console.error("EditSale: Failed to display total on VFD after print:",tn)})}u([...a]),localStorage.removeItem("activeSaleId"),v(!1),setTimeout(()=>{t("/sales")},1500)}catch(ce){console.error("Error printing sale:",ce),alert(ce instanceof Error?ce.message:"An unexpected error occurred while preparing to print")}};b.useEffect(()=>{(async()=>{try{const ae=await pe("/api/customers");if(ae.ok){const ce=await ae.json();Array.isArray(ce)&&Z(ce)}else ae.status===401&&t("/login")}catch(ae){console.error("Error fetching customers:",ae)}})()},[t]),b.useEffect(()=>{(async()=>{try{const ae=await pe("/api/users/me");if(ae.ok){const ce=await ae.json();G(ce.data.user)}else ae.status===401&&t("/login")}catch(ae){console.error("Error fetching current user:",ae)}})()},[t]),b.useEffect(()=>{const Y=ae=>{oe.current&&!oe.current.contains(ae.target)&&s(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]),b.useEffect(()=>{const Y=ae=>{me.current&&!me.current.contains(ae.target)&&F(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]),b.useEffect(()=>{(async()=>{try{const ae=await pe("/api/customers");if(ae.ok){const ce=await ae.json();Z(ce)}}catch(ae){console.error("Error fetching customers:",ae)}})()},[]),b.useEffect(()=>{(async()=>{try{const ae=await pe("/api/users/me");if(ae.ok){const ce=await ae.json();G(ce.data.user)}else ae.status===401&&t("/login")}catch(ae){console.error("Error fetching current user:",ae)}})()},[t]);const ja=b.useCallback(async()=>{try{if(a.length>0){const Y="/api/products/pos",ae=new URLSearchParams,ce=a.map(Fe=>Fe.productId.toString()).join(",");ae.append("ids",ce);const ve=await fetch(`${Y}?${ae}`,{credentials:"include"});if(!ve.ok){if(ve.status===401){t("/login");return}throw new Error("Failed to fetch products")}const Ee=await ve.json(),Me=a.map(Fe=>{const We=Ee.find(tt=>parseInt(tt.id)===Fe.productId);return We?We.stock<Fe.quantity*Fe.baseUnits?`${Fe.product.name}: Only ${Math.floor(We.stock/Fe.baseUnits)} ${Fe.unit}(s) available`:null:`${Fe.product.name}: Product no longer available`}).filter(Boolean);Me.length>0&&alert(`Stock has changed:
`+Me.join(`
`)),f(Fe=>Fe.map(We=>Ee.find(fn=>fn.id===We.id)||We))}}catch(Y){console.error("Error refreshing products:",Y)}},[t,a]);b.useEffect(()=>{if(a.length>0){const Y=setInterval(ja,Ege);return()=>clearInterval(Y)}},[ja,a.length]);const rr=async(Y,ae,ce)=>{try{const ve=await pe(`/api/products/${Y}`);if(!ve.ok)throw new Error("Failed to fetch product stock");const Ee=await ve.json(),Me=ae*ce;return f(Fe=>Fe.map(We=>We.id===Y?{...We,stock:Ee.stock,version:Ee.version}:We)),Number(Ee.stock)>=Me}catch(ve){return console.error("Error checking stock:",ve),!1}},Li=(Y,ae)=>{qe(ce=>({...ce,[Y]:ae}))},fi=async(Y,ae)=>{const ce=parseInt(ae,10);if(isNaN(ce)||ce<1){qe(ve=>({...ve,[Y]:""})),setTimeout(()=>{var ve;(ve=xe.current)==null||ve.focus()},100);return}qe(ve=>({...ve,[Y]:""})),await Rt(Y,ae),setTimeout(()=>{var ve;(ve=xe.current)==null||ve.focus()},100)},Rt=async(Y,ae)=>{const ce=parseInt(ae,10);if(isNaN(ce)||ce<1)return;const ve=a.find(Ee=>Ee.id===Y);if(ve)try{if(!await rr(ve.product.id,ce,ve.baseUnits||1)){const Fe=d.find(tt=>parseInt(tt.id)===ve.productId),We=Fe?Math.floor(Fe.stock/(ve.baseUnits||1)):0;if(alert(`Insufficient stock for ${ve.product.name}. Available: ${We} ${ve.unit}(s)`),ce>ve.quantity){const tt=a.map(fn=>fn.id===Y?{...fn,quantity:We||1,total:(We||1)*Number(fn.price)}:fn);if(l(tt),fe){const fn=tt.reduce((hi,Zc)=>hi+Zc.total,0);Ke.displayProduct({productName:ve.product.name,price:Number(ve.price),total:fn,quantity:We||1}).catch(hi=>console.error("Failed to update VFD display:",hi))}}return}const Me=a.map(Fe=>Fe.id===Y?{...Fe,quantity:ce,total:ce*Number(Fe.price)}:Fe);if(l(Me),await Ze(Me),fe){const Fe=Me.reduce((We,tt)=>We+tt.total,0);Ke.displayProduct({productName:ve.product.name,price:Number(ve.price),total:Fe,quantity:ce}).catch(We=>console.error("Failed to update VFD display:",We))}}catch(Ee){console.error("Error updating quantity:",Ee),alert("Failed to update quantity: "+(Ee instanceof Error?Ee.message:"Unknown error"))}},jr=B.filter(Y=>Y.name.toLowerCase().includes($.toLowerCase().trim())),Na=Y=>{const ae=Y.target.value;I(ae),F(!0)},Lo=async Y=>{D(Y),I(Y.name),F(!1),a.length>0&&await Ze(a),setTimeout(()=>{var ae;(ae=xe.current)==null||ae.focus()},100)},Yc=Y=>{var ae;if(Y.key==="Enter")if(jr.length>0){const ce=K>=0&&K<jr.length?jr[K]:jr[0];Lo(ce)}else(ae=xe.current)==null||ae.focus();else Y.key==="ArrowDown"?(Y.preventDefault(),jr.length>0&&J(ce=>ce<jr.length-1?ce+1:0)):Y.key==="ArrowUp"?(Y.preventDefault(),jr.length>0&&J(ce=>ce>0?ce-1:jr.length-1)):Y.key==="Escape"&&(F(!1),J(-1))},O=async()=>{if(!M.trim()){alert("Please enter a customer name");return}try{const Y=await pe("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:M.trim()})});if(Y.ok){const ae=await Y.json();Z(ce=>[...ce,ae]),D(ae),I(ae.name),F(!1),alert("Customer added successfully!")}else throw new Error("Failed to add customer")}catch(Y){console.error("Error adding customer:",Y),alert("Failed to add customer. Please try again.")}},L=()=>{if(a.length===0){Q();return}he({title:"Clear Sale",message:"Are you sure you want to clear all items? This action cannot be undone.",onConfirm:Q}),re(!0)},Q=()=>{l([]),D(null),I(""),r(""),p(!1),m(null),v(!1),U("CASH"),q(0),re(!1),he(null)},te=()=>{if(a.length===0){alert("No items to hold");return}if(k==="wholesale"&&!T){alert("Please select a customer for wholesale sales");return}he({title:"Hold Sale",message:"Are you sure you want to hold this sale for later?",onConfirm:ue}),re(!0)},ue=async()=>{try{if(a.length===0){alert("No items to hold");return}if(k==="wholesale"&&!T){alert("Please select a customer for wholesale sales");return}const Y={customerId:(T==null?void 0:T.id)||null,userId:V==null?void 0:V.id,items:a.map(ce=>({productId:ce.productId,quantity:ce.quantity,price:ce.price,unit:ce.unit,baseUnits:ce.baseUnits})),totalAmount:a.reduce((ce,ve)=>ce+ve.total,0),status:"held",saleType:k==="wholesale"?"WHOLESALE":"RETAIL"},ae=await pe("/api/held-sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(!ae.ok){if(ae.status===401){t("/login");return}const ce=await ae.json();throw new Error(ce.message||"Failed to hold sale")}Q(),alert("Sale held successfully"),ja()}catch(Y){console.error("Error holding sale:",Y),alert("Failed to hold sale: "+(Y instanceof Error?Y.message:"Unknown error"))}},Ne=()=>{if(a.length===0){alert("No items to save");return}if(k==="wholesale"&&!T){alert("Please select a customer for wholesale sales");return}he({title:"Complete Sale",message:"Are you sure you want to complete this sale?",onConfirm:ke}),re(!0)},ke=async()=>{try{if(a.length===0){alert("No items to save");return}if(k==="wholesale"&&!T){alert("Please select a customer for wholesale sales");return}const Y=a.reduce((Me,Fe)=>Me+Fe.total,0);if(typeof Y!="number"||Y<=0)throw new Error("Invalid total amount");if(!await bt(a))return;const ce={customerId:(T==null?void 0:T.id)||null,userId:V==null?void 0:V.id,items:a.map(Me=>({productId:Me.productId,quantity:Me.quantity,price:Me.price,unit:Me.unit,baseUnits:Me.baseUnits})),totalAmount:Y,saleType:k==="wholesale"?"WHOLESALE":"RETAIL"},ve=await pe("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)});if(!ve.ok){if(ve.status===401){t("/login");return}const Me=await ve.json();throw new Error(Me.message||"Failed to save sale")}const Ee=await ve.json();console.log("Sale saved successfully:",Ee),localStorage.removeItem("activeSaleId"),Q(),alert("Sale completed and saved successfully"),t("/sales")}catch(Y){console.error("Error completing sale:",Y),Y instanceof Error&&Y.message.includes("Stock update failed:")?alert(Y.message):alert("Failed to complete sale: "+(Y instanceof Error?Y.message:"Unknown error"))}},be=async Y=>{U(Y),Y==="CASH"&&q(0),a.length>0&&await Ze(a)},ye=()=>{re(!1),he(null)},Le=()=>{ee&&ee.onConfirm(),re(!1),he(null)},et=Y=>{const ae=Y.target.value;if(ae.length<n.length){r(ae);const ce=ae.trim().length>0&&d.length>0;s(ce);return}if(ae.length>n.length&&d.length>0){if(d.some(ve=>ve.name.toLowerCase().startsWith(ae.toLowerCase())))r(ae),s(!0);else try{const ve=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwF");ve.volume=.1,ve.play()}catch{console.log("Invalid character blocked")}return}r(ae),s(ae.trim().length>0)},Ve=()=>{s(n.trim().length>0)};b.useEffect(()=>{const Y=ae=>{ae.key==="Escape"&&y&&v(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[y]);const Mt=Y=>{console.log("Row clicked, displaying VFD info for:",Y.product.name);const ae=a.reduce((ce,ve)=>ce+ve.total,0);fe&&Ke.displayProduct({productName:Y.product.name,price:Y.price,total:ae,quantity:Y.quantity}).then(ce=>{console.log("EditSale: VFD API response for row click:",ce)}).catch(ce=>{console.error("EditSale: Failed to update VFD display on row click:",ce)})},Xc=async()=>{try{(await Ke.reconnect()).success?(je(!0),await Ke.displayWelcome()):je(!1)}catch(Y){console.error("Failed to reconnect VFD:",Y),je(!1)}},vL=async()=>{try{fe&&await Ke.clearDisplay()}catch(Y){console.error("Failed to clear VFD:",Y)}},bL=async()=>{try{fe&&await Ke.displayWelcome()}catch(Y){console.error("Failed to display welcome on VFD:",Y)}};if(x)return o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});if(!j)return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Sale not found"}),o.jsx("button",{onClick:()=>t("/sales"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to Sales"})]});const wL=a.reduce((Y,ae)=>Y+ae.price*ae.quantity,0),SL=a.length,jL=a.reduce((Y,ae)=>Y+ae.quantity,0);function NL(Y){if(!(!Y||R<=0)){if(l(ae=>ae.map(ce=>ce.id===Y.id?{...ce,refundedQuantity:(ce.refundedQuantity||0)+R}:ce)),fe){const ae=Number(Y.price)*R;Ke.displayProduct({productName:`REFUND: ${Y.product.name}`,price:-ae,total:ae,quantity:R}).then(ce=>{console.log("EditSale: VFD display refund:",ce),setTimeout(()=>{Ke.displayWelcome().catch(ve=>console.error("Failed to display welcome after refund:",ve))},3e3)}).catch(ce=>{console.error("EditSale: Failed to display refund on VFD:",ce)})}A(!1),_(null),z(0),alert(`Refunded ${R} ${Y.unit}(s) for ${Y.product.name}.`)}}return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:["Edit Sale #",j.id]}),o.jsxs("p",{className:"text-gray-600 mt-1",children:["Customer: ",j.customer?j.customer.name:"Walk-in Customer"]}),o.jsx("div",{className:"mt-2",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k==="wholesale"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:k==="wholesale"?"WHOLESALE PRICING":"RETAIL PRICING"})})]}),o.jsx("button",{onClick:()=>t("/sales"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),"      "]}),o.jsxs("div",{children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"Search customers...",className:"w-full px-4 py-2 border rounded-lg",value:M,onChange:Na,onKeyDown:Yc}),H&&$.trim().length>0&&o.jsxs("div",{ref:ge,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-auto",children:[B.filter(Y=>Y.name.toLowerCase().includes($.toLowerCase())||Y.phone&&Y.phone.includes($)||Y.email&&Y.email.toLowerCase().includes($.toLowerCase())).map((Y,ae)=>o.jsx("button",{className:`w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${ae===K?"bg-blue-100 dark:bg-blue-900/40":""}`,onClick:()=>Lo(Y),children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:Y.name}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Y.phone||"No phone"," - ",Y.email||"No email"]})]})},Y.id)),o.jsx("button",{onClick:O,className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border-t border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"text-blue-600 font-medium",children:['+ Add "',M,'" as new customer']})})]})]}),T&&o.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:T.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[T.phone||"No phone"," - ",T.email||"No email"]})]}),o.jsx("button",{onClick:()=>D(null),className:"text-red-500 hover:text-red-700",children:o.jsx(Lt,{className:"w-4 h-4"})})]})})]}),o.jsx("div",{children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{ref:xe,type:"text",placeholder:"Search products... (type 2+ characters)",className:"w-full px-4 py-2 border rounded-lg",value:n,onChange:et,onKeyDown:ut,onFocus:Ve}),i&&n.trim().length>0&&o.jsx("div",{ref:Te,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-auto",children:n.trim().length===1?o.jsx("div",{className:"px-4 py-2 text-gray-500 text-sm",children:"Type at least 2 characters to search..."}):Ue.length>0?Ue.map((Y,ae)=>o.jsxs("button",{className:`w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex justify-between items-center ${ae===Oe?"bg-blue-100 dark:bg-blue-900/40":""}`,onClick:()=>Qt(Y),children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:Y.name}),Y.description&&o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:Y.description})]}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-300 ml-2 flex-shrink-0",children:["",Sa(Y)," (Stock: ",Y.stock,")"]})]},Y.id)):o.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No products found"})})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payment Method"}),o.jsxs("div",{className:"flex space-x-4 mb-4",children:[o.jsx("button",{onClick:()=>be("CASH"),className:`px-4 py-2 rounded-lg ${X==="CASH"?"bg-green-500 text-white":"bg-gray-200 text-gray-700"} opacity-60 cursor-not-allowed`,disabled:!0,children:"Cash"}),o.jsx("button",{onClick:()=>be("CREDIT"),className:`px-4 py-2 rounded-lg ${X==="CREDIT"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"} opacity-60 cursor-not-allowed`,disabled:!0,children:"Credit"})]}),X==="CREDIT"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Credit Surcharge (%)"}),o.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:ne,onChange:()=>{},className:"w-24 px-3 py-2 border rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed",readOnly:!0,disabled:!0})]})]}),o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(Y=>o.jsxs("tr",{onClick:()=>Mt(Y),className:"hover:bg-gray-50 cursor-pointer",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Y.product.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>{m(Y.id),p(!0)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:Y.unit})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",Number(Y.price).toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>Rt(Y.id,(Number(Y.quantity)-1).toString()),className:"p-1 rounded-md hover:bg-gray-100",children:o.jsx(V1,{className:"w-4 h-4"})}),o.jsx("input",{ref:ae=>{Re.current[Y.id]=ae},type:"number",min:"0",step:"1",value:_e[Y.id]||"",placeholder:Y.quantity.toString(),onChange:ae=>Li(Y.id,ae.target.value),onKeyDown:ae=>{ae.key==="Enter"&&(ae.preventDefault(),fi(Y.id,ae.currentTarget.value),ae.currentTarget.blur())},onBlur:ae=>{ae.target.value!==""?fi(Y.id,ae.target.value):qe(ce=>({...ce,[Y.id]:""}))},onClick:ae=>ae.stopPropagation(),className:"w-16 px-2 py-1 text-center border rounded-md"}),o.jsx("button",{onClick:()=>Rt(Y.id,(Number(Y.quantity)+1).toString()),className:"p-1 rounded-md hover:bg-gray-100",children:o.jsx(Hn,{className:"w-4 h-4"})})]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",(Y.price*Y.quantity).toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>Kc(Y.id),className:"text-red-500 hover:text-red-700",children:o.jsx(Rn,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>{_(Y),A(!0),z(0)},className:`text-yellow-500 hover:text-yellow-700 ${Y.quantity<=(Y.refundedQuantity||0)?"opacity-50 cursor-not-allowed":""}`,disabled:Y.quantity<=(Y.refundedQuantity||0),children:o.jsx(SB,{className:"w-4 h-4"})})]})})]},Y.id))})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Number of Items:"}),o.jsx("span",{className:"font-medium",children:SL})]}),o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),o.jsx("span",{className:"font-medium",children:jL})]}),o.jsxs("div",{className:"flex justify-between items-center text-xl font-semibold",children:[o.jsx("span",{children:"Total Amount:"}),o.jsxs("span",{children:["",wL.toFixed(2)]})]}),"          ",o.jsxs("div",{className:"mt-4 flex justify-end space-x-4",children:[o.jsxs("button",{onClick:L,className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 flex items-center",children:[o.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Clear Sale"]}),o.jsxs("button",{onClick:te,className:"px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 flex items-center",children:[o.jsx(qg,{className:"w-4 h-4 mr-2"}),"Hold Sale"]}),o.jsxs("button",{onClick:Ne,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:[o.jsx(No,{className:"w-4 h-4 mr-2"}),"Save Sale"]}),"            ",o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>v(!y),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[o.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Print Sale"]}),y&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)}),o.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-52 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:o.jsxs("div",{className:"py-2",children:[o.jsxs("button",{onClick:()=>{Ns("invoice"),v(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[o.jsx(sa,{className:"w-4 h-4 mr-3 text-blue-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Print Invoice (A5)"})]}),o.jsxs("button",{onClick:()=>{Ns("receipt"),v(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[o.jsx(aa,{className:"w-4 h-4 mr-3 text-green-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Print Receipt"})]})]})})]})]})]})]})}),o.jsx(Vy,{isOpen:h,onClose:()=>p(!1),onSelect:Gc,units:(()=>{const Y=a.find(ce=>ce.id===g);if(!Y)return console.log("No selected item found"),[];console.log("Selected item:",Y);const ae=parseInt(Y.product.id);return Qc(ae)})()}),P&&C&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-96",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Process Refund"}),o.jsxs("p",{className:"mb-4",children:["Product: ",C.product.name,o.jsx("br",{}),"Price: ",Number(C.price).toFixed(2),o.jsx("br",{}),"Available for refund: ",C.quantity-(C.refundedQuantity||0),C.unit,o.jsx("br",{}),"Total Refund Amount: ",(Number(C.price)*R).toFixed(2)]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Quantity"}),o.jsx("input",{type:"number",min:"1",max:C.quantity-(C.refundedQuantity||0),value:R,onChange:Y=>z(Number(Y.target.value)),className:"w-full px-3 py-2 border rounded-md"})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx("button",{onClick:()=>{A(!1),_(null),z(0)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Cancel"}),o.jsx("button",{onClick:()=>NL(C),className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600",disabled:R<=0||R>C.quantity-(C.refundedQuantity||0),children:"Process Refund"})]})]})}),ie&&ee&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-96",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:ee.title}),o.jsx("p",{className:"mb-6",children:ee.message}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx("button",{onClick:ye,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Cancel"}),o.jsx("button",{onClick:Le,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Confirm"})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${fe?"bg-green-500":"bg-red-500"}`}),o.jsxs("span",{className:"text-sm font-medium",children:["VFD Display: ",fe?"Connected":"Disconnected"]})]}),o.jsx("div",{className:"flex space-x-2",children:o.jsxs("button",{onClick:()=>Ce(!Se),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:[Se?"Hide":"Show"," Controls"]})})]}),Se&&o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:Xc,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Reconnect"}),o.jsx("button",{onClick:vL,className:"px-3 py-1 text-sm bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Clear"}),o.jsx("button",{onClick:bL,className:"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600",children:"Welcome"})]})})]})]})},Tge=()=>{const e=St(),[t,n]=b.useState([]),[r,i]=b.useState([]),[s,a]=b.useState(!1),[l,c]=b.useState(!0),[u,d]=b.useState(!1),[f,h]=b.useState(null),[p,g]=b.useState({name:"",email:"",phone:"",address:""}),[m,y]=b.useState(""),[v,x]=b.useState(""),[w,j]=b.useState(1),[S,k]=b.useState(1),N=30,[P,A]=b.useState(null),C=b.useRef(null);b.useEffect(()=>{const D=setTimeout(()=>{x(m),j(1)},300);return()=>clearTimeout(D)},[m]);const _=b.useCallback(async()=>{c(!0);try{const D=new URLSearchParams({page:w.toString(),limit:N.toString(),...v&&{search:v}}),H=await pe(`/api/customers?${D}`);if(H.ok){const F=await H.json();if(F&&typeof F=="object")if(Array.isArray(F))i(F);else if(F.customers&&Array.isArray(F.customers)){n(F.customers),k(Math.max(1,F.totalPages||1)),a(!0),w>(F.totalPages||1)&&(F.totalPages||1)>0&&j(1);return}else i([]);else i([])}else throw new Error("Failed to fetch customers")}catch(D){console.error("Error fetching customers:",D),A("Failed to fetch customers"),i([])}finally{c(!1)}},[w,v]);b.useEffect(()=>{_()},[_]),b.useEffect(()=>{if(!s&&r.length>0){const D=r.filter(G=>{var X,U;return G.name.toLowerCase().includes(v.toLowerCase())||(((X=G.email)==null?void 0:X.toLowerCase())||"").includes(v.toLowerCase())||(((U=G.phone)==null?void 0:U.toLowerCase())||"").includes(v.toLowerCase())}),H=Math.max(1,Math.ceil(D.length/N));k(H);const F=Math.min(w,H);if(F!==w){j(F);return}const B=(F-1)*N,Z=B+N,V=D.slice(B,Z);n(V)}},[r,w,v,s]);const R=b.useMemo(()=>t,[t]),z=b.useCallback(D=>{j(D),window.scrollTo(0,0)},[]),M=D=>{h(D),g({name:D.name,email:D.email||"",phone:D.phone||"",address:D.address||""}),d(!0)},I=async D=>{if(window.confirm("Are you sure you want to delete this customer?"))try{if((await fetch(`/api/customers/${D}`,{method:"DELETE",credentials:"include"})).ok)s?await _():(n(t.filter(F=>F.id!==D)),i(r.filter(F=>F.id!==D)));else throw new Error("Failed to delete customer")}catch(H){console.error("Error deleting customer:",H),A("Failed to delete customer")}},$=async D=>{D.preventDefault(),A(null);try{const H=f?`/api/customers/${f.id}`:"/api/customers",F=f?"PUT":"POST",B={name:p.name.trim(),email:p.email.trim()||null,phone:p.phone.trim()||null,address:p.address.trim()||null,updatedAt:new Date().toISOString()};console.log("Sending request with data:",B);const Z=await fetch(H,{method:F,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(B)});if(!Z.ok){const G=await Z.json();throw console.error("Server response:",G),new Error(G.message||`Failed to ${f?"update":"create"} customer. ${Z.status}: ${Z.statusText}`)}const V=await Z.json();f?s?await _():(n(t.map(G=>G.id===V.id?V:G)),i(r.map(G=>G.id===V.id?V:G))):s?await _():(n([...t,V]),i([...r,V])),d(!1),h(null),g({name:"",email:"",phone:"",address:""})}catch(H){console.error("Error saving customer:",H),A(H instanceof Error?H.message:"Failed to save customer")}},E=D=>new Promise((H,F)=>{const B=new FileReader;B.onload=Z=>{var V;try{const X=((V=Z.target)==null?void 0:V.result).split(`
`).filter(re=>re.trim());if(X.length<2){F(new Error("CSV file must have at least a header row and one data row"));return}const U=X[0].split(",").map(re=>re.trim().replace(/"/g,"")),ne=["name","email","phone","address"],q=ne.filter(re=>!U.some(ee=>ee.toLowerCase()===re.toLowerCase()));if(q.length>0){F(new Error(`Missing required columns: ${q.join(", ")}`));return}const ie=[];for(let re=1;re<X.length;re++){const ee=X[re].split(",").map(fe=>fe.trim().replace(/"/g,""));if(ee.length<U.length)continue;const he={};if(U.forEach((fe,je)=>{const Se=fe.toLowerCase(),Ce=ee[je]||null;if(ne.includes(Se))switch(Se){case"name":he.name=Ce||"";break;case"email":he.email=Ce;break;case"phone":he.phone=Ce;break;case"address":he.address=Ce;break}}),!he.name||he.name.trim()===""){F(new Error(`Row ${re+1}: Customer name is required`));return}ie.push(he)}H(ie)}catch(G){F(new Error(`Error parsing CSV file: ${G instanceof Error?G.message:"Unknown error"}`))}},B.onerror=()=>F(new Error("Error reading file")),B.readAsText(D)}),T=()=>{const D=["name","email","phone","address"],H=[["John Doe","john@example.com","+1234567890","123 Main St, City, Country"],["Jane Smith","jane@example.com","+0987654321","456 Oak Ave, City, Country"]],F=[D.join(","),...H.map(G=>G.map(X=>`"${X}"`).join(","))].join(`
`),B=new Blob([F],{type:"text/csv"}),Z=window.URL.createObjectURL(B),V=document.createElement("a");V.href=Z,V.download="customers_template.csv",V.click(),window.URL.revokeObjectURL(Z)};return l?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Customers"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:async D=>{var F;const H=(F=D.target.files)==null?void 0:F[0];if(H){c(!0);try{const B=await E(H),Z=await fetch("/api/customers/import",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({customers:B})});if(!Z.ok){const G=Z.headers.get("content-type");let X="Failed to import customers";if(G&&G.includes("application/json"))try{X=(await Z.json()).message||X}catch{}else if(Z.status===404){console.log("Bulk import not available, importing customers individually...");let U=0,ne=0;for(const q of B)try{(await fetch("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:q.name,email:q.email,phone:q.phone,address:q.address,updatedAt:new Date().toISOString()})})).ok?U++:(ne++,console.error(`Failed to import customer: ${q.name}`))}catch(ie){ne++,console.error(`Error importing customer ${q.name}:`,ie)}await _(),ne>0?alert(`Import completed with some errors:
${U} customers imported successfully
${ne} customers failed to import`):alert(`Successfully imported ${U} customers!`);return}else if(Z.status===401){X="Unauthorized. Please log in again.",e("/login");return}else X=`Server error: ${Z.status} ${Z.statusText}`;throw new Error(X)}let V;try{V=await Z.json()}catch{V={count:B.length}}await _(),alert(`Successfully imported ${V.count||B.length} customers!`)}catch(B){console.error("Import error:",B),alert(B instanceof Error?B.message:"Failed to import customers")}finally{c(!1),D.target&&(D.target.value="")}}},ref:C}),o.jsxs("button",{onClick:T,className:"bg-green-500 text-white px-4 py-2 rounded-lg flex items-center hover:bg-green-600",children:[o.jsx(kd,{className:"w-4 h-4 mr-2"}),"Download Template"]}),o.jsxs("button",{onClick:()=>{var D;return(D=C.current)==null?void 0:D.click()},className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center hover:bg-blue-600",children:[o.jsx(om,{className:"w-4 h-4 mr-2"}),"Import CSV"]}),o.jsxs("button",{onClick:()=>{h(null),g({name:"",email:"",phone:"",address:""}),d(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[o.jsx(Hn,{className:"w-4 h-4 mr-2"}),"Add Customer"]})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(ci,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",placeholder:"Search customers...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:m,onChange:D=>y(D.target.value)})]}),P&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded relative",children:P}),!1,l?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):R.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Mv,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-500",children:m?"No customers found matching your search.":"No customers found. Add your first customer!"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:R.map(D=>o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Mv,{className:"w-8 h-8 text-blue-500 mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:D.name}),o.jsx("p",{className:"text-sm text-gray-500",children:D.email||"No email"})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>M(D),className:"text-blue-500 hover:text-blue-700",children:o.jsx(jo,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>I(D.id),className:"text-red-500 hover:text-red-700",children:o.jsx(Rn,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Phone:"}),o.jsx("span",{className:"font-medium",children:D.phone||"No phone"})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Address:"}),o.jsx("span",{className:"font-medium",children:D.address||"No address"})]})]})]},D.id))}),S>1&&o.jsxs("div",{className:"flex justify-center space-x-2 mt-6",children:[o.jsx("button",{onClick:()=>z(w-1),disabled:w===1,className:`px-4 py-2 rounded-md ${w===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Previous"}),o.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:S},(D,H)=>H+1).filter(D=>{const H=D===1,F=D===S,B=Math.abs(D-w)<=1;return H||F||B}).map((D,H,F)=>o.jsxs(W.Fragment,{children:[H>0&&F[H-1]!==D-1&&o.jsx("span",{className:"px-2",children:"..."}),o.jsx("button",{onClick:()=>z(D),className:`w-10 h-10 rounded-md ${w===D?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:D})]},D))}),o.jsx("button",{onClick:()=>z(w+1),disabled:w===S,className:`px-4 py-2 rounded-md ${w===S?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Next"})]})]}),u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px]",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:f?"Edit Customer":"Add Customer"}),o.jsx("button",{onClick:()=>{d(!1),h(null),A(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx(Lt,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:$,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),o.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:p.name,onChange:D=>g({...p,name:D.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),o.jsx("input",{type:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:p.email,onChange:D=>g({...p,email:D.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),o.jsx("input",{type:"tel",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:p.phone,onChange:D=>g({...p,phone:D.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),o.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:p.address,onChange:D=>g({...p,address:D.target.value}),rows:3})]}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{d(!1),h(null),A(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:f?"Update":"Save"})]})]})]})})]})},Oge=()=>{const e=St(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[s,a]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState({name:"",email:"",country:"",city:""}),[f,h]=b.useState(""),p=b.useCallback(async()=>{try{const x=await pe("/api/suppliers");if(x.ok){const w=await x.json();n(Array.isArray(w)?w:[])}else x.status===401?e("/login"):(console.error("Failed to fetch suppliers"),n([]))}catch(x){console.error("Error fetching suppliers:",x),n([])}finally{i(!1)}},[e]);b.useEffect(()=>{p()},[p]);const g=x=>{c(x),d({name:x.name,email:x.email,country:x.country,city:x.city}),a(!0)},m=async x=>{if(window.confirm("Are you sure you want to delete this supplier?"))try{const w=await pe(`/api/suppliers/${x}`,{method:"DELETE"});if(w.ok)n(t.filter(j=>j.id!==x));else{const j=await w.json().catch(()=>({}));alert(j.message||"Failed to delete supplier")}}catch(w){console.error("Error deleting supplier:",w),alert("Failed to delete supplier")}},y=async x=>{x.preventDefault();try{const w=l?`/api/suppliers/${l.id}`:"/api/suppliers",S=await pe(w,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!S.ok){const N=await S.json().catch(()=>({}));throw new Error(N.message||"Failed to save supplier")}const k=await S.json();n(l?t.map(N=>N.id===k.id?k:N):[...t,k]),a(!1),c(null),d({name:"",email:"",country:"",city:""})}catch(w){console.error("Error saving supplier:",w),alert(w instanceof Error?w.message:"Failed to save supplier")}},v=t.filter(x=>x.name.toLowerCase().includes(f.toLowerCase())||x.email.toLowerCase().includes(f.toLowerCase())||x.country.toLowerCase().includes(f.toLowerCase())||x.city.toLowerCase().includes(f.toLowerCase()));return r?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Suppliers"}),o.jsxs("button",{onClick:()=>{c(null),d({name:"",email:"",country:"",city:""}),a(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[o.jsx(Hn,{className:"w-4 h-4 mr-2"}),"Add Supplier"]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(ci,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",placeholder:"Search suppliers...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:f,onChange:x=>h(x.target.value)})]}),o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Country"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(x=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.id}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.email}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.country}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.city}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[o.jsx("button",{onClick:()=>g(x),className:"text-blue-500 hover:text-blue-700",children:o.jsx(jo,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>m(x.id),className:"text-red-500 hover:text-red-700",children:o.jsx(Rn,{className:"w-4 h-4"})})]})]},x.id))})]})}),s&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px]",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:l?"Edit Supplier":"Add Supplier"}),o.jsx("button",{onClick:()=>{a(!1),c(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx(Lt,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),o.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.name,onChange:x=>d({...u,name:x.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),o.jsx("input",{type:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.email,onChange:x=>d({...u,email:x.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),o.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.country,onChange:x=>d({...u,country:x.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),o.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.city,onChange:x=>d({...u,city:x.target.value}),required:!0})]}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{a(!1),c(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:l?"Update":"Save"})]})]})]})})]})},Ige=()=>{const[e,t]=b.useState([]),[n,r]=b.useState(!1),[i,s]=b.useState({name:"",email:"",password:"",role:"USER"}),[a,l]=b.useState(!1),[c,u]=b.useState(!1),[d,f]=b.useState(null),[h,p]=b.useState(!1),g=b.useCallback(async()=>{var w;try{const j=await pe("/api/users");if(j.ok){const S=await j.json();(w=S==null?void 0:S.data)!=null&&w.users?t(S.data.users):Array.isArray(S)?t(S):t([])}else console.error("Failed to fetch users"),t([])}catch(j){console.error("Error fetching users:",j),t([])}},[]);b.useEffect(()=>{g()},[g]);const m=async w=>{w.preventDefault();try{if(c&&d){const j=i.password?i:{name:i.name,email:i.email,role:i.role},S=await pe(`/api/users/${d}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!S.ok){const k=await S.json().catch(()=>({}));throw new Error(k.message||"Failed to update user")}}else{const j=await pe("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!j.ok){const S=await j.json().catch(()=>({}));throw new Error(S.message||"Failed to create user")}}r(!1),x(),await g()}catch(j){console.error("Error saving user:",j);const S=j instanceof Error?j.message:"An unexpected error occurred";alert(S)}},y=w=>{s({name:w.name,email:w.email,password:"",role:w.role}),f(w.id),u(!0),r(!0)},v=async w=>{if(window.confirm("Are you sure you want to delete this user?"))try{const j=await pe(`/api/users/${w}`,{method:"DELETE"});if(!j.ok){const S=await j.json().catch(()=>({}));throw new Error(S.message||"Failed to delete user")}await g()}catch(j){console.error("Error deleting user:",j);const S=j instanceof Error?j.message:"An unexpected error occurred";alert(S)}},x=()=>{s({name:"",email:"",password:"",role:"USER"}),u(!1),f(null),l(!1),p(!1)};return o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Users Management"}),o.jsxs("button",{onClick:()=>{x(),r(!0)},className:"flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:[o.jsx(wB,{size:20}),"Add User"]})]}),o.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(w=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.email}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.role}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w.isEmailVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:w.isEmailVerified?"Verified":"Pending"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>y(w),className:"text-blue-600 hover:text-blue-900",children:o.jsx(vB,{size:18})}),o.jsx("button",{onClick:()=>v(w.id),className:"text-red-600 hover:text-red-900",children:o.jsx(Rn,{size:18})})]})})]},w.id))})]})}),n&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:c?"Edit User":"Add New User"}),o.jsxs("form",{onSubmit:m,children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),o.jsx("input",{type:"text",value:i.name,onChange:w=>s({...i,name:w.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),o.jsx("input",{type:"email",value:i.email,onChange:w=>s({...i,email:w.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:c?"New Password (leave blank to keep current)":"Password"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("input",{type:c?h?"text":"password":a?"text":"password",value:i.password,onChange:w=>s({...i,password:w.target.value}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-10",required:!c,placeholder:c?"Enter new password or leave blank":"Enter password"}),o.jsx("button",{type:"button",onClick:()=>c?p(!h):l(!a),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(c?h:a)?o.jsx(Pd,{className:"h-5 w-5 text-gray-400"}):o.jsx(ia,{className:"h-5 w-5 text-gray-400"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),o.jsxs("select",{value:i.role,onChange:w=>s({...i,role:w.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[o.jsx("option",{value:"USER",children:"User"}),o.jsx("option",{value:"ADMIN",children:"Admin"})]})]})]}),o.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-500 hover:bg-blue-600",children:c?"Update":"Create"})]})]})]})})]})};function Dge(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function ZA(e){const t=document.documentElement;e==="dark"?t.classList.add("dark"):t.classList.remove("dark")}const l5=({className:e})=>{const[t,n]=b.useState(()=>{const i=localStorage.getItem("theme");return i==="dark"||i==="light"?i:Dge()?"dark":"light"});b.useEffect(()=>{ZA(t),localStorage.setItem("theme",t)},[t]),b.useEffect(()=>{const i=localStorage.getItem("theme");if(i==="dark"||i==="light")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),a=l=>{const c=l.matches?"dark":"light";n(c),ZA(c)};return s.addEventListener("change",a),()=>s.removeEventListener("change",a)},[]);const r=()=>n(i=>i==="dark"?"light":"dark");return o.jsxs("button",{type:"button",onClick:r,"aria-label":"Toggle dark mode",className:"inline-flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium border transition-colors bg-white text-gray-700 border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700 "+(e||""),children:[t==="dark"?o.jsx(yB,{className:"w-4 h-4"}):o.jsx(AB,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:t==="dark"?"Dark":"Light"})]})},Rge=()=>{const e=St(),[t,n]=b.useState({id:1,companyName:"",address:"",phone1:"",phone2:"",location:"",mobileMoneyNumber:""}),[r,i]=b.useState(!0),[s,a]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState(null),[f,h]=b.useState("checking"),[p,g]=b.useState(!1),[m,y]=b.useState([]),[v,x]=b.useState(!1),[w,j]=b.useState(null),[S,k]=b.useState(!1),[N,P]=b.useState(()=>localStorage.getItem("qz.printMode")==="browser"?"browser":"silent");b.useEffect(()=>{localStorage.setItem("qz.printMode",N)},[N]);const A=b.useCallback(async()=>{h("checking"),await C(!0),f!=="connected"&&(setTimeout(()=>C(!0),1500),setTimeout(()=>C(!0),3500))},[]);b.useEffect(()=>{R(),A()},[A]);const C=async M=>{try{g(!0),M||h("checking");const I=window.location.protocol==="https:",$=window.location.hostname==="tauri.localhost",E=I||$?3e4:12e3,T=new Promise((F,B)=>setTimeout(()=>B(new Error(`Timeout after ${E/1e3}s - QZ Tray may not be running or trusted`)),E)),D=Tn.isAvailable(),H=await Promise.race([D,T]);h(H?"connected":"disconnected"),H?_():I&&console.warn("QZ Tray: HTTPS connection failed - check system tray for trust prompts")}catch(I){console.error("Failed to check QZ Tray status:",I),(I instanceof Error?I.message:String(I)).includes("Timeout")&&console.warn("QZ Tray: Connection timeout - ensure QZ Tray application is running in system tray"),h("disconnected")}finally{g(!1)}},_=async()=>{try{if(x(!0),!await Tn.isAvailable()){y([]);return}const I=await Tn.getPrinters();y(I)}catch(M){console.warn("Failed to load printers",M),y([])}finally{x(!1)}},R=async()=>{try{c(null);const M=await pe("/api/settings/company");if(M.ok){const I=await M.json();n(I)}else throw new Error("Failed to fetch settings")}catch(M){c("Error loading settings: "+(M instanceof Error?M.message:"Unknown error"))}finally{i(!1)}},z=async M=>{M.preventDefault(),a(!0),c(null),d(null);try{if((await pe("/api/settings/company",{method:"PUT",body:JSON.stringify(t)})).ok)d("Settings saved successfully");else throw new Error("Failed to save settings")}catch(I){c("Error saving settings: "+(I instanceof Error?I.message:"Unknown error"))}finally{a(!1)}};return r?o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(An,{className:"w-8 h-8 animate-spin"})}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100",children:"Settings"}),o.jsx(l5,{})]}),l&&o.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-600 rounded-md",children:l}),u&&o.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-600 rounded-md",children:u}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(sa,{className:"w-8 h-8 text-blue-500"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Invoice Settings"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Configure company information for invoices"})]})]}),o.jsx(Pl,{className:"w-5 h-5 text-gray-400"})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:"Set up company name, address, phone numbers, and other details that appear on invoices."})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>e("/printer-setup"),children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Yn,{className:"w-8 h-8 text-green-500"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Printer Setup"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Configure wholesale and retail printers"})]})]}),o.jsx(Pl,{className:"w-5 h-5 text-gray-400"})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:"Set up different printers for wholesale A5 invoices and retail receipts."}),o.jsxs("button",{className:"w-full px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors flex items-center justify-center gap-2",children:[o.jsx(K1,{className:"w-4 h-4"}),"Configure Printers"]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>e("/qz-tray-setup"),children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(mk,{className:"w-8 h-8 text-purple-500"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"QZ Tray Silent Printing"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Configure silent printing without dialogs"})]})]}),o.jsx(Pl,{className:"w-5 h-5 text-gray-400"})]}),o.jsxs("div",{className:"mb-4",children:[f==="checking"&&o.jsxs("div",{className:"flex items-center gap-2 text-yellow-600",children:[o.jsx(An,{className:"w-4 h-4 animate-spin"}),o.jsx("span",{className:"text-sm",children:"Attempting connection..."})]}),f==="connected"&&o.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[o.jsx(Af,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"QZ Tray Connected & Ready"})]}),f==="disconnected"&&o.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[o.jsx(RB,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"QZ Tray Not Connected"}),window.location.protocol==="https:"&&o.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"HTTPS Mode"})]})]}),f==="disconnected"&&o.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Cf,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"font-medium text-red-800",children:"QZ Tray Setup Required"}),o.jsxs("ol",{className:"text-sm text-red-700 space-y-1 list-decimal ml-4",children:[o.jsxs("li",{children:["Download and install QZ Tray from ",o.jsx("a",{href:"https://qz.io/download/",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"qz.io/download"})]}),o.jsx("li",{children:"Launch the QZ Tray application (check system tray)"}),o.jsx("li",{children:'Click "Refresh Status" below once QZ Tray is running'}),o.jsx("li",{children:"Accept any browser trust/security prompts"}),window.location.protocol==="https:"&&o.jsxs(o.Fragment,{children:[o.jsx("li",{className:"font-semibold text-red-800",children:"HTTPS Setup: Look for QZ Tray trust prompts in browser"}),o.jsx("li",{className:"font-semibold text-red-800",children:"Ensure QZ Tray shows green lock icon (trusted)"}),o.jsx("li",{className:"font-semibold text-red-800",children:"QZ Tray must use secure WebSocket (WSS) for HTTPS sites"}),o.jsx("li",{className:"text-red-700",children:"If timeouts occur, QZ Tray may not be running or may need browser trust"})]})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mt-2",children:o.jsxs("div",{className:"text-xs text-blue-800",children:[o.jsx("strong",{children:"Quick Check:"})," QZ Tray should appear in your system tray (bottom-right corner).",window.location.protocol==="https:"&&o.jsxs("span",{className:"block mt-1",children:[o.jsx("strong",{children:"HTTPS:"})," Look for security prompts in your browser when connecting."]})]})}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),window.open("https://qz.io/download/","_blank")},className:"text-xs px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Download QZ Tray"}),o.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),window.open("https://qz.io/wiki/getting-started","_blank")},className:"text-xs px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Setup Guide"}),window.location.protocol==="https:"&&o.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),window.open("https://qz.io/wiki/troubleshooting#https-ssl","_blank")},className:"text-xs px-3 py-1 bg-purple-100 text-purple-700 rounded hover:bg-purple-200",children:"HTTPS Guide"})]})]})]})}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:"Set up QZ Tray for seamless, silent printing without browser dialogs."}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{className:"w-full px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors flex items-center justify-center gap-2",children:[o.jsx(mk,{className:"w-4 h-4"}),"Configure QZ Tray"]}),o.jsx("button",{onClick:M=>{M.stopPropagation(),C(),_()},disabled:p,className:"w-full px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-200 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed",children:p?o.jsxs(o.Fragment,{children:[o.jsx(An,{className:"w-3 h-3 animate-spin"}),"Checking..."]}):o.jsxs(o.Fragment,{children:[o.jsx(oa,{className:"w-3 h-3"}),"Refresh Status"]})}),o.jsxs("button",{onClick:async M=>{M.stopPropagation(),k(!0);try{const I=window.location.protocol==="https:";console.log("QZ Diagnostics: Running diagnostics...",{isHttps:I,location:window.location.href});const E={...await Tn.diagnose(),environment:{isHttps:I,protocol:window.location.protocol,host:window.location.host,userAgent:navigator.userAgent,timestamp:new Date().toISOString()},httpsNotes:I?["HTTPS detected - QZ Tray must use secure WebSocket (WSS)","Browser may block self-signed certificates","Check QZ Tray system tray for trust prompts","Ensure QZ Tray shows green lock icon (trusted)"]:["HTTP detected - Standard WebSocket (WS) should work"]};j(E),console.log("QZ Diagnostics",E)}catch(I){const $={error:I instanceof Error?I.message:String(I),environment:{isHttps:window.location.protocol==="https:",protocol:window.location.protocol,host:window.location.host,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}};j($),console.error("QZ Diagnostics Error:",$)}finally{k(!1)}},className:"w-full px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-md hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors flex items-center justify-center gap-2",disabled:S,children:[S?o.jsx(An,{className:"w-3 h-3 animate-spin"}):o.jsx(pI,{className:"w-3 h-3"}),S?"Running Diagnostics...":"Run Diagnostics"]}),f==="connected"&&o.jsxs("div",{className:"mt-2 border rounded-md p-2 max-h-40 overflow-auto bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300 flex items-center gap-1",children:[o.jsx(Yn,{className:"w-3 h-3"}),"Printers"]}),o.jsxs("button",{type:"button",onClick:M=>{M.stopPropagation(),_()},className:"text-[10px] px-1 py-0.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-1",children:[o.jsx(oa,{className:"w-2.5 h-2.5"}),"Reload"]})]}),v&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-300",children:[o.jsx(An,{className:"w-3 h-3 animate-spin"}),"Loading..."]}),!v&&m.length===0&&o.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 space-y-2",children:[o.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-200",children:"No printers detected"}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-2 space-y-1",children:[o.jsx("div",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Troubleshooting Steps:"}),o.jsxs("ul",{className:"list-disc ml-4 space-y-0.5 text-yellow-700 dark:text-yellow-300",children:[o.jsx("li",{children:"Ensure QZ Tray application is running (system tray)"}),o.jsx("li",{children:"Look for green lock icon in QZ Tray (means trusted)"}),o.jsx("li",{children:"Accept any browser security prompts"}),o.jsx("li",{children:"Verify printers work in Windows Control Panel"}),o.jsx("li",{children:"Try printing a Windows test page first"}),o.jsx("li",{children:"Restart QZ Tray application if needed"})]})]}),o.jsxs("div",{className:"flex gap-1 mt-2",children:[o.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),window.open("https://qz.io/download/","_blank")},className:"text-[10px] px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Download QZ Tray"}),o.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),console.clear(),_()},className:"text-[10px] px-2 py-1 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Debug Reload"})]})]}),o.jsx("ul",{className:"space-y-1",children:m.map(M=>{const I=M.startsWith("\\\\")||M.startsWith("\\\\");return o.jsxs("li",{className:"text-[11px] text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[o.jsx(hB,{className:"w-3 h-3 text-gray-400"}),o.jsx("span",{className:"truncate",title:M,children:M}),o.jsx("span",{className:`ml-auto px-1.5 py-0.5 rounded text-[9px] ${I?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"}`,children:I?"Network":"Local"})]},M)})})]}),w&&o.jsx("div",{className:"mt-2 border rounded-md p-2 bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 max-h-48 overflow-auto",children:o.jsxs("div",{className:"text-[10px] font-mono whitespace-pre-wrap break-all",children:[w.environment&&o.jsxs("div",{className:"mb-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[o.jsx("div",{className:"font-bold text-blue-800 dark:text-blue-300 mb-1",children:"Environment:"}),o.jsxs("div",{children:["Protocol: ",w.environment.protocol]}),o.jsxs("div",{children:["Host: ",w.environment.host]}),o.jsxs("div",{children:["HTTPS: ",w.environment.isHttps?"Yes":"No"]})]}),w.httpsNotes&&o.jsxs("div",{className:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800",children:[o.jsx("div",{className:"font-bold text-yellow-800 dark:text-yellow-300 mb-1",children:"HTTPS Notes:"}),w.httpsNotes.map((M,I)=>o.jsxs("div",{className:"text-yellow-700 dark:text-yellow-300",children:[" ",M]},I))]}),o.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:JSON.stringify(w,null,2)})]})}),o.jsxs("div",{className:"mt-4 border rounded-md p-3 bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700",onClick:M=>M.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(kB,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"}),o.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-200",children:"Printing Mode"}),o.jsx("span",{className:`ml-auto text-[10px] px-1.5 py-0.5 rounded ${N==="silent"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"}`,children:N==="silent"?"Silent (QZ Tray)":"Browser Dialog"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"printMode",value:"silent",checked:N==="silent",onChange:()=>P("silent"),className:"mt-0.5"}),o.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300",children:[o.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Silent (QZ Tray)"}),o.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"Use saved printers for automatic, dialog-free printing when available."})]})]}),o.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"printMode",value:"browser",checked:N==="browser",onChange:()=>P("browser"),className:"mt-0.5"}),o.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300",children:[o.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Browser Dialog"}),o.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"Always show the browser print dialog (ignores silent printer settings)."})]})]})]}),(localStorage.getItem("qz.invoicePrinter")||localStorage.getItem("qz.receiptPrinter"))&&o.jsxs("div",{className:"mt-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded p-2",children:[o.jsxs("div",{className:"text-[10px] font-semibold text-gray-600 dark:text-gray-300 mb-1 flex items-center gap-1",children:[o.jsx(Yn,{className:"w-3 h-3"}),"Saved Printers"]}),o.jsxs("ul",{className:"space-y-1 text-[10px] text-gray-700 dark:text-gray-300",children:[localStorage.getItem("qz.invoicePrinter")&&o.jsxs("li",{children:["Invoice: ",localStorage.getItem("qz.invoicePrinter")]}),localStorage.getItem("qz.receiptPrinter")&&o.jsxs("li",{children:["Receipt: ",localStorage.getItem("qz.receiptPrinter")]})]})]})]})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[o.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[o.jsx(sa,{className:"w-5 h-5"}),o.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:"Invoice Settings"})]}),o.jsxs("form",{onSubmit:z,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name"}),o.jsx("input",{type:"text",value:t.companyName,onChange:M=>n({...t,companyName:M.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),o.jsx("input",{type:"text",value:t.address,onChange:M=>n({...t,address:M.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone 1"}),o.jsx("input",{type:"text",value:t.phone1,onChange:M=>n({...t,phone1:M.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone 2"}),o.jsx("input",{type:"text",value:t.phone2,onChange:M=>n({...t,phone2:M.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),o.jsx("input",{type:"text",value:t.location,onChange:M=>n({...t,location:M.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Money Number"}),o.jsx("input",{type:"text",value:t.mobileMoneyNumber,onChange:M=>n({...t,mobileMoneyNumber:M.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:s?o.jsxs(o.Fragment,{children:[o.jsx(An,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(No,{className:"w-4 h-4"}),"Save Settings"]})})})]})]})]})},Mge=()=>{const e=St(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[s,a]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState({name:""}),[f,h]=b.useState(""),p=b.useCallback(async()=>{try{const x=await pe("/api/units");if(x.ok){const w=await x.json();n(Array.isArray(w)?w:[])}else x.status===401?e("/login"):(console.error("Failed to fetch units"),n([]))}catch(x){console.error("Error fetching units:",x),n([])}finally{i(!1)}},[e]);b.useEffect(()=>{p()},[p]);const g=x=>{c(x),d({name:x.name}),a(!0)},m=async x=>{if(window.confirm("Are you sure you want to delete this unit?"))try{const w=await pe(`/api/units/${x}`,{method:"DELETE"});if(w.ok)n(t.filter(j=>j.id!==x));else{const j=await w.json().catch(()=>({}));alert(j.message||"Failed to delete unit")}}catch(w){console.error("Error deleting unit:",w),alert("Failed to delete unit")}},y=async x=>{x.preventDefault();try{const w=l?`/api/units/${l.id}`:"/api/units",S=await pe(w,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name})});if(console.log("Request payload:",{name:u.name}),!S.ok){const N=await S.json().catch(()=>({}));throw console.error("Error response:",N),new Error(N.message||"Failed to save unit")}const k=await S.json();console.log("Saved unit:",k),n(l?t.map(N=>N.id===k.id?k:N):[...t,k]),a(!1),c(null),d({name:""})}catch(w){console.error("Error saving unit:",w),alert(w instanceof Error?w.message:"Failed to save unit")}},v=t.filter(x=>x.name.toLowerCase().includes(f.toLowerCase()));return r?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Units"}),o.jsxs("button",{onClick:()=>{c(null),d({name:""}),a(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[o.jsx(Hn,{className:"w-4 h-4 mr-2"}),"Add Unit"]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(ci,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",placeholder:"Search units...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:f,onChange:x=>h(x.target.value)})]}),o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(x=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.id}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.name}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[o.jsx("button",{onClick:()=>g(x),className:"text-blue-500 hover:text-blue-700",children:o.jsx(jo,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>m(x.id),className:"text-red-500 hover:text-red-700",children:o.jsx(Rn,{className:"w-4 h-4"})})]})]},x.id))})]})}),s&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px]",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:l?"Edit Unit":"Add Unit"}),o.jsx("button",{onClick:()=>{a(!1),c(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx(Lt,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),o.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.name,onChange:x=>d({...u,name:x.target.value}),required:!0})]}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{a(!1),c(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:l?"Update":"Save"})]})]})]})})]})},Jo=b.forwardRef(({className:e,type:t,...n},r)=>o.jsx("input",{type:t,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,ref:r,...n}));Jo.displayName="Input";function JA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function c5(...e){return t=>{let n=!1;const r=e.map(i=>{const s=JA(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():JA(e[i],null)}}}}function Sn(...e){return b.useCallback(c5(...e),e)}var gc=b.forwardRef((e,t)=>{const{children:n,...r}=e,i=b.Children.toArray(n),s=i.find(Lge);if(s){const a=s.props.children,l=i.map(c=>c===s?b.Children.count(a)>1?b.Children.only(null):b.isValidElement(a)?a.props.children:null:c);return o.jsx(Pw,{...r,ref:t,children:b.isValidElement(a)?b.cloneElement(a,void 0,l):null})}return o.jsx(Pw,{...r,ref:t,children:n})});gc.displayName="Slot";var Pw=b.forwardRef((e,t)=>{const{children:n,...r}=e;if(b.isValidElement(n)){const i=Bge(n),s=Fge(r,n.props);return n.type!==b.Fragment&&(s.ref=t?c5(t,i):i),b.cloneElement(n,s)}return b.Children.count(n)>1?b.Children.only(null):null});Pw.displayName="SlotClone";var $ge=({children:e})=>o.jsx(o.Fragment,{children:e});function Lge(e){return b.isValidElement(e)&&e.type===$ge}function Fge(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...l)=>{s(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function Bge(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const eE=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,tE=Ye,Uge=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return tE(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=t,a=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],f=s==null?void 0:s[u];if(d===null)return null;const h=eE(d)||eE(f);return i[u][h]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...p}=d;return Object.entries(p).every(g=>{let[m,y]=g;return Array.isArray(y)?y.includes({...s,...l}[m]):{...s,...l}[m]===y})?[...u,f,h]:u},[]);return tE(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},zge=Uge("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Cw=b.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},s)=>{const a=r?gc:"button";return o.jsx(a,{className:zge({variant:t,size:n,className:e}),ref:s,...i})});Cw.displayName="Button";function nE(e,[t,n]){return Math.min(n,Math.max(t,e))}function Yt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function vj(e,t=[]){let n=[];function r(s,a){const l=b.createContext(a),c=n.length;n=[...n,a];const u=f=>{var v;const{scope:h,children:p,...g}=f,m=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,y=b.useMemo(()=>g,Object.values(g));return o.jsx(m.Provider,{value:y,children:p})};u.displayName=s+"Provider";function d(f,h){var m;const p=((m=h==null?void 0:h[e])==null?void 0:m[c])||l,g=b.useContext(p);if(g)return g;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[u,d]}const i=()=>{const s=n.map(a=>b.createContext(a));return function(l){const c=(l==null?void 0:l[e])||s;return b.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[r,Hge(i,...t)]}function Hge(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(s)[`__scope${u}`];return{...l,...f}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Wge(e){const t=e+"CollectionProvider",[n,r]=vj(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:g,children:m}=p,y=W.useRef(null),v=W.useRef(new Map).current;return o.jsx(i,{scope:g,itemMap:v,collectionRef:y,children:m})};a.displayName=t;const l=e+"CollectionSlot",c=W.forwardRef((p,g)=>{const{scope:m,children:y}=p,v=s(l,m),x=Sn(g,v.collectionRef);return o.jsx(gc,{ref:x,children:y})});c.displayName=l;const u=e+"CollectionItemSlot",d="data-radix-collection-item",f=W.forwardRef((p,g)=>{const{scope:m,children:y,...v}=p,x=W.useRef(null),w=Sn(g,x),j=s(u,m);return W.useEffect(()=>(j.itemMap.set(x,{ref:x,...v}),()=>void j.itemMap.delete(x))),o.jsx(gc,{[d]:"",ref:w,children:y})});f.displayName=u;function h(p){const g=s(e+"CollectionConsumer",p);return W.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const v=Array.from(y.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((j,S)=>v.indexOf(j.ref.current)-v.indexOf(S.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:c,ItemSlot:f},h,r]}var qge=b.createContext(void 0);function Vge(e){const t=b.useContext(qge);return e||t||"ltr"}var Kge=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Kt=Kge.reduce((e,t)=>{const n=b.forwardRef((r,i)=>{const{asChild:s,...a}=r,l=s?gc:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...a,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Qge(e,t){e&&So.flushSync(()=>e.dispatchEvent(t))}function ps(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),b.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Gge(e,t=globalThis==null?void 0:globalThis.document){const n=ps(e);b.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Yge="DismissableLayer",Aw="dismissableLayer.update",Xge="dismissableLayer.pointerDownOutside",Zge="dismissableLayer.focusOutside",rE,u5=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),d5=b.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:l,...c}=e,u=b.useContext(u5),[d,f]=b.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),g=Sn(t,N=>f(N)),m=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(y),x=d?m.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,j=x>=v,S=tye(N=>{const P=N.target,A=[...u.branches].some(C=>C.contains(P));!j||A||(i==null||i(N),a==null||a(N),N.defaultPrevented||l==null||l())},h),k=nye(N=>{const P=N.target;[...u.branches].some(C=>C.contains(P))||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},h);return Gge(N=>{x===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},h),b.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(rE=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),iE(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=rE)}},[d,h,n,u]),b.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),iE())},[d,u]),b.useEffect(()=>{const N=()=>p({});return document.addEventListener(Aw,N),()=>document.removeEventListener(Aw,N)},[]),o.jsx(Kt.div,{...c,ref:g,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:Yt(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Yt(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Yt(e.onPointerDownCapture,S.onPointerDownCapture)})});d5.displayName=Yge;var Jge="DismissableLayerBranch",eye=b.forwardRef((e,t)=>{const n=b.useContext(u5),r=b.useRef(null),i=Sn(t,r);return b.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),o.jsx(Kt.div,{...e,ref:i})});eye.displayName=Jge;function tye(e,t=globalThis==null?void 0:globalThis.document){const n=ps(e),r=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let c=function(){f5(Xge,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function nye(e,t=globalThis==null?void 0:globalThis.document){const n=ps(e),r=b.useRef(!1);return b.useEffect(()=>{const i=s=>{s.target&&!r.current&&f5(Zge,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function iE(){const e=new CustomEvent(Aw);document.dispatchEvent(e)}function f5(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Qge(i,s):i.dispatchEvent(s)}var y0=0;function rye(){b.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??sE()),document.body.insertAdjacentElement("beforeend",e[1]??sE()),y0++,()=>{y0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),y0--}},[])}function sE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var x0="focusScope.autoFocusOnMount",v0="focusScope.autoFocusOnUnmount",aE={bubbles:!1,cancelable:!0},iye="FocusScope",h5=b.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[l,c]=b.useState(null),u=ps(i),d=ps(s),f=b.useRef(null),h=Sn(t,m=>c(m)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let m=function(w){if(p.paused||!l)return;const j=w.target;l.contains(j)?f.current=j:Cs(f.current,{select:!0})},y=function(w){if(p.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||Cs(f.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&Cs(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",y);const x=new MutationObserver(v);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",y),x.disconnect()}}},[r,l,p.paused]),b.useEffect(()=>{if(l){lE.add(p);const m=document.activeElement;if(!l.contains(m)){const v=new CustomEvent(x0,aE);l.addEventListener(x0,u),l.dispatchEvent(v),v.defaultPrevented||(sye(uye(p5(l)),{select:!0}),document.activeElement===m&&Cs(l))}return()=>{l.removeEventListener(x0,u),setTimeout(()=>{const v=new CustomEvent(v0,aE);l.addEventListener(v0,d),l.dispatchEvent(v),v.defaultPrevented||Cs(m??document.body,{select:!0}),l.removeEventListener(v0,d),lE.remove(p)},0)}}},[l,u,d,p]);const g=b.useCallback(m=>{if(!n&&!r||p.paused)return;const y=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(y&&v){const x=m.currentTarget,[w,j]=aye(x);w&&j?!m.shiftKey&&v===j?(m.preventDefault(),n&&Cs(w,{select:!0})):m.shiftKey&&v===w&&(m.preventDefault(),n&&Cs(j,{select:!0})):v===x&&m.preventDefault()}},[n,r,p.paused]);return o.jsx(Kt.div,{tabIndex:-1,...a,ref:h,onKeyDown:g})});h5.displayName=iye;function sye(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Cs(r,{select:t}),document.activeElement!==n)return}function aye(e){const t=p5(e),n=oE(t,e),r=oE(t.reverse(),e);return[n,r]}function p5(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function oE(e,t){for(const n of e)if(!oye(n,{upTo:t}))return n}function oye(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function lye(e){return e instanceof HTMLInputElement&&"select"in e}function Cs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&lye(e)&&t&&e.select()}}var lE=cye();function cye(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=cE(e,t),e.unshift(t)},remove(t){var n;e=cE(e,t),(n=e[0])==null||n.resume()}}}function cE(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function uye(e){return e.filter(t=>t.tagName!=="A")}var br=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},dye=Op.useId||(()=>{}),fye=0;function bj(e){const[t,n]=b.useState(dye());return br(()=>{n(r=>r??String(fye++))},[e]),t?`radix-${t}`:""}const hye=["top","right","bottom","left"],la=Math.min,dr=Math.max,hg=Math.round,Rh=Math.floor,Ai=e=>({x:e,y:e}),pye={left:"right",right:"left",bottom:"top",top:"bottom"},mye={start:"end",end:"start"};function Ew(e,t,n){return dr(e,la(t,n))}function ms(e,t){return typeof e=="function"?e(t):e}function gs(e){return e.split("-")[0]}function Hc(e){return e.split("-")[1]}function wj(e){return e==="x"?"y":"x"}function Sj(e){return e==="y"?"height":"width"}function ca(e){return["top","bottom"].includes(gs(e))?"y":"x"}function jj(e){return wj(ca(e))}function gye(e,t,n){n===void 0&&(n=!1);const r=Hc(e),i=jj(e),s=Sj(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=pg(a)),[a,pg(a)]}function yye(e){const t=pg(e);return[_w(e),t,_w(t)]}function _w(e){return e.replace(/start|end/g,t=>mye[t])}function xye(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:a;default:return[]}}function vye(e,t,n,r){const i=Hc(e);let s=xye(gs(e),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(_w)))),s}function pg(e){return e.replace(/left|right|bottom|top/g,t=>pye[t])}function bye(e){return{top:0,right:0,bottom:0,left:0,...e}}function m5(e){return typeof e!="number"?bye(e):{top:e,right:e,bottom:e,left:e}}function mg(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function uE(e,t,n){let{reference:r,floating:i}=e;const s=ca(t),a=jj(t),l=Sj(a),c=gs(t),u=s==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[l]/2-i[l]/2;let p;switch(c){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-i.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Hc(t)){case"start":p[a]-=h*(n&&u?-1:1);break;case"end":p[a]+=h*(n&&u?-1:1);break}return p}const wye=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,l=s.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:f}=uE(u,r,c),h=r,p={},g=0;for(let m=0;m<l.length;m++){const{name:y,fn:v}=l[m],{x,y:w,data:j,reset:S}=await v({x:d,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:u,platform:a,elements:{reference:e,floating:t}});d=x??d,f=w??f,p={...p,[y]:{...p[y],...j}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:d,y:f}=uE(u,h,c)),m=-1)}return{x:d,y:f,placement:h,strategy:i,middlewareData:p}};async function df(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=ms(t,e),g=m5(p),y=l[h?f==="floating"?"reference":"floating":f],v=mg(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),j=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},S=mg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:w,strategy:c}):x);return{top:(v.top-S.top+g.top)/j.y,bottom:(S.bottom-v.bottom+g.bottom)/j.y,left:(v.left-S.left+g.left)/j.x,right:(S.right-v.right+g.right)/j.x}}const Sye=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=ms(e,t)||{};if(u==null)return{};const f=m5(d),h={x:n,y:r},p=jj(i),g=Sj(p),m=await a.getDimensions(u),y=p==="y",v=y?"top":"left",x=y?"bottom":"right",w=y?"clientHeight":"clientWidth",j=s.reference[g]+s.reference[p]-h[p]-s.floating[g],S=h[p]-s.reference[p],k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=k?k[w]:0;(!N||!await(a.isElement==null?void 0:a.isElement(k)))&&(N=l.floating[w]||s.floating[g]);const P=j/2-S/2,A=N/2-m[g]/2-1,C=la(f[v],A),_=la(f[x],A),R=C,z=N-m[g]-_,M=N/2-m[g]/2+P,I=Ew(R,M,z),$=!c.arrow&&Hc(i)!=null&&M!==I&&s.reference[g]/2-(M<R?C:_)-m[g]/2<0,E=$?M<R?M-R:M-z:0;return{[p]:h[p]+E,data:{[p]:I,centerOffset:M-I-E,...$&&{alignmentOffset:E}},reset:$}}}),jye=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...y}=ms(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=gs(i),x=ca(l),w=gs(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=h||(w||!m?[pg(l)]:yye(l)),k=g!=="none";!h&&k&&S.push(...vye(l,m,g,j));const N=[l,...S],P=await df(t,y),A=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&A.push(P[v]),f){const M=gye(i,a,j);A.push(P[M[0]],P[M[1]])}if(C=[...C,{placement:i,overflows:A}],!A.every(M=>M<=0)){var _,R;const M=(((_=s.flip)==null?void 0:_.index)||0)+1,I=N[M];if(I)return{data:{index:M,overflows:C},reset:{placement:I}};let $=(R=C.filter(E=>E.overflows[0]<=0).sort((E,T)=>E.overflows[1]-T.overflows[1])[0])==null?void 0:R.placement;if(!$)switch(p){case"bestFit":{var z;const E=(z=C.filter(T=>{if(k){const D=ca(T.placement);return D===x||D==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(D=>D>0).reduce((D,H)=>D+H,0)]).sort((T,D)=>T[1]-D[1])[0])==null?void 0:z[0];E&&($=E);break}case"initialPlacement":$=l;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function dE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function fE(e){return hye.some(t=>e[t]>=0)}const Nye=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=ms(e,t);switch(r){case"referenceHidden":{const s=await df(t,{...i,elementContext:"reference"}),a=dE(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:fE(a)}}}case"escaped":{const s=await df(t,{...i,altBoundary:!0}),a=dE(s,n.floating);return{data:{escapedOffsets:a,escaped:fE(a)}}}default:return{}}}}};async function kye(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=gs(n),l=Hc(n),c=ca(n)==="y",u=["left","top"].includes(a)?-1:1,d=s&&c?-1:1,f=ms(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(p=l==="end"?g*-1:g),c?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const Pye=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:a,middlewareData:l}=t,c=await kye(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:a}}}}},Cye=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:y=>{let{x:v,y:x}=y;return{x:v,y:x}}},...c}=ms(e,t),u={x:n,y:r},d=await df(t,c),f=ca(gs(i)),h=wj(f);let p=u[h],g=u[f];if(s){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=p+d[y],w=p-d[v];p=Ew(x,p,w)}if(a){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=g+d[y],w=g-d[v];g=Ew(x,g,w)}const m=l.fn({...t,[h]:p,[f]:g});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:s,[f]:a}}}}}},Aye=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ms(e,t),d={x:n,y:r},f=ca(i),h=wj(f);let p=d[h],g=d[f];const m=ms(l,t),y=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const w=h==="y"?"height":"width",j=s.reference[h]-s.floating[w]+y.mainAxis,S=s.reference[h]+s.reference[w]-y.mainAxis;p<j?p=j:p>S&&(p=S)}if(u){var v,x;const w=h==="y"?"width":"height",j=["top","left"].includes(gs(i)),S=s.reference[f]-s.floating[w]+(j&&((v=a.offset)==null?void 0:v[f])||0)+(j?0:y.crossAxis),k=s.reference[f]+s.reference[w]+(j?0:((x=a.offset)==null?void 0:x[f])||0)-(j?y.crossAxis:0);g<S?g=S:g>k&&(g=k)}return{[h]:p,[f]:g}}}},Eye=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:a,elements:l}=t,{apply:c=()=>{},...u}=ms(e,t),d=await df(t,u),f=gs(i),h=Hc(i),p=ca(i)==="y",{width:g,height:m}=s.floating;let y,v;f==="top"||f==="bottom"?(y=f,v=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,y=h==="end"?"top":"bottom");const x=m-d.top-d.bottom,w=g-d.left-d.right,j=la(m-d[y],x),S=la(g-d[v],w),k=!t.middlewareData.shift;let N=j,P=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(P=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=x),k&&!h){const C=dr(d.left,0),_=dr(d.right,0),R=dr(d.top,0),z=dr(d.bottom,0);p?P=g-2*(C!==0||_!==0?C+_:dr(d.left,d.right)):N=m-2*(R!==0||z!==0?R+z:dr(d.top,d.bottom))}await c({...t,availableWidth:P,availableHeight:N});const A=await a.getDimensions(l.floating);return g!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function Gy(){return typeof window<"u"}function Wc(e){return g5(e)?(e.nodeName||"").toLowerCase():"#document"}function xr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $i(e){var t;return(t=(g5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function g5(e){return Gy()?e instanceof Node||e instanceof xr(e).Node:!1}function oi(e){return Gy()?e instanceof Element||e instanceof xr(e).Element:!1}function Ii(e){return Gy()?e instanceof HTMLElement||e instanceof xr(e).HTMLElement:!1}function hE(e){return!Gy()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof xr(e).ShadowRoot}function Gf(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=li(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function _ye(e){return["table","td","th"].includes(Wc(e))}function Yy(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Nj(e){const t=kj(),n=oi(e)?li(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Tye(e){let t=ua(e);for(;Ii(t)&&!yc(t);){if(Nj(t))return t;if(Yy(t))return null;t=ua(t)}return null}function kj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yc(e){return["html","body","#document"].includes(Wc(e))}function li(e){return xr(e).getComputedStyle(e)}function Xy(e){return oi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ua(e){if(Wc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||hE(e)&&e.host||$i(e);return hE(t)?t.host:t}function y5(e){const t=ua(e);return yc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ii(t)&&Gf(t)?t:y5(t)}function ff(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=y5(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=xr(i);if(s){const l=Tw(a);return t.concat(a,a.visualViewport||[],Gf(i)?i:[],l&&n?ff(l):[])}return t.concat(i,ff(i,[],n))}function Tw(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function x5(e){const t=li(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ii(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,l=hg(n)!==s||hg(r)!==a;return l&&(n=s,r=a),{width:n,height:r,$:l}}function Pj(e){return oi(e)?e:e.contextElement}function Tl(e){const t=Pj(e);if(!Ii(t))return Ai(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=x5(t);let a=(s?hg(n.width):n.width)/r,l=(s?hg(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Oye=Ai(0);function v5(e){const t=xr(e);return!kj()||!t.visualViewport?Oye:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Iye(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==xr(e)?!1:t}function go(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Pj(e);let a=Ai(1);t&&(r?oi(r)&&(a=Tl(r)):a=Tl(e));const l=Iye(s,n,r)?v5(s):Ai(0);let c=(i.left+l.x)/a.x,u=(i.top+l.y)/a.y,d=i.width/a.x,f=i.height/a.y;if(s){const h=xr(s),p=r&&oi(r)?xr(r):r;let g=h,m=Tw(g);for(;m&&r&&p!==g;){const y=Tl(m),v=m.getBoundingClientRect(),x=li(m),w=v.left+(m.clientLeft+parseFloat(x.paddingLeft))*y.x,j=v.top+(m.clientTop+parseFloat(x.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,f*=y.y,c+=w,u+=j,g=xr(m),m=Tw(g)}}return mg({width:d,height:f,x:c,y:u})}function Cj(e,t){const n=Xy(e).scrollLeft;return t?t.left+n:go($i(e)).left+n}function b5(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:Cj(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function Dye(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",a=$i(r),l=t?Yy(t.floating):!1;if(r===a||l&&s)return n;let c={scrollLeft:0,scrollTop:0},u=Ai(1);const d=Ai(0),f=Ii(r);if((f||!f&&!s)&&((Wc(r)!=="body"||Gf(a))&&(c=Xy(r)),Ii(r))){const p=go(r);u=Tl(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const h=a&&!f&&!s?b5(a,c,!0):Ai(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-c.scrollTop*u.y+d.y+h.y}}function Rye(e){return Array.from(e.getClientRects())}function Mye(e){const t=$i(e),n=Xy(e),r=e.ownerDocument.body,i=dr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=dr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Cj(e);const l=-n.scrollTop;return li(r).direction==="rtl"&&(a+=dr(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:l}}function $ye(e,t){const n=xr(e),r=$i(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,l=0,c=0;if(i){s=i.width,a=i.height;const u=kj();(!u||u&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:s,height:a,x:l,y:c}}function Lye(e,t){const n=go(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ii(e)?Tl(e):Ai(1),a=e.clientWidth*s.x,l=e.clientHeight*s.y,c=i*s.x,u=r*s.y;return{width:a,height:l,x:c,y:u}}function pE(e,t,n){let r;if(t==="viewport")r=$ye(e,n);else if(t==="document")r=Mye($i(e));else if(oi(t))r=Lye(t,n);else{const i=v5(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return mg(r)}function w5(e,t){const n=ua(e);return n===t||!oi(n)||yc(n)?!1:li(n).position==="fixed"||w5(n,t)}function Fye(e,t){const n=t.get(e);if(n)return n;let r=ff(e,[],!1).filter(l=>oi(l)&&Wc(l)!=="body"),i=null;const s=li(e).position==="fixed";let a=s?ua(e):e;for(;oi(a)&&!yc(a);){const l=li(a),c=Nj(a);!c&&l.position==="fixed"&&(i=null),(s?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Gf(a)&&!c&&w5(e,a))?r=r.filter(d=>d!==a):i=l,a=ua(a)}return t.set(e,r),r}function Bye(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?Yy(t)?[]:Fye(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,d)=>{const f=pE(t,d,i);return u.top=dr(f.top,u.top),u.right=la(f.right,u.right),u.bottom=la(f.bottom,u.bottom),u.left=dr(f.left,u.left),u},pE(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Uye(e){const{width:t,height:n}=x5(e);return{width:t,height:n}}function zye(e,t,n){const r=Ii(t),i=$i(t),s=n==="fixed",a=go(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=Ai(0);if(r||!r&&!s)if((Wc(t)!=="body"||Gf(i))&&(l=Xy(t)),r){const h=go(t,!0,s,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else i&&(c.x=Cj(i));const u=i&&!r&&!s?b5(i,l):Ai(0),d=a.left+l.scrollLeft-c.x-u.x,f=a.top+l.scrollTop-c.y-u.y;return{x:d,y:f,width:a.width,height:a.height}}function b0(e){return li(e).position==="static"}function mE(e,t){if(!Ii(e)||li(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return $i(e)===n&&(n=n.ownerDocument.body),n}function S5(e,t){const n=xr(e);if(Yy(e))return n;if(!Ii(e)){let i=ua(e);for(;i&&!yc(i);){if(oi(i)&&!b0(i))return i;i=ua(i)}return n}let r=mE(e,t);for(;r&&_ye(r)&&b0(r);)r=mE(r,t);return r&&yc(r)&&b0(r)&&!Nj(r)?n:r||Tye(e)||n}const Hye=async function(e){const t=this.getOffsetParent||S5,n=this.getDimensions,r=await n(e.floating);return{reference:zye(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Wye(e){return li(e).direction==="rtl"}const qye={convertOffsetParentRelativeRectToViewportRelativeRect:Dye,getDocumentElement:$i,getClippingRect:Bye,getOffsetParent:S5,getElementRects:Hye,getClientRects:Rye,getDimensions:Uye,getScale:Tl,isElement:oi,isRTL:Wye};function j5(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Vye(e,t){let n=null,r;const i=$i(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(l||t(),!h||!p)return;const g=Rh(f),m=Rh(i.clientWidth-(d+h)),y=Rh(i.clientHeight-(f+p)),v=Rh(d),w={rootMargin:-g+"px "+-m+"px "+-y+"px "+-v+"px",threshold:dr(0,la(1,c))||1};let j=!0;function S(k){const N=k[0].intersectionRatio;if(N!==c){if(!j)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!j5(u,e.getBoundingClientRect())&&a(),j=!1}try{n=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(e)}return a(!0),s}function Kye(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Pj(e),d=i||s?[...u?ff(u):[],...ff(t)]:[];d.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const f=u&&l?Vye(u,n):null;let h=-1,p=null;a&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let g,m=c?go(e):null;c&&y();function y(){const v=go(e);m&&!j5(m,v)&&n(),m=v,g=requestAnimationFrame(y)}return n(),()=>{var v;d.forEach(x=>{i&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const Qye=Pye,Gye=Cye,Yye=jye,Xye=Eye,Zye=Nye,gE=Sye,Jye=Aye,exe=(e,t,n)=>{const r=new Map,i={platform:qye,...n},s={...i.platform,_c:r};return wye(e,t,{...i,platform:s})};var jp=typeof document<"u"?b.useLayoutEffect:b.useEffect;function gg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!gg(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!gg(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function N5(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function yE(e,t){const n=N5(e);return Math.round(t*n)/n}function w0(e){const t=b.useRef(e);return jp(()=>{t.current=e}),t}function txe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=b.useState(r);gg(h,r)||p(r);const[g,m]=b.useState(null),[y,v]=b.useState(null),x=b.useCallback(T=>{T!==k.current&&(k.current=T,m(T))},[]),w=b.useCallback(T=>{T!==N.current&&(N.current=T,v(T))},[]),j=s||g,S=a||y,k=b.useRef(null),N=b.useRef(null),P=b.useRef(d),A=c!=null,C=w0(c),_=w0(i),R=w0(u),z=b.useCallback(()=>{if(!k.current||!N.current)return;const T={placement:t,strategy:n,middleware:h};_.current&&(T.platform=_.current),exe(k.current,N.current,T).then(D=>{const H={...D,isPositioned:R.current!==!1};M.current&&!gg(P.current,H)&&(P.current=H,So.flushSync(()=>{f(H)}))})},[h,t,n,_,R]);jp(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(T=>({...T,isPositioned:!1})))},[u]);const M=b.useRef(!1);jp(()=>(M.current=!0,()=>{M.current=!1}),[]),jp(()=>{if(j&&(k.current=j),S&&(N.current=S),j&&S){if(C.current)return C.current(j,S,z);z()}},[j,S,z,C,A]);const I=b.useMemo(()=>({reference:k,floating:N,setReference:x,setFloating:w}),[x,w]),$=b.useMemo(()=>({reference:j,floating:S}),[j,S]),E=b.useMemo(()=>{const T={position:n,left:0,top:0};if(!$.floating)return T;const D=yE($.floating,d.x),H=yE($.floating,d.y);return l?{...T,transform:"translate("+D+"px, "+H+"px)",...N5($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:H}},[n,l,$.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:z,refs:I,elements:$,floatingStyles:E}),[d,z,I,$,E])}const nxe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?gE({element:r.current,padding:i}).fn(n):{}:r?gE({element:r,padding:i}).fn(n):{}}}},rxe=(e,t)=>({...Qye(e),options:[e,t]}),ixe=(e,t)=>({...Gye(e),options:[e,t]}),sxe=(e,t)=>({...Jye(e),options:[e,t]}),axe=(e,t)=>({...Yye(e),options:[e,t]}),oxe=(e,t)=>({...Xye(e),options:[e,t]}),lxe=(e,t)=>({...Zye(e),options:[e,t]}),cxe=(e,t)=>({...nxe(e),options:[e,t]});var uxe="Arrow",k5=b.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...s}=e;return o.jsx(Kt.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});k5.displayName=uxe;var dxe=k5;function fxe(e){const[t,n]=b.useState(void 0);return br(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Aj="Popper",[P5,C5]=vj(Aj),[hxe,A5]=P5(Aj),E5=e=>{const{__scopePopper:t,children:n}=e,[r,i]=b.useState(null);return o.jsx(hxe,{scope:t,anchor:r,onAnchorChange:i,children:n})};E5.displayName=Aj;var _5="PopperAnchor",T5=b.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,s=A5(_5,n),a=b.useRef(null),l=Sn(t,a);return b.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(Kt.div,{...i,ref:l})});T5.displayName=_5;var Ej="PopperContent",[pxe,mxe]=P5(Ej),O5=b.forwardRef((e,t)=>{var U,ne,q,ie,re,ee;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=e,y=A5(Ej,n),[v,x]=b.useState(null),w=Sn(t,he=>x(he)),[j,S]=b.useState(null),k=fxe(j),N=(k==null?void 0:k.width)??0,P=(k==null?void 0:k.height)??0,A=r+(s!=="center"?"-"+s:""),C=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},_=Array.isArray(u)?u:[u],R=_.length>0,z={padding:C,boundary:_.filter(yxe),altBoundary:R},{refs:M,floatingStyles:I,placement:$,isPositioned:E,middlewareData:T}=txe({strategy:"fixed",placement:A,whileElementsMounted:(...he)=>Kye(...he,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[rxe({mainAxis:i+P,alignmentAxis:a}),c&&ixe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?sxe():void 0,...z}),c&&axe({...z}),oxe({...z,apply:({elements:he,rects:fe,availableWidth:je,availableHeight:Se})=>{const{width:Ce,height:Oe}=fe.reference,se=he.floating.style;se.setProperty("--radix-popper-available-width",`${je}px`),se.setProperty("--radix-popper-available-height",`${Se}px`),se.setProperty("--radix-popper-anchor-width",`${Ce}px`),se.setProperty("--radix-popper-anchor-height",`${Oe}px`)}}),j&&cxe({element:j,padding:l}),xxe({arrowWidth:N,arrowHeight:P}),h&&lxe({strategy:"referenceHidden",...z})]}),[D,H]=R5($),F=ps(g);br(()=>{E&&(F==null||F())},[E,F]);const B=(U=T.arrow)==null?void 0:U.x,Z=(ne=T.arrow)==null?void 0:ne.y,V=((q=T.arrow)==null?void 0:q.centerOffset)!==0,[G,X]=b.useState();return br(()=>{v&&X(window.getComputedStyle(v).zIndex)},[v]),o.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:E?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(ie=T.transformOrigin)==null?void 0:ie.x,(re=T.transformOrigin)==null?void 0:re.y].join(" "),...((ee=T.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(pxe,{scope:n,placedSide:D,onArrowChange:S,arrowX:B,arrowY:Z,shouldHideArrow:V,children:o.jsx(Kt.div,{"data-side":D,"data-align":H,...m,ref:w,style:{...m.style,animation:E?void 0:"none"}})})})});O5.displayName=Ej;var I5="PopperArrow",gxe={top:"bottom",right:"left",bottom:"top",left:"right"},D5=b.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,s=mxe(I5,r),a=gxe[s.placedSide];return o.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:o.jsx(dxe,{...i,ref:n,style:{...i.style,display:"block"}})})});D5.displayName=I5;function yxe(e){return e!==null}var xxe=e=>({name:"transformOrigin",options:e,fn(t){var y,v,x;const{placement:n,rects:r,middlewareData:i}=t,a=((y=i.arrow)==null?void 0:y.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,d]=R5(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((v=i.arrow)==null?void 0:v.x)??0)+l/2,p=(((x=i.arrow)==null?void 0:x.y)??0)+c/2;let g="",m="";return u==="bottom"?(g=a?f:`${h}px`,m=`${-c}px`):u==="top"?(g=a?f:`${h}px`,m=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,m=a?f:`${p}px`):u==="left"&&(g=`${r.floating.width+c}px`,m=a?f:`${p}px`),{data:{x:g,y:m}}}});function R5(e){const[t,n="center"]=e.split("-");return[t,n]}var vxe=E5,bxe=T5,wxe=O5,Sxe=D5,jxe="Portal",M5=b.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[i,s]=b.useState(!1);br(()=>s(!0),[]);const a=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?e6.createPortal(o.jsx(Kt.div,{...r,ref:t}),a):null});M5.displayName=jxe;function xE({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=Nxe({defaultProp:t,onChange:n}),s=e!==void 0,a=s?e:r,l=ps(n),c=b.useCallback(u=>{if(s){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else i(u)},[s,e,i,l]);return[a,c]}function Nxe({defaultProp:e,onChange:t}){const n=b.useState(e),[r]=n,i=b.useRef(r),s=ps(t);return b.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function kxe(e){const t=b.useRef({value:e,previous:e});return b.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Pxe="VisuallyHidden",$5=b.forwardRef((e,t)=>o.jsx(Kt.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));$5.displayName=Pxe;var Cxe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Qo=new WeakMap,Mh=new WeakMap,$h={},S0=0,L5=function(e){return e&&(e.host||L5(e.parentNode))},Axe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=L5(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Exe=function(e,t,n,r){var i=Axe(t,Array.isArray(e)?e:[e]);$h[n]||($h[n]=new WeakMap);var s=$h[n],a=[],l=new Set,c=new Set(i),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var p=h.getAttribute(r),g=p!==null&&p!=="false",m=(Qo.get(h)||0)+1,y=(s.get(h)||0)+1;Qo.set(h,m),s.set(h,y),a.push(h),m===1&&g&&Mh.set(h,!0),y===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return d(t),l.clear(),S0++,function(){a.forEach(function(f){var h=Qo.get(f)-1,p=s.get(f)-1;Qo.set(f,h),s.set(f,p),h||(Mh.has(f)||f.removeAttribute(r),Mh.delete(f)),p||f.removeAttribute(n)}),S0--,S0||(Qo=new WeakMap,Qo=new WeakMap,Mh=new WeakMap,$h={})}},_xe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=Cxe(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Exe(r,i,n,"aria-hidden")):function(){return null}},wi=function(){return wi=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},wi.apply(this,arguments)};function F5(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Txe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Np="right-scroll-bar-position",kp="width-before-scroll-bar",Oxe="with-scroll-bars-hidden",Ixe="--removed-body-scroll-bar-size";function j0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Dxe(e,t){var n=b.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var Rxe=typeof window<"u"?b.useLayoutEffect:b.useEffect,vE=new WeakMap;function Mxe(e,t){var n=Dxe(null,function(r){return e.forEach(function(i){return j0(i,r)})});return Rxe(function(){var r=vE.get(n);if(r){var i=new Set(r),s=new Set(e),a=n.current;i.forEach(function(l){s.has(l)||j0(l,null)}),s.forEach(function(l){i.has(l)||j0(l,a)})}vE.set(n,e)},[e]),n}function $xe(e){return e}function Lxe(e,t){t===void 0&&(t=$xe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(s),a=n}var c=function(){var d=a;a=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return i}function Fxe(e){e===void 0&&(e={});var t=Lxe(null);return t.options=wi({async:!0,ssr:!1},e),t}var B5=function(e){var t=e.sideCar,n=F5(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,wi({},n))};B5.isSideCarExport=!0;function Bxe(e,t){return e.useMedium(t),B5}var U5=Fxe(),N0=function(){},Zy=b.forwardRef(function(e,t){var n=b.useRef(null),r=b.useState({onScrollCapture:N0,onWheelCapture:N0,onTouchMoveCapture:N0}),i=r[0],s=r[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,g=e.inert,m=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,x=e.gapMode,w=F5(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,S=Mxe([n,t]),k=wi(wi({},w),i);return b.createElement(b.Fragment,null,d&&b.createElement(j,{sideCar:U5,removeScrollBar:u,shards:f,noIsolation:p,inert:g,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:x}),a?b.cloneElement(b.Children.only(l),wi(wi({},k),{ref:S})):b.createElement(v,wi({},k,{className:c,ref:S}),l))});Zy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zy.classNames={fullWidth:kp,zeroRight:Np};var Uxe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zxe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Uxe();return t&&e.setAttribute("nonce",t),e}function Hxe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Wxe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var qxe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=zxe())&&(Hxe(t,n),Wxe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Vxe=function(){var e=qxe();return function(t,n){b.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},z5=function(){var e=Vxe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Kxe={left:0,top:0,right:0,gap:0},k0=function(e){return parseInt(e||"",10)||0},Qxe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[k0(n),k0(r),k0(i)]},Gxe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Kxe;var t=Qxe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Yxe=z5(),Ol="data-scroll-locked",Xxe=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Oxe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ol,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Np,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(kp,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Np," .").concat(Np,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(kp," .").concat(kp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ol,`] {
    `).concat(Ixe,": ").concat(l,`px;
  }
`)},bE=function(){var e=parseInt(document.body.getAttribute(Ol)||"0",10);return isFinite(e)?e:0},Zxe=function(){b.useEffect(function(){return document.body.setAttribute(Ol,(bE()+1).toString()),function(){var e=bE()-1;e<=0?document.body.removeAttribute(Ol):document.body.setAttribute(Ol,e.toString())}},[])},Jxe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;Zxe();var s=b.useMemo(function(){return Gxe(i)},[i]);return b.createElement(Yxe,{styles:Xxe(s,!t,i,n?"":"!important")})},Ow=!1;if(typeof window<"u")try{var Lh=Object.defineProperty({},"passive",{get:function(){return Ow=!0,!0}});window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{Ow=!1}var Go=Ow?{passive:!1}:!1,e0e=function(e){return e.tagName==="TEXTAREA"},H5=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!e0e(e)&&n[t]==="visible")},t0e=function(e){return H5(e,"overflowY")},n0e=function(e){return H5(e,"overflowX")},wE=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=W5(e,r);if(i){var s=q5(e,r),a=s[1],l=s[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},r0e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},i0e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},W5=function(e,t){return e==="v"?t0e(t):n0e(t)},q5=function(e,t){return e==="v"?r0e(t):i0e(t)},s0e=function(e,t){return e==="h"&&t==="rtl"?-1:1},a0e=function(e,t,n,r,i){var s=s0e(e,window.getComputedStyle(t).direction),a=s*r,l=n.target,c=t.contains(l),u=!1,d=a>0,f=0,h=0;do{var p=q5(e,l),g=p[0],m=p[1],y=p[2],v=m-y-s*g;(g||v)&&W5(e,l)&&(f+=v,h+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!i)||!d&&(Math.abs(h)<1||!i))&&(u=!0),u},Fh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},SE=function(e){return[e.deltaX,e.deltaY]},jE=function(e){return e&&"current"in e?e.current:e},o0e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},l0e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},c0e=0,Yo=[];function u0e(e){var t=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),i=b.useState(c0e++)[0],s=b.useState(z5)[0],a=b.useRef(e);b.useEffect(function(){a.current=e},[e]),b.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Txe([e.lockRef.current],(e.shards||[]).map(jE),!0).filter(Boolean);return m.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=b.useCallback(function(m,y){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!a.current.allowPinchZoom;var v=Fh(m),x=n.current,w="deltaX"in m?m.deltaX:x[0]-v[0],j="deltaY"in m?m.deltaY:x[1]-v[1],S,k=m.target,N=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in m&&N==="h"&&k.type==="range")return!1;var P=wE(N,k);if(!P)return!0;if(P?S=N:(S=N==="v"?"h":"v",P=wE(N,k)),!P)return!1;if(!r.current&&"changedTouches"in m&&(w||j)&&(r.current=S),!S)return!0;var A=r.current||S;return a0e(A,y,m,A==="h"?w:j,!0)},[]),c=b.useCallback(function(m){var y=m;if(!(!Yo.length||Yo[Yo.length-1]!==s)){var v="deltaY"in y?SE(y):Fh(y),x=t.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&o0e(S.delta,v)})[0];if(x&&x.should){y.cancelable&&y.preventDefault();return}if(!x){var w=(a.current.shards||[]).map(jE).filter(Boolean).filter(function(S){return S.contains(y.target)}),j=w.length>0?l(y,w[0]):!a.current.noIsolation;j&&y.cancelable&&y.preventDefault()}}},[]),u=b.useCallback(function(m,y,v,x){var w={name:m,delta:y,target:v,should:x,shadowParent:d0e(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),d=b.useCallback(function(m){n.current=Fh(m),r.current=void 0},[]),f=b.useCallback(function(m){u(m.type,SE(m),m.target,l(m,e.lockRef.current))},[]),h=b.useCallback(function(m){u(m.type,Fh(m),m.target,l(m,e.lockRef.current))},[]);b.useEffect(function(){return Yo.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Go),document.addEventListener("touchmove",c,Go),document.addEventListener("touchstart",d,Go),function(){Yo=Yo.filter(function(m){return m!==s}),document.removeEventListener("wheel",c,Go),document.removeEventListener("touchmove",c,Go),document.removeEventListener("touchstart",d,Go)}},[]);var p=e.removeScrollBar,g=e.inert;return b.createElement(b.Fragment,null,g?b.createElement(s,{styles:l0e(i)}):null,p?b.createElement(Jxe,{gapMode:e.gapMode}):null)}function d0e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const f0e=Bxe(U5,u0e);var V5=b.forwardRef(function(e,t){return b.createElement(Zy,wi({},e,{ref:t,sideCar:f0e}))});V5.classNames=Zy.classNames;var h0e=[" ","Enter","ArrowUp","ArrowDown"],p0e=[" ","Enter"],Yf="Select",[Jy,ex,m0e]=Wge(Yf),[qc,XSe]=vj(Yf,[m0e,C5]),tx=C5(),[g0e,ba]=qc(Yf),[y0e,x0e]=qc(Yf),K5=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:p,form:g}=e,m=tx(t),[y,v]=b.useState(null),[x,w]=b.useState(null),[j,S]=b.useState(!1),k=Vge(u),[N=!1,P]=xE({prop:r,defaultProp:i,onChange:s}),[A,C]=xE({prop:a,defaultProp:l,onChange:c}),_=b.useRef(null),R=y?g||!!y.closest("form"):!0,[z,M]=b.useState(new Set),I=Array.from(z).map($=>$.props.value).join(";");return o.jsx(vxe,{...m,children:o.jsxs(g0e,{required:p,scope:t,trigger:y,onTriggerChange:v,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:bj(),value:A,onValueChange:C,open:N,onOpenChange:P,dir:k,triggerPointerDownPosRef:_,disabled:h,children:[o.jsx(Jy.Provider,{scope:t,children:o.jsx(y0e,{scope:e.__scopeSelect,onNativeOptionAdd:b.useCallback($=>{M(E=>new Set(E).add($))},[]),onNativeOptionRemove:b.useCallback($=>{M(E=>{const T=new Set(E);return T.delete($),T})},[]),children:n})}),R?o.jsxs(h4,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:A,onChange:$=>C($.target.value),disabled:h,form:g,children:[A===void 0?o.jsx("option",{value:""}):null,Array.from(z)]},I):null]})})};K5.displayName=Yf;var Q5="SelectTrigger",G5=b.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,s=tx(n),a=ba(Q5,n),l=a.disabled||r,c=Sn(t,a.onTriggerChange),u=ex(n),d=b.useRef("touch"),[f,h,p]=p4(m=>{const y=u().filter(w=>!w.disabled),v=y.find(w=>w.value===a.value),x=m4(y,m,v);x!==void 0&&a.onValueChange(x.value)}),g=m=>{l||(a.onOpenChange(!0),p()),m&&(a.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return o.jsx(bxe,{asChild:!0,...s,children:o.jsx(Kt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":f4(a.value)?"":void 0,...i,ref:c,onClick:Yt(i.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&g(m)}),onPointerDown:Yt(i.onPointerDown,m=>{d.current=m.pointerType;const y=m.target;y.hasPointerCapture(m.pointerId)&&y.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:Yt(i.onKeyDown,m=>{const y=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(y&&m.key===" ")&&h0e.includes(m.key)&&(g(),m.preventDefault())})})})});G5.displayName=Q5;var Y5="SelectValue",X5=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:a="",...l}=e,c=ba(Y5,n),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,f=Sn(t,c.onValueNodeChange);return br(()=>{u(d)},[u,d]),o.jsx(Kt.span,{...l,ref:f,style:{pointerEvents:"none"},children:f4(c.value)?o.jsx(o.Fragment,{children:a}):s})});X5.displayName=Y5;var v0e="SelectIcon",b0e=b.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return o.jsx(Kt.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});b0e.displayName=v0e;var w0e="SelectPortal",Z5=e=>o.jsx(M5,{asChild:!0,...e});Z5.displayName=w0e;var yo="SelectContent",J5=b.forwardRef((e,t)=>{const n=ba(yo,e.__scopeSelect),[r,i]=b.useState();if(br(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?So.createPortal(o.jsx(e4,{scope:e.__scopeSelect,children:o.jsx(Jy.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),s):null}return o.jsx(t4,{...e,ref:t})});J5.displayName=yo;var Qr=10,[e4,wa]=qc(yo),S0e="SelectContentImpl",t4=b.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:y,...v}=e,x=ba(yo,n),[w,j]=b.useState(null),[S,k]=b.useState(null),N=Sn(t,U=>j(U)),[P,A]=b.useState(null),[C,_]=b.useState(null),R=ex(n),[z,M]=b.useState(!1),I=b.useRef(!1);b.useEffect(()=>{if(w)return _xe(w)},[w]),rye();const $=b.useCallback(U=>{const[ne,...q]=R().map(ee=>ee.ref.current),[ie]=q.slice(-1),re=document.activeElement;for(const ee of U)if(ee===re||(ee==null||ee.scrollIntoView({block:"nearest"}),ee===ne&&S&&(S.scrollTop=0),ee===ie&&S&&(S.scrollTop=S.scrollHeight),ee==null||ee.focus(),document.activeElement!==re))return},[R,S]),E=b.useCallback(()=>$([P,w]),[$,P,w]);b.useEffect(()=>{z&&E()},[z,E]);const{onOpenChange:T,triggerPointerDownPosRef:D}=x;b.useEffect(()=>{if(w){let U={x:0,y:0};const ne=ie=>{var re,ee;U={x:Math.abs(Math.round(ie.pageX)-(((re=D.current)==null?void 0:re.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((ee=D.current)==null?void 0:ee.y)??0))}},q=ie=>{U.x<=10&&U.y<=10?ie.preventDefault():w.contains(ie.target)||T(!1),document.removeEventListener("pointermove",ne),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",q,{capture:!0})}}},[w,T,D]),b.useEffect(()=>{const U=()=>T(!1);return window.addEventListener("blur",U),window.addEventListener("resize",U),()=>{window.removeEventListener("blur",U),window.removeEventListener("resize",U)}},[T]);const[H,F]=p4(U=>{const ne=R().filter(re=>!re.disabled),q=ne.find(re=>re.ref.current===document.activeElement),ie=m4(ne,U,q);ie&&setTimeout(()=>ie.ref.current.focus())}),B=b.useCallback((U,ne,q)=>{const ie=!I.current&&!q;(x.value!==void 0&&x.value===ne||ie)&&(A(U),ie&&(I.current=!0))},[x.value]),Z=b.useCallback(()=>w==null?void 0:w.focus(),[w]),V=b.useCallback((U,ne,q)=>{const ie=!I.current&&!q;(x.value!==void 0&&x.value===ne||ie)&&_(U)},[x.value]),G=r==="popper"?Iw:n4,X=G===Iw?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:y}:{};return o.jsx(e4,{scope:n,content:w,viewport:S,onViewportChange:k,itemRefCallback:B,selectedItem:P,onItemLeave:Z,itemTextRefCallback:V,focusSelectedItem:E,selectedItemText:C,position:r,isPositioned:z,searchRef:H,children:o.jsx(V5,{as:gc,allowPinchZoom:!0,children:o.jsx(h5,{asChild:!0,trapped:x.open,onMountAutoFocus:U=>{U.preventDefault()},onUnmountAutoFocus:Yt(i,U=>{var ne;(ne=x.trigger)==null||ne.focus({preventScroll:!0}),U.preventDefault()}),children:o.jsx(d5,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:U=>U.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:o.jsx(G,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:U=>U.preventDefault(),...v,...X,onPlaced:()=>M(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Yt(v.onKeyDown,U=>{const ne=U.ctrlKey||U.altKey||U.metaKey;if(U.key==="Tab"&&U.preventDefault(),!ne&&U.key.length===1&&F(U.key),["ArrowUp","ArrowDown","Home","End"].includes(U.key)){let ie=R().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(U.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(U.key)){const re=U.target,ee=ie.indexOf(re);ie=ie.slice(ee+1)}setTimeout(()=>$(ie)),U.preventDefault()}})})})})})})});t4.displayName=S0e;var j0e="SelectItemAlignedPosition",n4=b.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,s=ba(yo,n),a=wa(yo,n),[l,c]=b.useState(null),[u,d]=b.useState(null),f=Sn(t,N=>d(N)),h=ex(n),p=b.useRef(!1),g=b.useRef(!0),{viewport:m,selectedItem:y,selectedItemText:v,focusSelectedItem:x}=a,w=b.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&m&&y&&v){const N=s.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),A=s.valueNode.getBoundingClientRect(),C=v.getBoundingClientRect();if(s.dir!=="rtl"){const re=C.left-P.left,ee=A.left-re,he=N.left-ee,fe=N.width+he,je=Math.max(fe,P.width),Se=window.innerWidth-Qr,Ce=nE(ee,[Qr,Math.max(Qr,Se-je)]);l.style.minWidth=fe+"px",l.style.left=Ce+"px"}else{const re=P.right-C.right,ee=window.innerWidth-A.right-re,he=window.innerWidth-N.right-ee,fe=N.width+he,je=Math.max(fe,P.width),Se=window.innerWidth-Qr,Ce=nE(ee,[Qr,Math.max(Qr,Se-je)]);l.style.minWidth=fe+"px",l.style.right=Ce+"px"}const _=h(),R=window.innerHeight-Qr*2,z=m.scrollHeight,M=window.getComputedStyle(u),I=parseInt(M.borderTopWidth,10),$=parseInt(M.paddingTop,10),E=parseInt(M.borderBottomWidth,10),T=parseInt(M.paddingBottom,10),D=I+$+z+T+E,H=Math.min(y.offsetHeight*5,D),F=window.getComputedStyle(m),B=parseInt(F.paddingTop,10),Z=parseInt(F.paddingBottom,10),V=N.top+N.height/2-Qr,G=R-V,X=y.offsetHeight/2,U=y.offsetTop+X,ne=I+$+U,q=D-ne;if(ne<=V){const re=_.length>0&&y===_[_.length-1].ref.current;l.style.bottom="0px";const ee=u.clientHeight-m.offsetTop-m.offsetHeight,he=Math.max(G,X+(re?Z:0)+ee+E),fe=ne+he;l.style.height=fe+"px"}else{const re=_.length>0&&y===_[0].ref.current;l.style.top="0px";const he=Math.max(V,I+m.offsetTop+(re?B:0)+X)+q;l.style.height=he+"px",m.scrollTop=ne-V+m.offsetTop}l.style.margin=`${Qr}px 0`,l.style.minHeight=H+"px",l.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,l,u,m,y,v,s.dir,r]);br(()=>w(),[w]);const[j,S]=b.useState();br(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const k=b.useCallback(N=>{N&&g.current===!0&&(w(),x==null||x(),g.current=!1)},[w,x]);return o.jsx(k0e,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:o.jsx(Kt.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});n4.displayName=j0e;var N0e="SelectPopperPosition",Iw=b.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Qr,...s}=e,a=tx(n);return o.jsx(wxe,{...a,...s,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Iw.displayName=N0e;var[k0e,_j]=qc(yo,{}),Dw="SelectViewport",r4=b.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,s=wa(Dw,n),a=_j(Dw,n),l=Sn(t,s.onViewportChange),c=b.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Jy.Slot,{scope:n,children:o.jsx(Kt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Yt(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&f){const p=Math.abs(c.current-d.scrollTop);if(p>0){const g=window.innerHeight-Qr*2,m=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),v=Math.max(m,y);if(v<g){const x=v+p,w=Math.min(g,x),j=x-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});r4.displayName=Dw;var i4="SelectGroup",[P0e,C0e]=qc(i4),A0e=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=bj();return o.jsx(P0e,{scope:n,id:i,children:o.jsx(Kt.div,{role:"group","aria-labelledby":i,...r,ref:t})})});A0e.displayName=i4;var s4="SelectLabel",E0e=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=C0e(s4,n);return o.jsx(Kt.div,{id:i.id,...r,ref:t})});E0e.displayName=s4;var yg="SelectItem",[_0e,a4]=qc(yg),o4=b.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...a}=e,l=ba(yg,n),c=wa(yg,n),u=l.value===r,[d,f]=b.useState(s??""),[h,p]=b.useState(!1),g=Sn(t,x=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,x,r,i)}),m=bj(),y=b.useRef("touch"),v=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(_0e,{scope:n,value:r,disabled:i,textId:m,isSelected:u,onItemTextChange:b.useCallback(x=>{f(w=>w||((x==null?void 0:x.textContent)??"").trim())},[]),children:o.jsx(Jy.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:o.jsx(Kt.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:g,onFocus:Yt(a.onFocus,()=>p(!0)),onBlur:Yt(a.onBlur,()=>p(!1)),onClick:Yt(a.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:Yt(a.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:Yt(a.onPointerDown,x=>{y.current=x.pointerType}),onPointerMove:Yt(a.onPointerMove,x=>{var w;y.current=x.pointerType,i?(w=c.onItemLeave)==null||w.call(c):y.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Yt(a.onPointerLeave,x=>{var w;x.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Yt(a.onKeyDown,x=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&x.key===" "||(p0e.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});o4.displayName=yg;var Tu="SelectItemText",l4=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...s}=e,a=ba(Tu,n),l=wa(Tu,n),c=a4(Tu,n),u=x0e(Tu,n),[d,f]=b.useState(null),h=Sn(t,v=>f(v),c.onItemTextChange,v=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,v,c.value,c.disabled)}),p=d==null?void 0:d.textContent,g=b.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:y}=u;return br(()=>(m(g),()=>y(g)),[m,y,g]),o.jsxs(o.Fragment,{children:[o.jsx(Kt.span,{id:c.textId,...s,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?So.createPortal(s.children,a.valueNode):null]})});l4.displayName=Tu;var c4="SelectItemIndicator",u4=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return a4(c4,n).isSelected?o.jsx(Kt.span,{"aria-hidden":!0,...r,ref:t}):null});u4.displayName=c4;var Rw="SelectScrollUpButton",T0e=b.forwardRef((e,t)=>{const n=wa(Rw,e.__scopeSelect),r=_j(Rw,e.__scopeSelect),[i,s]=b.useState(!1),a=Sn(t,r.onScrollButtonChange);return br(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?o.jsx(d4,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});T0e.displayName=Rw;var Mw="SelectScrollDownButton",O0e=b.forwardRef((e,t)=>{const n=wa(Mw,e.__scopeSelect),r=_j(Mw,e.__scopeSelect),[i,s]=b.useState(!1),a=Sn(t,r.onScrollButtonChange);return br(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?o.jsx(d4,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});O0e.displayName=Mw;var d4=b.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,s=wa("SelectScrollButton",n),a=b.useRef(null),l=ex(n),c=b.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),br(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),o.jsx(Kt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Yt(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Yt(i.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Yt(i.onPointerLeave,()=>{c()})})}),I0e="SelectSeparator",D0e=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(Kt.div,{"aria-hidden":!0,...r,ref:t})});D0e.displayName=I0e;var $w="SelectArrow",R0e=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=tx(n),s=ba($w,n),a=wa($w,n);return s.open&&a.position==="popper"?o.jsx(Sxe,{...i,...r,ref:t}):null});R0e.displayName=$w;function f4(e){return e===""||e===void 0}var h4=b.forwardRef((e,t)=>{const{value:n,...r}=e,i=b.useRef(null),s=Sn(t,i),a=kxe(n);return b.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&d){const f=new Event("change",{bubbles:!0});d.call(l,n),l.dispatchEvent(f)}},[a,n]),o.jsx($5,{asChild:!0,children:o.jsx("select",{...r,ref:s,defaultValue:n})})});h4.displayName="BubbleSelect";function p4(e){const t=ps(e),n=b.useRef(""),r=b.useRef(0),i=b.useCallback(a=>{const l=n.current+a;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=b.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function m4(e,t,n){const i=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let a=M0e(e,Math.max(s,0));i.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function M0e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var $0e=K5,g4=G5,L0e=X5,F0e=Z5,y4=J5,B0e=r4,x4=o4,U0e=l4,z0e=u4;const H0e=$0e,W0e=L0e,v4=b.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(g4,{ref:r,className:`flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,...n,children:[t,o.jsx(dI,{className:"h-4 w-4 opacity-50"})]}));v4.displayName=g4.displayName;const b4=b.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>o.jsx(F0e,{children:o.jsx(y4,{ref:i,className:`relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ${e||""}`,position:n,...r,children:o.jsx(B0e,{className:`p-1 ${n==="popper"?"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]":""}`,children:t})})}));b4.displayName=y4.displayName;const Ou=b.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(x4,{ref:r,className:`relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 ${e||""}`,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(z0e,{children:o.jsx(Dv,{className:"h-4 w-4"})})}),o.jsx(U0e,{children:t})]}));Ou.displayName=x4.displayName;var q0e="Label",w4=b.forwardRef((e,t)=>o.jsx(Kt.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));w4.displayName=q0e;var S4=w4;const As=b.forwardRef(({className:e,...t},n)=>o.jsx(S4,{ref:n,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e||""}`,...t}));As.displayName=S4.displayName;const j4=b.forwardRef(({className:e,...t},n)=>o.jsx("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,ref:n,...t}));j4.displayName="Textarea";const V0e=()=>{const e=St(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[s,a]=b.useState(""),[l,c]=b.useState(""),[u,d]=b.useState(""),[f,h]=b.useState(!1),[p,g]=b.useState(!1),[m,y]=b.useState(null),[v,x]=b.useState(!1),[w,j]=b.useState(null),[S,k]=b.useState([]),[N,P]=b.useState({date:new Date().toISOString().split("T")[0],reference:"",receivedAmount:0,payingAmount:0,change:0,paymentChoice:"CASH",note:""}),A=M=>{j(M),x(!0)},C=async()=>{if(w)try{(await fetch(`/api/purchases/${w.id}`,{method:"DELETE",credentials:"include"})).ok?(n(t.filter(I=>I.id!==w.id)),x(!1),j(null)):console.error("Failed to delete purchase")}catch(M){console.error("Error deleting purchase:",M)}},_=async()=>{try{const M=await fetch("/api/purchases",{credentials:"include"});if(M.ok){const I=await M.json();n(I)}}catch(M){console.error("Error refreshing purchases:",M)}},R=async M=>{try{const I=await fetch(`/api/payments/purchases/${M}`,{credentials:"include"});if(I.ok){const $=await I.json();k($)}}catch(I){console.error("Error fetching payments:",I)}};b.useEffect(()=>{(async()=>{try{const I=await fetch("/api/purchases",{credentials:"include"});if(I.ok){const $=await I.json();n($)}else I.status===401?e("/login"):console.error("Failed to fetch purchases")}catch(I){console.error("Error fetching purchases:",I)}finally{i(!1)}})()},[e]);const z=t.filter(M=>{var D,H;const I=s.toLowerCase(),$=M.reference.toLowerCase(),E=((H=(D=M.supplier)==null?void 0:D.name)==null?void 0:H.toLowerCase())||"",T=new Date(M.createdAt);if(l&&u){const F=new Date(l),B=new Date(u);if(B.setHours(23,59,59,999),T<F||T>B)return!1}return $.includes(I)||E.includes(I)});return r?o.jsx("div",{children:"Loading..."}):o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"Purchases"}),o.jsxs("button",{onClick:()=>e("/purchases/create"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[o.jsx(Hn,{className:"inline-block w-5 h-5 mr-2"}),"Create Purchase"]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",placeholder:"Search by reference or supplier...",value:s,onChange:M=>a(M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("input",{type:"date",value:l,onChange:M=>c(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),o.jsx("input",{type:"date",value:u,onChange:M=>d(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full divide-y divide-gray-200 table-fixed",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Date"}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Reference"}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Supplier"}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Warehouse"}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Status"}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Total"}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Paid"}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Due"}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Payment"}),o.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(M=>{var I,$,E,T,D;return o.jsxs("tr",{children:[o.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:new Date(M.createdAt).toLocaleDateString()}),o.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900 truncate",children:M.reference}),o.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:((I=M.supplier)==null?void 0:I.name)||"N/A"}),o.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:(($=M.warehouse)==null?void 0:$.name)||"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                      ${M.status==="RECEIVED"?"bg-green-100 text-green-800":M.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:M.status})}),o.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:["",parseFloat(((E=M.totalAmount)==null?void 0:E.toString())??"0").toFixed(2)]}),o.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:["",parseFloat(((T=M.amountPaid)==null?void 0:T.toString())??"0").toFixed(2)]}),o.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:["",parseFloat(((D=M.amountDue)==null?void 0:D.toString())??"0").toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>{y(M),h(!0)},className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full cursor-pointer
                        ${M.paymentStatus==="PAID"?"bg-blue-100 text-blue-800":M.paymentStatus==="PARTIALLY_PAID"?"bg-purple-100 text-purple-800":"bg-red-100 text-red-800"}`,children:M.paymentStatus})}),o.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>e(`/purchases/${M.id}`),className:"text-blue-600 hover:text-blue-900",title:"View Purchase",children:o.jsx(ia,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>{y(M),g(!0),R(M.id)},className:"text-blue-600 hover:text-blue-900",title:"View Payments",children:o.jsx(Vg,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>{y(M),h(!0)},className:"text-green-600 hover:text-green-900",disabled:M.paymentStatus==="PAID",title:"Add Payment",children:o.jsx(Hn,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>e(`/purchases/${M.id}/edit`),className:"text-blue-600 hover:text-blue-900",title:"Edit Purchase",children:o.jsx(Kg,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>A(M),className:"text-red-600 hover:text-red-800",title:"Delete Purchase",children:o.jsx(Rn,{className:"w-5 h-5"})})]})})]},M.id)})})]})})]}),m&&f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px] max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Create Payment"}),o.jsx("button",{onClick:()=>{h(!1),y(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx(Lt,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:async M=>{if(M.preventDefault(),!!m)try{const I=Math.floor(Math.random()*1e6).toString().padStart(6,"0"),$=`${m.reference}-${I}`,E={...N,reference:$,purchaseId:m.id};console.log("Payment Data being sent:",E);const T=await fetch(`/api/payments/purchases/${m.id}/payment`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...E,receivedAmount:N.payingAmount})}),D=await T.json();console.log("API Response:",{status:T.status,data:D}),T.ok?(h(!1),y(null),_(),P({date:new Date().toISOString().split("T")[0],reference:"",receivedAmount:0,payingAmount:0,change:0,paymentChoice:"CASH",note:""})):console.error("Failed to create payment")}catch(I){console.error("Error creating payment:",I)}},className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(As,{htmlFor:"date",children:"Date"}),o.jsx(Jo,{id:"date",type:"date",value:N.date,onChange:M=>P({...N,date:M.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(As,{htmlFor:"reference",children:"Reference"}),o.jsx(Jo,{id:"reference",type:"text",value:m.reference,readOnly:!0,className:"bg-gray-100",required:!0})]}),o.jsxs("div",{children:[o.jsx(As,{htmlFor:"receivedAmount",children:"Received Amount"}),o.jsx(Jo,{id:"receivedAmount",type:"number",step:"0.01",value:m.amountDue,readOnly:!0,className:"bg-gray-100",required:!0})]}),o.jsxs("div",{children:[o.jsx(As,{htmlFor:"payingAmount",children:"Paying Amount"}),o.jsx(Jo,{id:"payingAmount",type:"number",step:"0.01",onChange:M=>{const I=parseFloat(M.target.value)||0;P({...N,payingAmount:I,change:m.amountDue-I})},required:!0})]}),o.jsxs("div",{children:[o.jsx(As,{htmlFor:"change",children:"Change"}),o.jsx(Jo,{id:"change",type:"number",step:"0.01",value:N.change,readOnly:!0,className:"bg-gray-100",required:!0})]}),o.jsxs("div",{children:[o.jsx(As,{htmlFor:"paymentChoice",children:"Payment Method"}),o.jsxs(H0e,{value:N.paymentChoice,onValueChange:M=>P({...N,paymentChoice:M}),children:[o.jsx(v4,{children:o.jsx(W0e,{placeholder:"Select payment method"})}),o.jsxs(b4,{children:[o.jsx(Ou,{value:"CASH",children:"Cash"}),o.jsx(Ou,{value:"BANK",children:"Bank Transfer"}),o.jsx(Ou,{value:"CARD",children:"Card"}),o.jsx(Ou,{value:"CHEQUE",children:"Cheque"})]})]})]}),o.jsxs("div",{children:[o.jsx(As,{htmlFor:"note",children:"Note"}),o.jsx(j4,{id:"note",value:N.note,onChange:M=>P({...N,note:M.target.value})})]}),o.jsxs("div",{className:"pt-4 flex justify-end space-x-4",children:[o.jsx(Cw,{type:"button",variant:"outline",onClick:()=>{h(!1),y(null)},children:"Cancel"}),o.jsx(Cw,{type:"submit",children:"Create Payment"})]})]})]})}),m&&p&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px] max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Payment Details"}),o.jsx("button",{onClick:()=>{g(!1),y(null)},className:"text-gray-500 hover:text-gray-700",children:o.jsx(Lt,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"space-y-4",children:S.map(M=>o.jsx("div",{className:"border p-4 rounded-lg",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Date:"}),o.jsx("p",{className:"font-medium",children:new Date(M.date).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Reference:"}),o.jsx("p",{className:"font-medium",children:M.reference})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Amount:"}),o.jsxs("p",{className:"font-medium",children:["",Number(M.receivedAmount||0).toFixed(2)]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Payment Method:"}),o.jsx("p",{className:"font-medium",children:M.paymentChoice})]}),M.note&&o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Note:"}),o.jsx("p",{className:"font-medium",children:M.note})]})]})},M.id))})]})}),v&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg w-[400px]",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Confirm Delete"}),o.jsx("p",{className:"mb-6",children:"Are you sure you want to delete this purchase?"}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx("button",{onClick:()=>{x(!1),j(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),o.jsx("button",{onClick:C,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},Tj=({isOpen:e,onClose:t,onConfirm:n,title:r,message:i,confirmText:s="Confirm",cancelText:a="Cancel"})=>e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:r}),o.jsx("p",{className:"text-gray-600 mb-6",children:i}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 rounded-lg",children:a}),o.jsx("button",{onClick:()=>{n(),t()},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:s})]})]})}):null,K0e=3e4,Q0e=()=>{const[e,t]=b.useState(!1),[n,r]=b.useState(null),[i,s]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(!1),[d,f]=b.useState(()=>{const O=localStorage.getItem("currentSale");return O?JSON.parse(O):[]});b.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("saleId");L&&(async()=>{try{const te=await pe(`/api/sales/${L}`);if(te.ok){const ue=await te.json();if(ue&&Array.isArray(ue.saleitem)){const Ne=ue.saleitem.map(ke=>({id:ke.product.id,name:ke.product.name,price:Number(ke.price),quantity:Number(ke.quantity),total:Number(ke.price)*Number(ke.quantity),unit:ke.unit,baseUnits:Number(ke.baseUnits)}));f(Ne),ue.customer&&(_(ue.customer),N(ue.customer.name),S("wholesale")),w(!0)}}}catch(te){console.error("Error fetching sale data:",te)}})()},[]);const[h,p]=b.useState([]),[g,m]=b.useState(!1),[y,v]=b.useState(null),[x,w]=b.useState(!1),[j,S]=b.useState(()=>{const O=localStorage.getItem("currentSale"),L=localStorage.getItem("currentPriceType");return O&&L&&JSON.parse(O).length>0&&(L==="retail"||L==="wholesale")?L:"wholesale"}),[k,N]=b.useState(()=>localStorage.getItem("currentCustomerSearch")||""),[P,A]=b.useState(()=>localStorage.getItem("currentCustomerSearch")||""),[C,_]=b.useState(()=>{const O=localStorage.getItem("currentCustomer");return O?JSON.parse(O):null}),[R,z]=b.useState(!1),[M,I]=b.useState(!1),$=b.useRef(null),E=b.useRef(null),T=b.useRef(null),D=b.useRef({}),H=b.useRef(null),F=b.useRef(null),B=St(),[Z,V]=b.useState([]),[G,X]=b.useState(null),[U,ne]=b.useState(()=>{const O=localStorage.getItem("currentPaymentMethod");return O&&(O==="CASH"||O==="CREDIT")?O:"CASH"}),[q,ie]=b.useState(()=>{const O=localStorage.getItem("currentCreditPercentage");return O?Number(O):0}),[re,ee]=b.useState({}),[he,fe]=b.useState(-1),[je,Se]=b.useState(-1);b.useEffect(()=>{localStorage.setItem("currentSale",JSON.stringify(d))},[d]),b.useEffect(()=>{const O=setTimeout(()=>{l(i)},150);return()=>clearTimeout(O)},[i]),b.useEffect(()=>{const O=setTimeout(()=>{A(k)},300);return()=>clearTimeout(O)},[k]),b.useEffect(()=>{if(P.trim()&&k.trim()){const O=!C||C.name.toLowerCase()!==k.toLowerCase().trim();z(O)}else k.trim()||z(!1)},[P,k,C]),b.useEffect(()=>{Se(-1)},[P]);const Ce=b.useMemo(()=>{if(console.log("Filtering products - searchTerm:",a,"products count:",h.length),!a||a.trim().length===0)return console.log("No search term, returning empty array"),[];if(!h||h.length===0)return console.log("No products available, returning empty array"),[];const O=a.toLowerCase().trim(),L=h.filter(te=>!te||!te.name?!1:te.name.toLowerCase().startsWith(O));return console.log("Filtered products:",L.length,"matches for term:",a),L.sort((te,ue)=>te.name.toLowerCase().localeCompare(ue.name.toLowerCase()))},[h,a]);b.useEffect(()=>{fe(-1)},[Ce]),b.useEffect(()=>{h.length>0&&i.trim().length>0&&(console.log("Products loaded and search term exists, showing suggestions"),u(!0))},[h,i]),b.useEffect(()=>{if(he>=0&&H.current){const O=H.current,L=O.children[he];if(L){const Q=O.getBoundingClientRect(),te=L.getBoundingClientRect();te.bottom>Q.bottom?O.scrollTop+=te.bottom-Q.bottom:te.top<Q.top&&(O.scrollTop-=Q.top-te.top)}}},[he]),b.useEffect(()=>{if(je>=0&&F.current){const O=F.current,L=O.children[je];if(L){const Q=O.getBoundingClientRect(),te=L.getBoundingClientRect();te.bottom>Q.bottom?O.scrollTop+=te.bottom-Q.bottom:te.top<Q.top&&(O.scrollTop-=Q.top-te.top)}}},[je]),b.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const L=await pe("/api/products/pos");if(L.ok){const Q=await L.json();console.log("Products fetched successfully:",Q.length,"products"),p(Q)}else L.status===401?B("/login"):console.error("Failed to fetch products:",L.status,L.statusText)}catch(L){console.error("Error fetching products:",L)}})()},[B]),b.useEffect(()=>{(async()=>{try{const L=await pe("/api/customers");if(L.ok){const Q=await L.json();Array.isArray(Q)&&V(Q)}else L.status===401&&B("/login")}catch(L){console.error("Error fetching customers:",L)}})()},[B]),b.useEffect(()=>{var O;(O=T.current)==null||O.focus(),d.length===0&&Ke.displayWelcome().catch(L=>console.error("Failed to initialize VFD display:",L))},[d]),b.useEffect(()=>{localStorage.setItem("currentCustomerSearch",k)},[k]),b.useEffect(()=>{localStorage.setItem("currentPaymentMethod",U)},[U]),b.useEffect(()=>{localStorage.setItem("currentCreditPercentage",q.toString())},[q]),b.useEffect(()=>{localStorage.setItem("currentPriceType",j)},[j]),b.useEffect(()=>{const O=L=>{L.key==="Escape"&&x&&w(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[x]),b.useEffect(()=>{localStorage.setItem("currentCustomer",JSON.stringify(C))},[C]),b.useEffect(()=>{(async()=>{try{const L=await pe("/api/users/me");if(L.ok){const Q=await L.json();X(Q.data.user)}else L.status===401&&B("/login")}catch(L){console.error("Error fetching current user:",L)}})()},[B]);const Oe=b.useCallback(async()=>{try{const O="/api/products/pos",L=new URLSearchParams;if(d.length>0){const Q=d.map(ue=>ue.id).join(",");L.append("ids",Q);const te=await pe(`${O}?${L}`);if(te.status===401){B("/login");return}if(te.ok){const ue=await te.json(),Ne=d.map(ke=>{const be=ue.find(ye=>ye.id===ke.id);return be?be.stock<ke.quantity*ke.baseUnits?`${ke.name}: Only ${Math.floor(be.stock/ke.baseUnits)} ${ke.unit}(s) available`:null:`${ke.name}: Product no longer available`}).filter(Boolean);Ne.length>0&&alert(`Stock has changed:
`+Ne.join(`
`)),p(ke=>ke.map(be=>ue.find(Le=>Le.id===be.id)||be))}}}catch(O){console.error("Error refreshing products:",O)}},[B,d]);b.useEffect(()=>{const O="https://192.168.0.10:5443";console.log("WebSocket connecting to:",O),console.log("Current page protocol:",window.location.protocol),console.log("Environment VITE_SERVER_URL:","https://192.168.0.10:5443"),console.log("Calculated getSocketUrl():",bI());const L=to(O);return L.on("connect",()=>{console.log("WebSocket connected successfully to:",O)}),L.on("connect_error",Q=>{console.error("WebSocket connection error:",Q)}),L.on("stock-update",Q=>{p(te=>te.map(ue=>ue.id===Q.productId?{...ue,stock:Q.newStock,version:Q.version}:ue))}),()=>{L.disconnect()}},[]),b.useEffect(()=>{if(d.length>0){const O=setInterval(Oe,K0e);return()=>clearInterval(O)}},[Oe,d.length]);const se=async(O,L,Q)=>{try{const te=await pe(`/api/products/${O}`);if(!te.ok)throw new Error("Failed to fetch product stock");const ue=await te.json(),Ne=L*Q;return p(ke=>ke.map(be=>be.id===O?{...be,stock:ue.stock,version:ue.version}:be)),Number(ue.stock)>=Ne}catch(te){return console.error("Error checking stock:",te),!1}},K=async O=>{let L=0;const Q=3;for(;L<Q;)try{if(!(G!=null&&G.id))throw new Error("User not authenticated");const te=Date.now().toString(),ue=O.map(ye=>{var Le;return{productId:parseInt(ye.id),quantity:Number(ye.quantity*(ye.baseUnits||1)),version:(Le=h.find(et=>et.id===ye.id))==null?void 0:Le.version}});if(ue.some(ye=>!ye.version))throw new Error("Product version information is missing");const Ne={updates:ue,transactionId:te,userId:G.id},ke=await pe("/api/products/stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)});if(!ke.ok){if(ke.status===401)return B("/login"),!1;const ye=await ke.json();throw new Error(ye.message||"Failed to update stock")}const be=await ke.json();if(!be.success){const ye=be.results.filter(Le=>!Le.success).map(Le=>{const et=O.find(Ve=>parseInt(Ve.id)===Le.productId);return`${(et==null?void 0:et.name)||"Unknown product"}: ${Le.message}${Le.currentStock!==void 0?` (Available: ${Math.floor(Le.currentStock/((et==null?void 0:et.baseUnits)||1))} ${(et==null?void 0:et.unit)||"units"})`:""}`}).join(`
`);throw new Error(`Stock update failed:
${ye}`)}return p(h.map(ye=>{const Le=be.results.find(et=>parseInt(ye.id)===et.productId);return Le?{...ye,stock:Le.newStock??ye.stock,version:Le.version??ye.version}:ye})),!0}catch(te){if(console.error("Stock update error:",te),L===Q-1)throw te;L++,await new Promise(ue=>setTimeout(ue,1e3*L))}return!1},J=O=>{const L=O.target.value;if(L.length<i.length){s(L);const te=L.trim().length>0&&h.length>0;u(te);return}if(L.length>i.length&&h.length>0){if(h.some(ue=>ue.name.toLowerCase().startsWith(L.toLowerCase())))s(L),u(!0);else try{const ue=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwF");ue.volume=.1,ue.play()}catch{console.log("Invalid character blocked")}return}s(L),console.log("Search change - value:",L,"products count:",h.length);const Q=L.trim().length>0&&h.length>0;u(Q),L.trim().length>0&&h.length===0&&(console.log("Search term entered but no products loaded, fetching..."),(async()=>{try{const ue=await pe("/api/products/pos");if(ue.ok){const Ne=await ue.json();console.log("Products loaded from search change:",Ne.length),p(Ne)}}catch(ue){console.error("Error fetching products on search:",ue)}})())},oe=()=>{console.log("Search focus - searchTerm:",i,"products count:",h.length),i.trim().length>0&&h.length>0&&u(!0),h.length===0&&(console.log("No products loaded, attempting to refetch..."),(async()=>{try{const L=await pe("/api/products/pos");if(L.ok){const Q=await L.json();console.log("Refetched products:",Q.length),p(Q),i.trim().length>0&&u(!0)}}catch(L){console.error("Error refetching products:",L)}})())},me=O=>{const L=Li(O),Q=fi(L),te={name:O.baseUnit.name,baseUnits:1,price:Q},ue=d.find(ye=>ye.id===O.id);let Ne,ke=1;if(ue)ke=ue.quantity+1,Ne=d.map(ye=>ye.id===O.id?{...ye,quantity:ke,price:Q,total:ke*Q}:ye);else{const ye={id:O.id,name:O.name,price:Q,quantity:1,total:Q,unit:te.name,baseUnits:te.baseUnits};Ne=[...d,ye]}f(Ne);const be=Ne.reduce((ye,Le)=>ye+Le.total,0);console.log("POS: About to send product to VFD:",{productName:O.name,price:Q,quantity:ke,total:be}),fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:O.name.replace(/[^\x20-\x7E]/g,""),price:Q,quantity:ke,total:be})}).then(ye=>ye.json()).then(ye=>{console.log("POS: VFD proxy response:",ye)}).catch(ye=>{console.error("POS: Failed to update VFD display:",ye)}),u(!1),setTimeout(()=>{s("")},50),setTimeout(()=>{const ye=D.current[O.id];ye&&(ye.focus(),ye.select())},150)},xe=O=>{if(O.key==="Enter"){if(O.preventDefault(),Ce.length>0){const L=he>=0&&he<Ce.length?Ce[he]:Ce[0];me(L)}}else O.key==="Escape"?(u(!1),s(""),fe(-1)):O.key==="ArrowDown"?(O.preventDefault(),Ce.length>0&&fe(L=>L<Ce.length-1?L+1:0)):O.key==="ArrowUp"&&(O.preventDefault(),Ce.length>0&&fe(L=>L>0?L-1:Ce.length-1))},Re=O=>{const L=d.filter(Q=>Q.id!==O);if(f(L),L.length===0&&S("wholesale"),L.length>0){const Q=L.reduce((ue,Ne)=>ue+Ne.total,0),te=L[L.length-1];fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:te.name.replace(/[^\x20-\x7E]/g,""),price:te.price,quantity:te.quantity,total:Q})}).catch(ue=>console.error("Failed to update VFD display:",ue))}else fetch("http://localhost:5001/welcome",{method:"POST",headers:{"Content-Type":"application/json"}}).catch(Q=>console.error("Failed to update VFD display:",Q))},Te=(O,L)=>{ee(Q=>({...Q,[O]:L}))},ge=async(O,L)=>{const Q=parseInt(L,10);if(isNaN(Q)||Q<1){ee(te=>({...te,[O]:""}));return}ee(te=>({...te,[O]:""})),await _e(O,L)},_e=async(O,L)=>{const Q=parseInt(L,10);if(isNaN(Q)||Q<1)return;const te=d.find(ue=>ue.id===O);if(te)try{if(!await se(O,Q,te.baseUnits||1)){const be=h.find(Le=>Le.id===O),ye=be?Math.floor(be.stock/(te.baseUnits||1)):0;if(alert(`Insufficient stock for ${te.name}. Available: ${ye} ${te.unit}(s)`),Q>te.quantity){const Le=d.map(Mt=>Mt.id===O?{...Mt,quantity:ye||1,total:(ye||1)*Number(Mt.price)}:Mt);f(Le);const et=Le.reduce((Mt,Xc)=>Mt+Xc.total,0);h.find(Mt=>Mt.id===O)&&fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:te.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:Number(te.price),quantity:ye||1,total:et})}).catch(Mt=>console.error("Failed to update VFD display:",Mt))}return}const Ne=d.map(be=>be.id===O?{...be,quantity:Q,total:Q*Number(be.price)}:be);f(Ne);const ke=Ne.reduce((be,ye)=>be+ye.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:te.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:Number(te.price),quantity:Q,total:ke})}).catch(be=>console.error("Failed to update VFD display:",be))}catch(ue){console.error("Error updating quantity:",ue),alert("Failed to update quantity: "+(ue instanceof Error?ue.message:"Unknown error"))}},qe=O=>{console.log("Row clicked, displaying VFD info for:",O.name);const L=d.reduce((Q,te)=>Q+te.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:O.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:O.price,quantity:O.quantity,total:L})}).then(Q=>Q.json()).then(Q=>{console.log("POS: VFD proxy response for row click:",Q)}).catch(Q=>{console.error("POS: Failed to update VFD display on row click:",Q)})},Ze=O=>{if(!y)return;const L=d.find(be=>be.id===y);if(!L)return;const Q=h.find(be=>be.id===y);if(!Q)return;const te=O.conversionRate||1,ue=L.quantity*(L.baseUnits||1);if(Q.stock<te){alert(`Insufficient stock. Available: ${Math.floor(Q.stock/te)} ${O.name}(s)`);return}let Ne=Math.floor(ue/te);Ne<1&&Q.stock>=te&&(Ne=1);const ke=fi(Number(O.price));f(d.map(be=>be.id===y?{...be,unit:String(O.name),baseUnits:Number(te),price:ke,quantity:Number(Ne),total:Number(Ne)*ke}:be)),console.log("Updated sale item with new unit:",d.find(be=>be.id===y)),m(!1)},Ue=O=>{const L=h.find(te=>te.id===O);if(!L||!L.baseUnit)return[];const Q=[{name:L.baseUnit.name,baseUnits:1,price:Number(Li(L)),unitId:L.baseUnit.id,conversionRate:1}];return L.productunit&&Array.isArray(L.productunit)&&Q.push(...L.productunit.map(te=>({name:te.unit.name,baseUnits:te.conversionRate,price:Number(te.price),unitId:te.unit.id,conversionRate:te.conversionRate}))),console.log("Available units for product:",O,Q),Q},ut=d.length,Qt=d.reduce((O,L)=>O+L.quantity,0),bt=Number(d.reduce((O,L)=>O+L.total,0).toFixed(2)),Kc=()=>{if(d.length===0){alert("No items to hold");return}if(j==="wholesale"&&!C){alert("Please select a customer for wholesale sales");return}r({title:"Hold Sale",message:"Are you sure you want to hold this sale for later?",onConfirm:Sa}),t(!0)},Sa=async()=>{try{if(d.length===0){alert("No items to hold");return}if(j==="wholesale"&&!C){alert("Please select a customer for wholesale sales");return}const O={customerId:(C==null?void 0:C.id)||null,userId:G==null?void 0:G.id,items:d.map(Q=>({productId:parseInt(Q.id),quantity:Q.quantity,price:Q.price,unit:Q.unit,baseUnits:Q.baseUnits})),totalAmount:d.reduce((Q,te)=>Q+te.total,0),saleType:j.toUpperCase(),status:"held"},L=await pe("/api/held-sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!L.ok){if(L.status===401){B("/login");return}const Q=await L.json();throw new Error(Q.message||"Failed to hold sale")}rr(),alert("Sale held successfully"),Oe()}catch(O){console.error("Error holding sale:",O),alert("Failed to hold sale: "+(O instanceof Error?O.message:"Unknown error"))}},Qc=()=>{if(d.length===0){alert("No items to save");return}if(j==="wholesale"&&!C){alert("Please select a customer for wholesale sales");return}r({title:"Complete Sale",message:"Are you sure you want to complete this sale?",onConfirm:Gc}),t(!0)},Gc=async()=>{try{if(d.length===0){alert("No items to save");return}if(j==="wholesale"&&!C){alert("Please select a customer for wholesale sales");return}const O=d.reduce((Ne,ke)=>Ne+ke.total,0);if(typeof O!="number"||O<=0)throw new Error("Invalid total amount");if(!await K(d))return;const Q={...j==="wholesale"&&{customerId:C==null?void 0:C.id},userId:G==null?void 0:G.id,items:d.map(Ne=>({productId:parseInt(Ne.id),quantity:Number(Ne.quantity),price:Number(Ne.price),unit:String(Ne.unit),baseUnits:Number(Ne.baseUnits)})),totalAmount:Number(bt),paymentMethod:U,saleType:j.toUpperCase(),isCreditSale:U==="CREDIT",creditPercentage:U==="CREDIT"?Number(q):null,status:"completed"},te=await pe("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!te.ok){if(te.status===401){B("/login");return}const Ne=await te.json();throw new Error(Ne.message||"Failed to save sale")}const ue=await te.json();console.log("Sale saved successfully:",ue),Ke.displayTotal(bt).catch(Ne=>console.error("Failed to update VFD display:",Ne)),setTimeout(()=>{rr()},2e3),alert("Sale completed and saved successfully"),setTimeout(()=>{window.location.reload()},2e3)}catch(O){console.error("Error completing sale:",O),O instanceof Error&&O.message.includes("Stock update failed:")?alert(O.message):alert("Failed to complete sale: "+(O instanceof Error?O.message:"Unknown error"))}},Ns=async O=>{try{if(d.length===0){alert("No items to print");return}if(j==="wholesale"&&!C){alert("Please select a customer for wholesale sales");return}if(!await K(d))return;const Q={...j==="wholesale"&&{customerId:C==null?void 0:C.id},userId:G==null?void 0:G.id,items:d.map(Ve=>({productId:parseInt(Ve.id),quantity:Number(Ve.quantity),price:Number(Ve.price),unit:String(Ve.unit),baseUnits:Number(Ve.baseUnits)})),totalAmount:Number(bt),paymentMethod:U,saleType:j.toUpperCase(),isCreditSale:U==="CREDIT",creditPercentage:U==="CREDIT"?Number(q):null,status:"completed"},te=await pe("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!te.ok){if(te.status===401){B("/login");return}const Ve=await te.json();throw new Error(Ve.message||"Failed to save sale")}const ue=await te.json();console.log("Sale saved successfully:",ue),Ke.displayTotal(bt).catch(Ve=>console.error("Failed to update VFD display:",Ve));const Ne={type:O,items:d.map(Ve=>({id:Ve.id,name:Ve.name,price:Number(Ve.price),quantity:Number(Ve.quantity),total:Number(Ve.total),unit:Ve.unit})),totalAmount:Number(bt),totalItems:Number(Qt),customer:j==="wholesale"&&C||void 0,paymentMethod:U,creditPercentage:U==="CREDIT"?Number(q):0,baseTotal:U==="CREDIT"&&q>0?Number((bt/(1+q/100)).toFixed(2)):void 0,saleId:ue.id},ke=O==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",be=localStorage.getItem(ke)||void 0;let ye=!1;const Le={...Ne,salesperson:G?{name:G.name}:void 0};if((localStorage.getItem("qz.printMode")==="browser"?"browser":"silent")==="silent"&&be)try{ye=O==="invoice"?await Ro(Le,be):await Mo(Le,be)}catch(Ve){console.warn("Silent QZ printing failed, falling back:",Ve),ye=!1}ye||await hs(Le),rr(),alert("Sale completed and printed successfully")}catch(L){console.error("Error during print process:",L),alert("Failed to complete print process: "+(L instanceof Error?L.message:"Unknown error"))}},ja=()=>{if(d.length===0){rr();return}r({title:"Clear Sale",message:"Are you sure you want to clear all items? This action cannot be undone.",onConfirm:rr}),t(!0)},rr=()=>{f([]),_(null),N(""),s(""),m(!1),v(null),w(!1),ie(0),S("wholesale"),localStorage.removeItem("currentSale"),localStorage.removeItem("currentCustomer"),localStorage.removeItem("currentCustomerSearch"),localStorage.removeItem("currentPriceType"),Ke.displayWelcome().catch(O=>console.error("Failed to update VFD display:",O)),T.current&&T.current.focus()};b.useEffect(()=>{const O=L=>{setTimeout(()=>{$.current&&!$.current.contains(L.target)&&u(!1)},100)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const Li=O=>{if(j==="wholesale")return Number(O.wholesalePrice);{const L=Number(O.retailPrice);return L===0?Math.ceil(Number(O.wholesalePrice)*1.2):L}},fi=O=>U==="CREDIT"&&q>0?Number((O+O*q/100).toFixed(2)):O,Rt=Z.filter(O=>O.name.toLowerCase().includes(P.toLowerCase().trim())),jr=O=>{const L=O.target.value;if(N(L),C&&C.name.toLowerCase()!==L.toLowerCase().trim()&&_(null),L.trim()){const Q=!C||C.name.toLowerCase()!==L.toLowerCase().trim();z(Q)}else z(!1)},Na=O=>{_(O),z(!1),Se(-1),setTimeout(()=>{N(O.name)},50),setTimeout(()=>{var L;(L=T.current)==null||L.focus()},100)},Lo=O=>{var L;if(O.key==="Enter")if(O.preventDefault(),Rt.length>0){const Q=je>=0&&je<Rt.length?Rt[je]:Rt[0];Na(Q)}else(L=T.current)==null||L.focus();else O.key==="Escape"?(z(!1),Se(-1)):O.key==="ArrowDown"?(O.preventDefault(),Rt.length>0&&Se(Q=>Q<Rt.length-1?Q+1:0)):O.key==="ArrowUp"&&(O.preventDefault(),Rt.length>0&&Se(Q=>Q>0?Q-1:Rt.length-1))};b.useEffect(()=>{const O=L=>{setTimeout(()=>{E.current&&!E.current.contains(L.target)&&z(!1)},100)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const Yc=async()=>{if(!k.trim()){alert("Please enter a customer name");return}try{I(!0);const O=await pe("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k.trim()})});if(!O.ok){if(O.status===401){B("/login");return}throw new Error("Failed to add customer")}const L=await O.json();V(Q=>[...Q,L]),_(L),N(""),z(!1),alert("Customer added successfully")}catch(O){console.error("Error adding customer:",O),alert("Failed to add customer: "+(O instanceof Error?O.message:"Unknown error"))}finally{I(!1)}};return b.useEffect(()=>{if(d.length>0){const O=d.map(Q=>{var ke;const te=h.find(be=>be.id===Q.id);if(!te)return Q;let ue;if(j==="wholesale")ue=Number(te.wholesalePrice);else{const be=Number(te.retailPrice);be===0?ue=Math.ceil(Number(te.wholesalePrice)*1.2):ue=be}if(Q.baseUnits!==1){const be=(ke=te.productunit)==null?void 0:ke.find(ye=>Math.abs(ye.conversionRate-Q.baseUnits)<.01);be&&(ue=Number(be.price))}let Ne=ue;return U==="CREDIT"&&q>0&&(Ne=Number((ue+ue*q/100).toFixed(2))),{...Q,price:Ne,total:Q.quantity*Ne}});O.some((Q,te)=>Math.abs(Q.price-d[te].price)>.01)&&f(O)}},[U,q,j]),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Point of Sale"}),o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("select",{value:j,onChange:O=>S(O.target.value),className:"px-8 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-200 disabled:cursor-not-allowed",disabled:d.length>0,children:[o.jsx("option",{value:"wholesale",children:"Wholesale Price"}),o.jsx("option",{value:"retail",children:"Retail Price"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[o.jsxs("div",{ref:E,className:"relative",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex-1 flex gap-2",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search customers...",value:k,onChange:jr,onKeyDown:Lo}),R&&P&&o.jsx("div",{ref:F,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:Rt.map((O,L)=>o.jsxs("div",{className:`px-4 py-2 cursor-pointer flex justify-between items-center transition-colors ${L===je?"bg-blue-100 dark:bg-blue-900/40":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>Na(O),children:[o.jsx("span",{children:O.name}),o.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:O.phone||"No phone"})]},O.id))})]}),o.jsx("button",{onClick:Yc,disabled:M||!k.trim(),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center",children:M?o.jsx(An,{className:"w-5 h-5 animate-spin"}):o.jsx(Hn,{className:"w-5 h-5"})})]}),C&&o.jsx("button",{onClick:()=>{_(null),N("")},className:"px-3 py-2 text-red-500 hover:text-red-700 focus:outline-none",children:o.jsx(Lt,{className:"w-5 h-5"})})]}),C&&o.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",C.name,C.phone&&`  ${C.phone}`,C.email&&`  ${C.email}`]})]}),o.jsx("div",{ref:$,className:"relative",children:o.jsx("div",{className:"flex gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"text",ref:T,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search products...",value:i,onChange:J,onFocus:oe,onKeyDown:xe}),c&&i.trim().length>0&&Ce.length>0&&o.jsx("div",{ref:H,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:Ce.map((O,L)=>o.jsxs("div",{className:`px-4 py-2 cursor-pointer flex justify-between items-center transition-colors ${L===he?"bg-blue-100 dark:bg-blue-900/40":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>me(O),children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-base font-medium",children:O.name}),o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 flex items-center gap-2",children:[o.jsxs("span",{children:["",fi(Li(O)).toFixed(2)]}),U==="CREDIT"&&q>0&&o.jsxs("span",{className:"text-red-500 text-xs",children:["+",q,"%"]}),O.description&&o.jsxs("span",{className:"text-gray-500",children:[" ",O.description]})]})]}),o.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Stock: ",O.stock]})]},O.id))})]})})}),"        ",o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(O=>o.jsxs("tr",{onClick:()=>qe(O),className:"hover:bg-gray-50 cursor-pointer",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.name}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                      ",o.jsx("button",{onClick:L=>{L.stopPropagation(),v(O.id),m(!0)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:O.unit})]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",Number(O.price).toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:["                        ",o.jsx("button",{onClick:L=>{L.stopPropagation(),_e(O.id,(O.quantity-1).toString())},className:"p-1 rounded-md hover:bg-gray-100",children:o.jsx(V1,{className:"w-4 h-4"})}),o.jsx("input",{ref:L=>{D.current[O.id]=L},type:"number",min:"0",step:"1",value:re[O.id]||"",placeholder:O.quantity.toString(),onChange:L=>Te(O.id,L.target.value),onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),ge(O.id,L.currentTarget.value),L.currentTarget.blur())},onBlur:L=>{L.target.value!==""?ge(O.id,L.target.value):ee(Q=>({...Q,[O.id]:""}))},onClick:L=>L.stopPropagation(),className:"w-16 px-2 py-1 text-center border rounded-md"}),"                        ",o.jsx("button",{onClick:L=>{L.stopPropagation(),_e(O.id,(O.quantity+1).toString())},className:"p-1 rounded-md hover:bg-gray-100",children:o.jsx(Hn,{className:"w-4 h-4"})})]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",Number(O.total).toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:L=>{L.stopPropagation(),Re(O.id)},className:"text-red-500 hover:text-red-700",children:o.jsx(Rn,{className:"w-4 h-4"})})})]},O.id))})]})})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Number of Items:"}),o.jsx("span",{className:"font-medium",children:ut})]}),o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),o.jsx("span",{className:"font-medium",children:Qt})]}),o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),o.jsxs("span",{className:"font-medium",children:["",bt.toFixed(2)]})]}),o.jsx("div",{className:"border-t pt-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-gray-700 font-medium",children:"Payment Method:"}),o.jsxs("select",{value:U,onChange:O=>ne(O.target.value),disabled:d.length>0,className:`px-8 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ${d.length>0?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`,children:[o.jsx("option",{value:"CASH",children:"Cash"}),o.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),U==="CREDIT"&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-gray-700 font-medium",children:"Credit Surcharge (%):"}),o.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:q,onChange:O=>ie(Number(O.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-right",placeholder:"0"})]}),U==="CREDIT"&&q>0&&o.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[o.jsxs("span",{children:["Credit Surcharge (",q,"%):"]}),o.jsxs("span",{children:["+",(bt*q/100).toFixed(2)]})]})]})}),o.jsxs("div",{className:"flex justify-between items-center text-xl font-semibold border-t pt-4",children:[o.jsx("span",{children:"Final Total:"}),o.jsxs("span",{className:U==="CREDIT"&&q>0?"text-blue-600":"",children:["",bt.toFixed(2)]})]}),o.jsxs("div",{className:"mt-4 flex justify-end space-x-4",children:[o.jsx("button",{onClick:ja,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear"}),o.jsxs("button",{onClick:Kc,className:"px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 flex items-center",children:[o.jsx(qg,{className:"w-4 h-4 mr-2"}),"Hold Sale"]}),o.jsxs("button",{onClick:Qc,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:[o.jsx(No,{className:"w-4 h-4 mr-2"}),"Save Sale"]}),"              ",o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>w(!x),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[o.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Print Sale"]}),x&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>w(!1)}),o.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-52 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:o.jsxs("div",{className:"py-2",children:[o.jsxs("button",{onClick:()=>{Ns("invoice"),w(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[o.jsx(sa,{className:"w-4 h-4 mr-3 text-blue-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Print Invoice (A5)"})]}),o.jsxs("button",{onClick:()=>{Ns("receipt"),w(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[o.jsx(aa,{className:"w-4 h-4 mr-3 text-green-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Print Receipt"})]})]})})]})]})]})]})})]}),o.jsx(Vy,{isOpen:g,onClose:()=>m(!1),onSelect:Ze,units:y?Ue(y):[]}),o.jsx(Tj,{isOpen:e,onClose:()=>t(!1),onConfirm:()=>{n&&(n.onConfirm(),t(!1))},title:(n==null?void 0:n.title)||"",message:(n==null?void 0:n.message)||""})]})},G0e=3e4,Y0e=()=>{const[e,t]=b.useState(!1),[n,r]=b.useState(null),[i,s]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(!1),[d,f]=b.useState(()=>{const O=localStorage.getItem("currentSale2");return O?JSON.parse(O):[]});b.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("saleId");L&&(async()=>{try{const te=await pe(`/api/sales/${L}`);if(te.ok){const ue=await te.json();if(ue&&Array.isArray(ue.saleitem)){const Ne=ue.saleitem.map(ke=>({id:ke.product.id,name:ke.product.name,price:Number(ke.price),quantity:Number(ke.quantity),total:Number(ke.price)*Number(ke.quantity),unit:ke.unit,baseUnits:Number(ke.baseUnits)}));f(Ne),ue.customer&&(_(ue.customer),N(ue.customer.name),S("wholesale")),w(!0)}}}catch(te){console.error("Error fetching sale data:",te)}})()},[]);const[h,p]=b.useState([]),[g,m]=b.useState(!1),[y,v]=b.useState(null),[x,w]=b.useState(!1),[j,S]=b.useState(()=>{const O=localStorage.getItem("currentSale2"),L=localStorage.getItem("currentPriceType2");return O&&L&&JSON.parse(O).length>0&&(L==="retail"||L==="wholesale")?L:"wholesale"}),[k,N]=b.useState(()=>localStorage.getItem("currentCustomerSearch2")||""),[P,A]=b.useState(()=>localStorage.getItem("currentCustomerSearch2")||""),[C,_]=b.useState(()=>{const O=localStorage.getItem("currentCustomer2");return O?JSON.parse(O):null}),[R,z]=b.useState(!1),[M,I]=b.useState(!1),$=b.useRef(null),E=b.useRef(null),T=b.useRef(null),D=b.useRef({}),H=b.useRef(null),F=b.useRef(null),B=St(),[Z,V]=b.useState([]),[G,X]=b.useState(null),[U,ne]=b.useState(()=>{const O=localStorage.getItem("currentPaymentMethod2");return O&&(O==="CASH"||O==="CREDIT")?O:"CASH"}),[q,ie]=b.useState(()=>{const O=localStorage.getItem("currentCreditPercentage2");return O?Number(O):0}),[re,ee]=b.useState({}),[he,fe]=b.useState(-1),[je,Se]=b.useState(-1);b.useEffect(()=>{localStorage.setItem("currentSale2",JSON.stringify(d))},[d]),b.useEffect(()=>{const O=setTimeout(()=>{l(i)},150);return()=>clearTimeout(O)},[i]),b.useEffect(()=>{const O=setTimeout(()=>{A(k)},300);return()=>clearTimeout(O)},[k]),b.useEffect(()=>{if(P.trim()&&k.trim()){const O=!C||C.name.toLowerCase()!==k.toLowerCase().trim();z(O)}else k.trim()||z(!1)},[P,k,C]),b.useEffect(()=>{Se(-1)},[P]);const Ce=b.useMemo(()=>{if(console.log("Filtering products - searchTerm:",a,"products count:",h.length),!a||a.trim().length===0)return console.log("No search term, returning empty array"),[];if(!h||h.length===0)return console.log("No products available, returning empty array"),[];const O=a.toLowerCase().trim(),L=h.filter(te=>!te||!te.name?!1:te.name.toLowerCase().startsWith(O));return console.log("Filtered products:",L.length,"matches for term:",a),L.sort((te,ue)=>te.name.toLowerCase().localeCompare(ue.name.toLowerCase()))},[h,a]);b.useEffect(()=>{fe(-1)},[Ce]),b.useEffect(()=>{h.length>0&&i.trim().length>0&&(console.log("Products loaded and search term exists, showing suggestions"),u(!0))},[h,i]),b.useEffect(()=>{if(he>=0&&H.current){const O=H.current,L=O.children[he];if(L){const Q=O.getBoundingClientRect(),te=L.getBoundingClientRect();te.bottom>Q.bottom?O.scrollTop+=te.bottom-Q.bottom:te.top<Q.top&&(O.scrollTop-=Q.top-te.top)}}},[he]),b.useEffect(()=>{if(je>=0&&F.current){const O=F.current,L=O.children[je];if(L){const Q=O.getBoundingClientRect(),te=L.getBoundingClientRect();te.bottom>Q.bottom?O.scrollTop+=te.bottom-Q.bottom:te.top<Q.top&&(O.scrollTop-=Q.top-te.top)}}},[je]),b.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const L=await pe("/api/products/pos");if(L.ok){const Q=await L.json();console.log("Products fetched successfully:",Q.length,"products"),p(Q)}else L.status===401?B("/login"):console.error("Failed to fetch products:",L.status,L.statusText)}catch(L){console.error("Error fetching products:",L)}})()},[B]),b.useEffect(()=>{(async()=>{try{const L=await pe("/api/customers");if(L.ok){const Q=await L.json();Array.isArray(Q)&&V(Q)}else L.status===401&&B("/login")}catch(L){console.error("Error fetching customers:",L)}})()},[B]),b.useEffect(()=>{var O;(O=T.current)==null||O.focus(),d.length===0&&Ke.displayWelcome().catch(L=>console.error("Failed to initialize VFD display:",L))},[d]),b.useEffect(()=>{localStorage.setItem("currentCustomerSearch2",k)},[k]),b.useEffect(()=>{localStorage.setItem("currentPaymentMethod2",U)},[U]),b.useEffect(()=>{localStorage.setItem("currentCreditPercentage2",q.toString())},[q]),b.useEffect(()=>{localStorage.setItem("currentPriceType2",j)},[j]),b.useEffect(()=>{const O=L=>{L.key==="Escape"&&x&&w(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[x]),b.useEffect(()=>{localStorage.setItem("currentCustomer2",JSON.stringify(C))},[C]),b.useEffect(()=>{(async()=>{try{const L=await pe("/api/users/me");if(L.ok){const Q=await L.json();X(Q.data.user)}else L.status===401&&B("/login")}catch(L){console.error("Error fetching current user:",L)}})()},[B]);const Oe=b.useCallback(async()=>{try{const O="/api/products/pos",L=new URLSearchParams;if(d.length>0){const Q=d.map(ue=>ue.id).join(",");L.append("ids",Q);const te=await pe(`${O}?${L}`);if(te.status===401){B("/login");return}if(te.ok){const ue=await te.json(),Ne=d.map(ke=>{const be=ue.find(ye=>ye.id===ke.id);return be?be.stock<ke.quantity*ke.baseUnits?`${ke.name}: Only ${Math.floor(be.stock/ke.baseUnits)} ${ke.unit}(s) available`:null:`${ke.name}: Product no longer available`}).filter(Boolean);Ne.length>0&&alert(`Stock has changed:
`+Ne.join(`
`)),p(ke=>ke.map(be=>ue.find(Le=>Le.id===be.id)||be))}}}catch(O){console.error("Error refreshing products:",O)}},[B,d]);b.useEffect(()=>{const L=to("https://192.168.0.10:5443");return L.on("stock-update",Q=>{p(te=>te.map(ue=>ue.id===Q.productId?{...ue,stock:Q.newStock,version:Q.version}:ue))}),()=>{L.disconnect()}},[]),b.useEffect(()=>{if(d.length>0){const O=setInterval(Oe,G0e);return()=>clearInterval(O)}},[Oe,d.length]);const se=async(O,L,Q)=>{try{const te=await pe(`/api/products/${O}`);if(!te.ok)throw new Error("Failed to fetch product stock");const ue=await te.json(),Ne=L*Q;return p(ke=>ke.map(be=>be.id===O?{...be,stock:ue.stock,version:ue.version}:be)),Number(ue.stock)>=Ne}catch(te){return console.error("Error checking stock:",te),!1}},K=async O=>{let L=0;const Q=3;for(;L<Q;)try{if(!(G!=null&&G.id))throw new Error("User not authenticated");const te=Date.now().toString(),ue=O.map(ye=>{var Le;return{productId:parseInt(ye.id),quantity:Number(ye.quantity*(ye.baseUnits||1)),version:(Le=h.find(et=>et.id===ye.id))==null?void 0:Le.version}});if(ue.some(ye=>!ye.version))throw new Error("Product version information is missing");const Ne={updates:ue,transactionId:te,userId:G.id},ke=await pe("/api/products/stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)});if(!ke.ok){if(ke.status===401)return B("/login"),!1;const ye=await ke.json();throw new Error(ye.message||"Failed to update stock")}const be=await ke.json();if(!be.success){const ye=be.results.filter(Le=>!Le.success).map(Le=>{const et=O.find(Ve=>parseInt(Ve.id)===Le.productId);return`${(et==null?void 0:et.name)||"Unknown product"}: ${Le.message}${Le.currentStock!==void 0?` (Available: ${Math.floor(Le.currentStock/((et==null?void 0:et.baseUnits)||1))} ${(et==null?void 0:et.unit)||"units"})`:""}`}).join(`
`);throw new Error(`Stock update failed:
${ye}`)}return p(h.map(ye=>{const Le=be.results.find(et=>parseInt(ye.id)===et.productId);return Le?{...ye,stock:Le.newStock??ye.stock,version:Le.version??ye.version}:ye})),!0}catch(te){if(console.error("Stock update error:",te),L===Q-1)throw te;L++,await new Promise(ue=>setTimeout(ue,1e3*L))}return!1},J=O=>{const L=O.target.value;if(L.length<i.length){s(L);const te=L.trim().length>0&&h.length>0;u(te);return}if(L.length>i.length&&h.length>0){if(h.some(ue=>ue.name.toLowerCase().startsWith(L.toLowerCase())))s(L),u(!0);else try{const ue=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwF");ue.volume=.1,ue.play()}catch{console.log("Invalid character blocked")}return}s(L),console.log("Search change - value:",L,"products count:",h.length);const Q=L.trim().length>0&&h.length>0;u(Q),L.trim().length>0&&h.length===0&&(console.log("Search term entered but no products loaded, fetching..."),(async()=>{try{const ue=await pe("/api/products/pos");if(ue.ok){const Ne=await ue.json();console.log("Products loaded from search change:",Ne.length),p(Ne)}}catch(ue){console.error("Error fetching products on search:",ue)}})())},oe=()=>{console.log("Search focus - searchTerm:",i,"products count:",h.length),i.trim().length>0&&h.length>0&&u(!0),h.length===0&&(console.log("No products loaded, attempting to refetch..."),(async()=>{try{const L=await pe("/api/products/pos");if(L.ok){const Q=await L.json();console.log("Refetched products:",Q.length),p(Q),i.trim().length>0&&u(!0)}}catch(L){console.error("Error refetching products:",L)}})())},me=O=>{const L=Li(O),Q=fi(L),te={name:O.baseUnit.name,baseUnits:1,price:Q},ue=d.find(ye=>ye.id===O.id);let Ne,ke=1;if(ue)ke=ue.quantity+1,Ne=d.map(ye=>ye.id===O.id?{...ye,quantity:ke,price:Q,total:ke*Q}:ye);else{const ye={id:O.id,name:O.name,price:Q,quantity:1,total:Q,unit:te.name,baseUnits:te.baseUnits};Ne=[...d,ye]}f(Ne);const be=Ne.reduce((ye,Le)=>ye+Le.total,0);console.log("POS2: About to send product to VFD:",{productName:O.name,price:Q,total:be,quantity:ke}),fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:O.name.replace(/[^\x20-\x7E]/g,""),price:Q,total:be})}).then(ye=>ye.json()).then(ye=>{console.log("POS2: VFD proxy response:",ye)}).catch(ye=>{console.error("POS2: Failed to update VFD display:",ye)}),u(!1),setTimeout(()=>{s("")},50),setTimeout(()=>{const ye=D.current[O.id];ye&&(ye.focus(),ye.select())},150)},xe=O=>{if(O.key==="Enter"){if(O.preventDefault(),Ce.length>0){const L=he>=0&&he<Ce.length?Ce[he]:Ce[0];me(L)}}else O.key==="Escape"?(u(!1),s(""),fe(-1)):O.key==="ArrowDown"?(O.preventDefault(),Ce.length>0&&fe(L=>L<Ce.length-1?L+1:0)):O.key==="ArrowUp"&&(O.preventDefault(),Ce.length>0&&fe(L=>L>0?L-1:Ce.length-1))},Re=O=>{const L=d.filter(Q=>Q.id!==O);if(f(L),L.length===0&&S("wholesale"),L.length>0){const Q=L.reduce((ue,Ne)=>ue+Ne.total,0),te=L[L.length-1];fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:te.name.replace(/[^\x20-\x7E]/g,""),price:te.price,total:Q,quantity:te.quantity})}).catch(ue=>console.error("Failed to update VFD display:",ue))}else fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:["Welcome to","APEX TECHNOLOGY","Point of Sale"]})}).catch(Q=>console.error("Failed to update VFD display:",Q))},Te=(O,L)=>{ee(Q=>({...Q,[O]:L}))},ge=async(O,L)=>{const Q=parseInt(L,10);if(isNaN(Q)||Q<1){ee(te=>({...te,[O]:""}));return}ee(te=>({...te,[O]:""})),await _e(O,L)},_e=async(O,L)=>{const Q=parseInt(L,10);if(isNaN(Q)||Q<1)return;const te=d.find(ue=>ue.id===O);if(te)try{if(!await se(O,Q,te.baseUnits||1)){const be=h.find(Le=>Le.id===O),ye=be?Math.floor(be.stock/(te.baseUnits||1)):0;if(alert(`Insufficient stock for ${te.name}. Available: ${ye} ${te.unit}(s)`),Q>te.quantity){const Le=d.map(Mt=>Mt.id===O?{...Mt,quantity:ye||1,total:(ye||1)*Number(Mt.price)}:Mt);f(Le);const et=Le.reduce((Mt,Xc)=>Mt+Xc.total,0);h.find(Mt=>Mt.id===O)&&fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:te.name.replace(/[^\x20-\x7E]/g,""),price:Number(te.price),total:et,quantity:ye||1})}).catch(Mt=>console.error("Failed to update VFD display:",Mt))}return}const Ne=d.map(be=>be.id===O?{...be,quantity:Q,total:Q*Number(be.price)}:be);f(Ne);const ke=Ne.reduce((be,ye)=>be+ye.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:te.name.replace(/[^\x20-\x7E]/g,""),price:Number(te.price),total:ke,quantity:Q})}).catch(be=>console.error("Failed to update VFD display:",be))}catch(ue){console.error("Error updating quantity:",ue),alert("Failed to update quantity: "+(ue instanceof Error?ue.message:"Unknown error"))}},qe=O=>{console.log("Row clicked, displaying VFD info for:",O.name);const L=d.reduce((Q,te)=>Q+te.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:O.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:O.price,quantity:O.quantity,total:L})}).then(Q=>Q.json()).then(Q=>{console.log("POS2: VFD proxy response for row click:",Q)}).catch(Q=>{console.error("POS2: Failed to update VFD display on row click:",Q)})},Ze=O=>{if(!y)return;const L=d.find(be=>be.id===y);if(!L)return;const Q=h.find(be=>be.id===y);if(!Q)return;const te=O.conversionRate||1,ue=L.quantity*(L.baseUnits||1);if(Q.stock<te){alert(`Insufficient stock. Available: ${Math.floor(Q.stock/te)} ${O.name}(s)`);return}let Ne=Math.floor(ue/te);Ne<1&&Q.stock>=te&&(Ne=1);const ke=fi(Number(O.price));f(d.map(be=>be.id===y?{...be,unit:String(O.name),baseUnits:Number(te),price:ke,quantity:Number(Ne),total:Number(Ne)*ke}:be)),console.log("Updated sale item with new unit:",d.find(be=>be.id===y)),m(!1)},Ue=O=>{const L=h.find(te=>te.id===O);if(!L||!L.baseUnit)return[];const Q=[{name:L.baseUnit.name,baseUnits:1,price:Number(Li(L)),unitId:L.baseUnit.id,conversionRate:1}];return L.productunit&&Array.isArray(L.productunit)&&Q.push(...L.productunit.map(te=>({name:te.unit.name,baseUnits:te.conversionRate,price:Number(te.price),unitId:te.unit.id,conversionRate:te.conversionRate}))),console.log("Available units for product:",O,Q),Q},ut=d.length,Qt=d.reduce((O,L)=>O+L.quantity,0),bt=Number(d.reduce((O,L)=>O+L.total,0).toFixed(2)),Kc=()=>{if(d.length===0){alert("No items to hold");return}if(j==="wholesale"&&!C){alert("Please select a customer for wholesale sales");return}r({title:"Hold Sale",message:"Are you sure you want to hold this sale for later?",onConfirm:Sa}),t(!0)},Sa=async()=>{try{if(d.length===0){alert("No items to hold");return}if(j==="wholesale"&&!C){alert("Please select a customer for wholesale sales");return}const O={customerId:(C==null?void 0:C.id)||null,userId:G==null?void 0:G.id,items:d.map(Q=>({productId:parseInt(Q.id),quantity:Q.quantity,price:Q.price,unit:Q.unit,baseUnits:Q.baseUnits})),totalAmount:d.reduce((Q,te)=>Q+te.total,0),saleType:j.toUpperCase(),status:"held"},L=await pe("/api/held-sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!L.ok){if(L.status===401){B("/login");return}const Q=await L.json();throw new Error(Q.message||"Failed to hold sale")}rr(),alert("Sale held successfully"),Oe()}catch(O){console.error("Error holding sale:",O),alert("Failed to hold sale: "+(O instanceof Error?O.message:"Unknown error"))}},Qc=()=>{if(d.length===0){alert("No items to save");return}if(j==="wholesale"&&!C){alert("Please select a customer for wholesale sales");return}r({title:"Complete Sale",message:"Are you sure you want to complete this sale?",onConfirm:Gc}),t(!0)},Gc=async()=>{try{if(d.length===0){alert("No items to save");return}if(j==="wholesale"&&!C){alert("Please select a customer for wholesale sales");return}const O=d.reduce((Ne,ke)=>Ne+ke.total,0);if(typeof O!="number"||O<=0)throw new Error("Invalid total amount");if(!await K(d))return;const Q={...j==="wholesale"&&{customerId:C==null?void 0:C.id},userId:G==null?void 0:G.id,items:d.map(Ne=>({productId:parseInt(Ne.id),quantity:Number(Ne.quantity),price:Number(Ne.price),unit:String(Ne.unit),baseUnits:Number(Ne.baseUnits)})),totalAmount:Number(bt),paymentMethod:U,saleType:j.toUpperCase(),isCreditSale:U==="CREDIT",creditPercentage:U==="CREDIT"?Number(q):null,status:"completed"},te=await pe("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!te.ok){if(te.status===401){B("/login");return}const Ne=await te.json();throw new Error(Ne.message||"Failed to save sale")}const ue=await te.json();console.log("Sale saved successfully:",ue),Ke.displayTotal(bt).catch(Ne=>console.error("Failed to update VFD display:",Ne)),setTimeout(()=>{rr()},2e3),alert("Sale completed and saved successfully"),setTimeout(()=>{window.location.reload()},2e3)}catch(O){console.error("Error completing sale:",O),O instanceof Error&&O.message.includes("Stock update failed:")?alert(O.message):alert("Failed to complete sale: "+(O instanceof Error?O.message:"Unknown error"))}},Ns=async O=>{try{if(d.length===0){alert("No items to print");return}if(j==="wholesale"&&!C){alert("Please select a customer for wholesale sales");return}if(!await K(d))return;const Q={...j==="wholesale"&&{customerId:C==null?void 0:C.id},userId:G==null?void 0:G.id,items:d.map(Ve=>({productId:parseInt(Ve.id),quantity:Number(Ve.quantity),price:Number(Ve.price),unit:String(Ve.unit),baseUnits:Number(Ve.baseUnits)})),totalAmount:Number(bt),paymentMethod:U,saleType:j.toUpperCase(),isCreditSale:U==="CREDIT",creditPercentage:U==="CREDIT"?Number(q):null,status:"completed"},te=await pe("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!te.ok){if(te.status===401){B("/login");return}const Ve=await te.json();throw new Error(Ve.message||"Failed to save sale")}const ue=await te.json();console.log("Sale saved successfully:",ue),Ke.displayTotal(bt).catch(Ve=>console.error("Failed to update VFD display:",Ve));const Ne={type:O,items:d.map(Ve=>({id:Ve.id,name:Ve.name,price:Number(Ve.price),quantity:Number(Ve.quantity),total:Number(Ve.total),unit:Ve.unit})),totalAmount:Number(bt),totalItems:Number(Qt),customer:j==="wholesale"&&C||void 0,paymentMethod:U,creditPercentage:U==="CREDIT"?Number(q):0,baseTotal:U==="CREDIT"&&q>0?Number((bt/(1+q/100)).toFixed(2)):void 0,saleId:ue.id},ke=O==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",be=localStorage.getItem(ke)||void 0;let ye=!1;const Le={...Ne,salesperson:G?{name:G.name}:void 0};if((localStorage.getItem("qz.printMode")==="browser"?"browser":"silent")==="silent"&&be)try{ye=O==="invoice"?await Ro(Le,be):await Mo(Le,be)}catch(Ve){console.warn("Silent QZ printing failed, falling back:",Ve),ye=!1}ye||await hs(Le),rr(),alert("Sale completed and printed successfully")}catch(L){console.error("Error during print process:",L),alert("Failed to complete print process: "+(L instanceof Error?L.message:"Unknown error"))}},ja=()=>{if(d.length===0){rr();return}r({title:"Clear Sale",message:"Are you sure you want to clear all items? This action cannot be undone.",onConfirm:rr}),t(!0)},rr=()=>{f([]),_(null),N(""),s(""),m(!1),v(null),w(!1),ie(0),S("wholesale"),localStorage.removeItem("currentSale2"),localStorage.removeItem("currentCustomer2"),localStorage.removeItem("currentCustomerSearch2"),localStorage.removeItem("currentPriceType2"),Ke.displayWelcome().catch(O=>console.error("Failed to update VFD display:",O)),T.current&&T.current.focus()};b.useEffect(()=>{const O=L=>{setTimeout(()=>{$.current&&!$.current.contains(L.target)&&u(!1)},100)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const Li=O=>{if(j==="wholesale")return Number(O.wholesalePrice);{const L=Number(O.retailPrice);return L===0?Math.ceil(Number(O.wholesalePrice)*1.2):L}},fi=O=>U==="CREDIT"&&q>0?Number((O+O*q/100).toFixed(2)):O,Rt=Z.filter(O=>O.name.toLowerCase().includes(P.toLowerCase().trim())),jr=O=>{const L=O.target.value;if(N(L),C&&C.name.toLowerCase()!==L.toLowerCase().trim()&&_(null),L.trim()){const Q=!C||C.name.toLowerCase()!==L.toLowerCase().trim();z(Q)}else z(!1)},Na=O=>{_(O),z(!1),Se(-1),setTimeout(()=>{N(O.name)},50),setTimeout(()=>{var L;(L=T.current)==null||L.focus()},100)},Lo=O=>{var L;if(O.key==="Enter")if(O.preventDefault(),Rt.length>0){const Q=je>=0&&je<Rt.length?Rt[je]:Rt[0];Na(Q)}else(L=T.current)==null||L.focus();else O.key==="Escape"?(z(!1),Se(-1)):O.key==="ArrowDown"?(O.preventDefault(),Rt.length>0&&Se(Q=>Q<Rt.length-1?Q+1:0)):O.key==="ArrowUp"&&(O.preventDefault(),Rt.length>0&&Se(Q=>Q>0?Q-1:Rt.length-1))};b.useEffect(()=>{const O=L=>{setTimeout(()=>{E.current&&!E.current.contains(L.target)&&z(!1)},100)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const Yc=async()=>{if(!k.trim()){alert("Please enter a customer name");return}try{I(!0);const O=await pe("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k.trim()})});if(!O.ok){if(O.status===401){B("/login");return}throw new Error("Failed to add customer")}const L=await O.json();V(Q=>[...Q,L]),_(L),N(""),z(!1),alert("Customer added successfully")}catch(O){console.error("Error adding customer:",O),alert("Failed to add customer: "+(O instanceof Error?O.message:"Unknown error"))}finally{I(!1)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Point of Sale 2"}),o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("select",{value:j,onChange:O=>S(O.target.value),className:"px-8 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-200 disabled:cursor-not-allowed",disabled:d.length>0,children:[o.jsx("option",{value:"wholesale",children:"Wholesale Price"}),o.jsx("option",{value:"retail",children:"Retail Price"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[o.jsxs("div",{ref:E,className:"relative",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex-1 flex gap-2",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search customers...",value:k,onChange:jr,onKeyDown:Lo}),R&&P&&o.jsx("div",{ref:F,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:Rt.map((O,L)=>o.jsxs("div",{className:`px-4 py-2 cursor-pointer flex justify-between items-center transition-colors ${L===je?"bg-blue-100 dark:bg-blue-900/40":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>Na(O),children:[o.jsx("span",{children:O.name}),o.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:O.phone||"No phone"})]},O.id))})]}),o.jsx("button",{onClick:Yc,disabled:M||!k.trim(),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center",children:M?o.jsx(An,{className:"w-5 h-5 animate-spin"}):o.jsx(Hn,{className:"w-5 h-5"})})]}),C&&o.jsx("button",{onClick:()=>{_(null),N("")},className:"px-3 py-2 text-red-500 hover:text-red-700 focus:outline-none",children:o.jsx(Lt,{className:"w-5 h-5"})})]}),C&&o.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",C.name,C.phone&&`  ${C.phone}`,C.email&&`  ${C.email}`]})]}),o.jsx("div",{ref:$,className:"relative",children:o.jsx("div",{className:"flex gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"text",ref:T,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search products...",value:i,onChange:J,onFocus:oe,onKeyDown:xe}),c&&i.trim().length>0&&Ce.length>0&&o.jsx("div",{ref:H,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:Ce.map((O,L)=>o.jsxs("div",{className:`px-4 py-2 cursor-pointer flex justify-between items-center transition-colors ${L===he?"bg-blue-100 dark:bg-blue-900/40":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>me(O),children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-base font-medium",children:O.name}),o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 flex items-center gap-2",children:[o.jsxs("span",{children:["",fi(Li(O)).toFixed(2)]}),U==="CREDIT"&&q>0&&o.jsxs("span",{className:"text-red-500 text-xs",children:["+",q,"%"]}),O.description&&o.jsxs("span",{className:"text-gray-500",children:[" ",O.description]})]})]}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Stock: ",O.stock]})]},O.id))})]})})}),"        ",o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(O=>o.jsxs("tr",{onClick:()=>qe(O),className:"hover:bg-gray-50 cursor-pointer",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.name}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                      ",o.jsx("button",{onClick:L=>{L.stopPropagation(),v(O.id),m(!0)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:O.unit})]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",Number(O.price).toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:["                        ",o.jsx("button",{onClick:L=>{L.stopPropagation(),_e(O.id,(O.quantity-1).toString())},className:"p-1 rounded-md hover:bg-gray-100",children:o.jsx(V1,{className:"w-4 h-4"})}),o.jsx("input",{ref:L=>{D.current[O.id]=L},type:"number",min:"0",step:"1",value:re[O.id]||"",placeholder:O.quantity.toString(),onChange:L=>Te(O.id,L.target.value),onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),ge(O.id,L.currentTarget.value),L.currentTarget.blur())},onBlur:L=>{L.target.value!==""?ge(O.id,L.target.value):ee(Q=>({...Q,[O.id]:""}))},onClick:L=>L.stopPropagation(),className:"w-16 px-2 py-1 text-center border rounded-md"}),"                        ",o.jsx("button",{onClick:L=>{L.stopPropagation(),_e(O.id,(O.quantity+1).toString())},className:"p-1 rounded-md hover:bg-gray-100",children:o.jsx(Hn,{className:"w-4 h-4"})})]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",Number(O.total).toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:L=>{L.stopPropagation(),Re(O.id)},className:"text-red-500 hover:text-red-700",children:o.jsx(Rn,{className:"w-4 h-4"})})})]},O.id))})]})})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Number of Items:"}),o.jsx("span",{className:"font-medium",children:ut})]}),o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),o.jsx("span",{className:"font-medium",children:Qt})]}),o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),o.jsxs("span",{className:"font-medium",children:["",bt.toFixed(2)]})]}),o.jsx("div",{className:"border-t pt-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-gray-700 font-medium",children:"Payment Method:"}),o.jsxs("select",{value:U,onChange:O=>ne(O.target.value),disabled:d.length>0,className:`px-8 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ${d.length>0?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`,children:[o.jsx("option",{value:"CASH",children:"Cash"}),o.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),U==="CREDIT"&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-gray-700 font-medium",children:"Credit Surcharge (%):"}),o.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:q,onChange:O=>ie(Number(O.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-right",placeholder:"0"})]}),U==="CREDIT"&&q>0&&o.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[o.jsxs("span",{children:["Credit Surcharge (",q,"%):"]}),o.jsxs("span",{children:["+",(bt*q/100).toFixed(2)]})]})]})}),o.jsxs("div",{className:"flex justify-between items-center text-xl font-semibold border-t pt-4",children:[o.jsx("span",{children:"Final Total:"}),o.jsxs("span",{className:U==="CREDIT"&&q>0?"text-blue-600":"",children:["",bt.toFixed(2)]})]}),o.jsxs("div",{className:"mt-4 flex justify-end space-x-4",children:[o.jsx("button",{onClick:ja,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear"}),o.jsxs("button",{onClick:Kc,className:"px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 flex items-center",children:[o.jsx(qg,{className:"w-4 h-4 mr-2"}),"Hold Sale"]}),o.jsxs("button",{onClick:Qc,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:[o.jsx(No,{className:"w-4 h-4 mr-2"}),"Save Sale"]}),"              ",o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>w(!x),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[o.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Print Sale"]}),x&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>w(!1)}),o.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-52 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:o.jsxs("div",{className:"py-2",children:[o.jsxs("button",{onClick:()=>{Ns("invoice"),w(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[o.jsx(sa,{className:"w-4 h-4 mr-3 text-blue-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Print Invoice (A5)"})]}),o.jsxs("button",{onClick:()=>{Ns("receipt"),w(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[o.jsx(aa,{className:"w-4 h-4 mr-3 text-green-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Print Receipt"})]})]})})]})]})]})]})})]}),o.jsx(Vy,{isOpen:g,onClose:()=>m(!1),onSelect:Ze,units:y?Ue(y):[]}),o.jsx(Tj,{isOpen:e,onClose:()=>t(!1),onConfirm:()=>{n&&(n.onConfirm(),t(!1))},title:(n==null?void 0:n.title)||"",message:(n==null?void 0:n.message)||""})]})},X0e=3e4,Z0e=()=>{const[e,t]=b.useState(!1),[n,r]=b.useState(null),[i,s]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(!1),[d,f]=b.useState(()=>{const K=localStorage.getItem("retailCurrentSale");return K?JSON.parse(K):[]});b.useEffect(()=>{const J=new URLSearchParams(window.location.search).get("saleId");J&&(async()=>{try{const me=await pe(`/api/sales/${J}`);if(me.ok){const xe=await me.json();if(xe&&Array.isArray(xe.saleitem)){const Re=xe.saleitem.map(Te=>({id:Te.product.id,name:Te.product.name,price:Number(Te.price),quantity:Number(Te.quantity),total:Number(Te.price)*Number(Te.quantity),unit:Te.unit,baseUnits:Number(Te.baseUnits)}));f(Re)}}}catch(me){console.error("Error fetching sale data:",me)}})()},[]);const[h,p]=b.useState([]),[g,m]=b.useState(!1),[y,v]=b.useState(null),x=b.useRef(null),w=b.useRef(null),j=b.useRef({}),S=b.useRef(null),k=St(),[N,P]=b.useState(null),[A]=b.useState("CASH"),[C,_]=b.useState({}),[R,z]=b.useState(-1);b.useEffect(()=>{localStorage.setItem("retailCurrentSale",JSON.stringify(d))},[d]),b.useEffect(()=>{const K=setTimeout(()=>{l(i)},150);return()=>clearTimeout(K)},[i]);const M=b.useMemo(()=>{if(console.log("Filtering products - searchTerm:",a,"products count:",h.length),!a||a.trim().length===0)return console.log("No search term, returning empty array"),[];if(!h||h.length===0)return console.log("No products available, returning empty array"),[];const K=a.toLowerCase().trim(),J=h.filter(me=>!me||!me.name?!1:me.name.toLowerCase().startsWith(K));return console.log("Filtered products:",J.length,"matches for term:",a),J.sort((me,xe)=>me.name.toLowerCase().localeCompare(xe.name.toLowerCase()))},[h,a]);b.useEffect(()=>{z(-1)},[M]),b.useEffect(()=>{h.length>0&&i.trim().length>0&&(console.log("Products loaded and search term exists, showing suggestions"),u(!0))},[h,i]),b.useEffect(()=>{if(R>=0&&S.current){const K=S.current,J=K.children[R];if(J){const oe=K.getBoundingClientRect(),me=J.getBoundingClientRect();me.bottom>oe.bottom?K.scrollTop+=me.bottom-oe.bottom:me.top<oe.top&&(K.scrollTop-=oe.top-me.top)}}},[R]),b.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const J=await pe("/api/products/pos");if(J.ok){const oe=await J.json();console.log("Products fetched successfully:",oe.length,"products"),p(oe)}else J.status===401?k("/login"):console.error("Failed to fetch products:",J.status,J.statusText)}catch(J){console.error("Error fetching products:",J)}})()},[k]),b.useEffect(()=>{var K;(K=w.current)==null||K.focus(),d.length===0&&Ke.displayWelcome().catch(J=>console.error("Failed to initialize VFD display:",J))},[d]),b.useEffect(()=>{(async()=>{try{const J=await pe("/api/users/me");if(J.ok){const oe=await J.json();P(oe.data.user)}else J.status===401&&k("/login")}catch(J){console.error("Error fetching current user:",J)}})()},[k]);const I=b.useCallback(async()=>{try{const K="/api/products/pos",J=new URLSearchParams;if(d.length>0){const oe=d.map(xe=>xe.id).join(",");J.append("ids",oe);const me=await pe(`${K}?${J}`);if(me.status===401){k("/login");return}if(me.ok){const xe=await me.json(),Re=d.map(Te=>{const ge=xe.find(_e=>_e.id===Te.id);return ge?ge.stock<Te.quantity*Te.baseUnits?`${Te.name}: Only ${Math.floor(ge.stock/Te.baseUnits)} ${Te.unit}(s) available`:null:`${Te.name}: Product no longer available`}).filter(Boolean);Re.length>0&&alert(`Stock has changed:
`+Re.join(`
`)),p(Te=>Te.map(ge=>xe.find(qe=>qe.id===ge.id)||ge))}}}catch(K){console.error("Error refreshing products:",K)}},[k,d]);b.useEffect(()=>{const K="https://192.168.0.10:5443";console.log("WebSocket connecting to:",K),console.log("Current page protocol:",window.location.protocol),console.log("Environment VITE_SERVER_URL:","https://192.168.0.10:5443"),console.log("Calculated getSocketUrl():",bI());const J=to(K);return J.on("connect",()=>{console.log("WebSocket connected successfully to:",K)}),J.on("connect_error",oe=>{console.error("WebSocket connection error:",oe)}),J.on("stock-update",oe=>{p(me=>me.map(xe=>xe.id===oe.productId?{...xe,stock:oe.newStock,version:oe.version}:xe))}),()=>{J.disconnect()}},[]),b.useEffect(()=>{if(d.length>0){const K=setInterval(I,X0e);return()=>clearInterval(K)}},[I,d.length]);const $=async(K,J,oe)=>{try{const me=await pe(`/api/products/${K}`);if(!me.ok)throw new Error("Failed to fetch product stock");const xe=await me.json(),Re=J*oe;return p(Te=>Te.map(ge=>ge.id===K?{...ge,stock:xe.stock,version:xe.version}:ge)),Number(xe.stock)>=Re}catch(me){return console.error("Error checking stock:",me),!1}},E=async K=>{let J=0;const oe=3;for(;J<oe;)try{if(!(N!=null&&N.id))throw new Error("User not authenticated");const me=Date.now().toString(),xe=K.map(_e=>{var qe;return{productId:parseInt(_e.id),quantity:Number(_e.quantity*(_e.baseUnits||1)),version:(qe=h.find(Ze=>Ze.id===_e.id))==null?void 0:qe.version}});if(xe.some(_e=>!_e.version))throw new Error("Product version information is missing");const Re={updates:xe,transactionId:me,userId:N.id},Te=await pe("/api/products/stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Re)});if(!Te.ok){if(Te.status===401)return k("/login"),!1;const _e=await Te.json();throw new Error(_e.message||"Failed to update stock")}const ge=await Te.json();if(!ge.success){const _e=ge.results.filter(qe=>!qe.success).map(qe=>{const Ze=K.find(Ue=>parseInt(Ue.id)===qe.productId);return`${(Ze==null?void 0:Ze.name)||"Unknown product"}: ${qe.message}${qe.currentStock!==void 0?` (Available: ${Math.floor(qe.currentStock/((Ze==null?void 0:Ze.baseUnits)||1))} ${(Ze==null?void 0:Ze.unit)||"units"})`:""}`}).join(`
`);throw new Error(`Stock update failed:
${_e}`)}return p(h.map(_e=>{const qe=ge.results.find(Ze=>parseInt(_e.id)===Ze.productId);return qe?{..._e,stock:qe.newStock??_e.stock,version:qe.version??_e.version}:_e})),!0}catch(me){if(console.error("Stock update error:",me),J===oe-1)throw me;J++,await new Promise(xe=>setTimeout(xe,1e3*J))}return!1},T=K=>{const J=K.target.value;if(J.length<i.length){s(J);const me=J.trim().length>0&&h.length>0;u(me);return}if(J.length>i.length&&h.length>0){if(h.some(xe=>xe.name.toLowerCase().startsWith(J.toLowerCase())))s(J),u(!0);else try{const xe=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwF");xe.volume=.1,xe.play()}catch{console.log("Invalid character blocked")}return}s(J),console.log("Search change - value:",J,"products count:",h.length);const oe=J.trim().length>0&&h.length>0;u(oe),J.trim().length>0&&h.length===0&&(console.log("Search term entered but no products loaded, fetching..."),(async()=>{try{const xe=await pe("/api/products/pos");if(xe.ok){const Re=await xe.json();console.log("Products loaded from search change:",Re.length),p(Re)}}catch(xe){console.error("Error fetching products on search:",xe)}})())},D=()=>{console.log("Search focus - searchTerm:",i,"products count:",h.length),i.trim().length>0&&h.length>0&&u(!0),h.length===0&&(console.log("No products loaded, attempting to refetch..."),(async()=>{try{const J=await pe("/api/products/pos");if(J.ok){const oe=await J.json();console.log("Refetched products:",oe.length),p(oe),i.trim().length>0&&u(!0)}}catch(J){console.error("Error refetching products:",J)}})())},H=K=>{const J=Number(K.retailPrice);return J===0?Math.ceil(Number(K.wholesalePrice)*1.2):J},F=K=>{const J=H(K),oe={name:K.baseUnit.name,baseUnits:1,price:J},me=d.find(ge=>ge.id===K.id);let xe,Re=1;if(me)Re=me.quantity+1,xe=d.map(ge=>ge.id===K.id?{...ge,quantity:Re,price:J,total:Re*J}:ge);else{const ge={id:K.id,name:K.name,price:J,quantity:1,total:J,unit:oe.name,baseUnits:oe.baseUnits};xe=[...d,ge]}f(xe);const Te=xe.reduce((ge,_e)=>ge+_e.total,0);console.log("RetailPos: About to send product to VFD:",{productName:K.name,price:J,quantity:Re,total:Te}),fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:K.name.replace(/[^\x20-\x7E]/g,""),price:J,quantity:Re,total:Te})}).then(ge=>ge.json()).then(ge=>{console.log("RetailPos: VFD proxy response:",ge)}).catch(ge=>{console.error("RetailPos: Failed to update VFD display:",ge)}),u(!1),setTimeout(()=>{s("")},50),setTimeout(()=>{const ge=j.current[K.id];ge&&(ge.focus(),ge.select())},150)},B=K=>{if(K.key==="Enter"){if(K.preventDefault(),M.length>0){const J=R>=0&&R<M.length?M[R]:M[0];F(J)}}else K.key==="Escape"?(u(!1),s(""),z(-1)):K.key==="ArrowDown"?(K.preventDefault(),M.length>0&&z(J=>J<M.length-1?J+1:0)):K.key==="ArrowUp"&&(K.preventDefault(),M.length>0&&z(J=>J>0?J-1:M.length-1))},Z=K=>{const J=d.filter(oe=>oe.id!==K);if(f(J),J.length>0){const oe=J.reduce((xe,Re)=>xe+Re.total,0),me=J[J.length-1];fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:me.name.replace(/[^\x20-\x7E]/g,""),price:me.price,quantity:me.quantity,total:oe})}).catch(xe=>console.error("Failed to update VFD display:",xe))}else fetch("http://localhost:5001/welcome",{method:"POST",headers:{"Content-Type":"application/json"}}).catch(oe=>console.error("Failed to update VFD display:",oe))},V=(K,J)=>{_(oe=>({...oe,[K]:J}))},G=async(K,J)=>{const oe=parseInt(J,10);if(isNaN(oe)||oe<1){_(me=>({...me,[K]:""}));return}_(me=>({...me,[K]:""})),await X(K,J)},X=async(K,J)=>{const oe=parseInt(J,10);if(isNaN(oe)||oe<1)return;const me=d.find(xe=>xe.id===K);if(me)try{if(!await $(K,oe,me.baseUnits||1)){const ge=h.find(qe=>qe.id===K),_e=ge?Math.floor(ge.stock/(me.baseUnits||1)):0;if(alert(`Insufficient stock for ${me.name}. Available: ${_e} ${me.unit}(s)`),oe>me.quantity){const qe=d.map(ut=>ut.id===K?{...ut,quantity:_e||1,total:(_e||1)*Number(ut.price)}:ut);f(qe);const Ze=qe.reduce((ut,Qt)=>ut+Qt.total,0);h.find(ut=>ut.id===K)&&fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:me.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:Number(me.price),quantity:_e||1,total:Ze})}).catch(ut=>console.error("Failed to update VFD display:",ut))}return}const Re=d.map(ge=>ge.id===K?{...ge,quantity:oe,total:oe*Number(ge.price)}:ge);f(Re);const Te=Re.reduce((ge,_e)=>ge+_e.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:me.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:Number(me.price),quantity:oe,total:Te})}).catch(ge=>console.error("Failed to update VFD display:",ge))}catch(xe){console.error("Error updating quantity:",xe),alert("Failed to update quantity: "+(xe instanceof Error?xe.message:"Unknown error"))}},U=K=>{console.log("Row clicked, displaying VFD info for:",K.name);const J=d.reduce((oe,me)=>oe+me.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:K.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:K.price,quantity:K.quantity,total:J})}).then(oe=>oe.json()).then(oe=>{console.log("RetailPos: VFD proxy response for row click:",oe)}).catch(oe=>{console.error("RetailPos: Failed to update VFD display on row click:",oe)})},ne=K=>{if(!y)return;const J=d.find(ge=>ge.id===y);if(!J)return;const oe=h.find(ge=>ge.id===y);if(!oe)return;const me=K.conversionRate||1,xe=J.quantity*(J.baseUnits||1);if(oe.stock<me){alert(`Insufficient stock. Available: ${Math.floor(oe.stock/me)} ${K.name}(s)`);return}let Re=Math.floor(xe/me);Re<1&&oe.stock>=me&&(Re=1);let Te=Number(K.price);Te===0&&(Te=H(oe)*me),f(d.map(ge=>ge.id===y?{...ge,unit:String(K.name),baseUnits:Number(me),price:Te,quantity:Number(Re),total:Number(Re)*Te}:ge)),console.log("Updated sale item with new unit:",d.find(ge=>ge.id===y)),m(!1)},q=K=>{const J=h.find(xe=>xe.id===K);if(!J||!J.baseUnit)return[];const oe=H(J),me=[{name:J.baseUnit.name,baseUnits:1,price:oe,unitId:J.baseUnit.id,conversionRate:1}];return J.productunit&&Array.isArray(J.productunit)&&me.push(...J.productunit.map(xe=>({name:xe.unit.name,baseUnits:xe.conversionRate,price:Number(xe.price)||oe*xe.conversionRate,unitId:xe.unit.id,conversionRate:xe.conversionRate}))),console.log("Available units for product:",K,me),me},ie=d.length,re=d.reduce((K,J)=>K+J.quantity,0),ee=Number(d.reduce((K,J)=>K+J.total,0).toFixed(2)),he=()=>{if(d.length===0){alert("No items to hold");return}r({title:"Hold Sale",message:"Are you sure you want to hold this sale for later?",onConfirm:fe}),t(!0)},fe=async()=>{try{if(d.length===0){alert("No items to hold");return}const K={userId:N==null?void 0:N.id,items:d.map(oe=>({productId:parseInt(oe.id),quantity:oe.quantity,price:oe.price,unit:oe.unit,baseUnits:oe.baseUnits})),totalAmount:d.reduce((oe,me)=>oe+me.total,0),saleType:"RETAIL",status:"held"},J=await pe("/api/held-sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)});if(!J.ok){if(J.status===401){k("/login");return}const oe=await J.json();throw new Error(oe.message||"Failed to hold sale")}se(),alert("Sale held successfully"),I()}catch(K){console.error("Error holding sale:",K),alert("Failed to hold sale: "+(K instanceof Error?K.message:"Unknown error"))}},je=()=>{if(d.length===0){alert("No items to save");return}r({title:"Complete Sale",message:"Are you sure you want to complete this sale?",onConfirm:Se}),t(!0)},Se=async()=>{try{if(d.length===0){alert("No items to save");return}const K=d.reduce((Re,Te)=>Re+Te.total,0);if(typeof K!="number"||K<=0)throw new Error("Invalid total amount");if(!await E(d))return;const oe={userId:N==null?void 0:N.id,items:d.map(Re=>({productId:parseInt(Re.id),quantity:Number(Re.quantity),price:Number(Re.price),unit:String(Re.unit),baseUnits:Number(Re.baseUnits)})),totalAmount:Number(ee),paymentMethod:A,saleType:"RETAIL",isCreditSale:!1,creditPercentage:null,status:"completed"},me=await pe("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)});if(!me.ok){if(me.status===401){k("/login");return}const Re=await me.json();throw new Error(Re.message||"Failed to save sale")}const xe=await me.json();console.log("Sale saved successfully:",xe),Ke.displayTotal(ee).catch(Re=>console.error("Failed to update VFD display:",Re)),setTimeout(()=>{se()},2e3),alert("Sale completed and saved successfully"),setTimeout(()=>{window.location.reload()},2e3)}catch(K){console.error("Error completing sale:",K),K instanceof Error&&K.message.includes("Stock update failed:")?alert(K.message):alert("Failed to complete sale: "+(K instanceof Error?K.message:"Unknown error"))}},Ce=async K=>{try{if(d.length===0){alert("No items to print");return}if(!await E(d))return;const oe={userId:N==null?void 0:N.id,items:d.map(Ue=>({productId:parseInt(Ue.id),quantity:Number(Ue.quantity),price:Number(Ue.price),unit:String(Ue.unit),baseUnits:Number(Ue.baseUnits)})),totalAmount:Number(ee),paymentMethod:A,saleType:"RETAIL",isCreditSale:!1,creditPercentage:null,status:"completed"},me=await pe("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)});if(!me.ok){if(me.status===401){k("/login");return}const Ue=await me.json();throw new Error(Ue.message||"Failed to save sale")}const xe=await me.json();console.log("Sale saved successfully:",xe),Ke.displayTotal(ee).catch(Ue=>console.error("Failed to update VFD display:",Ue));const Re={type:K,items:d.map(Ue=>({id:Ue.id,name:Ue.name,price:Number(Ue.price),quantity:Number(Ue.quantity),total:Number(Ue.total),unit:Ue.unit})),totalAmount:Number(ee),totalItems:Number(re),customer:void 0,paymentMethod:A,creditPercentage:0,saleId:xe.id},Te=K==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",ge=localStorage.getItem(Te)||void 0;let _e=!1;const qe={...Re,salesperson:N?{name:N.name}:void 0};if((localStorage.getItem("qz.printMode")==="browser"?"browser":"silent")==="silent"&&ge)try{_e=K==="invoice"?await Ro(qe,ge):await Mo(qe,ge)}catch(Ue){console.warn("Silent QZ printing failed, falling back:",Ue),_e=!1}_e||await hs(qe),se(),alert("Sale completed and printed successfully")}catch(J){console.error("Error during print process:",J),alert("Failed to complete print process: "+(J instanceof Error?J.message:"Unknown error"))}},Oe=()=>{if(d.length===0){se();return}r({title:"Clear Sale",message:"Are you sure you want to clear all items? This action cannot be undone.",onConfirm:se}),t(!0)},se=()=>{f([]),s(""),m(!1),v(null),localStorage.removeItem("retailCurrentSale"),Ke.displayWelcome().catch(K=>console.error("Failed to update VFD display:",K)),w.current&&w.current.focus()};return b.useEffect(()=>{const K=J=>{setTimeout(()=>{x.current&&!x.current.contains(J.target)&&u(!1)},100)};return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[]),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Retail Point of Sale"}),o.jsx("div",{className:"flex items-center space-x-4",children:o.jsx("div",{className:"px-8 py-2 rounded-lg border border-blue-300 bg-blue-50 text-blue-700 font-medium",children:"Retail Pricing Only"})})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[o.jsx("div",{ref:x,className:"relative",children:o.jsx("div",{className:"flex gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"text",ref:w,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search products...",value:i,onChange:T,onFocus:D,onKeyDown:B}),c&&i.trim().length>0&&M.length>0&&o.jsx("div",{ref:S,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:M.map((K,J)=>o.jsx("div",{className:`px-4 py-3 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0 hover:bg-gray-50 dark:hover:bg-gray-700 ${J===R?"bg-blue-50 dark:bg-blue-900":""}`,onClick:()=>F(K),children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:K.name}),o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Stock: ",K.stock," ",K.baseUnit.name,"(s)"]})]}),o.jsxs("div",{className:"text-right ml-4",children:[o.jsxs("div",{className:"font-bold text-green-600 dark:text-green-400",children:["",H(K).toFixed(2)]}),o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["per ",K.baseUnit.name]})]})]})},K.id))})]})})}),o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(K=>o.jsxs("tr",{onClick:()=>U(K),className:"hover:bg-gray-50 cursor-pointer",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.name})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",K.price.toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{ref:J=>j.current[K.id]=J,type:"number",min:"1",className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:K.quantity.toString(),value:C[K.id]||"",onChange:J=>V(K.id,J.target.value),onKeyDown:J=>{J.key==="Enter"&&G(K.id,J.target.value)},onBlur:J=>{J.target.value&&G(K.id,J.target.value)}}),o.jsxs("span",{className:"text-sm text-gray-500",children:["(",K.quantity,")"]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:J=>{J.stopPropagation(),v(K.id),m(!0)},className:"text-sm text-blue-600 hover:text-blue-800 underline",children:K.unit})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["",K.total.toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsx("button",{onClick:J=>{J.stopPropagation(),Z(K.id)},className:"text-red-600 hover:text-red-900",children:o.jsx(Rn,{className:"w-4 h-4"})})})]},K.id))})]})})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Number of Items:"}),o.jsx("span",{className:"font-medium",children:ie})]}),o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),o.jsx("span",{className:"font-medium",children:re})]}),o.jsx("div",{className:"border-t pt-4",children:o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),o.jsx("span",{className:"font-medium px-3 py-1 bg-green-100 text-green-800 rounded",children:"CASH"})]})}),o.jsxs("div",{className:"flex justify-between items-center text-xl font-semibold border-t pt-4",children:[o.jsx("span",{children:"Final Total:"}),o.jsxs("span",{className:"text-green-600",children:["",ee.toFixed(2)]})]}),o.jsxs("div",{className:"mt-4 flex justify-end space-x-4",children:[o.jsx("button",{onClick:Oe,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear"}),o.jsxs("button",{onClick:he,className:"px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 flex items-center",children:[o.jsx(qg,{className:"w-4 h-4 mr-2"}),"Hold Sale"]}),o.jsxs("button",{onClick:je,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:[o.jsx(No,{className:"w-4 h-4 mr-2"}),"Save Sale"]}),o.jsxs("button",{onClick:()=>Ce("receipt"),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[o.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Print Receipt & Save"]})]})]})})]}),o.jsx(Vy,{isOpen:g,onClose:()=>m(!1),onSelect:ne,units:y?q(y):[]}),o.jsx(Tj,{isOpen:e,onClose:()=>t(!1),onConfirm:()=>{n&&(n.onConfirm(),t(!1))},title:(n==null?void 0:n.title)||"",message:(n==null?void 0:n.message)||""})]})},J0e=()=>{const e=St(),{setCurrentUser:t}=ko(),[n,r]=b.useState({name:"",password:""}),[i,s]=b.useState(""),[a,l]=b.useState(!1),[c,u]=b.useState(!1);b.useEffect(()=>{new URLSearchParams(window.location.search).get("reason")==="backend-change"?s(" Backend server changed - authentication required. This happens when switching between localhost and network deployment modes."):_f()?s(" Backend server changed - please login again to continue."):(sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),localStorage.removeItem("user")),r({name:"",password:""}),window.history.replaceState&&window.history.replaceState(null,"",window.location.pathname)},[]);const d=async f=>{f.preventDefault(),s(""),l(!0);try{await Q1(),console.log("Sending login request with data:",{name:n.name,password:"***"});const h=await pe("/api/auth/login",{method:"POST",body:JSON.stringify(n)});console.log("Response status:",h.status);const p=await h.json();if(console.log("Response data:",p),!h.ok){const y=p.message||`Login failed with status ${h.status}`;throw console.error("Login error details:",{status:h.status,data:p}),new Error(y)}if(!p.user)throw new Error("No user data received");t(p.user,p.token);const m={ADMIN:"/dashboard",USER:"/pos"}[p.user.role]||"/pos";e(m,{replace:!0})}catch(h){console.error("Login error:",h),s(h instanceof Error?h.message:"Login failed")}finally{l(!1)}};return o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
          @keyframes fadeIn {
            0% {
              opacity: 0;
              transform: translateY(20px);
            }
            100% {
              opacity: 1;
              transform: translateY(0);
            }
          }
          .fade-in {
            animation: fadeIn 0.8s ease-out;
          }
          @keyframes float {
            0%, 100% {
              transform: translateY(0px);
            }
            50% {
              transform: translateY(-10px);
            }
          }
          @keyframes slideRight {
            0% {
              transform: translateX(-100px);
              opacity: 0;
            }
            50% {
              opacity: 1;
            }
            100% {
              transform: translateX(100vw);
              opacity: 0;
            }
          }
          @keyframes pulse {
            0%, 100% {
              opacity: 0.3;
            }
            50% {
              opacity: 0.8;
            }
          }
          .float {
            animation: float 3s ease-in-out infinite;
          }
          .float-delay {
            animation: float 3s ease-in-out infinite;
            animation-delay: 1.5s;
          }
          .slide-right {
            animation: slideRight 15s linear infinite;
          }
          .pulse-icon {
            animation: pulse 2s ease-in-out infinite;
          }
        `}),o.jsxs("div",{className:"theme-light min-h-screen flex items-center justify-center relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800"}),o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute top-20 left-10 text-white/20 float",children:o.jsx(Ef,{className:"w-8 h-8"})}),o.jsx("div",{className:"absolute top-40 right-20 text-white/15 float-delay",children:o.jsx(gI,{className:"w-6 h-6"})}),o.jsx("div",{className:"absolute top-32 left-1/4 text-white/20 pulse-icon",children:o.jsx(Vg,{className:"w-7 h-7"})}),o.jsx("div",{className:"absolute bottom-40 right-1/4 text-white/15 float",children:o.jsx(lB,{className:"w-8 h-8"})}),o.jsx("div",{className:"absolute top-60 right-10 text-white/20 float-delay",children:o.jsx(aa,{className:"w-6 h-6"})}),o.jsx("div",{className:"absolute bottom-32 left-16 text-white/15 pulse-icon",children:o.jsx(NB,{className:"w-7 h-7"})}),o.jsx("div",{className:"absolute top-1/3 right-1/3 text-white/10 float",children:o.jsx(uB,{className:"w-5 h-5"})}),o.jsx("div",{className:"absolute bottom-1/3 left-1/3 text-white/15 float-delay",children:o.jsx(Fs,{className:"w-6 h-6"})}),o.jsx("div",{className:"absolute top-1/2 left-8 text-white/20 pulse-icon",children:o.jsx(Rv,{className:"w-7 h-7"})}),o.jsx("div",{className:"absolute bottom-20 right-12 text-white/15 float",children:o.jsx(yI,{className:"w-6 h-6"})}),o.jsx("div",{className:"absolute top-1/4 text-white/10 slide-right",children:o.jsx(aa,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"absolute inset-0 opacity-10",children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='7' cy='7' r='1'/%3E%3Ccircle cx='53' cy='7' r='1'/%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3Ccircle cx='7' cy='53' r='1'/%3E%3Ccircle cx='53' cy='53' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,backgroundSize:"60px 60px"}})}),o.jsxs("div",{className:"max-w-md w-full space-y-6 bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-gray-200 relative z-10 mx-4 fade-in",children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"flex items-center justify-center mb-2",children:o.jsx("img",{src:"/apexlink-logo.svg",alt:"Apexlink Logo",className:"w-12 h-12"})}),o.jsx("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Apexlink POS"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,autoComplete:"off",children:[i&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded relative",role:"alert",children:o.jsx("span",{className:"block sm:inline",children:i})}),o.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"user_login",className:"sr-only",children:"Username"}),o.jsx("input",{id:"user_login",name:"user_login",type:"text",autoComplete:"off",required:!0,className:"appearance-none relative block w-full px-4 py-3 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-lg mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150 ease-in-out sm:text-sm",placeholder:"Username",value:n.name,onChange:f=>r({...n,name:f.target.value})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("label",{htmlFor:"access_key",className:"sr-only",children:"Password"}),o.jsx("input",{id:"access_key",name:"access_key",type:c?"text":"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-4 py-3 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150 ease-in-out sm:text-sm",placeholder:"Password",value:n.password,onChange:f=>r({...n,password:f.target.value})}),o.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 focus:outline-none",children:c?o.jsx(Pd,{className:"w-5 h-5"}):o.jsx(ia,{className:"w-5 h-5"})})]})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transform transition duration-150 ease-in-out hover:scale-[1.02] active:scale-[0.98] mt-6",children:a?o.jsx(An,{className:"animate-spin h-5 w-5"}):"Sign in"})})]})]})]})]})};function eve(){const[e,t]=b.useState([]),[n,r]=b.useState(""),[i,s]=b.useState(!1),[a,l]=b.useState([]),[c,u]=b.useState([]),[d]=b.useState([]),[f,h]=b.useState(""),[p,g]=b.useState(""),[m,y]=b.useState(new Date),[v,x]=b.useState("PENDING"),[w,j]=b.useState(1),[S,k]=b.useState(1),[N,P]=b.useState(!1),A=b.useRef(null),C=b.useRef(null),_=St();b.useEffect(()=>{(async()=>{P(!0);try{const[G,X]=await Promise.all([fetch("/api/suppliers",{credentials:"include"}),fetch(`/api/products?page=${w}&limit=50${n?`&search=${encodeURIComponent(n)}`:""}`,{credentials:"include"})]);if(!G.ok)throw new Error(`Failed to fetch suppliers: ${G.status} ${G.statusText}`);if(!X.ok)throw new Error(`Failed to fetch products: ${X.status} ${X.statusText}`);const U=await G.json(),ne=await X.json();if(!Array.isArray(U))throw new Error("Invalid suppliers data format: expected an array");if(!ne||!Array.isArray(ne.products))throw new Error("Invalid products data format: expected products array in response");u(U),l(ne.products),k(ne.totalPages)}catch(G){console.error("Error fetching data:",G),alert(G instanceof Error?G.message:"An unexpected error occurred while fetching data")}finally{P(!1)}})()},[w,n]),b.useEffect(()=>{const V=G=>{A.current&&!A.current.contains(G.target)&&s(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]);const R=a.filter(V=>V.name.toLowerCase().includes(n.toLowerCase())),z=V=>{r(V),s(!0)},M=(V,G,X,U)=>{const ne=V*G,q=ne*X/100,ie=ne*U/100;return ne+q-ie},I=V=>{const G=e.findIndex(X=>X.productId===V.id);if(G!==-1){const X=[...e];X[G].quantity+=1,X[G].subtotal=X[G].quantity*X[G].unitPrice,X[G].totalPrice=M(X[G].quantity,X[G].unitPrice,X[G].tax,X[G].discount),t(X)}else{const X={productId:V.id,name:V.name,quantity:1,stock:V.stock,unitPrice:Number(V.purchasePrice),tax:0,discount:0,subtotal:Number(V.purchasePrice),totalPrice:Number(V.purchasePrice)};t([...e,X])}r(""),s(!1),C.current&&C.current.focus()},$=(V,G)=>{const X=[...e];X[V].discount=G===""?0:parseFloat(G),X[V].totalPrice=M(X[V].quantity,X[V].unitPrice,X[V].tax,X[V].discount),t(X)},E=(V,G)=>{const X=[...e];X[V].tax=G===""?0:parseFloat(G),X[V].totalPrice=M(X[V].quantity,X[V].unitPrice,X[V].tax,X[V].discount),t(X)},T=V=>{const G=e.filter((X,U)=>U!==V);t(G)},D=(V,G)=>{const X=Math.max(1,parseInt(G)||0),U=[...e];U[V]={...U[V],quantity:X,subtotal:X*U[V].unitPrice,totalPrice:M(X,U[V].unitPrice,U[V].tax,U[V].discount)},t(U)},H=(V,G)=>{const X=Math.max(0,parseFloat(G)||0),U=[...e];U[V]={...U[V],unitPrice:X,subtotal:U[V].quantity*X,totalPrice:M(U[V].quantity,X,U[V].tax,U[V].discount)},t(U)},F=V=>{V.key==="Enter"&&R.length>0&&I(R[0])},B=()=>e.reduce((V,G)=>{const X=(G.subtotal-G.discount)*(1+G.tax/100);return V+X},0),Z=async()=>{if(!p){alert("Please select a supplier");return}if(e.length===0){alert("Please add at least one item");return}const V=B(),G={date:m.toISOString(),supplierId:parseInt(p),warehouseId:parseInt(f),status:v,items:e.map(X=>({productId:X.productId,quantity:X.quantity,unitPrice:X.unitPrice,tax:X.tax,discount:X.discount,subtotal:X.subtotal})),totalTax:e.reduce((X,U)=>X+U.subtotal*(U.tax/100),0),totalDiscount:e.reduce((X,U)=>X+(U.discount||0),0),totalAmount:V,amountDue:V,amountPaid:0};try{const X=await fetch("/api/purchases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G),credentials:"include"});if(!X.ok)throw new Error(`Failed to create purchase: ${X.status} ${X.statusText}`);localStorage.removeItem("purchaseItems"),window.location.href="/purchases"}catch(X){console.error("Error creating purchase:",X),alert(X instanceof Error?X.message:"An unexpected error occurred while creating the purchase")}};return o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"flex justify-between items-center mb-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:()=>_("/purchases"),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[o.jsx(Wl,{className:"h-5 w-5"}),"Back"]}),o.jsx("span",{className:"text-gray-400",children:"|"}),o.jsx("h1",{className:"text-2xl font-semibold",children:"Create Purchase"})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:o.jsxs("div",{className:"grid gap-6",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date *"}),o.jsx("input",{type:"date",value:m.toISOString().split("T")[0],onChange:V=>y(new Date(V.target.value)),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status *"}),o.jsxs("select",{value:v,onChange:V=>x(V.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"PENDING",children:"PENDING"}),o.jsx("option",{value:"RECEIVED",children:"RECEIVED"}),o.jsx("option",{value:"CANCELLED",children:"CANCELLED"})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Supplier *"}),o.jsxs("select",{value:p,onChange:V=>g(V.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"",children:"Choose Supplier"}),c.map(V=>o.jsx("option",{value:V.id.toString(),children:V.name},V.id))]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Warehouse *"}),o.jsxs("select",{value:f,onChange:V=>h(V.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"",children:"Choose Warehouse"}),d.map(V=>o.jsx("option",{value:V.id.toString(),children:V.name},V.id))]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",ref:A,children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product"}),o.jsxs("div",{className:"relative",children:[o.jsx(ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{ref:C,type:"text",placeholder:"Scan/Search Product by Code Or Name",value:n,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:V=>z(V.target.value),onKeyDown:F}),N&&o.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center",children:o.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 rounded-full border-t-transparent"})}),i&&n&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white shadow-lg max-h-60 rounded-md py-1 text-base overflow-auto focus:outline-none sm:text-sm",children:R.length>0?R.map(V=>o.jsxs("div",{className:"cursor-pointer hover:bg-gray-100 px-4 py-2",onClick:()=>I(V),children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-medium",children:V.name}),o.jsxs("span",{className:"text-gray-500",children:["Stock: ",V.stock]})]}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Price: $",V.purchasePrice]})]},V.id)):o.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No products found"})})]})]}),o.jsxs("div",{className:"border rounded-lg p-4 overflow-x-auto",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order items *"}),o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Unit Cost"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tax"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subtotal"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"px-6 py-4 text-center text-gray-500",children:"No data Available"})}):e.map((V,G)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:String(G+1).padStart(4,"0")}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:V.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("input",{type:"number",min:"0",step:"0.01",value:V.unitPrice,onChange:X=>H(G,X.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded-md"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:V.stock}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("input",{type:"number",min:"1",value:V.quantity,onChange:X=>D(G,X.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded-md"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("input",{type:"number",min:"0",value:V.discount||"",onChange:X=>$(G,X.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded-md"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("input",{type:"number",min:"0",max:"100",value:V.tax||"",onChange:X=>E(G,X.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded-md"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",V.subtotal]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("button",{onClick:()=>T(G),className:"text-red-600 hover:text-red-900",children:o.jsx(Lt,{className:"h-5 w-5"})})})]},G))})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsxs("div",{className:"w-1/3 space-y-4 bg-gray-50 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600",children:"Order Tax"}),o.jsxs("span",{className:"font-medium",children:["",e.reduce((V,G)=>V+G.subtotal*(G.tax/100),0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600",children:"Order Discount"}),o.jsxs("span",{className:"font-medium",children:["",e.reduce((V,G)=>V+G.discount,0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[o.jsx("span",{children:"Grand Total"}),o.jsxs("span",{children:["",B().toFixed(2)]})]})]}),o.jsx("button",{onClick:Z,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 h-fit",children:"Submit Purchase"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",w," of ",S]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>j(V=>Math.max(V-1,1)),disabled:w===1,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:"Previous"}),o.jsx("button",{onClick:()=>j(V=>Math.min(V+1,S)),disabled:w===S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:"Next"})]})]})]})})]})}function tve(){var a,l,c;const{id:e}=Pf(),t=St(),[n,r]=b.useState(null),[i,s]=b.useState(!0);return b.useEffect(()=>{(async()=>{try{const d=await fetch(`/api/purchases/${e}`,{credentials:"include"});if(d.status===401){t("/login");return}if(!d.ok)throw new Error(`Failed to fetch purchase: ${d.status} ${d.statusText}`);const f=await d.json();if(console.log("Full API Response:",f),!f||typeof f!="object")throw new Error("Invalid response format");(!Array.isArray(f.purchaseItems)||f.purchaseItems.length===0)&&console.error("No purchase items found in response");const h={...f,items:Array.isArray(f.purchaseItems)?f.purchaseItems.map(p=>({id:p.id,product:p.product,quantity:typeof p.quantity=="string"?parseFloat(p.quantity):p.quantity,unitPrice:typeof p.unitPrice=="string"?parseFloat(p.unitPrice):p.unitPrice,tax:typeof p.tax=="string"?parseFloat(p.tax):p.tax,discount:typeof p.discount=="string"?parseFloat(p.discount):p.discount,subtotal:(()=>{const g=Number(typeof p.quantity=="string"?parseFloat(p.quantity):p.quantity)||0,m=Number(typeof p.unitPrice=="string"?parseFloat(p.unitPrice):p.unitPrice)||0,y=Number(typeof p.tax=="string"?parseFloat(p.tax):p.tax)||0,v=Number(typeof p.discount=="string"?parseFloat(p.discount):p.discount)||0,x=g*m,w=x*(v/100),j=(x-w)*(y/100);return Number((x-w+j).toFixed(2))||0})()})):[]};console.log("Purchase data transformed:",h),console.log("Raw API Response:",f),r(h)}catch(d){console.error("Error fetching purchase details:",d),alert(d instanceof Error?d.message:"An unexpected error occurred")}finally{s(!1)}})()},[e,t]),i?o.jsx("div",{children:"Loading..."}):n?(console.log("Rendering purchase:",n),console.log("Rendering items:",n.items),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"flex justify-between items-center mb-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:()=>t("/purchases"),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[o.jsx(Wl,{className:"h-5 w-5"}),"Back"]}),o.jsx("span",{className:"text-gray-400",children:"|"}),o.jsx("h1",{className:"text-2xl font-semibold",children:"Purchase Details"})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Reference"}),o.jsx("p",{className:"font-medium",children:n.reference})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),o.jsx("p",{className:"font-medium",children:new Date(n.createdAt).toLocaleDateString()})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Supplier"}),o.jsx("p",{className:"font-medium",children:((a=n.supplier)==null?void 0:a.name)||"N/A"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Warehouse"}),o.jsx("p",{className:"font-medium",children:((l=n.warehouse)==null?void 0:l.name)||"N/A"})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),o.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full
              ${n.status==="Received"?"bg-green-100 text-green-800":n.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:n.status})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Payment Status"}),o.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full
              ${n.paymentStatus==="Paid"?"bg-green-100 text-green-800":n.paymentStatus==="Partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:n.paymentStatus})]})]}),o.jsx("div",{className:"border rounded-lg p-4 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tax"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subtotal"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(c=n.items)==null?void 0:c.map((u,d)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:String(d+1).padStart(4,"0")}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.product.name}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",(u.unitPrice??0).toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.quantity??0}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",(u.discount??0).toFixed(2)]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[(u.tax??0).toFixed(2),"%"]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",(u.subtotal??0).toFixed(2)]})]},u.id))})]})}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("div",{className:"w-1/3 space-y-4 bg-gray-50 p-4 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600",children:"Order Tax"}),o.jsxs("span",{className:"font-medium",children:["$",(n.totalTax??0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600",children:"Order Discount"}),o.jsxs("span",{className:"font-medium",children:["$",(n.totalDiscount??0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600",children:"Paid Amount"}),o.jsxs("span",{className:"font-medium",children:["$",(n.paidAmount??0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-gray-600",children:"Due Amount"}),o.jsxs("span",{className:"font-medium",children:["$",(n.dueAmount??0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[o.jsx("span",{children:"Grand Total"}),o.jsxs("span",{children:["$",(Number(n.totalAmount)??0).toFixed(2)]})]})]})})]})]})):o.jsx("div",{children:"Purchase not found"})}const nve=()=>{var I;const{id:e}=Pf(),t=St(),[n,r]=b.useState(""),[i,s]=b.useState(!1),[a,l]=b.useState([]),[c,u]=b.useState([]),[d,f]=b.useState(!0),[h,p]=b.useState(null),g=b.useRef(null),m=b.useRef(null),[y,v]=b.useState(""),[x,w]=b.useState("PENDING"),[j,S]=b.useState("UNPAID");b.useEffect(()=>{(async()=>{try{const[E,T]=await Promise.all([fetch(`/api/purchases/${e}`,{credentials:"include"}),fetch("/api/products",{credentials:"include"})]);if(!E.ok||!T.ok){if(E.status===401||T.status===401){t("/login");return}throw new Error(`Failed to fetch data: ${E.status} ${T.status}`)}const[D,H]=await Promise.all([E.json(),T.json()]);if(!D)throw new Error("Purchase data is empty");const F={...D,purchaseItems:D.purchaseItems||[]};p(F),u(H),v(F.notes||""),w(F.status||"PENDING"),S(F.paymentStatus||"UNPAID");const B=F.purchaseItems.map(Z=>({id:Z.id,productId:Z.productId,unitPrice:Number(Z.unitPrice),quantity:Number(Z.quantity),tax:Number(Z.tax||0),discount:Number(Z.discount||0),totalPrice:M(Number(Z.quantity),Number(Z.unitPrice),Number(Z.tax||0),Number(Z.discount||0)),notes:Z.notes,product:{id:Z.product.id.toString(),name:Z.product.name}}));l(B)}catch(E){console.error("Error fetching data:",E),alert(E instanceof Error?E.message:"Failed to fetch purchase data")}finally{f(!1)}})()},[e,t]);const k=c.filter($=>$.name.toLowerCase().includes(n.toLowerCase())),N=$=>{if(a.find(T=>T.productId===parseInt($.id)))l(a.map(T=>T.productId===parseInt($.id)?{...T,quantity:T.quantity+1,totalPrice:(T.quantity+1)*Number(T.unitPrice)}:T));else{if(!$){console.error("Error: product is undefined");return}l([...a,{id:`temp-${Date.now()}`,productId:parseInt($.id),unitPrice:Number($.purchasePrice),quantity:1,tax:0,discount:0,totalPrice:Number($.purchasePrice),product:{id:$.id,name:$.name}}])}r(""),s(!1)},P=async()=>{var $;try{if(!h||!h.id){alert("Purchase not found"),t("/purchases");return}if(a.length===0){alert("No items to save");return}const E={supplierId:(($=h==null?void 0:h.supplier)==null?void 0:$.id)||null,status:x,paymentStatus:j,notes:y,items:a.map(H=>({productId:H.productId,quantity:H.quantity,unitPrice:H.unitPrice,totalPrice:H.quantity*H.unitPrice,notes:H.notes})),totalAmount:a.reduce((H,F)=>H+F.unitPrice*F.quantity,0)};console.log("Updating purchase with data:",E);const T=await fetch(`/api/purchases/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(E)});if(console.log("Update response status:",T.status),!T.ok){if(T.status===401){t("/login");return}let H="Failed to update purchase";try{const F=await T.json();console.log("Error response data:",F),H=F.message||H}catch{H=`Failed to update purchase: ${T.statusText}`}throw new Error(H)}const D=await T.json();console.log("Successfully updated purchase:",D),alert("Purchase updated successfully"),t("/purchases")}catch(E){console.error("Error updating purchase:",E),alert(E instanceof Error?E.message:"An unexpected error occurred while updating the purchase")}},A=$=>{l(a.filter(E=>E.id!==$))},C=($,E)=>{const T=isNaN(E)?0:E;l(a.map(D=>D.id===$?{...D,quantity:T,totalPrice:T*D.unitPrice}:D))},_=($,E)=>{if(E<=0){alert("Price must be greater than 0");return}l(a.map(T=>T.id===$?{...T,unitPrice:E,totalPrice:T.quantity*E}:T))},R=($,E)=>{l(a.map(T=>T.id===$?{...T,tax:E,totalPrice:M(T.quantity,T.unitPrice,E,T.discount)}:T))},z=($,E)=>{l(a.map(T=>T.id===$?{...T,discount:E,totalPrice:M(T.quantity,T.unitPrice,T.tax,E)}:T))},M=($,E,T,D)=>{const H=$*E,F=H*T/100,B=H*D/100;return H+F-B};return b.useEffect(()=>{const $=E=>{g.current&&!g.current.contains(E.target)&&s(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]),d?o.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("button",{onClick:()=>t("/purchases"),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[o.jsx(Wl,{className:"h-5 w-5"}),"Back to Purchases"]}),o.jsx("span",{className:"text-gray-400",children:"|"}),o.jsx("h1",{className:"text-2xl font-semibold",children:"Edit Purchase"})]}),o.jsxs("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:[o.jsx(No,{className:"inline-block w-5 h-5 mr-2"}),"Save Changes"]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference"}),o.jsx("input",{type:"text",value:(h==null?void 0:h.reference)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-gray-100"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier"}),o.jsx("input",{type:"text",value:((I=h==null?void 0:h.supplier)==null?void 0:I.name)||"N/A",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-gray-100"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),o.jsx("input",{type:"text",value:new Date((h==null?void 0:h.createdAt)||"").toLocaleDateString(),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-gray-100"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsxs("select",{value:x,onChange:$=>w($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"PENDING",children:"PENDING"}),o.jsx("option",{value:"RECEIVED",children:"RECEIVED"}),o.jsx("option",{value:"CANCELLED",children:"CANCELLED"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),o.jsxs("select",{value:j,onChange:$=>S($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"UNPAID",children:"UNPAID"}),o.jsx("option",{value:"PARTIALLY_PAID",children:"PARTIALLY PAID"}),o.jsx("option",{value:"PAID",children:"PAID"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),o.jsx("textarea",{value:y,onChange:$=>v($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]})]}),o.jsxs("div",{className:"mb-6",ref:g,children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add Products"}),o.jsxs("div",{className:"relative",children:[o.jsx(ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{ref:m,type:"text",placeholder:"Search products by name",value:n,onChange:$=>r($.target.value),onFocus:()=>s(!0),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),i&&n&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white shadow-lg max-h-60 rounded-md py-1 text-base overflow-auto focus:outline-none sm:text-sm",children:k.length>0?k.map($=>o.jsxs("div",{className:"cursor-pointer hover:bg-gray-100 px-4 py-2",onClick:()=>N($),children:[o.jsx("div",{className:"flex justify-between",children:o.jsx("span",{className:"font-medium",children:$.name})}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Price: $",$.purchasePrice]})]},$.id)):o.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No products found"})})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tax (%)"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount (%)"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),o.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length>0?a.map($=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:$.product.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsx("input",{type:"number",min:"0",step:"1",value:$.quantity,onChange:E=>C($.id,parseFloat(E.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsx("input",{type:"number",min:"0",step:"0.01",value:$.unitPrice,onChange:E=>_($.id,parseFloat(E.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:$.tax,onChange:E=>R($.id,parseFloat(E.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:$.discount,onChange:E=>z($.id,parseFloat(E.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",$.totalPrice.toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsx("button",{onClick:()=>A($.id),className:"text-red-600 hover:text-red-900",children:o.jsx(Rn,{className:"h-5 w-5"})})})]},$.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:"No items added yet"})})})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"p-4 bg-gray-50 rounded-md",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Number of Items"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.length})]}),o.jsxs("div",{className:"p-4 bg-gray-50 rounded-md",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Total Quantity"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.reduce(($,E)=>$+E.quantity,0)})]}),o.jsxs("div",{className:"p-4 bg-gray-50 rounded-md",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Total Amount"}),o.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["",a.reduce(($,E)=>$+E.totalPrice,0).toFixed(2)]})]})]})})]})]})},rve=async()=>{try{const e=await fetch("/api/permissions/roles",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch roles");return{success:!0,data:await e.json()}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to fetch roles"}}},ive=async(e,t,n)=>{try{const r=await fetch("/api/permissions/roles",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e,description:t,permissions:n})});if(!r.ok)throw new Error("Failed to create role");return{success:!0,data:await r.json()}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to create role"}}},sve=async e=>{try{if(!(await fetch(`/api/permissions/roles/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error("Failed to delete role");return{success:!0}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to delete role"}}},ave=async()=>{try{const e=await fetch("/api/permissions/permissions",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch permission groups");return{success:!0,data:await e.json()}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to fetch permission groups"}}},NE=()=>{const e=St(),[t,n]=b.useState(""),[r,i]=b.useState(!1),[s,a]=b.useState(null),[l,c]=b.useState([{id:"1",name:"Owner",description:"Owner"}]);b.useEffect(()=>{(async()=>{i(!0);const h=await rve();h.success?c(h.data):a(h.error||"Failed to load roles"),i(!1)})()},[]);const u=async f=>{if(window.confirm("Are you sure you want to delete this role?")){const h=await sve(f);h.success?c(l.filter(p=>p.id!==f)):a(h.error||"Failed to delete role")}},d=l.filter(f=>f.name.toLowerCase().includes(t.toLowerCase())||(f.description||"").toLowerCase().includes(t.toLowerCase()));return o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"flex justify-between items-center mb-6",children:o.jsx("h1",{className:"text-2xl font-semibold",children:"Group Permissions"})}),o.jsxs("div",{className:"bg-gray-50 rounded-lg shadow",children:[o.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-gray-200",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Ar.Search,{className:"h-5 w-5 text-gray-500"})}),o.jsx("input",{type:"text",placeholder:"Search this table",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t,onChange:f=>n(f.target.value)})]}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:()=>e("/create-permission"),children:"Create"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Description"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Action"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Loading..."})}):s?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-red-500",children:s})}):d.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No roles found"})}):d.map(f=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:f.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:f.description}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{className:"text-blue-600 hover:text-blue-900",onClick:()=>e(`/edit-permission/${f.id}`),children:o.jsx(Ar.Edit2,{className:"h-5 w-5"})}),o.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>u(f.id),children:o.jsx(Ar.X,{className:"h-5 w-5"})})]})})]},f.id))})]})}),o.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50 sm:px-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"Rows per page:"}),o.jsxs("select",{className:"border border-gray-300 rounded-md text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",defaultValue:"10",children:[o.jsx("option",{value:"10",children:"10"}),o.jsx("option",{value:"25",children:"25"}),o.jsx("option",{value:"50",children:"50"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[o.jsx("span",{children:"1 - 1 of 1"}),o.jsx("button",{className:"px-2 py-1 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent",disabled:!0,children:"prev"}),o.jsx("button",{className:"px-2 py-1 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent",disabled:!0,children:"next"})]})]})})]})]})},ove=()=>{const e=St(),[t,n]=b.useState(""),[r,i]=b.useState(""),[s,a]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState([]);b.useEffect(()=>{(async()=>{try{const p=await ave();if(p.success&&p.data){const g=p.data.map(m=>{var y;return{name:m.name,permissions:((y=m.permissions)==null?void 0:y.map(v=>({id:v.id,name:v.name,checked:!1})))||[]}});d(g)}else c(p.error||"Failed to load permission groups")}catch(p){console.error("Error loading permission groups:",p),c("Failed to load permission groups")}})()},[]);const f=async h=>{h.preventDefault(),a(!0),c(null);const p=u.flatMap(g=>g.permissions.filter(m=>m.checked).map(m=>m.id)).filter(g=>g!==void 0);try{const g=await ive(t,r,p);g.success?e("/group-permissions"):c(g.error||"Failed to create role")}catch(g){console.error("Error creating role:",g),c("An unexpected error occurred while creating the role")}finally{a(!1)}};return o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"flex justify-between items-center mb-6",children:o.jsx("h1",{className:"text-2xl font-semibold",children:"Create Permission"})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),o.jsx("input",{type:"text",id:"role",value:t,onChange:h=>n(h.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter Role Name",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Description"}),o.jsx("input",{type:"text",id:"description",value:r,onChange:h=>i(h.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter Role Description"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Users management"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"users-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"users-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"users-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"users-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"users-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"users-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"users-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"users-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"users-view-all",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"users-view-all",className:"ml-2 block text-sm text-gray-900",children:"View all records of all Users"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Users Permissions"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"permissions-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"permissions-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"permissions-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"permissions-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"permissions-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"permissions-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"permissions-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"permissions-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Products"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"products-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"products-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"products-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"products-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"products-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"products-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"products-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"products-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"products-barcode",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"products-barcode",className:"ml-2 block text-sm text-gray-900",children:"Barcode"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"products-category",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"products-category",className:"ml-2 block text-sm text-gray-900",children:"Category"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"products-unit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"products-unit",className:"ml-2 block text-sm text-gray-900",children:"Unit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"products-import",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"products-import",className:"ml-2 block text-sm text-gray-900",children:"Import products"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"products-brand",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"products-brand",className:"ml-2 block text-sm text-gray-900",children:"Brand"})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Adjustment"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"adjustment-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"adjustment-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"adjustment-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"adjustment-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"adjustment-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"adjustment-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"adjustment-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"adjustment-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Transfer"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"transfer-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"transfer-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"transfer-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"transfer-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"transfer-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"transfer-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"transfer-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"transfer-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Expenses"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"expenses-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"expenses-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"expenses-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"expenses-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"expenses-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"expenses-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"expenses-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"expenses-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Sales"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"sales-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"sales-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"sales-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"sales-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"sales-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"sales-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"sales-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"sales-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Purchases"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"purchases-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"purchases-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"purchases-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"purchases-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"purchases-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"purchases-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"purchases-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"purchases-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h3",{className:"text-lg font-medium mb-4",children:"Quotations"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"quotations-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"quotations-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"quotations-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"quotations-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"quotations-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"quotations-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"quotations-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"quotations-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx("button",{type:"button",onClick:()=>e("/permissions"),className:"px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Create"})]})]})]})},lve=async()=>{try{const e=await pe("/api/sales/today/summary");if(!e.ok){const n=await e.text();throw console.error("Summary API Error:",{status:e.status,statusText:e.statusText,errorText:n}),new Error(`HTTP error! status: ${e.status}`)}const t=await e.json();return console.log("Summary API Response:",t),t}catch(e){throw console.error("Error fetching today summary:",e),e}},N4=async(e,t)=>{try{const n=new Date().toISOString().split("T")[0],r=new Date(Date.now()-7*24*60*60*1e3).toISOString().split("T")[0],i=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0];let s="";e===r&&t===n?(s="/api/sales/weekly",console.log("Using weekly endpoint")):e===i&&t===n?(s="/api/sales/monthly",console.log("Using monthly endpoint")):(s=`/api/sales/daily-summary?startDate=${e}&endDate=${t}`,console.log("Using custom date range endpoint")),console.log(`Fetching data from: ${s}`);const a=await pe(s);if(!a.ok){const c=await a.text();throw console.error("Summary API Error:",{status:a.status,statusText:a.statusText,errorText:c}),new Error(`HTTP error! status: ${a.status}`)}const l=await a.json();return console.log("Summary API Response:",l),l}catch(n){throw console.error("Error fetching date range summary:",n),n}},cve=async()=>{try{const e=await pe("/api/sales/today/hourly");if(!e.ok){const n=await e.text();throw console.error("Hourly Sales API Error:",{status:e.status,statusText:e.statusText,errorText:n}),new Error(`HTTP error! status: ${e.status}`)}const t=await e.json();return console.log("Hourly Sales API Response:",t),t}catch(e){throw console.error("Error fetching today hourly sales:",e),e}},uve=async()=>{try{const e=await pe("/api/sales/today/by-product");if(!e.ok){const n=await e.text();throw console.error("Product Sales API Error:",{status:e.status,statusText:e.statusText,errorText:n}),new Error(`HTTP error! status: ${e.status}`)}const t=await e.json();return console.log("Product Sales API Response:",t),t}catch(e){throw console.error("Error fetching today product sales:",e),e}},k4=async(e,t)=>{try{const n=await pe(`/api/sales/by-product?startDate=${e}&endDate=${t}`);if(!n.ok){const i=await n.text();throw console.error("Product Sales API Error:",{status:n.status,statusText:n.statusText,errorText:i}),new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();return console.log("Product Sales API Response:",r),r}catch(n){throw console.error("Error fetching product sales:",n),n}},dve=async()=>{try{const e=new Date().toISOString().split("T")[0],t=await pe(`/api/sales/by-category?startDate=${e}&endDate=${e}`);if(!t.ok){const r=await t.text();throw console.error("Category Sales API Error:",{status:t.status,statusText:t.statusText,errorText:r}),new Error(`HTTP error! status: ${t.status}`)}const n=await t.json();return console.log("Category Sales API Response:",n),n}catch(e){throw console.error("Error fetching today category sales:",e),e}},P4=async(e,t)=>{try{const n=await pe(`/api/sales/by-category?startDate=${e}&endDate=${t}`);if(!n.ok){const i=await n.text();throw console.error("Category Sales API Error:",{status:n.status,statusText:n.statusText,errorText:i}),new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();return console.log("Category Sales API Response:",r),r}catch(n){throw console.error("Error fetching category sales:",n),n}},fve=async()=>{try{const e=await pe("/api/sales/today/by-employee");if(!e.ok){const n=await e.text();throw console.error("Employee Sales API Error:",{status:e.status,statusText:e.statusText,errorText:n}),new Error(`HTTP error! status: ${e.status}`)}const t=await e.json();return console.log("Employee Sales API Response:",t),t}catch(e){throw console.error("Error fetching today employee sales:",e),e}},C4=async(e,t)=>{try{const n=await pe(`/api/sales/by-employee?startDate=${e}&endDate=${t}`);if(!n.ok){const i=await n.text();throw console.error("Employee Sales API Error:",{status:n.status,statusText:n.statusText,errorText:i}),new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();return console.log("Employee Sales API Response:",r),r}catch(n){throw console.error("Error fetching employee sales:",n),n}},hve=async()=>{try{const e=await pe("/api/sales/today/by-customer");if(!e.ok){const n=await e.text();throw console.error("Customer Sales API Error:",{status:e.status,statusText:e.statusText,errorText:n}),new Error(`HTTP error! status: ${e.status}`)}const t=await e.json();return console.log("Customer Sales API Response:",t),t}catch(e){throw console.error("Error fetching today customer sales:",e),e}},A4=async(e,t)=>{try{const n=await pe(`/api/sales/by-customer?startDate=${e}&endDate=${t}`);if(!n.ok){const i=await n.text();throw console.error("Customer Sales API Error:",{status:n.status,statusText:n.statusText,errorText:i}),new Error(`HTTP error! status: ${n.status}`)}const r=await n.json();return console.log("Customer Sales API Response:",r),r}catch(n){throw console.error("Error fetching customer sales:",n),n}};function pve(e){return typeof e=="object"&&e!==null&&"data"in e}const mve=()=>{const[e,t]=b.useState("daily"),[n,r]=b.useState(null),[i,s]=b.useState([]),[a,l]=b.useState([]),[c,u]=b.useState([]),[d,f]=b.useState([]),[h,p]=b.useState([]),[g,m]=b.useState(!0),[y,v]=b.useState(null),x=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];if(b.useEffect(()=>{(async k=>{m(!0);try{let N,P;const A=new Date().toISOString().split("T")[0],C=new Date(Date.now()-7*24*60*60*1e3).toISOString().split("T")[0],_=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0];if(k==="daily"){const[R,z,M,I,$,E]=await Promise.all([lve(),cve(),uve(),dve(),fve(),hve()]);N=R,P=z,l(Array.isArray(M.data)?M.data:[]),u((Array.isArray(I.data)?I.data:[]).map(T=>({...T,name:T.categoryName,value:T.totalAmount}))),f(Array.isArray($.data)?$.data:[]),p(Array.isArray(E.data)?E.data:[])}else{const R=k==="weekly"?C:_,[z,M,I,$,E,T]=await Promise.all([N4(R,A),{data:[]},k4(R,A),P4(R,A),C4(R,A),A4(R,A)]);N=z,P=M,l(Array.isArray(I.data)?I.data:[]),u((Array.isArray($.data)?$.data:[]).map(D=>({...D,name:D.categoryName,value:D.totalAmount}))),f(Array.isArray(E.data)?E.data:[]),p(Array.isArray(T.data)?T.data:[])}if(N)if(k==="daily"){const R=N.data;r({totalSales:R.totalSales||0,totalRefunds:R.totalRefunds||0,refundAmount:R.refundAmount||0,netRevenue:R.netRevenue||0,date:new Date().toISOString(),transactionCount:R.transactionCount||0})}else{if(!N||!pve(N)){console.error("Invalid summary response format:",N),r({totalSales:0,totalRefunds:0,refundAmount:0,netRevenue:0,date:new Date().toISOString(),transactionCount:0});return}const R=N.data;if(typeof R!="object"||!R){console.error("Invalid response data format:",R);return}const z=R;r({totalSales:z.totalSales||0,totalRefunds:z.totalRefunds||0,refundAmount:z.refundAmount||0,netRevenue:z.netRevenue||0,transactionCount:z.transactionCount||0,date:new Date().toISOString(),dailyData:Array.isArray(z.dailyData)?z.dailyData:[]})}P!=null&&P.data&&s(P.data),v(null)}catch(N){console.error("Error details:",N),v(`Failed to fetch ${k} sales data. Please try again later.`)}finally{m(!1)}})(e)},[e]),g)return o.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."});if(y)return o.jsx("div",{className:"flex items-center justify-center h-screen text-red-600",children:y});if(!n)return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No Data"}),o.jsx("p",{children:"No summary data available for the selected period."})]});const j=(()=>{if(e==="daily")return i.map(k=>({label:`${k.hour}:00`,value:k.totalAmount||0}));const S=n;if(!S.dailyData||!S.dailyData.length)return[];if(e==="weekly")return S.dailyData.map(k=>({label:new Date(k.date).toLocaleDateString(void 0,{weekday:"short"}),value:k.netRevenue||0}));{const k={};return S.dailyData.forEach(N=>{const P=new Date(N.date),C=`Week ${Math.ceil(P.getDate()/7)}`;k[C]=(k[C]||0)+(N.netRevenue||0)}),Object.entries(k).map(([N,P])=>({label:N,value:P}))}})();return o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Sales Report"}),o.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[o.jsx("button",{type:"button",onClick:()=>t("daily"),className:`px-4 py-2 text-sm font-medium rounded-l-md border ${e==="daily"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Daily"}),o.jsx("button",{type:"button",onClick:()=>t("weekly"),className:`px-4 py-2 text-sm font-medium border-t border-b ${e==="weekly"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Weekly"}),o.jsx("button",{type:"button",onClick:()=>t("monthly"),className:`px-4 py-2 text-sm font-medium rounded-r-md border ${e==="monthly"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Monthly"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("h2",{className:"text-lg font-semibold mb-4",children:[e==="daily"?"Daily":e==="weekly"?"Weekly":"Monthly"," Summary"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Total Sales"}),o.jsxs("span",{className:"font-medium",children:["",((n==null?void 0:n.totalSales)??0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Total Refunds"}),o.jsxs("span",{className:"font-medium text-red-500",children:["-",((n==null?void 0:n.refundAmount)??0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between border-t pt-2",children:[o.jsx("span",{className:"text-gray-600 font-semibold",children:"Net Revenue"}),o.jsxs("span",{className:`font-medium ${((n==null?void 0:n.netRevenue)??0)>=0?"text-green-500":"text-red-500"}`,children:["",((n==null?void 0:n.netRevenue)??0).toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Period:"}),o.jsx("span",{className:"font-medium",children:e==="daily"&&(n!=null&&n.date)?new Date(n.date).toLocaleDateString():`Last ${e==="weekly"?"7":"30"} days`})]}),o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"text-gray-600",children:"Transactions:"}),o.jsx("span",{className:"font-medium",children:(n==null?void 0:n.transactionCount)??0})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 md:col-span-2",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:e==="daily"?"Hourly Sales":`${e==="weekly"?"Daily":"Weekly"} Sales`}),o.jsx("div",{className:"h-64",children:j.length>0?o.jsxs(wfe,{width:600,height:250,data:j,margin:{top:5,right:30,left:20,bottom:5},children:[o.jsx(tj,{strokeDasharray:"3 3"}),o.jsx(Lc,{dataKey:"label"}),o.jsx(Fc,{}),o.jsx(cr,{formatter:S=>`${Number(S).toFixed(2)}`}),o.jsx(ns,{}),o.jsx(zf,{type:"monotone",dataKey:"value",name:"Sales",stroke:"#8884d8"})]}):o.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No sales data available for selected period"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top Products"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:a.slice(0,5).map((S,k)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.productName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.quantity||0}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",(S.totalAmount||0).toFixed(2)]})]},k))})]})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Sales by Category"}),o.jsx("div",{className:"h-64",children:o.jsxs(d$,{width:400,height:250,children:[o.jsx(Mi,{data:c,cx:200,cy:125,innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"totalAmount",nameKey:"categoryName",label:!0,children:c.map((S,k)=>o.jsx(Rf,{fill:x[k%x.length]},`cell-${k}`))}),o.jsx(cr,{formatter:S=>`${Number(S).toFixed(2)}`}),o.jsx(ns,{})]})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Employee Performance"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sales"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Commission"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:d.slice(0,5).map((S,k)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.employeeName}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",(S.totalAmount||0).toFixed(2)]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",((S.totalAmount||0)*.05).toFixed(2)]})]},k))})]})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top Customers"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purchases"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Spent"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Purchase"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:h.slice(0,5).map((S,k)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.customerName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.totalPurchases||0}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",(S.totalSpent||0).toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.lastPurchase?new Date(S.lastPurchase).toLocaleDateString():"N/A"})]},k))})]})})]})]})]})};function gve(){const[e,t]=b.useState(""),[n,r]=b.useState(""),[i,s]=b.useState(""),[a,l]=b.useState([]),c=[{value:"summary",label:"Summary Sales"},{value:"customer",label:"Customer Sales"},{value:"product",label:"Product Sales"},{value:"employee",label:"Employee Performance"},{value:"category",label:"Category Sales"}],[u,d]=b.useState(!1),[f,h]=b.useState(null),p=()=>{var k;if(a.length===0){alert("No data to print. Please generate a report first.");return}const m=window.open("","_blank");if(!m){alert("Please allow popups to print the report.");return}const y=((k=c.find(N=>N.value===i))==null?void 0:k.label)||"Report",v=`${e} to ${n}`;let x="",w="";const j={totalSales:0,totalRefunds:0,netRevenue:0,totalAmount:0,totalQuantity:0,recordCount:a.length};i==="summary"?(x=`
        <tr>
          <th>Date</th>
          <th>Total Sales</th>
          <th>Total Refunds</th>
          <th>Net Revenue</th>
        </tr>
      `,a.forEach(N=>{"netRevenue"in N&&(w+=`
            <tr>
              <td>${N.date?new Date(N.date).toLocaleDateString():"-"}</td>
              <td>{sale.totalSales.toFixed(2)}</td>
              <td>{sale.totalRefunds.toFixed(2)}</td>
              <td>{sale.netRevenue.toFixed(2)}</td>
            </tr>
          `,j.totalSales+=N.totalSales,j.totalRefunds+=N.totalRefunds,j.netRevenue+=N.netRevenue)})):i==="customer"?(x=`
        <tr>
          <th>Customer</th>
          <th>Total Spent</th>
          <th>Number of Sales</th>
          <th>Last Purchase</th>
        </tr>
      `,a.forEach(N=>{"customerName"in N&&(w+=`
            <tr>
              <td>${N.customerName}</td>
              <td>{sale.totalAmount.toFixed(2)}</td>
              <td>${N.numberOfSales}</td>
              <td>${N.lastPurchase?new Date(N.lastPurchase).toLocaleDateString():"-"}</td>
            </tr>
          `,j.totalAmount+=N.totalAmount,j.totalSales+=N.numberOfSales)})):i==="product"?(x=`
        <tr>
          <th>Product</th>
          <th>Quantity Sold</th>
          <th>Total Amount</th>
          <th>Number of Sales</th>
          <th>Salesperson</th>
        </tr>
      `,a.forEach(N=>{"productName"in N&&(w+=`
            <tr>
              <td>${N.productName}</td>
              <td>${N.quantity}</td>
              <td>{sale.totalAmount.toFixed(2)}</td>
              <td>${N.numberOfSales}</td>
              <td>${N.salesperson||"Unknown"}</td>
            </tr>
          `,j.totalAmount+=N.totalAmount,j.totalQuantity+=N.quantity,j.totalSales+=N.numberOfSales)})):i==="employee"?(x=`
        <tr>
          <th>Employee</th>
          <th>Total Sales</th>
          <th>Number of Sales</th>
        </tr>
      `,a.forEach(N=>{"employeeName"in N&&(w+=`
            <tr>
              <td>${N.employeeName}</td>
              <td>{sale.totalAmount.toFixed(2)}</td>
              <td>${N.numberOfSales}</td>
            </tr>
          `,j.totalAmount+=N.totalAmount,j.totalSales+=N.numberOfSales)})):i==="category"&&(x=`
        <tr>
          <th>Date</th>
          <th>Category</th>
          <th>Total Sales</th>
          <th>Items Sold</th>
        </tr>
      `,a.forEach(N=>{"categoryName"in N&&(w+=`
            <tr>
              <td>${new Date(N.date).toLocaleDateString()}</td>
              <td>${N.categoryName}</td>
              <td>{sale.totalAmount.toFixed(2)}</td>
              <td>${N.quantity}</td>
            </tr>
          `,j.totalAmount+=N.totalAmount,j.totalQuantity+=N.quantity)}));const S=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>${y} - ${v}</title>
          <style>
            @page {
              margin: 1in;
              size: A4;
            }
            
            body {
              font-family: 'Times New Roman', Times, serif;
              font-size: 12pt;
              line-height: 1.5;
              color: #000;
              margin: 0;
              padding: 0;
            }
            
            .header {
              text-align: center;
              margin-bottom: 30px;
              border-bottom: 2px solid #000;
              padding-bottom: 15px;
            }
            
            .company-name {
              font-size: 18pt;
              font-weight: bold;
              margin-bottom: 5px;
            }
            
            .report-title {
              font-size: 16pt;
              font-weight: bold;
              margin-bottom: 5px;
            }
            
            .date-range {
              font-size: 12pt;
              margin-bottom: 10px;
            }
            
            .generated-date {
              font-size: 10pt;
              color: #666;
            }
            
            .content {
              margin-top: 20px;
            }
            
            table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 20px;
              font-size: 11pt;
            }
            
            th, td {
              border: 1px solid #000;
              padding: 8px;
              text-align: left;
            }
            
            th {
              background-color: #f0f0f0;
              font-weight: bold;
              text-align: center;
            }
            
            td {
              vertical-align: top;
            }
            
            .summary {
              margin-top: 30px;
              padding-top: 15px;
              border-top: 1px solid #ccc;
            }
            
            .summary-item {
              margin-bottom: 5px;
            }
            
            .footer {
              margin-top: 40px;
              text-align: center;
              font-size: 10pt;
              color: #666;
              border-top: 1px solid #ccc;
              padding-top: 15px;
            }
            
            @media print {
              body {
                font-size: 10pt;
              }
              
              .no-print {
                display: none;
              }
              
              table {
                font-size: 9pt;
              }
              
              th, td {
                padding: 6px;
              }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company-name">Sales Management System</div>
            <div class="report-title">${y}</div>
            <div class="date-range">Period: ${v}</div>
            <div class="generated-date">Generated on: ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}</div>
          </div>
          
          <div class="content">
            <table>
              <thead>
                ${x}
              </thead>
              <tbody>
                ${w}
              </tbody>
            </table>
            
            <div class="summary">
              <strong>Report Summary:</strong>
              <div class="summary-item">Total Records: ${a.length}</div>
              <div class="summary-item">Report Type: ${y}</div>
              <div class="summary-item">Date Range: ${v}</div>
              ${i==="summary"?`
                <div class="summary-item">Total Sales: ${j.totalSales.toFixed(2)}</div>
                <div class="summary-item">Total Refunds: ${j.totalRefunds.toFixed(2)}</div>
                <div class="summary-item">Net Revenue: ${j.netRevenue.toFixed(2)}</div>
              `:""}
              ${i==="customer"?`
                <div class="summary-item">Total Amount: ${j.totalAmount.toFixed(2)}</div>
                <div class="summary-item">Total Sales Count: ${j.totalSales}</div>
              `:""}
              ${i==="product"?`
                <div class="summary-item">Total Amount: ${j.totalAmount.toFixed(2)}</div>
                <div class="summary-item">Total Quantity Sold: ${j.totalQuantity}</div>
                <div class="summary-item">Total Sales Count: ${j.totalSales}</div>
              `:""}
              ${i==="employee"?`
                <div class="summary-item">Total Amount: ${j.totalAmount.toFixed(2)}</div>
                <div class="summary-item">Total Sales Count: ${j.totalSales}</div>
              `:""}
              ${i==="category"?`
                <div class="summary-item">Total Amount: ${j.totalAmount.toFixed(2)}</div>
                <div class="summary-item">Total Items Sold: ${j.totalQuantity}</div>
              `:""}
            </div>
            
            <div class="footer">
              <p>This report was generated automatically by the Sales Management System.</p>
              <p>Page 1 of 1</p>
            </div>
          </div>
        </body>
      </html>
    `;m.document.write(S),m.document.close(),m.onload=()=>{setTimeout(()=>{m.print(),m.close()},250)}},g=async m=>{if(m.preventDefault(),!e||!n||!i){h("Please fill in all fields");return}d(!0),h(null);try{let y;switch(i){case"summary":y=await N4(e,n);break;case"customer":y=await A4(e,n);break;case"product":y=await k4(e,n);break;case"employee":y=await C4(e,n);break;case"category":y=await P4(e,n);break;default:throw new Error("Invalid report type")}if(y!=null&&y.data)if(i==="summary"&&!Array.isArray(y.data)){const v=y.data,x={totalSales:v.totalSales||0,totalRefunds:v.totalRefunds||0,refundAmount:v.refundAmount||0,netRevenue:v.netRevenue||0,transactionCount:v.transactionCount||0,date:new Date().toISOString()};l([x])}else l(Array.isArray(y.data)?y.data:[y.data])}catch(y){console.error("Error fetching sales data:",y),h("Failed to fetch sales data")}finally{d(!1)}};return o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Date Range Report"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Generate reports for any date range - daily, monthly, yearly, or custom periods."}),o.jsxs("form",{onSubmit:g,className:"mb-8 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),o.jsx("input",{type:"date",id:"startDate",value:e,onChange:m=>t(m.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),o.jsx("input",{type:"date",id:"endDate",value:n,onChange:m=>r(m.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Report Type"}),o.jsxs("select",{id:"reportType",value:i,onChange:m=>s(m.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[o.jsx("option",{value:"",children:"Select a report type"}),c.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))]})]})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[a.length>0&&o.jsx("button",{type:"button",onClick:p,className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Print Report"}),o.jsx("button",{type:"submit",disabled:u,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:u?"Loading...":"Generate Report"})]})]}),f&&o.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:o.jsx("p",{children:f})}),a.length>0?o.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[i==="summary"&&o.jsxs(o.Fragment,{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Refunds"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Revenue"})]}),i==="customer"&&o.jsxs(o.Fragment,{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Spent"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Number of Sales"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Purchase"})]}),i==="product"&&o.jsxs(o.Fragment,{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity Sold"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Number of Sales"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salesperson"})]}),i==="employee"&&o.jsxs(o.Fragment,{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Number of Sales"})]}),i==="category"&&o.jsxs(o.Fragment,{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items Sold"})]})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((m,y)=>i==="summary"&&"netRevenue"in m?o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.date?new Date(m.date).toLocaleDateString():"-"}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalSales.toFixed(2)]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalRefunds.toFixed(2)]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.netRevenue.toFixed(2)]})]},y):i==="customer"&&"customerName"in m?o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.customerName}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalAmount.toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.numberOfSales}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.lastPurchase?new Date(m.lastPurchase).toLocaleDateString():"-"})]},y):i==="employee"&&"employeeName"in m?o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.employeeName}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalAmount.toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.numberOfSales})]},y):i==="product"&&"productName"in m?o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.productName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.quantity}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalAmount.toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.numberOfSales}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.salesperson||"Unknown"})]},y):i==="category"&&"categoryName"in m?o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.date).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.categoryName}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalAmount.toFixed(2)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.quantity})]},y):null)})]})}):!u&&o.jsx("div",{className:"text-center text-gray-500 mt-4",children:"No data available for the selected criteria"})]})}const yve=()=>{const{currentUser:e}=ko(),[t,n]=b.useState([]),[r,i]=b.useState(!0),[s,a]=b.useState(""),l=St();b.useEffect(()=>{(async()=>{try{const h=await fetch("/api/held-sales",{credentials:"include"});if(h.ok){const p=await h.json();n(p)}else h.status===401?l("/login"):console.error("Failed to fetch held sales")}catch(h){console.error("Error fetching held sales:",h)}finally{i(!1)}})()},[l]);const c=t.filter(f=>{var m,y;const h=s.toLowerCase(),p=f.id.toString(),g=((y=(m=f.customer)==null?void 0:m.name)==null?void 0:y.toLowerCase())||"";return p.includes(h)||g.includes(h)}),u=async f=>{if(window.confirm("Are you sure you want to convert this held sale to a regular sale?"))try{const h=await fetch(`/api/held-sales/${f}/convert`,{method:"POST",credentials:"include"});if(h.ok){const p=await h.json();n(t.filter(g=>g.id!==f)),l(`/pos?saleId=${p.id}`)}else throw new Error("Failed to convert held sale")}catch(h){console.error("Error converting held sale:",h),alert("Failed to convert held sale. Please try again.")}};if(r)return o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});const d=f=>{const h=typeof f=="string"?parseFloat(f):f;return isNaN(h)?"0.00":h.toFixed(2)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Held Sales"}),o.jsxs("button",{onClick:()=>l("/pos"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[o.jsx(Wl,{className:"w-4 h-4 mr-2"}),"Back to POS"]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(ci,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",placeholder:"Search by sale ID or customer name...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:s,onChange:f=>a(f.target.value)})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale ID"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salesperson"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No held sales found"})}):c.map(f=>{var h;return o.jsxs("tr",{children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["#",f.id]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.customer?f.customer.name:"Walk-in Customer"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((h=f.user)==null?void 0:h.name)||"Unknown"}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",d(f.totalAmount)]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(f.createdAt).toLocaleString()}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[o.jsxs("button",{onClick:()=>l(`/pos?heldSaleId=${f.id}`),className:"text-blue-500 hover:text-blue-700 inline-flex items-center",children:[o.jsx(Kg,{className:"w-4 h-4 mr-1"}),"Edit"]}),o.jsxs("button",{onClick:()=>u(f.id),className:"text-green-500 hover:text-green-700 inline-flex items-center",children:[o.jsx(Ef,{className:"w-4 h-4 mr-1"}),"Convert to Sale"]}),(e==null?void 0:e.role)==="ADMIN"&&o.jsxs("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this held sale?"))try{if((await fetch(`/api/held-sales/${f.id}`,{method:"DELETE",credentials:"include"})).ok)n(t.filter(g=>g.id!==f.id));else throw new Error("Failed to delete held sale")}catch(p){console.error("Error deleting held sale:",p),alert("Failed to delete held sale. Please try again.")}},className:"text-red-500 hover:text-red-700 inline-flex items-center",children:[o.jsx(Rn,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]},f.id)})})]})})]})},xve=()=>{const[e,t]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(""),[a,l]=b.useState(1),[c,u]=b.useState(1),[d,f]=b.useState(0),[h,p]=b.useState(""),[g,m]=b.useState(""),[y,v]=b.useState(""),[x,w]=b.useState(!1),[j,S]=b.useState(!1),[k,N]=b.useState(!1),[P,A]=b.useState(!1),[C,_]=b.useState([]),[R,z]=b.useState(new Date().toISOString().split("T")[0]),[M,I]=b.useState(!1),[$,E]=b.useState({dueDate:"",reminderDays:3}),[T,D]=b.useState(null),[H,F]=b.useState([]),[B,Z]=b.useState({date:new Date().toISOString().split("T")[0],receivedAmount:0,payingAmount:0,change:0,paymentChoice:"cash",note:""}),V=St(),G=10,X=b.useCallback(async()=>{try{if(r(!0),!sessionStorage.getItem("authToken")){console.error("No auth token found"),V("/login");return}const K=new URLSearchParams({page:a.toString(),limit:G.toString(),search:i,...h&&{paymentStatus:h},...g&&{startDate:g},...y&&{endDate:y}}),J=await pe(`/api/credit-sales?${K}`);if(J.ok){const oe=await J.json();t(oe.sales),u(oe.pagination.totalPages),f(oe.pagination.totalCount)}else J.status===401?(console.error("Authentication failed - redirecting to login"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),V("/login")):console.error("Failed to fetch credit sales - status:",J.status)}catch(se){console.error("Error fetching credit sales:",se),se instanceof Error&&se.message.includes("Authentication required")&&(console.error("Authentication error - redirecting to login"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),V("/login"))}finally{r(!1)}},[a,i,h,g,y,V]),U=async se=>{try{console.log("Fetching payments for sale:",se),console.log("Auth token exists:",!!sessionStorage.getItem("authToken"));const K=sessionStorage.getItem("authToken");if(!K){console.error("No auth token for fetchSalePayments");return}const J=await fetch(`https://localhost:5443/api/credit-sales/${se}/payments`,{method:"GET",headers:{Authorization:`Bearer ${K}`},credentials:"include"});if(J.ok){const oe=await J.json();F(oe),console.log("Fetched payments successfully:",oe.length,"payments")}else console.error("Failed to fetch sale payments - Response not ok:",J.status)}catch(K){console.error("Error fetching sale payments - Exception:",K)}},ne=async()=>{if(!T)return;const se=he();if(!se.isValid){alert(se.message);return}const K=sessionStorage.getItem("authToken");if(!K){alert("Authentication required. Please login again."),V("/login");return}try{console.log("Adding payment for sale:",T.id),console.log("Payment form data:",B),console.log("Auth token exists:",!!K);const J=await fetch(`https://localhost:5443/api/credit-sales/${T.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${K}`},credentials:"include",body:JSON.stringify(B)});if(J.ok){const oe=await J.json();console.log("Payment added successfully:",oe),alert("Payment added successfully!"),w(!1),fe(),X()}else if(J.status===401)console.error("Authentication failed for payment request"),alert("Session expired. Please login again."),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),V("/login");else{let oe;try{oe=await J.json()}catch{oe={message:"Unknown server error"}}console.error("Error adding payment - Response not ok:",J.status,oe),alert(`Failed to add payment: ${oe.message||`Server error (${J.status})`}`)}}catch(J){console.error("Error adding payment - Exception:",J),J instanceof Error?J.message.includes("Authentication required")?(alert("Session expired. Please login again."),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),V("/login")):J.message.includes("Failed to fetch")?alert("Network error: Cannot connect to server. Please check your connection."):alert(`Error adding payment: ${J.message}`):alert("Error adding payment: Unknown error occurred")}},q=async se=>{if(confirm("Are you sure you want to delete this sale?"))try{const K=await pe(`/api/sales/${se}`,{method:"DELETE"});if(K.ok)X();else{const J=await K.json().catch(()=>({}));console.error("Error deleting sale:",J)}}catch(K){console.error("Error deleting sale:",K)}},ie=se=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(se)),re=se=>{const K={PAID:"bg-green-100 text-green-800",UNPAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800"};return o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K[se]||"bg-gray-100 text-gray-800"}`,children:se.replace("_"," ")})},ee=(se,K)=>{const J=se-K;Z(oe=>({...oe,change:Math.max(0,J)}))},he=()=>{if(!B.date)return{isValid:!1,message:"Please select a payment date"};if(!B.receivedAmount||B.receivedAmount<0)return{isValid:!1,message:"Please enter a valid total amount (minimum 0)"};if(!B.payingAmount||B.payingAmount<=0)return{isValid:!1,message:"Please enter a valid paying amount (must be greater than 0)"};if(B.payingAmount>Number(T==null?void 0:T.amountDue))return{isValid:!1,message:"Paying amount cannot exceed the remaining amount due"};if(B.receivedAmount<B.payingAmount)return{isValid:!1,message:"Total amount cannot be less than paying amount"};const se=.01;return B.payingAmount<se?{isValid:!1,message:`Minimum payment amount is ${ie(se)}`}:{isValid:!0,message:""}},fe=()=>{Z({date:new Date().toISOString().split("T")[0],receivedAmount:0,payingAmount:0,change:0,paymentChoice:"cash",note:""})},je=b.useCallback(()=>{if(!e.length)return;const se=new Date,K=new Date(R||se),J=e.filter(oe=>{if(oe.paymentStatus==="PAID")return!1;if(oe.dueDate)return new Date(oe.dueDate)<=K;const me=new Date(oe.createdAt);return Math.floor((se.getTime()-me.getTime())/(1e3*60*60*24))>=30});_(J),I(J.length>0)},[e,R]),Se=async()=>{if(!T||!$.dueDate){alert("Please select a due date");return}const se=sessionStorage.getItem("authToken");if(!se){alert("Authentication required. Please login again."),V("/login");return}try{const K=await fetch(`https://localhost:5443/api/credit-sales/${T.id}/due-date`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${se}`},credentials:"include",body:JSON.stringify({dueDate:$.dueDate,reminderDays:$.reminderDays})});if(K.ok)alert("Due date set successfully!"),N(!1),E({dueDate:"",reminderDays:3}),X();else{const J=await K.json().catch(()=>({}));alert(`Failed to set due date: ${J.message||"Server error"}`)}}catch(K){console.error("Error setting due date:",K),alert("Error setting due date. Please try again.")}},Ce=se=>{if(!se.dueDate)return null;const K=new Date,J=new Date(se.dueDate),oe=K.getTime()-J.getTime(),me=Math.ceil(oe/(1e3*60*60*24));return me>0?me:null},Oe=se=>{const K=Number(se.totalAmount),J=Number(se.amountPaid);return K>0?J/K*100:0};return b.useEffect(()=>{X()},[X]),b.useEffect(()=>{const se=setTimeout(()=>{l(1)},500);return()=>clearTimeout(se)},[i]),b.useEffect(()=>{B.receivedAmount&&B.payingAmount&&ee(B.receivedAmount,B.payingAmount)},[B.receivedAmount,B.payingAmount]),b.useEffect(()=>{je()},[je]),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Debtors Management"}),o.jsx("p",{className:"text-gray-600",children:"Manage credit sales and payment tracking"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>A(!0),className:`px-4 py-2 rounded-md text-sm font-medium ${C.length>0?"bg-red-500 text-white hover:bg-red-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cB,{className:"h-4 w-4"}),"Due Payments (",C.length,")"]})}),o.jsx("button",{onClick:()=>{z(new Date().toISOString().split("T")[0]),je()},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(oa,{className:"h-4 w-4"}),"Check Due Payments"]})})]})]}),M&&C.length>0&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Cf,{className:"h-5 w-5 text-red-500 mr-2"}),o.jsxs("span",{className:"text-red-800 font-medium",children:[C.length," payment(s) are due or overdue!"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>A(!0),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"View Details"}),o.jsx("button",{onClick:()=>I(!1),className:"text-red-400 hover:text-red-600",children:o.jsx(Lt,{className:"h-4 w-4"})})]})]})})]}),o.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),o.jsxs("div",{className:"relative",children:[o.jsx(ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),o.jsx("input",{type:"text",value:i,onChange:se=>s(se.target.value),placeholder:"Search by Sale ID or Customer...",className:"pl-10 pr-3 py-2 border border-gray-300 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),o.jsxs("select",{value:h,onChange:se=>p(se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"All Status"}),o.jsx("option",{value:"UNPAID",children:"Unpaid"}),o.jsx("option",{value:"PARTIALLY_PAID",children:"Partially Paid"}),o.jsx("option",{value:"PAID",children:"Paid"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),o.jsx("input",{type:"date",value:g,onChange:se=>m(se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),o.jsx("input",{type:"date",value:y,onChange:se=>v(se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{onClick:()=>{s(""),p(""),m(""),v(""),l(1)},className:"w-full px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Clear Filters"})})]})}),o.jsx("div",{className:"mb-4",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(a-1)*G+1," to ",Math.min(a*G,d)," of ",d," credit sales"]})}),o.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale ID"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount Due"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Progress"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DateTime"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?o.jsx("tr",{children:o.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:[o.jsx(An,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),"Loading credit sales..."]})}):e.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"No credit sales found"})}):e.map(se=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",se.id]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:se.customer?se.customer.name:"Walk-in Customer"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ie(se.totalAmount)}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-red-600 font-medium",children:ie(se.amountDue)}),se.dueDate&&o.jsxs("div",{className:"text-xs text-gray-500",children:["Due: ",new Date(se.dueDate).toLocaleDateString(),Ce(se)&&o.jsxs("span",{className:"text-red-500 font-medium ml-1",children:["(",Ce(se)," days overdue)"]})]})]}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-green-600 font-medium",children:ie(se.amountPaid)}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Oe(se))}%`}})}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Oe(se).toFixed(1),"% paid"]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(se.createdAt).toLocaleString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:re(se.paymentStatus)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>V(`/sales/${se.id}`),className:"text-blue-600 hover:text-blue-900",title:"View Purchase",children:o.jsx(ia,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>{D(se),U(se.id),S(!0)},className:"text-green-600 hover:text-green-900",title:"View Payments",children:o.jsx(Vg,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>{D(se),Z({date:new Date().toISOString().split("T")[0],receivedAmount:Number(se.amountDue),payingAmount:Number(se.amountDue),change:0,paymentChoice:"cash",note:""}),w(!0)},className:"text-purple-600 hover:text-purple-900",title:"Add Payment",children:o.jsx(Hn,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>{D(se),E({dueDate:se.dueDate?new Date(se.dueDate).toISOString().split("T")[0]:"",reminderDays:3}),N(!0)},className:"text-orange-600 hover:text-orange-900",title:"Set Due Date",children:o.jsx(uI,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>V(`/sales/${se.id}/edit`),className:"text-yellow-600 hover:text-yellow-900",title:"Edit Purchase",children:o.jsx(Kg,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>q(se.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:o.jsx(Rn,{className:"h-4 w-4"})})]})})]},se.id))})]})})}),c>1&&o.jsx("div",{className:"mt-6 flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>l(se=>Math.max(1,se-1)),disabled:a===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:o.jsx(fI,{className:"h-4 w-4"})}),o.jsxs("span",{className:"px-3 py-2 text-sm font-medium text-gray-700",children:["Page ",a," of ",c]}),o.jsx("button",{onClick:()=>l(se=>Math.min(c,se+1)),disabled:a===c,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:o.jsx(Pl,{className:"h-4 w-4"})})]})}),x&&T&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add Payment for Sale #",T.id]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Total:"}),o.jsx("div",{className:"font-semibold",children:ie(T.totalAmount)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Paid:"}),o.jsx("div",{className:"font-semibold text-green-600",children:ie(T.amountPaid)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Remaining:"}),o.jsx("div",{className:"font-semibold text-red-600",children:ie(T.amountDue)})]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Oe(T))}%`}})}),o.jsxs("div",{className:"text-center text-xs text-gray-600",children:[Oe(T).toFixed(1),"% paid  Installment Payment Allowed"]}),T.dueDate&&o.jsxs("div",{className:"mt-2 text-center",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Due Date: "}),o.jsx("span",{className:"text-xs font-medium text-orange-600",children:new Date(T.dueDate).toLocaleDateString()}),Ce(T)&&o.jsxs("span",{className:"text-xs text-red-600 font-medium ml-1",children:["(",Ce(T)," days overdue)"]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),o.jsx("input",{type:"date",value:B.date,onChange:se=>Z(K=>({...K,date:se.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),o.jsx("input",{type:"number",value:B.receivedAmount||"",onChange:se=>{const K=se.target.value===""?0:Number(se.target.value);Z(J=>({...J,receivedAmount:K}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.01",min:"0",placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Paying Amount (Any amount up to ",ie(T.amountDue),")"]}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"number",value:B.payingAmount||"",onChange:se=>{const K=se.target.value===""?0:Number(se.target.value);Z(J=>({...J,payingAmount:K}))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.01",min:"0.01",max:Number(T.amountDue),placeholder:"Enter any amount"}),o.jsx("button",{type:"button",onClick:()=>{const se=Number(T.amountDue);Z(K=>({...K,payingAmount:se,receivedAmount:se}))},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 text-sm",title:"Pay full remaining amount",children:"Full"})]}),o.jsx("div",{className:"flex gap-2",children:[25,50,75].map(se=>{const K=Number(T.amountDue)*se/100;return o.jsxs("button",{type:"button",onClick:()=>{Z(J=>({...J,payingAmount:K,receivedAmount:K}))},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:[se,"% (",ie(K),")"]},se)})}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" You can make partial payments. Pay any amount to reduce the debt."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balance"}),o.jsx("input",{type:"number",value:B.change,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",step:"0.01"}),B.change<0&&o.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Total amount is less than paying amount"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),o.jsxs("select",{value:B.paymentChoice,onChange:se=>Z(K=>({...K,paymentChoice:se.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"cash",children:"Cash"}),o.jsx("option",{value:"card",children:"Card"}),o.jsx("option",{value:"mobile_money",children:"Mobile Money"}),o.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note"}),o.jsx("textarea",{value:B.note,onChange:se=>Z(K=>({...K,note:se.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx("button",{onClick:()=>{w(!1),fe()},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{onClick:ne,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!B.payingAmount||B.payingAmount<=0,children:"Add Payment"})]})]})}),k&&T&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Set Due Date for Sale #",T.id]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),o.jsx("input",{type:"date",value:$.dueDate,onChange:se=>E(K=>({...K,dueDate:se.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().split("T")[0]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reminder Days Before Due"}),o.jsxs("select",{value:$.reminderDays,onChange:se=>E(K=>({...K,reminderDays:Number(se.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:1,children:"1 day before"}),o.jsx("option",{value:3,children:"3 days before"}),o.jsx("option",{value:7,children:"1 week before"}),o.jsx("option",{value:14,children:"2 weeks before"}),o.jsx("option",{value:30,children:"1 month before"})]})]}),o.jsx("div",{className:"bg-blue-50 p-3 rounded-lg text-sm text-blue-800",children:o.jsx("p",{children:" Setting a due date helps track payment deadlines and sends notifications when payments are approaching or overdue."})})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx("button",{onClick:()=>{N(!1),E({dueDate:"",reminderDays:3})},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),o.jsx("button",{onClick:Se,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:!$.dueDate,children:"Set Due Date"})]})]})}),P&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Due Payment Notifications"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check payments due by date:"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"date",value:R,onChange:se=>z(se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("button",{onClick:je,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Update"})]})]}),C.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Af,{className:"h-12 w-12 mx-auto mb-3 text-green-500"}),o.jsx("p",{children:"No payments due by the selected date!"})]}):o.jsx("div",{className:"space-y-3",children:C.map(se=>{const K=Ce(se);return o.jsx("div",{className:`p-4 rounded-lg border ${K?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"}`,children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium text-gray-900",children:["Sale #",se.id]}),o.jsx("p",{className:"text-sm text-gray-600",children:se.customer?se.customer.name:"Walk-in Customer"}),o.jsxs("p",{className:"text-sm font-medium text-red-600",children:["Amount Due: ",ie(se.amountDue)]}),se.dueDate&&o.jsxs("p",{className:"text-sm text-gray-500",children:["Due: ",new Date(se.dueDate).toLocaleDateString(),K&&o.jsxs("span",{className:"text-red-600 font-medium ml-1",children:["(",K," days overdue)"]})]})]}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{onClick:()=>{D(se),Z({date:new Date().toISOString().split("T")[0],receivedAmount:Number(se.amountDue),payingAmount:Number(se.amountDue),change:0,paymentChoice:"cash",note:""}),A(!1),w(!0)},className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"Add Payment"})})]})},se.id)})}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})}),j&&T&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[o.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Payment History for Sale #",T.id]}),o.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Total Amount:"}),o.jsx("div",{className:"font-semibold",children:ie(T.totalAmount)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Amount Paid:"}),o.jsx("div",{className:"font-semibold text-green-600",children:ie(T.amountPaid)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Amount Due:"}),o.jsx("div",{className:"font-semibold text-red-600",children:ie(T.amountDue)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium text-gray-600",children:"Status:"}),o.jsx("div",{children:re(T.paymentStatus)})]})]})}),H.length===0?o.jsx("p",{className:"text-gray-500 text-center py-8",children:"No payments recorded for this sale"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Paying"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Note"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(se=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(se.date).toLocaleDateString()}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-mono",children:se.reference}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ie(se.receivedAmount)}),o.jsx("td",{className:"px-4 py-3 text-sm text-green-600 font-medium",children:ie(se.payingAmount)}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:ie(se.change)}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 capitalize",children:se.paymentChoice.replace("_"," ")}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:se.note||"-"})]},se.id))})]})}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})]})},vve=()=>{const e=St(),[t,n]=b.useState({name:"",currentPassword:"",newPassword:"",confirmPassword:""}),[r,i]=b.useState(!1),[s,a]=b.useState(null),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,h]=b.useState(!1);W.useEffect(()=>{(async()=>{var y;try{const v=await fetch("/api/users/me",{credentials:"include"});if(v.ok){const x=await v.json();(y=x.data)!=null&&y.user&&n(w=>({...w,name:x.data.user.name}))}else v.status===401&&e("/login")}catch(v){console.error("Error loading user data:",v),a({type:"error",text:"Failed to load user data"})}})()},[e]);const p=async m=>{var y;if(m.preventDefault(),a(null),t.newPassword||t.confirmPassword){if(t.newPassword!==t.confirmPassword){a({type:"error",text:"New passwords do not match"});return}if(t.newPassword.length<6){a({type:"error",text:"New password must be at least 6 characters long"});return}if(!t.currentPassword){a({type:"error",text:"Current password is required to change password"});return}}i(!0);try{const v={name:t.name};t.newPassword&&(v.password=t.newPassword,v.currentPassword=t.currentPassword);const x=await fetch("/api/users/me",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(v)});if(x.ok){const w=await x.json();if((y=w.data)!=null&&y.user){const S={...JSON.parse(localStorage.getItem("user")||"{}"),...w.data.user};localStorage.setItem("user",JSON.stringify(S))}a({type:"success",text:"Profile updated successfully"}),n(j=>({...j,currentPassword:"",newPassword:"",confirmPassword:""}))}else{const w=await x.json();a({type:"error",text:w.message||"Failed to update profile"})}}catch(v){console.error("Error updating profile:",v),a({type:"error",text:"An error occurred while updating profile"})}finally{i(!1)}},g=()=>{e(-1)};return o.jsx("div",{className:"max-w-2xl mx-auto",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),o.jsx("button",{onClick:g,className:"text-gray-500 hover:text-gray-700",children:o.jsx(Ar.X,{size:24})})]})}),o.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[s&&o.jsx("div",{className:`p-4 rounded-md ${s.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:s.text}),"          ",o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),o.jsx("input",{type:"text",id:"name",value:t.name,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-700 cursor-not-allowed",readOnly:!0,disabled:!0})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Leave password fields empty if you don't want to change your password."}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:l?"text":"password",id:"currentPassword",value:t.currentPassword,onChange:m=>n({...t,currentPassword:m.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),o.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:l?o.jsx(Ar.EyeOff,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ar.Eye,{className:"h-5 w-5 text-gray-400"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:u?"text":"password",id:"newPassword",value:t.newPassword,onChange:m=>n({...t,newPassword:m.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",minLength:6}),o.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u?o.jsx(Ar.EyeOff,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ar.Eye,{className:"h-5 w-5 text-gray-400"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:f?"text":"password",id:"confirmPassword",value:t.confirmPassword,onChange:m=>n({...t,confirmPassword:m.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),o.jsx("button",{type:"button",onClick:()=>h(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:f?o.jsx(Ar.EyeOff,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ar.Eye,{className:"h-5 w-5 text-gray-400"})})]})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[o.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:r,children:"Cancel"}),o.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Update Profile"})]})]})]})})},bve=()=>{const[e,t]=b.useState(null),[n,r]=b.useState(!0),[i,s]=b.useState(!1),[a,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState(null),[h,p]=b.useState(null),[g,m]=b.useState(""),[y,v]=b.useState(""),[x,w]=b.useState(null),[j,S]=b.useState(!1),[k,N]=b.useState(!1);b.useEffect(()=>{P()},[]);const P=async()=>{try{u(null);const I=await pe("/api/database/info");if(I.ok){const $=await I.json();t($.data)}else throw new Error("Failed to fetch database information")}catch(I){u("Error loading database information: "+(I instanceof Error?I.message:"Unknown error"))}finally{r(!1)}},A=async()=>{var I;try{s(!0),u(null),f(null);const $=await pe("/api/database/export");if($.ok){const E=$.headers.get("Content-Disposition"),T=E?(I=E.split("filename=")[1])==null?void 0:I.replace(/"/g,""):`database_backup_${new Date().toISOString().replace(/[:.]/g,"-")}.sql`,D=await $.blob(),H=window.URL.createObjectURL(D),F=document.createElement("a");F.href=H,F.download=T,document.body.appendChild(F),F.click(),window.URL.revokeObjectURL(H),document.body.removeChild(F),f("Database exported successfully")}else{const E=await $.json().catch(()=>({}));throw new Error(E.message||"Failed to export database")}}catch($){u("Export failed: "+($ instanceof Error?$.message:"Unknown error"))}finally{s(!1)}},C=I=>{var E;const $=(E=I.target.files)==null?void 0:E[0];$&&($.name.toLowerCase().endsWith(".sql")?(p($),u(null)):(u("Please select a valid SQL file (.sql)"),p(null)))},_=async()=>{if(!h){u("Please select a SQL file to import");return}if(window.confirm("Are you sure you want to import this database? This action will replace all existing data and cannot be undone."))try{l(!0),u(null),f(null);const I=new FormData;I.append("sqlFile",h);const $=await pe("/api/database/import",{method:"POST",body:I});if($.ok){await $.json(),f("Database imported successfully"),p(null);const E=document.getElementById("sqlFileInput");E&&(E.value=""),P()}else{const E=await $.json();throw new Error(E.message||"Failed to import database")}}catch(I){u("Import failed: "+(I instanceof Error?I.message:"Unknown error"))}finally{l(!1)}},R=I=>{var E;const $=(E=I.target.files)==null?void 0:E[0];$&&($.name.toLowerCase().endsWith(".sql")?(w($),u(null)):(u("Please select a valid SQL file (.sql)"),w(null)))},z=async()=>{var I;if(!g){u("Please select a table to export");return}try{S(!0),u(null),f(null);const $=await pe(`/api/database/export-table/${encodeURIComponent(g)}`);if($.ok){const E=$.headers.get("Content-Disposition"),T=E?(I=E.split("filename=")[1])==null?void 0:I.replace(/"/g,""):`table_${g}_backup_${new Date().toISOString().replace(/[:.]/g,"-")}.sql`,D=await $.blob(),H=window.URL.createObjectURL(D),F=document.createElement("a");F.href=H,F.download=T,document.body.appendChild(F),F.click(),window.URL.revokeObjectURL(H),document.body.removeChild(F),f(`Table "${g}" exported successfully`),m("")}else{const E=await $.json().catch(()=>({message:"Unknown server error"}));throw new Error(E.message||"Failed to export table")}}catch($){u("Table export failed: "+($ instanceof Error?$.message:"Unknown error"))}finally{S(!1)}},M=async()=>{if(!y){u("Please select a target table");return}if(!x){u("Please select a SQL file to import");return}if(window.confirm(`Are you sure you want to import data into table "${y}"? This will replace all existing data in this table and cannot be undone.`))try{N(!0),u(null),f(null);const I=new FormData;I.append("sqlFile",x),I.append("tableName",y);const $=await pe("/api/database/import-table",{method:"POST",body:I});if($.ok){await $.json(),f(`Data imported successfully into table "${y}"`),w(null),v("");const E=document.getElementById("tableFileInput");E&&(E.value=""),P()}else{const E=await $.json().catch(()=>({message:"Unknown server error"}));throw new Error(E.message||"Failed to import table data")}}catch(I){u("Table import failed: "+(I instanceof Error?I.message:"Unknown error"))}finally{N(!1)}};return n?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):o.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Database Management"}),o.jsx("p",{className:"text-gray-600",children:"Manage your database backups, imports, and view database information."})]}),c&&o.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[o.jsx(Hl,{className:"h-5 w-5 mr-2 flex-shrink-0"}),o.jsx("span",{children:c})]}),d&&o.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[o.jsx(Af,{className:"h-5 w-5 mr-2 flex-shrink-0"}),o.jsx("span",{children:d})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(hI,{className:"h-6 w-6 text-blue-500 mr-2"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Database Information"})]}),e?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Database Name"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.database_name})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Size"}),o.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.total_size_mb," MB"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Table Count"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.table_count})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Last Checked"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(e.last_checked).toLocaleString()})]})]}),o.jsxs("div",{className:"mt-6",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Database Tables"}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:o.jsx("div",{className:"space-y-2",children:e.tables.map((I,$)=>o.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-white rounded border",children:[o.jsx("span",{className:"font-medium text-gray-900",children:I.name}),o.jsxs("span",{className:"text-sm text-gray-500",children:[I.size_mb," MB"]})]},$))})})]}),o.jsxs("button",{onClick:P,className:"w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center",children:[o.jsx(oa,{className:"h-4 w-4 mr-2"}),"Refresh Information"]})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Hl,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),o.jsx("p",{children:"Unable to load database information"})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(K1,{className:"h-6 w-6 text-blue-500 mr-2"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Database Operations"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Database"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Create a backup of your database. This will download a SQL file containing all your data."}),o.jsx("button",{onClick:A,disabled:i,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:i?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exporting..."]}):o.jsxs(o.Fragment,{children:[o.jsx(kd,{className:"h-4 w-4 mr-2"}),"Export Database"]})})]}),o.jsx("hr",{className:"border-gray-200"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Import Database"}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Replace your current database with data from a SQL file.",o.jsx("span",{className:"text-red-600 font-medium",children:" Warning: This will delete all existing data!"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"sqlFileInput",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select SQL File"}),o.jsx("input",{id:"sqlFileInput",type:"file",accept:".sql",onChange:C,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 border border-gray-300 rounded-lg"}),h&&o.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",h.name," (",(h.size/1024/1024).toFixed(2)," MB)"]})]}),o.jsx("button",{onClick:_,disabled:!h||a,className:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:a?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(om,{className:"h-4 w-4 mr-2"}),"Import Database"]})})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(EB,{className:"h-6 w-6 text-blue-500 mr-2"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Table Operations"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Table"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Export a specific table to a SQL file for backup or data transfer."}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"exportTableSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Table to Export"}),o.jsxs("select",{id:"exportTableSelect",value:g,onChange:I=>m(I.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select a table --"}),e==null?void 0:e.tables.map(I=>o.jsxs("option",{value:I.name,children:[I.name," (",I.size_mb," MB)"]},I.name))]})]}),o.jsx("button",{onClick:z,disabled:!g||j,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center",children:j?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exporting..."]}):o.jsxs(o.Fragment,{children:[o.jsx(kd,{className:"h-4 w-4 mr-2"}),"Export Table"]})})]})]}),o.jsx("hr",{className:"border-gray-200"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Import to Table"}),o.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Import data from a SQL file into a specific table.",o.jsx("span",{className:"text-orange-600 font-medium",children:" This will replace existing table data!"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"importTableSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Target Table"}),o.jsxs("select",{id:"importTableSelect",value:y,onChange:I=>v(I.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"-- Select target table --"}),e==null?void 0:e.tables.map(I=>o.jsx("option",{value:I.name,children:I.name},I.name))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"tableFileInput",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select SQL File"}),o.jsx("input",{id:"tableFileInput",type:"file",accept:".sql",onChange:R,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 border border-gray-300 rounded-lg"}),x&&o.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Selected: ",x.name," (",(x.size/1024/1024).toFixed(2)," MB)"]})]}),o.jsx("button",{onClick:M,disabled:!y||!x||k,className:"w-full bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center",children:k?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(om,{className:"h-4 w-4 mr-2"}),"Import to Table"]})})]})]})]})]})]}),o.jsx("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Cf,{className:"h-6 w-6 text-yellow-600 mr-3 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"Important Safety Notice"}),o.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[o.jsx("li",{children:" Always create a backup before importing a new database"}),o.jsx("li",{children:" Database imports will permanently replace all existing data"}),o.jsx("li",{children:" Table imports will replace all data in the selected table only"}),o.jsx("li",{children:" Only upload SQL files from trusted sources"}),o.jsx("li",{children:" Large database imports may take several minutes to complete"}),o.jsx("li",{children:" Ensure you have sufficient disk space before importing large files"}),o.jsx("li",{children:" Table exports are useful for selective backups and data migration"})]})]})]})})]})},wve=()=>{const[e,t]=b.useState({wholesale:null,retail:null}),[n,r]=b.useState([]),[i,s]=b.useState(!1),[a,l]=b.useState("wholesale"),[c,u]=b.useState(!0),[d,f]=b.useState(!1),[h,p]=b.useState(null),[g,m]=b.useState(null),[y,v]=b.useState(!1),[x,w]=b.useState({name:"",type:"network",ipAddress:"",port:9100,deviceName:""});b.useEffect(()=>{j(),S()},[]);const j=async()=>{try{p(null);const C=await pe(`${Or()}/settings/printers`);if(C.ok){const _=await C.json();t(_)}else t({wholesale:null,retail:null})}catch(C){p("Error loading printer settings: "+(C instanceof Error?C.message:"Unknown error"))}finally{u(!1)}},S=async()=>{try{const C=await pe(`${Or()}/printer/discover`),_=await pe(`${Or()}/printer/local`),R=C.ok?await C.json():{printers:[]},z=_.ok?await _.json():{printers:[]},M=Array.isArray(R.printers)?R.printers:[],I=Array.isArray(z.printers)?z.printers:[];r([...M,...I])}catch(C){console.error("Error discovering printers:",C),r([{id:"default-network",name:"Network Printer (Default)",type:"network",ipAddress:"192.168.1.100",port:9100},{id:"default-local",name:"Local Printer (Default)",type:"local",deviceName:"Microsoft Print to PDF"}])}},k=async()=>{f(!0),p(null),m(null);try{if((await pe(`${Or()}/settings/printers`,{method:"PUT",body:JSON.stringify(e)})).ok)m("Printer settings saved successfully");else throw new Error("Failed to save printer settings")}catch(C){p("Error saving printer settings: "+(C instanceof Error?C.message:"Unknown error"))}finally{f(!1)}},N=C=>{t(_=>({..._,[a]:C})),s(!1)},P=async()=>{if(!x.name){p("Printer name is required");return}if(x.type==="network"&&(!x.ipAddress||!x.port)){p("IP Address and Port are required for network printers");return}if(x.type==="local"&&!x.deviceName){p("Device name is required for local printers");return}const C={id:`custom-${Date.now()}`,name:x.name,type:x.type||"network",...x.type==="network"&&{ipAddress:x.ipAddress,port:x.port},...x.type==="local"&&{deviceName:x.deviceName}};r(_=>[..._,C]),v(!1),w({name:"",type:"network",ipAddress:"",port:9100,deviceName:""}),p(null)},A=async C=>{try{if((await pe(`${Or()}/printer/test`,{method:"POST",body:JSON.stringify(C)})).ok)m(`Test print sent to ${C.name} successfully`);else throw new Error("Failed to send test print")}catch(_){p("Test print failed: "+(_ instanceof Error?_.message:"Unknown error"))}};return c?o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(An,{className:"w-8 h-8 animate-spin"})}):o.jsxs("div",{className:"space-y-6",children:[h&&o.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-600 rounded-md",children:h}),g&&o.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-600 rounded-md",children:g}),o.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Printer Setup"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Wholesale Printer"}),o.jsx(sa,{className:"w-6 h-6 text-blue-500"})]}),o.jsxs("div",{className:"space-y-4",children:[e.wholesale?o.jsx("div",{className:"p-4 bg-gray-50 rounded-md",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-800",children:e.wholesale.name}),o.jsx("p",{className:"text-sm text-gray-600",children:e.wholesale.type==="network"?`${e.wholesale.ipAddress}:${e.wholesale.port}`:e.wholesale.deviceName})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>A(e.wholesale),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Test Print",children:o.jsx(hk,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>t(C=>({...C,wholesale:null})),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Remove Printer",children:o.jsx(Lt,{className:"w-4 h-4"})})]})]})}):o.jsx("div",{className:"p-4 bg-gray-50 rounded-md text-center text-gray-500",children:"No printer selected for wholesale printing"}),o.jsxs("button",{onClick:()=>{l("wholesale"),s(!0)},className:"w-full px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center justify-center gap-2",children:[o.jsx(Yn,{className:"w-4 h-4"}),"Select Wholesale Printer"]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Retail Printer"}),o.jsx(aa,{className:"w-6 h-6 text-green-500"})]}),o.jsxs("div",{className:"space-y-4",children:[e.retail?o.jsx("div",{className:"p-4 bg-gray-50 rounded-md",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-800",children:e.retail.name}),o.jsx("p",{className:"text-sm text-gray-600",children:e.retail.type==="network"?`${e.retail.ipAddress}:${e.retail.port}`:e.retail.deviceName})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>A(e.retail),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Test Print",children:o.jsx(hk,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>t(C=>({...C,retail:null})),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Remove Printer",children:o.jsx(Lt,{className:"w-4 h-4"})})]})]})}):o.jsx("div",{className:"p-4 bg-gray-50 rounded-md text-center text-gray-500",children:"No printer selected for retail printing"}),o.jsxs("button",{onClick:()=>{l("retail"),s(!0)},className:"w-full px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 flex items-center justify-center gap-2",children:[o.jsx(Yn,{className:"w-4 h-4"}),"Select Retail Printer"]})]})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:k,disabled:d,className:"px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:d?o.jsxs(o.Fragment,{children:[o.jsx(An,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(No,{className:"w-4 h-4"}),"Save Printer Settings"]})})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Select ",a==="wholesale"?"Wholesale":"Retail"," Printer"]}),o.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-gray-100 rounded",children:o.jsx(Lt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h4",{className:"font-medium",children:"Available Printers"}),o.jsxs("button",{onClick:()=>v(!0),className:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 flex items-center gap-1",children:[o.jsx(Hn,{className:"w-3 h-3"}),"Add Printer"]})]}),n.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Yn,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),o.jsx("p",{children:"No printers found"}),o.jsx("button",{onClick:S,className:"mt-2 px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"Refresh"})]}):o.jsx("div",{className:"grid gap-2",children:n.map(C=>o.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer",onClick:()=>N(C),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Yn,{className:"w-5 h-5 text-gray-500"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium",children:C.name}),o.jsx("p",{className:"text-sm text-gray-600",children:C.type==="network"?`Network: ${C.ipAddress}:${C.port}`:`Local: ${C.deviceName}`})]})]}),o.jsx(Pl,{className:"w-4 h-4 text-gray-400"})]},C.id))})]})]})}),y&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Add Custom Printer"}),o.jsx("button",{onClick:()=>v(!1),className:"p-1 hover:bg-gray-100 rounded",children:o.jsx(Lt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Printer Name"}),o.jsx("input",{type:"text",value:x.name,onChange:C=>w(_=>({..._,name:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter printer name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Printer Type"}),o.jsxs("select",{value:x.type,onChange:C=>w(_=>({..._,type:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"network",children:"Network Printer"}),o.jsx("option",{value:"local",children:"Local Printer"})]})]}),x.type==="network"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address"}),o.jsx("input",{type:"text",value:x.ipAddress,onChange:C=>w(_=>({..._,ipAddress:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"192.168.1.100"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),o.jsx("input",{type:"number",value:x.port,onChange:C=>w(_=>({..._,port:parseInt(C.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"9100"})]})]}):o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Name"}),o.jsx("input",{type:"text",value:x.deviceName,onChange:C=>w(_=>({..._,deviceName:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Printer device name"})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx("button",{onClick:()=>v(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),o.jsx("button",{onClick:P,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Add Printer"})]})]})]})})]})},Sve=({onClose:e})=>{var j;const[t,n]=b.useState({available:!1}),[r,i]=b.useState(""),[s,a]=b.useState(null),[l,c]=b.useState(null),[u,d]=b.useState(!1),[f,h]=b.useState(!1),[p,g]=b.useState(null),[m,y]=b.useState(null);b.useEffect(()=>{v()},[]);const v=async()=>{a(null);try{const S=await Dme();if(n(S),S.available&&S.printers&&S.printers.length>0){const k=await hj();k&&S.printers.includes(k)?i(k):i(S.printers[0])}g(localStorage.getItem("qz.invoicePrinter")),y(localStorage.getItem("qz.receiptPrinter"))}catch(S){a(`Failed to check QZ Tray status: ${S instanceof Error?S.message:"Unknown error"}`)}finally{}},x=async()=>{if(!r){a("Please select a printer first");return}d(!0),a(null),c(null);try{await Ime(r)?c(`Test print sent successfully to ${r}`):a("Test print failed")}catch(S){a(`Test print failed: ${S instanceof Error?S.message:"Unknown error"}`)}finally{d(!1)}},w=async S=>{if(!r){a("Please select a printer first");return}h(!0),a(null),c(null);try{const k={type:S,items:[{id:"1",name:"Demo Product 1",price:10.5,quantity:2,total:21,unit:"pcs"},{id:"2",name:"Demo Product 2",price:15.75,quantity:1,total:15.75,unit:"pcs"},{id:"3",name:"Demo Product 3",price:8.25,quantity:3,total:24.75,unit:"pcs"}],totalAmount:61.5,totalItems:6,customer:{id:1,name:"Demo Customer",phone:"123-456-7890"},paymentMethod:"CASH",saleId:1234567};let N=!1;S==="invoice"?N=await Ro(k,r):N=await Mo(k,r,!0),N?c(`Demo ${S} sent successfully to ${r}`):a(`Demo ${S} failed`)}catch(k){a(`Demo ${S} failed: ${k instanceof Error?k.message:"Unknown error"}`)}finally{h(!1)}};return o.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"QZ Tray Silent Printing Setup"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Configure silent printing without browser dialogs"})]}),e&&o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg",children:o.jsx(Lt,{className:"w-5 h-5"})})]}),s&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Hl,{className:"w-5 h-5 mr-2"}),s]})}),l&&o.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Af,{className:"w-5 h-5 mr-2"}),l]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"QZ Tray Status"}),o.jsxs("button",{onClick:v,className:"flex items-center space-x-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:[o.jsx(oa,{className:"w-4 h-4"}),o.jsx("span",{children:"Refresh"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${t.available?"bg-green-500":"bg-red-500"}`}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:"Connection"}),o.jsx("div",{className:"text-sm text-gray-600",children:t.available?"Connected":"Disconnected"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[o.jsx(pI,{className:"w-5 h-5 text-blue-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:"Version"}),o.jsx("div",{className:"text-sm text-gray-600",children:t.version||"Unknown"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[o.jsx(Yn,{className:"w-5 h-5 text-green-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:"Printers"}),o.jsxs("div",{className:"text-sm text-gray-600",children:[((j=t.printers)==null?void 0:j.length)||0," available"]})]})]})]}),!t.available&&o.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Cf,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-yellow-800",children:"QZ Tray Not Available"}),o.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"QZ Tray is required for silent printing. Please:"}),o.jsxs("ol",{className:"text-sm text-yellow-700 mt-2 ml-4 list-decimal space-y-1",children:[o.jsxs("li",{children:["Download and install QZ Tray from ",o.jsx("a",{href:"https://qz.io/download/",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"qz.io/download"})]}),o.jsx("li",{children:"Start the QZ Tray application"}),o.jsx("li",{children:'Click "Refresh" to check the connection'})]})]})]})})]}),t.available&&t.printers&&t.printers.length>0&&o.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Printer Configuration"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Printer"}),o.jsxs("select",{value:r,onChange:S=>i(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"Choose a printer..."}),t.printers.map(S=>o.jsx("option",{value:S,children:S},S))]})]}),r&&o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("button",{onClick:x,disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[u?o.jsx(An,{className:"w-4 h-4 animate-spin"}):o.jsx(_B,{className:"w-4 h-4"}),o.jsx("span",{children:"Test Print"})]}),o.jsxs("button",{type:"button",onClick:()=>{localStorage.setItem("qz.invoicePrinter",r),g(r),c(`Saved ${r} as default invoice printer`)},className:`flex items-center space-x-2 px-4 py-2 rounded text-white ${p===r?"bg-emerald-600 hover:bg-emerald-700":"bg-emerald-500 hover:bg-emerald-600"}`,children:[o.jsx(sa,{className:"w-4 h-4"}),o.jsx("span",{children:p===r?"Invoice (Saved)":"Save as Invoice"})]}),o.jsxs("button",{type:"button",onClick:()=>{localStorage.setItem("qz.receiptPrinter",r),y(r),c(`Saved ${r} as default receipt printer`)},className:`flex items-center space-x-2 px-4 py-2 rounded text-white ${m===r?"bg-orange-600 hover:bg-orange-700":"bg-orange-500 hover:bg-orange-600"}`,children:[o.jsx(aa,{className:"w-4 h-4"}),o.jsx("span",{children:m===r?"Receipt (Saved)":"Save as Receipt"})]}),o.jsxs("button",{onClick:()=>w("invoice"),disabled:f,className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[f?o.jsx(An,{className:"w-4 h-4 animate-spin"}):o.jsx(sa,{className:"w-4 h-4"}),o.jsx("span",{children:"Demo Invoice"})]}),o.jsxs("button",{onClick:()=>w("receipt"),disabled:f,className:"flex items-center space-x-2 px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[f?o.jsx(An,{className:"w-4 h-4 animate-spin"}):o.jsx(aa,{className:"w-4 h-4"}),o.jsx("span",{children:"Demo Receipt"})]})]})]}),(p||m)&&o.jsxs("div",{className:"mt-4 text-xs text-gray-600 space-y-1",children:[p&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Dv,{className:"w-3 h-3 text-emerald-600"}),"Invoice: ",p]}),m&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Dv,{className:"w-3 h-3 text-orange-600"}),"Receipt: ",m]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"How to Use Silent Printing"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-800",children:"Configure QZ Tray"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Install and start QZ Tray, then test your printer connection above."})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-800",children:"Use in POS System"}),o.jsx("p",{className:"text-sm text-gray-600",children:"When printing from the POS, your documents will print silently without browser dialogs."})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-800",children:"Printer Types"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Supports both regular printers (invoices) and thermal printers (receipts with ESC/POS commands)."})]})]})]}),o.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(mI,{className:"w-5 h-5 text-blue-600 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-blue-800",children:"Pro Tips"}),o.jsxs("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[o.jsx("li",{children:" QZ Tray works with any printer type (USB, Network, Bluetooth)"}),o.jsx("li",{children:" Thermal printers get optimized ESC/POS commands for better formatting"}),o.jsx("li",{children:" If QZ Tray is unavailable, the system automatically falls back to browser printing"}),o.jsx("li",{children:" For network printers, make sure they're accessible from this computer"})]})]})]})})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Xf(e){return e+.5|0}const Us=(e,t,n)=>Math.max(Math.min(e,n),t);function Iu(e){return Us(Xf(e*2.55),0,255)}function ta(e){return Us(Xf(e*255),0,255)}function Vi(e){return Us(Xf(e/2.55)/100,0,1)}function kE(e){return Us(Xf(e*100),0,100)}const Cr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Lw=[..."0123456789ABCDEF"],jve=e=>Lw[e&15],Nve=e=>Lw[(e&240)>>4]+Lw[e&15],Bh=e=>(e&240)>>4===(e&15),kve=e=>Bh(e.r)&&Bh(e.g)&&Bh(e.b)&&Bh(e.a);function Pve(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Cr[e[1]]*17,g:255&Cr[e[2]]*17,b:255&Cr[e[3]]*17,a:t===5?Cr[e[4]]*17:255}:(t===7||t===9)&&(n={r:Cr[e[1]]<<4|Cr[e[2]],g:Cr[e[3]]<<4|Cr[e[4]],b:Cr[e[5]]<<4|Cr[e[6]],a:t===9?Cr[e[7]]<<4|Cr[e[8]]:255})),n}const Cve=(e,t)=>e<255?t(e):"";function Ave(e){var t=kve(e)?jve:Nve;return e?"#"+t(e.r)+t(e.g)+t(e.b)+Cve(e.a,t):void 0}const Eve=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function E4(e,t,n){const r=t*Math.min(n,1-n),i=(s,a=(s+e/30)%12)=>n-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function _ve(e,t,n){const r=(i,s=(i+e/60)%6)=>n-n*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Tve(e,t,n){const r=E4(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function Ove(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}function Oj(e){const n=e.r/255,r=e.g/255,i=e.b/255,s=Math.max(n,r,i),a=Math.min(n,r,i),l=(s+a)/2;let c,u,d;return s!==a&&(d=s-a,u=l>.5?d/(2-s-a):d/(s+a),c=Ove(n,r,i,d,s),c=c*60+.5),[c|0,u||0,l]}function Ij(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(ta)}function Dj(e,t,n){return Ij(E4,e,t,n)}function Ive(e,t,n){return Ij(Tve,e,t,n)}function Dve(e,t,n){return Ij(_ve,e,t,n)}function _4(e){return(e%360+360)%360}function Rve(e){const t=Eve.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?Iu(+t[5]):ta(+t[5]));const i=_4(+t[2]),s=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?r=Ive(i,s,a):t[1]==="hsv"?r=Dve(i,s,a):r=Dj(i,s,a),{r:r[0],g:r[1],b:r[2],a:n}}function Mve(e,t){var n=Oj(e);n[0]=_4(n[0]+t),n=Dj(n),e.r=n[0],e.g=n[1],e.b=n[2]}function $ve(e){if(!e)return;const t=Oj(e),n=t[0],r=kE(t[1]),i=kE(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${i}%, ${Vi(e.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const PE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},CE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Lve(){const e={},t=Object.keys(CE),n=Object.keys(PE);let r,i,s,a,l;for(r=0;r<t.length;r++){for(a=l=t[r],i=0;i<n.length;i++)s=n[i],l=l.replace(s,PE[s]);s=parseInt(CE[a],16),e[l]=[s>>16&255,s>>8&255,s&255]}return e}let Uh;function Fve(e){Uh||(Uh=Lve(),Uh.transparent=[0,0,0,0]);const t=Uh[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Bve=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Uve(e){const t=Bve.exec(e);let n=255,r,i,s;if(t){if(t[7]!==r){const a=+t[7];n=t[8]?Iu(a):Us(a*255,0,255)}return r=+t[1],i=+t[3],s=+t[5],r=255&(t[2]?Iu(r):Us(r,0,255)),i=255&(t[4]?Iu(i):Us(i,0,255)),s=255&(t[6]?Iu(s):Us(s,0,255)),{r,g:i,b:s,a:n}}}function zve(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Vi(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const P0=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Xo=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Hve(e,t,n){const r=Xo(Vi(e.r)),i=Xo(Vi(e.g)),s=Xo(Vi(e.b));return{r:ta(P0(r+n*(Xo(Vi(t.r))-r))),g:ta(P0(i+n*(Xo(Vi(t.g))-i))),b:ta(P0(s+n*(Xo(Vi(t.b))-s))),a:e.a+n*(t.a-e.a)}}function zh(e,t,n){if(e){let r=Oj(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=Dj(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function T4(e,t){return e&&Object.assign(t||{},e)}function AE(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ta(e[3]))):(t=T4(e,{r:0,g:0,b:0,a:1}),t.a=ta(t.a)),t}function Wve(e){return e.charAt(0)==="r"?Uve(e):Rve(e)}class hf{constructor(t){if(t instanceof hf)return t;const n=typeof t;let r;n==="object"?r=AE(t):n==="string"&&(r=Pve(t)||Fve(t)||Wve(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=T4(this._rgb);return t&&(t.a=Vi(t.a)),t}set rgb(t){this._rgb=AE(t)}rgbString(){return this._valid?zve(this._rgb):void 0}hexString(){return this._valid?Ave(this._rgb):void 0}hslString(){return this._valid?$ve(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,i=t.rgb;let s;const a=n===s?.5:n,l=2*a-1,c=r.a-i.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;s=1-u,r.r=255&u*r.r+s*i.r+.5,r.g=255&u*r.g+s*i.g+.5,r.b=255&u*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=Hve(this._rgb,t._rgb,n)),this}clone(){return new hf(this.rgb)}alpha(t){return this._rgb.a=ta(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Xf(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return zh(this._rgb,2,t),this}darken(t){return zh(this._rgb,2,-t),this}saturate(t){return zh(this._rgb,1,t),this}desaturate(t){return zh(this._rgb,1,-t),this}rotate(t){return Mve(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Bi(){}const qve=(()=>{let e=0;return()=>e++})();function mt(e){return e==null}function on(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function st(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ur(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function gi(e,t){return Ur(e)?e:t}function Xe(e,t){return typeof e>"u"?t:e}const Vve=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,O4=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function _t(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function gt(e,t,n,r){let i,s,a;if(on(e))for(s=e.length,i=0;i<s;i++)t.call(n,e[i],i);else if(st(e))for(a=Object.keys(e),s=a.length,i=0;i<s;i++)t.call(n,e[a[i]],a[i])}function xg(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function vg(e){if(on(e))return e.map(vg);if(st(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=vg(e[n[i]]);return t}return e}function I4(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function Kve(e,t,n,r){if(!I4(e))return;const i=t[e],s=n[e];st(i)&&st(s)?pf(i,s,r):t[e]=vg(s)}function pf(e,t,n){const r=on(t)?t:[t],i=r.length;if(!st(e))return e;n=n||{};const s=n.merger||Kve;let a;for(let l=0;l<i;++l){if(a=r[l],!st(a))continue;const c=Object.keys(a);for(let u=0,d=c.length;u<d;++u)s(c[u],e,a,n)}return e}function nd(e,t){return pf(e,t,{merger:Qve})}function Qve(e,t,n){if(!I4(e))return;const r=t[e],i=n[e];st(r)&&st(i)?nd(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=vg(i))}const EE={"":e=>e,x:e=>e.x,y:e=>e.y};function Gve(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Yve(e){const t=Gve(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function xo(e,t){return(EE[t]||(EE[t]=Yve(t)))(e)}function Rj(e){return e.charAt(0).toUpperCase()+e.slice(1)}const mf=e=>typeof e<"u",da=e=>typeof e=="function",_E=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function Xve(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const yt=Math.PI,Wt=2*yt,Zve=Wt+yt,bg=Number.POSITIVE_INFINITY,Jve=yt/180,un=yt/2,Aa=yt/4,TE=yt*2/3,Fw=Math.log10,Ei=Math.sign;function rd(e,t,n){return Math.abs(e-t)<n}function OE(e){const t=Math.round(e);e=rd(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Fw(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function ebe(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((i,s)=>i-s).pop(),t}function tbe(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function gf(e){return!tbe(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function nbe(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function rbe(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Ji(e){return e*(yt/180)}function ibe(e){return e*(180/yt)}function IE(e){if(!Ur(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function D4(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*yt&&(s+=Wt),{angle:s,distance:i}}function Bw(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function sbe(e,t){return(e-t+Zve)%Wt-yt}function ei(e){return(e%Wt+Wt)%Wt}function yf(e,t,n,r){const i=ei(e),s=ei(t),a=ei(n),l=ei(s-i),c=ei(a-i),u=ei(i-s),d=ei(i-a);return i===s||i===a||r&&s===a||l>c&&u<d}function On(e,t,n){return Math.max(t,Math.min(n,e))}function abe(e){return On(e,-32768,32767)}function zs(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function Mj(e,t,n){n=n||(a=>e[a]<t);let r=e.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Qa=(e,t,n,r)=>Mj(e,n,r?i=>{const s=e[i][t];return s<n||s===n&&e[i+1][t]===n}:i=>e[i][t]<n),obe=(e,t,n)=>Mj(e,n,r=>e[r][t]>=n);function lbe(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}const R4=["push","pop","shift","splice","unshift"];function cbe(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),R4.forEach(n=>{const r="_onData"+Rj(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return e._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...s)}),a}})})}function DE(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(R4.forEach(s=>{delete e[s]}),delete e._chartjs)}function M4(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const $4=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function L4(e,t){let n=[],r=!1;return function(...i){n=i,r||(r=!0,$4.call(window,()=>{r=!1,e.apply(t,n)}))}}function ube(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const $j=e=>e==="start"?"left":e==="end"?"right":"center",kn=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,dbe=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function fbe(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:a,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:f,max:h,minDefined:p,maxDefined:g}=a.getUserBounds();if(p){if(i=Math.min(Qa(c,d,f).lo,n?r:Qa(t,d,a.getPixelForValue(f)).lo),u){const m=c.slice(0,i+1).reverse().findIndex(y=>!mt(y[l.axis]));i-=Math.max(0,m)}i=On(i,0,r-1)}if(g){let m=Math.max(Qa(c,a.axis,h,!0).hi+1,n?0:Qa(t,d,a.getPixelForValue(h),!0).hi+1);if(u){const y=c.slice(m-1).findIndex(v=>!mt(v[l.axis]));m+=Math.max(0,y)}s=On(m,i,r)-i}else s=r-i}return{start:i,count:s}}function hbe(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Hh=e=>e===0||e===1,RE=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Wt/n)),ME=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Wt/n)+1,id={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*un)+1,easeOutSine:e=>Math.sin(e*un),easeInOutSine:e=>-.5*(Math.cos(yt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Hh(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Hh(e)?e:RE(e,.075,.3),easeOutElastic:e=>Hh(e)?e:ME(e,.075,.3),easeInOutElastic(e){return Hh(e)?e:e<.5?.5*RE(e*2,.1125,.45):.5+.5*ME(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-id.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?id.easeInBounce(e*2)*.5:id.easeOutBounce(e*2-1)*.5+.5};function Lj(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function $E(e){return Lj(e)?e:new hf(e)}function C0(e){return Lj(e)?e:new hf(e).saturate(.5).darken(.1).hexString()}const pbe=["x","y","borderWidth","radius","tension"],mbe=["color","borderColor","backgroundColor"];function gbe(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:mbe},numbers:{type:"number",properties:pbe}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ybe(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const LE=new Map;function xbe(e,t){t=t||{};const n=e+JSON.stringify(t);let r=LE.get(n);return r||(r=new Intl.NumberFormat(e,t),LE.set(n,r)),r}function Fj(e,t,n){return xbe(t,n).format(e)}const F4={values(e){return on(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=vbe(e,n)}const a=Fw(Math.abs(s)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Fj(e,r,c)},logarithmic(e,t,n){if(e===0)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Fw(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?F4.numeric.call(this,e,t,n):""}};function vbe(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var B4={formatters:F4};function bbe(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:B4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const vo=Object.create(null),Uw=Object.create(null);function sd(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];e=e[s]||(e[s]=Object.create(null))}return e}function A0(e,t,n){return typeof t=="string"?pf(sd(e,t),n):pf(sd(e,""),t)}class wbe{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>C0(i.backgroundColor),this.hoverBorderColor=(r,i)=>C0(i.borderColor),this.hoverColor=(r,i)=>C0(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return A0(this,t,n)}get(t){return sd(this,t)}describe(t,n){return A0(Uw,t,n)}override(t,n){return A0(vo,t,n)}route(t,n,r,i){const s=sd(this,t),a=sd(this,r),l="_"+n;Object.defineProperties(s,{[l]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=a[i];return st(c)?Object.assign({},u,c):Xe(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var Vt=new wbe({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gbe,ybe,bbe]);function Sbe(e){return!e||mt(e.size)||mt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function FE(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Ea(e,t,n){const r=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function BE(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function zw(e,t,n,r){U4(e,t,n,r,null)}function U4(e,t,n,r,i){let s,a,l,c,u,d,f,h;const p=t.pointStyle,g=t.rotation,m=t.radius;let y=(g||0)*Jve;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(y),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),e.restore();return}if(!(isNaN(m)||m<=0)){switch(e.beginPath(),p){default:i?e.ellipse(n,r,i/2,m,0,0,Wt):e.arc(n,r,m,0,Wt),e.closePath();break;case"triangle":d=i?i/2:m,e.moveTo(n+Math.sin(y)*d,r-Math.cos(y)*m),y+=TE,e.lineTo(n+Math.sin(y)*d,r-Math.cos(y)*m),y+=TE,e.lineTo(n+Math.sin(y)*d,r-Math.cos(y)*m),e.closePath();break;case"rectRounded":u=m*.516,c=m-u,a=Math.cos(y+Aa)*c,f=Math.cos(y+Aa)*(i?i/2-u:c),l=Math.sin(y+Aa)*c,h=Math.sin(y+Aa)*(i?i/2-u:c),e.arc(n-f,r-l,u,y-yt,y-un),e.arc(n+h,r-a,u,y-un,y),e.arc(n+f,r+l,u,y,y+un),e.arc(n-h,r+a,u,y+un,y+yt),e.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*m,d=i?i/2:c,e.rect(n-d,r-c,2*d,2*c);break}y+=Aa;case"rectRot":f=Math.cos(y)*(i?i/2:m),a=Math.cos(y)*m,l=Math.sin(y)*m,h=Math.sin(y)*(i?i/2:m),e.moveTo(n-f,r-l),e.lineTo(n+h,r-a),e.lineTo(n+f,r+l),e.lineTo(n-h,r+a),e.closePath();break;case"crossRot":y+=Aa;case"cross":f=Math.cos(y)*(i?i/2:m),a=Math.cos(y)*m,l=Math.sin(y)*m,h=Math.sin(y)*(i?i/2:m),e.moveTo(n-f,r-l),e.lineTo(n+f,r+l),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"star":f=Math.cos(y)*(i?i/2:m),a=Math.cos(y)*m,l=Math.sin(y)*m,h=Math.sin(y)*(i?i/2:m),e.moveTo(n-f,r-l),e.lineTo(n+f,r+l),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a),y+=Aa,f=Math.cos(y)*(i?i/2:m),a=Math.cos(y)*m,l=Math.sin(y)*m,h=Math.sin(y)*(i?i/2:m),e.moveTo(n-f,r-l),e.lineTo(n+f,r+l),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"line":a=i?i/2:Math.cos(y)*m,l=Math.sin(y)*m,e.moveTo(n-a,r-l),e.lineTo(n+a,r+l);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(y)*(i?i/2:m),r+Math.sin(y)*m);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function xf(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Bj(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Uj(e){e.restore()}function jbe(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const s=(t.x+n.x)/2;e.lineTo(s,t.y),e.lineTo(s,n.y)}else i==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Nbe(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function kbe(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),mt(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Pbe(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),a=t-s.actualBoundingBoxLeft,l=t+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,d=i.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,d),e.lineTo(l,d),e.stroke()}}function Cbe(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function vf(e,t,n,r,i,s={}){const a=on(t)?t:[t],l=s.strokeWidth>0&&s.strokeColor!=="";let c,u;for(e.save(),e.font=i.string,kbe(e,s),c=0;c<a.length;++c)u=a[c],s.backdrop&&Cbe(e,s.backdrop),l&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),mt(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(u,n,r,s.maxWidth)),e.fillText(u,n,r,s.maxWidth),Pbe(e,n,r,u,s),r+=Number(i.lineHeight);e.restore()}function wg(e,t){const{x:n,y:r,w:i,h:s,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*yt,yt,!0),e.lineTo(n,r+s-a.bottomLeft),e.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,yt,un,!0),e.lineTo(n+i-a.bottomRight,r+s),e.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,un,0,!0),e.lineTo(n+i,r+a.topRight),e.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-un,!0),e.lineTo(n+a.topLeft,r)}const Abe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ebe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _be(e,t){const n=(""+e).match(Abe);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Tbe=e=>+e||0;function zj(e,t){const n={},r=st(t),i=r?Object.keys(t):t,s=st(e)?r?a=>Xe(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of i)n[a]=Tbe(s(a));return n}function z4(e){return zj(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Il(e){return zj(e,["topLeft","topRight","bottomLeft","bottomRight"])}function zr(e){const t=z4(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function In(e,t){e=e||{},t=t||Vt.font;let n=Xe(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=Xe(e.style,t.style);r&&!(""+r).match(Ebe)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Xe(e.family,t.family),lineHeight:_be(Xe(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Xe(e.weight,t.weight),string:""};return i.string=Sbe(i),i}function Wh(e,t,n,r){let i,s,a;for(i=0,s=e.length;i<s;++i)if(a=e[i],a!==void 0&&a!==void 0)return a}function Obe(e,t,n){const{min:r,max:i}=e,s=O4(t,(i-r)/2),a=(l,c)=>n&&l===0?0:l+c;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function $o(e,t){return Object.assign(Object.create(e),t)}function Hj(e,t=[""],n,r,i=()=>e[0]){const s=n||e;typeof r>"u"&&(r=V4("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:r,_getTarget:i,override:l=>Hj([l,...e],t,s,r)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return W4(l,c,()=>Bbe(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return zE(l).includes(c)},ownKeys(l){return zE(l)},set(l,c,u){const d=l._storage||(l._storage=i());return l[c]=d[c]=u,delete l._keys,!0}})}function xc(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:H4(e,r),setContext:s=>xc(e,s,n,r),override:s=>xc(e.override(s),t,n,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete e[a],!0},get(s,a,l){return W4(s,a,()=>Dbe(s,a,l))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(s,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(s,a,l){return e[a]=l,delete s[a],!0}})}function H4(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:da(n)?n:()=>n,isIndexable:da(r)?r:()=>r}}const Ibe=(e,t)=>e?e+Rj(t):t,Wj=(e,t)=>st(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function W4(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const r=n();return e[t]=r,r}function Dbe(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=e;let l=r[t];return da(l)&&a.isScriptable(t)&&(l=Rbe(t,l,e,n)),on(l)&&l.length&&(l=Mbe(t,l,e,a.isIndexable)),Wj(t,l)&&(l=xc(l,i,s&&s[t],a)),l}function Rbe(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(s,a||r);return l.delete(e),Wj(e,c)&&(c=qj(i._scopes,i,e,c)),c}function Mbe(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:l}=n;if(typeof s.index<"u"&&r(e))return t[s.index%t.length];if(st(t[0])){const c=t,u=i._scopes.filter(d=>d!==c);t=[];for(const d of c){const f=qj(u,i,e,d);t.push(xc(f,s,a&&a[e],l))}}return t}function q4(e,t,n){return da(e)?e(t,n):e}const $be=(e,t)=>e===!0?t:typeof e=="string"?xo(t,e):void 0;function Lbe(e,t,n,r,i){for(const s of t){const a=$be(n,s);if(a){e.add(a);const l=q4(a._fallback,n,i);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(a===!1&&typeof r<"u"&&n!==r)return null}return!1}function qj(e,t,n,r){const i=t._rootScopes,s=q4(t._fallback,n,r),a=[...e,...i],l=new Set;l.add(r);let c=UE(l,a,n,s||n,r);return c===null||typeof s<"u"&&s!==n&&(c=UE(l,a,s,c,r),c===null)?!1:Hj(Array.from(l),[""],i,s,()=>Fbe(t,n,r))}function UE(e,t,n,r,i){for(;n;)n=Lbe(e,t,n,r,i);return n}function Fbe(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];return on(i)&&st(n)?n:i||{}}function Bbe(e,t,n,r){let i;for(const s of t)if(i=V4(Ibe(s,e),n),typeof i<"u")return Wj(e,i)?qj(n,r,e,i):i}function V4(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function zE(e){let t=e._keys;return t||(t=e._keys=Ube(e._scopes)),t}function Ube(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}const zbe=Number.EPSILON||1e-14,vc=(e,t)=>t<e.length&&!e[t].skip&&e[t],K4=e=>e==="x"?"y":"x";function Hbe(e,t,n,r){const i=e.skip?t:e,s=t,a=n.skip?t:n,l=Bw(s,i),c=Bw(a,s);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const f=r*u,h=r*d;return{previous:{x:s.x-f*(a.x-i.x),y:s.y-f*(a.y-i.y)},next:{x:s.x+h*(a.x-i.x),y:s.y+h*(a.y-i.y)}}}function Wbe(e,t,n){const r=e.length;let i,s,a,l,c,u=vc(e,0);for(let d=0;d<r-1;++d)if(c=u,u=vc(e,d+1),!(!c||!u)){if(rd(t[d],0,zbe)){n[d]=n[d+1]=0;continue}i=n[d]/t[d],s=n[d+1]/t[d],l=Math.pow(i,2)+Math.pow(s,2),!(l<=9)&&(a=3/Math.sqrt(l),n[d]=i*a*t[d],n[d+1]=s*a*t[d])}}function qbe(e,t,n="x"){const r=K4(n),i=e.length;let s,a,l,c=vc(e,0);for(let u=0;u<i;++u){if(a=l,l=c,c=vc(e,u+1),!l)continue;const d=l[n],f=l[r];a&&(s=(d-a[n])/3,l[`cp1${n}`]=d-s,l[`cp1${r}`]=f-s*t[u]),c&&(s=(c[n]-d)/3,l[`cp2${n}`]=d+s,l[`cp2${r}`]=f+s*t[u])}}function Vbe(e,t="x"){const n=K4(t),r=e.length,i=Array(r).fill(0),s=Array(r);let a,l,c,u=vc(e,0);for(a=0;a<r;++a)if(l=c,c=u,u=vc(e,a+1),!!c){if(u){const d=u[t]-c[t];i[a]=d!==0?(u[n]-c[n])/d:0}s[a]=l?u?Ei(i[a-1])!==Ei(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}Wbe(e,i,s),qbe(e,s,t)}function qh(e,t,n){return Math.max(Math.min(e,n),t)}function Kbe(e,t){let n,r,i,s,a,l=xf(e[0],t);for(n=0,r=e.length;n<r;++n)a=s,s=l,l=n<r-1&&xf(e[n+1],t),s&&(i=e[n],a&&(i.cp1x=qh(i.cp1x,t.left,t.right),i.cp1y=qh(i.cp1y,t.top,t.bottom)),l&&(i.cp2x=qh(i.cp2x,t.left,t.right),i.cp2y=qh(i.cp2y,t.top,t.bottom)))}function Qbe(e,t,n,r,i){let s,a,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")Vbe(e,i);else{let u=r?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)l=e[s],c=Hbe(u,l,e[Math.min(s+1,a-(r?0:1))%a],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&Kbe(e,n)}function Vj(){return typeof window<"u"&&typeof document<"u"}function Kj(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Sg(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const nx=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Gbe(e,t){return nx(e).getPropertyValue(t)}const Ybe=["top","right","bottom","left"];function no(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=Ybe[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Xbe=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function Zbe(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let a=!1,l,c;if(Xbe(i,s,e.target))l=i,c=s;else{const u=t.getBoundingClientRect();l=r.clientX-u.left,c=r.clientY-u.top,a=!0}return{x:l,y:c,box:a}}function Ma(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=nx(n),s=i.boxSizing==="border-box",a=no(i,"padding"),l=no(i,"border","width"),{x:c,y:u,box:d}=Zbe(e,n),f=a.left+(d&&l.left),h=a.top+(d&&l.top);let{width:p,height:g}=t;return s&&(p-=a.width+l.width,g-=a.height+l.height),{x:Math.round((c-f)/p*n.width/r),y:Math.round((u-h)/g*n.height/r)}}function Jbe(e,t,n){let r,i;if(t===void 0||n===void 0){const s=e&&Kj(e);if(!s)t=e.clientWidth,n=e.clientHeight;else{const a=s.getBoundingClientRect(),l=nx(s),c=no(l,"border","width"),u=no(l,"padding");t=a.width-u.width-c.width,n=a.height-u.height-c.height,r=Sg(l.maxWidth,s,"clientWidth"),i=Sg(l.maxHeight,s,"clientHeight")}}return{width:t,height:n,maxWidth:r||bg,maxHeight:i||bg}}const Vh=e=>Math.round(e*10)/10;function ewe(e,t,n,r){const i=nx(e),s=no(i,"margin"),a=Sg(i.maxWidth,e,"clientWidth")||bg,l=Sg(i.maxHeight,e,"clientHeight")||bg,c=Jbe(e,t,n);let{width:u,height:d}=c;if(i.boxSizing==="content-box"){const h=no(i,"border","width"),p=no(i,"padding");u-=p.width+h.width,d-=p.height+h.height}return u=Math.max(0,u-s.width),d=Math.max(0,r?u/r:d-s.height),u=Vh(Math.min(u,a,c.maxWidth)),d=Vh(Math.min(d,l,c.maxHeight)),u&&!d&&(d=Vh(u/2)),(t!==void 0||n!==void 0)&&r&&c.height&&d>c.height&&(d=c.height,u=Vh(Math.floor(d*r))),{width:u,height:d}}function HE(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(e.currentDevicePixelRatio=r,a.height=i,a.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const twe=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Vj()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function WE(e,t){const n=Gbe(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function $a(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function nwe(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function rwe(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=$a(e,i,n),l=$a(i,s,n),c=$a(s,t,n),u=$a(a,l,n),d=$a(l,c,n);return $a(u,d,n)}const iwe=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},swe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Dl(e,t,n){return e?iwe(t,n):swe()}function Q4(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function G4(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Y4(e){return e==="angle"?{between:yf,compare:sbe,normalize:ei}:{between:zs,compare:(t,n)=>t-n,normalize:t=>t}}function qE({start:e,end:t,count:n,loop:r,style:i}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:i}}function awe(e,t,n){const{property:r,start:i,end:s}=n,{between:a,normalize:l}=Y4(r),c=t.length;let{start:u,end:d,loop:f}=e,h,p;if(f){for(u+=c,d+=c,h=0,p=c;h<p&&a(l(t[u%c][r]),i,s);++h)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:f,style:e.style}}function owe(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,a=t.length,{compare:l,between:c,normalize:u}=Y4(r),{start:d,end:f,loop:h,style:p}=awe(e,t,n),g=[];let m=!1,y=null,v,x,w;const j=()=>c(i,w,v)&&l(i,w)!==0,S=()=>l(s,v)===0||c(s,w,v),k=()=>m||j(),N=()=>!m||S();for(let P=d,A=d;P<=f;++P)x=t[P%a],!x.skip&&(v=u(x[r]),v!==w&&(m=c(v,i,s),y===null&&k()&&(y=l(v,i)===0?P:A),y!==null&&N()&&(g.push(qE({start:y,end:P,loop:h,count:a,style:p})),y=null),A=P,w=v));return y!==null&&g.push(qE({start:y,end:f,loop:h,count:a,style:p})),g}function lwe(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=owe(r[i],e.points,t);s.length&&n.push(...s)}return n}function cwe(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}function uwe(e,t,n,r){const i=e.length,s=[];let a=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%i];u.skip||u.stop?l.skip||(r=!1,s.push({start:t%i,end:(c-1)%i,loop:r}),t=a=u.stop?c:null):(a=c,l.skip&&(t=c)),l=u}return a!==null&&s.push({start:t%i,end:a%i,loop:r}),s}function dwe(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:a,end:l}=cwe(n,i,s,r);if(r===!0)return VE(e,[{start:a,end:l,loop:s}],n,t);const c=l<a?l+i:l,u=!!e._fullLoop&&a===0&&l===i-1;return VE(e,uwe(n,a,c,u),n,t)}function VE(e,t,n,r){return!r||!r.setContext||!n?t:fwe(e,t,n,r)}function fwe(e,t,n,r){const i=e._chart.getContext(),s=KE(e.options),{_datasetIndex:a,options:{spanGaps:l}}=e,c=n.length,u=[];let d=s,f=t[0].start,h=f;function p(g,m,y,v){const x=l?-1:1;if(g!==m){for(g+=c;n[g%c].skip;)g-=x;for(;n[m%c].skip;)m+=x;g%c!==m%c&&(u.push({start:g%c,end:m%c,loop:y,style:v}),d=v,f=m%c)}}for(const g of t){f=l?f:g.start;let m=n[f%c],y;for(h=f+1;h<=g.end;h++){const v=n[h%c];y=KE(r.setContext($o(i,{type:"segment",p0:m,p1:v,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:a}))),hwe(y,d)&&p(f,h-1,g.loop,d),m=v,d=y}f<h-1&&p(f,h-1,g.loop,d)}return u}function KE(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function hwe(e,t){if(!t)return!1;const n=[],r=function(i,s){return Lj(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function Kh(e,t,n){return e.options.clip?e[n]:t[n]}function pwe(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Kh(n,t,"left"),right:Kh(n,t,"right"),top:Kh(r,t,"top"),bottom:Kh(r,t,"bottom")}:t}function mwe(e,t){const n=t._clip;if(n.disabled)return!1;const r=pwe(t,e.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class gwe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,i){const s=n.listeners[i],a=n.duration;s.forEach(l=>l({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(r-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=$4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,l=!1,c;for(;a>=0;--a)c=s[a],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(t),l=!0):(s[a]=s[s.length-1],s.pop());l&&(i.draw(),this._notify(i,r,t,"progress")),s.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),n+=s.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ui=new gwe;const QE="transparent",ywe={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=$E(e||QE),i=r.valid&&$E(t||QE);return i&&i.valid?i.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class xwe{constructor(t,n,r,i){const s=n[r];i=Wh([t.to,i,s,t.from]);const a=Wh([t.from,s,i]);this._active=!0,this._fn=t.fn||ywe[t.type||typeof a],this._easing=id[t.easing]||id.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Wh([t.to,n,i,t.from]),this._from=Wh([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,l=this._to;let c;if(this._active=s!==l&&(a||n<r),!this._active){this._target[i]=l,this._notify(!0);return}if(n<0){this._target[i]=s;return}c=n/r%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class X4{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!st(t))return;const n=Object.keys(Vt.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!st(s))return;const a={};for(const l of n)a[l]=s[l];(on(s.properties)&&s.properties||[i]).forEach(l=>{(l===i||!r.has(l))&&r.set(l,a)})})}_animateOptions(t,n){const r=n.options,i=bwe(t,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&vwe(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,n){const r=this._properties,i=[],s=t.$animations||(t.$animations={}),a=Object.keys(n),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(t,n));continue}const d=n[u];let f=s[u];const h=r.get(u);if(f)if(h&&f.active()){f.update(h,d,l);continue}else f.cancel();if(!h||!h.duration){t[u]=d;continue}s[u]=f=new xwe(h,t,u,d),i.push(f)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return Ui.add(this._chart,r),!0}}function vwe(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const s=e[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function bwe(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function GE(e,t){const n=e&&e.options||{},r=n.reverse,i=n.min===void 0?t:0,s=n.max===void 0?t:0;return{start:r?s:i,end:r?i:s}}function wwe(e,t,n){if(n===!1)return!1;const r=GE(e,n),i=GE(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Swe(e){let t,n,r,i;return st(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:e===!1}}function Z4(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function YE(e,t,n,r={}){const i=e.keys,s=r.mode==="single";let a,l,c,u;if(t===null)return;let d=!1;for(a=0,l=i.length;a<l;++a){if(c=+i[a],c===n){if(d=!0,r.all)continue;break}u=e.values[c],Ur(u)&&(s||t===0||Ei(t)===Ei(u))&&(t+=u)}return!d&&!r.all?0:t}function jwe(e,t){const{iScale:n,vScale:r}=t,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",a=Object.keys(e),l=new Array(a.length);let c,u,d;for(c=0,u=a.length;c<u;++c)d=a[c],l[c]={[i]:d,[s]:e[d]};return l}function E0(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function Nwe(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function kwe(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function Pwe(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function XE(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const s=e[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function ZE(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:l}=r,c=s.axis,u=a.axis,d=Nwe(s,a,r),f=t.length;let h;for(let p=0;p<f;++p){const g=t[p],{[c]:m,[u]:y}=g,v=g._stacks||(g._stacks={});h=v[u]=Pwe(i,d,m),h[l]=y,h._top=XE(h,a,!0,r.type),h._bottom=XE(h,a,!1,r.type);const x=h._visualValues||(h._visualValues={});x[l]=y}}function _0(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function Cwe(e,t){return $o(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Awe(e,t,n){return $o(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function vu(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const i of t){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const T0=e=>e==="reset"||e==="none",JE=(e,t)=>t?e:Object.assign({},e),Ewe=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:Z4(n,!0),values:null};class ro{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=E0(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&vu(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(f,h,p,g)=>f==="x"?h:f==="r"?g:p,s=n.xAxisID=Xe(r.xAxisID,_0(t,"x")),a=n.yAxisID=Xe(r.yAxisID,_0(t,"y")),l=n.rAxisID=Xe(r.rAxisID,_0(t,"r")),c=n.indexAxis,u=n.iAxisID=i(c,s,a,l),d=n.vAxisID=i(c,a,s,l);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&DE(this._data,this),t._stacked&&vu(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(st(n)){const i=this._cachedMeta;this._data=jwe(n,i)}else if(r!==n){if(r){DE(r,this);const i=this._cachedMeta;vu(i),i._parsed=[]}n&&Object.isExtensible(n)&&cbe(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=E0(n.vScale,n),n.stack!==r.stack&&(i=!0,vu(n),n.stack=r.stack),this._resyncElements(t),(i||s!==n._stacked)&&(ZE(this,n._parsed),n._stacked=E0(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,l=s.axis;let c=t===0&&n===i.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,f,h;if(this._parsing===!1)r._parsed=i,r._sorted=!0,h=i;else{on(i[t])?h=this.parseArrayData(r,i,t,n):st(i[t])?h=this.parseObjectData(r,i,t,n):h=this.parsePrimitiveData(r,i,t,n);const p=()=>f[l]===null||u&&f[l]<u[l];for(d=0;d<n;++d)r._parsed[d+t]=f=h[d],c&&(p()&&(c=!1),u=f);r._sorted=c}a&&ZE(this,h)}parsePrimitiveData(t,n,r,i){const{iScale:s,vScale:a}=t,l=s.axis,c=a.axis,u=s.getLabels(),d=s===a,f=new Array(i);let h,p,g;for(h=0,p=i;h<p;++h)g=h+r,f[h]={[l]:d||s.parse(u[g],g),[c]:a.parse(n[g],g)};return f}parseArrayData(t,n,r,i){const{xScale:s,yScale:a}=t,l=new Array(i);let c,u,d,f;for(c=0,u=i;c<u;++c)d=c+r,f=n[d],l[c]={x:s.parse(f[0],d),y:a.parse(f[1],d)};return l}parseObjectData(t,n,r,i){const{xScale:s,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(i);let d,f,h,p;for(d=0,f=i;d<f;++d)h=d+r,p=n[h],u[d]={x:s.parse(xo(p,l),h),y:a.parse(xo(p,c),h)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const i=this.chart,s=this._cachedMeta,a=n[t.axis],l={keys:Z4(i,!0),values:n._stacks[t.axis]._visualValues};return YE(l,a,s.index,{mode:r})}updateRangeFromParsed(t,n,r,i){const s=r[n.axis];let a=s===null?NaN:s;const l=i&&r._stacks[n.axis];i&&l&&(i.values=l,a=YE(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&t===r.iScale,a=i.length,l=this._getOtherScale(t),c=Ewe(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=kwe(l);let h,p;function g(){p=i[h];const m=p[l.axis];return!Ur(p[t.axis])||d>m||f<m}for(h=0;h<a&&!(!g()&&(this.updateRangeFromParsed(u,t,p,c),s));++h);if(s){for(h=a-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(u,t,p,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=n.length;i<s;++i)a=n[i][t.axis],Ur(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=Swe(Xe(this.options.clip,wwe(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||i.length-l,u=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(t,s,l,c),d=l;d<l+c;++d){const f=i[d];f.hidden||(f.active&&u?a.push(f):f.draw(t,s))}for(d=0;d<a.length;++d)a[d].draw(t,s)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];s=a.$context||(a.$context=Awe(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=Cwe(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const i=n==="active",s=this._cachedDataOpts,a=t+"-"+n,l=s[a],c=this.enableOptionSharing&&mf(r);if(l)return JE(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),f=i?[`${t}Hover`,"hover",t,""]:[t,""],h=u.getOptionScopes(this.getDataset(),d),p=Object.keys(Vt.elements[t]),g=()=>this.getContext(r,i,n),m=u.resolveNamedOptions(h,p,g,f);return m.$shared&&(m.$shared=c,s[a]=Object.freeze(JE(m,c))),m}_resolveAnimations(t,n,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${n}`,l=s[a];if(l)return l;let c;if(i.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,n),h=d.getOptionScopes(this.getDataset(),f);c=d.createResolver(h,this.getContext(t,r,n))}const u=new X4(i,c&&c.animations);return c&&c._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||T0(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),i=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:a}}updateElement(t,n,r,i){T0(i)?Object.assign(t,r):this._resolveAnimations(n,i).update(t,r)}updateSharedOptions(t,n,r){t&&!T0(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,i){t.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const i=r.length,s=n.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,n,r=!0){const i=this._cachedMeta,s=i.data,a=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=a;l--)u[l]=u[l-n]};for(c(s),l=t;l<a;++l)s[l]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(t,n),r&&this.updateElements(s,t,n,"reset")}updateElements(t,n,r,i){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,n);r._stacked&&vu(r,i)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,i]=t;this[n](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}$e(ro,"defaults",{}),$e(ro,"datasetElementType",null),$e(ro,"dataElementType",null);function _we(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(e));e._cache.$bar=M4(r.sort((i,s)=>i-s))}return e._cache.$bar}function Twe(e){const t=e.iScale,n=_we(t,e.type);let r=t._length,i,s,a,l;const c=()=>{a===32767||a===-32768||(mf(l)&&(r=Math.min(r,Math.abs(a-l)||r)),l=a)};for(i=0,s=n.length;i<s;++i)a=t.getPixelForValue(n[i]),c();for(l=void 0,i=0,s=t.ticks.length;i<s;++i)a=t.getPixelForTick(i),c();return r}function Owe(e,t,n,r){const i=n.barThickness;let s,a;return mt(i)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[e]-s/2}}function Iwe(e,t,n,r){const i=t.pixels,s=i[e];let a=e>0?i[e-1]:null,l=e<i.length-1?i[e+1]:null;const c=n.categoryPercentage;a===null&&(a=s-(l===null?t.end-t.start:l-s)),l===null&&(l=s+s-a);const u=s-(s-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/r,ratio:n.barPercentage,start:u}}function Dwe(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),a=Math.min(i,s),l=Math.max(i,s);let c=a,u=l;Math.abs(a)>Math.abs(l)&&(c=l,u=a),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:i,end:s,min:a,max:l}}function J4(e,t,n,r){return on(e)?Dwe(e,t,n,r):t[n.axis]=n.parse(e,r),t}function e_(e,t,n,r){const i=e.iScale,s=e.vScale,a=i.getLabels(),l=i===s,c=[];let u,d,f,h;for(u=n,d=n+r;u<d;++u)h=t[u],f={},f[i.axis]=l||i.parse(a[u],u),c.push(J4(h,f,s,u));return c}function O0(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Rwe(e,t,n){return e!==0?Ei(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Mwe(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}function $we(e,t,n,r){let i=t.borderSkipped;const s={};if(!i){e.borderSkipped=s;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:l,reverse:c,top:u,bottom:d}=Mwe(e);i==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=u:(n._bottom||0)===r?i=d:(s[t_(d,a,l,c)]=!0,i=u)),s[t_(i,a,l,c)]=!0,e.borderSkipped=s}function t_(e,t,n,r){return r?(e=Lwe(e,t,n),e=n_(e,n,t)):e=n_(e,t,n),e}function Lwe(e,t,n){return e===t?n:e===n?t:e}function n_(e,t,n){return e==="start"?t:e==="end"?n:e}function Fwe(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class Pp extends ro{parsePrimitiveData(t,n,r,i){return e_(t,n,r,i)}parseArrayData(t,n,r,i){return e_(t,n,r,i)}parseObjectData(t,n,r,i){const{iScale:s,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=s.axis==="x"?l:c,d=a.axis==="x"?l:c,f=[];let h,p,g,m;for(h=r,p=r+i;h<p;++h)m=n[h],g={},g[s.axis]=s.parse(xo(m,u),h),f.push(J4(xo(m,d),g,a,h));return f}updateRangeFromParsed(t,n,r,i){super.updateRangeFromParsed(t,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(t),a=s._custom,l=O0(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,r,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:f,includeOptions:h}=this._getSharedOptions(n,i);for(let p=n;p<n+r;p++){const g=this.getParsed(p),m=s||mt(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,d),v=(g._stacks||{})[l.axis],x={horizontal:u,base:m.base,enableBorderRadius:!v||O0(g._custom)||a===v._top||a===v._bottom,x:u?m.head:y.center,y:u?y.center:m.head,height:u?y.size:Math.abs(m.size),width:u?Math.abs(m.size):y.size};h&&(x.options=f||this.resolveDataElementOptions(p,t[p].active?"active":i));const w=x.options||t[p].options;$we(x,w,v,a),Fwe(x,w,d.ratio),this.updateElement(t[p],p,x,i)}}_getStacks(t,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=r.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[r.axis],u=d=>{const f=d._parsed.find(p=>p[r.axis]===c),h=f&&f[d.vScale.axis];if(mt(h)||isNaN(h))return!0};for(const d of i)if(!(n!==void 0&&u(d))&&((s===!1||a.indexOf(d.stack)===-1||s===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[Xe(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,r){const i=this._getStacks(t,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const t=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,a;for(s=0,a=n.data.length;s<a;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const l=t.barThickness;return{min:l||Twe(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:a}}=this,l=s||0,c=this.getParsed(t),u=c._custom,d=O0(u);let f=c[n.axis],h=0,p=r?this.applyStack(n,c,r):f,g,m;p!==f&&(h=p-f,p=f),d&&(f=u.barStart,p=u.barEnd-u.barStart,f!==0&&Ei(f)!==Ei(u.barEnd)&&(h=0),h+=f);const y=!mt(s)&&!d?s:h;let v=n.getPixelForValue(y);if(this.chart.getDataVisibility(t)?g=n.getPixelForValue(h+p):g=v,m=g-v,Math.abs(m)<a){m=Rwe(m,n,l)*a,f===l&&(v-=m/2);const x=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),j=Math.min(x,w),S=Math.max(x,w);v=Math.max(Math.min(v,S),j),g=v+m,r&&!d&&(c._stacks[n.axis]._visualValues[i]=n.getValueForPixel(g)-n.getValueForPixel(v))}if(v===n.getPixelForValue(l)){const x=Ei(m)*n.getLineWidthForValue(l)/2;v+=x,m-=x}return{size:m,base:v,head:g,center:g+m/2}}_calculateBarIndexPixels(t,n){const r=n.scale,i=this.options,s=i.skipNull,a=Xe(i.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(n.grouped){const d=s?this._getStackCount(t):n.stackCount,f=i.barThickness==="flex"?Iwe(t,n,i,d*u):Owe(t,n,i,d*u),h=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(Xe(h,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+p;l=f.start+f.chunk*g+f.chunk/2,c=Math.min(a,f.chunk*f.ratio)}else l=r.getPixelForValue(this.getParsed(t)[r.axis],t),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,r=t.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}$e(Pp,"id","bar"),$e(Pp,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),$e(Pp,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Bwe(e,t,n){let r=1,i=1,s=0,a=0;if(t<Wt){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),f=Math.cos(c),h=Math.sin(c),p=(w,j,S)=>yf(w,l,c,!0)?1:Math.max(j,j*n,S,S*n),g=(w,j,S)=>yf(w,l,c,!0)?-1:Math.min(j,j*n,S,S*n),m=p(0,u,f),y=p(un,d,h),v=g(yt,u,f),x=g(yt+un,d,h);r=(m-v)/2,i=(y-x)/2,s=-(m+v)/2,a=-(y+x)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}class Du extends ro{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=c=>+r[c];if(st(r[t])){const{key:c="value"}=this._parsing;s=u=>+xo(r[u],c)}let a,l;for(a=t,l=t+n;a<l;++a)i._parsed[a]=s(a)}}_getRotation(){return Ji(this.options.rotation-90)}_getCircumference(){return Ji(this.options.circumference)}_getRotationExtents(){let t=Wt,n=-Wt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),a=i._getCircumference();t=Math.min(t,s),n=Math.max(n,s+a)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(Vve(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:f}=this._getRotationExtents(),{ratioX:h,ratioY:p,offsetX:g,offsetY:m}=Bwe(f,d,c),y=(r.width-a)/h,v=(r.height-a)/p,x=Math.max(Math.min(y,v)/2,0),w=O4(this.options.radius,x),j=Math.max(w*c,0),S=(w-j)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,i.total=this.calculateTotal(),this.outerRadius=w-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/Wt)}updateElements(t,n,r,i){const s=i==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,f=(l.top+l.bottom)/2,h=s&&u.animateScale,p=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(n,i);let v=this._getRotation(),x;for(x=0;x<n;++x)v+=this._circumference(x,s);for(x=n;x<n+r;++x){const w=this._circumference(x,s),j=t[x],S={x:d+this.offsetX,y:f+this.offsetY,startAngle:v,endAngle:v+w,circumference:w,outerRadius:g,innerRadius:p};y&&(S.options=m||this.resolveDataElementOptions(x,j.active?"active":i)),v+=w,this.updateElement(j,x,S,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let r=0,i;for(i=0;i<n.length;i++){const s=t._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Wt*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Fj(n._parsed[t],r.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let n=0;const r=this.chart;let i,s,a,l,c;if(!t){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){a=r.getDatasetMeta(i),t=a.data,l=a.controller;break}}if(!t)return 0;for(i=0,s=t.length;i<s;++i)c=l.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,i=t.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(Xe(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}$e(Du,"id","doughnut"),$e(Du,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),$e(Du,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),$e(Du,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=t.legend.options;return n.labels.map((s,a)=>{const c=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Cp extends ro{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,a=this.chart._animationsDisabled;let{start:l,count:c}=fbe(n,i,a);this._drawStart=l,this._drawCount=c,hbe(n)&&(l=0,c=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(i,l,c,t)}updateElements(t,n,r,i){const s=i==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i),h=a.axis,p=l.axis,{spanGaps:g,segment:m}=this.options,y=gf(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||i==="none",x=n+r,w=t.length;let j=n>0&&this.getParsed(n-1);for(let S=0;S<w;++S){const k=t[S],N=v?k:{};if(S<n||S>=x){N.skip=!0;continue}const P=this.getParsed(S),A=mt(P[p]),C=N[h]=a.getPixelForValue(P[h],S),_=N[p]=s||A?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,P,c):P[p],S);N.skip=isNaN(C)||isNaN(_)||A,N.stop=S>0&&Math.abs(P[h]-j[h])>y,m&&(N.parsed=P,N.raw=u.data[S]),f&&(N.options=d||this.resolveDataElementOptions(S,k.active?"active":i)),v||this.updateElement(k,S,N,i),j=P}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}$e(Cp,"id","line"),$e(Cp,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),$e(Cp,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function _a(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Qj{constructor(t){$e(this,"options");this.options=t||{}}static override(t){Object.assign(Qj.prototype,t)}init(){}formats(){return _a()}parse(){return _a()}format(){return _a()}add(){return _a()}diff(){return _a()}startOf(){return _a()}endOf(){return _a()}}var Uwe={_date:Qj};function zwe(e,t,n,r){const{controller:i,data:s,_sorted:a}=e,l=i._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&a&&s.length){const u=l._reversePixels?obe:Qa;if(r){if(i._sharedOptions){const d=s[0],f=typeof d.getRange=="function"&&d.getRange(t);if(f){const h=u(s,t,n-f),p=u(s,t,n+f);return{lo:h.lo,hi:p.hi}}}}else{const d=u(s,t,n);if(c){const{vScale:f}=i._cachedMeta,{_parsed:h}=e,p=h.slice(0,d.lo+1).reverse().findIndex(m=>!mt(m[f.axis]));d.lo-=Math.max(0,p);const g=h.slice(d.hi).findIndex(m=>!mt(m[f.axis]));d.hi+=Math.max(0,g)}return d}}return{lo:0,hi:s.length-1}}function Zf(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let l=0,c=s.length;l<c;++l){const{index:u,data:d}=s[l],{lo:f,hi:h}=zwe(s[l],t,a,i);for(let p=f;p<=h;++p){const g=d[p];g.skip||r(g,u,p)}}}function Hwe(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,i){const s=t?Math.abs(r.x-i.x):0,a=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function I0(e,t,n,r,i){const s=[];return!i&&!e.isPointInArea(t)||Zf(e,n,t,function(l,c,u){!i&&!xf(l,e.chartArea,0)||l.inRange(t.x,t.y,r)&&s.push({element:l,datasetIndex:c,index:u})},!0),s}function Wwe(e,t,n,r){let i=[];function s(a,l,c){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],r),{angle:f}=D4(a,{x:t.x,y:t.y});yf(f,u,d)&&i.push({element:a,datasetIndex:l,index:c})}return Zf(e,n,t,s),i}function qwe(e,t,n,r,i,s){let a=[];const l=Hwe(n);let c=Number.POSITIVE_INFINITY;function u(d,f,h){const p=d.inRange(t.x,t.y,i);if(r&&!p)return;const g=d.getCenterPoint(i);if(!(!!s||e.isPointInArea(g))&&!p)return;const y=l(t,g);y<c?(a=[{element:d,datasetIndex:f,index:h}],c=y):y===c&&a.push({element:d,datasetIndex:f,index:h})}return Zf(e,n,t,u),a}function D0(e,t,n,r,i,s){return!s&&!e.isPointInArea(t)?[]:n==="r"&&!r?Wwe(e,t,n,i):qwe(e,t,n,r,i,s)}function r_(e,t,n,r,i){const s=[],a=n==="x"?"inXRange":"inYRange";let l=!1;return Zf(e,n,t,(c,u,d)=>{c[a]&&c[a](t[n],i)&&(s.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,i))}),r&&!l?[]:s}var Vwe={evaluateInteractionItems:Zf,modes:{index(e,t,n,r){const i=Ma(t,e),s=n.axis||"x",a=n.includeInvisible||!1,l=n.intersect?I0(e,i,s,r,a):D0(e,i,s,!1,r,a),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,f=u.data[d];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,n,r){const i=Ma(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let l=n.intersect?I0(e,i,s,r,a):D0(e,i,s,!1,r,a);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,n,r){const i=Ma(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return I0(e,i,s,r,a)},nearest(e,t,n,r){const i=Ma(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return D0(e,i,s,n.intersect,r,a)},x(e,t,n,r){const i=Ma(t,e);return r_(e,i,"x",n.intersect,r)},y(e,t,n,r){const i=Ma(t,e);return r_(e,i,"y",n.intersect,r)}}};const eL=["left","top","right","bottom"];function bu(e,t){return e.filter(n=>n.pos===t)}function i_(e,t){return e.filter(n=>eL.indexOf(n.pos)===-1&&n.box.axis===t)}function wu(e,t){return e.sort((n,r)=>{const i=t?r:n,s=t?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function Kwe(e){const t=[];let n,r,i,s,a,l;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],{position:s,options:{stack:a,stackWeight:l=1}}=i,t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:l});return t}function Qwe(e){const t={};for(const n of e){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!eL.includes(i))continue;const a=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}function Gwe(e,t){const n=Qwe(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,l;for(s=0,a=e.length;s<a;++s){l=e[s];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*r:c&&t.availableWidth,l.height=i):(l.width=r,l.height=d?d*i:c&&t.availableHeight)}return n}function Ywe(e){const t=Kwe(e),n=wu(t.filter(u=>u.box.fullSize),!0),r=wu(bu(t,"left"),!0),i=wu(bu(t,"right")),s=wu(bu(t,"top"),!0),a=wu(bu(t,"bottom")),l=i_(t,"x"),c=i_(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(a).concat(l),chartArea:bu(t,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(a).concat(l)}}function s_(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function tL(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Xwe(e,t,n,r){const{pos:i,box:s}=n,a=e.maxPadding;if(!st(i)){n.size&&(e[i]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?s.height:s.width),n.size=f.size/f.count,e[i]+=n.size}s.getPadding&&tL(a,s.getPadding());const l=Math.max(0,t.outerWidth-s_(a,e,"left","right")),c=Math.max(0,t.outerHeight-s_(a,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function Zwe(e){const t=e.maxPadding;function n(r){const i=Math.max(t[r]-e[r],0);return e[r]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Jwe(e,t){const n=t.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(t[a],n[a])}),s}return r(e?["left","right"]:["top","bottom"])}function Ru(e,t,n,r){const i=[];let s,a,l,c,u,d;for(s=0,a=e.length,u=0;s<a;++s){l=e[s],c=l.box,c.update(l.width||t.w,l.height||t.h,Jwe(l.horizontal,t));const{same:f,other:h}=Xwe(t,n,l,r);u|=f&&i.length,d=d||h,c.fullSize||i.push(l)}return u&&Ru(i,t,n,r)||d}function Qh(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function a_(e,t,n,r){const i=n.padding;let{x:s,y:a}=t;for(const l of e){const c=l.box,u=r[l.stack]||{count:1,placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const f=t.w*d,h=u.size||c.height;mf(u.start)&&(a=u.start),c.fullSize?Qh(c,i.left,a,n.outerWidth-i.right-i.left,h):Qh(c,t.left+u.placed,a,f,h),u.start=a,u.placed+=f,a=c.bottom}else{const f=t.h*d,h=u.size||c.width;mf(u.start)&&(s=u.start),c.fullSize?Qh(c,s,i.top,h,n.outerHeight-i.bottom-i.top):Qh(c,s,t.top+u.placed,h,f),u.start=s,u.placed+=f,s=c.right}}t.x=s,t.y=a}var Mr={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=zr(e.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(n-i.height,0),l=Ywe(e.boxes),c=l.vertical,u=l.horizontal;gt(e.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const d=c.reduce((m,y)=>y.box.options&&y.box.options.display===!1?m:m+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),h=Object.assign({},i);tL(h,zr(r));const p=Object.assign({maxPadding:h,w:s,h:a,x:i.left,y:i.top},i),g=Gwe(c.concat(u),f);Ru(l.fullSize,p,f,g),Ru(c,p,f,g),Ru(u,p,f,g)&&Ru(c,p,f,g),Zwe(p),a_(l.leftAndTop,p,f,g),p.x+=p.w,p.y+=p.h,a_(l.rightAndBottom,p,f,g),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},gt(l.chartArea,m=>{const y=m.box;Object.assign(y,e.chartArea),y.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class nL{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,i){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(t){return!0}updateConfig(t){}}class e1e extends nL{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ap="$chartjs",t1e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},o_=e=>e===null||e==="";function n1e(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[Ap]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",o_(i)){const s=WE(e,"width");s!==void 0&&(e.width=s)}if(o_(r))if(e.style.height==="")e.height=e.width/(t||2);else{const s=WE(e,"height");s!==void 0&&(e.height=s)}return e}const rL=twe?{passive:!0}:!1;function r1e(e,t,n){e&&e.addEventListener(t,n,rL)}function i1e(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,rL)}function s1e(e,t){const n=t1e[e.type]||e.type,{x:r,y:i}=Ma(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:i!==void 0?i:null}}function jg(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function a1e(e,t,n){const r=e.canvas,i=new MutationObserver(s=>{let a=!1;for(const l of s)a=a||jg(l.addedNodes,r),a=a&&!jg(l.removedNodes,r);a&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function o1e(e,t,n){const r=e.canvas,i=new MutationObserver(s=>{let a=!1;for(const l of s)a=a||jg(l.removedNodes,r),a=a&&!jg(l.addedNodes,r);a&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const bf=new Map;let l_=0;function iL(){const e=window.devicePixelRatio;e!==l_&&(l_=e,bf.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function l1e(e,t){bf.size||window.addEventListener("resize",iL),bf.set(e,t)}function c1e(e){bf.delete(e),bf.size||window.removeEventListener("resize",iL)}function u1e(e,t,n){const r=e.canvas,i=r&&Kj(r);if(!i)return;const s=L4((l,c)=>{const u=i.clientWidth;n(l,c),u<i.clientWidth&&n()},window),a=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||s(u,d)});return a.observe(i),l1e(e,s),a}function R0(e,t,n){n&&n.disconnect(),t==="resize"&&c1e(e)}function d1e(e,t,n){const r=e.canvas,i=L4(s=>{e.ctx!==null&&n(s1e(s,e))},e);return r1e(r,t,i),i}class f1e extends nL{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(n1e(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[Ap])return!1;const r=n[Ap].initial;["height","width"].forEach(s=>{const a=r[s];mt(a)?n.removeAttribute(s):n.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Ap],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),a={attach:a1e,detach:o1e,resize:u1e}[n]||d1e;i[n]=a(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),i=r[n];if(!i)return;({attach:R0,detach:R0,resize:R0}[n]||i1e)(t,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,i){return ewe(t,n,r,i)}isAttached(t){const n=t&&Kj(t);return!!(n&&n.isConnected)}}function h1e(e){return!Vj()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?e1e:f1e}var ep;let js=(ep=class{constructor(){$e(this,"x");$e(this,"y");$e(this,"active",!1);$e(this,"options");$e(this,"$animations")}tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return gf(this.x)&&gf(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const i={};return t.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},$e(ep,"defaults",{}),$e(ep,"defaultRoutes"),ep);function p1e(e,t){const n=e.options.ticks,r=m1e(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?y1e(t):[],a=s.length,l=s[0],c=s[a-1],u=[];if(a>i)return x1e(t,u,s,a/i),u;const d=g1e(s,t,i);if(a>0){let f,h;const p=a>1?Math.round((c-l)/(a-1)):null;for(Gh(t,u,d,mt(p)?0:l-p,l),f=0,h=a-1;f<h;f++)Gh(t,u,d,s[f],s[f+1]);return Gh(t,u,d,c,mt(p)?t.length:c+p),u}return Gh(t,u,d),u}function m1e(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}function g1e(e,t,n){const r=v1e(e),i=t.length/n;if(!r)return Math.max(i,1);const s=ebe(r);for(let a=0,l=s.length-1;a<l;a++){const c=s[a];if(c>i)return c}return Math.max(i,1)}function y1e(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function x1e(e,t,n,r){let i=0,s=n[0],a;for(r=Math.ceil(r),a=0;a<e.length;a++)a===s&&(t.push(e[a]),i++,s=n[i*r])}function Gh(e,t,n,r,i){const s=Xe(r,0),a=Math.min(Xe(i,e.length),e.length);let l=0,c,u,d;for(n=Math.ceil(n),i&&(c=i-r,n=c/Math.floor(c/n)),d=s;d<0;)l++,d=Math.round(s+l*n);for(u=Math.max(s,0);u<a;u++)u===d&&(t.push(e[u]),l++,d=Math.round(s+l*n))}function v1e(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const b1e=e=>e==="left"?"right":e==="right"?"left":e,c_=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,u_=(e,t)=>Math.min(t||e,e);function d_(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function w1e(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,a=e._endPixel,l=1e-6;let c=e.getPixelForTick(i),u;if(!(n&&(r===1?u=Math.max(c-s,a-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(i-1))/2,c+=i<t?u:-u,c<s-l||c>a+l)))return c}function S1e(e,t){gt(e,n=>{const r=n.gc,i=r.length/2;let s;if(i>t){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Su(e){return e.drawTicks?e.tickLength:0}function f_(e,t){if(!e.display)return 0;const n=In(e.font,t),r=zr(e.padding);return(on(e.text)?e.text.length:1)*n.lineHeight+r.height}function j1e(e,t){return $o(e,{scale:t,type:"scale"})}function N1e(e,t,n){return $o(e,{tick:n,index:t,type:"tick"})}function k1e(e,t,n){let r=$j(e);return(n&&t!=="right"||!n&&t==="right")&&(r=b1e(r)),r}function P1e(e,t,n,r){const{top:i,left:s,bottom:a,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let f=0,h,p,g;const m=a-i,y=l-s;if(e.isHorizontal()){if(p=kn(r,s,l),st(n)){const v=Object.keys(n)[0],x=n[v];g=d[v].getPixelForValue(x)+m-t}else n==="center"?g=(u.bottom+u.top)/2+m-t:g=c_(e,n,t);h=l-s}else{if(st(n)){const v=Object.keys(n)[0],x=n[v];p=d[v].getPixelForValue(x)-y+t}else n==="center"?p=(u.left+u.right)/2-y+t:p=c_(e,n,t);g=kn(r,a,i),f=n==="left"?-un:un}return{titleX:p,titleY:g,maxWidth:h,rotation:f}}class Vc extends js{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return t=gi(t,Number.POSITIVE_INFINITY),n=gi(n,Number.NEGATIVE_INFINITY),r=gi(r,Number.POSITIVE_INFINITY),i=gi(i,Number.NEGATIVE_INFINITY),{min:gi(t,r),max:gi(n,i),minDefined:Ur(t),maxDefined:Ur(n)}}getMinMax(t){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)a=l[c].controller.getMinMax(this,t),i||(n=Math.min(n,a.min)),s||(r=Math.max(r,a.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:gi(n,gi(r,n)),max:gi(r,gi(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_t(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Obe(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?d_(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=p1e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_t(this.options.afterUpdate,[this])}beforeSetDimensions(){_t(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_t(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),_t(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_t(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.label=_t(n.callback,[s.value,r,t],this)}afterTickToLabelConversion(){_t(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_t(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=u_(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let a=i,l,c,u;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),f=d.widest.width,h=d.highest.height,p=On(this.chart.width-f,0,this.maxWidth);l=t.offset?this.maxWidth/r:p/(r-1),f+6>l&&(l=p/(r-(t.offset?.5:1)),c=this.maxHeight-Su(t.grid)-n.padding-f_(t.title,this.chart.options.font),u=Math.sqrt(f*f+h*h),a=ibe(Math.min(Math.asin(On((d.highest.height+6)/l,-1,1)),Math.asin(On(c/u,-1,1))-Math.asin(On(h/u,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){_t(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_t(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=f_(i,n.options.font);if(l?(t.width=this.maxWidth,t.height=Su(s)+c):(t.height=this.maxHeight,t.width=Su(s)+c),r.display&&this.ticks.length){const{first:u,last:d,widest:f,highest:h}=this._getLabelSizes(),p=r.padding*2,g=Ji(this.labelRotation),m=Math.cos(g),y=Math.sin(g);if(l){const v=r.mirror?0:y*f.width+m*h.height;t.height=Math.min(this.maxHeight,t.height+v+p)}else{const v=r.mirror?0:m*f.width+y*h.height;t.width=Math.min(this.maxWidth,t.width+v+p)}this._calculatePadding(u,d,y,m)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,i){const{ticks:{align:s,padding:a},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;c?u?(h=i*t.width,p=r*n.height):(h=r*t.height,p=i*n.width):s==="start"?p=n.width:s==="end"?h=t.width:s!=="inner"&&(h=t.width/2,p=n.width/2),this.paddingLeft=Math.max((h-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-f+a)*this.width/(this.width-f),0)}else{let d=n.height/2,f=t.height/2;s==="start"?(d=0,f=t.height):s==="end"&&(d=n.height,f=0),this.paddingTop=d+a,this.paddingBottom=f+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_t(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)mt(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=d_(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:i,_longestTextCache:s}=this,a=[],l=[],c=Math.floor(n/u_(n,r));let u=0,d=0,f,h,p,g,m,y,v,x,w,j,S;for(f=0;f<n;f+=c){if(g=t[f].label,m=this._resolveTickFontOptions(f),i.font=y=m.string,v=s[y]=s[y]||{data:{},gc:[]},x=m.lineHeight,w=j=0,!mt(g)&&!on(g))w=FE(i,v.data,v.gc,w,g),j=x;else if(on(g))for(h=0,p=g.length;h<p;++h)S=g[h],!mt(S)&&!on(S)&&(w=FE(i,v.data,v.gc,w,S),j+=x);a.push(w),l.push(j),u=Math.max(w,u),d=Math.max(j,d)}S1e(s,n);const k=a.indexOf(u),N=l.indexOf(d),P=A=>({width:a[A]||0,height:l[A]||0});return{first:P(0),last:P(n-1),widest:P(k),highest:P(N),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return abe(this._alignToPixels?Ea(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=N1e(this.getContext(),t,r))}return this.$context||(this.$context=j1e(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Ji(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),a=t.autoSkipPadding||0,l=s?s.widest.width+a:0,c=s?s.highest.height+a:0;return this.isHorizontal()?c*r>l*i?l/r:c/i:c*i<l*r?c/r:l/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:l}=i,c=s.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),h=Su(s),p=[],g=l.setContext(this.getContext()),m=g.display?g.width:0,y=m/2,v=function($){return Ea(r,$,m)};let x,w,j,S,k,N,P,A,C,_,R,z;if(a==="top")x=v(this.bottom),N=this.bottom-h,A=x-y,_=v(t.top)+y,z=t.bottom;else if(a==="bottom")x=v(this.top),_=t.top,z=v(t.bottom)-y,N=x+y,A=this.top+h;else if(a==="left")x=v(this.right),k=this.right-h,P=x-y,C=v(t.left)+y,R=t.right;else if(a==="right")x=v(this.left),C=t.left,R=v(t.right)-y,k=x+y,P=this.left+h;else if(n==="x"){if(a==="center")x=v((t.top+t.bottom)/2+.5);else if(st(a)){const $=Object.keys(a)[0],E=a[$];x=v(this.chart.scales[$].getPixelForValue(E))}_=t.top,z=t.bottom,N=x+y,A=N+h}else if(n==="y"){if(a==="center")x=v((t.left+t.right)/2);else if(st(a)){const $=Object.keys(a)[0],E=a[$];x=v(this.chart.scales[$].getPixelForValue(E))}k=x-y,P=k-h,C=t.left,R=t.right}const M=Xe(i.ticks.maxTicksLimit,f),I=Math.max(1,Math.ceil(f/M));for(w=0;w<f;w+=I){const $=this.getContext(w),E=s.setContext($),T=l.setContext($),D=E.lineWidth,H=E.color,F=T.dash||[],B=T.dashOffset,Z=E.tickWidth,V=E.tickColor,G=E.tickBorderDash||[],X=E.tickBorderDashOffset;j=w1e(this,w,c),j!==void 0&&(S=Ea(r,j,D),u?k=P=C=R=S:N=A=_=z=S,p.push({tx1:k,ty1:N,tx2:P,ty2:A,x1:C,y1:_,x2:R,y2:z,width:D,color:H,borderDash:F,borderDashOffset:B,tickWidth:Z,tickColor:V,tickBorderDash:G,tickBorderDashOffset:X}))}return this._ticksLength=f,this._borderValue=x,p}_computeLabelItems(t){const n=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:f}=s,h=Su(r.grid),p=h+d,g=f?-d:p,m=-Ji(this.labelRotation),y=[];let v,x,w,j,S,k,N,P,A,C,_,R,z="middle";if(i==="top")k=this.bottom-g,N=this._getXAxisLabelAlignment();else if(i==="bottom")k=this.top+g,N=this._getXAxisLabelAlignment();else if(i==="left"){const I=this._getYAxisLabelAlignment(h);N=I.textAlign,S=I.x}else if(i==="right"){const I=this._getYAxisLabelAlignment(h);N=I.textAlign,S=I.x}else if(n==="x"){if(i==="center")k=(t.top+t.bottom)/2+p;else if(st(i)){const I=Object.keys(i)[0],$=i[I];k=this.chart.scales[I].getPixelForValue($)+p}N=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")S=(t.left+t.right)/2-p;else if(st(i)){const I=Object.keys(i)[0],$=i[I];S=this.chart.scales[I].getPixelForValue($)}N=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(c==="start"?z="top":c==="end"&&(z="bottom"));const M=this._getLabelSizes();for(v=0,x=l.length;v<x;++v){w=l[v],j=w.label;const I=s.setContext(this.getContext(v));P=this.getPixelForTick(v)+s.labelOffset,A=this._resolveTickFontOptions(v),C=A.lineHeight,_=on(j)?j.length:1;const $=_/2,E=I.color,T=I.textStrokeColor,D=I.textStrokeWidth;let H=N;a?(S=P,N==="inner"&&(v===x-1?H=this.options.reverse?"left":"right":v===0?H=this.options.reverse?"right":"left":H="center"),i==="top"?u==="near"||m!==0?R=-_*C+C/2:u==="center"?R=-M.highest.height/2-$*C+C:R=-M.highest.height+C/2:u==="near"||m!==0?R=C/2:u==="center"?R=M.highest.height/2-$*C:R=M.highest.height-_*C,f&&(R*=-1),m!==0&&!I.showLabelBackdrop&&(S+=C/2*Math.sin(m))):(k=P,R=(1-_)*C/2);let F;if(I.showLabelBackdrop){const B=zr(I.backdropPadding),Z=M.heights[v],V=M.widths[v];let G=R-B.top,X=0-B.left;switch(z){case"middle":G-=Z/2;break;case"bottom":G-=Z;break}switch(N){case"center":X-=V/2;break;case"right":X-=V;break;case"inner":v===x-1?X-=V:v>0&&(X-=V/2);break}F={left:X,top:G,width:V+B.width,height:Z+B.height,color:I.backdropColor}}y.push({label:j,font:A,textOffset:R,options:{rotation:m,color:E,strokeColor:T,strokeWidth:D,textAlign:H,textBaseline:z,translation:[S,k],backdrop:F}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Ji(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),l=t+s,c=a.widest.width;let u,d;return n==="left"?i?(d=this.right+s,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?i?(d=this.left+s,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:i,width:s,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,i,s,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,a;const l=(c,u,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(s=0,a=i.length;s<a;++s){const c=i[s];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const l=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,f,h;this.isHorizontal()?(u=Ea(t,this.left,a)-a/2,d=Ea(t,this.right,l)+l/2,f=h=c):(f=Ea(t,this.top,a)-a/2,h=Ea(t,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,f),n.lineTo(d,h),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Bj(r,i);const s=this.getLabelItems(t);for(const a of s){const l=a.options,c=a.font,u=a.label,d=a.textOffset;vf(r,u,0,d,c,l)}i&&Uj(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=In(r.font),a=zr(r.padding),l=r.align;let c=s.lineHeight/2;n==="bottom"||n==="center"||st(n)?(c+=a.bottom,on(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=a.top;const{titleX:u,titleY:d,maxWidth:f,rotation:h}=P1e(this,c,n,l);vf(t,r.text,0,0,s,{color:r.color,maxWidth:f,rotation:h,textAlign:k1e(l,n,i),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=Xe(t.grid&&t.grid.z,-1),i=Xe(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Vc.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=n.length;s<a;++s){const l=n[s];l[r]===this.id&&(!t||l.type===t)&&i.push(l)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return In(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Yh{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;E1e(n)&&(r=this.register(n));const i=this.items,s=t.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,C1e(t,a,r),this.override&&Vt.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,i=this.scope;r in n&&delete n[r],i&&r in Vt[i]&&(delete Vt[i][r],this.override&&delete vo[r])}}function C1e(e,t,n){const r=pf(Object.create(null),[n?Vt.get(n):{},Vt.get(t),e.defaults]);Vt.set(t,r),e.defaultRoutes&&A1e(t,e.defaultRoutes),e.descriptors&&Vt.describe(t,e.descriptors)}function A1e(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),a=t[n].split("."),l=a.pop(),c=a.join(".");Vt.route(s,i,c,l)})}function E1e(e){return"id"in e&&"defaults"in e}class _1e{constructor(){this.controllers=new Yh(ro,"datasets",!0),this.elements=new Yh(js,"elements"),this.plugins=new Yh(Object,"plugins"),this.scales=new Yh(Vc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):gt(i,a=>{const l=r||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,n,r){const i=Rj(t);_t(r["before"+i],[],r),n[t](r),_t(r["after"+i],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var vi=new _1e;class T1e{constructor(){this._init=[]}notify(t,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),a=this._notify(s,t,n,r);return n==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,r,i){i=i||{};for(const s of t){const a=s.plugin,l=a[r],c=[n,i,s.options];if(_t(l,c,a)===!1&&i.cancelable)return!1}return!0}invalidate(){mt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,i=Xe(r.options&&r.options.plugins,{}),s=O1e(r);return i===!1&&!n?[]:D1e(t,s,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(i(n,r),t,"stop"),this._notify(i(r,n),t,"start")}}function O1e(e){const t={},n=[],r=Object.keys(vi.plugins.items);for(let s=0;s<r.length;s++)n.push(vi.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function I1e(e,t){return!t&&e===!1?null:e===!0?{}:e}function D1e(e,{plugins:t,localIds:n},r,i){const s=[],a=e.getContext();for(const l of t){const c=l.id,u=I1e(r[c],i);u!==null&&s.push({plugin:l,options:R1e(e.config,{plugin:l,local:n[c]},u,a)})}return s}function R1e(e,{plugin:t,local:n},r,i){const s=e.pluginScopeKeys(t),a=e.getOptionScopes(r,s);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Hw(e,t){const n=Vt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function M1e(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function $1e(e,t){return e===t?"_index_":"_value_"}function h_(e){if(e==="x"||e==="y"||e==="r")return e}function L1e(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Ww(e,...t){if(h_(e))return e;for(const n of t){const r=n.axis||L1e(n.position)||e.length>1&&h_(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function p_(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function F1e(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return p_(e,"x",n[0])||p_(e,"y",n[0])}return{}}function B1e(e,t){const n=vo[e.type]||{scales:{}},r=t.scales||{},i=Hw(e.type,t),s=Object.create(null);return Object.keys(r).forEach(a=>{const l=r[a];if(!st(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Ww(a,l,F1e(a,e),Vt.scales[l.type]),u=$1e(c,i),d=n.scales||{};s[a]=nd(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,c=a.indexAxis||Hw(l,t),d=(vo[l]||{}).scales||{};Object.keys(d).forEach(f=>{const h=M1e(f,c),p=a[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),nd(s[p],[{axis:h},r[p],d[f]])})}),Object.keys(s).forEach(a=>{const l=s[a];nd(l,[Vt.scales[l.type],Vt.scale])}),s}function sL(e){const t=e.options||(e.options={});t.plugins=Xe(t.plugins,{}),t.scales=B1e(e,t)}function aL(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function U1e(e){return e=e||{},e.data=aL(e.data),sL(e),e}const m_=new Map,oL=new Set;function Xh(e,t){let n=m_.get(e);return n||(n=t(),m_.set(e,n),oL.add(n)),n}const ju=(e,t,n)=>{const r=xo(t,n);r!==void 0&&e.add(r)};class z1e{constructor(t){this._config=U1e(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=aL(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),sL(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Xh(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Xh(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Xh(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return Xh(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let i=r.get(t);return(!i||n)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,n,r){const{options:i,type:s}=this,a=this._cachedScopes(t,r),l=a.get(n);if(l)return l;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(f=>ju(c,t,f))),d.forEach(f=>ju(c,i,f)),d.forEach(f=>ju(c,vo[s]||{},f)),d.forEach(f=>ju(c,Vt,f)),d.forEach(f=>ju(c,Uw,f))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),oL.has(n)&&a.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,vo[n]||{},Vt.datasets[n]||{},{type:n},Vt,Uw]}resolveNamedOptions(t,n,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:l}=g_(this._resolverCache,t,i);let c=a;if(W1e(a,n)){s.$shared=!1,r=da(r)?r():r;const u=this.createResolver(t,r,l);c=xc(a,r,u)}for(const u of n)s[u]=c[u];return s}createResolver(t,n,r=[""],i){const{resolver:s}=g_(this._resolverCache,t,r);return st(n)?xc(s,n,void 0,i):s}}function g_(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Hj(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(i,s)),s}const H1e=e=>st(e)&&Object.getOwnPropertyNames(e).some(t=>da(e[t]));function W1e(e,t){const{isScriptable:n,isIndexable:r}=H4(e);for(const i of t){const s=n(i),a=r(i),l=(a||s)&&e[i];if(s&&(da(l)||H1e(l))||a&&on(l))return!0}return!1}var q1e="4.5.0";const V1e=["top","bottom","left","right","chartArea"];function y_(e,t){return e==="top"||e==="bottom"||V1e.indexOf(e)===-1&&t==="x"}function x_(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function v_(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),_t(n&&n.onComplete,[e],t)}function K1e(e){const t=e.chart,n=t.options.animation;_t(n&&n.onProgress,[e],t)}function lL(e){return Vj()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Ep={},b_=e=>{const t=lL(e);return Object.values(Ep).filter(n=>n.canvas===t).pop()};function Q1e(e,t,n){const r=Object.keys(e);for(const i of r){const s=+i;if(s>=t){const a=e[i];delete e[i],(n>0||s>t)&&(e[s+n]=a)}}}function G1e(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}var Ps;let rx=(Ps=class{static register(...t){vi.add(...t),w_()}static unregister(...t){vi.remove(...t),w_()}constructor(t,n){const r=this.config=new z1e(n),i=lL(t),s=b_(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||h1e(i)),this.platform.updateConfig(r);const l=this.platform.acquireContext(i,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=qve(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new T1e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ube(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],Ep[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Ui.listen(this,"complete",v_),Ui.listen(this,"progress",K1e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return mt(t)?n&&s?s:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return vi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():HE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return BE(this.canvas,this.ctx),this}stop(){return Ui.stop(this),this}resize(t,n){Ui.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,t,n,s),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,HE(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),_t(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};gt(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,i=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{});let s=[];n&&(s=s.concat(Object.keys(n).map(a=>{const l=n[a],c=Ww(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),gt(s,a=>{const l=a.options,c=l.id,u=Ww(c,l),d=Xe(l.type,a.dtype);(l.position===void 0||y_(l.position,u)!==y_(a.dposition))&&(l.position=a.dposition),i[c]=!0;let f=null;if(c in r&&r[c].type===d)f=r[c];else{const h=vi.getScale(d);f=new h({id:c,type:d,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(l,t)}),gt(i,(a,l)=>{a||delete r[l]}),gt(r,a=>{Mr.configure(this,a,a.options),Mr.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(x_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let a=this.getDatasetMeta(r);const l=s.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=s.indexAxis||Hw(l,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const c=vi.getController(l),{datasetElementType:u,dataElementType:d}=Vt.datasets[l];Object.assign(c,{dataElementType:vi.getElement(d),datasetElementType:u&&vi.getElement(u)}),a.controller=new c(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){gt(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:f}=this.getDatasetMeta(u),h=!i&&s.indexOf(f)===-1;f.buildOrUpdateElements(h),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||gt(s,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(x_("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){gt(this.scales,t=>{Mr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!_E(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const a=r==="_removeElements"?-s:s;Q1e(t,i,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(t.filter(a=>a[0]===s).map((a,l)=>l+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!_E(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Mr.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],gt(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,da(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ui.has(this)?this.attached&&!Ui.running(this)&&Ui.start(this):(this.draw(),v_({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const a=n[i];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r={meta:t,index:t.index,cancelable:!0},i=mwe(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Bj(n,i),t.controller.draw(),i&&Uj(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return xf(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,i){const s=Vwe.modes[n];return typeof s=="function"?s(this,t,r,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=$o(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,i);mf(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(s,{visible:r}),this.update(l=>l.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Ui.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),BE(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ep[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(s,a)=>{n.addEventListener(this,s,a),t[s]=a},i=(s,a,l)=>{s.offsetX=a,s.offsetY=l,this._eventHandler(s)};gt(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},i=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},s=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{i("attach",l),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){gt(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},gt(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const i=r?"set":"remove";let s,a,l,c;for(n==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:s,index:a})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[a],index:a}});!xg(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const i=this.options.hover,s=(c,u)=>c.filter(d=>!u.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),a=s(n,t),l=r?t:s(t,n);a.length&&this.updateHoverStyle(a,i.mode,!1),l.length&&i.mode&&this.updateHoverStyle(l,i.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:i=[],options:s}=this,a=n,l=this._getActiveElements(t,i,r,a),c=Xve(t),u=G1e(t,this._lastEvent,r,c);r&&(this._lastEvent=null,_t(s.onHover,[t,l,this],this),c&&_t(s.onClick,[t,l,this],this));const d=!xg(l,i);return(d||n)&&(this._active=l,this._updateHoverStyles(l,i,n)),this._lastEvent=u,d}_getActiveElements(t,n,r,i){if(t.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}},$e(Ps,"defaults",Vt),$e(Ps,"instances",Ep),$e(Ps,"overrides",vo),$e(Ps,"registry",vi),$e(Ps,"version",q1e),$e(Ps,"getChart",b_),Ps);function w_(){return gt(rx.instances,e=>e._plugins.invalidate())}function Y1e(e,t,n){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:l,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,f=Math.min(u/a,ei(r-n));if(e.beginPath(),e.arc(i,s,a-u/2,r+f/2,n-f/2),l>0){const h=Math.min(u/l,ei(r-n));e.arc(i,s,l+u/2,n-h/2,r+h/2,!0)}else{const h=Math.min(u/2,a*ei(r-n));if(d==="round")e.arc(i,s,h,n-yt/2,r+yt/2,!0);else if(d==="bevel"){const p=2*h*h,g=-p*Math.cos(n+yt/2)+i,m=-p*Math.sin(n+yt/2)+s,y=p*Math.cos(r+yt/2)+i,v=p*Math.sin(r+yt/2)+s;e.lineTo(g,m),e.lineTo(y,v)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function X1e(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:l,innerRadius:c}=t;let u=i/l;e.beginPath(),e.arc(s,a,l,r-u,n+u),c>i?(u=i/c,e.arc(s,a,c,n+u,r-u,!0)):e.arc(s,a,i,n+un,r-un),e.closePath(),e.clip()}function Z1e(e){return zj(e,["outerStart","outerEnd","innerStart","innerEnd"])}function J1e(e,t,n,r){const i=Z1e(e.options.borderRadius),s=(n-t)/2,a=Math.min(s,r*t/2),l=c=>{const u=(n-Math.min(s,c))*r/2;return On(c,0,Math.min(s,u))};return{outerStart:l(i.outerStart),outerEnd:l(i.outerEnd),innerStart:On(i.innerStart,0,a),innerEnd:On(i.innerEnd,0,a)}}function Zo(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function Ng(e,t,n,r,i,s){const{x:a,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,f=Math.max(t.outerRadius+r+n-u,0),h=d>0?d+r+n+u:0;let p=0;const g=i-c;if(r){const I=d>0?d-r:0,$=f>0?f-r:0,E=(I+$)/2,T=E!==0?g*E/(E+r):g;p=(g-T)/2}const m=Math.max(.001,g*f-n/yt)/f,y=(g-m)/2,v=c+y+p,x=i-y-p,{outerStart:w,outerEnd:j,innerStart:S,innerEnd:k}=J1e(t,h,f,x-v),N=f-w,P=f-j,A=v+w/N,C=x-j/P,_=h+S,R=h+k,z=v+S/_,M=x-k/R;if(e.beginPath(),s){const I=(A+C)/2;if(e.arc(a,l,f,A,I),e.arc(a,l,f,I,C),j>0){const D=Zo(P,C,a,l);e.arc(D.x,D.y,j,C,x+un)}const $=Zo(R,x,a,l);if(e.lineTo($.x,$.y),k>0){const D=Zo(R,M,a,l);e.arc(D.x,D.y,k,x+un,M+Math.PI)}const E=(x-k/h+(v+S/h))/2;if(e.arc(a,l,h,x-k/h,E,!0),e.arc(a,l,h,E,v+S/h,!0),S>0){const D=Zo(_,z,a,l);e.arc(D.x,D.y,S,z+Math.PI,v-un)}const T=Zo(N,v,a,l);if(e.lineTo(T.x,T.y),w>0){const D=Zo(N,A,a,l);e.arc(D.x,D.y,w,v-un,A)}}else{e.moveTo(a,l);const I=Math.cos(A)*f+a,$=Math.sin(A)*f+l;e.lineTo(I,$);const E=Math.cos(C)*f+a,T=Math.sin(C)*f+l;e.lineTo(E,T)}e.closePath()}function eSe(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:l}=t;let c=t.endAngle;if(s){Ng(e,t,n,r,c,i);for(let u=0;u<s;++u)e.fill();isNaN(l)||(c=a+(l%Wt||Wt))}return Ng(e,t,n,r,c,i),e.fill(),c}function tSe(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:f,borderDashOffset:h,borderRadius:p}=c,g=c.borderAlign==="inner";if(!u)return;e.setLineDash(f||[]),e.lineDashOffset=h,g?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let m=t.endAngle;if(s){Ng(e,t,n,r,m,i);for(let y=0;y<s;++y)e.stroke();isNaN(l)||(m=a+(l%Wt||Wt))}g&&X1e(e,t,m),c.selfJoin&&m-a>=yt&&p===0&&d!=="miter"&&Y1e(e,t,m),s||(Ng(e,t,n,r,m,i),e.stroke())}class Mu extends js{constructor(n){super();$e(this,"circumference");$e(this,"endAngle");$e(this,"fullCircles");$e(this,"innerRadius");$e(this,"outerRadius");$e(this,"pixelMargin");$e(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:a,distance:l}=D4(s,{x:n,y:r}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:f,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,g=Xe(h,u-c),m=yf(a,c,u)&&c!==u,y=g>=Wt||m,v=zs(l,d+p,f+p);return y&&v}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,f=(s+a)/2,h=(l+c+d+u)/2;return{x:r+Math.cos(f)*h,y:i+Math.sin(f)*h}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,a=(r.spacing||0)/2,l=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Wt?Math.floor(i/Wt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*s,Math.sin(c)*s);const u=1-Math.sin(Math.min(yt,i||0)),d=s*u;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,eSe(n,this,d,a,l),tSe(n,this,d,a,l),n.restore()}}$e(Mu,"id","arc"),$e(Mu,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),$e(Mu,"defaultRoutes",{backgroundColor:"backgroundColor"}),$e(Mu,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function cL(e,t,n=t){e.lineCap=Xe(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Xe(n.borderDash,t.borderDash)),e.lineDashOffset=Xe(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Xe(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Xe(n.borderWidth,t.borderWidth),e.strokeStyle=Xe(n.borderColor,t.borderColor)}function nSe(e,t,n){e.lineTo(n.x,n.y)}function rSe(e){return e.stepped?jbe:e.tension||e.cubicInterpolationMode==="monotone"?Nbe:nSe}function uL(e,t,n={}){const r=e.length,{start:i=0,end:s=r-1}=n,{start:a,end:l}=t,c=Math.max(i,a),u=Math.min(s,l),d=i<a&&s<a||i>l&&s>l;return{count:r,start:c,loop:t.loop,ilen:u<c&&!d?r+u-c:u-c}}function iSe(e,t,n,r){const{points:i,options:s}=t,{count:a,start:l,loop:c,ilen:u}=uL(i,n,r),d=rSe(s);let{move:f=!0,reverse:h}=r||{},p,g,m;for(p=0;p<=u;++p)g=i[(l+(h?u-p:p))%a],!g.skip&&(f?(e.moveTo(g.x,g.y),f=!1):d(e,m,g,h,s.stepped),m=g);return c&&(g=i[(l+(h?u:0))%a],d(e,m,g,h,s.stepped)),!!c}function sSe(e,t,n,r){const i=t.points,{count:s,start:a,ilen:l}=uL(i,n,r),{move:c=!0,reverse:u}=r||{};let d=0,f=0,h,p,g,m,y,v;const x=j=>(a+(u?l-j:j))%s,w=()=>{m!==y&&(e.lineTo(d,y),e.lineTo(d,m),e.lineTo(d,v))};for(c&&(p=i[x(0)],e.moveTo(p.x,p.y)),h=0;h<=l;++h){if(p=i[x(h)],p.skip)continue;const j=p.x,S=p.y,k=j|0;k===g?(S<m?m=S:S>y&&(y=S),d=(f*d+j)/++f):(w(),e.lineTo(j,S),g=k,f=0,m=y=S),v=S}w()}function qw(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?sSe:iSe}function aSe(e){return e.stepped?nwe:e.tension||e.cubicInterpolationMode==="monotone"?rwe:$a}function oSe(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),cL(e,t.options),e.stroke(i)}function lSe(e,t,n,r){const{segments:i,options:s}=t,a=qw(t);for(const l of i)cL(e,s,l.style),e.beginPath(),a(e,t,l,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const cSe=typeof Path2D=="function";function uSe(e,t,n,r){cSe&&!t.options.segment?oSe(e,t,n,r):lSe(e,t,n,r)}class $u extends js{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;Qbe(this._points,r,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=dwe(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,i=t[n],s=this.points,a=lwe(this,{property:n,start:i,end:i});if(!a.length)return;const l=[],c=aSe(r);let u,d;for(u=0,d=a.length;u<d;++u){const{start:f,end:h}=a[u],p=s[f],g=s[h];if(p===g){l.push(p);continue}const m=Math.abs((i-p[n])/(g[n]-p[n])),y=c(p,g,m,r.stepped);y[n]=t[n],l.push(y)}return l.length===1?l[0]:l}pathSegment(t,n,r){return qw(this)(t,this,n,r)}path(t,n,r){const i=this.segments,s=qw(this);let a=this._loop;n=n||0,r=r||this.points.length-n;for(const l of i)a&=s(t,this,l,{start:n,end:n+r-1});return!!a}draw(t,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),uSe(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}$e($u,"id","line"),$e($u,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),$e($u,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),$e($u,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function S_(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}class _p extends js{constructor(n){super();$e(this,"parsed");$e(this,"skip");$e(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:a,y:l}=this.getProps(["x","y"],i);return Math.pow(n-a,2)+Math.pow(r-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return S_(this,n,"x",r)}inYRange(n,r){return S_(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!xf(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,zw(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}$e(_p,"id","point"),$e(_p,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),$e(_p,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function dL(e,t){const{x:n,y:r,base:i,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let l,c,u,d,f;return e.horizontal?(f=a/2,l=Math.min(n,i),c=Math.max(n,i),u=r-f,d=r+f):(f=s/2,l=n-f,c=n+f,u=Math.min(r,i),d=Math.max(r,i)),{left:l,top:u,right:c,bottom:d}}function Hs(e,t,n,r){return e?0:On(t,n,r)}function dSe(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=z4(r);return{t:Hs(i.top,s.top,0,n),r:Hs(i.right,s.right,0,t),b:Hs(i.bottom,s.bottom,0,n),l:Hs(i.left,s.left,0,t)}}function fSe(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=Il(i),a=Math.min(t,n),l=e.borderSkipped,c=r||st(i);return{topLeft:Hs(!c||l.top||l.left,s.topLeft,0,a),topRight:Hs(!c||l.top||l.right,s.topRight,0,a),bottomLeft:Hs(!c||l.bottom||l.left,s.bottomLeft,0,a),bottomRight:Hs(!c||l.bottom||l.right,s.bottomRight,0,a)}}function hSe(e){const t=dL(e),n=t.right-t.left,r=t.bottom-t.top,i=dSe(e,n/2,r/2),s=fSe(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function M0(e,t,n,r){const i=t===null,s=n===null,l=e&&!(i&&s)&&dL(e,r);return l&&(i||zs(t,l.left,l.right))&&(s||zs(n,l.top,l.bottom))}function pSe(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function mSe(e,t){e.rect(t.x,t.y,t.w,t.h)}function $0(e,t,n={}){const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+a,radius:e.radius}}class Tp extends js{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:a}=hSe(this),l=pSe(a.radius)?wg:mSe;t.save(),(a.w!==s.w||a.h!==s.h)&&(t.beginPath(),l(t,$0(a,n,s)),t.clip(),l(t,$0(s,-n,a)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),l(t,$0(s,n)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,n,r){return M0(this,t,n,r)}inXRange(t,n){return M0(this,t,null,n)}inYRange(t,n){return M0(this,null,t,n)}getCenterPoint(t){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}$e(Tp,"id","bar"),$e(Tp,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),$e(Tp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const j_=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},gSe=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class N_ extends js{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=_t(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=In(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=j_(r,s);let u,d;n.font=i.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,s,l,c)+10):(d=this.maxHeight,u=this._fitCols(a,i,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=i+l;let f=t;s.textAlign="left",s.textBaseline="middle";let h=-1,p=-d;return this.legendItems.forEach((g,m)=>{const y=r+n/2+s.measureText(g.text).width;(m===0||u[u.length-1]+y+2*l>a)&&(f+=d,u[u.length-(m>0?0:1)]=0,p+=d,h++),c[m]={left:0,top:p,row:h,width:y,height:i},u[u.length-1]+=y+l}),f}_fitCols(t,n,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-t;let f=l,h=0,p=0,g=0,m=0;return this.legendItems.forEach((y,v)=>{const{itemWidth:x,itemHeight:w}=ySe(r,n,s,y,i);v>0&&p+w+2*l>d&&(f+=h+l,u.push({width:h,height:p}),g+=h+l,m++,h=p=0),c[v]={left:g,top:p,col:m,width:x,height:w},h=Math.max(h,x),p+=w+l}),f+=h,u.push({width:h,height:p}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,a=Dl(s,this.left,this.width);if(this.isHorizontal()){let l=0,c=kn(r,this.left+i,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=kn(r,this.left+i,this.right-this.lineWidths[l])),u.top+=this.top+t+i,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+i}else{let l=0,c=kn(r,this.top+t+i,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=kn(r,this.top+t+i,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+i,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Bj(t,this),this._draw(),Uj(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:a}=t,l=Vt.color,c=Dl(t.rtl,this.left,this.width),u=In(a.font),{padding:d}=a,f=u.size,h=f/2;let p;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:g,boxHeight:m,itemHeight:y}=j_(a,f),v=function(k,N,P){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();const A=Xe(P.lineWidth,1);if(i.fillStyle=Xe(P.fillStyle,l),i.lineCap=Xe(P.lineCap,"butt"),i.lineDashOffset=Xe(P.lineDashOffset,0),i.lineJoin=Xe(P.lineJoin,"miter"),i.lineWidth=A,i.strokeStyle=Xe(P.strokeStyle,l),i.setLineDash(Xe(P.lineDash,[])),a.usePointStyle){const C={radius:m*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:A},_=c.xPlus(k,g/2),R=N+h;U4(i,C,_,R,a.pointStyleWidth&&g)}else{const C=N+Math.max((f-m)/2,0),_=c.leftForLtr(k,g),R=Il(P.borderRadius);i.beginPath(),Object.values(R).some(z=>z!==0)?wg(i,{x:_,y:C,w:g,h:m,radius:R}):i.rect(_,C,g,m),i.fill(),A!==0&&i.stroke()}i.restore()},x=function(k,N,P){vf(i,P.text,k,N+y/2,u,{strikethrough:P.hidden,textAlign:c.textAlign(P.textAlign)})},w=this.isHorizontal(),j=this._computeTitleHeight();w?p={x:kn(s,this.left+d,this.right-r[0]),y:this.top+d+j,line:0}:p={x:this.left+d,y:kn(s,this.top+j+d,this.bottom-n[0].height),line:0},Q4(this.ctx,t.textDirection);const S=y+d;this.legendItems.forEach((k,N)=>{i.strokeStyle=k.fontColor,i.fillStyle=k.fontColor;const P=i.measureText(k.text).width,A=c.textAlign(k.textAlign||(k.textAlign=a.textAlign)),C=g+h+P;let _=p.x,R=p.y;c.setWidth(this.width),w?N>0&&_+C+d>this.right&&(R=p.y+=S,p.line++,_=p.x=kn(s,this.left+d,this.right-r[p.line])):N>0&&R+S>this.bottom&&(_=p.x=_+n[p.line].width+d,p.line++,R=p.y=kn(s,this.top+j+d,this.bottom-n[p.line].height));const z=c.x(_);if(v(z,R,k),_=dbe(A,_+g+h,w?_+C:this.right,t.rtl),x(c.x(_),R,k),w)p.x+=C+d;else if(typeof k.text!="string"){const M=u.lineHeight;p.y+=fL(k,M)+d}else p.y+=S}),G4(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=In(n.font),i=zr(n.padding);if(!n.display)return;const s=Dl(t.rtl,this.left,this.width),a=this.ctx,l=n.position,c=r.size/2,u=i.top+c;let d,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),d=this.top+u,f=kn(t.align,f,this.right-h);else{const g=this.columnSizes.reduce((m,y)=>Math.max(m,y.height),0);d=u+kn(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const p=kn(l,f,f+h);a.textAlign=s.textAlign($j(l)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=r.string,vf(a,n.text,p,d,r)}_computeTitleHeight(){const t=this.options.title,n=In(t.font),r=zr(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,i,s;if(zs(t,this.left,this.right)&&zs(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],zs(t,i.left,i.left+i.width)&&zs(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!bSe(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,s=gSe(i,r);i&&!s&&_t(n.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!s&&_t(n.onHover,[t,r,this],this)}else r&&_t(n.onClick,[t,r,this],this)}}function ySe(e,t,n,r,i){const s=xSe(r,e,t,n),a=vSe(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}function xSe(e,t,n,r){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),t+n.size/2+r.measureText(i).width}function vSe(e,t,n){let r=e;return typeof t.text!="string"&&(r=fL(t,n)),r}function fL(e,t){const n=e.text?e.text.length:0;return t*n}function bSe(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var wSe={id:"legend",_element:N_,start(e,t,n){const r=e.legend=new N_({ctx:e.ctx,options:n,chart:e});Mr.configure(e,r,n),Mr.addBox(e,r)},stop(e){Mr.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Mr.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=zr(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:a&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class hL extends js{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=on(r.text)?r.text.length:1;this._padding=zr(r.padding);const s=i*In(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:r,bottom:i,right:s,options:a}=this,l=a.align;let c=0,u,d,f;return this.isHorizontal()?(d=kn(l,r,s),f=n+t,u=s-r):(a.position==="left"?(d=r+t,f=kn(l,i,n),c=yt*-.5):(d=s-t,f=kn(l,n,i),c=yt*.5),u=i-n),{titleX:d,titleY:f,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const r=In(n.font),s=r.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(s);vf(t,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:u,textAlign:$j(n.align),textBaseline:"middle",translation:[a,l]})}}function SSe(e,t){const n=new hL({ctx:e.ctx,options:t,chart:e});Mr.configure(e,n,t),Mr.addBox(e,n),e.titleBlock=n}var jSe={id:"title",_element:hL,start(e,t,n){SSe(e,n)},stop(e){const t=e.titleBlock;Mr.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Mr.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Lu={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),i+=c.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:i/s}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,i=Number.POSITIVE_INFINITY,s,a,l;for(s=0,a=e.length;s<a;++s){const c=e[s].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=Bw(t,u);d<i&&(i=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function yi(e,t){return t&&(on(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function zi(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function NSe(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:a,value:l}=s.getLabelAndValue(i);return{chart:e,label:a,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:l,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function k_(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:a,boxHeight:l}=t,c=In(t.bodyFont),u=In(t.titleFont),d=In(t.footerFont),f=s.length,h=i.length,p=r.length,g=zr(t.padding);let m=g.height,y=0,v=r.reduce((j,S)=>j+S.before.length+S.lines.length+S.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,f&&(m+=f*u.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),v){const j=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;m+=p*j+(v-p)*c.lineHeight+(v-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let x=0;const w=function(j){y=Math.max(y,n.measureText(j).width+x)};return n.save(),n.font=u.string,gt(e.title,w),n.font=c.string,gt(e.beforeBody.concat(e.afterBody),w),x=t.displayColors?a+2+t.boxPadding:0,gt(r,j=>{gt(j.before,w),gt(j.lines,w),gt(j.after,w)}),x=0,n.font=d.string,gt(e.footer,w),n.restore(),y+=g.width,{width:y,height:m}}function kSe(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function PSe(e,t,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;if(e==="left"&&i+s+a>t.width||e==="right"&&i-s-a<0)return!0}function CSe(e,t,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:l,right:c}}=e;let u="center";return r==="center"?u=i<=(l+c)/2?"left":"right":i<=s/2?u="left":i>=a-s/2&&(u="right"),PSe(u,e,t,n)&&(u="center"),u}function P_(e,t,n){const r=n.yAlign||t.yAlign||kSe(e,n);return{xAlign:n.xAlign||t.xAlign||CSe(e,t,n,r),yAlign:r}}function ASe(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function ESe(e,t,n){let{y:r,height:i}=e;return t==="top"?r+=n:t==="bottom"?r-=i+n:r-=i/2,r}function C_(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=e,{xAlign:l,yAlign:c}=n,u=i+s,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:p}=Il(a);let g=ASe(t,l);const m=ESe(t,c,u);return c==="center"?l==="left"?g+=u:l==="right"&&(g-=u):l==="left"?g-=Math.max(d,h)+i:l==="right"&&(g+=Math.max(f,p)+i),{x:On(g,0,r.width-t.width),y:On(m,0,r.height-t.height)}}function Zh(e,t,n){const r=zr(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function A_(e){return yi([],zi(e))}function _Se(e,t,n){return $o(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function E_(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const pL={beforeTitle:Bi,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Bi,beforeBody:Bi,beforeLabel:Bi,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return mt(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Bi,afterBody:Bi,beforeFooter:Bi,footer:Bi,afterFooter:Bi};function Vn(e,t,n,r){const i=e[t].call(n,r);return typeof i>"u"?pL[t].call(n,r):i}class Vw extends js{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new X4(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=_Se(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,i=Vn(r,"beforeTitle",this,t),s=Vn(r,"title",this,t),a=Vn(r,"afterTitle",this,t);let l=[];return l=yi(l,zi(i)),l=yi(l,zi(s)),l=yi(l,zi(a)),l}getBeforeBody(t,n){return A_(Vn(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,i=[];return gt(t,s=>{const a={before:[],lines:[],after:[]},l=E_(r,s);yi(a.before,zi(Vn(l,"beforeLabel",this,s))),yi(a.lines,Vn(l,"label",this,s)),yi(a.after,zi(Vn(l,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(t,n){return A_(Vn(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,i=Vn(r,"beforeFooter",this,t),s=Vn(r,"footer",this,t),a=Vn(r,"afterFooter",this,t);let l=[];return l=yi(l,zi(i)),l=yi(l,zi(s)),l=yi(l,zi(a)),l}_createItems(t){const n=this._active,r=this.chart.data,i=[],s=[],a=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(NSe(this.chart,n[c]));return t.filter&&(l=l.filter((d,f,h)=>t.filter(d,f,h,r))),t.itemSort&&(l=l.sort((d,f)=>t.itemSort(d,f,r))),gt(l,d=>{const f=E_(t.callbacks,d);i.push(Vn(f,"labelColor",this,d)),s.push(Vn(f,"labelPointStyle",this,d)),a.push(Vn(f,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(t,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const l=Lu[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const c=this._size=k_(this,r),u=Object.assign({},l,c),d=P_(this.chart,r,u),f=C_(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,i){const s=this.getCaretPosition(t,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(t,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:f}=Il(l),{x:h,y:p}=t,{width:g,height:m}=n;let y,v,x,w,j,S;return s==="center"?(j=p+m/2,i==="left"?(y=h,v=y-a,w=j+a,S=j-a):(y=h+g,v=y+a,w=j-a,S=j+a),x=y):(i==="left"?v=h+Math.max(c,d)+a:i==="right"?v=h+g-Math.max(u,f)-a:v=this.caretX,s==="top"?(w=p,j=w-a,y=v-a,x=v+a):(w=p+m,j=w+a,y=v+a,x=v-a),S=w),{x1:y,x2:v,x3:x,y1:w,y2:j,y3:S}}drawTitle(t,n,r){const i=this.title,s=i.length;let a,l,c;if(s){const u=Dl(r.rtl,this.x,this.width);for(t.x=Zh(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",a=In(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,c=0;c<s;++c)n.fillText(i[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===s&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,n,r,i,s){const a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=s,d=In(s.bodyFont),f=Zh(this,"left",s),h=i.x(f),p=c<d.lineHeight?(d.lineHeight-c)/2:0,g=n.y+p;if(s.usePointStyle){const m={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=i.leftForLtr(h,u)+u/2,v=g+c/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,zw(t,m,y,v),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,zw(t,m,y,v)}else{t.lineWidth=st(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const m=i.leftForLtr(h,u),y=i.leftForLtr(i.xPlus(h,1),u-2),v=Il(a.borderRadius);Object.values(v).some(x=>x!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,wg(t,{x:m,y:g,w:u,h:c,radius:v}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),wg(t,{x:y,y:g+1,w:u-2,h:c-2,radius:v}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(m,g,u,c),t.strokeRect(m,g,u,c),t.fillStyle=a.backgroundColor,t.fillRect(y,g+1,u-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=r,f=In(r.bodyFont);let h=f.lineHeight,p=0;const g=Dl(r.rtl,this.x,this.width),m=function(P){n.fillText(P,g.x(t.x+p),t.y+h/2),t.y+=h+s},y=g.textAlign(a);let v,x,w,j,S,k,N;for(n.textAlign=a,n.textBaseline="middle",n.font=f.string,t.x=Zh(this,y,r),n.fillStyle=r.bodyColor,gt(this.beforeBody,m),p=l&&y!=="right"?a==="center"?u/2+d:u+2+d:0,j=0,k=i.length;j<k;++j){for(v=i[j],x=this.labelTextColors[j],n.fillStyle=x,gt(v.before,m),w=v.lines,l&&w.length&&(this._drawColorBox(n,t,j,g,r),h=Math.max(f.lineHeight,c)),S=0,N=w.length;S<N;++S)m(w[S]),h=f.lineHeight;gt(v.after,m)}p=0,h=f.lineHeight,gt(this.afterBody,m),t.y-=s}drawFooter(t,n,r){const i=this.footer,s=i.length;let a,l;if(s){const c=Dl(r.rtl,this.x,this.width);for(t.x=Zh(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",a=In(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,l=0;l<s;++l)n.fillText(i[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,n,r,i){const{xAlign:s,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:d}=r,{topLeft:f,topRight:h,bottomLeft:p,bottomRight:g}=Il(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(l+f,c),a==="top"&&this.drawCaret(t,n,r,i),n.lineTo(l+u-h,c),n.quadraticCurveTo(l+u,c,l+u,c+h),a==="center"&&s==="right"&&this.drawCaret(t,n,r,i),n.lineTo(l+u,c+d-g),n.quadraticCurveTo(l+u,c+d,l+u-g,c+d),a==="bottom"&&this.drawCaret(t,n,r,i),n.lineTo(l+p,c+d),n.quadraticCurveTo(l,c+d,l,c+d-p),a==="center"&&s==="left"&&this.drawCaret(t,n,r,i),n.lineTo(l,c+f),n.quadraticCurveTo(l,c,l+f,c),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=Lu[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=k_(this,t),c=Object.assign({},a,this._size),u=P_(n,t,c),d=C_(t,c,u,n);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=zr(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,i,n),Q4(t,n.textDirection),s.y+=a.top,this.drawTitle(s,t,n),this.drawBody(s,t,n),this.drawFooter(s,t,n),G4(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,i=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),s=!xg(r,i),a=this._positionChanged(i,n);(s||a)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(t,s,n,r),l=this._positionChanged(a,t),c=n||!xg(a,s)||l;return c&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,r,i){const s=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:r,caretY:i,options:s}=this,a=Lu[s.position].call(this,t,n);return a!==!1&&(r!==a.x||i!==a.y)}}$e(Vw,"positioners",Lu);var TSe={id:"tooltip",_element:Vw,positioners:Lu,afterInit(e,t,n){n&&(e.tooltip=new Vw({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pL},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const OSe=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function ISe(e,t,n,r){const i=e.indexOf(t);if(i===-1)return OSe(e,t,n,r);const s=e.lastIndexOf(t);return i!==s?n:i}const DSe=(e,t)=>e===null?null:On(Math.round(e),0,t);function __(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Kw extends Vc{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(mt(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:ISe(r,t,Xe(n,t),this._addedLabels),DSe(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=t===0&&n===s.length-1?s:s.slice(t,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=n;a++)i.push({value:a});return i}getLabelForValue(t){return __.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}$e(Kw,"id","category"),$e(Kw,"defaults",{ticks:{callback:__}});function RSe(e,t){const n=[],{bounds:i,step:s,min:a,max:l,precision:c,count:u,maxTicks:d,maxDigits:f,includeBounds:h}=e,p=s||1,g=d-1,{min:m,max:y}=t,v=!mt(a),x=!mt(l),w=!mt(u),j=(y-m)/(f+1);let S=OE((y-m)/g/p)*p,k,N,P,A;if(S<1e-14&&!v&&!x)return[{value:m},{value:y}];A=Math.ceil(y/S)-Math.floor(m/S),A>g&&(S=OE(A*S/g/p)*p),mt(c)||(k=Math.pow(10,c),S=Math.ceil(S*k)/k),i==="ticks"?(N=Math.floor(m/S)*S,P=Math.ceil(y/S)*S):(N=m,P=y),v&&x&&s&&nbe((l-a)/s,S/1e3)?(A=Math.round(Math.min((l-a)/S,d)),S=(l-a)/A,N=a,P=l):w?(N=v?a:N,P=x?l:P,A=u-1,S=(P-N)/A):(A=(P-N)/S,rd(A,Math.round(A),S/1e3)?A=Math.round(A):A=Math.ceil(A));const C=Math.max(IE(S),IE(N));k=Math.pow(10,mt(c)?C:c),N=Math.round(N*k)/k,P=Math.round(P*k)/k;let _=0;for(v&&(h&&N!==a?(n.push({value:a}),N<a&&_++,rd(Math.round((N+_*S)*k)/k,a,T_(a,j,e))&&_++):N<a&&_++);_<A;++_){const R=Math.round((N+_*S)*k)/k;if(x&&R>l)break;n.push({value:R})}return x&&h&&P!==l?n.length&&rd(n[n.length-1].value,l,T_(l,j,e))?n[n.length-1].value=l:n.push({value:l}):(!x||P===l)&&n.push({value:P}),n}function T_(e,t,{horizontal:n,minRotation:r}){const i=Ji(r),s=(n?Math.sin(i):Math.cos(i))||.001,a=.75*t*(""+e).length;return Math.min(t/s,a)}class MSe extends Vc{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return mt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=c=>i=n?i:c,l=c=>s=r?s:c;if(t){const c=Ei(i),u=Ei(s);c<0&&u<0?l(0):c>0&&u>0&&a(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);l(s+c),t||a(i-c)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,a=RSe(i,s);return t.bounds==="ticks"&&rbe(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-n)/Math.max(t.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return Fj(t,this.chart.options.locale,this.options.ticks.format)}}class Qw extends MSe{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ur(t)?t:0,this.max=Ur(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=Ji(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}$e(Qw,"id","linear"),$e(Qw,"defaults",{ticks:{callback:B4.formatters.numeric}});const ix={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Qn=Object.keys(ix);function O_(e,t){return e-t}function I_(e,t){if(mt(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let a=t;return typeof r=="function"&&(a=r(a)),Ur(a)||(a=typeof r=="string"?n.parse(a,r):n.parse(a)),a===null?null:(i&&(a=i==="week"&&(gf(s)||s===!0)?n.startOf(a,"isoWeek",s):n.startOf(a,i)),+a)}function D_(e,t,n,r){const i=Qn.length;for(let s=Qn.indexOf(e);s<i-1;++s){const a=ix[Qn[s]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(l*a.size))<=r)return Qn[s]}return Qn[i-1]}function $Se(e,t,n,r,i){for(let s=Qn.length-1;s>=Qn.indexOf(n);s--){const a=Qn[s];if(ix[a].common&&e._adapter.diff(i,r,a)>=t-1)return a}return Qn[n?Qn.indexOf(n):0]}function LSe(e){for(let t=Qn.indexOf(e)+1,n=Qn.length;t<n;++t)if(ix[Qn[t]].common)return Qn[t]}function R_(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:i}=Mj(n,t),s=n[r]>=t?n[r]:n[i];e[s]=!0}}function FSe(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let l,c;for(l=s;l<=a;l=+i.add(l,1,r))c=n[l],c>=0&&(t[c].major=!0);return t}function M_(e,t,n){const r=[],i={},s=t.length;let a,l;for(a=0;a<s;++a)l=t[a],i[l]=a,r.push({value:l,major:!1});return s===0||!n?r:FSe(e,r,i,n)}class kg extends Vc{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),i=this._adapter=new Uwe._date(t.adapters.date);i.init(n),nd(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:I_(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!l&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=Ur(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Ur(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,l=lbe(i,s,a);return this._unit=n.unit||(r.autoSkip?D_(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):$Se(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:LSe(this._unit),this.initOffsets(i),t.reverse&&l.reverse(),M_(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,i,s;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=On(n,0,a),r=On(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||D_(s.minUnit,n,r,this._getLabelCapacity(n)),l=Xe(i.ticks.stepSize,1),c=a==="week"?s.isoWeekday:!1,u=gf(c)||c===!0,d={};let f=n,h,p;if(u&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,u?"day":a),t.diff(r,n,a)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+a);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(h=f,p=0;h<r;h=+t.add(h,l,a),p++)R_(d,h,g);return(h===r||i.bounds==="ticks"||p===1)&&R_(d,h,g),Object.keys(d).sort(O_).map(m=>+m)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,s=this._unit,a=n||i[s];return this._adapter.format(t,a)}_tickFormatFunction(t,n,r,i){const s=this.options,a=s.ticks.callback;if(a)return _t(a,[t,n,r],this);const l=s.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],f=u&&l[u],h=r[n],p=u&&f&&h&&h.major;return this._adapter.format(t,i||(p?f:d))}generateTickLabels(t){let n,r,i;for(n=0,r=t.length;n<r;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,i=Ji(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),a=Math.sin(i),l=this._resolveTickFontOptions(0).size;return{w:r*s+l*a,h:r*a+l*s}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(t,0,M_(this,[t],this._majorUnit),i),a=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)t.push(I_(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return M4(t.sort(O_))}}$e(kg,"id","time"),$e(kg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Jh(e,t,n){let r=0,i=e.length-1,s,a,l,c;n?(t>=e[r].pos&&t<=e[i].pos&&({lo:r,hi:i}=Qa(e,"pos",t)),{pos:s,time:l}=e[r],{pos:a,time:c}=e[i]):(t>=e[r].time&&t<=e[i].time&&({lo:r,hi:i}=Qa(e,"time",t)),{time:s,pos:l}=e[r],{time:a,pos:c}=e[i]);const u=a-s;return u?l+(c-l)*(t-s)/u:l}class $_ extends kg{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Jh(n,this.min),this._tableRange=Jh(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,i=[],s=[];let a,l,c,u,d;for(a=0,l=t.length;a<l;++a)u=t[a],u>=n&&u<=r&&i.push(u);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(a=0,l=i.length;a<l;++a)d=i[a+1],c=i[a-1],u=i[a],Math.round((d+c)/2)!==u&&s.push({time:u,pos:a/(l-1)});return s}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Jh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return Jh(this._table,r*this._tableRange+this._minPos,!0)}}$e($_,"id","timeseries"),$e($_,"defaults",kg.defaults);const mL="label";function L_(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function BSe(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function gL(e,t){e.labels=t}function yL(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mL;const r=[];e.datasets=t.map(i=>{const s=e.datasets.find(a=>a[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function USe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mL;const n={labels:[],datasets:[]};return gL(n,e.labels),yL(n,e.datasets,t),n}function zSe(e,t){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:f,...h}=e,p=b.useRef(null),g=b.useRef(null),m=()=>{p.current&&(g.current=new rx(p.current,{type:a,data:USe(l,s),options:c&&{...c},plugins:u}),L_(t,g.current))},y=()=>{L_(t,null),g.current&&(g.current.destroy(),g.current=null)};return b.useEffect(()=>{!i&&g.current&&c&&BSe(g.current,c)},[i,c]),b.useEffect(()=>{!i&&g.current&&gL(g.current.config.data,l.labels)},[i,l.labels]),b.useEffect(()=>{!i&&g.current&&l.datasets&&yL(g.current.config.data,l.datasets,s)},[i,l.datasets]),b.useEffect(()=>{g.current&&(i?(y(),setTimeout(m)):g.current.update(f))},[i,c,l.labels,l.datasets,f]),b.useEffect(()=>{g.current&&(y(),setTimeout(m))},[a]),b.useEffect(()=>(m(),()=>y()),[]),W.createElement("canvas",{ref:p,role:"img",height:n,width:r,...h},d)}const HSe=b.forwardRef(zSe);function Gj(e,t){return rx.register(t),b.forwardRef((n,r)=>W.createElement(HSe,{...n,ref:r,type:e}))}const WSe=Gj("line",Cp),F_=Gj("bar",Pp),qSe=Gj("doughnut",Du);rx.register(Kw,Qw,_p,$u,Tp,Mu,jSe,TSe,wSe);const VSe=()=>{const{id:e}=Pf(),t=St(),[n,r]=b.useState(null),[i,s]=b.useState(null),[a,l]=b.useState([]),[,c]=b.useState([]),[u,d]=b.useState(!0),[f,h]=b.useState("30"),[p,g]=b.useState(""),[m,y]=b.useState(""),[v,x]=b.useState(null),[w,j]=b.useState("line"),[S,k]=b.useState("daily"),[N,P]=b.useState(!0),A=b.useCallback(async()=>{try{d(!0),x(null);let F=`days=${f}`;f==="custom"&&p&&m&&(F=`startDate=${p}&endDate=${m}`);const[B,Z,V,G]=await Promise.all([pe(`/api/products/${e}`),pe(`/api/products/${e}/metrics?${F}`),pe(`/api/products/${e}/sales-history?${F}&groupBy=${S}`),pe(`/api/products/${e}/purchase-history?${F}&groupBy=${S}`)]);if(!B.ok)throw new Error("Failed to fetch product details");const X=await B.json();if(r(X),Z.ok){const U=await Z.json();s(U)}if(V.ok){const U=await V.json();l(U)}if(G.ok){const U=await G.json();c(U)}}catch(F){console.error("Error fetching product analytics:",F),x(F instanceof Error?F.message:"Failed to load analytics")}finally{d(!1)}},[e,f,p,m,S]);b.useEffect(()=>{e&&A()},[A,e]);const C=b.useMemo(()=>{if(!a||a.length===0)return null;const F=[...a].sort((he,fe)=>fe.quantity-he.quantity),B=F[0],Z=F[F.length-1],V=a.slice(0,Math.floor(a.length/2)),G=a.slice(Math.floor(a.length/2)),X=V.reduce((he,fe)=>he+fe.quantity,0)/V.length,U=G.reduce((he,fe)=>he+fe.quantity,0)/G.length,ne=X>0?(U-X)/X*100:0,q=a.slice(-7),ie=q.reduce((he,fe)=>he+fe.quantity,0)/q.length,re=a.reduce((he,fe)=>he+fe.quantity,0)/a.length,ee=ie>re*1.2?"increasing":ie<re*.8?"decreasing":"stable";return{bestSellingDay:B,worstSellingDay:Z,growthRate:ne,demandTrend:ee,averageDailySales:re,recentAverageSales:ie}},[a]),_=F=>`${(typeof F=="number"?F:parseFloat(String(F||0))||0).toFixed(2)}`,R=F=>new Date(F).toLocaleDateString(),z=F=>{const B=typeof F=="number"?F:parseFloat(String(F||0))||0;return`${B>=0?"+":""}${B.toFixed(1)}%`},M={labels:a.map(F=>R(F.date)),datasets:[{label:"Quantity Sold",data:a.map(F=>F.quantity),borderColor:"rgb(59, 130, 246)",backgroundColor:w==="bar"?"rgba(59, 130, 246, 0.6)":"rgba(59, 130, 246, 0.1)",yAxisID:"y",tension:.4},{label:"Revenue ()",data:a.map(F=>F.revenue),borderColor:"rgb(34, 197, 94)",backgroundColor:w==="bar"?"rgba(34, 197, 94, 0.6)":"rgba(34, 197, 94, 0.1)",yAxisID:"y1",tension:.4}]},I={labels:a.map(F=>R(F.date)),datasets:[{label:"Daily Profit ()",data:a.map(F=>F.profit),backgroundColor:a.map(F=>F.profit>=0?"rgba(34, 197, 94, 0.6)":"rgba(239, 68, 68, 0.6)"),borderColor:a.map(F=>F.profit>=0?"rgb(34, 197, 94)":"rgb(239, 68, 68)"),borderWidth:1}]},$=i?{labels:["Current Stock","Recommended Min Stock","Sold This Period"],datasets:[{data:[i.currentStock,Math.ceil(i.totalQuantitySold/parseInt(f)*7),i.totalQuantitySold],backgroundColor:["rgba(59, 130, 246, 0.6)","rgba(251, 191, 36, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgb(59, 130, 246)","rgb(251, 191, 36)","rgb(34, 197, 94)"],borderWidth:1}]}:null,E={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top"},title:{display:!0,text:"Sales Performance Over Time",font:{size:16,weight:"bold"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",padding:12,displayColors:!0}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Quantity",font:{weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.05)"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Revenue ()",font:{weight:"bold"}},grid:{drawOnChartArea:!1}}}},T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Daily Profit Trend",font:{size:16,weight:"bold"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",callbacks:{label:F=>`Profit: ${_(F.parsed.y)}`}}},scales:{y:{title:{display:!0,text:"Profit ()",font:{weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.05)"}}}},D={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Stock Health Overview",font:{size:16,weight:"bold"}},tooltip:{callbacks:{label:F=>`${F.label}: ${F.parsed} units`}}}};if(u)return o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-4 border-blue-500 mx-auto"}),o.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Loading analytics..."})]})});if(v)return o.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-lg p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Hl,{className:"mx-auto h-16 w-16 text-red-500"}),o.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Error Loading Analytics"}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:v}),o.jsxs("div",{className:"mt-6 flex gap-3 justify-center",children:[o.jsxs("button",{onClick:A,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[o.jsx(oa,{className:"w-4 h-4 mr-2"}),"Retry"]}),o.jsx("button",{onClick:()=>t("/products"),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Back to Products"})]})]})})});if(!n)return o.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:o.jsx("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-lg p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Fs,{className:"mx-auto h-16 w-16 text-gray-400"}),o.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Product Not Found"}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"The requested product could not be found."}),o.jsxs("button",{onClick:()=>t("/products"),className:"mt-6 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[o.jsx(Wl,{className:"w-4 h-4 mr-2"}),"Back to Products"]})]})})});const H=w==="line"?WSe:F_;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[o.jsx("div",{className:"bg-white shadow-md border-b border-gray-200",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between h-20",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>t("/products"),className:"mr-4 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:o.jsx(Wl,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"bg-blue-100 p-3 rounded-lg mr-4",children:o.jsx(Bo,{className:"w-8 h-8 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.name}),o.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[o.jsx(cI,{className:"w-4 h-4 mr-1"}),"Product Performance Analytics"]})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[!n.isActive&&o.jsx("span",{className:"px-3 py-1 text-xs font-semibold bg-red-100 text-red-800 rounded-full",children:"INACTIVE"}),o.jsxs("button",{onClick:()=>t(`/products/${e}/edit`),className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[o.jsx(jo,{className:"w-4 h-4 mr-2"}),"Edit Product"]})]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),o.jsxs("select",{value:f,onChange:F=>h(F.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"7",children:"Last 7 days"}),o.jsx("option",{value:"30",children:"Last 30 days"}),o.jsx("option",{value:"90",children:"Last 90 days"}),o.jsx("option",{value:"365",children:"Last year"}),o.jsx("option",{value:"custom",children:"Custom range"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"View Mode"}),o.jsxs("select",{value:S,onChange:F=>k(F.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"daily",children:"Daily"}),o.jsx("option",{value:"weekly",children:"Weekly"}),o.jsx("option",{value:"monthly",children:"Monthly"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chart Type"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>j("line"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${w==="line"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:o.jsx(fk,{className:"w-4 h-4 mx-auto"})}),o.jsx("button",{onClick:()=>j("bar"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${w==="bar"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:o.jsx(Iv,{className:"w-4 h-4 mx-auto"})})]})]}),o.jsx("div",{className:"flex items-end",children:o.jsxs("button",{onClick:A,disabled:u,className:"w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(oa,{className:`w-4 h-4 mr-2 ${u?"animate-spin":""}`}),"Refresh Data"]})})]}),f==="custom"&&o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-200",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),o.jsx("input",{type:"date",value:p,onChange:F=>g(F.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),o.jsx("input",{type:"date",value:m,onChange:F=>y(F.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"bg-white/20 p-3 rounded-lg mr-4",children:o.jsx(Fs,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Current Stock"}),o.jsx("p",{className:"text-3xl font-bold",children:n.stock}),o.jsx("p",{className:"text-xs opacity-75",children:n.baseUnit.name})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"bg-white/20 p-3 rounded-lg mr-4",children:o.jsx(dk,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Purchase Price"}),o.jsx("p",{className:"text-3xl font-bold",children:_(n.purchasePrice)}),o.jsxs("p",{className:"text-xs opacity-75",children:["per ",n.baseUnit.name]})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"bg-white/20 p-3 rounded-lg mr-4",children:o.jsx(Bo,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Retail Price"}),o.jsx("p",{className:"text-3xl font-bold",children:_(n.retailPrice)}),o.jsxs("p",{className:"text-xs opacity-75",children:[((n.retailPrice-n.purchasePrice)/n.purchasePrice*100).toFixed(1),"% margin"]})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"bg-white/20 p-3 rounded-lg mr-4",children:o.jsx(yI,{className:"w-8 h-8"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Category"}),o.jsx("p",{className:"text-2xl font-bold",children:n.category.name}),o.jsx("p",{className:"text-xs opacity-75",children:"Product category"})]})]})]})}),i&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Sales"}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.totalSales}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"transactions"})]}),o.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:o.jsx(Ef,{className:"h-8 w-8 text-blue-600"})})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Quantity Sold"}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.totalQuantitySold}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.baseUnit.name})]}),o.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:o.jsx(Fs,{className:"h-8 w-8 text-green-600"})})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Revenue"}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:_(i.totalRevenue)}),C&&o.jsxs("p",{className:`text-xs mt-1 font-medium ${C.growthRate>=0?"text-green-600":"text-red-600"}`,children:[z(C.growthRate)," growth"]})]}),o.jsx("div",{className:"bg-emerald-100 p-3 rounded-lg",children:o.jsx(dk,{className:"h-8 w-8 text-emerald-600"})})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Profit Margin"}),o.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[i.profitMargin.toFixed(1),"%"]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[_(i.totalProfit)," profit"]})]}),o.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:o.jsx(Bo,{className:"h-8 w-8 text-purple-600"})})]})})]}),C&&N&&o.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl shadow-lg p-6 mb-6 text-white",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(CB,{className:"w-6 h-6 mr-2"}),o.jsx("h3",{className:"text-lg font-bold",children:"AI-Powered Insights"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Demand Trend"}),o.jsx("p",{className:"text-2xl font-bold capitalize",children:C.demandTrend}),o.jsxs("p",{className:"text-xs opacity-75 mt-1",children:[C.demandTrend==="increasing"&&" Sales momentum is growing",C.demandTrend==="decreasing"&&" Sales are declining",C.demandTrend==="stable"&&" Consistent performance"]})]}),o.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Best Selling Period"}),o.jsx("p",{className:"text-2xl font-bold",children:R(C.bestSellingDay.date)}),o.jsxs("p",{className:"text-xs opacity-75 mt-1",children:[C.bestSellingDay.quantity," units sold"]})]}),o.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Growth Rate"}),o.jsx("p",{className:`text-2xl font-bold ${C.growthRate>=0?"text-green-200":"text-red-200"}`,children:z(C.growthRate)}),o.jsx("p",{className:"text-xs opacity-75 mt-1",children:"Period over period"})]})]})]}),o.jsx("button",{onClick:()=>P(!1),className:"ml-4 p-2 hover:bg-white/10 rounded-lg transition-colors",children:o.jsx(Lt,{className:"w-5 h-5"})})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx(fk,{className:"w-5 h-5 mr-2 text-blue-600"}),"Sales Performance"]}),o.jsxs("span",{className:"text-xs text-gray-500",children:[S.charAt(0).toUpperCase()+S.slice(1)," view"]})]}),o.jsx("div",{className:"h-80",children:a.length>0?o.jsx(H,{data:M,options:E}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[o.jsx(Iv,{className:"w-16 h-16 mb-4 opacity-50"}),o.jsx("p",{className:"text-lg font-medium",children:"No sales data available"}),o.jsx("p",{className:"text-sm",children:"for the selected period"})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[o.jsx(Fs,{className:"w-5 h-5 mr-2 text-green-600"}),"Stock Health"]}),o.jsx("div",{className:"h-80 flex items-center justify-center",children:$?o.jsx(qSe,{data:$,options:D}):o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx(bB,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-sm",children:"No stock data available"})]})})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx(Bo,{className:"w-5 h-5 mr-2 text-purple-600"}),"Profit Trend Analysis"]}),i&&o.jsxs("span",{className:"text-sm text-gray-600",children:["Total Profit: ",o.jsx("span",{className:"font-bold text-green-600",children:_(i.totalProfit)})]})]}),o.jsx("div",{className:"h-80",children:a.length>0?o.jsx(F_,{data:I,options:T}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[o.jsx(Bo,{className:"w-16 h-16 mb-4 opacity-50"}),o.jsx("p",{className:"text-lg font-medium",children:"No profit data available"}),o.jsx("p",{className:"text-sm",children:"for the selected period"})]})})]}),i&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx(aB,{className:"w-5 h-5 mr-2 text-blue-600"}),"Performance Metrics"]})}),o.jsx("div",{className:"p-6",children:o.jsx("table",{className:"w-full",children:o.jsxs("tbody",{className:"divide-y divide-gray-200",children:[o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 text-sm font-medium text-gray-900",children:"Average Sale Price"}),o.jsx("td",{className:"py-3 text-sm text-right font-semibold text-gray-900",children:_(i.averageSalePrice)})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 text-sm font-medium text-gray-900",children:"Total Profit"}),o.jsx("td",{className:"py-3 text-sm text-right font-semibold text-green-600",children:_(i.totalProfit)})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 text-sm font-medium text-gray-900",children:"Profit Margin"}),o.jsxs("td",{className:"py-3 text-sm text-right font-semibold text-gray-900",children:[i.profitMargin.toFixed(2),"%"]})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 text-sm font-medium text-gray-900",children:"Last Sale Date"}),o.jsx("td",{className:"py-3 text-sm text-right text-gray-600",children:i.lastSaleDate?R(i.lastSaleDate):"No sales yet"})]})]})})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx(oB,{className:"w-5 h-5 mr-2 text-orange-600"}),"Inventory Metrics"]})}),o.jsx("div",{className:"p-6",children:o.jsx("table",{className:"w-full",children:o.jsxs("tbody",{className:"divide-y divide-gray-200",children:[o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 text-sm font-medium text-gray-900",children:"Stock Turnover Rate"}),o.jsxs("td",{className:"py-3 text-sm text-right font-semibold text-gray-900",children:[i.stockTurnover.toFixed(2),"x"]})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 text-sm font-medium text-gray-900",children:"Days of Inventory"}),o.jsxs("td",{className:"py-3 text-sm text-right font-semibold text-gray-900",children:[i.daysOfInventory.toFixed(0)," days"]})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 text-sm font-medium text-gray-900",children:"Total Purchases"}),o.jsxs("td",{className:"py-3 text-sm text-right text-gray-600",children:[i.totalPurchases," orders"]})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 text-sm font-medium text-gray-900",children:"Average Purchase Price"}),o.jsx("td",{className:"py-3 text-sm text-right text-gray-600",children:_(i.averagePurchasePrice)})]})]})})})]})]}),i&&i.topSellingDays.length>0&&o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6",children:[o.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx(TB,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Top Selling Periods"]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Rank"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Quantity Sold"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Revenue"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:i.topSellingDays.map((F,B)=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[B===0&&o.jsx("span",{className:"text-2xl mr-2",children:""}),B===1&&o.jsx("span",{className:"text-2xl mr-2",children:""}),B===2&&o.jsx("span",{className:"text-2xl mr-2",children:""}),B>2&&o.jsxs("span",{className:"text-sm font-medium text-gray-500 mr-2",children:["#",B+1]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R(F.date)}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-blue-600",children:[F.quantity," ",n.baseUnit.name]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-semibold text-green-600",children:_(F.revenue)})]},B))})]})})]}),i&&o.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-200 rounded-xl p-6",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"bg-amber-100 p-3 rounded-lg",children:o.jsx(mI,{className:"h-6 w-6 text-amber-600"})})}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-amber-900 mb-3",children:"Smart Recommendations"}),o.jsxs("div",{className:"space-y-3 text-sm text-amber-900",children:[i.daysOfInventory<30&&i.totalSales>0?o.jsxs("div",{className:"bg-white/50 rounded-lg p-4 border border-amber-200",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Cf,{className:"w-5 h-5 mr-2 text-amber-600"}),o.jsx("strong",{className:"text-amber-900",children:"Low Stock Alert"})]}),o.jsxs("p",{className:"text-amber-800 leading-relaxed",children:["With only ",o.jsxs("strong",{children:[i.daysOfInventory.toFixed(0)," days"]})," of inventory remaining and a turnover rate of ",o.jsxs("strong",{children:[i.stockTurnover.toFixed(2),"x"]}),", this product is performing well. Consider ordering approximately ",o.jsxs("strong",{children:[Math.ceil(i.totalQuantitySold/parseInt(f)*30)," units"]}),"for the next month based on current sales trends."]})]}):i.daysOfInventory>90?o.jsxs("div",{className:"bg-white/50 rounded-lg p-4 border border-amber-200",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(pk,{className:"w-5 h-5 mr-2 text-orange-600"}),o.jsx("strong",{className:"text-amber-900",children:"Excess Inventory"})]}),o.jsxs("p",{className:"text-amber-800 leading-relaxed",children:["Current inventory will last ",o.jsxs("strong",{children:[i.daysOfInventory.toFixed(0)," days"]})," at current sales rate. Consider implementing promotions or reducing future purchase orders to optimize cash flow and prevent obsolescence."]})]}):i.totalSales===0?o.jsxs("div",{className:"bg-white/50 rounded-lg p-4 border border-amber-200",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Hl,{className:"w-5 h-5 mr-2 text-red-600"}),o.jsx("strong",{className:"text-amber-900",children:"No Sales Activity"})]}),o.jsx("p",{className:"text-amber-800 leading-relaxed",children:"This product hasn't recorded any sales in the selected period. Consider reviewing pricing strategy, marketing initiatives, or evaluating if this product should be discontinued."})]}):o.jsxs("div",{className:"bg-white/50 rounded-lg p-4 border border-amber-200",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Af,{className:"w-5 h-5 mr-2 text-green-600"}),o.jsx("strong",{className:"text-amber-900",children:"Optimal Inventory Level"})]}),o.jsxs("p",{className:"text-amber-800 leading-relaxed",children:["Current stock levels appear well-balanced with ",o.jsxs("strong",{children:[i.daysOfInventory.toFixed(0)," days"]})," of inventory and a ",o.jsxs("strong",{children:[i.profitMargin.toFixed(1),"%"]})," profit margin. Continue monitoring for demand changes."]})]}),C&&C.demandTrend==="increasing"&&o.jsxs("div",{className:"bg-white/50 rounded-lg p-4 border border-amber-200",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Bo,{className:"w-5 h-5 mr-2 text-green-600"}),o.jsx("strong",{className:"text-amber-900",children:"Growing Demand"})]}),o.jsxs("p",{className:"text-amber-800 leading-relaxed",children:["Sales trend is ",o.jsx("strong",{children:"increasing"})," with a growth rate of ",o.jsx("strong",{children:z(C.growthRate)}),". This is an excellent time to ensure adequate stock levels and potentially review pricing for optimization."]})]}),C&&C.demandTrend==="decreasing"&&o.jsxs("div",{className:"bg-white/50 rounded-lg p-4 border border-amber-200",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(pk,{className:"w-5 h-5 mr-2 text-red-600"}),o.jsx("strong",{className:"text-amber-900",children:"Declining Sales"})]}),o.jsxs("p",{className:"text-amber-800 leading-relaxed",children:["Sales are showing a ",o.jsx("strong",{children:"declining trend"})," (",z(C.growthRate),"). Consider implementing promotional campaigns, reviewing competitor pricing, or adjusting inventory levels accordingly."]})]})]})]})]})}),o.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[o.jsxs("button",{onClick:()=>window.print(),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Yn,{className:"w-4 h-4 mr-2"}),"Print Report"]}),o.jsxs("button",{onClick:()=>{alert("Export to CSV functionality will be implemented")},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(kd,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]})]})},B_=2*60*1e3,at=({children:e})=>{const t=St(),{currentUser:n,setCurrentUser:r,isLoading:i}=ko(),[s,a]=b.useState(!1),[l,c]=b.useState(30),u=W.useRef(null),d=W.useRef(null),f=W.useCallback(()=>{r(null),a(!1),t("/login",{replace:!0})},[t,r]),h=W.useCallback(()=>{a(!1),c(30),u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{a(!0),c(30)},B_-3e4),u.current=setTimeout(()=>{f()},B_)},[f]);b.useEffect(()=>{let g=null;return s&&l>0&&(g=setInterval(()=>{c(m=>m<=1?(f(),0):m-1)},1e3)),()=>{g&&clearInterval(g)}},[s,l,f]);const p=W.useCallback(()=>{h()},[h]);return b.useEffect(()=>{if(n){const g=["mousedown","mousemove","keypress","scroll","touchstart","click"];return g.forEach(m=>{document.addEventListener(m,p,!0)}),h(),()=>{g.forEach(m=>{document.removeEventListener(m,p,!0)}),u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current)}}},[n,p,h]),i?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):n?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex h-screen bg-gray-100",children:[o.jsx(zB,{}),o.jsxs("div",{className:"flex-1 flex flex-col",children:[o.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3 flex justify-end items-center",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(l5,{}),o.jsx(jI,{})]})}),o.jsx("main",{className:"flex-1 overflow-auto p-6",children:e})]})]}),s&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Hl,{className:"w-6 h-6 text-orange-500 mr-3"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Session Timeout Warning"})]}),o.jsxs("p",{className:"text-gray-600 mb-4",children:["You will be logged out in ",o.jsx("span",{className:"font-bold text-red-600",children:l})," seconds due to inactivity."]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>{a(!1),h()},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Stay Logged In"}),o.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Logout Now"})]})]})})]}):o.jsx(Qu,{to:"/login",replace:!0})},KSe=()=>{const[e,t]=b.useState(!1);return b.useEffect(()=>{(async()=>{try{await Q1(),t(!0)}catch(r){console.error("Failed to initialize backend:",r),t(!0)}})()},[]),e?o.jsx(UB,{children:o.jsx(Y6,{children:o.jsxs(z6,{children:[o.jsx(nt,{path:"/login",element:o.jsx(J0e,{})}),o.jsx(nt,{path:"/",element:o.jsx(at,{children:o.jsx(Qu,{to:"/dashboard",replace:!0})})}),o.jsx(nt,{path:"/dashboard",element:o.jsx(at,{children:o.jsx(jfe,{})})}),o.jsx(nt,{path:"/products",element:o.jsx(at,{children:o.jsx(Efe,{})})}),o.jsx(nt,{path:"/products/:id/analytics",element:o.jsx(at,{children:o.jsx(VSe,{})})}),o.jsx(nt,{path:"/categories",element:o.jsx(at,{children:o.jsx(_fe,{})})}),o.jsx(nt,{path:"/sales",element:o.jsx(at,{children:o.jsx(Nme,{})})}),o.jsx(nt,{path:"/sales/:id",element:o.jsx(at,{children:o.jsx(Rme,{})})}),o.jsx(nt,{path:"/sales/:id/edit",element:o.jsx(at,{children:o.jsx(_ge,{})})}),o.jsx(nt,{path:"/customers",element:o.jsx(at,{children:o.jsx(Tge,{})})}),o.jsx(nt,{path:"/pos",element:o.jsx(at,{children:o.jsx(Q0e,{})})}),o.jsx(nt,{path:"/pos2",element:o.jsx(at,{children:o.jsx(Y0e,{})})}),o.jsx(nt,{path:"/retail-pos",element:o.jsx(at,{children:o.jsx(Z0e,{})})}),o.jsx(nt,{path:"/purchases",element:o.jsx(at,{children:o.jsx(V0e,{})})}),o.jsx(nt,{path:"/purchases/create",element:o.jsx(at,{children:o.jsx(eve,{})})}),o.jsx(nt,{path:"/purchases/:id",element:o.jsx(at,{children:o.jsx(tve,{})})}),o.jsx(nt,{path:"/purchases/:id/edit",element:o.jsx(at,{children:o.jsx(nve,{})})}),o.jsx(nt,{path:"/reports/sales",element:o.jsx(at,{children:o.jsx(mve,{})})}),o.jsx(nt,{path:"/reports/date",element:o.jsx(at,{children:o.jsx(gve,{})})}),o.jsx(nt,{path:"/held-sales",element:o.jsx(at,{children:o.jsx(yve,{})})}),o.jsx(nt,{path:"/debtors",element:o.jsx(at,{children:o.jsx(xve,{})})}),o.jsx(nt,{path:"/profile",element:o.jsx(at,{children:o.jsx(vve,{})})}),o.jsx(nt,{path:"/suppliers",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(Oge,{})})})}),o.jsx(nt,{path:"/users",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(Ige,{})})})}),o.jsx(nt,{path:"/settings",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(Rge,{})})})}),o.jsx(nt,{path:"/printer-setup",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(wve,{})})})}),o.jsx(nt,{path:"/qz-tray-setup",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(Sve,{})})})}),o.jsx(nt,{path:"/units",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(Mge,{})})})}),o.jsx(nt,{path:"/reports",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(Qu,{to:"/reports/sales",replace:!0})})})}),o.jsx(nt,{path:"/group-permissions",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(NE,{})})})}),o.jsx(nt,{path:"/permissions/groups",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(NE,{})})})}),o.jsx(nt,{path:"/permissions/create",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(ove,{})})})}),o.jsx(nt,{path:"/database",element:o.jsx(at,{children:o.jsx(Vr,{allowedRoles:["ADMIN"],children:o.jsx(bve,{})})})}),o.jsx(nt,{path:"*",element:o.jsx(Qu,{to:"/dashboard",replace:!0})})]})})}):o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Connecting to server..."})]})})},xL=document.getElementById("root");if(!xL)throw new Error("Failed to find the root element");H1(xL).render(o.jsx(b.StrictMode,{children:o.jsx(KSe,{})}));
