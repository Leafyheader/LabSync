function jR(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function NR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var TE={exports:{}},xh={},OE={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vu=Symbol.for("react.element"),kR=Symbol.for("react.portal"),PR=Symbol.for("react.fragment"),ER=Symbol.for("react.strict_mode"),CR=Symbol.for("react.profiler"),AR=Symbol.for("react.provider"),TR=Symbol.for("react.context"),OR=Symbol.for("react.forward_ref"),_R=Symbol.for("react.suspense"),IR=Symbol.for("react.memo"),$R=Symbol.for("react.lazy"),n1=Symbol.iterator;function RR(e){return e===null||typeof e!="object"?null:(e=n1&&e[n1]||e["@@iterator"],typeof e=="function"?e:null)}var _E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IE=Object.assign,$E={};function hl(e,t,r){this.props=e,this.context=t,this.refs=$E,this.updater=r||_E}hl.prototype.isReactComponent={};hl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function RE(){}RE.prototype=hl.prototype;function bx(e,t,r){this.props=e,this.context=t,this.refs=$E,this.updater=r||_E}var wx=bx.prototype=new RE;wx.constructor=bx;IE(wx,hl.prototype);wx.isPureReactComponent=!0;var a1=Array.isArray,DE=Object.prototype.hasOwnProperty,Sx={current:null},ME={key:!0,ref:!0,__self:!0,__source:!0};function LE(e,t,r){var n,a={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)DE.call(t,n)&&!ME.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Vu,type:e,key:o,ref:i,props:a,_owner:Sx.current}}function DR(e,t){return{$$typeof:Vu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vu}function MR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var o1=/\/+/g;function eg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?MR(""+e.key):t.toString(36)}function af(e,t,r,n,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Vu:case kR:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+eg(i,0):n,a1(a)?(r="",e!=null&&(r=e.replace(o1,"$&/")+"/"),af(a,t,r,"",function(u){return u})):a!=null&&(jx(a)&&(a=DR(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(o1,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",a1(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+eg(o,l);i+=af(o,t,r,c,a)}else if(c=RR(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+eg(o,l++),i+=af(o,t,r,c,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function vd(e,t,r){if(e==null)return e;var n=[],a=0;return af(e,n,"","",function(o){return t.call(r,o,a++)}),n}function LR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ar={current:null},of={transition:null},FR={ReactCurrentDispatcher:Ar,ReactCurrentBatchConfig:of,ReactCurrentOwner:Sx};function FE(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:vd,forEach:function(e,t,r){vd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return vd(e,function(){t++}),t},toArray:function(e){return vd(e,function(t){return t})||[]},only:function(e){if(!jx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xe.Component=hl;Xe.Fragment=PR;Xe.Profiler=CR;Xe.PureComponent=bx;Xe.StrictMode=ER;Xe.Suspense=_R;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FR;Xe.act=FE;Xe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=IE({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Sx.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)DE.call(t,c)&&!ME.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Vu,type:e.type,key:a,ref:o,props:n,_owner:i}};Xe.createContext=function(e){return e={$$typeof:TR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:AR,_context:e},e.Consumer=e};Xe.createElement=LE;Xe.createFactory=function(e){var t=LE.bind(null,e);return t.type=e,t};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(e){return{$$typeof:OR,render:e}};Xe.isValidElement=jx;Xe.lazy=function(e){return{$$typeof:$R,_payload:{_status:-1,_result:e},_init:LR}};Xe.memo=function(e,t){return{$$typeof:IR,type:e,compare:t===void 0?null:t}};Xe.startTransition=function(e){var t=of.transition;of.transition={};try{e()}finally{of.transition=t}};Xe.unstable_act=FE;Xe.useCallback=function(e,t){return Ar.current.useCallback(e,t)};Xe.useContext=function(e){return Ar.current.useContext(e)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(e){return Ar.current.useDeferredValue(e)};Xe.useEffect=function(e,t){return Ar.current.useEffect(e,t)};Xe.useId=function(){return Ar.current.useId()};Xe.useImperativeHandle=function(e,t,r){return Ar.current.useImperativeHandle(e,t,r)};Xe.useInsertionEffect=function(e,t){return Ar.current.useInsertionEffect(e,t)};Xe.useLayoutEffect=function(e,t){return Ar.current.useLayoutEffect(e,t)};Xe.useMemo=function(e,t){return Ar.current.useMemo(e,t)};Xe.useReducer=function(e,t,r){return Ar.current.useReducer(e,t,r)};Xe.useRef=function(e){return Ar.current.useRef(e)};Xe.useState=function(e){return Ar.current.useState(e)};Xe.useSyncExternalStore=function(e,t,r){return Ar.current.useSyncExternalStore(e,t,r)};Xe.useTransition=function(){return Ar.current.useTransition()};Xe.version="18.3.1";OE.exports=Xe;var g=OE.exports;const B=ot(g),Tf=jR({__proto__:null,default:B},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UR=g,BR=Symbol.for("react.element"),zR=Symbol.for("react.fragment"),qR=Object.prototype.hasOwnProperty,HR=UR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VR={key:!0,ref:!0,__self:!0,__source:!0};function UE(e,t,r){var n,a={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)qR.call(t,n)&&!VR.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:BR,type:e,key:o,ref:i,props:a,_owner:HR.current}}xh.Fragment=zR;xh.jsx=UE;xh.jsxs=UE;TE.exports=xh;var s=TE.exports,BE={exports:{}},an={},zE={exports:{}},qE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,R){var q=O.length;O.push(R);e:for(;0<q;){var V=q-1>>>1,z=O[V];if(0<a(z,R))O[V]=R,O[q]=z,q=V;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var R=O[0],q=O.pop();if(q!==R){O[0]=q;e:for(var V=0,z=O.length,J=z>>>1;V<J;){var W=2*(V+1)-1,F=O[W],H=W+1,X=O[H];if(0>a(F,q))H<z&&0>a(X,F)?(O[V]=X,O[H]=q,V=H):(O[V]=F,O[W]=q,V=W);else if(H<z&&0>a(X,q))O[V]=X,O[H]=q,V=H;else break e}}return R}function a(O,R){var q=O.sortIndex-R.sortIndex;return q!==0?q:O.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,p=3,h=!1,y=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=O)n(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=r(u)}}function j(O){if(m=!1,b(O),!y)if(r(c)!==null)y=!0,A(S);else{var R=r(u);R!==null&&$(j,R.startTime-O)}}function S(O,R){y=!1,m&&(m=!1,w(P),P=-1),h=!0;var q=p;try{for(b(R),f=r(c);f!==null&&(!(f.expirationTime>R)||O&&!_());){var V=f.callback;if(typeof V=="function"){f.callback=null,p=f.priorityLevel;var z=V(f.expirationTime<=R);R=e.unstable_now(),typeof z=="function"?f.callback=z:f===r(c)&&n(c),b(R)}else n(c);f=r(c)}if(f!==null)var J=!0;else{var W=r(u);W!==null&&$(j,W.startTime-R),J=!1}return J}finally{f=null,p=q,h=!1}}var k=!1,N=null,P=-1,C=5,E=-1;function _(){return!(e.unstable_now()-E<C)}function L(){if(N!==null){var O=e.unstable_now();E=O;var R=!0;try{R=N(!0,O)}finally{R?U():(k=!1,N=null)}}else k=!1}var U;if(typeof v=="function")U=function(){v(L)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,I=D.port2;D.port1.onmessage=L,U=function(){I.postMessage(null)}}else U=function(){x(L,0)};function A(O){N=O,k||(k=!0,U())}function $(O,R){P=x(function(){O(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){y||h||(y=!0,A(S))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(O){switch(p){case 1:case 2:case 3:var R=3;break;default:R=p}var q=p;p=R;try{return O()}finally{p=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,R){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=p;p=O;try{return R()}finally{p=q}},e.unstable_scheduleCallback=function(O,R,q){var V=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?V+q:V):q=V,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=q+z,O={id:d++,callback:R,priorityLevel:O,startTime:q,expirationTime:z,sortIndex:-1},q>V?(O.sortIndex=q,t(u,O),r(c)===null&&O===r(u)&&(m?(w(P),P=-1):m=!0,$(j,q-V))):(O.sortIndex=z,t(c,O),y||h||(y=!0,A(S))),O},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(O){var R=p;return function(){var q=p;p=R;try{return O.apply(this,arguments)}finally{p=q}}}})(qE);zE.exports=qE;var WR=zE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QR=g,rn=WR;function we(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HE=new Set,Fc={};function ki(e,t){Is(e,t),Is(e+"Capture",t)}function Is(e,t){for(Fc[e]=t,e=0;e<t.length;e++)HE.add(t[e])}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wy=Object.prototype.hasOwnProperty,KR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i1={},s1={};function GR(e){return wy.call(s1,e)?!0:wy.call(i1,e)?!1:KR.test(e)?s1[e]=!0:(i1[e]=!0,!1)}function ZR(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XR(e,t,r,n){if(t===null||typeof t>"u"||ZR(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Tr(e,t,r,n,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){cr[e]=new Tr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];cr[t]=new Tr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){cr[e]=new Tr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){cr[e]=new Tr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){cr[e]=new Tr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){cr[e]=new Tr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){cr[e]=new Tr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){cr[e]=new Tr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){cr[e]=new Tr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nx=/[\-:]([a-z])/g;function kx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nx,kx);cr[t]=new Tr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nx,kx);cr[t]=new Tr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nx,kx);cr[t]=new Tr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){cr[e]=new Tr(e,1,!1,e.toLowerCase(),null,!1,!1)});cr.xlinkHref=new Tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){cr[e]=new Tr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Px(e,t,r,n){var a=cr.hasOwnProperty(t)?cr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XR(t,r,a,n)&&(r=null),n||a===null?GR(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ua=QR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xd=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),Ex=Symbol.for("react.strict_mode"),Sy=Symbol.for("react.profiler"),VE=Symbol.for("react.provider"),WE=Symbol.for("react.context"),Cx=Symbol.for("react.forward_ref"),jy=Symbol.for("react.suspense"),Ny=Symbol.for("react.suspense_list"),Ax=Symbol.for("react.memo"),Za=Symbol.for("react.lazy"),QE=Symbol.for("react.offscreen"),l1=Symbol.iterator;function Ql(e){return e===null||typeof e!="object"?null:(e=l1&&e[l1]||e["@@iterator"],typeof e=="function"?e:null)}var It=Object.assign,tg;function hc(e){if(tg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);tg=t&&t[1]||""}return`
`+tg+e}var rg=!1;function ng(e,t){if(!e||rg)return"";rg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),o=n.stack.split(`
`),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==o[l]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{rg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?hc(e):""}function YR(e){switch(e.tag){case 5:return hc(e.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return e=ng(e.type,!1),e;case 11:return e=ng(e.type.render,!1),e;case 1:return e=ng(e.type,!0),e;default:return""}}function ky(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ts:return"Fragment";case es:return"Portal";case Sy:return"Profiler";case Ex:return"StrictMode";case jy:return"Suspense";case Ny:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case WE:return(e.displayName||"Context")+".Consumer";case VE:return(e._context.displayName||"Context")+".Provider";case Cx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ax:return t=e.displayName||null,t!==null?t:ky(e.type)||"Memo";case Za:t=e._payload,e=e._init;try{return ky(e(t))}catch{}}return null}function JR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ky(t);case 8:return t===Ex?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function KE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eD(e){var t=KE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bd(e){e._valueTracker||(e._valueTracker=eD(e))}function GE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=KE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Of(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Py(e,t){var r=t.checked;return It({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function c1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=bo(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ZE(e,t){t=t.checked,t!=null&&Px(e,"checked",t,!1)}function Ey(e,t){ZE(e,t);var r=bo(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Cy(e,t.type,r):t.hasOwnProperty("defaultValue")&&Cy(e,t.type,bo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function u1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Cy(e,t,r){(t!=="number"||Of(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var mc=Array.isArray;function bs(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+bo(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ay(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(we(91));return It({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function d1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(we(92));if(mc(r)){if(1<r.length)throw Error(we(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:bo(r)}}function XE(e,t){var r=bo(t.value),n=bo(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function f1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function YE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ty(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?YE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wd,JE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wd=wd||document.createElement("div"),wd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Uc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tD=["Webkit","ms","Moz","O"];Object.keys(Sc).forEach(function(e){tD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sc[t]=Sc[e]})});function eC(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Sc.hasOwnProperty(e)&&Sc[e]?(""+t).trim():t+"px"}function tC(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=eC(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var rD=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oy(e,t){if(t){if(rD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(we(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(we(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(we(61))}if(t.style!=null&&typeof t.style!="object")throw Error(we(62))}}function _y(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iy=null;function Tx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $y=null,ws=null,Ss=null;function p1(e){if(e=Ku(e)){if(typeof $y!="function")throw Error(we(280));var t=e.stateNode;t&&(t=Nh(t),$y(e.stateNode,e.type,t))}}function rC(e){ws?Ss?Ss.push(e):Ss=[e]:ws=e}function nC(){if(ws){var e=ws,t=Ss;if(Ss=ws=null,p1(e),t)for(e=0;e<t.length;e++)p1(t[e])}}function aC(e,t){return e(t)}function oC(){}var ag=!1;function iC(e,t,r){if(ag)return e(t,r);ag=!0;try{return aC(e,t,r)}finally{ag=!1,(ws!==null||Ss!==null)&&(oC(),nC())}}function Bc(e,t){var r=e.stateNode;if(r===null)return null;var n=Nh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(we(231,t,typeof r));return r}var Ry=!1;if(Aa)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){Ry=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Ry=!1}function nD(e,t,r,n,a,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var jc=!1,_f=null,If=!1,Dy=null,aD={onError:function(e){jc=!0,_f=e}};function oD(e,t,r,n,a,o,i,l,c){jc=!1,_f=null,nD.apply(aD,arguments)}function iD(e,t,r,n,a,o,i,l,c){if(oD.apply(this,arguments),jc){if(jc){var u=_f;jc=!1,_f=null}else throw Error(we(198));If||(If=!0,Dy=u)}}function Pi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function sC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h1(e){if(Pi(e)!==e)throw Error(we(188))}function sD(e){var t=e.alternate;if(!t){if(t=Pi(e),t===null)throw Error(we(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return h1(a),e;if(o===n)return h1(a),t;o=o.sibling}throw Error(we(188))}if(r.return!==n.return)r=a,n=o;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,n=o;break}if(l===n){i=!0,n=a,r=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===r){i=!0,r=o,n=a;break}if(l===n){i=!0,n=o,r=a;break}l=l.sibling}if(!i)throw Error(we(189))}}if(r.alternate!==n)throw Error(we(190))}if(r.tag!==3)throw Error(we(188));return r.stateNode.current===r?e:t}function lC(e){return e=sD(e),e!==null?cC(e):null}function cC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cC(e);if(t!==null)return t;e=e.sibling}return null}var uC=rn.unstable_scheduleCallback,m1=rn.unstable_cancelCallback,lD=rn.unstable_shouldYield,cD=rn.unstable_requestPaint,Mt=rn.unstable_now,uD=rn.unstable_getCurrentPriorityLevel,Ox=rn.unstable_ImmediatePriority,dC=rn.unstable_UserBlockingPriority,$f=rn.unstable_NormalPriority,dD=rn.unstable_LowPriority,fC=rn.unstable_IdlePriority,bh=null,Jn=null;function fD(e){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(bh,e,void 0,(e.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:mD,pD=Math.log,hD=Math.LN2;function mD(e){return e>>>=0,e===0?32:31-(pD(e)/hD|0)|0}var Sd=64,jd=4194304;function gc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?n=gc(l):(o&=i,o!==0&&(n=gc(o)))}else i=r&~a,i!==0?n=gc(i):o!==0&&(n=gc(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Dn(t),a=1<<r,n|=e[r],t&=~a;return n}function gD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yD(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Dn(o),l=1<<i,c=a[i];c===-1?(!(l&r)||l&n)&&(a[i]=gD(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function My(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pC(){var e=Sd;return Sd<<=1,!(Sd&4194240)&&(Sd=64),e}function og(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Wu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Dn(t),e[t]=r}function vD(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Dn(r),o=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~o}}function _x(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Dn(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var ft=0;function hC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var mC,Ix,gC,yC,vC,Ly=!1,Nd=[],lo=null,co=null,uo=null,zc=new Map,qc=new Map,eo=[],xD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function g1(e,t){switch(e){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":zc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(t.pointerId)}}function Gl(e,t,r,n,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Ku(t),t!==null&&Ix(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function bD(e,t,r,n,a){switch(t){case"focusin":return lo=Gl(lo,e,t,r,n,a),!0;case"dragenter":return co=Gl(co,e,t,r,n,a),!0;case"mouseover":return uo=Gl(uo,e,t,r,n,a),!0;case"pointerover":var o=a.pointerId;return zc.set(o,Gl(zc.get(o)||null,e,t,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,qc.set(o,Gl(qc.get(o)||null,e,t,r,n,a)),!0}return!1}function xC(e){var t=Xo(e.target);if(t!==null){var r=Pi(t);if(r!==null){if(t=r.tag,t===13){if(t=sC(r),t!==null){e.blockedOn=t,vC(e.priority,function(){gC(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Fy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Iy=n,r.target.dispatchEvent(n),Iy=null}else return t=Ku(r),t!==null&&Ix(t),e.blockedOn=r,!1;t.shift()}return!0}function y1(e,t,r){sf(e)&&r.delete(t)}function wD(){Ly=!1,lo!==null&&sf(lo)&&(lo=null),co!==null&&sf(co)&&(co=null),uo!==null&&sf(uo)&&(uo=null),zc.forEach(y1),qc.forEach(y1)}function Zl(e,t){e.blockedOn===t&&(e.blockedOn=null,Ly||(Ly=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,wD)))}function Hc(e){function t(a){return Zl(a,e)}if(0<Nd.length){Zl(Nd[0],e);for(var r=1;r<Nd.length;r++){var n=Nd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(lo!==null&&Zl(lo,e),co!==null&&Zl(co,e),uo!==null&&Zl(uo,e),zc.forEach(t),qc.forEach(t),r=0;r<eo.length;r++)n=eo[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<eo.length&&(r=eo[0],r.blockedOn===null);)xC(r),r.blockedOn===null&&eo.shift()}var js=Ua.ReactCurrentBatchConfig,Df=!0;function SD(e,t,r,n){var a=ft,o=js.transition;js.transition=null;try{ft=1,$x(e,t,r,n)}finally{ft=a,js.transition=o}}function jD(e,t,r,n){var a=ft,o=js.transition;js.transition=null;try{ft=4,$x(e,t,r,n)}finally{ft=a,js.transition=o}}function $x(e,t,r,n){if(Df){var a=Fy(e,t,r,n);if(a===null)mg(e,t,n,Mf,r),g1(e,n);else if(bD(a,e,t,r,n))n.stopPropagation();else if(g1(e,n),t&4&&-1<xD.indexOf(e)){for(;a!==null;){var o=Ku(a);if(o!==null&&mC(o),o=Fy(e,t,r,n),o===null&&mg(e,t,n,Mf,r),o===a)break;a=o}a!==null&&n.stopPropagation()}else mg(e,t,n,null,r)}}var Mf=null;function Fy(e,t,r,n){if(Mf=null,e=Tx(n),e=Xo(e),e!==null)if(t=Pi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=sC(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mf=e,null}function bC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uD()){case Ox:return 1;case dC:return 4;case $f:case dD:return 16;case fC:return 536870912;default:return 16}default:return 16}}var no=null,Rx=null,lf=null;function wC(){if(lf)return lf;var e,t=Rx,r=t.length,n,a="value"in no?no.value:no.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[o-n];n++);return lf=a.slice(e,1<n?1-n:void 0)}function cf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kd(){return!0}function v1(){return!1}function on(e){function t(r,n,a,o,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kd:v1,this.isPropagationStopped=v1,this}return It(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=kd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=kd)},persist:function(){},isPersistent:kd}),t}var ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dx=on(ml),Qu=It({},ml,{view:0,detail:0}),ND=on(Qu),ig,sg,Xl,wh=It({},Qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xl&&(Xl&&e.type==="mousemove"?(ig=e.screenX-Xl.screenX,sg=e.screenY-Xl.screenY):sg=ig=0,Xl=e),ig)},movementY:function(e){return"movementY"in e?e.movementY:sg}}),x1=on(wh),kD=It({},wh,{dataTransfer:0}),PD=on(kD),ED=It({},Qu,{relatedTarget:0}),lg=on(ED),CD=It({},ml,{animationName:0,elapsedTime:0,pseudoElement:0}),AD=on(CD),TD=It({},ml,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),OD=on(TD),_D=It({},ml,{data:0}),b1=on(_D),ID={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$D={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RD[e])?!!t[e]:!1}function Mx(){return DD}var MD=It({},Qu,{key:function(e){if(e.key){var t=ID[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$D[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mx,charCode:function(e){return e.type==="keypress"?cf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),LD=on(MD),FD=It({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w1=on(FD),UD=It({},Qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mx}),BD=on(UD),zD=It({},ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),qD=on(zD),HD=It({},wh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),VD=on(HD),WD=[9,13,27,32],Lx=Aa&&"CompositionEvent"in window,Nc=null;Aa&&"documentMode"in document&&(Nc=document.documentMode);var QD=Aa&&"TextEvent"in window&&!Nc,SC=Aa&&(!Lx||Nc&&8<Nc&&11>=Nc),S1=" ",j1=!1;function jC(e,t){switch(e){case"keyup":return WD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rs=!1;function KD(e,t){switch(e){case"compositionend":return NC(t);case"keypress":return t.which!==32?null:(j1=!0,S1);case"textInput":return e=t.data,e===S1&&j1?null:e;default:return null}}function GD(e,t){if(rs)return e==="compositionend"||!Lx&&jC(e,t)?(e=wC(),lf=Rx=no=null,rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return SC&&t.locale!=="ko"?null:t.data;default:return null}}var ZD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZD[e.type]:t==="textarea"}function kC(e,t,r,n){rC(n),t=Lf(t,"onChange"),0<t.length&&(r=new Dx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var kc=null,Vc=null;function XD(e){DC(e,0)}function Sh(e){var t=os(e);if(GE(t))return e}function YD(e,t){if(e==="change")return t}var PC=!1;if(Aa){var cg;if(Aa){var ug="oninput"in document;if(!ug){var k1=document.createElement("div");k1.setAttribute("oninput","return;"),ug=typeof k1.oninput=="function"}cg=ug}else cg=!1;PC=cg&&(!document.documentMode||9<document.documentMode)}function P1(){kc&&(kc.detachEvent("onpropertychange",EC),Vc=kc=null)}function EC(e){if(e.propertyName==="value"&&Sh(Vc)){var t=[];kC(t,Vc,e,Tx(e)),iC(XD,t)}}function JD(e,t,r){e==="focusin"?(P1(),kc=t,Vc=r,kc.attachEvent("onpropertychange",EC)):e==="focusout"&&P1()}function e4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sh(Vc)}function t4(e,t){if(e==="click")return Sh(t)}function r4(e,t){if(e==="input"||e==="change")return Sh(t)}function n4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fn=typeof Object.is=="function"?Object.is:n4;function Wc(e,t){if(Fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!wy.call(t,a)||!Fn(e[a],t[a]))return!1}return!0}function E1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function C1(e,t){var r=E1(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=E1(r)}}function CC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?CC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function AC(){for(var e=window,t=Of();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Of(e.document)}return t}function Fx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function a4(e){var t=AC(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&CC(r.ownerDocument.documentElement,r)){if(n!==null&&Fx(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=n.end===void 0?o:Math.min(n.end,a),!e.extend&&o>n&&(a=n,n=o,o=a),a=C1(r,o);var i=C1(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var o4=Aa&&"documentMode"in document&&11>=document.documentMode,ns=null,Uy=null,Pc=null,By=!1;function A1(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;By||ns==null||ns!==Of(n)||(n=ns,"selectionStart"in n&&Fx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pc&&Wc(Pc,n)||(Pc=n,n=Lf(Uy,"onSelect"),0<n.length&&(t=new Dx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ns)))}function Pd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var as={animationend:Pd("Animation","AnimationEnd"),animationiteration:Pd("Animation","AnimationIteration"),animationstart:Pd("Animation","AnimationStart"),transitionend:Pd("Transition","TransitionEnd")},dg={},TC={};Aa&&(TC=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function jh(e){if(dg[e])return dg[e];if(!as[e])return e;var t=as[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in TC)return dg[e]=t[r];return e}var OC=jh("animationend"),_C=jh("animationiteration"),IC=jh("animationstart"),$C=jh("transitionend"),RC=new Map,T1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Co(e,t){RC.set(e,t),ki(t,[e])}for(var fg=0;fg<T1.length;fg++){var pg=T1[fg],i4=pg.toLowerCase(),s4=pg[0].toUpperCase()+pg.slice(1);Co(i4,"on"+s4)}Co(OC,"onAnimationEnd");Co(_C,"onAnimationIteration");Co(IC,"onAnimationStart");Co("dblclick","onDoubleClick");Co("focusin","onFocus");Co("focusout","onBlur");Co($C,"onTransitionEnd");Is("onMouseEnter",["mouseout","mouseover"]);Is("onMouseLeave",["mouseout","mouseover"]);Is("onPointerEnter",["pointerout","pointerover"]);Is("onPointerLeave",["pointerout","pointerover"]);ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ki("onBeforeInput",["compositionend","keypress","textInput","paste"]);ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l4=new Set("cancel close invalid load scroll toggle".split(" ").concat(yc));function O1(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,iD(n,t,void 0,e),e.currentTarget=null}function DC(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;O1(a,l,u),o=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;O1(a,l,u),o=c}}}if(If)throw e=Dy,If=!1,Dy=null,e}function St(e,t){var r=t[Wy];r===void 0&&(r=t[Wy]=new Set);var n=e+"__bubble";r.has(n)||(MC(t,e,2,!1),r.add(n))}function hg(e,t,r){var n=0;t&&(n|=4),MC(r,e,n,t)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function Qc(e){if(!e[Ed]){e[Ed]=!0,HE.forEach(function(r){r!=="selectionchange"&&(l4.has(r)||hg(r,!1,e),hg(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ed]||(t[Ed]=!0,hg("selectionchange",!1,t))}}function MC(e,t,r,n){switch(bC(t)){case 1:var a=SD;break;case 4:a=jD;break;default:a=$x}r=a.bind(null,t,r,e),a=void 0,!Ry||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function mg(e,t,r,n,a){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=Xo(l),i===null)return;if(c=i.tag,c===5||c===6){n=o=i;continue e}l=l.parentNode}}n=n.return}iC(function(){var u=o,d=Tx(r),f=[];e:{var p=RC.get(e);if(p!==void 0){var h=Dx,y=e;switch(e){case"keypress":if(cf(r)===0)break e;case"keydown":case"keyup":h=LD;break;case"focusin":y="focus",h=lg;break;case"focusout":y="blur",h=lg;break;case"beforeblur":case"afterblur":h=lg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=x1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=PD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=BD;break;case OC:case _C:case IC:h=AD;break;case $C:h=qD;break;case"scroll":h=ND;break;case"wheel":h=VD;break;case"copy":case"cut":case"paste":h=OD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=w1}var m=(t&4)!==0,x=!m&&e==="scroll",w=m?p!==null?p+"Capture":null:p;m=[];for(var v=u,b;v!==null;){b=v;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,w!==null&&(j=Bc(v,w),j!=null&&m.push(Kc(v,j,b)))),x)break;v=v.return}0<m.length&&(p=new h(p,y,null,r,d),f.push({event:p,listeners:m}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==Iy&&(y=r.relatedTarget||r.fromElement)&&(Xo(y)||y[Ta]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(y=r.relatedTarget||r.toElement,h=u,y=y?Xo(y):null,y!==null&&(x=Pi(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(h=null,y=u),h!==y)){if(m=x1,j="onMouseLeave",w="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=w1,j="onPointerLeave",w="onPointerEnter",v="pointer"),x=h==null?p:os(h),b=y==null?p:os(y),p=new m(j,v+"leave",h,r,d),p.target=x,p.relatedTarget=b,j=null,Xo(d)===u&&(m=new m(w,v+"enter",y,r,d),m.target=b,m.relatedTarget=x,j=m),x=j,h&&y)t:{for(m=h,w=y,v=0,b=m;b;b=zi(b))v++;for(b=0,j=w;j;j=zi(j))b++;for(;0<v-b;)m=zi(m),v--;for(;0<b-v;)w=zi(w),b--;for(;v--;){if(m===w||w!==null&&m===w.alternate)break t;m=zi(m),w=zi(w)}m=null}else m=null;h!==null&&_1(f,p,h,m,!1),y!==null&&x!==null&&_1(f,x,y,m,!0)}}e:{if(p=u?os(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var S=YD;else if(N1(p))if(PC)S=r4;else{S=e4;var k=JD}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=t4);if(S&&(S=S(e,u))){kC(f,S,r,d);break e}k&&k(e,p,u),e==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&Cy(p,"number",p.value)}switch(k=u?os(u):window,e){case"focusin":(N1(k)||k.contentEditable==="true")&&(ns=k,Uy=u,Pc=null);break;case"focusout":Pc=Uy=ns=null;break;case"mousedown":By=!0;break;case"contextmenu":case"mouseup":case"dragend":By=!1,A1(f,r,d);break;case"selectionchange":if(o4)break;case"keydown":case"keyup":A1(f,r,d)}var N;if(Lx)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else rs?jC(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(SC&&r.locale!=="ko"&&(rs||P!=="onCompositionStart"?P==="onCompositionEnd"&&rs&&(N=wC()):(no=d,Rx="value"in no?no.value:no.textContent,rs=!0)),k=Lf(u,P),0<k.length&&(P=new b1(P,e,null,r,d),f.push({event:P,listeners:k}),N?P.data=N:(N=NC(r),N!==null&&(P.data=N)))),(N=QD?KD(e,r):GD(e,r))&&(u=Lf(u,"onBeforeInput"),0<u.length&&(d=new b1("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}DC(f,t)})}function Kc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Lf(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Bc(e,r),o!=null&&n.unshift(Kc(e,o,a)),o=Bc(e,t),o!=null&&n.push(Kc(e,o,a))),e=e.return}return n}function zi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _1(e,t,r,n,a){for(var o=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Bc(r,o),c!=null&&i.unshift(Kc(r,c,l))):a||(c=Bc(r,o),c!=null&&i.push(Kc(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var c4=/\r\n?/g,u4=/\u0000|\uFFFD/g;function I1(e){return(typeof e=="string"?e:""+e).replace(c4,`
`).replace(u4,"")}function Cd(e,t,r){if(t=I1(t),I1(e)!==t&&r)throw Error(we(425))}function Ff(){}var zy=null,qy=null;function Hy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vy=typeof setTimeout=="function"?setTimeout:void 0,d4=typeof clearTimeout=="function"?clearTimeout:void 0,$1=typeof Promise=="function"?Promise:void 0,f4=typeof queueMicrotask=="function"?queueMicrotask:typeof $1<"u"?function(e){return $1.resolve(null).then(e).catch(p4)}:Vy;function p4(e){setTimeout(function(){throw e})}function gg(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Hc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Hc(t)}function fo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function R1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var gl=Math.random().toString(36).slice(2),Zn="__reactFiber$"+gl,Gc="__reactProps$"+gl,Ta="__reactContainer$"+gl,Wy="__reactEvents$"+gl,h4="__reactListeners$"+gl,m4="__reactHandles$"+gl;function Xo(e){var t=e[Zn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ta]||r[Zn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=R1(e);e!==null;){if(r=e[Zn])return r;e=R1(e)}return t}e=r,r=e.parentNode}return null}function Ku(e){return e=e[Zn]||e[Ta],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function os(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(we(33))}function Nh(e){return e[Gc]||null}var Qy=[],is=-1;function Ao(e){return{current:e}}function kt(e){0>is||(e.current=Qy[is],Qy[is]=null,is--)}function bt(e,t){is++,Qy[is]=e.current,e.current=t}var wo={},xr=Ao(wo),$r=Ao(!1),fi=wo;function $s(e,t){var r=e.type.contextTypes;if(!r)return wo;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Rr(e){return e=e.childContextTypes,e!=null}function Uf(){kt($r),kt(xr)}function D1(e,t,r){if(xr.current!==wo)throw Error(we(168));bt(xr,t),bt($r,r)}function LC(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(we(108,JR(e)||"Unknown",a));return It({},r,n)}function Bf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wo,fi=xr.current,bt(xr,e),bt($r,$r.current),!0}function M1(e,t,r){var n=e.stateNode;if(!n)throw Error(we(169));r?(e=LC(e,t,fi),n.__reactInternalMemoizedMergedChildContext=e,kt($r),kt(xr),bt(xr,e)):kt($r),bt($r,r)}var ya=null,kh=!1,yg=!1;function FC(e){ya===null?ya=[e]:ya.push(e)}function g4(e){kh=!0,FC(e)}function To(){if(!yg&&ya!==null){yg=!0;var e=0,t=ft;try{var r=ya;for(ft=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ya=null,kh=!1}catch(a){throw ya!==null&&(ya=ya.slice(e+1)),uC(Ox,To),a}finally{ft=t,yg=!1}}return null}var ss=[],ls=0,zf=null,qf=0,fn=[],pn=0,pi=null,va=1,xa="";function Ho(e,t){ss[ls++]=qf,ss[ls++]=zf,zf=e,qf=t}function UC(e,t,r){fn[pn++]=va,fn[pn++]=xa,fn[pn++]=pi,pi=e;var n=va;e=xa;var a=32-Dn(n)-1;n&=~(1<<a),r+=1;var o=32-Dn(t)+a;if(30<o){var i=a-a%5;o=(n&(1<<i)-1).toString(32),n>>=i,a-=i,va=1<<32-Dn(t)+a|r<<a|n,xa=o+e}else va=1<<o|r<<a|n,xa=e}function Ux(e){e.return!==null&&(Ho(e,1),UC(e,1,0))}function Bx(e){for(;e===zf;)zf=ss[--ls],ss[ls]=null,qf=ss[--ls],ss[ls]=null;for(;e===pi;)pi=fn[--pn],fn[pn]=null,xa=fn[--pn],fn[pn]=null,va=fn[--pn],fn[pn]=null}var Xr=null,Gr=null,Pt=!1,$n=null;function BC(e,t){var r=yn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function L1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xr=e,Gr=fo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xr=e,Gr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=pi!==null?{id:va,overflow:xa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=yn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Xr=e,Gr=null,!0):!1;default:return!1}}function Ky(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gy(e){if(Pt){var t=Gr;if(t){var r=t;if(!L1(e,t)){if(Ky(e))throw Error(we(418));t=fo(r.nextSibling);var n=Xr;t&&L1(e,t)?BC(n,r):(e.flags=e.flags&-4097|2,Pt=!1,Xr=e)}}else{if(Ky(e))throw Error(we(418));e.flags=e.flags&-4097|2,Pt=!1,Xr=e}}}function F1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xr=e}function Ad(e){if(e!==Xr)return!1;if(!Pt)return F1(e),Pt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hy(e.type,e.memoizedProps)),t&&(t=Gr)){if(Ky(e))throw zC(),Error(we(418));for(;t;)BC(e,t),t=fo(t.nextSibling)}if(F1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(we(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Gr=fo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Gr=null}}else Gr=Xr?fo(e.stateNode.nextSibling):null;return!0}function zC(){for(var e=Gr;e;)e=fo(e.nextSibling)}function Rs(){Gr=Xr=null,Pt=!1}function zx(e){$n===null?$n=[e]:$n.push(e)}var y4=Ua.ReactCurrentBatchConfig;function Yl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(we(309));var n=r.stateNode}if(!n)throw Error(we(147,e));var a=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=a.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(we(284));if(!r._owner)throw Error(we(290,e))}return e}function Td(e,t){throw e=Object.prototype.toString.call(t),Error(we(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function U1(e){var t=e._init;return t(e._payload)}function qC(e){function t(w,v){if(e){var b=w.deletions;b===null?(w.deletions=[v],w.flags|=16):b.push(v)}}function r(w,v){if(!e)return null;for(;v!==null;)t(w,v),v=v.sibling;return null}function n(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function a(w,v){return w=go(w,v),w.index=0,w.sibling=null,w}function o(w,v,b){return w.index=b,e?(b=w.alternate,b!==null?(b=b.index,b<v?(w.flags|=2,v):b):(w.flags|=2,v)):(w.flags|=1048576,v)}function i(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,v,b,j){return v===null||v.tag!==6?(v=Ng(b,w.mode,j),v.return=w,v):(v=a(v,b),v.return=w,v)}function c(w,v,b,j){var S=b.type;return S===ts?d(w,v,b.props.children,j,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Za&&U1(S)===v.type)?(j=a(v,b.props),j.ref=Yl(w,v,b),j.return=w,j):(j=gf(b.type,b.key,b.props,null,w.mode,j),j.ref=Yl(w,v,b),j.return=w,j)}function u(w,v,b,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=kg(b,w.mode,j),v.return=w,v):(v=a(v,b.children||[]),v.return=w,v)}function d(w,v,b,j,S){return v===null||v.tag!==7?(v=ii(b,w.mode,j,S),v.return=w,v):(v=a(v,b),v.return=w,v)}function f(w,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ng(""+v,w.mode,b),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xd:return b=gf(v.type,v.key,v.props,null,w.mode,b),b.ref=Yl(w,null,v),b.return=w,b;case es:return v=kg(v,w.mode,b),v.return=w,v;case Za:var j=v._init;return f(w,j(v._payload),b)}if(mc(v)||Ql(v))return v=ii(v,w.mode,b,null),v.return=w,v;Td(w,v)}return null}function p(w,v,b,j){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(w,v,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case xd:return b.key===S?c(w,v,b,j):null;case es:return b.key===S?u(w,v,b,j):null;case Za:return S=b._init,p(w,v,S(b._payload),j)}if(mc(b)||Ql(b))return S!==null?null:d(w,v,b,j,null);Td(w,b)}return null}function h(w,v,b,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(b)||null,l(v,w,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case xd:return w=w.get(j.key===null?b:j.key)||null,c(v,w,j,S);case es:return w=w.get(j.key===null?b:j.key)||null,u(v,w,j,S);case Za:var k=j._init;return h(w,v,b,k(j._payload),S)}if(mc(j)||Ql(j))return w=w.get(b)||null,d(v,w,j,S,null);Td(v,j)}return null}function y(w,v,b,j){for(var S=null,k=null,N=v,P=v=0,C=null;N!==null&&P<b.length;P++){N.index>P?(C=N,N=null):C=N.sibling;var E=p(w,N,b[P],j);if(E===null){N===null&&(N=C);break}e&&N&&E.alternate===null&&t(w,N),v=o(E,v,P),k===null?S=E:k.sibling=E,k=E,N=C}if(P===b.length)return r(w,N),Pt&&Ho(w,P),S;if(N===null){for(;P<b.length;P++)N=f(w,b[P],j),N!==null&&(v=o(N,v,P),k===null?S=N:k.sibling=N,k=N);return Pt&&Ho(w,P),S}for(N=n(w,N);P<b.length;P++)C=h(N,w,P,b[P],j),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?P:C.key),v=o(C,v,P),k===null?S=C:k.sibling=C,k=C);return e&&N.forEach(function(_){return t(w,_)}),Pt&&Ho(w,P),S}function m(w,v,b,j){var S=Ql(b);if(typeof S!="function")throw Error(we(150));if(b=S.call(b),b==null)throw Error(we(151));for(var k=S=null,N=v,P=v=0,C=null,E=b.next();N!==null&&!E.done;P++,E=b.next()){N.index>P?(C=N,N=null):C=N.sibling;var _=p(w,N,E.value,j);if(_===null){N===null&&(N=C);break}e&&N&&_.alternate===null&&t(w,N),v=o(_,v,P),k===null?S=_:k.sibling=_,k=_,N=C}if(E.done)return r(w,N),Pt&&Ho(w,P),S;if(N===null){for(;!E.done;P++,E=b.next())E=f(w,E.value,j),E!==null&&(v=o(E,v,P),k===null?S=E:k.sibling=E,k=E);return Pt&&Ho(w,P),S}for(N=n(w,N);!E.done;P++,E=b.next())E=h(N,w,P,E.value,j),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?P:E.key),v=o(E,v,P),k===null?S=E:k.sibling=E,k=E);return e&&N.forEach(function(L){return t(w,L)}),Pt&&Ho(w,P),S}function x(w,v,b,j){if(typeof b=="object"&&b!==null&&b.type===ts&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case xd:e:{for(var S=b.key,k=v;k!==null;){if(k.key===S){if(S=b.type,S===ts){if(k.tag===7){r(w,k.sibling),v=a(k,b.props.children),v.return=w,w=v;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Za&&U1(S)===k.type){r(w,k.sibling),v=a(k,b.props),v.ref=Yl(w,k,b),v.return=w,w=v;break e}r(w,k);break}else t(w,k);k=k.sibling}b.type===ts?(v=ii(b.props.children,w.mode,j,b.key),v.return=w,w=v):(j=gf(b.type,b.key,b.props,null,w.mode,j),j.ref=Yl(w,v,b),j.return=w,w=j)}return i(w);case es:e:{for(k=b.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(w,v.sibling),v=a(v,b.children||[]),v.return=w,w=v;break e}else{r(w,v);break}else t(w,v);v=v.sibling}v=kg(b,w.mode,j),v.return=w,w=v}return i(w);case Za:return k=b._init,x(w,v,k(b._payload),j)}if(mc(b))return y(w,v,b,j);if(Ql(b))return m(w,v,b,j);Td(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(w,v.sibling),v=a(v,b),v.return=w,w=v):(r(w,v),v=Ng(b,w.mode,j),v.return=w,w=v),i(w)):r(w,v)}return x}var Ds=qC(!0),HC=qC(!1),Hf=Ao(null),Vf=null,cs=null,qx=null;function Hx(){qx=cs=Vf=null}function Vx(e){var t=Hf.current;kt(Hf),e._currentValue=t}function Zy(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ns(e,t){Vf=e,qx=cs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_r=!0),e.firstContext=null)}function bn(e){var t=e._currentValue;if(qx!==e)if(e={context:e,memoizedValue:t,next:null},cs===null){if(Vf===null)throw Error(we(308));cs=e,Vf.dependencies={lanes:0,firstContext:e}}else cs=cs.next=e;return t}var Yo=null;function Wx(e){Yo===null?Yo=[e]:Yo.push(e)}function VC(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Wx(t)):(r.next=a.next,a.next=r),t.interleaved=r,Oa(e,n)}function Oa(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xa=!1;function Qx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ja(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function po(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,rt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Oa(e,r)}return a=n.interleaved,a===null?(t.next=t,Wx(n)):(t.next=a.next,a.next=t),n.interleaved=t,Oa(e,r)}function uf(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,_x(e,r)}}function B1(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wf(e,t,r,n){var a=e.updateQueue;Xa=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=a.baseState;i=0,d=u=c=null,l=o;do{var p=l.lane,h=l.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,m=l;switch(p=t,h=r,m.tag){case 1:if(y=m.payload,typeof y=="function"){f=y.call(h,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=m.payload,p=typeof y=="function"?y.call(h,f,p):y,p==null)break e;f=It({},f,p);break e;case 2:Xa=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,i|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);mi|=i,e.lanes=i,e.memoizedState=f}}function z1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(we(191,a));a.call(n)}}}var Gu={},ea=Ao(Gu),Zc=Ao(Gu),Xc=Ao(Gu);function Jo(e){if(e===Gu)throw Error(we(174));return e}function Kx(e,t){switch(bt(Xc,t),bt(Zc,e),bt(ea,Gu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ty(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ty(t,e)}kt(ea),bt(ea,t)}function Ms(){kt(ea),kt(Zc),kt(Xc)}function QC(e){Jo(Xc.current);var t=Jo(ea.current),r=Ty(t,e.type);t!==r&&(bt(Zc,e),bt(ea,r))}function Gx(e){Zc.current===e&&(kt(ea),kt(Zc))}var Tt=Ao(0);function Qf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var vg=[];function Zx(){for(var e=0;e<vg.length;e++)vg[e]._workInProgressVersionPrimary=null;vg.length=0}var df=Ua.ReactCurrentDispatcher,xg=Ua.ReactCurrentBatchConfig,hi=0,Ot=null,Kt=null,rr=null,Kf=!1,Ec=!1,Yc=0,v4=0;function dr(){throw Error(we(321))}function Xx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Fn(e[r],t[r]))return!1;return!0}function Yx(e,t,r,n,a,o){if(hi=o,Ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,df.current=e===null||e.memoizedState===null?S4:j4,e=r(n,a),Ec){o=0;do{if(Ec=!1,Yc=0,25<=o)throw Error(we(301));o+=1,rr=Kt=null,t.updateQueue=null,df.current=N4,e=r(n,a)}while(Ec)}if(df.current=Gf,t=Kt!==null&&Kt.next!==null,hi=0,rr=Kt=Ot=null,Kf=!1,t)throw Error(we(300));return e}function Jx(){var e=Yc!==0;return Yc=0,e}function Gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?Ot.memoizedState=rr=e:rr=rr.next=e,rr}function wn(){if(Kt===null){var e=Ot.alternate;e=e!==null?e.memoizedState:null}else e=Kt.next;var t=rr===null?Ot.memoizedState:rr.next;if(t!==null)rr=t,Kt=e;else{if(e===null)throw Error(we(310));Kt=e,e={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},rr===null?Ot.memoizedState=rr=e:rr=rr.next=e}return rr}function Jc(e,t){return typeof t=="function"?t(e):t}function bg(e){var t=wn(),r=t.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=e;var n=Kt,a=n.baseQueue,o=r.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}n.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,n=n.baseState;var l=i=null,c=null,u=o;do{var d=u.lane;if((hi&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,Ot.lanes|=d,mi|=d}u=u.next}while(u!==null&&u!==o);c===null?i=n:c.next=l,Fn(n,t.memoizedState)||(_r=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do o=a.lane,Ot.lanes|=o,mi|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wg(e){var t=wn(),r=t.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);Fn(o,t.memoizedState)||(_r=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function KC(){}function GC(e,t){var r=Ot,n=wn(),a=t(),o=!Fn(n.memoizedState,a);if(o&&(n.memoizedState=a,_r=!0),n=n.queue,eb(YC.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||rr!==null&&rr.memoizedState.tag&1){if(r.flags|=2048,eu(9,XC.bind(null,r,n,a,t),void 0,null),ar===null)throw Error(we(349));hi&30||ZC(r,t,a)}return a}function ZC(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ot.updateQueue,t===null?(t={lastEffect:null,stores:null},Ot.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function XC(e,t,r,n){t.value=r,t.getSnapshot=n,JC(t)&&eA(e)}function YC(e,t,r){return r(function(){JC(t)&&eA(e)})}function JC(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Fn(e,r)}catch{return!0}}function eA(e){var t=Oa(e,1);t!==null&&Mn(t,e,1,-1)}function q1(e){var t=Gn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jc,lastRenderedState:e},t.queue=e,e=e.dispatch=w4.bind(null,Ot,e),[t.memoizedState,e]}function eu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ot.updateQueue,t===null?(t={lastEffect:null,stores:null},Ot.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function tA(){return wn().memoizedState}function ff(e,t,r,n){var a=Gn();Ot.flags|=e,a.memoizedState=eu(1|t,r,void 0,n===void 0?null:n)}function Ph(e,t,r,n){var a=wn();n=n===void 0?null:n;var o=void 0;if(Kt!==null){var i=Kt.memoizedState;if(o=i.destroy,n!==null&&Xx(n,i.deps)){a.memoizedState=eu(t,r,o,n);return}}Ot.flags|=e,a.memoizedState=eu(1|t,r,o,n)}function H1(e,t){return ff(8390656,8,e,t)}function eb(e,t){return Ph(2048,8,e,t)}function rA(e,t){return Ph(4,2,e,t)}function nA(e,t){return Ph(4,4,e,t)}function aA(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oA(e,t,r){return r=r!=null?r.concat([e]):null,Ph(4,4,aA.bind(null,t,e),r)}function tb(){}function iA(e,t){var r=wn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function sA(e,t){var r=wn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function lA(e,t,r){return hi&21?(Fn(r,t)||(r=pC(),Ot.lanes|=r,mi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_r=!0),e.memoizedState=r)}function x4(e,t){var r=ft;ft=r!==0&&4>r?r:4,e(!0);var n=xg.transition;xg.transition={};try{e(!1),t()}finally{ft=r,xg.transition=n}}function cA(){return wn().memoizedState}function b4(e,t,r){var n=mo(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},uA(e))dA(t,r);else if(r=VC(e,t,r,n),r!==null){var a=Pr();Mn(r,e,n,a),fA(r,t,n)}}function w4(e,t,r){var n=mo(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(uA(e))dA(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,r);if(a.hasEagerState=!0,a.eagerState=l,Fn(l,i)){var c=t.interleaved;c===null?(a.next=a,Wx(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=VC(e,t,a,n),r!==null&&(a=Pr(),Mn(r,e,n,a),fA(r,t,n))}}function uA(e){var t=e.alternate;return e===Ot||t!==null&&t===Ot}function dA(e,t){Ec=Kf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function fA(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,_x(e,r)}}var Gf={readContext:bn,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useInsertionEffect:dr,useLayoutEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useMutableSource:dr,useSyncExternalStore:dr,useId:dr,unstable_isNewReconciler:!1},S4={readContext:bn,useCallback:function(e,t){return Gn().memoizedState=[e,t===void 0?null:t],e},useContext:bn,useEffect:H1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ff(4194308,4,aA.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ff(4194308,4,e,t)},useInsertionEffect:function(e,t){return ff(4,2,e,t)},useMemo:function(e,t){var r=Gn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Gn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=b4.bind(null,Ot,e),[n.memoizedState,e]},useRef:function(e){var t=Gn();return e={current:e},t.memoizedState=e},useState:q1,useDebugValue:tb,useDeferredValue:function(e){return Gn().memoizedState=e},useTransition:function(){var e=q1(!1),t=e[0];return e=x4.bind(null,e[1]),Gn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ot,a=Gn();if(Pt){if(r===void 0)throw Error(we(407));r=r()}else{if(r=t(),ar===null)throw Error(we(349));hi&30||ZC(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,H1(YC.bind(null,n,o,e),[e]),n.flags|=2048,eu(9,XC.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Gn(),t=ar.identifierPrefix;if(Pt){var r=xa,n=va;r=(n&~(1<<32-Dn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Yc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=v4++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},j4={readContext:bn,useCallback:iA,useContext:bn,useEffect:eb,useImperativeHandle:oA,useInsertionEffect:rA,useLayoutEffect:nA,useMemo:sA,useReducer:bg,useRef:tA,useState:function(){return bg(Jc)},useDebugValue:tb,useDeferredValue:function(e){var t=wn();return lA(t,Kt.memoizedState,e)},useTransition:function(){var e=bg(Jc)[0],t=wn().memoizedState;return[e,t]},useMutableSource:KC,useSyncExternalStore:GC,useId:cA,unstable_isNewReconciler:!1},N4={readContext:bn,useCallback:iA,useContext:bn,useEffect:eb,useImperativeHandle:oA,useInsertionEffect:rA,useLayoutEffect:nA,useMemo:sA,useReducer:wg,useRef:tA,useState:function(){return wg(Jc)},useDebugValue:tb,useDeferredValue:function(e){var t=wn();return Kt===null?t.memoizedState=e:lA(t,Kt.memoizedState,e)},useTransition:function(){var e=wg(Jc)[0],t=wn().memoizedState;return[e,t]},useMutableSource:KC,useSyncExternalStore:GC,useId:cA,unstable_isNewReconciler:!1};function An(e,t){if(e&&e.defaultProps){t=It({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Xy(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:It({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Eh={isMounted:function(e){return(e=e._reactInternals)?Pi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Pr(),a=mo(e),o=ja(n,a);o.payload=t,r!=null&&(o.callback=r),t=po(e,o,a),t!==null&&(Mn(t,e,a,n),uf(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Pr(),a=mo(e),o=ja(n,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=po(e,o,a),t!==null&&(Mn(t,e,a,n),uf(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Pr(),n=mo(e),a=ja(r,n);a.tag=2,t!=null&&(a.callback=t),t=po(e,a,n),t!==null&&(Mn(t,e,n,r),uf(t,e,n))}};function V1(e,t,r,n,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!Wc(r,n)||!Wc(a,o):!0}function pA(e,t,r){var n=!1,a=wo,o=t.contextType;return typeof o=="object"&&o!==null?o=bn(o):(a=Rr(t)?fi:xr.current,n=t.contextTypes,o=(n=n!=null)?$s(e,a):wo),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Eh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function W1(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Eh.enqueueReplaceState(t,t.state,null)}function Yy(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Qx(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=bn(o):(o=Rr(t)?fi:xr.current,a.context=$s(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Xy(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Eh.enqueueReplaceState(a,a.state,null),Wf(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ls(e,t){try{var r="",n=t;do r+=YR(n),n=n.return;while(n);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Sg(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Jy(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var k4=typeof WeakMap=="function"?WeakMap:Map;function hA(e,t,r){r=ja(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xf||(Xf=!0,c0=n),Jy(e,t)},r}function mA(e,t,r){r=ja(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Jy(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Jy(e,t),typeof n!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Q1(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new k4;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=F4.bind(null,e,t,r),t.then(e,e))}function K1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function G1(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ja(-1,1),t.tag=2,po(r,t,1))),r.lanes|=1),e)}var P4=Ua.ReactCurrentOwner,_r=!1;function Sr(e,t,r,n){t.child=e===null?HC(t,null,r,n):Ds(t,e.child,r,n)}function Z1(e,t,r,n,a){r=r.render;var o=t.ref;return Ns(t,a),n=Yx(e,t,r,n,o,a),r=Jx(),e!==null&&!_r?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,_a(e,t,a)):(Pt&&r&&Ux(t),t.flags|=1,Sr(e,t,n,a),t.child)}function X1(e,t,r,n,a){if(e===null){var o=r.type;return typeof o=="function"&&!cb(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,gA(e,t,o,n,a)):(e=gf(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:Wc,r(i,n)&&e.ref===t.ref)return _a(e,t,a)}return t.flags|=1,e=go(o,n),e.ref=t.ref,e.return=t,t.child=e}function gA(e,t,r,n,a){if(e!==null){var o=e.memoizedProps;if(Wc(o,n)&&e.ref===t.ref)if(_r=!1,t.pendingProps=n=o,(e.lanes&a)!==0)e.flags&131072&&(_r=!0);else return t.lanes=e.lanes,_a(e,t,a)}return e0(e,t,r,n,a)}function yA(e,t,r){var n=t.pendingProps,a=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bt(ds,qr),qr|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bt(ds,qr),qr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,bt(ds,qr),qr|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,bt(ds,qr),qr|=n;return Sr(e,t,a,r),t.child}function vA(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function e0(e,t,r,n,a){var o=Rr(r)?fi:xr.current;return o=$s(t,o),Ns(t,a),r=Yx(e,t,r,n,o,a),n=Jx(),e!==null&&!_r?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,_a(e,t,a)):(Pt&&n&&Ux(t),t.flags|=1,Sr(e,t,r,a),t.child)}function Y1(e,t,r,n,a){if(Rr(r)){var o=!0;Bf(t)}else o=!1;if(Ns(t,a),t.stateNode===null)pf(e,t),pA(t,r,n),Yy(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=bn(u):(u=Rr(r)?fi:xr.current,u=$s(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&W1(t,i,n,u),Xa=!1;var p=t.memoizedState;i.state=p,Wf(t,n,i,a),c=t.memoizedState,l!==n||p!==c||$r.current||Xa?(typeof d=="function"&&(Xy(t,r,d,n),c=t.memoizedState),(l=Xa||V1(t,r,l,n,p,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,WC(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:An(t.type,l),i.props=u,f=t.pendingProps,p=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=bn(c):(c=Rr(r)?fi:xr.current,c=$s(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||p!==c)&&W1(t,i,n,c),Xa=!1,p=t.memoizedState,i.state=p,Wf(t,n,i,a);var y=t.memoizedState;l!==f||p!==y||$r.current||Xa?(typeof h=="function"&&(Xy(t,r,h,n),y=t.memoizedState),(u=Xa||V1(t,r,u,n,p,y,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),i.props=n,i.state=y,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return t0(e,t,r,n,o,a)}function t0(e,t,r,n,a,o){vA(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&M1(t,r,!1),_a(e,t,o);n=t.stateNode,P4.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Ds(t,e.child,null,o),t.child=Ds(t,null,l,o)):Sr(e,t,l,o),t.memoizedState=n.state,a&&M1(t,r,!0),t.child}function xA(e){var t=e.stateNode;t.pendingContext?D1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&D1(e,t.context,!1),Kx(e,t.containerInfo)}function J1(e,t,r,n,a){return Rs(),zx(a),t.flags|=256,Sr(e,t,r,n),t.child}var r0={dehydrated:null,treeContext:null,retryLane:0};function n0(e){return{baseLanes:e,cachePool:null,transitions:null}}function bA(e,t,r){var n=t.pendingProps,a=Tt.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),bt(Tt,a&1),e===null)return Gy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Th(i,n,0,null),e=ii(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=n0(r),t.memoizedState=r0,e):rb(t,i));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return E4(e,t,i,n,l,a,r);if(o){o=n.fallback,i=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=go(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=go(l,o):(o=ii(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?n0(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=r0,n}return o=e.child,e=o.sibling,n=go(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function rb(e,t){return t=Th({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Od(e,t,r,n){return n!==null&&zx(n),Ds(t,e.child,null,r),e=rb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function E4(e,t,r,n,a,o,i){if(r)return t.flags&256?(t.flags&=-257,n=Sg(Error(we(422))),Od(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=Th({mode:"visible",children:n.children},a,0,null),o=ii(o,a,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Ds(t,e.child,null,i),t.child.memoizedState=n0(i),t.memoizedState=r0,o);if(!(t.mode&1))return Od(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(we(419)),n=Sg(o,n,void 0),Od(e,t,i,n)}if(l=(i&e.childLanes)!==0,_r||l){if(n=ar,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Oa(e,a),Mn(n,e,a,-1))}return lb(),n=Sg(Error(we(421))),Od(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=U4.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,Gr=fo(a.nextSibling),Xr=t,Pt=!0,$n=null,e!==null&&(fn[pn++]=va,fn[pn++]=xa,fn[pn++]=pi,va=e.id,xa=e.overflow,pi=t),t=rb(t,n.children),t.flags|=4096,t)}function eS(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Zy(e.return,t,r)}function jg(e,t,r,n,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function wA(e,t,r){var n=t.pendingProps,a=n.revealOrder,o=n.tail;if(Sr(e,t,n.children,r),n=Tt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eS(e,r,t);else if(e.tag===19)eS(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(bt(Tt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Qf(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),jg(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Qf(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}jg(t,!0,r,null,o);break;case"together":jg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function _a(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),mi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(we(153));if(t.child!==null){for(e=t.child,r=go(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=go(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function C4(e,t,r){switch(t.tag){case 3:xA(t),Rs();break;case 5:QC(t);break;case 1:Rr(t.type)&&Bf(t);break;case 4:Kx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;bt(Hf,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(bt(Tt,Tt.current&1),t.flags|=128,null):r&t.child.childLanes?bA(e,t,r):(bt(Tt,Tt.current&1),e=_a(e,t,r),e!==null?e.sibling:null);bt(Tt,Tt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return wA(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),bt(Tt,Tt.current),n)break;return null;case 22:case 23:return t.lanes=0,yA(e,t,r)}return _a(e,t,r)}var SA,a0,jA,NA;SA=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};a0=function(){};jA=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Jo(ea.current);var o=null;switch(r){case"input":a=Py(e,a),n=Py(e,n),o=[];break;case"select":a=It({},a,{value:void 0}),n=It({},n,{value:void 0}),o=[];break;case"textarea":a=Ay(e,a),n=Ay(e,n),o=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ff)}Oy(r,n);var i;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fc.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&St("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};NA=function(e,t,r,n){r!==n&&(t.flags|=4)};function Jl(e,t){if(!Pt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function fr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function A4(e,t,r){var n=t.pendingProps;switch(Bx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fr(t),null;case 1:return Rr(t.type)&&Uf(),fr(t),null;case 3:return n=t.stateNode,Ms(),kt($r),kt(xr),Zx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ad(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$n!==null&&(f0($n),$n=null))),a0(e,t),fr(t),null;case 5:Gx(t);var a=Jo(Xc.current);if(r=t.type,e!==null&&t.stateNode!=null)jA(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(we(166));return fr(t),null}if(e=Jo(ea.current),Ad(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Zn]=t,n[Gc]=o,e=(t.mode&1)!==0,r){case"dialog":St("cancel",n),St("close",n);break;case"iframe":case"object":case"embed":St("load",n);break;case"video":case"audio":for(a=0;a<yc.length;a++)St(yc[a],n);break;case"source":St("error",n);break;case"img":case"image":case"link":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"input":c1(n,o),St("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},St("invalid",n);break;case"textarea":d1(n,o),St("invalid",n)}Oy(r,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&Cd(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Cd(n.textContent,l,e),a=["children",""+l]):Fc.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&St("scroll",n)}switch(r){case"input":bd(n),u1(n,o,!0);break;case"textarea":bd(n),f1(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Ff)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=YE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Zn]=t,e[Gc]=n,SA(e,t,!1,!1),t.stateNode=e;e:{switch(i=_y(r,n),r){case"dialog":St("cancel",e),St("close",e),a=n;break;case"iframe":case"object":case"embed":St("load",e),a=n;break;case"video":case"audio":for(a=0;a<yc.length;a++)St(yc[a],e);a=n;break;case"source":St("error",e),a=n;break;case"img":case"image":case"link":St("error",e),St("load",e),a=n;break;case"details":St("toggle",e),a=n;break;case"input":c1(e,n),a=Py(e,n),St("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=It({},n,{value:void 0}),St("invalid",e);break;case"textarea":d1(e,n),a=Ay(e,n),St("invalid",e);break;default:a=n}Oy(r,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?tC(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&JE(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Uc(e,c):typeof c=="number"&&Uc(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Fc.hasOwnProperty(o)?c!=null&&o==="onScroll"&&St("scroll",e):c!=null&&Px(e,o,c,i))}switch(r){case"input":bd(e),u1(e,n,!1);break;case"textarea":bd(e),f1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+bo(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?bs(e,!!n.multiple,o,!1):n.defaultValue!=null&&bs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ff)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return fr(t),null;case 6:if(e&&t.stateNode!=null)NA(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(we(166));if(r=Jo(Xc.current),Jo(ea.current),Ad(t)){if(n=t.stateNode,r=t.memoizedProps,n[Zn]=t,(o=n.nodeValue!==r)&&(e=Xr,e!==null))switch(e.tag){case 3:Cd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Cd(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Zn]=t,t.stateNode=n}return fr(t),null;case 13:if(kt(Tt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pt&&Gr!==null&&t.mode&1&&!(t.flags&128))zC(),Rs(),t.flags|=98560,o=!1;else if(o=Ad(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(we(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(we(317));o[Zn]=t}else Rs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;fr(t),o=!1}else $n!==null&&(f0($n),$n=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Tt.current&1?Xt===0&&(Xt=3):lb())),t.updateQueue!==null&&(t.flags|=4),fr(t),null);case 4:return Ms(),a0(e,t),e===null&&Qc(t.stateNode.containerInfo),fr(t),null;case 10:return Vx(t.type._context),fr(t),null;case 17:return Rr(t.type)&&Uf(),fr(t),null;case 19:if(kt(Tt),o=t.memoizedState,o===null)return fr(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)Jl(o,!1);else{if(Xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Qf(e),i!==null){for(t.flags|=128,Jl(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return bt(Tt,Tt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Mt()>Fs&&(t.flags|=128,n=!0,Jl(o,!1),t.lanes=4194304)}else{if(!n)if(e=Qf(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Jl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Pt)return fr(t),null}else 2*Mt()-o.renderingStartTime>Fs&&r!==1073741824&&(t.flags|=128,n=!0,Jl(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Mt(),t.sibling=null,r=Tt.current,bt(Tt,n?r&1|2:r&1),t):(fr(t),null);case 22:case 23:return sb(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?qr&1073741824&&(fr(t),t.subtreeFlags&6&&(t.flags|=8192)):fr(t),null;case 24:return null;case 25:return null}throw Error(we(156,t.tag))}function T4(e,t){switch(Bx(t),t.tag){case 1:return Rr(t.type)&&Uf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ms(),kt($r),kt(xr),Zx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Gx(t),null;case 13:if(kt(Tt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(we(340));Rs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return kt(Tt),null;case 4:return Ms(),null;case 10:return Vx(t.type._context),null;case 22:case 23:return sb(),null;case 24:return null;default:return null}}var _d=!1,hr=!1,O4=typeof WeakSet=="function"?WeakSet:Set,_e=null;function us(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){$t(e,t,n)}else r.current=null}function o0(e,t,r){try{r()}catch(n){$t(e,t,n)}}var tS=!1;function _4(e,t){if(zy=Df,e=AC(),Fx(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==r||a!==0&&f.nodeType!==3||(l=i+a),f!==o||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===e)break t;if(p===r&&++u===a&&(l=i),p===o&&++d===n&&(c=i),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(qy={focusedElem:e,selectionRange:r},Df=!1,_e=t;_e!==null;)if(t=_e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_e=e;else for(;_e!==null;){t=_e;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var m=y.memoizedProps,x=y.memoizedState,w=t.stateNode,v=w.getSnapshotBeforeUpdate(t.elementType===t.type?m:An(t.type,m),x);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(j){$t(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,_e=e;break}_e=t.return}return y=tS,tS=!1,y}function Cc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&o0(t,r,o)}a=a.next}while(a!==n)}}function Ch(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function i0(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function kA(e){var t=e.alternate;t!==null&&(e.alternate=null,kA(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zn],delete t[Gc],delete t[Wy],delete t[h4],delete t[m4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function PA(e){return e.tag===5||e.tag===3||e.tag===4}function rS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||PA(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function s0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ff));else if(n!==4&&(e=e.child,e!==null))for(s0(e,t,r),e=e.sibling;e!==null;)s0(e,t,r),e=e.sibling}function l0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(l0(e,t,r),e=e.sibling;e!==null;)l0(e,t,r),e=e.sibling}var sr=null,Tn=!1;function Qa(e,t,r){for(r=r.child;r!==null;)EA(e,t,r),r=r.sibling}function EA(e,t,r){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(bh,r)}catch{}switch(r.tag){case 5:hr||us(r,t);case 6:var n=sr,a=Tn;sr=null,Qa(e,t,r),sr=n,Tn=a,sr!==null&&(Tn?(e=sr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):sr.removeChild(r.stateNode));break;case 18:sr!==null&&(Tn?(e=sr,r=r.stateNode,e.nodeType===8?gg(e.parentNode,r):e.nodeType===1&&gg(e,r),Hc(e)):gg(sr,r.stateNode));break;case 4:n=sr,a=Tn,sr=r.stateNode.containerInfo,Tn=!0,Qa(e,t,r),sr=n,Tn=a;break;case 0:case 11:case 14:case 15:if(!hr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&o0(r,t,i),a=a.next}while(a!==n)}Qa(e,t,r);break;case 1:if(!hr&&(us(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){$t(r,t,l)}Qa(e,t,r);break;case 21:Qa(e,t,r);break;case 22:r.mode&1?(hr=(n=hr)||r.memoizedState!==null,Qa(e,t,r),hr=n):Qa(e,t,r);break;default:Qa(e,t,r)}}function nS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new O4),t.forEach(function(n){var a=B4.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function kn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:sr=l.stateNode,Tn=!1;break e;case 3:sr=l.stateNode.containerInfo,Tn=!0;break e;case 4:sr=l.stateNode.containerInfo,Tn=!0;break e}l=l.return}if(sr===null)throw Error(we(160));EA(o,i,a),sr=null,Tn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){$t(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)CA(t,e),t=t.sibling}function CA(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kn(t,e),Qn(e),n&4){try{Cc(3,e,e.return),Ch(3,e)}catch(m){$t(e,e.return,m)}try{Cc(5,e,e.return)}catch(m){$t(e,e.return,m)}}break;case 1:kn(t,e),Qn(e),n&512&&r!==null&&us(r,r.return);break;case 5:if(kn(t,e),Qn(e),n&512&&r!==null&&us(r,r.return),e.flags&32){var a=e.stateNode;try{Uc(a,"")}catch(m){$t(e,e.return,m)}}if(n&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&ZE(a,o),_y(l,i);var u=_y(l,o);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?tC(a,f):d==="dangerouslySetInnerHTML"?JE(a,f):d==="children"?Uc(a,f):Px(a,d,f,u)}switch(l){case"input":Ey(a,o);break;case"textarea":XE(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?bs(a,!!o.multiple,h,!1):p!==!!o.multiple&&(o.defaultValue!=null?bs(a,!!o.multiple,o.defaultValue,!0):bs(a,!!o.multiple,o.multiple?[]:"",!1))}a[Gc]=o}catch(m){$t(e,e.return,m)}}break;case 6:if(kn(t,e),Qn(e),n&4){if(e.stateNode===null)throw Error(we(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(m){$t(e,e.return,m)}}break;case 3:if(kn(t,e),Qn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Hc(t.containerInfo)}catch(m){$t(e,e.return,m)}break;case 4:kn(t,e),Qn(e);break;case 13:kn(t,e),Qn(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(ob=Mt())),n&4&&nS(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(hr=(u=hr)||d,kn(t,e),hr=u):kn(t,e),Qn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(_e=e,d=e.child;d!==null;){for(f=_e=d;_e!==null;){switch(p=_e,h=p.child,p.tag){case 0:case 11:case 14:case 15:Cc(4,p,p.return);break;case 1:us(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(m){$t(n,r,m)}}break;case 5:us(p,p.return);break;case 22:if(p.memoizedState!==null){oS(f);continue}}h!==null?(h.return=p,_e=h):oS(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=eC("display",i))}catch(m){$t(e,e.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){$t(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kn(t,e),Qn(e),n&4&&nS(e);break;case 21:break;default:kn(t,e),Qn(e)}}function Qn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(PA(r)){var n=r;break e}r=r.return}throw Error(we(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Uc(a,""),n.flags&=-33);var o=rS(e);l0(e,o,a);break;case 3:case 4:var i=n.stateNode.containerInfo,l=rS(e);s0(e,l,i);break;default:throw Error(we(161))}}catch(c){$t(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function I4(e,t,r){_e=e,AA(e)}function AA(e,t,r){for(var n=(e.mode&1)!==0;_e!==null;){var a=_e,o=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||_d;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||hr;l=_d;var u=hr;if(_d=i,(hr=c)&&!u)for(_e=a;_e!==null;)i=_e,c=i.child,i.tag===22&&i.memoizedState!==null?iS(a):c!==null?(c.return=i,_e=c):iS(a);for(;o!==null;)_e=o,AA(o),o=o.sibling;_e=a,_d=l,hr=u}aS(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,_e=o):aS(e)}}function aS(e){for(;_e!==null;){var t=_e;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hr||Ch(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!hr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:An(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&z1(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}z1(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Hc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}hr||t.flags&512&&i0(t)}catch(p){$t(t,t.return,p)}}if(t===e){_e=null;break}if(r=t.sibling,r!==null){r.return=t.return,_e=r;break}_e=t.return}}function oS(e){for(;_e!==null;){var t=_e;if(t===e){_e=null;break}var r=t.sibling;if(r!==null){r.return=t.return,_e=r;break}_e=t.return}}function iS(e){for(;_e!==null;){var t=_e;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ch(4,t)}catch(c){$t(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){$t(t,a,c)}}var o=t.return;try{i0(t)}catch(c){$t(t,o,c)}break;case 5:var i=t.return;try{i0(t)}catch(c){$t(t,i,c)}}}catch(c){$t(t,t.return,c)}if(t===e){_e=null;break}var l=t.sibling;if(l!==null){l.return=t.return,_e=l;break}_e=t.return}}var $4=Math.ceil,Zf=Ua.ReactCurrentDispatcher,nb=Ua.ReactCurrentOwner,xn=Ua.ReactCurrentBatchConfig,rt=0,ar=null,zt=null,lr=0,qr=0,ds=Ao(0),Xt=0,tu=null,mi=0,Ah=0,ab=0,Ac=null,Or=null,ob=0,Fs=1/0,ma=null,Xf=!1,c0=null,ho=null,Id=!1,ao=null,Yf=0,Tc=0,u0=null,hf=-1,mf=0;function Pr(){return rt&6?Mt():hf!==-1?hf:hf=Mt()}function mo(e){return e.mode&1?rt&2&&lr!==0?lr&-lr:y4.transition!==null?(mf===0&&(mf=pC()),mf):(e=ft,e!==0||(e=window.event,e=e===void 0?16:bC(e.type)),e):1}function Mn(e,t,r,n){if(50<Tc)throw Tc=0,u0=null,Error(we(185));Wu(e,r,n),(!(rt&2)||e!==ar)&&(e===ar&&(!(rt&2)&&(Ah|=r),Xt===4&&to(e,lr)),Dr(e,n),r===1&&rt===0&&!(t.mode&1)&&(Fs=Mt()+500,kh&&To()))}function Dr(e,t){var r=e.callbackNode;yD(e,t);var n=Rf(e,e===ar?lr:0);if(n===0)r!==null&&m1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&m1(r),t===1)e.tag===0?g4(sS.bind(null,e)):FC(sS.bind(null,e)),f4(function(){!(rt&6)&&To()}),r=null;else{switch(hC(n)){case 1:r=Ox;break;case 4:r=dC;break;case 16:r=$f;break;case 536870912:r=fC;break;default:r=$f}r=MA(r,TA.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function TA(e,t){if(hf=-1,mf=0,rt&6)throw Error(we(327));var r=e.callbackNode;if(ks()&&e.callbackNode!==r)return null;var n=Rf(e,e===ar?lr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Jf(e,n);else{t=n;var a=rt;rt|=2;var o=_A();(ar!==e||lr!==t)&&(ma=null,Fs=Mt()+500,oi(e,t));do try{M4();break}catch(l){OA(e,l)}while(!0);Hx(),Zf.current=o,rt=a,zt!==null?t=0:(ar=null,lr=0,t=Xt)}if(t!==0){if(t===2&&(a=My(e),a!==0&&(n=a,t=d0(e,a))),t===1)throw r=tu,oi(e,0),to(e,n),Dr(e,Mt()),r;if(t===6)to(e,n);else{if(a=e.current.alternate,!(n&30)&&!R4(a)&&(t=Jf(e,n),t===2&&(o=My(e),o!==0&&(n=o,t=d0(e,o))),t===1))throw r=tu,oi(e,0),to(e,n),Dr(e,Mt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(we(345));case 2:Vo(e,Or,ma);break;case 3:if(to(e,n),(n&130023424)===n&&(t=ob+500-Mt(),10<t)){if(Rf(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Pr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Vy(Vo.bind(null,e,Or,ma),t);break}Vo(e,Or,ma);break;case 4:if(to(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-Dn(n);o=1<<i,i=t[i],i>a&&(a=i),n&=~o}if(n=a,n=Mt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*$4(n/1960))-n,10<n){e.timeoutHandle=Vy(Vo.bind(null,e,Or,ma),n);break}Vo(e,Or,ma);break;case 5:Vo(e,Or,ma);break;default:throw Error(we(329))}}}return Dr(e,Mt()),e.callbackNode===r?TA.bind(null,e):null}function d0(e,t){var r=Ac;return e.current.memoizedState.isDehydrated&&(oi(e,t).flags|=256),e=Jf(e,t),e!==2&&(t=Or,Or=r,t!==null&&f0(t)),e}function f0(e){Or===null?Or=e:Or.push.apply(Or,e)}function R4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!Fn(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function to(e,t){for(t&=~ab,t&=~Ah,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Dn(t),n=1<<r;e[r]=-1,t&=~n}}function sS(e){if(rt&6)throw Error(we(327));ks();var t=Rf(e,0);if(!(t&1))return Dr(e,Mt()),null;var r=Jf(e,t);if(e.tag!==0&&r===2){var n=My(e);n!==0&&(t=n,r=d0(e,n))}if(r===1)throw r=tu,oi(e,0),to(e,t),Dr(e,Mt()),r;if(r===6)throw Error(we(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vo(e,Or,ma),Dr(e,Mt()),null}function ib(e,t){var r=rt;rt|=1;try{return e(t)}finally{rt=r,rt===0&&(Fs=Mt()+500,kh&&To())}}function gi(e){ao!==null&&ao.tag===0&&!(rt&6)&&ks();var t=rt;rt|=1;var r=xn.transition,n=ft;try{if(xn.transition=null,ft=1,e)return e()}finally{ft=n,xn.transition=r,rt=t,!(rt&6)&&To()}}function sb(){qr=ds.current,kt(ds)}function oi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,d4(r)),zt!==null)for(r=zt.return;r!==null;){var n=r;switch(Bx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Uf();break;case 3:Ms(),kt($r),kt(xr),Zx();break;case 5:Gx(n);break;case 4:Ms();break;case 13:kt(Tt);break;case 19:kt(Tt);break;case 10:Vx(n.type._context);break;case 22:case 23:sb()}r=r.return}if(ar=e,zt=e=go(e.current,null),lr=qr=t,Xt=0,tu=null,ab=Ah=mi=0,Or=Ac=null,Yo!==null){for(t=0;t<Yo.length;t++)if(r=Yo[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=a,n.next=i}r.pending=n}Yo=null}return e}function OA(e,t){do{var r=zt;try{if(Hx(),df.current=Gf,Kf){for(var n=Ot.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Kf=!1}if(hi=0,rr=Kt=Ot=null,Ec=!1,Yc=0,nb.current=null,r===null||r.return===null){Xt=1,tu=t,zt=null;break}e:{var o=e,i=r.return,l=r,c=t;if(t=lr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=K1(i);if(h!==null){h.flags&=-257,G1(h,i,l,o,t),h.mode&1&&Q1(o,u,t),t=h,c=u;var y=t.updateQueue;if(y===null){var m=new Set;m.add(c),t.updateQueue=m}else y.add(c);break e}else{if(!(t&1)){Q1(o,u,t),lb();break e}c=Error(we(426))}}else if(Pt&&l.mode&1){var x=K1(i);if(x!==null){!(x.flags&65536)&&(x.flags|=256),G1(x,i,l,o,t),zx(Ls(c,l));break e}}o=c=Ls(c,l),Xt!==4&&(Xt=2),Ac===null?Ac=[o]:Ac.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var w=hA(o,c,t);B1(o,w);break e;case 1:l=c;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ho===null||!ho.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=mA(o,l,t);B1(o,j);break e}}o=o.return}while(o!==null)}$A(r)}catch(S){t=S,zt===r&&r!==null&&(zt=r=r.return);continue}break}while(!0)}function _A(){var e=Zf.current;return Zf.current=Gf,e===null?Gf:e}function lb(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),ar===null||!(mi&268435455)&&!(Ah&268435455)||to(ar,lr)}function Jf(e,t){var r=rt;rt|=2;var n=_A();(ar!==e||lr!==t)&&(ma=null,oi(e,t));do try{D4();break}catch(a){OA(e,a)}while(!0);if(Hx(),rt=r,Zf.current=n,zt!==null)throw Error(we(261));return ar=null,lr=0,Xt}function D4(){for(;zt!==null;)IA(zt)}function M4(){for(;zt!==null&&!lD();)IA(zt)}function IA(e){var t=DA(e.alternate,e,qr);e.memoizedProps=e.pendingProps,t===null?$A(e):zt=t,nb.current=null}function $A(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=T4(r,t),r!==null){r.flags&=32767,zt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xt=6,zt=null;return}}else if(r=A4(r,t,qr),r!==null){zt=r;return}if(t=t.sibling,t!==null){zt=t;return}zt=t=e}while(t!==null);Xt===0&&(Xt=5)}function Vo(e,t,r){var n=ft,a=xn.transition;try{xn.transition=null,ft=1,L4(e,t,r,n)}finally{xn.transition=a,ft=n}return null}function L4(e,t,r,n){do ks();while(ao!==null);if(rt&6)throw Error(we(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(we(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(vD(e,o),e===ar&&(zt=ar=null,lr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Id||(Id=!0,MA($f,function(){return ks(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=xn.transition,xn.transition=null;var i=ft;ft=1;var l=rt;rt|=4,nb.current=null,_4(e,r),CA(r,e),a4(qy),Df=!!zy,qy=zy=null,e.current=r,I4(r),cD(),rt=l,ft=i,xn.transition=o}else e.current=r;if(Id&&(Id=!1,ao=e,Yf=a),o=e.pendingLanes,o===0&&(ho=null),fD(r.stateNode),Dr(e,Mt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Xf)throw Xf=!1,e=c0,c0=null,e;return Yf&1&&e.tag!==0&&ks(),o=e.pendingLanes,o&1?e===u0?Tc++:(Tc=0,u0=e):Tc=0,To(),null}function ks(){if(ao!==null){var e=hC(Yf),t=xn.transition,r=ft;try{if(xn.transition=null,ft=16>e?16:e,ao===null)var n=!1;else{if(e=ao,ao=null,Yf=0,rt&6)throw Error(we(331));var a=rt;for(rt|=4,_e=e.current;_e!==null;){var o=_e,i=o.child;if(_e.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(_e=u;_e!==null;){var d=_e;switch(d.tag){case 0:case 11:case 15:Cc(8,d,o)}var f=d.child;if(f!==null)f.return=d,_e=f;else for(;_e!==null;){d=_e;var p=d.sibling,h=d.return;if(kA(d),d===u){_e=null;break}if(p!==null){p.return=h,_e=p;break}_e=h}}}var y=o.alternate;if(y!==null){var m=y.child;if(m!==null){y.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}_e=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,_e=i;else e:for(;_e!==null;){if(o=_e,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Cc(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,_e=w;break e}_e=o.return}}var v=e.current;for(_e=v;_e!==null;){i=_e;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,_e=b;else e:for(i=v;_e!==null;){if(l=_e,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ch(9,l)}}catch(S){$t(l,l.return,S)}if(l===i){_e=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,_e=j;break e}_e=l.return}}if(rt=a,To(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(bh,e)}catch{}n=!0}return n}finally{ft=r,xn.transition=t}}return!1}function lS(e,t,r){t=Ls(r,t),t=hA(e,t,1),e=po(e,t,1),t=Pr(),e!==null&&(Wu(e,1,t),Dr(e,t))}function $t(e,t,r){if(e.tag===3)lS(e,e,r);else for(;t!==null;){if(t.tag===3){lS(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ho===null||!ho.has(n))){e=Ls(r,e),e=mA(t,e,1),t=po(t,e,1),e=Pr(),t!==null&&(Wu(t,1,e),Dr(t,e));break}}t=t.return}}function F4(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Pr(),e.pingedLanes|=e.suspendedLanes&r,ar===e&&(lr&r)===r&&(Xt===4||Xt===3&&(lr&130023424)===lr&&500>Mt()-ob?oi(e,0):ab|=r),Dr(e,t)}function RA(e,t){t===0&&(e.mode&1?(t=jd,jd<<=1,!(jd&130023424)&&(jd=4194304)):t=1);var r=Pr();e=Oa(e,t),e!==null&&(Wu(e,t,r),Dr(e,r))}function U4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),RA(e,r)}function B4(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(we(314))}n!==null&&n.delete(t),RA(e,r)}var DA;DA=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||$r.current)_r=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return _r=!1,C4(e,t,r);_r=!!(e.flags&131072)}else _r=!1,Pt&&t.flags&1048576&&UC(t,qf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;pf(e,t),e=t.pendingProps;var a=$s(t,xr.current);Ns(t,r),a=Yx(null,t,n,e,a,r);var o=Jx();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(n)?(o=!0,Bf(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Qx(t),a.updater=Eh,t.stateNode=a,a._reactInternals=t,Yy(t,n,e,r),t=t0(null,t,n,!0,o,r)):(t.tag=0,Pt&&o&&Ux(t),Sr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(pf(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=q4(n),e=An(n,e),a){case 0:t=e0(null,t,n,e,r);break e;case 1:t=Y1(null,t,n,e,r);break e;case 11:t=Z1(null,t,n,e,r);break e;case 14:t=X1(null,t,n,An(n.type,e),r);break e}throw Error(we(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:An(n,a),e0(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:An(n,a),Y1(e,t,n,a,r);case 3:e:{if(xA(t),e===null)throw Error(we(387));n=t.pendingProps,o=t.memoizedState,a=o.element,WC(e,t),Wf(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Ls(Error(we(423)),t),t=J1(e,t,n,r,a);break e}else if(n!==a){a=Ls(Error(we(424)),t),t=J1(e,t,n,r,a);break e}else for(Gr=fo(t.stateNode.containerInfo.firstChild),Xr=t,Pt=!0,$n=null,r=HC(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Rs(),n===a){t=_a(e,t,r);break e}Sr(e,t,n,r)}t=t.child}return t;case 5:return QC(t),e===null&&Gy(t),n=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,Hy(n,a)?i=null:o!==null&&Hy(n,o)&&(t.flags|=32),vA(e,t),Sr(e,t,i,r),t.child;case 6:return e===null&&Gy(t),null;case 13:return bA(e,t,r);case 4:return Kx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ds(t,null,n,r):Sr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:An(n,a),Z1(e,t,n,a,r);case 7:return Sr(e,t,t.pendingProps,r),t.child;case 8:return Sr(e,t,t.pendingProps.children,r),t.child;case 12:return Sr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,bt(Hf,n._currentValue),n._currentValue=i,o!==null)if(Fn(o.value,i)){if(o.children===a.children&&!$r.current){t=_a(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=ja(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Zy(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(we(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Zy(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Sr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ns(t,r),a=bn(a),n=n(a),t.flags|=1,Sr(e,t,n,r),t.child;case 14:return n=t.type,a=An(n,t.pendingProps),a=An(n.type,a),X1(e,t,n,a,r);case 15:return gA(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:An(n,a),pf(e,t),t.tag=1,Rr(n)?(e=!0,Bf(t)):e=!1,Ns(t,r),pA(t,n,a),Yy(t,n,a,r),t0(null,t,n,!0,e,r);case 19:return wA(e,t,r);case 22:return yA(e,t,r)}throw Error(we(156,t.tag))};function MA(e,t){return uC(e,t)}function z4(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(e,t,r,n){return new z4(e,t,r,n)}function cb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function q4(e){if(typeof e=="function")return cb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cx)return 11;if(e===Ax)return 14}return 2}function go(e,t){var r=e.alternate;return r===null?(r=yn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function gf(e,t,r,n,a,o){var i=2;if(n=e,typeof e=="function")cb(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ts:return ii(r.children,a,o,t);case Ex:i=8,a|=8;break;case Sy:return e=yn(12,r,t,a|2),e.elementType=Sy,e.lanes=o,e;case jy:return e=yn(13,r,t,a),e.elementType=jy,e.lanes=o,e;case Ny:return e=yn(19,r,t,a),e.elementType=Ny,e.lanes=o,e;case QE:return Th(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case VE:i=10;break e;case WE:i=9;break e;case Cx:i=11;break e;case Ax:i=14;break e;case Za:i=16,n=null;break e}throw Error(we(130,e==null?e:typeof e,""))}return t=yn(i,r,t,a),t.elementType=e,t.type=n,t.lanes=o,t}function ii(e,t,r,n){return e=yn(7,e,n,t),e.lanes=r,e}function Th(e,t,r,n){return e=yn(22,e,n,t),e.elementType=QE,e.lanes=r,e.stateNode={isHidden:!1},e}function Ng(e,t,r){return e=yn(6,e,null,t),e.lanes=r,e}function kg(e,t,r){return t=yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function H4(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=og(0),this.expirationTimes=og(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=og(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ub(e,t,r,n,a,o,i,l,c){return e=new H4(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=yn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qx(o),e}function V4(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function LA(e){if(!e)return wo;e=e._reactInternals;e:{if(Pi(e)!==e||e.tag!==1)throw Error(we(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(we(171))}if(e.tag===1){var r=e.type;if(Rr(r))return LC(e,r,t)}return t}function FA(e,t,r,n,a,o,i,l,c){return e=ub(r,n,!0,e,a,o,i,l,c),e.context=LA(null),r=e.current,n=Pr(),a=mo(r),o=ja(n,a),o.callback=t??null,po(r,o,a),e.current.lanes=a,Wu(e,a,n),Dr(e,n),e}function Oh(e,t,r,n){var a=t.current,o=Pr(),i=mo(a);return r=LA(r),t.context===null?t.context=r:t.pendingContext=r,t=ja(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=po(a,t,i),e!==null&&(Mn(e,a,i,o),uf(e,a,i)),i}function ep(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function db(e,t){cS(e,t),(e=e.alternate)&&cS(e,t)}function W4(){return null}var UA=typeof reportError=="function"?reportError:function(e){console.error(e)};function fb(e){this._internalRoot=e}_h.prototype.render=fb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(we(409));Oh(e,t,null,null)};_h.prototype.unmount=fb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gi(function(){Oh(null,e,null,null)}),t[Ta]=null}};function _h(e){this._internalRoot=e}_h.prototype.unstable_scheduleHydration=function(e){if(e){var t=yC();e={blockedOn:null,target:e,priority:t};for(var r=0;r<eo.length&&t!==0&&t<eo[r].priority;r++);eo.splice(r,0,e),r===0&&xC(e)}};function pb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ih(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uS(){}function Q4(e,t,r,n,a){if(a){if(typeof n=="function"){var o=n;n=function(){var u=ep(i);o.call(u)}}var i=FA(t,n,e,0,null,!1,!1,"",uS);return e._reactRootContainer=i,e[Ta]=i.current,Qc(e.nodeType===8?e.parentNode:e),gi(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=ep(c);l.call(u)}}var c=ub(e,0,!1,null,null,!1,!1,"",uS);return e._reactRootContainer=c,e[Ta]=c.current,Qc(e.nodeType===8?e.parentNode:e),gi(function(){Oh(t,c,r,n)}),c}function $h(e,t,r,n,a){var o=r._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var l=a;a=function(){var c=ep(i);l.call(c)}}Oh(t,i,e,a)}else i=Q4(r,t,e,a,n);return ep(i)}mC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=gc(t.pendingLanes);r!==0&&(_x(t,r|1),Dr(t,Mt()),!(rt&6)&&(Fs=Mt()+500,To()))}break;case 13:gi(function(){var n=Oa(e,1);if(n!==null){var a=Pr();Mn(n,e,1,a)}}),db(e,1)}};Ix=function(e){if(e.tag===13){var t=Oa(e,134217728);if(t!==null){var r=Pr();Mn(t,e,134217728,r)}db(e,134217728)}};gC=function(e){if(e.tag===13){var t=mo(e),r=Oa(e,t);if(r!==null){var n=Pr();Mn(r,e,t,n)}db(e,t)}};yC=function(){return ft};vC=function(e,t){var r=ft;try{return ft=e,t()}finally{ft=r}};$y=function(e,t,r){switch(t){case"input":if(Ey(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Nh(n);if(!a)throw Error(we(90));GE(n),Ey(n,a)}}}break;case"textarea":XE(e,r);break;case"select":t=r.value,t!=null&&bs(e,!!r.multiple,t,!1)}};aC=ib;oC=gi;var K4={usingClientEntryPoint:!1,Events:[Ku,os,Nh,rC,nC,ib]},ec={findFiberByHostInstance:Xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G4={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lC(e),e===null?null:e.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||W4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{bh=$d.inject(G4),Jn=$d}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K4;an.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pb(t))throw Error(we(200));return V4(e,t,null,r)};an.createRoot=function(e,t){if(!pb(e))throw Error(we(299));var r=!1,n="",a=UA;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ub(e,1,!1,null,null,r,!1,n,a),e[Ta]=t.current,Qc(e.nodeType===8?e.parentNode:e),new fb(t)};an.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(we(188)):(e=Object.keys(e).join(","),Error(we(268,e)));return e=lC(t),e=e===null?null:e.stateNode,e};an.flushSync=function(e){return gi(e)};an.hydrate=function(e,t,r){if(!Ih(t))throw Error(we(200));return $h(null,e,t,!0,r)};an.hydrateRoot=function(e,t,r){if(!pb(e))throw Error(we(405));var n=r!=null&&r.hydratedSources||null,a=!1,o="",i=UA;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=FA(t,null,e,1,r??null,a,!1,o,i),e[Ta]=t.current,Qc(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new _h(t)};an.render=function(e,t,r){if(!Ih(t))throw Error(we(200));return $h(null,e,t,!1,r)};an.unmountComponentAtNode=function(e){if(!Ih(e))throw Error(we(40));return e._reactRootContainer?(gi(function(){$h(null,null,e,!1,function(){e._reactRootContainer=null,e[Ta]=null})}),!0):!1};an.unstable_batchedUpdates=ib;an.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ih(r))throw Error(we(200));if(e==null||e._reactInternals===void 0)throw Error(we(38));return $h(e,t,r,!1,n)};an.version="18.3.1-next-f1338f8080-20240426";function BA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BA)}catch(e){console.error(e)}}BA(),BE.exports=an;var Ei=BE.exports;const Z4=ot(Ei);var hb,dS=Ei;hb=dS.createRoot,dS.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ru(){return ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ru.apply(this,arguments)}var oo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(oo||(oo={}));const fS="popstate";function X4(e){e===void 0&&(e={});function t(n,a){let{pathname:o,search:i,hash:l}=n.location;return p0("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:tp(a)}return J4(t,r,null,e)}function _t(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zA(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Y4(){return Math.random().toString(36).substr(2,8)}function pS(e,t){return{usr:e.state,key:e.key,idx:t}}function p0(e,t,r,n){return r===void 0&&(r=null),ru({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yl(t):t,{state:r,key:t&&t.key||n||Y4()})}function tp(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function J4(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:o=!1}=n,i=a.history,l=oo.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(ru({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){l=oo.Pop;let x=d(),w=x==null?null:x-u;u=x,c&&c({action:l,location:m.location,delta:w})}function p(x,w){l=oo.Push;let v=p0(m.location,x,w);u=d()+1;let b=pS(v,u),j=m.createHref(v);try{i.pushState(b,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(j)}o&&c&&c({action:l,location:m.location,delta:1})}function h(x,w){l=oo.Replace;let v=p0(m.location,x,w);u=d();let b=pS(v,u),j=m.createHref(v);i.replaceState(b,"",j),o&&c&&c({action:l,location:m.location,delta:0})}function y(x){let w=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof x=="string"?x:tp(x);return v=v.replace(/ $/,"%20"),_t(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let m={get action(){return l},get location(){return e(a,i)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(fS,f),c=x,()=>{a.removeEventListener(fS,f),c=null}},createHref(x){return t(a,x)},createURL:y,encodeLocation(x){let w=y(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:h,go(x){return i.go(x)}};return m}var hS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hS||(hS={}));function eM(e,t,r){return r===void 0&&(r="/"),tM(e,t,r,!1)}function tM(e,t,r,n){let a=typeof t=="string"?yl(t):t,o=Us(a.pathname||"/",r);if(o==null)return null;let i=qA(e);rM(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=pM(o);l=dM(i[c],u,n)}return l}function qA(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(_t(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=yo([n,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(_t(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),qA(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:cM(u,o.index),routesMeta:d})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,i);else for(let c of HA(o.path))a(o,i,c)}),t}function HA(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let i=HA(n.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function rM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:uM(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const nM=/^:[\w-]+$/,aM=3,oM=2,iM=1,sM=10,lM=-2,mS=e=>e==="*";function cM(e,t){let r=e.split("/"),n=r.length;return r.some(mS)&&(n+=lM),t&&(n+=oM),r.filter(a=>!mS(a)).reduce((a,o)=>a+(nM.test(o)?aM:o===""?iM:sM),n)}function uM(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function dM(e,t,r){let{routesMeta:n}=e,a={},o="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=o==="/"?t:t.slice(o.length)||"/",f=rp({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=rp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),i.push({params:a,pathname:yo([o,f.pathname]),pathnameBase:yM(yo([o,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(o=yo([o,f.pathnameBase]))}return i}function rp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=fM(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:p,isOptional:h}=d;if(p==="*"){let m=l[f]||"";i=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const y=l[f];return h&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:e}}function fM(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),zA(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function pM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zA(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Us(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function hM(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?yl(e):e;return{pathname:r?r.startsWith("/")?r:mM(r,t):t,search:vM(n),hash:xM(a)}}function mM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Pg(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function mb(e,t){let r=gM(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function gb(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=yl(e):(a=ru({},e),_t(!a.pathname||!a.pathname.includes("?"),Pg("?","pathname","search",a)),_t(!a.pathname||!a.pathname.includes("#"),Pg("#","pathname","hash",a)),_t(!a.search||!a.search.includes("#"),Pg("#","search","hash",a)));let o=e===""||a.pathname==="",i=o?"/":a.pathname,l;if(i==null)l=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),f-=1;a.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=hM(a,l),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const yo=e=>e.join("/").replace(/\/\/+/g,"/"),yM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function bM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const VA=["post","put","patch","delete"];new Set(VA);const wM=["get",...VA];new Set(wM);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nu(){return nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nu.apply(this,arguments)}const Rh=g.createContext(null),WA=g.createContext(null),Ba=g.createContext(null),Dh=g.createContext(null),za=g.createContext({outlet:null,matches:[],isDataRoute:!1}),QA=g.createContext(null);function SM(e,t){let{relative:r}=t===void 0?{}:t;vl()||_t(!1);let{basename:n,navigator:a}=g.useContext(Ba),{hash:o,pathname:i,search:l}=Lh(e,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:yo([n,i])),a.createHref({pathname:c,search:l,hash:o})}function vl(){return g.useContext(Dh)!=null}function Oo(){return vl()||_t(!1),g.useContext(Dh).location}function KA(e){g.useContext(Ba).static||g.useLayoutEffect(e)}function yt(){let{isDataRoute:e}=g.useContext(za);return e?RM():jM()}function jM(){vl()||_t(!1);let e=g.useContext(Rh),{basename:t,future:r,navigator:n}=g.useContext(Ba),{matches:a}=g.useContext(za),{pathname:o}=Oo(),i=JSON.stringify(mb(a,r.v7_relativeSplatPath)),l=g.useRef(!1);return KA(()=>{l.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=gb(u,JSON.parse(i),o,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:yo([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,i,o,e])}function Mh(){let{matches:e}=g.useContext(za),t=e[e.length-1];return t?t.params:{}}function Lh(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=g.useContext(Ba),{matches:a}=g.useContext(za),{pathname:o}=Oo(),i=JSON.stringify(mb(a,n.v7_relativeSplatPath));return g.useMemo(()=>gb(e,JSON.parse(i),o,r==="path"),[e,i,o,r])}function NM(e,t){return kM(e,t)}function kM(e,t,r,n){vl()||_t(!1);let{navigator:a,static:o}=g.useContext(Ba),{matches:i}=g.useContext(za),l=i[i.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let d=Oo(),f;if(t){var p;let w=typeof t=="string"?yl(t):t;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||_t(!1),f=w}else f=d;let h=f.pathname||"/",y=h;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=!o&&r&&r.matches&&r.matches.length>0?r.matches:eM(e,{pathname:y}),x=TM(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:yo([u,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:yo([u,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return t&&x?g.createElement(Dh.Provider,{value:{location:nu({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:oo.Pop}},x):x}function PM(){let e=$M(),t=bM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:a},r):null,null)}const EM=g.createElement(PM,null);class CM extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(za.Provider,{value:this.props.routeContext},g.createElement(QA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AM(e){let{routeContext:t,match:r,children:n}=e,a=g.useContext(Rh);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(za.Provider,{value:t},n)}function TM(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||_t(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:h}=r,y=f.route.loader&&p[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,p)=>{let h,y=!1,m=null,x=null;r&&(h=l&&f.route.id?l[f.route.id]:void 0,m=f.route.errorElement||EM,c&&(u<0&&p===0?(y=!0,x=null):u===p&&(y=!0,x=f.route.hydrateFallbackElement||null)));let w=t.concat(i.slice(0,p+1)),v=()=>{let b;return h?b=m:y?b=x:f.route.Component?b=g.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,g.createElement(AM,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?g.createElement(CM,{location:r.location,revalidation:r.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var GA=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(GA||{}),np=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(np||{});function OM(e){let t=g.useContext(Rh);return t||_t(!1),t}function _M(e){let t=g.useContext(WA);return t||_t(!1),t}function IM(e){let t=g.useContext(za);return t||_t(!1),t}function ZA(e){let t=IM(),r=t.matches[t.matches.length-1];return r.route.id||_t(!1),r.route.id}function $M(){var e;let t=g.useContext(QA),r=_M(np.UseRouteError),n=ZA(np.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function RM(){let{router:e}=OM(GA.UseNavigateStable),t=ZA(np.UseNavigateStable),r=g.useRef(!1);return KA(()=>{r.current=!0}),g.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,nu({fromRouteId:t},o)))},[e,t])}function DM(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Oc(e){let{to:t,replace:r,state:n,relative:a}=e;vl()||_t(!1);let{future:o,static:i}=g.useContext(Ba),{matches:l}=g.useContext(za),{pathname:c}=Oo(),u=yt(),d=gb(t,mb(l,o.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function tt(e){_t(!1)}function MM(e){let{basename:t="/",children:r=null,location:n,navigationType:a=oo.Pop,navigator:o,static:i=!1,future:l}=e;vl()&&_t(!1);let c=t.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:o,static:i,future:nu({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof n=="string"&&(n=yl(n));let{pathname:d="/",search:f="",hash:p="",state:h=null,key:y="default"}=n,m=g.useMemo(()=>{let x=Us(d,c);return x==null?null:{location:{pathname:x,search:f,hash:p,state:h,key:y},navigationType:a}},[c,d,f,p,h,y,a]);return m==null?null:g.createElement(Ba.Provider,{value:u},g.createElement(Dh.Provider,{children:r,value:m}))}function LM(e){let{children:t,location:r}=e;return NM(h0(t),r)}new Promise(()=>{});function h0(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(n,a)=>{if(!g.isValidElement(n))return;let o=[...t,a];if(n.type===g.Fragment){r.push.apply(r,h0(n.props.children,o));return}n.type!==tt&&_t(!1),!n.props.index||!n.props.children||_t(!1);let i={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=h0(n.props.children,o)),r.push(i)}),r}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ap(){return ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ap.apply(this,arguments)}function XA(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function FM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function UM(e,t){return e.button===0&&(!t||t==="_self")&&!FM(e)}const BM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zM=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],qM="6";try{window.__reactRouterVersion=qM}catch{}const HM=g.createContext({isTransitioning:!1}),VM="startTransition",gS=Tf[VM];function WM(e){let{basename:t,children:r,future:n,window:a}=e,o=g.useRef();o.current==null&&(o.current=X4({window:a,v5Compat:!0}));let i=o.current,[l,c]=g.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=g.useCallback(f=>{u&&gS?gS(()=>c(f)):c(f)},[c,u]);return g.useLayoutEffect(()=>i.listen(d),[i,d]),g.useEffect(()=>DM(n),[n]),g.createElement(MM,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}const QM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GM=g.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:o,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,p=XA(t,BM),{basename:h}=g.useContext(Ba),y,m=!1;if(typeof u=="string"&&KM.test(u)&&(y=u,QM))try{let b=new URL(window.location.href),j=u.startsWith("//")?new URL(b.protocol+u):new URL(u),S=Us(j.pathname,h);j.origin===b.origin&&S!=null?u=S+j.search+j.hash:m=!0}catch{}let x=SM(u,{relative:a}),w=YM(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function v(b){n&&n(b),b.defaultPrevented||w(b)}return g.createElement("a",ap({},p,{href:y||x,onClick:m||o?n:v,ref:r,target:c}))}),ZM=g.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:o="",end:i=!1,style:l,to:c,viewTransition:u,children:d}=t,f=XA(t,zM),p=Lh(c,{relative:f.relative}),h=Oo(),y=g.useContext(WA),{navigator:m,basename:x}=g.useContext(Ba),w=y!=null&&JM(p)&&u===!0,v=m.encodeLocation?m.encodeLocation(p).pathname:p.pathname,b=h.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(b=b.toLowerCase(),j=j?j.toLowerCase():null,v=v.toLowerCase()),j&&x&&(j=Us(j,x)||j);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let k=b===v||!i&&b.startsWith(v)&&b.charAt(S)==="/",N=j!=null&&(j===v||!i&&j.startsWith(v)&&j.charAt(v.length)==="/"),P={isActive:k,isPending:N,isTransitioning:w},C=k?n:void 0,E;typeof o=="function"?E=o(P):E=[o,k?"active":null,N?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let _=typeof l=="function"?l(P):l;return g.createElement(GM,ap({},f,{"aria-current":C,className:E,ref:r,style:_,to:c,viewTransition:u}),typeof d=="function"?d(P):d)});var m0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(m0||(m0={}));var yS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(yS||(yS={}));function XM(e){let t=g.useContext(Rh);return t||_t(!1),t}function YM(e,t){let{target:r,replace:n,state:a,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=yt(),u=Oo(),d=Lh(e,{relative:i});return g.useCallback(f=>{if(UM(f,r)){f.preventDefault();let p=n!==void 0?n:tp(u)===tp(d);c(e,{replace:p,state:a,preventScrollReset:o,relative:i,viewTransition:l})}},[u,c,d,n,a,r,e,o,i,l])}function JM(e,t){t===void 0&&(t={});let r=g.useContext(HM);r==null&&_t(!1);let{basename:n}=XM(m0.useViewTransitionState),a=Lh(e,{relative:t.relative});if(!r.isTransitioning)return!1;let o=Us(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=Us(r.nextLocation.pathname,n)||r.nextLocation.pathname;return rp(a.pathname,i)!=null||rp(a.pathname,o)!=null}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$e=(e,t)=>{const r=g.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:c,...u},d)=>g.createElement("svg",{ref:d,...e5,width:a,height:a,stroke:n,strokeWidth:i?Number(o)*24/Number(a):o,className:["lucide",`lucide-${t5(e)}`,l].join(" "),...u},[...t.map(([f,p])=>g.createElement(f,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=$e("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=$e("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=$e("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=$e("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=$e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=$e("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=$e("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=$e("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=$e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=$e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=$e("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=$e("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=$e("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=$e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=$e("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=$e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=$e("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=$e("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=$e("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=$e("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=$e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=$e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=$e("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=$e("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=$e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=$e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=$e("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=$e("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=$e("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=$e("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=$e("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=$e("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=$e("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=$e("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=$e("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=$e("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=$e("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=$e("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=$e("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=$e("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=$e("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=$e("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=$e("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=$e("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=$e("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=$e("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=$e("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=$e("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=$e("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=$e("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=$e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=$e("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=$e("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=$e("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);class fs{constructor(){this.isInitialized=!1,this.preserveSaleData=!0}static getInstance(){return fs.instance||(fs.instance=new fs),fs.instance}initialize(){this.isInitialized||(this.setupBeforeUnloadHandler(),this.isInitialized=!0,console.log("StorageManager initialized - Using sessionStorage for auth (auto-clears on browser close)"))}setupBeforeUnloadHandler(){const t=()=>{localStorage.removeItem("user"),console.log("localStorage auth data cleared on browser close")};window.addEventListener("beforeunload",t),window.__storageCleanup=()=>{window.removeEventListener("beforeunload",t)}}clearAuthData(){try{localStorage.removeItem("user"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),console.log("Authentication data cleared (sale/form data preserved)")}catch(t){console.error("Error clearing auth data:",t)}}clearAuth(){this.clearAuthData()}setSaleDataPersistence(t){this.preserveSaleData=t}}const a2=fs.getInstance();typeof window<"u"&&a2.initialize();const o2="https://localhost:5443";let yf=null;const T5=async()=>{if(yf)return yf;console.log(" Detecting available backend server..."),console.log(" Environment variables:",{VITE_SERVER_URL:"https://localhost:5443",VITE_NETWORK_SERVER_IP:void 0,VITE_BACKEND_HTTPS_PORT:"5443"});const e="https://localhost:5443";return console.log(" Using explicit VITE_SERVER_URL:",e),yf=e,e},io=()=>yf||o2,O5=o2,i2=()=>O5,mn=()=>`${i2()}/api`,s2=()=>i2(),vf="lastBackendUrl",Zu=()=>{const e=io(),t=localStorage.getItem(vf);return console.log(" Auth Manager Check:",{currentBackendUrl:e,lastBackendUrl:t,hasToken:!!sessionStorage.getItem("authToken"),hasUser:!!sessionStorage.getItem("user")}),t&&t!==e?(console.log(" Backend URL changed from",t,"to",e),console.log(" Clearing authentication data for backend change..."),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("currentCustomer"),localStorage.removeItem("currentCustomerSearch"),localStorage.removeItem("currentCustomer2"),localStorage.removeItem("currentCustomerSearch2"),localStorage.setItem(vf,e),!0):(t||localStorage.setItem(vf,e),!1)},_5=e=>{const t=io();sessionStorage.setItem("authToken",e),localStorage.setItem(vf,t)},l2=()=>{if(Zu())return console.log(" Auth token invalidated due to backend change"),null;const t=sessionStorage.getItem("authToken");return console.log(" Getting auth token:",t?"Token exists":"No token found"),t},I5=()=>{const e=l2(),t=sessionStorage.getItem("user");return!!(e&&t)},$5=()=>{const e=Zu(),t=I5();return{isValid:!e&&t,backendChanged:e}},c2=g.createContext(null),R5=({children:e})=>{const[t,r]=g.useState(null),[n,a]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const c=$5();if(c.backendChanged){console.log(" Backend URL changed - requiring fresh login"),r(null),a(!1);return}const u=sessionStorage.getItem("user"),d=sessionStorage.getItem("authToken");if(!u||!d||!c.isValid){r(null),console.log("No valid session found - requiring login"),a(!1);return}const f=JSON.parse(u);if(f&&f.id&&f.name&&f.role){r(f),console.log("Session found - restoring user");try{const p=await fetch(`${mn()}/auth/validate`,{method:"GET",credentials:"include",headers:{Authorization:`Bearer ${d}`}});if(p.status===404)console.log("Session validation endpoint not available, using sessionStorage");else if(p.ok){const h=await p.json();r(h),sessionStorage.setItem("user",JSON.stringify(h))}else p.status===401||p.status===403?(console.log("Session validation failed with auth error, requiring fresh login"),console.log("Validation failed but keeping user logged in for now")):console.log("Session validation failed with server error, keeping user logged in")}catch(p){console.error("Session validation failed:",p),console.log("Network error during validation, keeping user logged in for page refresh")}}else console.log("Invalid user data format - clearing session"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),r(null)}catch(c){console.error("Error checking existing session:",c),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),r(null)}finally{a(!1)}})(),a2.initialize()},[]);const o=(l,c)=>{r(l),l?(sessionStorage.setItem("user",JSON.stringify(l)),c&&_5(c),console.log("User logged in - stored in sessionStorage with backend URL tracking")):(sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),console.log("User data cleared from sessionStorage"))},i=()=>{r(null),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),localStorage.removeItem("user"),console.log("User logged out explicitly")};return s.jsx(c2.Provider,{value:{currentUser:t,setCurrentUser:o,logout:i,isAuthenticated:!!t,isLoading:n},children:e})},Ai=()=>{const e=g.useContext(c2);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},dn={Printer:Zr,ChevronDown:JA,Search:zn,Edit2:xl,X:Dt,Eye:So,EyeOff:au},u2=()=>{const e=yt(),{currentUser:t,setCurrentUser:r}=Ai(),[n,a]=g.useState(!1),o=g.useRef(null);g.useEffect(()=>{const l=c=>{o.current&&!o.current.contains(c.target)&&a(!1)};return n&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[n]);const i=async()=>{try{await fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),r(null),e("/login")}catch(l){console.error("Logout error:",l),r(null),e("/login")}};return t?s.jsxs("div",{className:"relative",ref:o,children:[s.jsxs("button",{onClick:()=>a(!n),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:t.name.charAt(0).toUpperCase()})}),s.jsx("span",{className:"text-gray-700",children:t.name}),s.jsx(dn.ChevronDown,{className:"w-4 h-4 text-gray-500"})]}),n&&s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("div",{className:"px-4 py-2 text-sm text-gray-700",children:[s.jsx("div",{className:"font-medium",children:t.name}),s.jsx("div",{className:"text-gray-500",children:t.email})]}),s.jsx("hr",{className:"my-1"}),s.jsx("button",{onClick:()=>{e("/profile"),a(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Profile Settings"}),s.jsx("button",{onClick:i,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})})]}):null},D5=()=>{const{currentUser:e}=Ai(),t=yt(),r=Oo(),n=i=>{i.preventDefault();const l=localStorage.getItem("activeSaleId");l&&!r.pathname.includes(`/sales/${l}`)?t(`/sales/${l}/edit`):t("/sales")},a=[{icon:u5,label:"Dashboard",path:"/dashboard",roles:["ADMIN"]},{icon:y0,label:"POS",path:"/pos",roles:["ADMIN","USER"]},{icon:y0,label:"POS 2",path:"/pos2",roles:["ADMIN","USER"]},{icon:n2,label:"Retail POS",path:"/retail-pos",roles:["ADMIN","USER"]},{icon:Vh,label:"Sales",path:"/sales",roles:["ADMIN","USER"]},{icon:h5,label:"Held Sales",path:"/held-sales",roles:["ADMIN","USER"]}];(e==null?void 0:e.role)==="ADMIN"&&a.push({icon:sp,label:"Products",path:"/products",roles:["ADMIN"]},{icon:c5,label:"Categories",path:"/categories",roles:["ADMIN"]},{icon:v5,label:"Units",path:"/units",roles:["ADMIN"]},{icon:C5,label:"Customers",path:"/customers",roles:["ADMIN"]},{icon:P5,label:"Suppliers",path:"/suppliers",roles:["ADMIN"]},{icon:s5,label:"Purchases",path:"/purchases",roles:["ADMIN"]},{icon:n5,label:"Reports",path:"/reports",roles:["ADMIN"]},{icon:YA,label:"Date Report",path:"/reports/date",roles:["ADMIN"]},{icon:E5,label:"Users",path:"/users",roles:["ADMIN"]},{icon:w5,label:"Group Permissions",path:"/group-permissions",roles:["ADMIN"]},{icon:qh,label:"Debtors",path:"/debtors",roles:["ADMIN"]},{icon:t2,label:"Database",path:"/database",roles:["ADMIN"]},{icon:vb,label:"Settings",path:"/settings",roles:["ADMIN"]});const o=a.filter(i=>e!=null&&e.role?i.roles.includes(e.role):!1);return s.jsxs("div",{className:"w-64 bg-white shadow-lg flex flex-col h-screen",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:"/apexlink-logo.svg",alt:"Apexlink Logo",className:"w-8 h-8"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Apexlink POS"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsx("nav",{className:"mt-6",children:o.map(i=>s.jsx("div",{children:i.path==="/sales"?s.jsxs("button",{onClick:n,className:`w-full flex items-center px-6 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left ${r.pathname.startsWith("/sales")?"bg-gray-100 border-r-4 border-blue-500":""}`,children:[s.jsx(i.icon,{className:"w-5 h-5 mr-3"}),s.jsx("span",{children:i.label})]}):s.jsxs(ZM,{to:i.path,className:({isActive:l})=>`flex items-center px-6 py-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${l?"bg-gray-100 border-r-4 border-blue-500":""}`,children:[s.jsx(i.icon,{className:"w-5 h-5 mr-3"}),s.jsx("span",{children:i.label})]})},i.path))})}),e&&s.jsx("div",{className:"border-t p-4",children:s.jsx(u2,{})})]})},Pn=({children:e,allowedRoles:t,redirectPath:r="/pos"})=>{const{currentUser:n}=Ai(),a=Oo();return n&&t.includes(n.role)?s.jsx(s.Fragment,{children:e}):(n==null?void 0:n.role)==="USER"&&(["/pos","/pos2","/sales"].includes(a.pathname)||a.pathname.startsWith("/sales/"))?s.jsx(s.Fragment,{children:e}):s.jsx(Oc,{to:r,replace:!0})};let x0=!1;const xb=async()=>{if(x0)return io();console.log(" Initializing backend connection...");const e=await T5();return x0=!0,console.log(` Backend initialized: ${e}`),e},M5=()=>`${io()}/api`,bS=e=>{console.log(`Authentication failed from ${e}, redirecting to login...`),Zu()?(console.log(" Authentication failure due to backend change"),window.location.href="/login?reason=backend-change"):(console.log(" Regular authentication failure"),localStorage.removeItem("user"),sessionStorage.removeItem("authToken"),localStorage.removeItem("currentCustomer"),localStorage.removeItem("currentCustomerSearch"),window.location.href="/login")},me=async(e,t={})=>{x0||(console.warn("Backend not initialized - calling initializeBackend..."),await xb());let r;if(e.startsWith("http")?r=e:e.startsWith("/api/")?r=`${io()}${e}`:r=`${M5()}/${e.replace(/^\/+/,"")}`,Zu())throw console.log(" Backend change detected - authentication required"),bS("Backend URL change detected"),new Error("Backend changed - authentication required");const a=l2();console.log(" API Request Auth Debug:",{endpoint:r,hasToken:!!a,tokenLength:(a==null?void 0:a.length)||0,backendUrl:io()});const o={credentials:"include",headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},...t.headers||{}},...t};try{console.log(` API Request: ${o.method||"GET"} ${r}`);const i=await fetch(r,o);if(i.status===401)throw console.warn("Authentication failed - token may be expired or invalid"),bS("API request"),new Error("Authentication required");if(!i.ok){const l=await i.text().catch(()=>"Unknown error");throw console.error(`API Error ${i.status}:`,l),new Error(`API Error ${i.status}: ${l}`)}return i}catch(i){throw i instanceof TypeError&&i.message.includes("fetch")?(console.error(` Connection failed to ${io()}:`,i.message),new Error(`Cannot connect to server at ${io()}. Please check if the server is running.`)):i}},qi=async e=>me(e,{method:"GET"}),L5=()=>{console.log(" Clearing all authentication data for network backend..."),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("currentCustomer"),localStorage.removeItem("currentCustomerSearch"),localStorage.removeItem("currentCustomer2"),localStorage.removeItem("currentCustomerSearch2"),localStorage.setItem("lastBackendUrl","https://192.168.0.10:5443"),console.log(" Authentication data cleared. Please refresh and login again."),window.location.reload()};typeof window<"u"&&(window.clearAuthForNetworkBackend=L5);function d2(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=d2(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ge(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=d2(e))&&(n&&(n+=" "),n+=t);return n}var F5=Array.isArray,Lr=F5,U5=typeof pc=="object"&&pc&&pc.Object===Object&&pc,f2=U5,B5=f2,z5=typeof self=="object"&&self&&self.Object===Object&&self,q5=B5||z5||Function("return this")(),ca=q5,H5=ca,V5=H5.Symbol,Xu=V5,wS=Xu,p2=Object.prototype,W5=p2.hasOwnProperty,Q5=p2.toString,tc=wS?wS.toStringTag:void 0;function K5(e){var t=W5.call(e,tc),r=e[tc];try{e[tc]=void 0;var n=!0}catch{}var a=Q5.call(e);return n&&(t?e[tc]=r:delete e[tc]),a}var G5=K5,Z5=Object.prototype,X5=Z5.toString;function Y5(e){return X5.call(e)}var J5=Y5,SS=Xu,e3=G5,t3=J5,r3="[object Null]",n3="[object Undefined]",jS=SS?SS.toStringTag:void 0;function a3(e){return e==null?e===void 0?n3:r3:jS&&jS in Object(e)?e3(e):t3(e)}var qa=a3;function o3(e){return e!=null&&typeof e=="object"}var Ha=o3,i3=qa,s3=Ha,l3="[object Symbol]";function c3(e){return typeof e=="symbol"||s3(e)&&i3(e)==l3}var bl=c3,u3=Lr,d3=bl,f3=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p3=/^\w*$/;function h3(e,t){if(u3(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||d3(e)?!0:p3.test(e)||!f3.test(e)||t!=null&&e in Object(t)}var bb=h3;function m3(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var _o=m3;const wl=ot(_o);var g3=qa,y3=_o,v3="[object AsyncFunction]",x3="[object Function]",b3="[object GeneratorFunction]",w3="[object Proxy]";function S3(e){if(!y3(e))return!1;var t=g3(e);return t==x3||t==b3||t==v3||t==w3}var wb=S3;const ze=ot(wb);var j3=ca,N3=j3["__core-js_shared__"],k3=N3,Eg=k3,NS=function(){var e=/[^.]+$/.exec(Eg&&Eg.keys&&Eg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function P3(e){return!!NS&&NS in e}var E3=P3,C3=Function.prototype,A3=C3.toString;function T3(e){if(e!=null){try{return A3.call(e)}catch{}try{return e+""}catch{}}return""}var h2=T3,O3=wb,_3=E3,I3=_o,$3=h2,R3=/[\\^$.*+?()[\]{}|]/g,D3=/^\[object .+?Constructor\]$/,M3=Function.prototype,L3=Object.prototype,F3=M3.toString,U3=L3.hasOwnProperty,B3=RegExp("^"+F3.call(U3).replace(R3,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function z3(e){if(!I3(e)||_3(e))return!1;var t=O3(e)?B3:D3;return t.test($3(e))}var q3=z3;function H3(e,t){return e==null?void 0:e[t]}var V3=H3,W3=q3,Q3=V3;function K3(e,t){var r=Q3(e,t);return W3(r)?r:void 0}var Ti=K3,G3=Ti,Z3=G3(Object,"create"),Wh=Z3,kS=Wh;function X3(){this.__data__=kS?kS(null):{},this.size=0}var Y3=X3;function J3(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var eL=J3,tL=Wh,rL="__lodash_hash_undefined__",nL=Object.prototype,aL=nL.hasOwnProperty;function oL(e){var t=this.__data__;if(tL){var r=t[e];return r===rL?void 0:r}return aL.call(t,e)?t[e]:void 0}var iL=oL,sL=Wh,lL=Object.prototype,cL=lL.hasOwnProperty;function uL(e){var t=this.__data__;return sL?t[e]!==void 0:cL.call(t,e)}var dL=uL,fL=Wh,pL="__lodash_hash_undefined__";function hL(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=fL&&t===void 0?pL:t,this}var mL=hL,gL=Y3,yL=eL,vL=iL,xL=dL,bL=mL;function Sl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Sl.prototype.clear=gL;Sl.prototype.delete=yL;Sl.prototype.get=vL;Sl.prototype.has=xL;Sl.prototype.set=bL;var wL=Sl;function SL(){this.__data__=[],this.size=0}var jL=SL;function NL(e,t){return e===t||e!==e&&t!==t}var Sb=NL,kL=Sb;function PL(e,t){for(var r=e.length;r--;)if(kL(e[r][0],t))return r;return-1}var Qh=PL,EL=Qh,CL=Array.prototype,AL=CL.splice;function TL(e){var t=this.__data__,r=EL(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():AL.call(t,r,1),--this.size,!0}var OL=TL,_L=Qh;function IL(e){var t=this.__data__,r=_L(t,e);return r<0?void 0:t[r][1]}var $L=IL,RL=Qh;function DL(e){return RL(this.__data__,e)>-1}var ML=DL,LL=Qh;function FL(e,t){var r=this.__data__,n=LL(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var UL=FL,BL=jL,zL=OL,qL=$L,HL=ML,VL=UL;function jl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}jl.prototype.clear=BL;jl.prototype.delete=zL;jl.prototype.get=qL;jl.prototype.has=HL;jl.prototype.set=VL;var Kh=jl,WL=Ti,QL=ca,KL=WL(QL,"Map"),jb=KL,PS=wL,GL=Kh,ZL=jb;function XL(){this.size=0,this.__data__={hash:new PS,map:new(ZL||GL),string:new PS}}var YL=XL;function JL(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var e6=JL,t6=e6;function r6(e,t){var r=e.__data__;return t6(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Gh=r6,n6=Gh;function a6(e){var t=n6(this,e).delete(e);return this.size-=t?1:0,t}var o6=a6,i6=Gh;function s6(e){return i6(this,e).get(e)}var l6=s6,c6=Gh;function u6(e){return c6(this,e).has(e)}var d6=u6,f6=Gh;function p6(e,t){var r=f6(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var h6=p6,m6=YL,g6=o6,y6=l6,v6=d6,x6=h6;function Nl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Nl.prototype.clear=m6;Nl.prototype.delete=g6;Nl.prototype.get=y6;Nl.prototype.has=v6;Nl.prototype.set=x6;var Nb=Nl,m2=Nb,b6="Expected a function";function kb(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(b6);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=e.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(kb.Cache||m2),r}kb.Cache=m2;var g2=kb;const w6=ot(g2);var S6=g2,j6=500;function N6(e){var t=S6(e,function(n){return r.size===j6&&r.clear(),n}),r=t.cache;return t}var k6=N6,P6=k6,E6=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C6=/\\(\\)?/g,A6=P6(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(E6,function(r,n,a,o){t.push(a?o.replace(C6,"$1"):n||r)}),t}),T6=A6;function O6(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Pb=O6,ES=Xu,_6=Pb,I6=Lr,$6=bl,R6=1/0,CS=ES?ES.prototype:void 0,AS=CS?CS.toString:void 0;function y2(e){if(typeof e=="string")return e;if(I6(e))return _6(e,y2)+"";if($6(e))return AS?AS.call(e):"";var t=e+"";return t=="0"&&1/e==-R6?"-0":t}var D6=y2,M6=D6;function L6(e){return e==null?"":M6(e)}var v2=L6,F6=Lr,U6=bb,B6=T6,z6=v2;function q6(e,t){return F6(e)?e:U6(e,t)?[e]:B6(z6(e))}var x2=q6,H6=bl,V6=1/0;function W6(e){if(typeof e=="string"||H6(e))return e;var t=e+"";return t=="0"&&1/e==-V6?"-0":t}var Zh=W6,Q6=x2,K6=Zh;function G6(e,t){t=Q6(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[K6(t[r++])];return r&&r==n?e:void 0}var Eb=G6,Z6=Eb;function X6(e,t,r){var n=e==null?void 0:Z6(e,t);return n===void 0?r:n}var b2=X6;const Yr=ot(b2);function Y6(e){return e==null}var J6=Y6;const Qe=ot(J6);var eF=qa,tF=Lr,rF=Ha,nF="[object String]";function aF(e){return typeof e=="string"||!tF(e)&&rF(e)&&eF(e)==nF}var oF=aF;const Yu=ot(oF);var w2={exports:{}},pt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb=Symbol.for("react.element"),Ab=Symbol.for("react.portal"),Xh=Symbol.for("react.fragment"),Yh=Symbol.for("react.strict_mode"),Jh=Symbol.for("react.profiler"),em=Symbol.for("react.provider"),tm=Symbol.for("react.context"),iF=Symbol.for("react.server_context"),rm=Symbol.for("react.forward_ref"),nm=Symbol.for("react.suspense"),am=Symbol.for("react.suspense_list"),om=Symbol.for("react.memo"),im=Symbol.for("react.lazy"),sF=Symbol.for("react.offscreen"),S2;S2=Symbol.for("react.module.reference");function jn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Cb:switch(e=e.type,e){case Xh:case Jh:case Yh:case nm:case am:return e;default:switch(e=e&&e.$$typeof,e){case iF:case tm:case rm:case im:case om:case em:return e;default:return t}}case Ab:return t}}}pt.ContextConsumer=tm;pt.ContextProvider=em;pt.Element=Cb;pt.ForwardRef=rm;pt.Fragment=Xh;pt.Lazy=im;pt.Memo=om;pt.Portal=Ab;pt.Profiler=Jh;pt.StrictMode=Yh;pt.Suspense=nm;pt.SuspenseList=am;pt.isAsyncMode=function(){return!1};pt.isConcurrentMode=function(){return!1};pt.isContextConsumer=function(e){return jn(e)===tm};pt.isContextProvider=function(e){return jn(e)===em};pt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cb};pt.isForwardRef=function(e){return jn(e)===rm};pt.isFragment=function(e){return jn(e)===Xh};pt.isLazy=function(e){return jn(e)===im};pt.isMemo=function(e){return jn(e)===om};pt.isPortal=function(e){return jn(e)===Ab};pt.isProfiler=function(e){return jn(e)===Jh};pt.isStrictMode=function(e){return jn(e)===Yh};pt.isSuspense=function(e){return jn(e)===nm};pt.isSuspenseList=function(e){return jn(e)===am};pt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Xh||e===Jh||e===Yh||e===nm||e===am||e===sF||typeof e=="object"&&e!==null&&(e.$$typeof===im||e.$$typeof===om||e.$$typeof===em||e.$$typeof===tm||e.$$typeof===rm||e.$$typeof===S2||e.getModuleId!==void 0)};pt.typeOf=jn;w2.exports=pt;var lF=w2.exports,cF=qa,uF=Ha,dF="[object Number]";function fF(e){return typeof e=="number"||uF(e)&&cF(e)==dF}var j2=fF;const pF=ot(j2);var hF=j2;function mF(e){return hF(e)&&e!=+e}var gF=mF;const Ju=ot(gF);var jr=function(t){return t===0?0:t>0?1:-1},ei=function(t){return Yu(t)&&t.indexOf("%")===t.length-1},Pe=function(t){return pF(t)&&!Ju(t)},Yt=function(t){return Pe(t)||Yu(t)},yF=0,kl=function(t){var r=++yF;return"".concat(t||"").concat(r)},Nr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pe(t)&&!Yu(t))return n;var o;if(ei(t)){var i=t.indexOf("%");o=r*parseFloat(t.slice(0,i))/100}else o=+t;return Ju(o)&&(o=n),a&&o>r&&(o=r),o},ro=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},vF=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Wr=function(t,r){return Pe(t)&&Pe(r)?function(n){return t+n*(r-t)}:function(){return r}};function cp(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Yr(n,t))===r})}function Es(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function b0(e){"@babel/helpers - typeof";return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b0(e)}var xF=["viewBox","children"],bF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],TS=["points","pathLength"],Cg={svg:xF,polygon:TS,polyline:TS},Tb=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],up=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(g.isValidElement(t)&&(n=t.props),!wl(n))return null;var a={};return Object.keys(n).forEach(function(o){Tb.includes(o)&&(a[o]=r||function(i){return n[o](n,i)})}),a},wF=function(t,r,n){return function(a){return t(r,n,a),null}},yi=function(t,r,n){if(!wl(t)||b0(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(o){var i=t[o];Tb.includes(o)&&typeof i=="function"&&(a||(a={}),a[o]=wF(i,r,n))}),a},SF=["children"],jF=["children"];function OS(e,t){if(e==null)return{};var r=NF(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function w0(e){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w0(e)}var _S={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Na=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},IS=null,Ag=null,Ob=function e(t){if(t===IS&&Array.isArray(Ag))return Ag;var r=[];return g.Children.forEach(t,function(n){Qe(n)||(lF.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Ag=r,IS=t,r};function Jr(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return Na(a)}):n=[Na(t)],Ob(e).forEach(function(a){var o=Yr(a,"type.displayName")||Yr(a,"type.name");n.indexOf(o)!==-1&&r.push(a)}),r}function Hr(e,t){var r=Jr(e,t);return r&&r[0]}var $S=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Pe(n)||n<=0||!Pe(a)||a<=0)},kF=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],PF=function(t){return t&&t.type&&Yu(t.type)&&kF.indexOf(t.type)>=0},EF=function(t){return t&&w0(t)==="object"&&"clipDot"in t},CF=function(t,r,n,a){var o,i=(o=Cg==null?void 0:Cg[a])!==null&&o!==void 0?o:[];return!ze(t)&&(a&&i.includes(r)||bF.includes(r))||n&&Tb.includes(r)},Fe=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(g.isValidElement(t)&&(a=t.props),!wl(a))return null;var o={};return Object.keys(a).forEach(function(i){var l;CF((l=a)===null||l===void 0?void 0:l[i],i,r,n)&&(o[i]=a[i])}),o},S0=function e(t,r){if(t===r)return!0;var n=g.Children.count(t);if(n!==g.Children.count(r))return!1;if(n===0)return!0;if(n===1)return RS(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var o=t[a],i=r[a];if(Array.isArray(o)||Array.isArray(i)){if(!e(o,i))return!1}else if(!RS(o,i))return!1}return!0},RS=function(t,r){if(Qe(t)&&Qe(r))return!0;if(!Qe(t)&&!Qe(r)){var n=t.props||{},a=n.children,o=OS(n,SF),i=r.props||{},l=i.children,c=OS(i,jF);return a&&l?Es(o,c)&&S0(a,l):!a&&!l?Es(o,c):!1}return!1},DS=function(t,r){var n=[],a={};return Ob(t).forEach(function(o,i){if(PF(o))n.push(o);else if(o){var l=Na(o.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(o,l,i);n.push(f),a[l]=!0}}}),n},AF=function(t){var r=t&&t.type;return r&&_S[r]?_S[r]:null},TF=function(t,r){return Ob(r).indexOf(t)},OF=["children","width","height","viewBox","className","style","title","desc"];function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(this,arguments)}function _F(e,t){if(e==null)return{};var r=IF(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function IF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function N0(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,o=e.className,i=e.style,l=e.title,c=e.desc,u=_F(e,OF),d=a||{width:r,height:n,x:0,y:0},f=Ge("recharts-surface",o);return B.createElement("svg",j0({},Fe(u,!0,"svg"),{className:f,width:r,height:n,style:i,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),B.createElement("title",null,l),B.createElement("desc",null,c),t)}var $F=["children","className"];function k0(){return k0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k0.apply(this,arguments)}function RF(e,t){if(e==null)return{};var r=DF(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function DF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var nt=B.forwardRef(function(e,t){var r=e.children,n=e.className,a=RF(e,$F),o=Ge("recharts-layer",n);return B.createElement("g",k0({className:o},Fe(a,!0),{ref:t}),r)}),Ln=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o]};function MF(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(a);++n<a;)o[n]=e[n+t];return o}var LF=MF,FF=LF;function UF(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:FF(e,t,r)}var BF=UF,zF="\\ud800-\\udfff",qF="\\u0300-\\u036f",HF="\\ufe20-\\ufe2f",VF="\\u20d0-\\u20ff",WF=qF+HF+VF,QF="\\ufe0e\\ufe0f",KF="\\u200d",GF=RegExp("["+KF+zF+WF+QF+"]");function ZF(e){return GF.test(e)}var N2=ZF;function XF(e){return e.split("")}var YF=XF,k2="\\ud800-\\udfff",JF="\\u0300-\\u036f",eU="\\ufe20-\\ufe2f",tU="\\u20d0-\\u20ff",rU=JF+eU+tU,nU="\\ufe0e\\ufe0f",aU="["+k2+"]",P0="["+rU+"]",E0="\\ud83c[\\udffb-\\udfff]",oU="(?:"+P0+"|"+E0+")",P2="[^"+k2+"]",E2="(?:\\ud83c[\\udde6-\\uddff]){2}",C2="[\\ud800-\\udbff][\\udc00-\\udfff]",iU="\\u200d",A2=oU+"?",T2="["+nU+"]?",sU="(?:"+iU+"(?:"+[P2,E2,C2].join("|")+")"+T2+A2+")*",lU=T2+A2+sU,cU="(?:"+[P2+P0+"?",P0,E2,C2,aU].join("|")+")",uU=RegExp(E0+"(?="+E0+")|"+cU+lU,"g");function dU(e){return e.match(uU)||[]}var fU=dU,pU=YF,hU=N2,mU=fU;function gU(e){return hU(e)?mU(e):pU(e)}var yU=gU,vU=BF,xU=N2,bU=yU,wU=v2;function SU(e){return function(t){t=wU(t);var r=xU(t)?bU(t):void 0,n=r?r[0]:t.charAt(0),a=r?vU(r,1).join(""):t.slice(1);return n[e]()+a}}var jU=SU,NU=jU,kU=NU("toUpperCase"),PU=kU;const sm=ot(PU);function xt(e){return function(){return e}}const O2=Math.cos,dp=Math.sin,qn=Math.sqrt,fp=Math.PI,lm=2*fp,C0=Math.PI,A0=2*C0,Wo=1e-6,EU=A0-Wo;function _2(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function CU(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return _2;const r=10**t;return function(n){this._+=n[0];for(let a=1,o=n.length;a<o;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class AU{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?_2:CU(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,o,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+o},${this._y1=+i}`}arcTo(t,r,n,a,o){if(t=+t,r=+r,n=+n,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,l=this._y1,c=n-t,u=a-r,d=i-t,f=l-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Wo)if(!(Math.abs(f*c-u*d)>Wo)||!o)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-i,y=a-l,m=c*c+u*u,x=h*h+y*y,w=Math.sqrt(m),v=Math.sqrt(p),b=o*Math.tan((C0-Math.acos((m+p-x)/(2*w*v)))/2),j=b/v,S=b/w;Math.abs(j-1)>Wo&&this._append`L${t+j*d},${r+j*f}`,this._append`A${o},${o},0,0,${+(f*h>d*y)},${this._x1=t+S*c},${this._y1=r+S*u}`}}arc(t,r,n,a,o,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^i,p=i?a-o:o-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Wo||Math.abs(this._y1-d)>Wo)&&this._append`L${u},${d}`,n&&(p<0&&(p=p%A0+A0),p>EU?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:p>Wo&&this._append`A${n},${n},0,${+(p>=C0)},${f},${this._x1=t+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function _b(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new AU(t)}function Ib(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function I2(e){this._context=e}I2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function cm(e){return new I2(e)}function $2(e){return e[0]}function R2(e){return e[1]}function D2(e,t){var r=xt(!0),n=null,a=cm,o=null,i=_b(l);e=typeof e=="function"?e:e===void 0?$2:xt(e),t=typeof t=="function"?t:t===void 0?R2:xt(t);function l(c){var u,d=(c=Ib(c)).length,f,p=!1,h;for(n==null&&(o=a(h=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(f,u,c),+t(f,u,c));if(h)return o=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:xt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:xt(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:xt(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(o=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=o=null:o=a(n=c),l):n},l}function Rd(e,t,r){var n=null,a=xt(!0),o=null,i=cm,l=null,c=_b(u);e=typeof e=="function"?e:e===void 0?$2:xt(+e),t=typeof t=="function"?t:xt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?R2:xt(+r);function u(f){var p,h,y,m=(f=Ib(f)).length,x,w=!1,v,b=new Array(m),j=new Array(m);for(o==null&&(l=i(v=c())),p=0;p<=m;++p){if(!(p<m&&a(x=f[p],p,f))===w)if(w=!w)h=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=p-1;y>=h;--y)l.point(b[y],j[y]);l.lineEnd(),l.areaEnd()}w&&(b[p]=+e(x,p,f),j[p]=+t(x,p,f),l.point(n?+n(x,p,f):b[p],r?+r(x,p,f):j[p]))}if(v)return l=null,v+""||null}function d(){return D2().defined(a).curve(i).context(o)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:xt(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:xt(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:xt(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:xt(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:xt(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:xt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:xt(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,o!=null&&(l=i(o)),u):i},u.context=function(f){return arguments.length?(f==null?o=l=null:l=i(o=f),u):o},u}class M2{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function TU(e){return new M2(e,!0)}function OU(e){return new M2(e,!1)}const $b={draw(e,t){const r=qn(t/fp);e.moveTo(r,0),e.arc(0,0,r,0,lm)}},_U={draw(e,t){const r=qn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},L2=qn(1/3),IU=L2*2,$U={draw(e,t){const r=qn(t/IU),n=r*L2;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},RU={draw(e,t){const r=qn(t),n=-r/2;e.rect(n,n,r,r)}},DU=.8908130915292852,F2=dp(fp/10)/dp(7*fp/10),MU=dp(lm/10)*F2,LU=-O2(lm/10)*F2,FU={draw(e,t){const r=qn(t*DU),n=MU*r,a=LU*r;e.moveTo(0,-r),e.lineTo(n,a);for(let o=1;o<5;++o){const i=lm*o/5,l=O2(i),c=dp(i);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},Tg=qn(3),UU={draw(e,t){const r=-qn(t/(Tg*3));e.moveTo(0,r*2),e.lineTo(-Tg*r,-r),e.lineTo(Tg*r,-r),e.closePath()}},ln=-.5,cn=qn(3)/2,T0=1/qn(12),BU=(T0/2+1)*3,zU={draw(e,t){const r=qn(t/BU),n=r/2,a=r*T0,o=n,i=r*T0+r,l=-o,c=i;e.moveTo(n,a),e.lineTo(o,i),e.lineTo(l,c),e.lineTo(ln*n-cn*a,cn*n+ln*a),e.lineTo(ln*o-cn*i,cn*o+ln*i),e.lineTo(ln*l-cn*c,cn*l+ln*c),e.lineTo(ln*n+cn*a,ln*a-cn*n),e.lineTo(ln*o+cn*i,ln*i-cn*o),e.lineTo(ln*l+cn*c,ln*c-cn*l),e.closePath()}};function qU(e,t){let r=null,n=_b(a);e=typeof e=="function"?e:xt(e||$b),t=typeof t=="function"?t:xt(t===void 0?64:+t);function a(){let o;if(r||(r=o=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),o)return r=null,o+""||null}return a.type=function(o){return arguments.length?(e=typeof o=="function"?o:xt(o),a):e},a.size=function(o){return arguments.length?(t=typeof o=="function"?o:xt(+o),a):t},a.context=function(o){return arguments.length?(r=o??null,a):r},a}function pp(){}function hp(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function U2(e){this._context=e}U2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HU(e){return new U2(e)}function B2(e){this._context=e}B2.prototype={areaStart:pp,areaEnd:pp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:hp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function VU(e){return new B2(e)}function z2(e){this._context=e}z2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:hp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function WU(e){return new z2(e)}function q2(e){this._context=e}q2.prototype={areaStart:pp,areaEnd:pp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function QU(e){return new q2(e)}function MS(e){return e<0?-1:1}function LS(e,t,r){var n=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),l=(o*a+i*n)/(n+a);return(MS(o)+MS(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(l))||0}function FS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Og(e,t,r){var n=e._x0,a=e._y0,o=e._x1,i=e._y1,l=(o-n)/3;e._context.bezierCurveTo(n+l,a+l*t,o-l,i-l*r,o,i)}function mp(e){this._context=e}mp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Og(this,this._t0,FS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Og(this,FS(this,r=LS(this,e,t)),r);break;default:Og(this,this._t0,r=LS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function H2(e){this._context=new V2(e)}(H2.prototype=Object.create(mp.prototype)).point=function(e,t){mp.prototype.point.call(this,t,e)};function V2(e){this._context=e}V2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,o){this._context.bezierCurveTo(t,e,n,r,o,a)}};function KU(e){return new mp(e)}function GU(e){return new H2(e)}function W2(e){this._context=e}W2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=US(e),a=US(t),o=0,i=1;i<r;++o,++i)this._context.bezierCurveTo(n[0][o],a[0][o],n[1][o],a[1][o],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function US(e){var t,r=e.length-1,n,a=new Array(r),o=new Array(r),i=new Array(r);for(a[0]=0,o[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,o[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/o[t-1],o[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/o[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/o[t];for(o[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function ZU(e){return new W2(e)}function um(e,t){this._context=e,this._t=t}um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function XU(e){return new um(e,.5)}function YU(e){return new um(e,0)}function JU(e){return new um(e,1)}function Bs(e,t){if((i=e.length)>1)for(var r=1,n,a,o=e[t[0]],i,l=o.length;r<i;++r)for(a=o,o=e[t[r]],n=0;n<l;++n)o[n][1]+=o[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function O0(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function eB(e,t){return e[t]}function tB(e){const t=[];return t.key=e,t}function rB(){var e=xt([]),t=O0,r=Bs,n=eB;function a(o){var i=Array.from(e.apply(this,arguments),tB),l,c=i.length,u=-1,d;for(const f of o)for(l=0,++u;l<c;++l)(i[l][u]=[0,+n(f,i[l].key,u,o)]).data=f;for(l=0,d=Ib(t(i));l<c;++l)i[d[l]].index=l;return r(i,d),i}return a.keys=function(o){return arguments.length?(e=typeof o=="function"?o:xt(Array.from(o)),a):e},a.value=function(o){return arguments.length?(n=typeof o=="function"?o:xt(+o),a):n},a.order=function(o){return arguments.length?(t=o==null?O0:typeof o=="function"?o:xt(Array.from(o)),a):t},a.offset=function(o){return arguments.length?(r=o??Bs,a):r},a}function nB(e,t){if((n=e.length)>0){for(var r,n,a=0,o=e[0].length,i;a<o;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}Bs(e,t)}}function aB(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,o=n.length;r<o;++r){for(var i=0,l=0;i<a;++i)l+=e[i][r][1]||0;n[r][1]+=n[r][0]=-l/2}Bs(e,t)}}function oB(e,t){if(!(!((i=e.length)>0)||!((o=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,o,i;n<o;++n){for(var l=0,c=0,u=0;l<i;++l){for(var d=e[t[l]],f=d[n][1]||0,p=d[n-1][1]||0,h=(f-p)/2,y=0;y<l;++y){var m=e[t[y]],x=m[n][1]||0,w=m[n-1][1]||0;h+=x-w}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Bs(e,t)}}function iu(e){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(e)}var iB=["type","size","sizeType"];function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_0.apply(this,arguments)}function BS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BS(Object(r),!0).forEach(function(n){sB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sB(e,t,r){return t=lB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lB(e){var t=cB(e,"string");return iu(t)=="symbol"?t:t+""}function cB(e,t){if(iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uB(e,t){if(e==null)return{};var r=dB(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dB(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Q2={symbolCircle:$b,symbolCross:_U,symbolDiamond:$U,symbolSquare:RU,symbolStar:FU,symbolTriangle:UU,symbolWye:zU},fB=Math.PI/180,pB=function(t){var r="symbol".concat(sm(t));return Q2[r]||$b},hB=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*fB;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},mB=function(t,r){Q2["symbol".concat(sm(t))]=r},Rb=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,o=a===void 0?64:a,i=t.sizeType,l=i===void 0?"area":i,c=uB(t,iB),u=zS(zS({},c),{},{type:n,size:o,sizeType:l}),d=function(){var x=pB(n),w=qU().type(x).size(hB(o,l,n));return w()},f=u.className,p=u.cx,h=u.cy,y=Fe(u,!0);return p===+p&&h===+h&&o===+o?B.createElement("path",_0({},y,{className:Ge("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(h,")"),d:d()})):null};Rb.registerSymbol=mB;function zs(e){"@babel/helpers - typeof";return zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(e)}function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I0.apply(this,arguments)}function qS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qS(Object(r),!0).forEach(function(n){su(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,G2(n.key),n)}}function xB(e,t,r){return t&&vB(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bB(e,t,r){return t=gp(t),wB(e,K2()?Reflect.construct(t,r||[],gp(e).constructor):t.apply(e,r))}function wB(e,t){if(t&&(zs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SB(e)}function SB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K2=function(){return!!e})()}function gp(e){return gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gp(e)}function jB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$0(e,t)}function $0(e,t){return $0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$0(e,t)}function su(e,t,r){return t=G2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G2(e){var t=NB(e,"string");return zs(t)=="symbol"?t:t+""}function NB(e,t){if(zs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var un=32,Db=function(e){function t(){return yB(this,t),bB(this,t,arguments)}return jB(t,e),xB(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,o=un/2,i=un/6,l=un/3,c=n.inactive?a:n.color;if(n.type==="plainline")return B.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:un,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return B.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(o,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(o,`
            H`).concat(un,"M").concat(2*l,",").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return B.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(un/8,"h").concat(un,"v").concat(un*3/4,"h").concat(-un,"z"),className:"recharts-legend-icon"});if(B.isValidElement(n.legendIcon)){var u=gB({},n);return delete u.legendIcon,B.cloneElement(n.legendIcon,u)}return B.createElement(Rb,{fill:c,cx:o,cy:o,size:un,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,o=a.payload,i=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:un,height:un},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(h,y){var m=h.formatter||c,x=Ge(su(su({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",h.inactive));if(h.type==="none")return null;var w=ze(h.value)?null:h.value;Ln(!ze(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=h.inactive?u:h.color;return B.createElement("li",I0({className:x,style:f,key:"legend-item-".concat(y)},yi(n.props,h,y)),B.createElement(N0,{width:i,height:i,viewBox:d,style:p},n.renderIcon(h)),B.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(w,h,y):w))})}},{key:"render",value:function(){var n=this.props,a=n.payload,o=n.layout,i=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:o==="horizontal"?i:"left"};return B.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(g.PureComponent);su(Db,"displayName","Legend");su(Db,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var kB=Kh;function PB(){this.__data__=new kB,this.size=0}var EB=PB;function CB(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var AB=CB;function TB(e){return this.__data__.get(e)}var OB=TB;function _B(e){return this.__data__.has(e)}var IB=_B,$B=Kh,RB=jb,DB=Nb,MB=200;function LB(e,t){var r=this.__data__;if(r instanceof $B){var n=r.__data__;if(!RB||n.length<MB-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new DB(n)}return r.set(e,t),this.size=r.size,this}var FB=LB,UB=Kh,BB=EB,zB=AB,qB=OB,HB=IB,VB=FB;function Pl(e){var t=this.__data__=new UB(e);this.size=t.size}Pl.prototype.clear=BB;Pl.prototype.delete=zB;Pl.prototype.get=qB;Pl.prototype.has=HB;Pl.prototype.set=VB;var Z2=Pl,WB="__lodash_hash_undefined__";function QB(e){return this.__data__.set(e,WB),this}var KB=QB;function GB(e){return this.__data__.has(e)}var ZB=GB,XB=Nb,YB=KB,JB=ZB;function yp(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new XB;++t<r;)this.add(e[t])}yp.prototype.add=yp.prototype.push=YB;yp.prototype.has=JB;var X2=yp;function e8(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Y2=e8;function t8(e,t){return e.has(t)}var J2=t8,r8=X2,n8=Y2,a8=J2,o8=1,i8=2;function s8(e,t,r,n,a,o){var i=r&o8,l=e.length,c=t.length;if(l!=c&&!(i&&c>l))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var f=-1,p=!0,h=r&i8?new r8:void 0;for(o.set(e,t),o.set(t,e);++f<l;){var y=e[f],m=t[f];if(n)var x=i?n(m,y,f,t,e,o):n(y,m,f,e,t,o);if(x!==void 0){if(x)continue;p=!1;break}if(h){if(!n8(t,function(w,v){if(!a8(h,v)&&(y===w||a(y,w,r,n,o)))return h.push(v)})){p=!1;break}}else if(!(y===m||a(y,m,r,n,o))){p=!1;break}}return o.delete(e),o.delete(t),p}var eT=s8,l8=ca,c8=l8.Uint8Array,u8=c8;function d8(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var f8=d8;function p8(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Mb=p8,HS=Xu,VS=u8,h8=Sb,m8=eT,g8=f8,y8=Mb,v8=1,x8=2,b8="[object Boolean]",w8="[object Date]",S8="[object Error]",j8="[object Map]",N8="[object Number]",k8="[object RegExp]",P8="[object Set]",E8="[object String]",C8="[object Symbol]",A8="[object ArrayBuffer]",T8="[object DataView]",WS=HS?HS.prototype:void 0,_g=WS?WS.valueOf:void 0;function O8(e,t,r,n,a,o,i){switch(r){case T8:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case A8:return!(e.byteLength!=t.byteLength||!o(new VS(e),new VS(t)));case b8:case w8:case N8:return h8(+e,+t);case S8:return e.name==t.name&&e.message==t.message;case k8:case E8:return e==t+"";case j8:var l=g8;case P8:var c=n&v8;if(l||(l=y8),e.size!=t.size&&!c)return!1;var u=i.get(e);if(u)return u==t;n|=x8,i.set(e,t);var d=m8(l(e),l(t),n,a,o,i);return i.delete(e),d;case C8:if(_g)return _g.call(e)==_g.call(t)}return!1}var _8=O8;function I8(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var tT=I8,$8=tT,R8=Lr;function D8(e,t,r){var n=t(e);return R8(e)?n:$8(n,r(e))}var M8=D8;function L8(e,t){for(var r=-1,n=e==null?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[a++]=i)}return o}var F8=L8;function U8(){return[]}var B8=U8,z8=F8,q8=B8,H8=Object.prototype,V8=H8.propertyIsEnumerable,QS=Object.getOwnPropertySymbols,W8=QS?function(e){return e==null?[]:(e=Object(e),z8(QS(e),function(t){return V8.call(e,t)}))}:q8,Q8=W8;function K8(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var G8=K8,Z8=qa,X8=Ha,Y8="[object Arguments]";function J8(e){return X8(e)&&Z8(e)==Y8}var ez=J8,KS=ez,tz=Ha,rT=Object.prototype,rz=rT.hasOwnProperty,nz=rT.propertyIsEnumerable,az=KS(function(){return arguments}())?KS:function(e){return tz(e)&&rz.call(e,"callee")&&!nz.call(e,"callee")},Lb=az,vp={exports:{}};function oz(){return!1}var iz=oz;vp.exports;(function(e,t){var r=ca,n=iz,a=t&&!t.nodeType&&t,o=a&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===a,l=i?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(vp,vp.exports);var nT=vp.exports,sz=9007199254740991,lz=/^(?:0|[1-9]\d*)$/;function cz(e,t){var r=typeof e;return t=t??sz,!!t&&(r=="number"||r!="symbol"&&lz.test(e))&&e>-1&&e%1==0&&e<t}var Fb=cz,uz=9007199254740991;function dz(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=uz}var Ub=dz,fz=qa,pz=Ub,hz=Ha,mz="[object Arguments]",gz="[object Array]",yz="[object Boolean]",vz="[object Date]",xz="[object Error]",bz="[object Function]",wz="[object Map]",Sz="[object Number]",jz="[object Object]",Nz="[object RegExp]",kz="[object Set]",Pz="[object String]",Ez="[object WeakMap]",Cz="[object ArrayBuffer]",Az="[object DataView]",Tz="[object Float32Array]",Oz="[object Float64Array]",_z="[object Int8Array]",Iz="[object Int16Array]",$z="[object Int32Array]",Rz="[object Uint8Array]",Dz="[object Uint8ClampedArray]",Mz="[object Uint16Array]",Lz="[object Uint32Array]",jt={};jt[Tz]=jt[Oz]=jt[_z]=jt[Iz]=jt[$z]=jt[Rz]=jt[Dz]=jt[Mz]=jt[Lz]=!0;jt[mz]=jt[gz]=jt[Cz]=jt[yz]=jt[Az]=jt[vz]=jt[xz]=jt[bz]=jt[wz]=jt[Sz]=jt[jz]=jt[Nz]=jt[kz]=jt[Pz]=jt[Ez]=!1;function Fz(e){return hz(e)&&pz(e.length)&&!!jt[fz(e)]}var Uz=Fz;function Bz(e){return function(t){return e(t)}}var aT=Bz,xp={exports:{}};xp.exports;(function(e,t){var r=f2,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===n,i=o&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();e.exports=l})(xp,xp.exports);var zz=xp.exports,qz=Uz,Hz=aT,GS=zz,ZS=GS&&GS.isTypedArray,Vz=ZS?Hz(ZS):qz,oT=Vz,Wz=G8,Qz=Lb,Kz=Lr,Gz=nT,Zz=Fb,Xz=oT,Yz=Object.prototype,Jz=Yz.hasOwnProperty;function eq(e,t){var r=Kz(e),n=!r&&Qz(e),a=!r&&!n&&Gz(e),o=!r&&!n&&!a&&Xz(e),i=r||n||a||o,l=i?Wz(e.length,String):[],c=l.length;for(var u in e)(t||Jz.call(e,u))&&!(i&&(u=="length"||a&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Zz(u,c)))&&l.push(u);return l}var tq=eq,rq=Object.prototype;function nq(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||rq;return e===r}var aq=nq;function oq(e,t){return function(r){return e(t(r))}}var iT=oq,iq=iT,sq=iq(Object.keys,Object),lq=sq,cq=aq,uq=lq,dq=Object.prototype,fq=dq.hasOwnProperty;function pq(e){if(!cq(e))return uq(e);var t=[];for(var r in Object(e))fq.call(e,r)&&r!="constructor"&&t.push(r);return t}var hq=pq,mq=wb,gq=Ub;function yq(e){return e!=null&&gq(e.length)&&!mq(e)}var ed=yq,vq=tq,xq=hq,bq=ed;function wq(e){return bq(e)?vq(e):xq(e)}var dm=wq,Sq=M8,jq=Q8,Nq=dm;function kq(e){return Sq(e,Nq,jq)}var Pq=kq,XS=Pq,Eq=1,Cq=Object.prototype,Aq=Cq.hasOwnProperty;function Tq(e,t,r,n,a,o){var i=r&Eq,l=XS(e),c=l.length,u=XS(t),d=u.length;if(c!=d&&!i)return!1;for(var f=c;f--;){var p=l[f];if(!(i?p in t:Aq.call(t,p)))return!1}var h=o.get(e),y=o.get(t);if(h&&y)return h==t&&y==e;var m=!0;o.set(e,t),o.set(t,e);for(var x=i;++f<c;){p=l[f];var w=e[p],v=t[p];if(n)var b=i?n(v,w,p,t,e,o):n(w,v,p,e,t,o);if(!(b===void 0?w===v||a(w,v,r,n,o):b)){m=!1;break}x||(x=p=="constructor")}if(m&&!x){var j=e.constructor,S=t.constructor;j!=S&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof S=="function"&&S instanceof S)&&(m=!1)}return o.delete(e),o.delete(t),m}var Oq=Tq,_q=Ti,Iq=ca,$q=_q(Iq,"DataView"),Rq=$q,Dq=Ti,Mq=ca,Lq=Dq(Mq,"Promise"),Fq=Lq,Uq=Ti,Bq=ca,zq=Uq(Bq,"Set"),sT=zq,qq=Ti,Hq=ca,Vq=qq(Hq,"WeakMap"),Wq=Vq,R0=Rq,D0=jb,M0=Fq,L0=sT,F0=Wq,lT=qa,El=h2,YS="[object Map]",Qq="[object Object]",JS="[object Promise]",ej="[object Set]",tj="[object WeakMap]",rj="[object DataView]",Kq=El(R0),Gq=El(D0),Zq=El(M0),Xq=El(L0),Yq=El(F0),Qo=lT;(R0&&Qo(new R0(new ArrayBuffer(1)))!=rj||D0&&Qo(new D0)!=YS||M0&&Qo(M0.resolve())!=JS||L0&&Qo(new L0)!=ej||F0&&Qo(new F0)!=tj)&&(Qo=function(e){var t=lT(e),r=t==Qq?e.constructor:void 0,n=r?El(r):"";if(n)switch(n){case Kq:return rj;case Gq:return YS;case Zq:return JS;case Xq:return ej;case Yq:return tj}return t});var Jq=Qo,Ig=Z2,e7=eT,t7=_8,r7=Oq,nj=Jq,aj=Lr,oj=nT,n7=oT,a7=1,ij="[object Arguments]",sj="[object Array]",Dd="[object Object]",o7=Object.prototype,lj=o7.hasOwnProperty;function i7(e,t,r,n,a,o){var i=aj(e),l=aj(t),c=i?sj:nj(e),u=l?sj:nj(t);c=c==ij?Dd:c,u=u==ij?Dd:u;var d=c==Dd,f=u==Dd,p=c==u;if(p&&oj(e)){if(!oj(t))return!1;i=!0,d=!1}if(p&&!d)return o||(o=new Ig),i||n7(e)?e7(e,t,r,n,a,o):t7(e,t,c,r,n,a,o);if(!(r&a7)){var h=d&&lj.call(e,"__wrapped__"),y=f&&lj.call(t,"__wrapped__");if(h||y){var m=h?e.value():e,x=y?t.value():t;return o||(o=new Ig),a(m,x,r,n,o)}}return p?(o||(o=new Ig),r7(e,t,r,n,a,o)):!1}var s7=i7,l7=s7,cj=Ha;function cT(e,t,r,n,a){return e===t?!0:e==null||t==null||!cj(e)&&!cj(t)?e!==e&&t!==t:l7(e,t,r,n,cT,a)}var Bb=cT,c7=Z2,u7=Bb,d7=1,f7=2;function p7(e,t,r,n){var a=r.length,o=a,i=!n;if(e==null)return!o;for(e=Object(e);a--;){var l=r[a];if(i&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){l=r[a];var c=l[0],u=e[c],d=l[1];if(i&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new c7;if(n)var p=n(u,d,c,e,t,f);if(!(p===void 0?u7(d,u,d7|f7,n,f):p))return!1}}return!0}var h7=p7,m7=_o;function g7(e){return e===e&&!m7(e)}var uT=g7,y7=uT,v7=dm;function x7(e){for(var t=v7(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,y7(a)]}return t}var b7=x7;function w7(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var dT=w7,S7=h7,j7=b7,N7=dT;function k7(e){var t=j7(e);return t.length==1&&t[0][2]?N7(t[0][0],t[0][1]):function(r){return r===e||S7(r,e,t)}}var P7=k7;function E7(e,t){return e!=null&&t in Object(e)}var C7=E7,A7=x2,T7=Lb,O7=Lr,_7=Fb,I7=Ub,$7=Zh;function R7(e,t,r){t=A7(t,e);for(var n=-1,a=t.length,o=!1;++n<a;){var i=$7(t[n]);if(!(o=e!=null&&r(e,i)))break;e=e[i]}return o||++n!=a?o:(a=e==null?0:e.length,!!a&&I7(a)&&_7(i,a)&&(O7(e)||T7(e)))}var D7=R7,M7=C7,L7=D7;function F7(e,t){return e!=null&&L7(e,t,M7)}var U7=F7,B7=Bb,z7=b2,q7=U7,H7=bb,V7=uT,W7=dT,Q7=Zh,K7=1,G7=2;function Z7(e,t){return H7(e)&&V7(t)?W7(Q7(e),t):function(r){var n=z7(r,e);return n===void 0&&n===t?q7(r,e):B7(t,n,K7|G7)}}var X7=Z7;function Y7(e){return e}var Cl=Y7;function J7(e){return function(t){return t==null?void 0:t[e]}}var eH=J7,tH=Eb;function rH(e){return function(t){return tH(t,e)}}var nH=rH,aH=eH,oH=nH,iH=bb,sH=Zh;function lH(e){return iH(e)?aH(sH(e)):oH(e)}var cH=lH,uH=P7,dH=X7,fH=Cl,pH=Lr,hH=cH;function mH(e){return typeof e=="function"?e:e==null?fH:typeof e=="object"?pH(e)?dH(e[0],e[1]):uH(e):hH(e)}var ua=mH;function gH(e,t,r,n){for(var a=e.length,o=r+(n?1:-1);n?o--:++o<a;)if(t(e[o],o,e))return o;return-1}var fT=gH;function yH(e){return e!==e}var vH=yH;function xH(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var bH=xH,wH=fT,SH=vH,jH=bH;function NH(e,t,r){return t===t?jH(e,t,r):wH(e,SH,r)}var kH=NH,PH=kH;function EH(e,t){var r=e==null?0:e.length;return!!r&&PH(e,t,0)>-1}var CH=EH;function AH(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var TH=AH;function OH(){}var _H=OH,$g=sT,IH=_H,$H=Mb,RH=1/0,DH=$g&&1/$H(new $g([,-0]))[1]==RH?function(e){return new $g(e)}:IH,MH=DH,LH=X2,FH=CH,UH=TH,BH=J2,zH=MH,qH=Mb,HH=200;function VH(e,t,r){var n=-1,a=FH,o=e.length,i=!0,l=[],c=l;if(r)i=!1,a=UH;else if(o>=HH){var u=t?null:zH(e);if(u)return qH(u);i=!1,a=BH,c=new LH}else c=t?[]:l;e:for(;++n<o;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,i&&f===f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var WH=VH,QH=ua,KH=WH;function GH(e,t){return e&&e.length?KH(e,QH(t)):[]}var ZH=GH;const uj=ot(ZH);function pT(e,t,r){return t===!0?uj(e,r):ze(t)?uj(e,t):e}function qs(e){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qs(e)}var XH=["ref"];function dj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ha(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dj(Object(r),!0).forEach(function(n){fm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mT(n.key),n)}}function JH(e,t,r){return t&&fj(e.prototype,t),r&&fj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function eV(e,t,r){return t=bp(t),tV(e,hT()?Reflect.construct(t,r||[],bp(e).constructor):t.apply(e,r))}function tV(e,t){if(t&&(qs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rV(e)}function rV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hT=function(){return!!e})()}function bp(e){return bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bp(e)}function nV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U0(e,t)}function U0(e,t){return U0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},U0(e,t)}function fm(e,t,r){return t=mT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mT(e){var t=aV(e,"string");return qs(t)=="symbol"?t:t+""}function aV(e,t){if(qs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oV(e,t){if(e==null)return{};var r=iV(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function sV(e){return e.value}function lV(e,t){if(B.isValidElement(e))return B.cloneElement(e,t);if(typeof e=="function")return B.createElement(e,t);t.ref;var r=oV(t,XH);return B.createElement(Db,r)}var pj=1,ka=function(e){function t(){var r;YH(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=eV(this,t,[].concat(a)),fm(r,"lastBoundingBox",{width:-1,height:-1}),r}return nV(t,e),JH(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>pj||Math.abs(a.height-this.lastBoundingBox.height)>pj)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ha({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,o=a.layout,i=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(i==="center"&&o==="vertical"){var h=this.getBBoxSnapshot();f={left:((u||0)-h.width)/2}}else f=i==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();p={top:((d||0)-y.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ha(ha({},f),p)}},{key:"render",value:function(){var n=this,a=this.props,o=a.content,i=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=ha(ha({position:"absolute",width:i||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return B.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(h){n.wrapperNode=h}},lV(o,ha(ha({},this.props),{},{payload:pT(d,u,sV)})))}}],[{key:"getWithHeight",value:function(n,a){var o=ha(ha({},this.defaultProps),n.props),i=o.layout;return i==="vertical"&&Pe(n.props.height)?{height:n.props.height}:i==="horizontal"?{width:n.props.width||a}:null}}])}(g.PureComponent);fm(ka,"displayName","Legend");fm(ka,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var hj=Xu,cV=Lb,uV=Lr,mj=hj?hj.isConcatSpreadable:void 0;function dV(e){return uV(e)||cV(e)||!!(mj&&e&&e[mj])}var fV=dV,pV=tT,hV=fV;function gT(e,t,r,n,a){var o=-1,i=e.length;for(r||(r=hV),a||(a=[]);++o<i;){var l=e[o];t>0&&r(l)?t>1?gT(l,t-1,r,n,a):pV(a,l):n||(a[a.length]=l)}return a}var yT=gT;function mV(e){return function(t,r,n){for(var a=-1,o=Object(t),i=n(t),l=i.length;l--;){var c=i[e?l:++a];if(r(o[c],c,o)===!1)break}return t}}var gV=mV,yV=gV,vV=yV(),xV=vV,bV=xV,wV=dm;function SV(e,t){return e&&bV(e,t,wV)}var vT=SV,jV=ed;function NV(e,t){return function(r,n){if(r==null)return r;if(!jV(r))return e(r,n);for(var a=r.length,o=t?a:-1,i=Object(r);(t?o--:++o<a)&&n(i[o],o,i)!==!1;);return r}}var kV=NV,PV=vT,EV=kV,CV=EV(PV),zb=CV,AV=zb,TV=ed;function OV(e,t){var r=-1,n=TV(e)?Array(e.length):[];return AV(e,function(a,o,i){n[++r]=t(a,o,i)}),n}var xT=OV;function _V(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var IV=_V,gj=bl;function $V(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,o=gj(e),i=t!==void 0,l=t===null,c=t===t,u=gj(t);if(!l&&!u&&!o&&e>t||o&&i&&c&&!l&&!u||n&&i&&c||!r&&c||!a)return 1;if(!n&&!o&&!u&&e<t||u&&r&&a&&!n&&!o||l&&r&&a||!i&&a||!c)return-1}return 0}var RV=$V,DV=RV;function MV(e,t,r){for(var n=-1,a=e.criteria,o=t.criteria,i=a.length,l=r.length;++n<i;){var c=DV(a[n],o[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var LV=MV,Rg=Pb,FV=Eb,UV=ua,BV=xT,zV=IV,qV=aT,HV=LV,VV=Cl,WV=Lr;function QV(e,t,r){t.length?t=Rg(t,function(o){return WV(o)?function(i){return FV(i,o.length===1?o[0]:o)}:o}):t=[VV];var n=-1;t=Rg(t,qV(UV));var a=BV(e,function(o,i,l){var c=Rg(t,function(u){return u(o)});return{criteria:c,index:++n,value:o}});return zV(a,function(o,i){return HV(o,i,r)})}var KV=QV;function GV(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var ZV=GV,XV=ZV,yj=Math.max;function YV(e,t,r){return t=yj(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,o=yj(n.length-t,0),i=Array(o);++a<o;)i[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(i),XV(e,this,l)}}var JV=YV;function eW(e){return function(){return e}}var tW=eW,rW=Ti,nW=function(){try{var e=rW(Object,"defineProperty");return e({},"",{}),e}catch{}}(),bT=nW,aW=tW,vj=bT,oW=Cl,iW=vj?function(e,t){return vj(e,"toString",{configurable:!0,enumerable:!1,value:aW(t),writable:!0})}:oW,sW=iW,lW=800,cW=16,uW=Date.now;function dW(e){var t=0,r=0;return function(){var n=uW(),a=cW-(n-r);if(r=n,a>0){if(++t>=lW)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var fW=dW,pW=sW,hW=fW,mW=hW(pW),gW=mW,yW=Cl,vW=JV,xW=gW;function bW(e,t){return xW(vW(e,t,yW),e+"")}var wW=bW,SW=Sb,jW=ed,NW=Fb,kW=_o;function PW(e,t,r){if(!kW(r))return!1;var n=typeof t;return(n=="number"?jW(r)&&NW(t,r.length):n=="string"&&t in r)?SW(r[t],e):!1}var pm=PW,EW=yT,CW=KV,AW=wW,xj=pm,TW=AW(function(e,t){if(e==null)return[];var r=t.length;return r>1&&xj(e,t[0],t[1])?t=[]:r>2&&xj(t[0],t[1],t[2])&&(t=[t[0]]),CW(e,EW(t,1),[])}),OW=TW;const qb=ot(OW);function lu(e){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lu(e)}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B0.apply(this,arguments)}function _W(e,t){return DW(e)||RW(e,t)||$W(e,t)||IW()}function IW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $W(e,t){if(e){if(typeof e=="string")return bj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bj(e,t)}}function bj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function RW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function DW(e){if(Array.isArray(e))return e}function wj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wj(Object(r),!0).forEach(function(n){MW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MW(e,t,r){return t=LW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LW(e){var t=FW(e,"string");return lu(t)=="symbol"?t:t+""}function FW(e,t){if(lu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UW(e){return Array.isArray(e)&&Yt(e[0])&&Yt(e[1])?e.join(" ~ "):e}var BW=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,o=a===void 0?{}:a,i=t.itemStyle,l=i===void 0?{}:i,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,p=t.itemSorter,h=t.wrapperClassName,y=t.labelClassName,m=t.label,x=t.labelFormatter,w=t.accessibilityLayer,v=w===void 0?!1:w,b=function(){if(d&&d.length){var L={padding:0,margin:0},U=(p?qb(d,p):d).map(function(D,I){if(D.type==="none")return null;var A=Dg({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},l),$=D.formatter||f||UW,O=D.value,R=D.name,q=O,V=R;if($&&q!=null&&V!=null){var z=$(O,R,D,I,d);if(Array.isArray(z)){var J=_W(z,2);q=J[0],V=J[1]}else q=z}return B.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:A},Yt(V)?B.createElement("span",{className:"recharts-tooltip-item-name"},V):null,Yt(V)?B.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,B.createElement("span",{className:"recharts-tooltip-item-value"},q),B.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return B.createElement("ul",{className:"recharts-tooltip-item-list",style:L},U)}return null},j=Dg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),S=Dg({margin:0},u),k=!Qe(m),N=k?m:"",P=Ge("recharts-default-tooltip",h),C=Ge("recharts-tooltip-label",y);k&&x&&d!==void 0&&d!==null&&(N=x(m,d));var E=v?{role:"status","aria-live":"assertive"}:{};return B.createElement("div",B0({className:P,style:j},E),B.createElement("p",{className:C,style:S},B.isValidElement(N)?N:"".concat(N)),b())};function cu(e){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}function Md(e,t,r){return t=zW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zW(e){var t=qW(e,"string");return cu(t)=="symbol"?t:t+""}function qW(e,t){if(cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rc="recharts-tooltip-wrapper",HW={visibility:"hidden"};function VW(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Ge(rc,Md(Md(Md(Md({},"".concat(rc,"-right"),Pe(r)&&t&&Pe(t.x)&&r>=t.x),"".concat(rc,"-left"),Pe(r)&&t&&Pe(t.x)&&r<t.x),"".concat(rc,"-bottom"),Pe(n)&&t&&Pe(t.y)&&n>=t.y),"".concat(rc,"-top"),Pe(n)&&t&&Pe(t.y)&&n<t.y))}function Sj(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,o=e.position,i=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(o&&Pe(o[n]))return o[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return i[n]?d:f;if(i[n]){var p=d,h=c[n];return p<h?Math.max(f,c[n]):Math.max(d,c[n])}var y=f+l,m=c[n]+u;return y>m?Math.max(d,c[n]):Math.max(f,c[n])}function WW(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function QW(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,o=e.reverseDirection,i=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return i.height>0&&i.width>0&&r?(d=Sj({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:o,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=Sj({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:o,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=WW({translateX:d,translateY:f,useTranslate3d:l})):u=HW,{cssProperties:u,cssClasses:VW({translateX:d,translateY:f,coordinate:r})}}function Hs(e){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(e)}function jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jj(Object(r),!0).forEach(function(n){q0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ST(n.key),n)}}function ZW(e,t,r){return t&&GW(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XW(e,t,r){return t=wp(t),YW(e,wT()?Reflect.construct(t,r||[],wp(e).constructor):t.apply(e,r))}function YW(e,t){if(t&&(Hs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JW(e)}function JW(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wT=function(){return!!e})()}function wp(e){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wp(e)}function e9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z0(e,t)}function z0(e,t){return z0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},z0(e,t)}function q0(e,t,r){return t=ST(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ST(e){var t=t9(e,"string");return Hs(t)=="symbol"?t:t+""}function t9(e,t){if(Hs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kj=1,r9=function(e){function t(){var r;KW(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=XW(this,t,[].concat(a)),q0(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),q0(r,"handleKeyDown",function(i){if(i.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return e9(t,e),ZW(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>kj||Math.abs(n.height-this.state.lastBoundingBox.height)>kj)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,o=a.active,i=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,p=a.isAnimationActive,h=a.offset,y=a.position,m=a.reverseDirection,x=a.useTranslate3d,w=a.viewBox,v=a.wrapperStyle,b=QW({allowEscapeViewBox:i,coordinate:d,offsetTopLeft:h,position:y,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:w}),j=b.cssClasses,S=b.cssProperties,k=Nj(Nj({transition:p&&o?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},v);return B.createElement("div",{tabIndex:-1,className:j,style:k,ref:function(P){n.wrapperNode=P}},u)}}])}(g.PureComponent),n9=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ta={isSsr:n9(),get:function(t){return ta[t]},set:function(t,r){if(typeof t=="string")ta[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){ta[a]=t[a]})}}};function Vs(e){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(e)}function Pj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ej(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pj(Object(r),!0).forEach(function(n){Hb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NT(n.key),n)}}function i9(e,t,r){return t&&o9(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function s9(e,t,r){return t=Sp(t),l9(e,jT()?Reflect.construct(t,r||[],Sp(e).constructor):t.apply(e,r))}function l9(e,t){if(t&&(Vs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c9(e)}function c9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jT=function(){return!!e})()}function Sp(e){return Sp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sp(e)}function u9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H0(e,t)}function H0(e,t){return H0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},H0(e,t)}function Hb(e,t,r){return t=NT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NT(e){var t=d9(e,"string");return Vs(t)=="symbol"?t:t+""}function d9(e,t){if(Vs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f9(e){return e.dataKey}function p9(e,t){return B.isValidElement(e)?B.cloneElement(e,t):typeof e=="function"?B.createElement(e,t):B.createElement(BW,t)}var Vr=function(e){function t(){return a9(this,t),s9(this,t,arguments)}return u9(t,e),i9(t,[{key:"render",value:function(){var n=this,a=this.props,o=a.active,i=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,p=a.isAnimationActive,h=a.offset,y=a.payload,m=a.payloadUniqBy,x=a.position,w=a.reverseDirection,v=a.useTranslate3d,b=a.viewBox,j=a.wrapperStyle,S=y??[];f&&S.length&&(S=pT(y.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),m,f9));var k=S.length>0;return B.createElement(r9,{allowEscapeViewBox:i,animationDuration:l,animationEasing:c,isAnimationActive:p,active:o,coordinate:d,hasPayload:k,offset:h,position:x,reverseDirection:w,useTranslate3d:v,viewBox:b,wrapperStyle:j},p9(u,Ej(Ej({},this.props),{},{payload:S})))}}])}(g.PureComponent);Hb(Vr,"displayName","Tooltip");Hb(Vr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ta.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var h9=ca,m9=function(){return h9.Date.now()},g9=m9,y9=/\s/;function v9(e){for(var t=e.length;t--&&y9.test(e.charAt(t)););return t}var x9=v9,b9=x9,w9=/^\s+/;function S9(e){return e&&e.slice(0,b9(e)+1).replace(w9,"")}var j9=S9,N9=j9,Cj=_o,k9=bl,Aj=NaN,P9=/^[-+]0x[0-9a-f]+$/i,E9=/^0b[01]+$/i,C9=/^0o[0-7]+$/i,A9=parseInt;function T9(e){if(typeof e=="number")return e;if(k9(e))return Aj;if(Cj(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cj(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=N9(e);var r=E9.test(e);return r||C9.test(e)?A9(e.slice(2),r?2:8):P9.test(e)?Aj:+e}var kT=T9,O9=_o,Mg=g9,Tj=kT,_9="Expected a function",I9=Math.max,$9=Math.min;function R9(e,t,r){var n,a,o,i,l,c,u=0,d=!1,f=!1,p=!0;if(typeof e!="function")throw new TypeError(_9);t=Tj(t)||0,O9(r)&&(d=!!r.leading,f="maxWait"in r,o=f?I9(Tj(r.maxWait)||0,t):o,p="trailing"in r?!!r.trailing:p);function h(k){var N=n,P=a;return n=a=void 0,u=k,i=e.apply(P,N),i}function y(k){return u=k,l=setTimeout(w,t),d?h(k):i}function m(k){var N=k-c,P=k-u,C=t-N;return f?$9(C,o-P):C}function x(k){var N=k-c,P=k-u;return c===void 0||N>=t||N<0||f&&P>=o}function w(){var k=Mg();if(x(k))return v(k);l=setTimeout(w,m(k))}function v(k){return l=void 0,p&&n?h(k):(n=a=void 0,i)}function b(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function j(){return l===void 0?i:v(Mg())}function S(){var k=Mg(),N=x(k);if(n=arguments,a=this,c=k,N){if(l===void 0)return y(c);if(f)return clearTimeout(l),l=setTimeout(w,t),h(c)}return l===void 0&&(l=setTimeout(w,t)),i}return S.cancel=b,S.flush=j,S}var D9=R9,M9=D9,L9=_o,F9="Expected a function";function U9(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(F9);return L9(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),M9(e,t,{leading:n,maxWait:t,trailing:a})}var B9=U9;const PT=ot(B9);function uu(e){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(e)}function Oj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ld(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oj(Object(r),!0).forEach(function(n){z9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z9(e,t,r){return t=q9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q9(e){var t=H9(e,"string");return uu(t)=="symbol"?t:t+""}function H9(e,t){if(uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V9(e,t){return G9(e)||K9(e,t)||Q9(e,t)||W9()}function W9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q9(e,t){if(e){if(typeof e=="string")return _j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _j(e,t)}}function _j(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K9(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function G9(e){if(Array.isArray(e))return e}var Ij=g.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,o=e.width,i=o===void 0?"100%":o,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,p=e.maxHeight,h=e.children,y=e.debounce,m=y===void 0?0:y,x=e.id,w=e.className,v=e.onResize,b=e.style,j=b===void 0?{}:b,S=g.useRef(null),k=g.useRef();k.current=v,g.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var N=g.useState({containerWidth:a.width,containerHeight:a.height}),P=V9(N,2),C=P[0],E=P[1],_=g.useCallback(function(U,D){E(function(I){var A=Math.round(U),$=Math.round(D);return I.containerWidth===A&&I.containerHeight===$?I:{containerWidth:A,containerHeight:$}})},[]);g.useEffect(function(){var U=function(R){var q,V=R[0].contentRect,z=V.width,J=V.height;_(z,J),(q=k.current)===null||q===void 0||q.call(k,z,J)};m>0&&(U=PT(U,m,{trailing:!0,leading:!1}));var D=new ResizeObserver(U),I=S.current.getBoundingClientRect(),A=I.width,$=I.height;return _(A,$),D.observe(S.current),function(){D.disconnect()}},[_,m]);var L=g.useMemo(function(){var U=C.containerWidth,D=C.containerHeight;if(U<0||D<0)return null;Ln(ei(i)||ei(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,c),Ln(!r||r>0,"The aspect(%s) must be greater than zero.",r);var I=ei(i)?U:i,A=ei(c)?D:c;r&&r>0&&(I?A=I/r:A&&(I=A*r),p&&A>p&&(A=p)),Ln(I>0||A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,A,i,c,d,f,r);var $=!Array.isArray(h)&&Na(h.type).endsWith("Chart");return B.Children.map(h,function(O){return B.isValidElement(O)?g.cloneElement(O,Ld({width:I,height:A},$?{style:Ld({height:"100%",width:"100%",maxHeight:A,maxWidth:I},O.props.style)}:{})):O})},[r,h,c,p,f,d,C,i]);return B.createElement("div",{id:x?"".concat(x):void 0,className:Ge("recharts-responsive-container",w),style:Ld(Ld({},j),{},{width:i,height:c,minWidth:d,minHeight:f,maxHeight:p}),ref:S},L)}),td=function(t){return null};td.displayName="Cell";function du(e){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},du(e)}function $j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function V0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$j(Object(r),!0).forEach(function(n){Z9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$j(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z9(e,t,r){return t=X9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X9(e){var t=Y9(e,"string");return du(t)=="symbol"?t:t+""}function Y9(e,t){if(du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hi={widthCache:{},cacheCount:0},J9=2e3,eQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Rj="recharts_measurement_span";function tQ(e){var t=V0({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var _c=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ta.isSsr)return{width:0,height:0};var n=tQ(r),a=JSON.stringify({text:t,copyStyle:n});if(Hi.widthCache[a])return Hi.widthCache[a];try{var o=document.getElementById(Rj);o||(o=document.createElement("span"),o.setAttribute("id",Rj),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var i=V0(V0({},eQ),n);Object.assign(o.style,i),o.textContent="".concat(t);var l=o.getBoundingClientRect(),c={width:l.width,height:l.height};return Hi.widthCache[a]=c,++Hi.cacheCount>J9&&(Hi.cacheCount=0,Hi.widthCache={}),c}catch{return{width:0,height:0}}},rQ=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function jp(e,t){return iQ(e)||oQ(e,t)||aQ(e,t)||nQ()}function nQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aQ(e,t){if(e){if(typeof e=="string")return Dj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dj(e,t)}}function Dj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function iQ(e){if(Array.isArray(e))return e}function sQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cQ(n.key),n)}}function lQ(e,t,r){return t&&Mj(e.prototype,t),r&&Mj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cQ(e){var t=uQ(e,"string");return fu(t)=="symbol"?t:t+""}function uQ(e,t){if(fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Lj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Fj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,fQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ET={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pQ=Object.keys(ET),ps="NaN";function hQ(e,t){return e*ET[t]}var Fd=function(){function e(t,r){sQ(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!dQ.test(r)&&(this.num=NaN,this.unit=""),pQ.includes(r)&&(this.num=hQ(t,r),this.unit="px")}return lQ(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=fQ.exec(r))!==null&&n!==void 0?n:[],o=jp(a,3),i=o[1],l=o[2];return new e(parseFloat(i),l??"")}}])}();function CT(e){if(e.includes(ps))return ps;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Lj.exec(t))!==null&&r!==void 0?r:[],a=jp(n,4),o=a[1],i=a[2],l=a[3],c=Fd.parse(o??""),u=Fd.parse(l??""),d=i==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return ps;t=t.replace(Lj,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,p=(f=Fj.exec(t))!==null&&f!==void 0?f:[],h=jp(p,4),y=h[1],m=h[2],x=h[3],w=Fd.parse(y??""),v=Fd.parse(x??""),b=m==="+"?w.add(v):w.subtract(v);if(b.isNaN())return ps;t=t.replace(Fj,b.toString())}return t}var Uj=/\(([^()]*)\)/;function mQ(e){for(var t=e;t.includes("(");){var r=Uj.exec(t),n=jp(r,2),a=n[1];t=t.replace(Uj,CT(a))}return t}function gQ(e){var t=e.replace(/\s+/g,"");return t=mQ(t),t=CT(t),t}function yQ(e){try{return gQ(e)}catch{return ps}}function Lg(e){var t=yQ(e.slice(5,-1));return t===ps?"":t}var vQ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],xQ=["dx","dy","angle","className","breakAll"];function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W0.apply(this,arguments)}function Bj(e,t){if(e==null)return{};var r=bQ(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zj(e,t){return NQ(e)||jQ(e,t)||SQ(e,t)||wQ()}function wQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SQ(e,t){if(e){if(typeof e=="string")return qj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qj(e,t)}}function qj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function NQ(e){if(Array.isArray(e))return e}var AT=/[ \f\n\r\t\v\u2028\u2029]+/,TT=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var o=[];Qe(r)||(n?o=r.toString().split(""):o=r.toString().split(AT));var i=o.map(function(c){return{word:c,width:_c(c,a).width}}),l=n?0:_c("",a).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}},kQ=function(t,r,n,a,o){var i=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Pe(i),f=l,p=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function(A,$){var O=$.word,R=$.width,q=A[A.length-1];if(q&&(a==null||o||q.width+R+n<Number(a)))q.words.push(O),q.width+=R+n;else{var V={words:[O],width:R};A.push(V)}return A},[])},h=p(r),y=function(I){return I.reduce(function(A,$){return A.width>$.width?A:$})};if(!d)return h;for(var m="",x=function(I){var A=f.slice(0,I),$=TT({breakAll:u,style:c,children:A+m}).wordsWithComputedWidth,O=p($),R=O.length>i||y(O).width>Number(a);return[R,O]},w=0,v=f.length-1,b=0,j;w<=v&&b<=f.length-1;){var S=Math.floor((w+v)/2),k=S-1,N=x(k),P=zj(N,2),C=P[0],E=P[1],_=x(S),L=zj(_,1),U=L[0];if(!C&&!U&&(w=S+1),C&&U&&(v=S-1),!C&&U){j=E;break}b++}return j||h},Hj=function(t){var r=Qe(t)?[]:t.toString().split(AT);return[{words:r}]},PQ=function(t){var r=t.width,n=t.scaleToFit,a=t.children,o=t.style,i=t.breakAll,l=t.maxLines;if((r||n)&&!ta.isSsr){var c,u,d=TT({breakAll:i,children:a,style:o});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;c=f,u=p}else return Hj(a);return kQ({breakAll:i,children:a,maxLines:l,style:o},c,u,r,n)}return Hj(a)},Vj="#808080",vi=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,o=a===void 0?0:a,i=t.lineHeight,l=i===void 0?"1em":i,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,p=t.textAnchor,h=p===void 0?"start":p,y=t.verticalAnchor,m=y===void 0?"end":y,x=t.fill,w=x===void 0?Vj:x,v=Bj(t,vQ),b=g.useMemo(function(){return PQ({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),j=v.dx,S=v.dy,k=v.angle,N=v.className,P=v.breakAll,C=Bj(v,xQ);if(!Yt(n)||!Yt(o))return null;var E=n+(Pe(j)?j:0),_=o+(Pe(S)?S:0),L;switch(m){case"start":L=Lg("calc(".concat(u,")"));break;case"middle":L=Lg("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:L=Lg("calc(".concat(b.length-1," * -").concat(l,")"));break}var U=[];if(f){var D=b[0].width,I=v.width;U.push("scale(".concat((Pe(I)?I/D:1)/D,")"))}return k&&U.push("rotate(".concat(k,", ").concat(E,", ").concat(_,")")),U.length&&(C.transform=U.join(" ")),B.createElement("text",W0({},Fe(C,!0),{x:E,y:_,className:Ge("recharts-text",N),textAnchor:h,fill:w.includes("url")?Vj:w}),b.map(function(A,$){var O=A.words.join(P?"":" ");return B.createElement("tspan",{x:E,dy:$===0?L:l,key:"".concat(O,"-").concat($)},O)}))};function vo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function EQ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vb(e){let t,r,n;e.length!==2?(t=vo,r=(l,c)=>vo(e(l),c),n=(l,c)=>e(l)-c):(t=e===vo||e===EQ?e:CQ,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:i,right:o}}function CQ(){return 0}function OT(e){return e===null?NaN:+e}function*AQ(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const TQ=Vb(vo),rd=TQ.right;Vb(OT).center;class Wj extends Map{constructor(t,r=IQ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(Qj(this,t))}has(t){return super.has(Qj(this,t))}set(t,r){return super.set(OQ(this,t),r)}delete(t){return super.delete(_Q(this,t))}}function Qj({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function OQ({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function _Q({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function IQ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function $Q(e=vo){if(e===vo)return _T;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function _T(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const RQ=Math.sqrt(50),DQ=Math.sqrt(10),MQ=Math.sqrt(2);function Np(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),o=n/Math.pow(10,a),i=o>=RQ?10:o>=DQ?5:o>=MQ?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/i,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*i,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Np(e,t,r*2):[l,c,u]}function Q0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,o,i]=n?Np(t,e,r):Np(e,t,r);if(!(o>=a))return[];const l=o-a+1,c=new Array(l);if(n)if(i<0)for(let u=0;u<l;++u)c[u]=(o-u)/-i;else for(let u=0;u<l;++u)c[u]=(o-u)*i;else if(i<0)for(let u=0;u<l;++u)c[u]=(a+u)/-i;else for(let u=0;u<l;++u)c[u]=(a+u)*i;return c}function K0(e,t,r){return t=+t,e=+e,r=+r,Np(e,t,r)[2]}function G0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?K0(t,e,r):K0(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function Kj(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Gj(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function IT(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?_T:$Q(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+p)),y=Math.min(n,Math.floor(t+(c-u)*f/c+p));IT(e,t,h,y,a)}const o=e[t];let i=r,l=n;for(nc(e,r,t),a(e[n],o)>0&&nc(e,r,n);i<l;){for(nc(e,i,l),++i,--l;a(e[i],o)<0;)++i;for(;a(e[l],o)>0;)--l}a(e[r],o)===0?nc(e,r,l):(++l,nc(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function nc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function LQ(e,t,r){if(e=Float64Array.from(AQ(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Gj(e);if(t>=1)return Kj(e);var n,a=(n-1)*t,o=Math.floor(a),i=Kj(IT(e,o).subarray(0,o+1)),l=Gj(e.subarray(o+1));return i+(l-i)*(a-o)}}function FQ(e,t,r=OT){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,o=Math.floor(a),i=+r(e[o],o,e),l=+r(e[o+1],o+1,e);return i+(l-i)*(a-o)}}function UQ(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(a);++n<a;)o[n]=e+n*r;return o}function Nn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Va(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Z0=Symbol("implicit");function Wb(){var e=new Wj,t=[],r=[],n=Z0;function a(o){let i=e.get(o);if(i===void 0){if(n!==Z0)return n;e.set(o,i=t.push(o)-1)}return r[i%r.length]}return a.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Wj;for(const i of o)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(o){return arguments.length?(r=Array.from(o),a):r.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return Wb(t,r).unknown(n)},Nn.apply(a,arguments),a}function pu(){var e=Wb().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,o,i,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var p=t().length,h=a<n,y=h?a:n,m=h?n:a;o=(m-y)/Math.max(1,p-c+u*2),l&&(o=Math.floor(o)),y+=(m-y-o*(p-c))*d,i=o*(1-c),l&&(y=Math.round(y),i=Math.round(i));var x=UQ(p).map(function(w){return y+o*w});return r(h?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([n,a]=p,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(p){return[n,a]=p,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return i},e.step=function(){return o},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},e.copy=function(){return pu(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Nn.apply(f(),arguments)}function $T(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return $T(t())},e}function Ic(){return $T(pu.apply(null,arguments).paddingInner(1))}function Qb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function RT(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function nd(){}var hu=.7,kp=1/hu,Cs="\\s*([+-]?\\d+)\\s*",mu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BQ=/^#([0-9a-f]{3,8})$/,zQ=new RegExp(`^rgb\\(${Cs},${Cs},${Cs}\\)$`),qQ=new RegExp(`^rgb\\(${ra},${ra},${ra}\\)$`),HQ=new RegExp(`^rgba\\(${Cs},${Cs},${Cs},${mu}\\)$`),VQ=new RegExp(`^rgba\\(${ra},${ra},${ra},${mu}\\)$`),WQ=new RegExp(`^hsl\\(${mu},${ra},${ra}\\)$`),QQ=new RegExp(`^hsla\\(${mu},${ra},${ra},${mu}\\)$`),Zj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qb(nd,gu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xj,formatHex:Xj,formatHex8:KQ,formatHsl:GQ,formatRgb:Yj,toString:Yj});function Xj(){return this.rgb().formatHex()}function KQ(){return this.rgb().formatHex8()}function GQ(){return DT(this).formatHsl()}function Yj(){return this.rgb().formatRgb()}function gu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=BQ.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Jj(t):r===3?new Ir(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ud(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ud(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zQ.exec(e))?new Ir(t[1],t[2],t[3],1):(t=qQ.exec(e))?new Ir(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=HQ.exec(e))?Ud(t[1],t[2],t[3],t[4]):(t=VQ.exec(e))?Ud(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=WQ.exec(e))?rN(t[1],t[2]/100,t[3]/100,1):(t=QQ.exec(e))?rN(t[1],t[2]/100,t[3]/100,t[4]):Zj.hasOwnProperty(e)?Jj(Zj[e]):e==="transparent"?new Ir(NaN,NaN,NaN,0):null}function Jj(e){return new Ir(e>>16&255,e>>8&255,e&255,1)}function Ud(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ir(e,t,r,n)}function ZQ(e){return e instanceof nd||(e=gu(e)),e?(e=e.rgb(),new Ir(e.r,e.g,e.b,e.opacity)):new Ir}function X0(e,t,r,n){return arguments.length===1?ZQ(e):new Ir(e,t,r,n??1)}function Ir(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Qb(Ir,X0,RT(nd,{brighter(e){return e=e==null?kp:Math.pow(kp,e),new Ir(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hu:Math.pow(hu,e),new Ir(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ir(si(this.r),si(this.g),si(this.b),Pp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eN,formatHex:eN,formatHex8:XQ,formatRgb:tN,toString:tN}));function eN(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}`}function XQ(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}${ti((isNaN(this.opacity)?1:this.opacity)*255)}`}function tN(){const e=Pp(this.opacity);return`${e===1?"rgb(":"rgba("}${si(this.r)}, ${si(this.g)}, ${si(this.b)}${e===1?")":`, ${e})`}`}function Pp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function si(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ti(e){return e=si(e),(e<16?"0":"")+e.toString(16)}function rN(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Rn(e,t,r,n)}function DT(e){if(e instanceof Rn)return new Rn(e.h,e.s,e.l,e.opacity);if(e instanceof nd||(e=gu(e)),!e)return new Rn;if(e instanceof Rn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),o=Math.max(t,r,n),i=NaN,l=o-a,c=(o+a)/2;return l?(t===o?i=(r-n)/l+(r<n)*6:r===o?i=(n-t)/l+2:i=(t-r)/l+4,l/=c<.5?o+a:2-o-a,i*=60):l=c>0&&c<1?0:i,new Rn(i,l,c,e.opacity)}function YQ(e,t,r,n){return arguments.length===1?DT(e):new Rn(e,t,r,n??1)}function Rn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Qb(Rn,YQ,RT(nd,{brighter(e){return e=e==null?kp:Math.pow(kp,e),new Rn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hu:Math.pow(hu,e),new Rn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Ir(Fg(e>=240?e-240:e+120,a,n),Fg(e,a,n),Fg(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Rn(nN(this.h),Bd(this.s),Bd(this.l),Pp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pp(this.opacity);return`${e===1?"hsl(":"hsla("}${nN(this.h)}, ${Bd(this.s)*100}%, ${Bd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nN(e){return e=(e||0)%360,e<0?e+360:e}function Bd(e){return Math.max(0,Math.min(1,e||0))}function Fg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Kb=e=>()=>e;function JQ(e,t){return function(r){return e+r*t}}function eK(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function tK(e){return(e=+e)==1?MT:function(t,r){return r-t?eK(t,r,e):Kb(isNaN(t)?r:t)}}function MT(e,t){var r=t-e;return r?JQ(e,r):Kb(isNaN(e)?t:e)}const aN=function e(t){var r=tK(t);function n(a,o){var i=r((a=X0(a)).r,(o=X0(o)).r),l=r(a.g,o.g),c=r(a.b,o.b),u=MT(a.opacity,o.opacity);return function(d){return a.r=i(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function rK(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(o){for(a=0;a<r;++a)n[a]=e[a]*(1-o)+t[a]*o;return n}}function nK(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function aK(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),o=new Array(r),i;for(i=0;i<n;++i)a[i]=Al(e[i],t[i]);for(;i<r;++i)o[i]=t[i];return function(l){for(i=0;i<n;++i)o[i]=a[i](l);return o}}function oK(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ep(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function iK(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Al(e[a],t[a]):n[a]=t[a];return function(o){for(a in r)n[a]=r[a](o);return n}}var Y0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ug=new RegExp(Y0.source,"g");function sK(e){return function(){return e}}function lK(e){return function(t){return e(t)+""}}function cK(e,t){var r=Y0.lastIndex=Ug.lastIndex=0,n,a,o,i=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Y0.exec(e))&&(a=Ug.exec(t));)(o=a.index)>r&&(o=t.slice(r,o),l[i]?l[i]+=o:l[++i]=o),(n=n[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:Ep(n,a)})),r=Ug.lastIndex;return r<t.length&&(o=t.slice(r),l[i]?l[i]+=o:l[++i]=o),l.length<2?c[0]?lK(c[0].x):sK(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Al(e,t){var r=typeof t,n;return t==null||r==="boolean"?Kb(t):(r==="number"?Ep:r==="string"?(n=gu(t))?(t=n,aN):cK:t instanceof gu?aN:t instanceof Date?oK:nK(t)?rK:Array.isArray(t)?aK:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?iK:Ep)(e,t)}function Gb(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function uK(e,t){t===void 0&&(t=e,e=Al);for(var r=0,n=t.length-1,a=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(a,a=t[++r]);return function(i){var l=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return o[l](i-l)}}function dK(e){return function(){return e}}function Cp(e){return+e}var oN=[0,1];function kr(e){return e}function J0(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:dK(isNaN(t)?NaN:.5)}function fK(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function pK(e,t,r){var n=e[0],a=e[1],o=t[0],i=t[1];return a<n?(n=J0(a,n),o=r(i,o)):(n=J0(n,a),o=r(o,i)),function(l){return o(n(l))}}function hK(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),o=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=J0(e[i],e[i+1]),o[i]=r(t[i],t[i+1]);return function(l){var c=rd(e,l,1,n)-1;return o[c](a[c](l))}}function ad(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hm(){var e=oN,t=oN,r=Al,n,a,o,i=kr,l,c,u;function d(){var p=Math.min(e.length,t.length);return i!==kr&&(i=fK(e[0],e[p-1])),l=p>2?hK:pK,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?o:(c||(c=l(e.map(n),t,r)))(n(i(p)))}return f.invert=function(p){return i(a((u||(u=l(t,e.map(n),Ep)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,Cp),d()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=Gb,d()},f.clamp=function(p){return arguments.length?(i=p?!0:kr,d()):i!==kr},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(o=p,f):o},function(p,h){return n=p,a=h,d()}}function Zb(){return hm()(kr,kr)}function mK(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ap(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ws(e){return e=Ap(Math.abs(e)),e?e[1]:NaN}function gK(e,t){return function(r,n){for(var a=r.length,o=[],i=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),o.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[i=(i+1)%e.length];return o.reverse().join(t)}}function yK(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var vK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yu(e){if(!(t=vK.exec(e)))throw new Error("invalid format: "+e);var t;return new Xb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}yu.prototype=Xb.prototype;function Xb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xK(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var LT;function bK(e,t){var r=Ap(e,t);if(!r)return e+"";var n=r[0],a=r[1],o=a-(LT=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return o===i?n:o>i?n+new Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Ap(e,Math.max(0,t+o-1))[0]}function iN(e,t){var r=Ap(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const sN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mK,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>iN(e*100,t),r:iN,s:bK,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function lN(e){return e}var cN=Array.prototype.map,uN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wK(e){var t=e.grouping===void 0||e.thousands===void 0?lN:gK(cN.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?lN:yK(cN.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=yu(f);var p=f.fill,h=f.align,y=f.sign,m=f.symbol,x=f.zero,w=f.width,v=f.comma,b=f.precision,j=f.trim,S=f.type;S==="n"?(v=!0,S="g"):sN[S]||(b===void 0&&(b=12),j=!0,S="g"),(x||p==="0"&&h==="=")&&(x=!0,p="0",h="=");var k=m==="$"?r:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",N=m==="$"?n:/[%p]/.test(S)?i:"",P=sN[S],C=/[defgprs%]/.test(S);b=b===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function E(_){var L=k,U=N,D,I,A;if(S==="c")U=P(_)+U,_="";else{_=+_;var $=_<0||1/_<0;if(_=isNaN(_)?c:P(Math.abs(_),b),j&&(_=xK(_)),$&&+_==0&&y!=="+"&&($=!1),L=($?y==="("?y:l:y==="-"||y==="("?"":y)+L,U=(S==="s"?uN[8+LT/3]:"")+U+($&&y==="("?")":""),C){for(D=-1,I=_.length;++D<I;)if(A=_.charCodeAt(D),48>A||A>57){U=(A===46?a+_.slice(D+1):_.slice(D))+U,_=_.slice(0,D);break}}}v&&!x&&(_=t(_,1/0));var O=L.length+_.length+U.length,R=O<w?new Array(w-O+1).join(p):"";switch(v&&x&&(_=t(R+_,R.length?w-U.length:1/0),R=""),h){case"<":_=L+_+U+R;break;case"=":_=L+R+_+U;break;case"^":_=R.slice(0,O=R.length>>1)+L+_+U+R.slice(O);break;default:_=R+L+_+U;break}return o(_)}return E.toString=function(){return f+""},E}function d(f,p){var h=u((f=yu(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Ws(p)/3)))*3,m=Math.pow(10,-y),x=uN[8+y/3];return function(w){return h(m*w)+x}}return{format:u,formatPrefix:d}}var zd,Yb,FT;SK({thousands:",",grouping:[3],currency:["$",""]});function SK(e){return zd=wK(e),Yb=zd.format,FT=zd.formatPrefix,zd}function jK(e){return Math.max(0,-Ws(Math.abs(e)))}function NK(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ws(t)/3)))*3-Ws(Math.abs(e)))}function kK(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ws(t)-Ws(e))+1}function UT(e,t,r,n){var a=G0(e,t,r),o;switch(n=yu(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=NK(a,i))&&(n.precision=o),FT(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=kK(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=jK(a))&&(n.precision=o-(n.type==="%")*2);break}}return Yb(n)}function Io(e){var t=e.domain;return e.ticks=function(r){var n=t();return Q0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return UT(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,o=n.length-1,i=n[a],l=n[o],c,u,d=10;for(l<i&&(u=i,i=l,l=u,u=a,a=o,o=u);d-- >0;){if(u=K0(i,l,r),u===c)return n[a]=i,n[o]=l,t(n);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Tp(){var e=Zb();return e.copy=function(){return ad(e,Tp())},Nn.apply(e,arguments),Io(e)}function BT(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Cp),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return BT(e).unknown(t)},e=arguments.length?Array.from(e,Cp):[0,1],Io(r)}function zT(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],o=e[n],i;return o<a&&(i=r,r=n,n=i,i=a,a=o,o=i),e[r]=t.floor(a),e[n]=t.ceil(o),e}function dN(e){return Math.log(e)}function fN(e){return Math.exp(e)}function PK(e){return-Math.log(-e)}function EK(e){return-Math.exp(-e)}function CK(e){return isFinite(e)?+("1e"+e):e<0?0:e}function AK(e){return e===10?CK:e===Math.E?Math.exp:t=>Math.pow(e,t)}function TK(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function pN(e){return(t,r)=>-e(-t,r)}function Jb(e){const t=e(dN,fN),r=t.domain;let n=10,a,o;function i(){return a=TK(n),o=AK(n),r()[0]<0?(a=pN(a),o=pN(o),e(PK,EK)):e(dN,fN),t}return t.base=function(l){return arguments.length?(n=+l,i()):n},t.domain=function(l){return arguments.length?(r(l),i()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=a(u),h=a(d),y,m;const x=l==null?10:+l;let w=[];if(!(n%1)&&h-p<x){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(y=1;y<n;++y)if(m=p<0?y/o(-p):y*o(p),!(m<u)){if(m>d)break;w.push(m)}}else for(;p<=h;++p)for(y=n-1;y>=1;--y)if(m=p>0?y/o(-p):y*o(p),!(m<u)){if(m>d)break;w.push(m)}w.length*2<x&&(w=Q0(u,d,x))}else w=Q0(p,h,Math.min(h-p,x)).map(o);return f?w.reverse():w},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=yu(c)).precision==null&&(c.trim=!0),c=Yb(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/o(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(zT(r(),{floor:l=>o(Math.floor(a(l))),ceil:l=>o(Math.ceil(a(l)))})),t}function qT(){const e=Jb(hm()).domain([1,10]);return e.copy=()=>ad(e,qT()).base(e.base()),Nn.apply(e,arguments),e}function hN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function mN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ew(e){var t=1,r=e(hN(t),mN(t));return r.constant=function(n){return arguments.length?e(hN(t=+n),mN(t)):t},Io(r)}function HT(){var e=ew(hm());return e.copy=function(){return ad(e,HT()).constant(e.constant())},Nn.apply(e,arguments)}function gN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function OK(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function _K(e){return e<0?-e*e:e*e}function tw(e){var t=e(kr,kr),r=1;function n(){return r===1?e(kr,kr):r===.5?e(OK,_K):e(gN(r),gN(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Io(t)}function rw(){var e=tw(hm());return e.copy=function(){return ad(e,rw()).exponent(e.exponent())},Nn.apply(e,arguments),e}function IK(){return rw.apply(null,arguments).exponent(.5)}function yN(e){return Math.sign(e)*e*e}function $K(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function VT(){var e=Zb(),t=[0,1],r=!1,n;function a(o){var i=$K(e(o));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(o){return e.invert(yN(o))},a.domain=function(o){return arguments.length?(e.domain(o),a):e.domain()},a.range=function(o){return arguments.length?(e.range((t=Array.from(o,Cp)).map(yN)),a):t.slice()},a.rangeRound=function(o){return a.range(o).round(!0)},a.round=function(o){return arguments.length?(r=!!o,a):r},a.clamp=function(o){return arguments.length?(e.clamp(o),a):e.clamp()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return VT(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Nn.apply(a,arguments),Io(a)}function WT(){var e=[],t=[],r=[],n;function a(){var i=0,l=Math.max(1,t.length);for(r=new Array(l-1);++i<l;)r[i-1]=FQ(e,i/l);return o}function o(i){return i==null||isNaN(i=+i)?n:t[rd(r,i)]}return o.invertExtent=function(i){var l=t.indexOf(i);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},o.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let l of i)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(vo),a()},o.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},o.unknown=function(i){return arguments.length?(n=i,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return WT().domain(e).range(t).unknown(n)},Nn.apply(o,arguments)}function QT(){var e=0,t=1,r=1,n=[.5],a=[0,1],o;function i(c){return c!=null&&c<=c?a[rd(n,c,0,r)]:o}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(o=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return QT().domain([e,t]).range(a).unknown(o)},Nn.apply(Io(i),arguments)}function KT(){var e=[.5],t=[0,1],r,n=1;function a(o){return o!=null&&o<=o?t[rd(e,o,0,n)]:r}return a.domain=function(o){return arguments.length?(e=Array.from(o),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(o){return arguments.length?(t=Array.from(o),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(o){var i=t.indexOf(o);return[e[i-1],e[i]]},a.unknown=function(o){return arguments.length?(r=o,a):r},a.copy=function(){return KT().domain(e).range(t).unknown(r)},Nn.apply(a,arguments)}const Bg=new Date,zg=new Date;function Jt(e,t,r,n){function a(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(e(o=new Date(+o)),o),a.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),a.round=o=>{const i=a(o),l=a.ceil(o);return o-i<l-o?i:l},a.offset=(o,i)=>(t(o=new Date(+o),i==null?1:Math.floor(i)),o),a.range=(o,i,l)=>{const c=[];if(o=a.ceil(o),l=l==null?1:Math.floor(l),!(o<i)||!(l>0))return c;let u;do c.push(u=new Date(+o)),t(o,l),e(o);while(u<o&&o<i);return c},a.filter=o=>Jt(i=>{if(i>=i)for(;e(i),!o(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;t(i,-1),!o(i););else for(;--l>=0;)for(;t(i,1),!o(i););}),r&&(a.count=(o,i)=>(Bg.setTime(+o),zg.setTime(+i),e(Bg),e(zg),Math.floor(r(Bg,zg))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(n?i=>n(i)%o===0:i=>a.count(0,i)%o===0):a)),a}const Op=Jt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Op.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Jt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Op);Op.range;const ba=1e3,vn=ba*60,wa=vn*60,Ia=wa*24,nw=Ia*7,vN=Ia*30,qg=Ia*365,ri=Jt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ba)},(e,t)=>(t-e)/ba,e=>e.getUTCSeconds());ri.range;const aw=Jt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ba)},(e,t)=>{e.setTime(+e+t*vn)},(e,t)=>(t-e)/vn,e=>e.getMinutes());aw.range;const ow=Jt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*vn)},(e,t)=>(t-e)/vn,e=>e.getUTCMinutes());ow.range;const iw=Jt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ba-e.getMinutes()*vn)},(e,t)=>{e.setTime(+e+t*wa)},(e,t)=>(t-e)/wa,e=>e.getHours());iw.range;const sw=Jt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*wa)},(e,t)=>(t-e)/wa,e=>e.getUTCHours());sw.range;const od=Jt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vn)/Ia,e=>e.getDate()-1);od.range;const mm=Jt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ia,e=>e.getUTCDate()-1);mm.range;const GT=Jt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ia,e=>Math.floor(e/Ia));GT.range;function Oi(e){return Jt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*vn)/nw)}const gm=Oi(0),_p=Oi(1),RK=Oi(2),DK=Oi(3),Qs=Oi(4),MK=Oi(5),LK=Oi(6);gm.range;_p.range;RK.range;DK.range;Qs.range;MK.range;LK.range;function _i(e){return Jt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/nw)}const ym=_i(0),Ip=_i(1),FK=_i(2),UK=_i(3),Ks=_i(4),BK=_i(5),zK=_i(6);ym.range;Ip.range;FK.range;UK.range;Ks.range;BK.range;zK.range;const lw=Jt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());lw.range;const cw=Jt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());cw.range;const $a=Jt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$a.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});$a.range;const Ra=Jt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ra.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ra.range;function ZT(e,t,r,n,a,o){const i=[[ri,1,ba],[ri,5,5*ba],[ri,15,15*ba],[ri,30,30*ba],[o,1,vn],[o,5,5*vn],[o,15,15*vn],[o,30,30*vn],[a,1,wa],[a,3,3*wa],[a,6,6*wa],[a,12,12*wa],[n,1,Ia],[n,2,2*Ia],[r,1,nw],[t,1,vN],[t,3,3*vN],[e,1,qg]];function l(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),y=h?h.range(u,+d+1):[];return p?y.reverse():y}function c(u,d,f){const p=Math.abs(d-u)/f,h=Vb(([,,x])=>x).right(i,p);if(h===i.length)return e.every(G0(u/qg,d/qg,f));if(h===0)return Op.every(Math.max(G0(u,d,f),1));const[y,m]=i[p/i[h-1][2]<i[h][2]/p?h-1:h];return y.every(m)}return[l,c]}const[qK,HK]=ZT(Ra,cw,ym,GT,sw,ow),[VK,WK]=ZT($a,lw,gm,od,iw,aw);function Hg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Vg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ac(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function QK(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,o=e.days,i=e.shortDays,l=e.months,c=e.shortMonths,u=oc(a),d=ic(a),f=oc(o),p=ic(o),h=oc(i),y=ic(i),m=oc(l),x=ic(l),w=oc(c),v=ic(c),b={a:$,A:O,b:R,B:q,c:null,d:NN,e:NN,f:gG,g:PG,G:CG,H:pG,I:hG,j:mG,L:XT,m:yG,M:vG,p:V,q:z,Q:EN,s:CN,S:xG,u:bG,U:wG,V:SG,w:jG,W:NG,x:null,X:null,y:kG,Y:EG,Z:AG,"%":PN},j={a:J,A:W,b:F,B:H,c:null,d:kN,e:kN,f:IG,g:qG,G:VG,H:TG,I:OG,j:_G,L:JT,m:$G,M:RG,p:X,q:se,Q:EN,s:CN,S:DG,u:MG,U:LG,V:FG,w:UG,W:BG,x:null,X:null,y:zG,Y:HG,Z:WG,"%":PN},S={a:E,A:_,b:L,B:U,c:D,d:SN,e:SN,f:cG,g:wN,G:bN,H:jN,I:jN,j:oG,L:lG,m:aG,M:iG,p:C,q:nG,Q:dG,s:fG,S:sG,u:YK,U:JK,V:eG,w:XK,W:tG,x:I,X:A,y:wN,Y:bN,Z:rG,"%":uG};b.x=k(r,b),b.X=k(n,b),b.c=k(t,b),j.x=k(r,j),j.X=k(n,j),j.c=k(t,j);function k(G,oe){return function(ae){var te=[],be=-1,ge=0,je=G.length,Se,Ee,Oe;for(ae instanceof Date||(ae=new Date(+ae));++be<je;)G.charCodeAt(be)===37&&(te.push(G.slice(ge,be)),(Ee=xN[Se=G.charAt(++be)])!=null?Se=G.charAt(++be):Ee=Se==="e"?" ":"0",(Oe=oe[Se])&&(Se=Oe(ae,Ee)),te.push(Se),ge=be+1);return te.push(G.slice(ge,be)),te.join("")}}function N(G,oe){return function(ae){var te=ac(1900,void 0,1),be=P(te,G,ae+="",0),ge,je;if(be!=ae.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(oe&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(ge=Vg(ac(te.y,0,1)),je=ge.getUTCDay(),ge=je>4||je===0?Ip.ceil(ge):Ip(ge),ge=mm.offset(ge,(te.V-1)*7),te.y=ge.getUTCFullYear(),te.m=ge.getUTCMonth(),te.d=ge.getUTCDate()+(te.w+6)%7):(ge=Hg(ac(te.y,0,1)),je=ge.getDay(),ge=je>4||je===0?_p.ceil(ge):_p(ge),ge=od.offset(ge,(te.V-1)*7),te.y=ge.getFullYear(),te.m=ge.getMonth(),te.d=ge.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),je="Z"in te?Vg(ac(te.y,0,1)).getUTCDay():Hg(ac(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(je+5)%7:te.w+te.U*7-(je+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,Vg(te)):Hg(te)}}function P(G,oe,ae,te){for(var be=0,ge=oe.length,je=ae.length,Se,Ee;be<ge;){if(te>=je)return-1;if(Se=oe.charCodeAt(be++),Se===37){if(Se=oe.charAt(be++),Ee=S[Se in xN?oe.charAt(be++):Se],!Ee||(te=Ee(G,ae,te))<0)return-1}else if(Se!=ae.charCodeAt(te++))return-1}return te}function C(G,oe,ae){var te=u.exec(oe.slice(ae));return te?(G.p=d.get(te[0].toLowerCase()),ae+te[0].length):-1}function E(G,oe,ae){var te=h.exec(oe.slice(ae));return te?(G.w=y.get(te[0].toLowerCase()),ae+te[0].length):-1}function _(G,oe,ae){var te=f.exec(oe.slice(ae));return te?(G.w=p.get(te[0].toLowerCase()),ae+te[0].length):-1}function L(G,oe,ae){var te=w.exec(oe.slice(ae));return te?(G.m=v.get(te[0].toLowerCase()),ae+te[0].length):-1}function U(G,oe,ae){var te=m.exec(oe.slice(ae));return te?(G.m=x.get(te[0].toLowerCase()),ae+te[0].length):-1}function D(G,oe,ae){return P(G,t,oe,ae)}function I(G,oe,ae){return P(G,r,oe,ae)}function A(G,oe,ae){return P(G,n,oe,ae)}function $(G){return i[G.getDay()]}function O(G){return o[G.getDay()]}function R(G){return c[G.getMonth()]}function q(G){return l[G.getMonth()]}function V(G){return a[+(G.getHours()>=12)]}function z(G){return 1+~~(G.getMonth()/3)}function J(G){return i[G.getUTCDay()]}function W(G){return o[G.getUTCDay()]}function F(G){return c[G.getUTCMonth()]}function H(G){return l[G.getUTCMonth()]}function X(G){return a[+(G.getUTCHours()>=12)]}function se(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var oe=k(G+="",b);return oe.toString=function(){return G},oe},parse:function(G){var oe=N(G+="",!1);return oe.toString=function(){return G},oe},utcFormat:function(G){var oe=k(G+="",j);return oe.toString=function(){return G},oe},utcParse:function(G){var oe=N(G+="",!0);return oe.toString=function(){return G},oe}}}var xN={"-":"",_:" ",0:"0"},or=/^\s*\d+/,KK=/^%/,GK=/[\\^$*+?|[\]().{}]/g;function at(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",o=a.length;return n+(o<r?new Array(r-o+1).join(t)+a:a)}function ZK(e){return e.replace(GK,"\\$&")}function oc(e){return new RegExp("^(?:"+e.map(ZK).join("|")+")","i")}function ic(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function XK(e,t,r){var n=or.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function YK(e,t,r){var n=or.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function JK(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function eG(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function tG(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function bN(e,t,r){var n=or.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function wN(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function rG(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function nG(e,t,r){var n=or.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function aG(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function SN(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function oG(e,t,r){var n=or.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function jN(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function iG(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function sG(e,t,r){var n=or.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function lG(e,t,r){var n=or.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function cG(e,t,r){var n=or.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function uG(e,t,r){var n=KK.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function dG(e,t,r){var n=or.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function fG(e,t,r){var n=or.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function NN(e,t){return at(e.getDate(),t,2)}function pG(e,t){return at(e.getHours(),t,2)}function hG(e,t){return at(e.getHours()%12||12,t,2)}function mG(e,t){return at(1+od.count($a(e),e),t,3)}function XT(e,t){return at(e.getMilliseconds(),t,3)}function gG(e,t){return XT(e,t)+"000"}function yG(e,t){return at(e.getMonth()+1,t,2)}function vG(e,t){return at(e.getMinutes(),t,2)}function xG(e,t){return at(e.getSeconds(),t,2)}function bG(e){var t=e.getDay();return t===0?7:t}function wG(e,t){return at(gm.count($a(e)-1,e),t,2)}function YT(e){var t=e.getDay();return t>=4||t===0?Qs(e):Qs.ceil(e)}function SG(e,t){return e=YT(e),at(Qs.count($a(e),e)+($a(e).getDay()===4),t,2)}function jG(e){return e.getDay()}function NG(e,t){return at(_p.count($a(e)-1,e),t,2)}function kG(e,t){return at(e.getFullYear()%100,t,2)}function PG(e,t){return e=YT(e),at(e.getFullYear()%100,t,2)}function EG(e,t){return at(e.getFullYear()%1e4,t,4)}function CG(e,t){var r=e.getDay();return e=r>=4||r===0?Qs(e):Qs.ceil(e),at(e.getFullYear()%1e4,t,4)}function AG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function kN(e,t){return at(e.getUTCDate(),t,2)}function TG(e,t){return at(e.getUTCHours(),t,2)}function OG(e,t){return at(e.getUTCHours()%12||12,t,2)}function _G(e,t){return at(1+mm.count(Ra(e),e),t,3)}function JT(e,t){return at(e.getUTCMilliseconds(),t,3)}function IG(e,t){return JT(e,t)+"000"}function $G(e,t){return at(e.getUTCMonth()+1,t,2)}function RG(e,t){return at(e.getUTCMinutes(),t,2)}function DG(e,t){return at(e.getUTCSeconds(),t,2)}function MG(e){var t=e.getUTCDay();return t===0?7:t}function LG(e,t){return at(ym.count(Ra(e)-1,e),t,2)}function eO(e){var t=e.getUTCDay();return t>=4||t===0?Ks(e):Ks.ceil(e)}function FG(e,t){return e=eO(e),at(Ks.count(Ra(e),e)+(Ra(e).getUTCDay()===4),t,2)}function UG(e){return e.getUTCDay()}function BG(e,t){return at(Ip.count(Ra(e)-1,e),t,2)}function zG(e,t){return at(e.getUTCFullYear()%100,t,2)}function qG(e,t){return e=eO(e),at(e.getUTCFullYear()%100,t,2)}function HG(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function VG(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ks(e):Ks.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function WG(){return"+0000"}function PN(){return"%"}function EN(e){return+e}function CN(e){return Math.floor(+e/1e3)}var Vi,tO,rO;QG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function QG(e){return Vi=QK(e),tO=Vi.format,Vi.parse,rO=Vi.utcFormat,Vi.utcParse,Vi}function KG(e){return new Date(e)}function GG(e){return e instanceof Date?+e:+new Date(+e)}function uw(e,t,r,n,a,o,i,l,c,u){var d=Zb(),f=d.invert,p=d.domain,h=u(".%L"),y=u(":%S"),m=u("%I:%M"),x=u("%I %p"),w=u("%a %d"),v=u("%b %d"),b=u("%B"),j=u("%Y");function S(k){return(c(k)<k?h:l(k)<k?y:i(k)<k?m:o(k)<k?x:n(k)<k?a(k)<k?w:v:r(k)<k?b:j)(k)}return d.invert=function(k){return new Date(f(k))},d.domain=function(k){return arguments.length?p(Array.from(k,GG)):p().map(KG)},d.ticks=function(k){var N=p();return e(N[0],N[N.length-1],k??10)},d.tickFormat=function(k,N){return N==null?S:u(N)},d.nice=function(k){var N=p();return(!k||typeof k.range!="function")&&(k=t(N[0],N[N.length-1],k??10)),k?p(zT(N,k)):d},d.copy=function(){return ad(d,uw(e,t,r,n,a,o,i,l,c,u))},d}function ZG(){return Nn.apply(uw(VK,WK,$a,lw,gm,od,iw,aw,ri,tO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function XG(){return Nn.apply(uw(qK,HK,Ra,cw,ym,mm,sw,ow,ri,rO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function vm(){var e=0,t=1,r,n,a,o,i=kr,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(o(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=o(e=+e),n=o(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(p){var h,y;return arguments.length?([h,y]=p,i=f(h,y),u):[i(0),i(1)]}}return u.range=d(Al),u.rangeRound=d(Gb),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return o=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function $o(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nO(){var e=Io(vm()(kr));return e.copy=function(){return $o(e,nO())},Va.apply(e,arguments)}function aO(){var e=Jb(vm()).domain([1,10]);return e.copy=function(){return $o(e,aO()).base(e.base())},Va.apply(e,arguments)}function oO(){var e=ew(vm());return e.copy=function(){return $o(e,oO()).constant(e.constant())},Va.apply(e,arguments)}function dw(){var e=tw(vm());return e.copy=function(){return $o(e,dw()).exponent(e.exponent())},Va.apply(e,arguments)}function YG(){return dw.apply(null,arguments).exponent(.5)}function iO(){var e=[],t=kr;function r(n){if(n!=null&&!isNaN(n=+n))return t((rd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(vo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,o)=>LQ(e,o/n))},r.copy=function(){return iO(t).domain(e)},Va.apply(r,arguments)}function xm(){var e=0,t=.5,r=1,n=1,a,o,i,l,c,u=kr,d,f=!1,p;function h(m){return isNaN(m=+m)?p:(m=.5+((m=+d(m))-o)*(n*m<n*o?l:c),u(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,r]=m,a=d(e=+e),o=d(t=+t),i=d(r=+r),l=a===o?0:.5/(o-a),c=o===i?0:.5/(i-o),n=o<a?-1:1,h):[e,t,r]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(u=m,h):u};function y(m){return function(x){var w,v,b;return arguments.length?([w,v,b]=x,u=uK(m,[w,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=y(Al),h.rangeRound=y(Gb),h.unknown=function(m){return arguments.length?(p=m,h):p},function(m){return d=m,a=m(e),o=m(t),i=m(r),l=a===o?0:.5/(o-a),c=o===i?0:.5/(i-o),n=o<a?-1:1,h}}function sO(){var e=Io(xm()(kr));return e.copy=function(){return $o(e,sO())},Va.apply(e,arguments)}function lO(){var e=Jb(xm()).domain([.1,1,10]);return e.copy=function(){return $o(e,lO()).base(e.base())},Va.apply(e,arguments)}function cO(){var e=ew(xm());return e.copy=function(){return $o(e,cO()).constant(e.constant())},Va.apply(e,arguments)}function fw(){var e=tw(xm());return e.copy=function(){return $o(e,fw()).exponent(e.exponent())},Va.apply(e,arguments)}function JG(){return fw.apply(null,arguments).exponent(.5)}const AN=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pu,scaleDiverging:sO,scaleDivergingLog:lO,scaleDivergingPow:fw,scaleDivergingSqrt:JG,scaleDivergingSymlog:cO,scaleIdentity:BT,scaleImplicit:Z0,scaleLinear:Tp,scaleLog:qT,scaleOrdinal:Wb,scalePoint:Ic,scalePow:rw,scaleQuantile:WT,scaleQuantize:QT,scaleRadial:VT,scaleSequential:nO,scaleSequentialLog:aO,scaleSequentialPow:dw,scaleSequentialQuantile:iO,scaleSequentialSqrt:YG,scaleSequentialSymlog:oO,scaleSqrt:IK,scaleSymlog:HT,scaleThreshold:KT,scaleTime:ZG,scaleUtc:XG,tickFormat:UT},Symbol.toStringTag,{value:"Module"}));var eZ=bl;function tZ(e,t,r){for(var n=-1,a=e.length;++n<a;){var o=e[n],i=t(o);if(i!=null&&(l===void 0?i===i&&!eZ(i):r(i,l)))var l=i,c=o}return c}var bm=tZ;function rZ(e,t){return e>t}var uO=rZ,nZ=bm,aZ=uO,oZ=Cl;function iZ(e){return e&&e.length?nZ(e,oZ,aZ):void 0}var sZ=iZ;const wm=ot(sZ);function lZ(e,t){return e<t}var dO=lZ,cZ=bm,uZ=dO,dZ=Cl;function fZ(e){return e&&e.length?cZ(e,dZ,uZ):void 0}var pZ=fZ;const Sm=ot(pZ);var hZ=Pb,mZ=ua,gZ=xT,yZ=Lr;function vZ(e,t){var r=yZ(e)?hZ:gZ;return r(e,mZ(t))}var xZ=vZ,bZ=yT,wZ=xZ;function SZ(e,t){return bZ(wZ(e,t),1)}var jZ=SZ;const NZ=ot(jZ);var kZ=Bb;function PZ(e,t){return kZ(e,t)}var EZ=PZ;const id=ot(EZ);var Tl=1e9,CZ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hw,Et=!0,Sn="[DecimalError] ",li=Sn+"Invalid argument: ",pw=Sn+"Exponent out of range: ",Ol=Math.floor,Ko=Math.pow,AZ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Kr,tr=1e7,Nt=7,fO=9007199254740991,$p=Ol(fO/Nt),Ie={};Ie.absoluteValue=Ie.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ie.comparedTo=Ie.cmp=function(e){var t,r,n,a,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(n=o.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===a?0:n>a^o.s<0?1:-1};Ie.decimalPlaces=Ie.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Nt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ie.dividedBy=Ie.div=function(e){return Pa(this,new this.constructor(e))};Ie.dividedToIntegerBy=Ie.idiv=function(e){var t=this,r=t.constructor;return gt(Pa(t,new r(e),0,1),r.precision)};Ie.equals=Ie.eq=function(e){return!this.cmp(e)};Ie.exponent=function(){return Ht(this)};Ie.greaterThan=Ie.gt=function(e){return this.cmp(e)>0};Ie.greaterThanOrEqualTo=Ie.gte=function(e){return this.cmp(e)>=0};Ie.isInteger=Ie.isint=function(){return this.e>this.d.length-2};Ie.isNegative=Ie.isneg=function(){return this.s<0};Ie.isPositive=Ie.ispos=function(){return this.s>0};Ie.isZero=function(){return this.s===0};Ie.lessThan=Ie.lt=function(e){return this.cmp(e)<0};Ie.lessThanOrEqualTo=Ie.lte=function(e){return this.cmp(e)<1};Ie.logarithm=Ie.log=function(e){var t,r=this,n=r.constructor,a=n.precision,o=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Kr))throw Error(Sn+"NaN");if(r.s<1)throw Error(Sn+(r.s?"NaN":"-Infinity"));return r.eq(Kr)?new n(0):(Et=!1,t=Pa(vu(r,o),vu(e,o),o),Et=!0,gt(t,a))};Ie.minus=Ie.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?mO(t,e):pO(t,(e.s=-e.s,e))};Ie.modulo=Ie.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Sn+"NaN");return r.s?(Et=!1,t=Pa(r,e,0,1).times(e),Et=!0,r.minus(t)):gt(new n(r),a)};Ie.naturalExponential=Ie.exp=function(){return hO(this)};Ie.naturalLogarithm=Ie.ln=function(){return vu(this)};Ie.negated=Ie.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ie.plus=Ie.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?pO(t,e):mO(t,(e.s=-e.s,e))};Ie.precision=Ie.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(li+e);if(t=Ht(a)+1,n=a.d.length-1,r=n*Nt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ie.squareRoot=Ie.sqrt=function(){var e,t,r,n,a,o,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Sn+"NaN")}for(e=Ht(l),Et=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Yn(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Ol((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(o=n,n=o.plus(Pa(l,o,i+2)).times(.5),Yn(o.d).slice(0,i)===(t=Yn(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(gt(o,r+1,0),o.times(o).eq(l)){n=o;break}}else if(t!="9999")break;i+=4}return Et=!0,gt(n,r)};Ie.times=Ie.mul=function(e){var t,r,n,a,o,i,l,c,u,d=this,f=d.constructor,p=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=p.length,u=h.length,c<u&&(o=p,p=h,h=o,i=c,c=u,u=i),o=[],i=c+u,n=i;n--;)o.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=o[a]+h[n]*p[a-n-1]+t,o[a--]=l%tr|0,t=l/tr|0;o[a]=(o[a]+t)%tr|0}for(;!o[--i];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,Et?gt(e,f.precision):e};Ie.toDecimalPlaces=Ie.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(oa(e,0,Tl),t===void 0?t=n.rounding:oa(t,0,8),gt(r,e+Ht(r)+1,t))};Ie.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=xi(n,!0):(oa(e,0,Tl),t===void 0?t=a.rounding:oa(t,0,8),n=gt(new a(n),e+1,t),r=xi(n,!0,e+1)),r};Ie.toFixed=function(e,t){var r,n,a=this,o=a.constructor;return e===void 0?xi(a):(oa(e,0,Tl),t===void 0?t=o.rounding:oa(t,0,8),n=gt(new o(a),e+Ht(a)+1,t),r=xi(n.abs(),!1,e+Ht(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ie.toInteger=Ie.toint=function(){var e=this,t=e.constructor;return gt(new t(e),Ht(e)+1,t.rounding)};Ie.toNumber=function(){return+this};Ie.toPower=Ie.pow=function(e){var t,r,n,a,o,i,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Kr);if(l=new c(l),!l.s){if(e.s<1)throw Error(Sn+"Infinity");return l}if(l.eq(Kr))return l;if(n=c.precision,e.eq(Kr))return gt(l,n);if(t=e.e,r=e.d.length-1,i=t>=r,o=l.s,i){if((r=d<0?-d:d)<=fO){for(a=new c(Kr),t=Math.ceil(n/Nt+4),Et=!1;r%2&&(a=a.times(l),ON(a.d,t)),r=Ol(r/2),r!==0;)l=l.times(l),ON(l.d,t);return Et=!0,e.s<0?new c(Kr).div(a):gt(a,n)}}else if(o<0)throw Error(Sn+"NaN");return o=o<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Et=!1,a=e.times(vu(l,n+u)),Et=!0,a=hO(a),a.s=o,a};Ie.toPrecision=function(e,t){var r,n,a=this,o=a.constructor;return e===void 0?(r=Ht(a),n=xi(a,r<=o.toExpNeg||r>=o.toExpPos)):(oa(e,1,Tl),t===void 0?t=o.rounding:oa(t,0,8),a=gt(new o(a),e,t),r=Ht(a),n=xi(a,e<=r||r<=o.toExpNeg,e)),n};Ie.toSignificantDigits=Ie.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(oa(e,1,Tl),t===void 0?t=n.rounding:oa(t,0,8)),gt(new n(r),e,t)};Ie.toString=Ie.valueOf=Ie.val=Ie.toJSON=Ie[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ht(e),r=e.constructor;return xi(e,t<=r.toExpNeg||t>=r.toExpPos)};function pO(e,t){var r,n,a,o,i,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Et?gt(t,f):t;if(c=e.d,u=t.d,i=e.e,a=t.e,c=c.slice(),o=i-a,o){for(o<0?(n=c,o=-o,l=u.length):(n=u,a=i,l=c.length),i=Math.ceil(f/Nt),l=i>l?i+1:l+1,o>l&&(o=l,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(l=c.length,o=u.length,l-o<0&&(o=l,n=u,u=c,c=n),r=0;o;)r=(c[--o]=c[o]+u[o]+r)/tr|0,c[o]%=tr;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Et?gt(t,f):t}function oa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(li+e)}function Yn(e){var t,r,n,a=e.length-1,o="",i=e[0];if(a>0){for(o+=i,t=1;t<a;t++)n=e[t]+"",r=Nt-n.length,r&&(o+=Ya(r)),o+=n;i=e[t],n=i+"",r=Nt-n.length,r&&(o+=Ya(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return o+i}var Pa=function(){function e(n,a){var o,i=0,l=n.length;for(n=n.slice();l--;)o=n[l]*a+i,n[l]=o%tr|0,i=o/tr|0;return i&&n.unshift(i),n}function t(n,a,o,i){var l,c;if(o!=i)c=o>i?1:-1;else for(l=c=0;l<o;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,o){for(var i=0;o--;)n[o]-=i,i=n[o]<a[o]?1:0,n[o]=i*tr+n[o]-a[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,o,i){var l,c,u,d,f,p,h,y,m,x,w,v,b,j,S,k,N,P,C=n.constructor,E=n.s==a.s?1:-1,_=n.d,L=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(Sn+"Division by zero");for(c=n.e-a.e,N=L.length,S=_.length,h=new C(E),y=h.d=[],u=0;L[u]==(_[u]||0);)++u;if(L[u]>(_[u]||0)&&--c,o==null?v=o=C.precision:i?v=o+(Ht(n)-Ht(a))+1:v=o,v<0)return new C(0);if(v=v/Nt+2|0,u=0,N==1)for(d=0,L=L[0],v++;(u<S||d)&&v--;u++)b=d*tr+(_[u]||0),y[u]=b/L|0,d=b%L|0;else{for(d=tr/(L[0]+1)|0,d>1&&(L=e(L,d),_=e(_,d),N=L.length,S=_.length),j=N,m=_.slice(0,N),x=m.length;x<N;)m[x++]=0;P=L.slice(),P.unshift(0),k=L[0],L[1]>=tr/2&&++k;do d=0,l=t(L,m,N,x),l<0?(w=m[0],N!=x&&(w=w*tr+(m[1]||0)),d=w/k|0,d>1?(d>=tr&&(d=tr-1),f=e(L,d),p=f.length,x=m.length,l=t(f,m,p,x),l==1&&(d--,r(f,N<p?P:L,p))):(d==0&&(l=d=1),f=L.slice()),p=f.length,p<x&&f.unshift(0),r(m,f,x),l==-1&&(x=m.length,l=t(L,m,N,x),l<1&&(d++,r(m,N<x?P:L,x))),x=m.length):l===0&&(d++,m=[0]),y[u++]=d,l&&m[0]?m[x++]=_[j]||0:(m=[_[j]],x=1);while((j++<S||m[0]!==void 0)&&v--)}return y[0]||y.shift(),h.e=c,gt(h,i?o+Ht(h)+1:o)}}();function hO(e,t){var r,n,a,o,i,l,c=0,u=0,d=e.constructor,f=d.precision;if(Ht(e)>16)throw Error(pw+Ht(e));if(!e.s)return new d(Kr);for(t==null?(Et=!1,l=f):l=t,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(Ko(2,u))/Math.LN10*2+5|0,l+=n,r=a=o=new d(Kr),d.precision=l;;){if(a=gt(a.times(e),l),r=r.times(++c),i=o.plus(Pa(a,r,l)),Yn(i.d).slice(0,l)===Yn(o.d).slice(0,l)){for(;u--;)o=gt(o.times(o),l);return d.precision=f,t==null?(Et=!0,gt(o,f)):o}o=i}}function Ht(e){for(var t=e.e*Nt,r=e.d[0];r>=10;r/=10)t++;return t}function Wg(e,t,r){if(t>e.LN10.sd())throw Et=!0,r&&(e.precision=r),Error(Sn+"LN10 precision limit exceeded");return gt(new e(e.LN10),t)}function Ya(e){for(var t="";e--;)t+="0";return t}function vu(e,t){var r,n,a,o,i,l,c,u,d,f=1,p=10,h=e,y=h.d,m=h.constructor,x=m.precision;if(h.s<1)throw Error(Sn+(h.s?"NaN":"-Infinity"));if(h.eq(Kr))return new m(0);if(t==null?(Et=!1,u=x):u=t,h.eq(10))return t==null&&(Et=!0),Wg(m,u);if(u+=p,m.precision=u,r=Yn(y),n=r.charAt(0),o=Ht(h),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=Yn(h.d),n=r.charAt(0),f++;o=Ht(h),n>1?(h=new m("0."+r),o++):h=new m(n+"."+r.slice(1))}else return c=Wg(m,u+2,x).times(o+""),h=vu(new m(n+"."+r.slice(1)),u-p).plus(c),m.precision=x,t==null?(Et=!0,gt(h,x)):h;for(l=i=h=Pa(h.minus(Kr),h.plus(Kr),u),d=gt(h.times(h),u),a=3;;){if(i=gt(i.times(d),u),c=l.plus(Pa(i,new m(a),u)),Yn(c.d).slice(0,u)===Yn(l.d).slice(0,u))return l=l.times(2),o!==0&&(l=l.plus(Wg(m,u+2,x).times(o+""))),l=Pa(l,new m(f),u),m.precision=x,t==null?(Et=!0,gt(l,x)):l;l=c,a+=2}}function TN(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Ol(r/Nt),e.d=[],n=(r+1)%Nt,r<0&&(n+=Nt),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Nt;n<a;)e.d.push(+t.slice(n,n+=Nt));t=t.slice(n),n=Nt-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Et&&(e.e>$p||e.e<-$p))throw Error(pw+r)}else e.s=0,e.e=0,e.d=[0];return e}function gt(e,t,r){var n,a,o,i,l,c,u,d,f=e.d;for(i=1,o=f[0];o>=10;o/=10)i++;if(n=t-i,n<0)n+=Nt,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Nt),o=f.length,d>=o)return e;for(u=o=f[d],i=1;o>=10;o/=10)i++;n%=Nt,a=n-Nt+i}if(r!==void 0&&(o=Ko(10,i-a-1),l=u/o%10|0,c=t<0||f[d+1]!==void 0||u%o,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Ko(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(o=Ht(e),f.length=1,t=t-o-1,f[0]=Ko(10,(Nt-t%Nt)%Nt),e.e=Ol(-t/Nt)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,o=1,d--):(f.length=d+1,o=Ko(10,Nt-n),f[d]=a>0?(u/Ko(10,i-a)%Ko(10,a)|0)*o:0),c)for(;;)if(d==0){(f[0]+=o)==tr&&(f[0]=1,++e.e);break}else{if(f[d]+=o,f[d]!=tr)break;f[d--]=0,o=1}for(n=f.length;f[--n]===0;)f.pop();if(Et&&(e.e>$p||e.e<-$p))throw Error(pw+Ht(e));return e}function mO(e,t){var r,n,a,o,i,l,c,u,d,f,p=e.constructor,h=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Et?gt(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(h/Nt),l)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(o=a;o&&c[--o]===0;)c[o]=tr-1;--c[o],c[a]+=tr}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Et?gt(t,h):t):new p(0)}function xi(e,t,r){var n,a=Ht(e),o=Yn(e.d),i=o.length;return t?(r&&(n=r-i)>0?o=o.charAt(0)+"."+o.slice(1)+Ya(n):i>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(a<0?"e":"e+")+a):a<0?(o="0."+Ya(-a-1)+o,r&&(n=r-i)>0&&(o+=Ya(n))):a>=i?(o+=Ya(a+1-i),r&&(n=r-a-1)>0&&(o=o+"."+Ya(n))):((n=a+1)<i&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(o+="."),o+=Ya(n))),e.s<0?"-"+o:o}function ON(e,t){if(e.length>t)return e.length=t,!0}function gO(e){var t,r,n;function a(o){var i=this;if(!(i instanceof a))return new a(o);if(i.constructor=a,o instanceof a){i.s=o.s,i.e=o.e,i.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(li+o);if(o>0)i.s=1;else if(o<0)o=-o,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(o===~~o&&o<1e7){i.e=0,i.d=[o];return}return TN(i,o.toString())}else if(typeof o!="string")throw Error(li+o);if(o.charCodeAt(0)===45?(o=o.slice(1),i.s=-1):i.s=1,AZ.test(o))TN(i,o);else throw Error(li+o)}if(a.prototype=Ie,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=gO,a.config=a.set=TZ,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function TZ(e){if(!e||typeof e!="object")throw Error(Sn+"Object expected");var t,r,n,a=["precision",1,Tl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Ol(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(li+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(li+r+": "+n);return this}var hw=gO(CZ);Kr=new hw(1);const mt=hw;function OZ(e){return RZ(e)||$Z(e)||IZ(e)||_Z()}function _Z(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IZ(e,t){if(e){if(typeof e=="string")return ev(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ev(e,t)}}function $Z(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function RZ(e){if(Array.isArray(e))return ev(e)}function ev(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var DZ=function(t){return t},yO={"@@functional/placeholder":!0},vO=function(t){return t===yO},_N=function(t){return function r(){return arguments.length===0||arguments.length===1&&vO(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},MZ=function e(t,r){return t===1?r:_N(function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];var i=a.filter(function(l){return l!==yO}).length;return i>=t?r.apply(void 0,a):e(t-i,_N(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return vO(f)?c.shift():f});return r.apply(void 0,OZ(d).concat(c))}))})},jm=function(t){return MZ(t.length,t)},tv=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},LZ=jm(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),FZ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return DZ;var a=r.reverse(),o=a[0],i=a.slice(1);return function(){return i.reduce(function(l,c){return c(l)},o.apply(void 0,arguments))}},rv=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},xO=function(t){var r=null,n=null;return function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return r&&o.every(function(l,c){return l===r[c]})||(r=o,n=t.apply(void 0,o)),n}};function UZ(e){var t;return e===0?t=1:t=Math.floor(new mt(e).abs().log(10).toNumber())+1,t}function BZ(e,t,r){for(var n=new mt(e),a=0,o=[];n.lt(t)&&a<1e5;)o.push(n.toNumber()),n=n.add(r),a++;return o}var zZ=jm(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),qZ=jm(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),HZ=jm(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Nm={rangeStep:BZ,getDigitCount:UZ,interpolateNumber:zZ,uninterpolateNumber:qZ,uninterpolateTruncation:HZ};function nv(e){return QZ(e)||WZ(e)||bO(e)||VZ()}function VZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WZ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function QZ(e){if(Array.isArray(e))return av(e)}function xu(e,t){return ZZ(e)||GZ(e,t)||bO(e,t)||KZ()}function KZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bO(e,t){if(e){if(typeof e=="string")return av(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return av(e,t)}}function av(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GZ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,o=void 0;try{for(var i=e[Symbol.iterator](),l;!(n=(l=i.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,o=c}finally{try{!n&&i.return!=null&&i.return()}finally{if(a)throw o}}return r}}function ZZ(e){if(Array.isArray(e))return e}function wO(e){var t=xu(e,2),r=t[0],n=t[1],a=r,o=n;return r>n&&(a=n,o=r),[a,o]}function SO(e,t,r){if(e.lte(0))return new mt(0);var n=Nm.getDigitCount(e.toNumber()),a=new mt(10).pow(n),o=e.div(a),i=n!==1?.05:.1,l=new mt(Math.ceil(o.div(i).toNumber())).add(r).mul(i),c=l.mul(a);return t?c:new mt(Math.ceil(c))}function XZ(e,t,r){var n=1,a=new mt(e);if(!a.isint()&&r){var o=Math.abs(e);o<1?(n=new mt(10).pow(Nm.getDigitCount(e)-1),a=new mt(Math.floor(a.div(n).toNumber())).mul(n)):o>1&&(a=new mt(Math.floor(e)))}else e===0?a=new mt(Math.floor((t-1)/2)):r||(a=new mt(Math.floor(e)));var i=Math.floor((t-1)/2),l=FZ(LZ(function(c){return a.add(new mt(c-i).mul(n)).toNumber()}),tv);return l(0,t)}function jO(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var o=SO(new mt(t).sub(e).div(r-1),n,a),i;e<=0&&t>=0?i=new mt(0):(i=new mt(e).add(t).div(2),i=i.sub(new mt(i).mod(o)));var l=Math.ceil(i.sub(e).div(o).toNumber()),c=Math.ceil(new mt(t).sub(i).div(o).toNumber()),u=l+c+1;return u>r?jO(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:o,tickMin:i.sub(new mt(l).mul(o)),tickMax:i.add(new mt(c).mul(o))})}function YZ(e){var t=xu(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),l=wO([r,n]),c=xu(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(nv(tv(0,a-1).map(function(){return 1/0}))):[].concat(nv(tv(0,a-1).map(function(){return-1/0})),[d]);return r>n?rv(f):f}if(u===d)return XZ(u,a,o);var p=jO(u,d,i,o),h=p.step,y=p.tickMin,m=p.tickMax,x=Nm.rangeStep(y,m.add(new mt(.1).mul(h)),h);return r>n?rv(x):x}function JZ(e,t){var r=xu(e,2),n=r[0],a=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=wO([n,a]),l=xu(i,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=SO(new mt(u).sub(c).div(d-1),o,0),p=[].concat(nv(Nm.rangeStep(new mt(c),new mt(u).sub(new mt(.99).mul(f)),f)),[u]);return n>a?rv(p):p}var eX=xO(YZ),tX=xO(JZ),rX="Invariant failed";function bi(e,t){throw new Error(rX)}var nX=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Gs(e){"@babel/helpers - typeof";return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gs(e)}function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rp.apply(this,arguments)}function aX(e,t){return lX(e)||sX(e,t)||iX(e,t)||oX()}function oX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iX(e,t){if(e){if(typeof e=="string")return IN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IN(e,t)}}function IN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function lX(e){if(Array.isArray(e))return e}function cX(e,t){if(e==null)return{};var r=uX(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function dX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PO(n.key),n)}}function pX(e,t,r){return t&&fX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hX(e,t,r){return t=Dp(t),mX(e,NO()?Reflect.construct(t,r||[],Dp(e).constructor):t.apply(e,r))}function mX(e,t){if(t&&(Gs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gX(e)}function gX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NO=function(){return!!e})()}function Dp(e){return Dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dp(e)}function yX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ov(e,t)}function ov(e,t){return ov=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ov(e,t)}function kO(e,t,r){return t=PO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PO(e){var t=vX(e,"string");return Gs(t)=="symbol"?t:t+""}function vX(e,t){if(Gs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sd=function(e){function t(){return dX(this,t),hX(this,t,arguments)}return yX(t,e),pX(t,[{key:"render",value:function(){var n=this.props,a=n.offset,o=n.layout,i=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,p=cX(n,nX),h=Fe(p,!1);this.props.direction==="x"&&d.type!=="number"&&bi();var y=c.map(function(m){var x=u(m,l),w=x.x,v=x.y,b=x.value,j=x.errorVal;if(!j)return null;var S=[],k,N;if(Array.isArray(j)){var P=aX(j,2);k=P[0],N=P[1]}else k=N=j;if(o==="vertical"){var C=d.scale,E=v+a,_=E+i,L=E-i,U=C(b-k),D=C(b+N);S.push({x1:D,y1:_,x2:D,y2:L}),S.push({x1:U,y1:E,x2:D,y2:E}),S.push({x1:U,y1:_,x2:U,y2:L})}else if(o==="horizontal"){var I=f.scale,A=w+a,$=A-i,O=A+i,R=I(b-k),q=I(b+N);S.push({x1:$,y1:q,x2:O,y2:q}),S.push({x1:A,y1:R,x2:A,y2:q}),S.push({x1:$,y1:R,x2:O,y2:R})}return B.createElement(nt,Rp({className:"recharts-errorBar",key:"bar-".concat(S.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},h),S.map(function(V){return B.createElement("line",Rp({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return B.createElement(nt,{className:"recharts-errorBars"},y)}}])}(B.Component);kO(sd,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});kO(sd,"displayName","ErrorBar");function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function $N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$N(Object(r),!0).forEach(function(n){xX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xX(e,t,r){return t=bX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bX(e){var t=wX(e,"string");return bu(t)=="symbol"?t:t+""}function wX(e,t){if(bu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EO=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,o=t.legendContent,i=Hr(r,ka);if(!i)return null;var l=ka.defaultProps,c=l!==void 0?Bo(Bo({},l),i.props):{},u;return i.props&&i.props.payload?u=i.props&&i.props.payload:o==="children"?u=(n||[]).reduce(function(d,f){var p=f.item,h=f.props,y=h.sectors||h.data||[];return d.concat(y.map(function(m){return{type:i.props.iconType||p.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(n||[]).map(function(d){var f=d.item,p=f.type.defaultProps,h=p!==void 0?Bo(Bo({},p),f.props):{},y=h.dataKey,m=h.name,x=h.legendType,w=h.hide;return{inactive:w,dataKey:y,type:c.iconType||x||"square",color:mw(f),value:m||y,payload:h}}),Bo(Bo(Bo({},c),ka.getWithHeight(i,a)),{},{payload:u,item:i})};function wu(e){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(e)}function RN(e){return kX(e)||NX(e)||jX(e)||SX()}function SX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jX(e,t){if(e){if(typeof e=="string")return iv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iv(e,t)}}function NX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kX(e){if(Array.isArray(e))return iv(e)}function iv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function DN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DN(Object(r),!0).forEach(function(n){As(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function As(e,t,r){return t=PX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PX(e){var t=EX(e,"string");return wu(t)=="symbol"?t:t+""}function EX(e,t){if(wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zt(e,t,r){return Qe(e)||Qe(t)?r:Yt(t)?Yr(e,t,r):ze(t)?t(e):r}function $c(e,t,r,n){var a=NZ(e,function(l){return Zt(l,t)});if(r==="number"){var o=a.filter(function(l){return Pe(l)||parseFloat(l)});return o.length?[Sm(o),wm(o)]:[1/0,-1/0]}var i=n?a.filter(function(l){return!Qe(l)}):a;return i.map(function(l){return Yt(l)||l instanceof Date?l:""})}var CX=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var c=o.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,p=u>=l-1?a[0].coordinate:a[u+1].coordinate,h=void 0;if(jr(f-d)!==jr(p-f)){var y=[];if(jr(p-f)===jr(c[1]-c[0])){h=p;var m=f+c[1]-c[0];y[0]=Math.min(m,(m+d)/2),y[1]=Math.max(m,(m+d)/2)}else{h=d;var x=p+c[1]-c[0];y[0]=Math.min(f,(x+f)/2),y[1]=Math.max(f,(x+f)/2)}var w=[Math.min(f,(h+f)/2),Math.max(f,(h+f)/2)];if(t>w[0]&&t<=w[1]||t>=y[0]&&t<=y[1]){i=a[u].index;break}}else{var v=Math.min(d,p),b=Math.max(d,p);if(t>(v+f)/2&&t<=(b+f)/2){i=a[u].index;break}}}else for(var j=0;j<l;j++)if(j===0&&t<=(n[j].coordinate+n[j+1].coordinate)/2||j>0&&j<l-1&&t>(n[j].coordinate+n[j-1].coordinate)/2&&t<=(n[j].coordinate+n[j+1].coordinate)/2||j===l-1&&t>(n[j].coordinate+n[j-1].coordinate)/2){i=n[j].index;break}return i},mw=function(t){var r,n=t,a=n.type.displayName,o=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Rt(Rt({},t.type.defaultProps),t.props):t.props,i=o.stroke,l=o.fill,c;switch(a){case"Line":c=i;break;case"Area":case"Radar":c=i&&i!=="none"?i:l;break;default:c=l;break}return c},AX=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,o=a===void 0?{}:a;if(!o)return{};for(var i={},l=Object.keys(o),c=0,u=l.length;c<u;c++)for(var d=o[l[c]].stackGroups,f=Object.keys(d),p=0,h=f.length;p<h;p++){var y=d[f[p]],m=y.items,x=y.cateAxisId,w=m.filter(function(N){return Na(N.type).indexOf("Bar")>=0});if(w&&w.length){var v=w[0].type.defaultProps,b=v!==void 0?Rt(Rt({},v),w[0].props):w[0].props,j=b.barSize,S=b[x];i[S]||(i[S]=[]);var k=Qe(j)?r:j;i[S].push({item:w[0],stackList:w.slice(1),barSize:Qe(k)?void 0:Nr(k,n,0)})}}return i},TX=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,o=t.sizeList,i=o===void 0?[]:o,l=t.maxBarSize,c=i.length;if(c<1)return null;var u=Nr(r,a,0,!0),d,f=[];if(i[0].barSize===+i[0].barSize){var p=!1,h=a/c,y=i.reduce(function(j,S){return j+S.barSize||0},0);y+=(c-1)*u,y>=a&&(y-=(c-1)*u,u=0),y>=a&&h>0&&(p=!0,h*=.9,y=c*h);var m=(a-y)/2>>0,x={offset:m-u,size:0};d=i.reduce(function(j,S){var k={item:S.item,position:{offset:x.offset+x.size+u,size:p?h:S.barSize}},N=[].concat(RN(j),[k]);return x=N[N.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){N.push({item:P,position:x})}),N},f)}else{var w=Nr(n,a,0,!0);a-2*w-(c-1)*u<=0&&(u=0);var v=(a-2*w-(c-1)*u)/c;v>1&&(v>>=0);var b=l===+l?Math.min(v,l):v;d=i.reduce(function(j,S,k){var N=[].concat(RN(j),[{item:S.item,position:{offset:w+(v+u)*k+(v-b)/2,size:b}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){N.push({item:P,position:N[N.length-1].position})}),N},f)}return d},OX=function(t,r,n,a){var o=n.children,i=n.width,l=n.margin,c=i-(l.left||0)-(l.right||0),u=EO({children:o,legendWidth:c});if(u){var d=a||{},f=d.width,p=d.height,h=u.align,y=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&y==="middle")&&h!=="center"&&Pe(t[h]))return Rt(Rt({},t),{},As({},h,t[h]+(f||0)));if((m==="horizontal"||m==="vertical"&&h==="center")&&y!=="middle"&&Pe(t[y]))return Rt(Rt({},t),{},As({},y,t[y]+(p||0)))}return t},_X=function(t,r,n){return Qe(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},CO=function(t,r,n,a,o){var i=r.props.children,l=Jr(i,sd).filter(function(u){return _X(a,o,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Zt(d,n);if(Qe(f))return u;var p=Array.isArray(f)?[Sm(f),wm(f)]:[f,f],h=c.reduce(function(y,m){var x=Zt(d,m,0),w=p[0]-Math.abs(Array.isArray(x)?x[0]:x),v=p[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(w,y[0]),Math.max(v,y[1])]},[1/0,-1/0]);return[Math.min(h[0],u[0]),Math.max(h[1],u[1])]},[1/0,-1/0])}return null},IX=function(t,r,n,a,o){var i=r.map(function(l){return CO(t,l,n,o,a)}).filter(function(l){return!Qe(l)});return i&&i.length?i.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},AO=function(t,r,n,a,o){var i=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&CO(t,c,u,a)||$c(t,u,n,o)});if(n==="number")return i.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return i.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},TO=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},OO=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var o,i,l=t.map(function(c){return c.coordinate===r&&(o=!0),c.coordinate===n&&(i=!0),c.coordinate});return o||l.push(r),i||l.push(n),l},Sa=function(t,r,n){if(!t)return null;var a=t.scale,o=t.duplicateDomain,i=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&i==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?jr(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var p=o?o.indexOf(f):f;return{coordinate:a(p)+u,value:f,offset:u}});return d.filter(function(f){return!Ju(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,p){return{coordinate:a(f)+u,value:f,index:p,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,p){return{coordinate:a(f)+u,value:o?o[f]:f,index:p,offset:u}})},Qg=new WeakMap,qd=function(t,r){if(typeof r!="function")return t;Qg.has(t)||Qg.set(t,new WeakMap);var n=Qg.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},_O=function(t,r,n){var a=t.scale,o=t.type,i=t.layout,l=t.axisType;if(a==="auto")return i==="radial"&&l==="radiusAxis"?{scale:pu(),realScaleType:"band"}:i==="radial"&&l==="angleAxis"?{scale:Tp(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Ic(),realScaleType:"point"}:o==="category"?{scale:pu(),realScaleType:"band"}:{scale:Tp(),realScaleType:"linear"};if(Yu(a)){var c="scale".concat(sm(a));return{scale:(AN[c]||Ic)(),realScaleType:AN[c]?c:"point"}}return ze(a)?{scale:a}:{scale:Ic(),realScaleType:"point"}},MN=1e-4,IO=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),o=Math.min(a[0],a[1])-MN,i=Math.max(a[0],a[1])+MN,l=t(r[0]),c=t(r[n-1]);(l<o||l>i||c<o||c>i)&&t.domain([r[0],r[n-1]])}},$X=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},RX=function(t,r){if(!r||r.length!==2||!Pe(r[0])||!Pe(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),o=[t[0],t[1]];return(!Pe(t[0])||t[0]<n)&&(o[0]=n),(!Pe(t[1])||t[1]>a)&&(o[1]=a),o[0]>a&&(o[0]=a),o[1]<n&&(o[1]=n),o},DX=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var o=0,i=0,l=0;l<r;++l){var c=Ju(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1]):(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1])}},MX=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var o=0,i=0;i<r;++i){var l=Ju(t[i][n][1])?t[i][n][0]:t[i][n][1];l>=0?(t[i][n][0]=o,t[i][n][1]=o+l,o=t[i][n][1]):(t[i][n][0]=0,t[i][n][1]=0)}},LX={sign:DX,expand:nB,none:Bs,silhouette:aB,wiggle:oB,positive:MX},FX=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),o=LX[n],i=rB().keys(a).value(function(l,c){return+Zt(l,c,0)}).order(O0).offset(o);return i(t)},UX=function(t,r,n,a,o,i){if(!t)return null;var l=i?r.reverse():r,c={},u=l.reduce(function(f,p){var h,y=(h=p.type)!==null&&h!==void 0&&h.defaultProps?Rt(Rt({},p.type.defaultProps),p.props):p.props,m=y.stackId,x=y.hide;if(x)return f;var w=y[n],v=f[w]||{hasStack:!1,stackGroups:{}};if(Yt(m)){var b=v.stackGroups[m]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(p),v.hasStack=!0,v.stackGroups[m]=b}else v.stackGroups[kl("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[p]};return Rt(Rt({},f),{},As({},w,v))},c),d={};return Object.keys(u).reduce(function(f,p){var h=u[p];if(h.hasStack){var y={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(m,x){var w=h.stackGroups[x];return Rt(Rt({},m),{},As({},x,{numericAxisId:n,cateAxisId:a,items:w.items,stackedData:FX(t,w.items,o)}))},y)}return Rt(Rt({},f),{},As({},p,h))},d)},$O=function(t,r){var n=r.realScaleType,a=r.type,o=r.tickCount,i=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(o&&a==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=eX(u,o,l);return t.domain([Sm(d),wm(d)]),{niceTicks:d}}if(o&&a==="number"){var f=t.domain(),p=tX(f,o,l);return{niceTicks:p}}return null};function LN(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,o=e.index,i=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qe(a[t.dataKey])){var l=cp(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[o]?r[o].coordinate+n/2:null}var c=Zt(a,Qe(i)?t.dataKey:i);return Qe(c)?null:t.scale(c)}var FN=function(t){var r=t.axis,n=t.ticks,a=t.offset,o=t.bandSize,i=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=Zt(i,r.dataKey,r.domain[l]);return Qe(c)?null:r.scale(c)-o/2+a},BX=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return a<=0&&o>=0?0:o<0?o:a}return n[0]},zX=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Rt(Rt({},t.type.defaultProps),t.props):t.props,o=a.stackId;if(Yt(o)){var i=r[o];if(i){var l=i.items.indexOf(t);return l>=0?i.stackedData[l]:null}}return null},qX=function(t){return t.reduce(function(r,n){return[Sm(n.concat([r[0]]).filter(Pe)),wm(n.concat([r[1]]).filter(Pe))]},[1/0,-1/0])},RO=function(t,r,n){return Object.keys(t).reduce(function(a,o){var i=t[o],l=i.stackedData,c=l.reduce(function(u,d){var f=qX(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},UN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,BN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sv=function(t,r,n){if(ze(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Pe(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(UN.test(t[0])){var o=+UN.exec(t[0])[1];a[0]=r[0]-o}else ze(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Pe(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(BN.test(t[1])){var i=+BN.exec(t[1])[1];a[1]=r[1]+i}else ze(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Mp=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var o=qb(r,function(f){return f.coordinate}),i=1/0,l=1,c=o.length;l<c;l++){var u=o[l],d=o[l-1];i=Math.min((u.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0},zN=function(t,r,n){return!t||!t.length||id(t,Yr(n,"type.defaultProps.domain"))?r:t},DO=function(t,r){var n=t.type.defaultProps?Rt(Rt({},t.type.defaultProps),t.props):t.props,a=n.dataKey,o=n.name,i=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Rt(Rt({},Fe(t,!1)),{},{dataKey:a,unit:i,formatter:l,name:o||a,color:mw(t),value:Zt(r,a),type:c,payload:r,chartType:u,hide:d})};function Su(e){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(e)}function qN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qN(Object(r),!0).forEach(function(n){MO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MO(e,t,r){return t=HX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HX(e){var t=VX(e,"string");return Su(t)=="symbol"?t:t+""}function VX(e,t){if(Su(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WX(e,t){return ZX(e)||GX(e,t)||KX(e,t)||QX()}function QX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KX(e,t){if(e){if(typeof e=="string")return HN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HN(e,t)}}function HN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function ZX(e){if(Array.isArray(e))return e}var Lp=Math.PI/180,XX=function(t){return t*180/Math.PI},wt=function(t,r,n,a){return{x:t+Math.cos(-Lp*a)*n,y:r+Math.sin(-Lp*a)*n}},LO=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},YX=function(t,r,n,a,o){var i=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=Nr(t.cx,i,i/2),f=Nr(t.cy,l,l/2),p=LO(i,l,n),h=Nr(t.innerRadius,p,0),y=Nr(t.outerRadius,p,p*.8),m=Object.keys(r);return m.reduce(function(x,w){var v=r[w],b=v.domain,j=v.reversed,S;if(Qe(v.range))a==="angleAxis"?S=[c,u]:a==="radiusAxis"&&(S=[h,y]),j&&(S=[S[1],S[0]]);else{S=v.range;var k=S,N=WX(k,2);c=N[0],u=N[1]}var P=_O(v,o),C=P.realScaleType,E=P.scale;E.domain(b).range(S),IO(E);var _=$O(E,ga(ga({},v),{},{realScaleType:C})),L=ga(ga(ga({},v),_),{},{range:S,radius:y,realScaleType:C,scale:E,cx:d,cy:f,innerRadius:h,outerRadius:y,startAngle:c,endAngle:u});return ga(ga({},x),{},MO({},w,L))},{})},JX=function(t,r){var n=t.x,a=t.y,o=r.x,i=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(a-i,2))},eY=function(t,r){var n=t.x,a=t.y,o=r.cx,i=r.cy,l=JX({x:n,y:a},{x:o,y:i});if(l<=0)return{radius:l};var c=(n-o)/l,u=Math.acos(c);return a>i&&(u=2*Math.PI-u),{radius:l,angle:XX(u),angleInRadian:u}},tY=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),o=Math.floor(n/360),i=Math.min(a,o);return{startAngle:r-i*360,endAngle:n-i*360}},rY=function(t,r){var n=r.startAngle,a=r.endAngle,o=Math.floor(n/360),i=Math.floor(a/360),l=Math.min(o,i);return t+l*360},VN=function(t,r){var n=t.x,a=t.y,o=eY({x:n,y:a},r),i=o.radius,l=o.angle,c=r.innerRadius,u=r.outerRadius;if(i<c||i>u)return!1;if(i===0)return!0;var d=tY(r),f=d.startAngle,p=d.endAngle,h=l,y;if(f<=p){for(;h>p;)h-=360;for(;h<f;)h+=360;y=h>=f&&h<=p}else{for(;h>f;)h-=360;for(;h<p;)h+=360;y=h>=p&&h<=f}return y?ga(ga({},r),{},{radius:i,angle:rY(h,r)}):null},FO=function(t){return!g.isValidElement(t)&&!ze(t)&&typeof t!="boolean"?t.className:""};function ju(e){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ju(e)}var nY=["offset"];function aY(e){return lY(e)||sY(e)||iY(e)||oY()}function oY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iY(e,t){if(e){if(typeof e=="string")return lv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lv(e,t)}}function sY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lY(e){if(Array.isArray(e))return lv(e)}function lv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cY(e,t){if(e==null)return{};var r=uY(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function WN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WN(Object(r),!0).forEach(function(n){dY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dY(e,t,r){return t=fY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fY(e){var t=pY(e,"string");return ju(t)=="symbol"?t:t+""}function pY(e,t){if(ju(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nu(){return Nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nu.apply(this,arguments)}var hY=function(t){var r=t.value,n=t.formatter,a=Qe(t.children)?r:t.children;return ze(n)?n(a):a},mY=function(t,r){var n=jr(r-t),a=Math.min(Math.abs(r-t),360);return n*a},gY=function(t,r,n){var a=t.position,o=t.viewBox,i=t.offset,l=t.className,c=o,u=c.cx,d=c.cy,f=c.innerRadius,p=c.outerRadius,h=c.startAngle,y=c.endAngle,m=c.clockWise,x=(f+p)/2,w=mY(h,y),v=w>=0?1:-1,b,j;a==="insideStart"?(b=h+v*i,j=m):a==="insideEnd"?(b=y-v*i,j=!m):a==="end"&&(b=y+v*i,j=m),j=w<=0?j:!j;var S=wt(u,d,x,b),k=wt(u,d,x,b+(j?1:-1)*359),N="M".concat(S.x,",").concat(S.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(j?0:1,`,
    `).concat(k.x,",").concat(k.y),P=Qe(t.id)?kl("recharts-radial-line-"):t.id;return B.createElement("text",Nu({},n,{dominantBaseline:"central",className:Ge("recharts-radial-bar-label",l)}),B.createElement("defs",null,B.createElement("path",{id:P,d:N})),B.createElement("textPath",{xlinkHref:"#".concat(P)},r))},yY=function(t){var r=t.viewBox,n=t.offset,a=t.position,o=r,i=o.cx,l=o.cy,c=o.innerRadius,u=o.outerRadius,d=o.startAngle,f=o.endAngle,p=(d+f)/2;if(a==="outside"){var h=wt(i,l,u+n,p),y=h.x,m=h.y;return{x:y,y:m,textAnchor:y>=i?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:i,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,w=wt(i,l,x,p),v=w.x,b=w.y;return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},vY=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,o=t.position,i=r,l=i.x,c=i.y,u=i.width,d=i.height,f=d>=0?1:-1,p=f*a,h=f>0?"end":"start",y=f>0?"start":"end",m=u>=0?1:-1,x=m*a,w=m>0?"end":"start",v=m>0?"start":"end";if(o==="top"){var b={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:h};return Qt(Qt({},b),n?{height:Math.max(c-n.y,0),width:u}:{})}if(o==="bottom"){var j={x:l+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:y};return Qt(Qt({},j),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(o==="left"){var S={x:l-x,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return Qt(Qt({},S),n?{width:Math.max(S.x-n.x,0),height:d}:{})}if(o==="right"){var k={x:l+u+x,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return Qt(Qt({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:d}:{})}var N=n?{width:u,height:d}:{};return o==="insideLeft"?Qt({x:l+x,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},N):o==="insideRight"?Qt({x:l+u-x,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},N):o==="insideTop"?Qt({x:l+u/2,y:c+p,textAnchor:"middle",verticalAnchor:y},N):o==="insideBottom"?Qt({x:l+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:h},N):o==="insideTopLeft"?Qt({x:l+x,y:c+p,textAnchor:v,verticalAnchor:y},N):o==="insideTopRight"?Qt({x:l+u-x,y:c+p,textAnchor:w,verticalAnchor:y},N):o==="insideBottomLeft"?Qt({x:l+x,y:c+d-p,textAnchor:v,verticalAnchor:h},N):o==="insideBottomRight"?Qt({x:l+u-x,y:c+d-p,textAnchor:w,verticalAnchor:h},N):wl(o)&&(Pe(o.x)||ei(o.x))&&(Pe(o.y)||ei(o.y))?Qt({x:l+Nr(o.x,u),y:c+Nr(o.y,d),textAnchor:"end",verticalAnchor:"end"},N):Qt({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},N)},xY=function(t){return"cx"in t&&Pe(t.cx)};function nr(e){var t=e.offset,r=t===void 0?5:t,n=cY(e,nY),a=Qt({offset:r},n),o=a.viewBox,i=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,p=a.textBreakAll;if(!o||Qe(l)&&Qe(c)&&!g.isValidElement(u)&&!ze(u))return null;if(g.isValidElement(u))return g.cloneElement(u,a);var h;if(ze(u)){if(h=g.createElement(u,a),g.isValidElement(h))return h}else h=hY(a);var y=xY(o),m=Fe(a,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return gY(a,h,m);var x=y?yY(a):vY(a);return B.createElement(vi,Nu({className:Ge("recharts-label",f)},m,x,{breakAll:p}),h)}nr.displayName="Label";var UO=function(t){var r=t.cx,n=t.cy,a=t.angle,o=t.startAngle,i=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,p=t.y,h=t.top,y=t.left,m=t.width,x=t.height,w=t.clockWise,v=t.labelViewBox;if(v)return v;if(Pe(m)&&Pe(x)){if(Pe(f)&&Pe(p))return{x:f,y:p,width:m,height:x};if(Pe(h)&&Pe(y))return{x:h,y,width:m,height:x}}return Pe(f)&&Pe(p)?{x:f,y:p,width:0,height:0}:Pe(r)&&Pe(n)?{cx:r,cy:n,startAngle:o||a||0,endAngle:i||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:w}:t.viewBox?t.viewBox:{}},bY=function(t,r){return t?t===!0?B.createElement(nr,{key:"label-implicit",viewBox:r}):Yt(t)?B.createElement(nr,{key:"label-implicit",viewBox:r,value:t}):g.isValidElement(t)?t.type===nr?g.cloneElement(t,{key:"label-implicit",viewBox:r}):B.createElement(nr,{key:"label-implicit",content:t,viewBox:r}):ze(t)?B.createElement(nr,{key:"label-implicit",content:t,viewBox:r}):wl(t)?B.createElement(nr,Nu({viewBox:r},t,{key:"label-implicit"})):null:null},wY=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,o=UO(t),i=Jr(a,nr).map(function(c,u){return g.cloneElement(c,{viewBox:r||o,key:"label-".concat(u)})});if(!n)return i;var l=bY(t.label,r||o);return[l].concat(aY(i))};nr.parseViewBox=UO;nr.renderCallByParent=wY;function SY(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var jY=SY;const NY=ot(jY);function ku(e){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(e)}var kY=["valueAccessor"],PY=["data","dataKey","clockWise","id","textBreakAll"];function EY(e){return OY(e)||TY(e)||AY(e)||CY()}function CY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AY(e,t){if(e){if(typeof e=="string")return cv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cv(e,t)}}function TY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OY(e){if(Array.isArray(e))return cv(e)}function cv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fp(){return Fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fp.apply(this,arguments)}function QN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function KN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QN(Object(r),!0).forEach(function(n){_Y(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Y(e,t,r){return t=IY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IY(e){var t=$Y(e,"string");return ku(t)=="symbol"?t:t+""}function $Y(e,t){if(ku(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GN(e,t){if(e==null)return{};var r=RY(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function RY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var DY=function(t){return Array.isArray(t.value)?NY(t.value):t.value};function Ea(e){var t=e.valueAccessor,r=t===void 0?DY:t,n=GN(e,kY),a=n.data,o=n.dataKey,i=n.clockWise,l=n.id,c=n.textBreakAll,u=GN(n,PY);return!a||!a.length?null:B.createElement(nt,{className:"recharts-label-list"},a.map(function(d,f){var p=Qe(o)?r(d,f):Zt(d&&d.payload,o),h=Qe(l)?{}:{id:"".concat(l,"-").concat(f)};return B.createElement(nr,Fp({},Fe(d,!0),u,h,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:nr.parseViewBox(Qe(i)?d:KN(KN({},d),{},{clockWise:i})),key:"label-".concat(f),index:f}))}))}Ea.displayName="LabelList";function MY(e,t){return e?e===!0?B.createElement(Ea,{key:"labelList-implicit",data:t}):B.isValidElement(e)||ze(e)?B.createElement(Ea,{key:"labelList-implicit",data:t,content:e}):wl(e)?B.createElement(Ea,Fp({data:t},e,{key:"labelList-implicit"})):null:null}function LY(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Jr(n,Ea).map(function(i,l){return g.cloneElement(i,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var o=MY(e.label,t);return[o].concat(EY(a))}Ea.renderCallByParent=LY;function Pu(e){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pu(e)}function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uv.apply(this,arguments)}function ZN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function XN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZN(Object(r),!0).forEach(function(n){FY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FY(e,t,r){return t=UY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UY(e){var t=BY(e,"string");return Pu(t)=="symbol"?t:t+""}function BY(e,t){if(Pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zY=function(t,r){var n=jr(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},Hd=function(t){var r=t.cx,n=t.cy,a=t.radius,o=t.angle,i=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/Lp,p=u?o:o+i*f,h=wt(r,n,d,p),y=wt(r,n,a,p),m=u?o-i*f:o,x=wt(r,n,d*Math.cos(f*Lp),m);return{center:h,circleTangency:y,lineTangency:x,theta:f}},BO=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,o=t.outerRadius,i=t.startAngle,l=t.endAngle,c=zY(i,l),u=i+c,d=wt(r,n,o,i),f=wt(r,n,o,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(i>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var h=wt(r,n,a,i),y=wt(r,n,a,u);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(i<=u),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},qY=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,o=t.outerRadius,i=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=jr(d-u),p=Hd({cx:r,cy:n,radius:o,angle:u,sign:f,cornerRadius:i,cornerIsExternal:c}),h=p.circleTangency,y=p.lineTangency,m=p.theta,x=Hd({cx:r,cy:n,radius:o,angle:d,sign:-f,cornerRadius:i,cornerIsExternal:c}),w=x.circleTangency,v=x.lineTangency,b=x.theta,j=c?Math.abs(u-d):Math.abs(u-d)-m-b;if(j<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):BO({cx:r,cy:n,innerRadius:a,outerRadius:o,startAngle:u,endAngle:d});var S="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(j>180),",").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(a>0){var k=Hd({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),N=k.circleTangency,P=k.lineTangency,C=k.theta,E=Hd({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),_=E.circleTangency,L=E.lineTangency,U=E.theta,D=c?Math.abs(u-d):Math.abs(u-d)-C-U;if(D<0&&i===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(D>180),",").concat(+(f>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},HY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},zO=function(t){var r=XN(XN({},HY),t),n=r.cx,a=r.cy,o=r.innerRadius,i=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,p=r.className;if(i<o||d===f)return null;var h=Ge("recharts-sector",p),y=i-o,m=Nr(l,y,0,!0),x;return m>0&&Math.abs(d-f)<360?x=qY({cx:n,cy:a,innerRadius:o,outerRadius:i,cornerRadius:Math.min(m,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=BO({cx:n,cy:a,innerRadius:o,outerRadius:i,startAngle:d,endAngle:f}),B.createElement("path",uv({},Fe(r,!0),{className:h,d:x,role:"img"}))};function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dv.apply(this,arguments)}function YN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function JN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YN(Object(r),!0).forEach(function(n){VY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VY(e,t,r){return t=WY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WY(e){var t=QY(e,"string");return Eu(t)=="symbol"?t:t+""}function QY(e,t){if(Eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ek={curveBasisClosed:VU,curveBasisOpen:WU,curveBasis:HU,curveBumpX:TU,curveBumpY:OU,curveLinearClosed:QU,curveLinear:cm,curveMonotoneX:KU,curveMonotoneY:GU,curveNatural:ZU,curveStep:XU,curveStepAfter:JU,curveStepBefore:YU},Vd=function(t){return t.x===+t.x&&t.y===+t.y},sc=function(t){return t.x},lc=function(t){return t.y},KY=function(t,r){if(ze(t))return t;var n="curve".concat(sm(t));return(n==="curveMonotone"||n==="curveBump")&&r?ek["".concat(n).concat(r==="vertical"?"Y":"X")]:ek[n]||cm},GY=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,o=a===void 0?[]:a,i=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=KY(n,l),f=u?o.filter(function(m){return Vd(m)}):o,p;if(Array.isArray(i)){var h=u?i.filter(function(m){return Vd(m)}):i,y=f.map(function(m,x){return JN(JN({},m),{},{base:h[x]})});return l==="vertical"?p=Rd().y(lc).x1(sc).x0(function(m){return m.base.x}):p=Rd().x(sc).y1(lc).y0(function(m){return m.base.y}),p.defined(Vd).curve(d),p(y)}return l==="vertical"&&Pe(i)?p=Rd().y(lc).x1(sc).x0(i):Pe(i)?p=Rd().x(sc).y1(lc).y0(i):p=D2().x(sc).y(lc),p.defined(Vd).curve(d),p(f)},Up=function(t){var r=t.className,n=t.points,a=t.path,o=t.pathRef;if((!n||!n.length)&&!a)return null;var i=n&&n.length?GY(t):a;return B.createElement("path",dv({},Fe(t,!1),up(t),{className:Ge("recharts-curve",r),d:i,ref:o}))},qO={exports:{}},ZY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",XY=ZY,YY=XY;function HO(){}function VO(){}VO.resetWarningCache=HO;var JY=function(){function e(n,a,o,i,l,c){if(c!==YY){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:VO,resetWarningCache:HO};return r.PropTypes=r,r};qO.exports=JY();var eJ=qO.exports;const ct=ot(eJ);var tJ=Object.getOwnPropertyNames,rJ=Object.getOwnPropertySymbols,nJ=Object.prototype.hasOwnProperty;function tk(e,t){return function(n,a,o){return e(n,a,o)&&t(n,a,o)}}function Wd(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var o=a.cache,i=o.get(r),l=o.get(n);if(i&&l)return i===n&&l===r;o.set(r,n),o.set(n,r);var c=e(r,n,a);return o.delete(r),o.delete(n),c}}function rk(e){return tJ(e).concat(rJ(e))}var aJ=Object.hasOwn||function(e,t){return nJ.call(e,t)};function Ii(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var oJ="__v",iJ="__o",sJ="_owner",nk=Object.getOwnPropertyDescriptor,ak=Object.keys;function lJ(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function cJ(e,t){return Ii(e.getTime(),t.getTime())}function uJ(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function dJ(e,t){return e===t}function ok(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),o=e.entries(),i,l,c=0;(i=o.next())&&!i.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var p=i.value,h=l.value;if(r.equals(p[0],h[0],c,f,e,t,r)&&r.equals(p[1],h[1],p[0],h[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var fJ=Ii;function pJ(e,t,r){var n=ak(e),a=n.length;if(ak(t).length!==a)return!1;for(;a-- >0;)if(!WO(e,t,r,n[a]))return!1;return!0}function cc(e,t,r){var n=rk(e),a=n.length;if(rk(t).length!==a)return!1;for(var o,i,l;a-- >0;)if(o=n[a],!WO(e,t,r,o)||(i=nk(e,o),l=nk(t,o),(i||l)&&(!i||!l||i.configurable!==l.configurable||i.enumerable!==l.enumerable||i.writable!==l.writable)))return!1;return!0}function hJ(e,t){return Ii(e.valueOf(),t.valueOf())}function mJ(e,t){return e.source===t.source&&e.flags===t.flags}function ik(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),o=e.values(),i,l;(i=o.next())&&!i.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(i.value,l.value,i.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function gJ(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function yJ(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function WO(e,t,r,n){return(n===sJ||n===iJ||n===oJ)&&(e.$$typeof||t.$$typeof)?!0:aJ(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var vJ="[object Arguments]",xJ="[object Boolean]",bJ="[object Date]",wJ="[object Error]",SJ="[object Map]",jJ="[object Number]",NJ="[object Object]",kJ="[object RegExp]",PJ="[object Set]",EJ="[object String]",CJ="[object URL]",AJ=Array.isArray,sk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,lk=Object.assign,TJ=Object.prototype.toString.call.bind(Object.prototype.toString);function OJ(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,o=e.areMapsEqual,i=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,p=e.areUrlsEqual;return function(y,m,x){if(y===m)return!0;if(y==null||m==null)return!1;var w=typeof y;if(w!==typeof m)return!1;if(w!=="object")return w==="number"?i(y,m,x):w==="function"?a(y,m,x):!1;var v=y.constructor;if(v!==m.constructor)return!1;if(v===Object)return l(y,m,x);if(AJ(y))return t(y,m,x);if(sk!=null&&sk(y))return f(y,m,x);if(v===Date)return r(y,m,x);if(v===RegExp)return u(y,m,x);if(v===Map)return o(y,m,x);if(v===Set)return d(y,m,x);var b=TJ(y);return b===bJ?r(y,m,x):b===kJ?u(y,m,x):b===SJ?o(y,m,x):b===PJ?d(y,m,x):b===NJ?typeof y.then!="function"&&typeof m.then!="function"&&l(y,m,x):b===CJ?p(y,m,x):b===wJ?n(y,m,x):b===vJ?l(y,m,x):b===xJ||b===jJ||b===EJ?c(y,m,x):!1}}function _J(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?cc:lJ,areDatesEqual:cJ,areErrorsEqual:uJ,areFunctionsEqual:dJ,areMapsEqual:n?tk(ok,cc):ok,areNumbersEqual:fJ,areObjectsEqual:n?cc:pJ,arePrimitiveWrappersEqual:hJ,areRegExpsEqual:mJ,areSetsEqual:n?tk(ik,cc):ik,areTypedArraysEqual:n?cc:gJ,areUrlsEqual:yJ};if(r&&(a=lk({},a,r(a))),t){var o=Wd(a.areArraysEqual),i=Wd(a.areMapsEqual),l=Wd(a.areObjectsEqual),c=Wd(a.areSetsEqual);a=lk({},a,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:l,areSetsEqual:c})}return a}function IJ(e){return function(t,r,n,a,o,i,l){return e(t,r,l)}}function $J(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,o=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,p=f===void 0?t?new WeakMap:void 0:f,h=d.meta;return r(c,u,{cache:p,equals:a,meta:h,strict:o})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:o})};var i={cache:void 0,equals:a,meta:void 0,strict:o};return function(c,u){return r(c,u,i)}}var RJ=Ro();Ro({strict:!0});Ro({circular:!0});Ro({circular:!0,strict:!0});Ro({createInternalComparator:function(){return Ii}});Ro({strict:!0,createInternalComparator:function(){return Ii}});Ro({circular:!0,createInternalComparator:function(){return Ii}});Ro({circular:!0,createInternalComparator:function(){return Ii},strict:!0});function Ro(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,o=e.strict,i=o===void 0?!1:o,l=_J(e),c=OJ(l),u=n?n(c):IJ(c);return $J({circular:r,comparator:c,createState:a,equals:u,strict:i})}function DJ(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function ck(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(o){r<0&&(r=o),o-r>t?(e(o),r=-1):DJ(a)};requestAnimationFrame(n)}function fv(e){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(e)}function MJ(e){return BJ(e)||UJ(e)||FJ(e)||LJ()}function LJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FJ(e,t){if(e){if(typeof e=="string")return uk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uk(e,t)}}function uk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BJ(e){if(Array.isArray(e))return e}function zJ(){var e={},t=function(){return null},r=!1,n=function a(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var i=o,l=MJ(i),c=l[0],u=l.slice(1);if(typeof c=="number"){ck(a.bind(null,u),c);return}a(c),ck(a.bind(null,u));return}fv(o)==="object"&&(e=o,t(e)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function Cu(e){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(e)}function dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dk(Object(r),!0).forEach(function(n){QO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QO(e,t,r){return t=qJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qJ(e){var t=HJ(e,"string");return Cu(t)==="symbol"?t:String(t)}function HJ(e,t){if(Cu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Cu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VJ=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(o){return a.includes(o)})})},WJ=function(t){return t},QJ=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Rc=function(t,r){return Object.keys(r).reduce(function(n,a){return fk(fk({},n),{},QO({},a,t(a,r[a])))},{})},pk=function(t,r,n){return t.map(function(a){return"".concat(QJ(a)," ").concat(r,"ms ").concat(n)}).join(",")};function KJ(e,t){return XJ(e)||ZJ(e,t)||KO(e,t)||GJ()}function GJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function XJ(e){if(Array.isArray(e))return e}function YJ(e){return tee(e)||eee(e)||KO(e)||JJ()}function JJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KO(e,t){if(e){if(typeof e=="string")return pv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pv(e,t)}}function eee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tee(e){if(Array.isArray(e))return pv(e)}function pv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bp=1e-4,GO=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},ZO=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},hk=function(t,r){return function(n){var a=GO(t,r);return ZO(a,n)}},ree=function(t,r){return function(n){var a=GO(t,r),o=[].concat(YJ(a.map(function(i,l){return i*l}).slice(1)),[0]);return ZO(o,n)}},mk=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],o=r[1],i=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,o=0,i=1,l=1;break;case"ease":a=.25,o=.1,i=.25,l=1;break;case"ease-in":a=.42,o=0,i=1,l=1;break;case"ease-out":a=.42,o=0,i=.58,l=1;break;case"ease-in-out":a=0,o=0,i=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=KJ(u,4);a=d[0],o=d[1],i=d[2],l=d[3]}}}var f=hk(a,i),p=hk(o,l),h=ree(a,i),y=function(w){return w>1?1:w<0?0:w},m=function(w){for(var v=w>1?1:w,b=v,j=0;j<8;++j){var S=f(b)-v,k=h(b);if(Math.abs(S-v)<Bp||k<Bp)return p(b);b=y(b-S/k)}return p(b)};return m.isStepper=!1,m},nee=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,o=a===void 0?8:a,i=t.dt,l=i===void 0?17:i,c=function(d,f,p){var h=-(d-f)*n,y=p*o,m=p+(h-y)*l/1e3,x=p*l/1e3+d;return Math.abs(x-f)<Bp&&Math.abs(m)<Bp?[f,0]:[x,m]};return c.isStepper=!0,c.dt=l,c},aee=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mk(a);case"spring":return nee();default:if(a.split("(")[0]==="cubic-bezier")return mk(a)}return typeof a=="function"?a:null};function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function gk(e){return see(e)||iee(e)||XO(e)||oee()}function oee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function see(e){if(Array.isArray(e))return mv(e)}function yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yk(Object(r),!0).forEach(function(n){hv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hv(e,t,r){return t=lee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lee(e){var t=cee(e,"string");return Au(t)==="symbol"?t:String(t)}function cee(e,t){if(Au(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Au(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uee(e,t){return pee(e)||fee(e,t)||XO(e,t)||dee()}function dee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XO(e,t){if(e){if(typeof e=="string")return mv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mv(e,t)}}function mv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function pee(e){if(Array.isArray(e))return e}var zp=function(t,r,n){return t+(r-t)*n},gv=function(t){var r=t.from,n=t.to;return r!==n},hee=function e(t,r,n){var a=Rc(function(o,i){if(gv(i)){var l=t(i.from,i.to,i.velocity),c=uee(l,2),u=c[0],d=c[1];return ir(ir({},i),{},{from:u,velocity:d})}return i},r);return n<1?Rc(function(o,i){return gv(i)?ir(ir({},i),{},{velocity:zp(i.velocity,a[o].velocity,n),from:zp(i.from,a[o].from,n)}):i},r):e(t,a,n-1)};const mee=function(e,t,r,n,a){var o=VJ(e,t),i=o.reduce(function(x,w){return ir(ir({},x),{},hv({},w,[e[w],t[w]]))},{}),l=o.reduce(function(x,w){return ir(ir({},x),{},hv({},w,{from:e[w],velocity:0,to:t[w]}))},{}),c=-1,u,d,f=function(){return null},p=function(){return Rc(function(w,v){return v.from},l)},h=function(){return!Object.values(l).filter(gv).length},y=function(w){u||(u=w);var v=w-u,b=v/r.dt;l=hee(r,l,b),a(ir(ir(ir({},e),t),p())),u=w,h()||(c=requestAnimationFrame(f))},m=function(w){d||(d=w);var v=(w-d)/n,b=Rc(function(S,k){return zp.apply(void 0,gk(k).concat([r(v)]))},i);if(a(ir(ir(ir({},e),t),b)),v<1)c=requestAnimationFrame(f);else{var j=Rc(function(S,k){return zp.apply(void 0,gk(k).concat([r(1)]))},i);a(ir(ir(ir({},e),t),j))}};return f=r.isStepper?y:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Zs(e){"@babel/helpers - typeof";return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zs(e)}var gee=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function yee(e,t){if(e==null)return{};var r=vee(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vee(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Kg(e){return See(e)||wee(e)||bee(e)||xee()}function xee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bee(e,t){if(e){if(typeof e=="string")return yv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yv(e,t)}}function wee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function See(e){if(Array.isArray(e))return yv(e)}function yv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(r),!0).forEach(function(n){vc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vc(e,t,r){return t=YO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YO(n.key),n)}}function kee(e,t,r){return t&&Nee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YO(e){var t=Pee(e,"string");return Zs(t)==="symbol"?t:String(t)}function Pee(e,t){if(Zs(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zs(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vv(e,t)}function vv(e,t){return vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vv(e,t)}function Cee(e){var t=Aee();return function(){var n=qp(e),a;if(t){var o=qp(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return xv(this,a)}}function xv(e,t){if(t&&(Zs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bv(e)}function bv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qp(e)}var ia=function(e){Eee(r,e);var t=Cee(r);function r(n,a){var o;jee(this,r),o=t.call(this,n,a);var i=o.props,l=i.isActive,c=i.attributeName,u=i.from,d=i.to,f=i.steps,p=i.children,h=i.duration;if(o.handleStyleChange=o.handleStyleChange.bind(bv(o)),o.changeStyle=o.changeStyle.bind(bv(o)),!l||h<=0)return o.state={style:{}},typeof p=="function"&&(o.state={style:d}),xv(o);if(f&&f.length)o.state={style:f[0].style};else if(u){if(typeof p=="function")return o.state={style:u},xv(o);o.state={style:c?vc({},c,u):u}}else o.state={style:{}};return o}return kee(r,[{key:"componentDidMount",value:function(){var a=this.props,o=a.isActive,i=a.canBegin;this.mounted=!0,!(!o||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var o=this.props,i=o.isActive,l=o.canBegin,c=o.attributeName,u=o.shouldReAnimate,d=o.to,f=o.from,p=this.state.style;if(l){if(!i){var h={style:c?vc({},c,d):d};this.state&&p&&(c&&p[c]!==d||!c&&p!==d)&&this.setState(h);return}if(!(RJ(a.to,d)&&a.canBegin&&a.isActive)){var y=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=y||u?f:a.to;if(this.state&&p){var x={style:c?vc({},c,m):m};(c&&p[c]!==m||!c&&p!==m)&&this.setState(x)}this.runAnimation(En(En({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var o=this,i=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,p=a.onAnimationStart,h=mee(i,l,aee(u),c,this.changeStyle),y=function(){o.stopJSAnimation=h()};this.manager.start([p,d,y,c,f])}},{key:"runStepAnimation",value:function(a){var o=this,i=a.steps,l=a.begin,c=a.onAnimationStart,u=i[0],d=u.style,f=u.duration,p=f===void 0?0:f,h=function(m,x,w){if(w===0)return m;var v=x.duration,b=x.easing,j=b===void 0?"ease":b,S=x.style,k=x.properties,N=x.onAnimationEnd,P=w>0?i[w-1]:x,C=k||Object.keys(S);if(typeof j=="function"||j==="spring")return[].concat(Kg(m),[o.runJSAnimation.bind(o,{from:P.style,to:S,duration:v,easing:j}),v]);var E=pk(C,v,j),_=En(En(En({},P.style),S),{},{transition:E});return[].concat(Kg(m),[_,v,N]).filter(WJ)};return this.manager.start([c].concat(Kg(i.reduce(h,[d,Math.max(p,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=zJ());var o=a.begin,i=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,p=a.steps,h=a.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof h=="function"||u==="spring"){this.runJSAnimation(a);return}if(p.length>1){this.runStepAnimation(a);return}var m=l?vc({},l,c):c,x=pk(Object.keys(m),i,u);y.start([d,o,En(En({},m),{},{transition:x}),i,f])}},{key:"render",value:function(){var a=this.props,o=a.children;a.begin;var i=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=yee(a,gee),u=g.Children.count(o),d=this.state.style;if(typeof o=="function")return o(d);if(!l||u===0||i<=0)return o;var f=function(h){var y=h.props,m=y.style,x=m===void 0?{}:m,w=y.className,v=g.cloneElement(h,En(En({},c),{},{style:En(En({},x),d),className:w}));return v};return u===1?f(g.Children.only(o)):B.createElement("div",null,g.Children.map(o,function(p){return f(p)}))}}]),r}(g.PureComponent);ia.displayName="Animate";ia.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ia.propTypes={from:ct.oneOfType([ct.object,ct.string]),to:ct.oneOfType([ct.object,ct.string]),attributeName:ct.string,duration:ct.number,begin:ct.number,easing:ct.oneOfType([ct.string,ct.func]),steps:ct.arrayOf(ct.shape({duration:ct.number.isRequired,style:ct.object.isRequired,easing:ct.oneOfType([ct.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ct.func]),properties:ct.arrayOf("string"),onAnimationEnd:ct.func})),children:ct.oneOfType([ct.node,ct.func]),isActive:ct.bool,canBegin:ct.bool,onAnimationEnd:ct.func,shouldReAnimate:ct.bool,onAnimationStart:ct.func,onAnimationReStart:ct.func};function Tu(e){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(e)}function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hp.apply(this,arguments)}function Tee(e,t){return $ee(e)||Iee(e,t)||_ee(e,t)||Oee()}function Oee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ee(e,t){if(e){if(typeof e=="string")return xk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xk(e,t)}}function xk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Iee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function $ee(e){if(Array.isArray(e))return e}function bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bk(Object(r),!0).forEach(function(n){Ree(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ree(e,t,r){return t=Dee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dee(e){var t=Mee(e,"string");return Tu(t)=="symbol"?t:t+""}function Mee(e,t){if(Tu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sk=function(t,r,n,a,o){var i=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(i>0&&o instanceof Array){for(var f=[0,0,0,0],p=0,h=4;p<h;p++)f[p]=o[p]>i?i:o[p];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(i>0&&o===+o&&o>0){var y=Math.min(i,o);d="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+n-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*y,`
            L `).concat(t+n,",").concat(r+a-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-c*y,",").concat(r+a,`
            L `).concat(t+c*y,",").concat(r+a,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*y," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},Lee=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,o=r.x,i=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(o,o+l),d=Math.max(o,o+l),f=Math.min(i,i+c),p=Math.max(i,i+c);return n>=u&&n<=d&&a>=f&&a<=p}return!1},Fee={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gw=function(t){var r=wk(wk({},Fee),t),n=g.useRef(),a=g.useState(-1),o=Tee(a,2),i=o[0],l=o[1];g.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,p=r.radius,h=r.className,y=r.animationEasing,m=r.animationDuration,x=r.animationBegin,w=r.isAnimationActive,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=Ge("recharts-rectangle",h);return v?B.createElement(ia,{canBegin:i>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:m,animationEasing:y,isActive:v},function(j){var S=j.width,k=j.height,N=j.x,P=j.y;return B.createElement(ia,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,isActive:w,easing:y},B.createElement("path",Hp({},Fe(r,!0),{className:b,d:Sk(N,P,S,k,p),ref:n})))}):B.createElement("path",Hp({},Fe(r,!0),{className:b,d:Sk(c,u,d,f,p)}))},Uee=["points","className","baseLinePoints","connectNulls"];function hs(){return hs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hs.apply(this,arguments)}function Bee(e,t){if(e==null)return{};var r=zee(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jk(e){return Wee(e)||Vee(e)||Hee(e)||qee()}function qee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hee(e,t){if(e){if(typeof e=="string")return wv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wv(e,t)}}function Vee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wee(e){if(Array.isArray(e))return wv(e)}function wv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nk=function(t){return t&&t.x===+t.x&&t.y===+t.y},Qee=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){Nk(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Nk(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Dc=function(t,r){var n=Qee(t);r&&(n=[n.reduce(function(o,i){return[].concat(jk(o),jk(i))},[])]);var a=n.map(function(o){return o.reduce(function(i,l,c){return"".concat(i).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Kee=function(t,r,n){var a=Dc(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Dc(r.reverse(),n).slice(1))},Gee=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,o=t.connectNulls,i=Bee(t,Uee);if(!r||!r.length)return null;var l=Ge("recharts-polygon",n);if(a&&a.length){var c=i.stroke&&i.stroke!=="none",u=Kee(r,a,o);return B.createElement("g",{className:l},B.createElement("path",hs({},Fe(i,!0),{fill:u.slice(-1)==="Z"?i.fill:"none",stroke:"none",d:u})),c?B.createElement("path",hs({},Fe(i,!0),{fill:"none",d:Dc(r,o)})):null,c?B.createElement("path",hs({},Fe(i,!0),{fill:"none",d:Dc(a,o)})):null)}var d=Dc(r,o);return B.createElement("path",hs({},Fe(i,!0),{fill:d.slice(-1)==="Z"?i.fill:"none",className:l,d}))};function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(this,arguments)}var km=function(t){var r=t.cx,n=t.cy,a=t.r,o=t.className,i=Ge("recharts-dot",o);return r===+r&&n===+n&&a===+a?B.createElement("circle",Sv({},Fe(t,!1),up(t),{className:i,cx:r,cy:n,r:a})):null};function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}var Zee=["x","y","top","left","width","height","className"];function jv(){return jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jv.apply(this,arguments)}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(n){Yee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yee(e,t,r){return t=Jee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jee(e){var t=ete(e,"string");return Ou(t)=="symbol"?t:t+""}function ete(e,t){if(Ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tte(e,t){if(e==null)return{};var r=rte(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var nte=function(t,r,n,a,o,i){return"M".concat(t,",").concat(o,"v").concat(a,"M").concat(i,",").concat(r,"h").concat(n)},ate=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,o=a===void 0?0:a,i=t.top,l=i===void 0?0:i,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,p=t.height,h=p===void 0?0:p,y=t.className,m=tte(t,Zee),x=Xee({x:n,y:o,top:l,left:u,width:f,height:h},m);return!Pe(n)||!Pe(o)||!Pe(f)||!Pe(h)||!Pe(l)||!Pe(u)?null:B.createElement("path",jv({},Fe(x,!0),{className:Ge("recharts-cross",y),d:nte(n,o,f,h,l,u)}))},ote=bm,ite=uO,ste=ua;function lte(e,t){return e&&e.length?ote(e,ste(t),ite):void 0}var cte=lte;const ute=ot(cte);var dte=bm,fte=ua,pte=dO;function hte(e,t){return e&&e.length?dte(e,fte(t),pte):void 0}var mte=hte;const gte=ot(mte);var yte=["cx","cy","angle","ticks","axisLine"],vte=["ticks","tick","angle","tickFormatter","stroke"];function Xs(e){"@babel/helpers - typeof";return Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(e)}function Mc(){return Mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mc.apply(this,arguments)}function Pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pk(Object(r),!0).forEach(function(n){Pm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ek(e,t){if(e==null)return{};var r=xte(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ck(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,e_(n.key),n)}}function wte(e,t,r){return t&&Ck(e.prototype,t),r&&Ck(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ste(e,t,r){return t=Vp(t),jte(e,JO()?Reflect.construct(t,r||[],Vp(e).constructor):t.apply(e,r))}function jte(e,t){if(t&&(Xs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nte(e)}function Nte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JO=function(){return!!e})()}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vp(e)}function kte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nv(e,t)}function Nv(e,t){return Nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Nv(e,t)}function Pm(e,t,r){return t=e_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e_(e){var t=Pte(e,"string");return Xs(t)=="symbol"?t:t+""}function Pte(e,t){if(Xs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Em=function(e){function t(){return bte(this,t),Ste(this,t,arguments)}return kte(t,e),wte(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,o=this.props,i=o.angle,l=o.cx,c=o.cy;return wt(l,c,a,i)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,o=n.cy,i=n.angle,l=n.ticks,c=ute(l,function(d){return d.coordinate||0}),u=gte(l,function(d){return d.coordinate||0});return{cx:a,cy:o,startAngle:i,endAngle:i,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,o=n.cy,i=n.angle,l=n.ticks,c=n.axisLine,u=Ek(n,yte),d=l.reduce(function(y,m){return[Math.min(y[0],m.coordinate),Math.max(y[1],m.coordinate)]},[1/0,-1/0]),f=wt(a,o,d[0],i),p=wt(a,o,d[1],i),h=zo(zo(zo({},Fe(u,!1)),{},{fill:"none"},Fe(c,!1)),{},{x1:f.x,y1:f.y,x2:p.x,y2:p.y});return B.createElement("line",Mc({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var n=this,a=this.props,o=a.ticks,i=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=Ek(a,vte),f=this.getTickTextAnchor(),p=Fe(d,!1),h=Fe(i,!1),y=o.map(function(m,x){var w=n.getTickValueCoord(m),v=zo(zo(zo(zo({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(w.x,", ").concat(w.y,")")},p),{},{stroke:"none",fill:u},h),{},{index:x},w),{},{payload:m});return B.createElement(nt,Mc({className:Ge("recharts-polar-radius-axis-tick",FO(i)),key:"tick-".concat(m.coordinate)},yi(n.props,m,x)),t.renderTickItem(i,v,c?c(m.value,x):m.value))});return B.createElement(nt,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,a=n.ticks,o=n.axisLine,i=n.tick;return!a||!a.length?null:B.createElement(nt,{className:Ge("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),i&&this.renderTicks(),nr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,o){var i;return B.isValidElement(n)?i=B.cloneElement(n,a):ze(n)?i=n(a):i=B.createElement(vi,Mc({},a,{className:"recharts-polar-radius-axis-tick-value"}),o),i}}])}(g.PureComponent);Pm(Em,"displayName","PolarRadiusAxis");Pm(Em,"axisType","radiusAxis");Pm(Em,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ys(e){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(e)}function Go(){return Go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Go.apply(this,arguments)}function Ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(r),!0).forEach(function(n){Cm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ete(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r_(n.key),n)}}function Cte(e,t,r){return t&&Tk(e.prototype,t),r&&Tk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ate(e,t,r){return t=Wp(t),Tte(e,t_()?Reflect.construct(t,r||[],Wp(e).constructor):t.apply(e,r))}function Tte(e,t){if(t&&(Ys(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ote(e)}function Ote(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t_=function(){return!!e})()}function Wp(e){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wp(e)}function _te(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kv(e,t)}function kv(e,t){return kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},kv(e,t)}function Cm(e,t,r){return t=r_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r_(e){var t=Ite(e,"string");return Ys(t)=="symbol"?t:t+""}function Ite(e,t){if(Ys(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ys(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $te=Math.PI/180,Ok=1e-5,Am=function(e){function t(){return Ete(this,t),Ate(this,t,arguments)}return _te(t,e),Cte(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,o=a.cx,i=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=wt(o,i,l,n.coordinate),p=wt(o,i,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,o=Math.cos(-n.coordinate*$te),i;return o>Ok?i=a==="outer"?"start":"end":o<-Ok?i=a==="outer"?"end":"start":i="middle",i}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,o=n.cy,i=n.radius,l=n.axisLine,c=n.axisLineType,u=qo(qo({},Fe(this.props,!1)),{},{fill:"none"},Fe(l,!1));if(c==="circle")return B.createElement(km,Go({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:o,r:i}));var d=this.props.ticks,f=d.map(function(p){return wt(a,o,i,p.coordinate)});return B.createElement(Gee,Go({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,o=a.ticks,i=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Fe(this.props,!1),f=Fe(i,!1),p=qo(qo({},d),{},{fill:"none"},Fe(l,!1)),h=o.map(function(y,m){var x=n.getTickLineCoord(y),w=n.getTickTextAnchor(y),v=qo(qo(qo({textAnchor:w},d),{},{stroke:"none",fill:u},f),{},{index:m,payload:y,x:x.x2,y:x.y2});return B.createElement(nt,Go({className:Ge("recharts-polar-angle-axis-tick",FO(i)),key:"tick-".concat(y.coordinate)},yi(n.props,y,m)),l&&B.createElement("line",Go({className:"recharts-polar-angle-axis-tick-line"},p,x)),i&&t.renderTickItem(i,v,c?c(y.value,m):y.value))});return B.createElement(nt,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var n=this.props,a=n.ticks,o=n.radius,i=n.axisLine;return o<=0||!a||!a.length?null:B.createElement(nt,{className:Ge("recharts-polar-angle-axis",this.props.className)},i&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,o){var i;return B.isValidElement(n)?i=B.cloneElement(n,a):ze(n)?i=n(a):i=B.createElement(vi,Go({},a,{className:"recharts-polar-angle-axis-tick-value"}),o),i}}])}(g.PureComponent);Cm(Am,"displayName","PolarAngleAxis");Cm(Am,"axisType","angleAxis");Cm(Am,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Rte=iT,Dte=Rte(Object.getPrototypeOf,Object),Mte=Dte,Lte=qa,Fte=Mte,Ute=Ha,Bte="[object Object]",zte=Function.prototype,qte=Object.prototype,n_=zte.toString,Hte=qte.hasOwnProperty,Vte=n_.call(Object);function Wte(e){if(!Ute(e)||Lte(e)!=Bte)return!1;var t=Fte(e);if(t===null)return!0;var r=Hte.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&n_.call(r)==Vte}var Qte=Wte;const Kte=ot(Qte);var Gte=qa,Zte=Ha,Xte="[object Boolean]";function Yte(e){return e===!0||e===!1||Zte(e)&&Gte(e)==Xte}var Jte=Yte;const ere=ot(Jte);function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}function Qp(){return Qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qp.apply(this,arguments)}function tre(e,t){return ore(e)||are(e,t)||nre(e,t)||rre()}function rre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nre(e,t){if(e){if(typeof e=="string")return _k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _k(e,t)}}function _k(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function are(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function ore(e){if(Array.isArray(e))return e}function Ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $k(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ik(Object(r),!0).forEach(function(n){ire(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ik(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ire(e,t,r){return t=sre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sre(e){var t=lre(e,"string");return _u(t)=="symbol"?t:t+""}function lre(e,t){if(_u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rk=function(t,r,n,a,o){var i=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-i/2,",").concat(r+o),l+="L ".concat(t+n-i/2-a,",").concat(r+o),l+="L ".concat(t,",").concat(r," Z"),l},cre={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ure=function(t){var r=$k($k({},cre),t),n=g.useRef(),a=g.useState(-1),o=tre(a,2),i=o[0],l=o[1];g.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&l(b)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,p=r.height,h=r.className,y=r.animationEasing,m=r.animationDuration,x=r.animationBegin,w=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var v=Ge("recharts-trapezoid",h);return w?B.createElement(ia,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:p,x:c,y:u},duration:m,animationEasing:y,isActive:w},function(b){var j=b.upperWidth,S=b.lowerWidth,k=b.height,N=b.x,P=b.y;return B.createElement(ia,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:m,easing:y},B.createElement("path",Qp({},Fe(r,!0),{className:v,d:Rk(N,P,j,S,k),ref:n})))}):B.createElement("g",null,B.createElement("path",Qp({},Fe(r,!0),{className:v,d:Rk(c,u,d,f,p)})))},dre=["option","shapeType","propTransformer","activeClassName","isActive"];function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}function fre(e,t){if(e==null)return{};var r=pre(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(r),!0).forEach(function(n){hre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hre(e,t,r){return t=mre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mre(e){var t=gre(e,"string");return Iu(t)=="symbol"?t:t+""}function gre(e,t){if(Iu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yre(e,t){return Kp(Kp({},t),e)}function vre(e,t){return e==="symbols"}function Mk(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return B.createElement(gw,r);case"trapezoid":return B.createElement(ure,r);case"sector":return B.createElement(zO,r);case"symbols":if(vre(t))return B.createElement(Rb,r);break;default:return null}}function xre(e){return g.isValidElement(e)?e.props:e}function a_(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?yre:n,o=e.activeClassName,i=o===void 0?"recharts-active-shape":o,l=e.isActive,c=fre(e,dre),u;if(g.isValidElement(t))u=g.cloneElement(t,Kp(Kp({},c),xre(t)));else if(ze(t))u=t(c);else if(Kte(t)&&!ere(t)){var d=a(t,c);u=B.createElement(Mk,{shapeType:r,elementProps:d})}else{var f=c;u=B.createElement(Mk,{shapeType:r,elementProps:f})}return l?B.createElement(nt,{className:i},u):u}function Tm(e,t){return t!=null&&"trapezoids"in e.props}function Om(e,t){return t!=null&&"sectors"in e.props}function $u(e,t){return t!=null&&"points"in e.props}function bre(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,o=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&o}function wre(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function Sre(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function jre(e,t){var r;return Tm(e,t)?r=bre:Om(e,t)?r=wre:$u(e,t)&&(r=Sre),r}function Nre(e,t){var r;return Tm(e,t)?r="trapezoids":Om(e,t)?r="sectors":$u(e,t)&&(r="points"),r}function kre(e,t){if(Tm(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Om(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return $u(e,t)?t.payload:{}}function Pre(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=Nre(r,t),o=kre(r,t),i=n.filter(function(c,u){var d=id(o,c),f=r.props[a].filter(function(y){var m=jre(r,t);return m(y,t)}),p=r.props[a].indexOf(f[f.length-1]),h=u===p;return d&&h}),l=n.indexOf(i[i.length-1]);return l}var xf;function Js(e){"@babel/helpers - typeof";return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Js(e)}function ms(){return ms=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ms.apply(this,arguments)}function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(n){gn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ere(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i_(n.key),n)}}function Cre(e,t,r){return t&&Fk(e.prototype,t),r&&Fk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Are(e,t,r){return t=Gp(t),Tre(e,o_()?Reflect.construct(t,r||[],Gp(e).constructor):t.apply(e,r))}function Tre(e,t){if(t&&(Js(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ore(e)}function Ore(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o_=function(){return!!e})()}function Gp(e){return Gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gp(e)}function _re(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pv(e,t)}function Pv(e,t){return Pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Pv(e,t)}function gn(e,t,r){return t=i_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i_(e){var t=Ire(e,"string");return Js(t)=="symbol"?t:t+""}function Ire(e,t){if(Js(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Js(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var da=function(e){function t(r){var n;return Ere(this,t),n=Are(this,t,[r]),gn(n,"pieRef",null),gn(n,"sectorRefs",[]),gn(n,"id",kl("recharts-pie-")),gn(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ze(a)&&a()}),gn(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ze(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return _re(t,e),Cre(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.label,l=o.labelLine,c=o.dataKey,u=o.valueKey,d=Fe(this.props,!1),f=Fe(i,!1),p=Fe(l,!1),h=i&&i.offsetRadius||20,y=n.map(function(m,x){var w=(m.startAngle+m.endAngle)/2,v=wt(m.cx,m.cy,m.outerRadius+h,w),b=vt(vt(vt(vt({},d),m),{},{stroke:"none"},f),{},{index:x,textAnchor:t.getTextAnchor(v.x,m.cx)},v),j=vt(vt(vt(vt({},d),m),{},{fill:"none",stroke:m.fill},p),{},{index:x,points:[wt(m.cx,m.cy,m.outerRadius,w),v]}),S=c;return Qe(c)&&Qe(u)?S="value":Qe(c)&&(S=u),B.createElement(nt,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(x)},l&&t.renderLabelLineItem(l,j,"line"),t.renderLabelItem(i,b,Zt(m,S)))});return B.createElement(nt,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(n){var a=this,o=this.props,i=o.activeShape,l=o.blendStroke,c=o.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),p=c&&a.hasActiveIndex()?c:null,h=f?i:p,y=vt(vt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return B.createElement(nt,ms({ref:function(x){x&&!a.sectorRefs.includes(x)&&a.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},yi(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),B.createElement(a_,ms({option:h,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,o=a.sectors,i=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,p=f.prevSectors,h=f.prevIsAnimationActive;return B.createElement(ia,{begin:l,duration:c,isActive:i,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var m=y.t,x=[],w=o&&o[0],v=w.startAngle;return o.forEach(function(b,j){var S=p&&p[j],k=j>0?Yr(b,"paddingAngle",0):0;if(S){var N=Wr(S.endAngle-S.startAngle,b.endAngle-b.startAngle),P=vt(vt({},b),{},{startAngle:v+k,endAngle:v+N(m)+k});x.push(P),v=P.endAngle}else{var C=b.endAngle,E=b.startAngle,_=Wr(0,C-E),L=_(m),U=vt(vt({},b),{},{startAngle:v+k,endAngle:v+L+k});x.push(U),v=U.endAngle}}),B.createElement(nt,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var i=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[i].focus(),a.setState({sectorToFocus:i});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,o=n.isAnimationActive,i=this.state.prevSectors;return o&&a&&a.length&&(!i||!id(i,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,o=a.hide,i=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,p=a.outerRadius,h=a.isAnimationActive,y=this.state.isAnimationFinished;if(o||!i||!i.length||!Pe(u)||!Pe(d)||!Pe(f)||!Pe(p))return null;var m=Ge("recharts-pie",l);return B.createElement(nt,{tabIndex:this.props.rootTabIndex,className:m,ref:function(w){n.pieRef=w}},this.renderSectors(),c&&this.renderLabels(i),nr.renderCallByParent(this.props,null,!1),(!h||y)&&Ea.renderCallByParent(this.props,i,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,o){if(B.isValidElement(n))return B.cloneElement(n,a);if(ze(n))return n(a);var i=Ge("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return B.createElement(Up,ms({},a,{key:o,type:"linear",className:i}))}},{key:"renderLabelItem",value:function(n,a,o){if(B.isValidElement(n))return B.cloneElement(n,a);var i=o;if(ze(n)&&(i=n(a),B.isValidElement(i)))return i;var l=Ge("recharts-pie-label-text",typeof n!="boolean"&&!ze(n)?n.className:"");return B.createElement(vi,ms({},a,{alignmentBaseline:"middle",className:l}),i)}}])}(g.PureComponent);xf=da;gn(da,"displayName","Pie");gn(da,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ta.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});gn(da,"parseDeltaAngle",function(e,t){var r=jr(t-e),n=Math.min(Math.abs(t-e),360);return r*n});gn(da,"getRealPieData",function(e){var t=e.data,r=e.children,n=Fe(e,!1),a=Jr(r,td);return t&&t.length?t.map(function(o,i){return vt(vt(vt({payload:o},n),o),a&&a[i]&&a[i].props)}):a&&a.length?a.map(function(o){return vt(vt({},n),o.props)}):[]});gn(da,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,o=t.height,i=LO(a,o),l=n+Nr(e.cx,a,a/2),c=r+Nr(e.cy,o,o/2),u=Nr(e.innerRadius,i,0),d=Nr(e.outerRadius,i,i*.8),f=e.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});gn(da,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?vt(vt({},t.type.defaultProps),t.props):t.props,a=xf.getRealPieData(n);if(!a||!a.length)return null;var o=n.cornerRadius,i=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,p=n.tooltipType,h=Math.abs(n.minAngle),y=xf.parseCoordinateOfPie(n,r),m=xf.parseDeltaAngle(i,l),x=Math.abs(m),w=u;Qe(u)&&Qe(f)?(Ln(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):Qe(u)&&(Ln(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=f);var v=a.filter(function(P){return Zt(P,w,0)!==0}).length,b=(x>=360?v:v-1)*c,j=x-v*h-b,S=a.reduce(function(P,C){var E=Zt(C,w,0);return P+(Pe(E)?E:0)},0),k;if(S>0){var N;k=a.map(function(P,C){var E=Zt(P,w,0),_=Zt(P,d,C),L=(Pe(E)?E:0)/S,U;C?U=N.endAngle+jr(m)*c*(E!==0?1:0):U=i;var D=U+jr(m)*((E!==0?h:0)+L*j),I=(U+D)/2,A=(y.innerRadius+y.outerRadius)/2,$=[{name:_,value:E,payload:P,dataKey:w,type:p}],O=wt(y.cx,y.cy,A,I);return N=vt(vt(vt({percent:L,cornerRadius:o,name:_,tooltipPayload:$,midAngle:I,middleRadius:A,tooltipPosition:O},P),y),{},{value:Zt(P,w),startAngle:U,endAngle:D,payload:P,paddingAngle:jr(m)*c}),N})}return vt(vt({},y),{},{sectors:k,data:a})});var $re=Math.ceil,Rre=Math.max;function Dre(e,t,r,n){for(var a=-1,o=Rre($re((t-e)/(r||1)),0),i=Array(o);o--;)i[n?o:++a]=e,e+=r;return i}var Mre=Dre,Lre=kT,Uk=1/0,Fre=17976931348623157e292;function Ure(e){if(!e)return e===0?e:0;if(e=Lre(e),e===Uk||e===-Uk){var t=e<0?-1:1;return t*Fre}return e===e?e:0}var s_=Ure,Bre=Mre,zre=pm,Gg=s_;function qre(e){return function(t,r,n){return n&&typeof n!="number"&&zre(t,r,n)&&(r=n=void 0),t=Gg(t),r===void 0?(r=t,t=0):r=Gg(r),n=n===void 0?t<r?1:-1:Gg(n),Bre(t,r,n,e)}}var Hre=qre,Vre=Hre,Wre=Vre(),Qre=Wre;const Zp=ot(Qre);function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}function Bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bk(Object(r),!0).forEach(function(n){l_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l_(e,t,r){return t=Kre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kre(e){var t=Gre(e,"string");return Ru(t)=="symbol"?t:t+""}function Gre(e,t){if(Ru(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zre=["Webkit","Moz","O","ms"],Xre=function(t,r){var n=t.replace(/(\w)/,function(o){return o.toUpperCase()}),a=Zre.reduce(function(o,i){return zk(zk({},o),{},l_({},i+n,r))},{});return a[t]=r,a};function el(e){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},el(e)}function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xp.apply(this,arguments)}function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(n){Br(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u_(n.key),n)}}function Jre(e,t,r){return t&&Hk(e.prototype,t),r&&Hk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ene(e,t,r){return t=Yp(t),tne(e,c_()?Reflect.construct(t,r||[],Yp(e).constructor):t.apply(e,r))}function tne(e,t){if(t&&(el(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rne(e)}function rne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c_=function(){return!!e})()}function Yp(e){return Yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yp(e)}function nne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ev(e,t)}function Ev(e,t){return Ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ev(e,t)}function Br(e,t,r){return t=u_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u_(e){var t=ane(e,"string");return el(t)=="symbol"?t:t+""}function ane(e,t){if(el(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(el(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var one=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,o=t.x,i=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Ic().domain(Zp(0,c)).range([o,o+i-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},Vk=function(t){return t.changedTouches&&!!t.changedTouches.length},tl=function(e){function t(r){var n;return Yre(this,t),n=ene(this,t,[r]),Br(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Br(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Br(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,o=a.endIndex,i=a.onDragEnd,l=a.startIndex;i==null||i({endIndex:o,startIndex:l})}),n.detachDragEndListener()}),Br(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Br(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Br(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Br(n,"handleSlideDragStart",function(a){var o=Vk(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return nne(t,e),Jre(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,o=n.endX,i=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,o),p=Math.max(a,o),h=t.getIndexInRange(i,f),y=t.getIndexInRange(i,p);return{startIndex:h-h%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,o=a.data,i=a.tickFormatter,l=a.dataKey,c=Zt(o[n],l,n);return ze(i)?i(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,o=a.slideMoveStartX,i=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,p=c.startIndex,h=c.endIndex,y=c.onChange,m=n.pageX-o;m>0?m=Math.min(m,u+d-f-l,u+d-f-i):m<0&&(m=Math.max(m,u-i,u-l));var x=this.getIndex({startX:i+m,endX:l+m});(x.startIndex!==p||x.endIndex!==h)&&y&&y(x),this.setState({startX:i+m,endX:l+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var o=Vk(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,o=a.brushMoveStartX,i=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[i],d=this.props,f=d.x,p=d.width,h=d.travellerWidth,y=d.onChange,m=d.gap,x=d.data,w={startX:this.state.startX,endX:this.state.endX},v=n.pageX-o;v>0?v=Math.min(v,f+p-h-u):v<0&&(v=Math.max(v,f-u)),w[i]=u+v;var b=this.getIndex(w),j=b.startIndex,S=b.endIndex,k=function(){var P=x.length-1;return i==="startX"&&(l>c?j%m===0:S%m===0)||l<c&&S===P||i==="endX"&&(l>c?S%m===0:j%m===0)||l>c&&S===P};this.setState(Br(Br({},i,u+v),"brushMoveStartX",n.pageX),function(){y&&k()&&y(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var o=this,i=this.state,l=i.scaleValues,c=i.startX,u=i.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var p=f+n;if(!(p===-1||p>=l.length)){var h=l[p];a==="startX"&&h>=u||a==="endX"&&h<=c||this.setState(Br({},a,h),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,o=n.y,i=n.width,l=n.height,c=n.fill,u=n.stroke;return B.createElement("rect",{stroke:u,fill:c,x:a,y:o,width:i,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,o=n.y,i=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=g.Children.only(u);return f?B.cloneElement(f,{x:a,y:o,width:i,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var o,i,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,p=c.traveller,h=c.ariaLabel,y=c.data,m=c.startIndex,x=c.endIndex,w=Math.max(n,this.props.x),v=Zg(Zg({},Fe(this.props,!1)),{},{x:w,y:u,width:d,height:f}),b=h||"Min value: ".concat((o=y[m])===null||o===void 0?void 0:o.name,", Max value: ").concat((i=y[x])===null||i===void 0?void 0:i.name);return B.createElement(nt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,v))}},{key:"renderSlide",value:function(n,a){var o=this.props,i=o.y,l=o.height,c=o.stroke,u=o.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return B.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:i,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,o=n.endIndex,i=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,p=d.endX,h=5,y={pointerEvents:"none",fill:u};return B.createElement(nt,{className:"recharts-brush-texts"},B.createElement(vi,Xp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-h,y:i+l/2},y),this.getTextOfTick(a)),B.createElement(vi,Xp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+c+h,y:i+l/2},y),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,a=n.data,o=n.className,i=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,p=this.state,h=p.startX,y=p.endX,m=p.isTextActive,x=p.isSlideMoving,w=p.isTravellerMoving,v=p.isTravellerFocused;if(!a||!a.length||!Pe(l)||!Pe(c)||!Pe(u)||!Pe(d)||u<=0||d<=0)return null;var b=Ge("recharts-brush",o),j=B.Children.count(i)===1,S=Xre("userSelect","none");return B.createElement(nt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(h,y),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(y,"endX"),(m||x||w||v||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,o=n.y,i=n.width,l=n.height,c=n.stroke,u=Math.floor(o+l/2)-1;return B.createElement(B.Fragment,null,B.createElement("rect",{x:a,y:o,width:i,height:l,fill:c,stroke:"none"}),B.createElement("line",{x1:a+1,y1:u,x2:a+i-1,y2:u,fill:"none",stroke:"#fff"}),B.createElement("line",{x1:a+1,y1:u+2,x2:a+i-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var o;return B.isValidElement(n)?o=B.cloneElement(n,a):ze(n)?o=n(a):o=t.renderDefaultTraveller(a),o}},{key:"getDerivedStateFromProps",value:function(n,a){var o=n.data,i=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(o!==a.prevData||u!==a.prevUpdateId)return Zg({prevData:o,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:i},o&&o.length?one({data:o,width:i,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(i!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+i-c]);var p=a.scale.domain().map(function(h){return a.scale(h)});return{prevData:o,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:i,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,a){for(var o=n.length,i=0,l=o-1;l-i>1;){var c=Math.floor((i+l)/2);n[c]>a?l=c:i=c}return a>=n[l]?l:i}}])}(g.PureComponent);Br(tl,"displayName","Brush");Br(tl,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ine=zb;function sne(e,t){var r;return ine(e,function(n,a,o){return r=t(n,a,o),!r}),!!r}var lne=sne,cne=Y2,une=ua,dne=lne,fne=Lr,pne=pm;function hne(e,t,r){var n=fne(e)?cne:dne;return r&&pne(e,t,r)&&(t=void 0),n(e,une(t))}var mne=hne;const gne=ot(mne);var na=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},Wk=bT;function yne(e,t,r){t=="__proto__"&&Wk?Wk(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var vne=yne,xne=vne,bne=vT,wne=ua;function Sne(e,t){var r={};return t=wne(t),bne(e,function(n,a,o){xne(r,a,t(n,a,o))}),r}var jne=Sne;const Nne=ot(jne);function kne(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var Pne=kne,Ene=zb;function Cne(e,t){var r=!0;return Ene(e,function(n,a,o){return r=!!t(n,a,o),r}),r}var Ane=Cne,Tne=Pne,One=Ane,_ne=ua,Ine=Lr,$ne=pm;function Rne(e,t,r){var n=Ine(e)?Tne:One;return r&&$ne(e,t,r)&&(t=void 0),n(e,_ne(t))}var Dne=Rne;const d_=ot(Dne);var Mne=["x","y"];function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cv.apply(this,arguments)}function Qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qk(Object(r),!0).forEach(function(n){Lne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lne(e,t,r){return t=Fne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fne(e){var t=Une(e,"string");return Du(t)=="symbol"?t:t+""}function Une(e,t){if(Du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bne(e,t){if(e==null)return{};var r=zne(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qne(e,t){var r=e.x,n=e.y,a=Bne(e,Mne),o="".concat(r),i=parseInt(o,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),p=parseInt(f,10);return uc(uc(uc(uc(uc({},t),a),i?{x:i}:{}),c?{y:c}:{}),{},{height:d,width:p,name:t.name,radius:t.radius})}function Kk(e){return B.createElement(a_,Cv({shapeType:"rectangle",propTransformer:qne,activeClassName:"recharts-active-bar"},e))}var Hne=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var o=typeof n=="number";return o?t(n,a):(o||bi(),r)}},Vne=["value","background"],f_;function rl(e){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(e)}function Wne(e,t){if(e==null)return{};var r=Qne(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Jp(){return Jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jp.apply(this,arguments)}function Gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gk(Object(r),!0).forEach(function(n){so(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h_(n.key),n)}}function Gne(e,t,r){return t&&Zk(e.prototype,t),r&&Zk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zne(e,t,r){return t=eh(t),Xne(e,p_()?Reflect.construct(t,r||[],eh(e).constructor):t.apply(e,r))}function Xne(e,t){if(t&&(rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yne(e)}function Yne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p_=function(){return!!e})()}function eh(e){return eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eh(e)}function Jne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Av(e,t)}function Av(e,t){return Av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Av(e,t)}function so(e,t,r){return t=h_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h_(e){var t=eae(e,"string");return rl(t)=="symbol"?t:t+""}function eae(e,t){if(rl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $i=function(e){function t(){var r;Kne(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=Zne(this,t,[].concat(a)),so(r,"state",{isAnimationFinished:!1}),so(r,"id",kl("recharts-bar-")),so(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),i&&i()}),so(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),i&&i()}),r}return Jne(t,e),Gne(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,o=this.props,i=o.shape,l=o.dataKey,c=o.activeIndex,u=o.activeBar,d=Fe(this.props,!1);return n&&n.map(function(f,p){var h=p===c,y=h?u:i,m=Ut(Ut(Ut({},d),f),{},{isActive:h,option:y,index:p,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return B.createElement(nt,Jp({className:"recharts-bar-rectangle"},yi(a.props,f,p),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),B.createElement(Kk,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,o=a.data,i=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,p=this.state.prevData;return B.createElement(ia,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var y=h.t,m=o.map(function(x,w){var v=p&&p[w];if(v){var b=Wr(v.x,x.x),j=Wr(v.y,x.y),S=Wr(v.width,x.width),k=Wr(v.height,x.height);return Ut(Ut({},x),{},{x:b(y),y:j(y),width:S(y),height:k(y)})}if(i==="horizontal"){var N=Wr(0,x.height),P=N(y);return Ut(Ut({},x),{},{y:x.y+x.height-P,height:P})}var C=Wr(0,x.width),E=C(y);return Ut(Ut({},x),{},{width:E})});return B.createElement(nt,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,o=n.isAnimationActive,i=this.state.prevData;return o&&a&&a.length&&(!i||!id(i,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,o=a.data,i=a.dataKey,l=a.activeIndex,c=Fe(this.props.background,!1);return o.map(function(u,d){u.value;var f=u.background,p=Wne(u,Vne);if(!f)return null;var h=Ut(Ut(Ut(Ut(Ut({},p),{},{fill:"#eee"},f),c),yi(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:i,index:d,className:"recharts-bar-background-rectangle"});return B.createElement(Kk,Jp({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},h))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.data,l=o.xAxis,c=o.yAxis,u=o.layout,d=o.children,f=Jr(d,sd);if(!f)return null;var p=u==="vertical"?i[0].height/2:i[0].width/2,h=function(x,w){var v=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:v,errorVal:Zt(x,w)}},y={clipPath:n?"url(#clipPath-".concat(a,")"):null};return B.createElement(nt,y,f.map(function(m){return B.cloneElement(m,{key:"error-bar-".concat(a,"-").concat(m.props.dataKey),data:i,xAxis:l,yAxis:c,layout:u,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,o=n.data,i=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,p=n.height,h=n.isAnimationActive,y=n.background,m=n.id;if(a||!o||!o.length)return null;var x=this.state.isAnimationFinished,w=Ge("recharts-bar",i),v=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,j=v||b,S=Qe(m)?this.id:m;return B.createElement(nt,{className:w},v||b?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(S)},B.createElement("rect",{x:v?u:u-f/2,y:b?d:d-p/2,width:v?f:f*2,height:b?p:p*2}))):null,B.createElement(nt,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(S,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,S),(!h||x)&&Ea.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(g.PureComponent);f_=$i;so($i,"displayName","Bar");so($i,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ta.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});so($i,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,o=e.xAxis,i=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,p=e.offset,h=$X(n,r);if(!h)return null;var y=t.layout,m=r.type.defaultProps,x=m!==void 0?Ut(Ut({},m),r.props):r.props,w=x.dataKey,v=x.children,b=x.minPointSize,j=y==="horizontal"?i:o,S=u?j.scale.domain():null,k=BX({numericAxis:j}),N=Jr(v,td),P=f.map(function(C,E){var _,L,U,D,I,A;u?_=RX(u[d+E],S):(_=Zt(C,w),Array.isArray(_)||(_=[k,_]));var $=Hne(b,f_.defaultProps.minPointSize)(_[1],E);if(y==="horizontal"){var O,R=[i.scale(_[0]),i.scale(_[1])],q=R[0],V=R[1];L=FN({axis:o,ticks:l,bandSize:a,offset:h.offset,entry:C,index:E}),U=(O=V??q)!==null&&O!==void 0?O:void 0,D=h.size;var z=q-V;if(I=Number.isNaN(z)?0:z,A={x:L,y:i.y,width:D,height:i.height},Math.abs($)>0&&Math.abs(I)<Math.abs($)){var J=jr(I||$)*(Math.abs($)-Math.abs(I));U-=J,I+=J}}else{var W=[o.scale(_[0]),o.scale(_[1])],F=W[0],H=W[1];if(L=F,U=FN({axis:i,ticks:c,bandSize:a,offset:h.offset,entry:C,index:E}),D=H-F,I=h.size,A={x:o.x,y:U,width:o.width,height:I},Math.abs($)>0&&Math.abs(D)<Math.abs($)){var X=jr(D||$)*(Math.abs($)-Math.abs(D));D+=X}}return Ut(Ut(Ut({},C),{},{x:L,y:U,width:D,height:I,value:u?_:_[1],payload:C,background:A},N&&N[E]&&N[E].props),{},{tooltipPayload:[DO(r,C)],tooltipPosition:{x:L+D/2,y:U+I/2}})});return Ut({data:P,layout:y},p)});function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function tae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m_(n.key),n)}}function rae(e,t,r){return t&&Xk(e.prototype,t),r&&Xk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function On(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yk(Object(r),!0).forEach(function(n){_m(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _m(e,t,r){return t=m_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m_(e){var t=nae(e,"string");return Mu(t)=="symbol"?t:t+""}function nae(e,t){if(Mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g_=function(t,r,n,a,o){var i=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},p=!!Hr(u,$i);return d.reduce(function(h,y){var m=r[y],x=m.orientation,w=m.domain,v=m.padding,b=v===void 0?{}:v,j=m.mirror,S=m.reversed,k="".concat(x).concat(j?"Mirror":""),N,P,C,E,_;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var L=w[1]-w[0],U=1/0,D=m.categoricalDomain.sort();if(D.forEach(function(W,F){F>0&&(U=Math.min((W||0)-(D[F-1]||0),U))}),Number.isFinite(U)){var I=U/L,A=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(N=I*A/2),m.padding==="no-gap"){var $=Nr(t.barCategoryGap,I*A),O=I*A/2;N=O-$-(O-$)/A*$}}}a==="xAxis"?P=[n.left+(b.left||0)+(N||0),n.left+n.width-(b.right||0)-(N||0)]:a==="yAxis"?P=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(N||0),n.top+n.height-(b.bottom||0)-(N||0)]:P=m.range,S&&(P=[P[1],P[0]]);var R=_O(m,o,p),q=R.scale,V=R.realScaleType;q.domain(w).range(P),IO(q);var z=$O(q,On(On({},m),{},{realScaleType:V}));a==="xAxis"?(_=x==="top"&&!j||x==="bottom"&&j,C=n.left,E=f[k]-_*m.height):a==="yAxis"&&(_=x==="left"&&!j||x==="right"&&j,C=f[k]-_*m.width,E=n.top);var J=On(On(On({},m),z),{},{realScaleType:V,x:C,y:E,scale:q,width:a==="xAxis"?n.width:m.width,height:a==="yAxis"?n.height:m.height});return J.bandSize=Mp(J,z),!m.hide&&a==="xAxis"?f[k]+=(_?-1:1)*J.height:m.hide||(f[k]+=(_?-1:1)*J.width),On(On({},h),{},_m({},y,J))},{})},y_=function(t,r){var n=t.x,a=t.y,o=r.x,i=r.y;return{x:Math.min(n,o),y:Math.min(a,i),width:Math.abs(o-n),height:Math.abs(i-a)}},aae=function(t){var r=t.x1,n=t.y1,a=t.x2,o=t.y2;return y_({x:r,y:n},{x:a,y:o})},v_=function(){function e(t){tae(this,e),this.scale=t}return rae(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+i}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],o=n[n.length-1];return a<=o?r>=a&&r<=o:r>=o&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();_m(v_,"EPS",1e-4);var yw=function(t){var r=Object.keys(t).reduce(function(n,a){return On(On({},n),{},_m({},a,v_.create(t[a])))},{});return On(On({},r),{},{apply:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=o.bandAware,l=o.position;return Nne(a,function(c,u){return r[u].apply(c,{bandAware:i,position:l})})},isInRange:function(a){return d_(a,function(o,i){return r[i].isInRange(o)})}})};function oae(e){return(e%180+180)%180}var iae=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=oae(a),i=o*Math.PI/180,l=Math.atan(n/r),c=i>l&&i<Math.PI-l?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},sae=ua,lae=ed,cae=dm;function uae(e){return function(t,r,n){var a=Object(t);if(!lae(t)){var o=sae(r);t=cae(t),r=function(l){return o(a[l],l,a)}}var i=e(t,r,n);return i>-1?a[o?t[i]:i]:void 0}}var dae=uae,fae=s_;function pae(e){var t=fae(e),r=t%1;return t===t?r?t-r:t:0}var hae=pae,mae=fT,gae=ua,yae=hae,vae=Math.max;function xae(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:yae(r);return a<0&&(a=vae(n+a,0)),mae(e,gae(t),a)}var bae=xae,wae=dae,Sae=bae,jae=wae(Sae),Nae=jae;const kae=ot(Nae);var Pae=w6(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),vw=g.createContext(void 0),xw=g.createContext(void 0),x_=g.createContext(void 0),b_=g.createContext({}),w_=g.createContext(void 0),S_=g.createContext(0),j_=g.createContext(0),Jk=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,o=r.offset,i=t.clipPathId,l=t.children,c=t.width,u=t.height,d=Pae(o);return B.createElement(vw.Provider,{value:n},B.createElement(xw.Provider,{value:a},B.createElement(b_.Provider,{value:o},B.createElement(x_.Provider,{value:d},B.createElement(w_.Provider,{value:i},B.createElement(S_.Provider,{value:u},B.createElement(j_.Provider,{value:c},l)))))))},Eae=function(){return g.useContext(w_)},N_=function(t){var r=g.useContext(vw);r==null&&bi();var n=r[t];return n==null&&bi(),n},Cae=function(){var t=g.useContext(vw);return ro(t)},Aae=function(){var t=g.useContext(xw),r=kae(t,function(n){return d_(n.domain,Number.isFinite)});return r||ro(t)},k_=function(t){var r=g.useContext(xw);r==null&&bi();var n=r[t];return n==null&&bi(),n},Tae=function(){var t=g.useContext(x_);return t},Oae=function(){return g.useContext(b_)},bw=function(){return g.useContext(j_)},ww=function(){return g.useContext(S_)};function nl(e){"@babel/helpers - typeof";return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nl(e)}function _ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E_(n.key),n)}}function $ae(e,t,r){return t&&Iae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rae(e,t,r){return t=th(t),Dae(e,P_()?Reflect.construct(t,r||[],th(e).constructor):t.apply(e,r))}function Dae(e,t){if(t&&(nl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mae(e)}function Mae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P_=function(){return!!e})()}function th(e){return th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},th(e)}function Lae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tv(e,t)}function Tv(e,t){return Tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Tv(e,t)}function eP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eP(Object(r),!0).forEach(function(n){Sw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sw(e,t,r){return t=E_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E_(e){var t=Fae(e,"string");return nl(t)=="symbol"?t:t+""}function Fae(e,t){if(nl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uae(e,t){return Hae(e)||qae(e,t)||zae(e,t)||Bae()}function Bae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zae(e,t){if(e){if(typeof e=="string")return rP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rP(e,t)}}function rP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function Hae(e){if(Array.isArray(e))return e}function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ov.apply(this,arguments)}var Vae=function(t,r){var n;return B.isValidElement(t)?n=B.cloneElement(t,r):ze(t)?n=t(r):n=B.createElement("line",Ov({},r,{className:"recharts-reference-line-line"})),n},Wae=function(t,r,n,a,o,i,l,c,u){var d=o.x,f=o.y,p=o.width,h=o.height;if(n){var y=u.y,m=t.y.apply(y,{position:i});if(na(u,"discard")&&!t.y.isInRange(m))return null;var x=[{x:d+p,y:m},{x:d,y:m}];return c==="left"?x.reverse():x}if(r){var w=u.x,v=t.x.apply(w,{position:i});if(na(u,"discard")&&!t.x.isInRange(v))return null;var b=[{x:v,y:f+h},{x:v,y:f}];return l==="top"?b.reverse():b}if(a){var j=u.segment,S=j.map(function(k){return t.apply(k,{position:i})});return na(u,"discard")&&gne(S,function(k){return!t.isInRange(k)})?null:S}return null};function Qae(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,o=e.yAxisId,i=e.shape,l=e.className,c=e.alwaysShow,u=Eae(),d=N_(a),f=k_(o),p=Tae();if(!u||!p)return null;Ln(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=yw({x:d.scale,y:f.scale}),y=Yt(t),m=Yt(r),x=n&&n.length===2,w=Wae(h,y,m,x,p,e.position,d.orientation,f.orientation,e);if(!w)return null;var v=Uae(w,2),b=v[0],j=b.x,S=b.y,k=v[1],N=k.x,P=k.y,C=na(e,"hidden")?"url(#".concat(u,")"):void 0,E=tP(tP({clipPath:C},Fe(e,!0)),{},{x1:j,y1:S,x2:N,y2:P});return B.createElement(nt,{className:Ge("recharts-reference-line",l)},Vae(i,E),nr.renderCallByParent(e,aae({x1:j,y1:S,x2:N,y2:P})))}var jw=function(e){function t(){return _ae(this,t),Rae(this,t,arguments)}return Lae(t,e),$ae(t,[{key:"render",value:function(){return B.createElement(Qae,this.props)}}])}(B.Component);Sw(jw,"displayName","ReferenceLine");Sw(jw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(this,arguments)}function al(e){"@babel/helpers - typeof";return al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},al(e)}function nP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(r),!0).forEach(function(n){Im(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A_(n.key),n)}}function Zae(e,t,r){return t&&Gae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xae(e,t,r){return t=rh(t),Yae(e,C_()?Reflect.construct(t,r||[],rh(e).constructor):t.apply(e,r))}function Yae(e,t){if(t&&(al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jae(e)}function Jae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C_=function(){return!!e})()}function rh(e){return rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rh(e)}function eoe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iv(e,t)}function Iv(e,t){return Iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Iv(e,t)}function Im(e,t,r){return t=A_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A_(e){var t=toe(e,"string");return al(t)=="symbol"?t:t+""}function toe(e,t){if(al(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(al(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var roe=function(t){var r=t.x,n=t.y,a=t.xAxis,o=t.yAxis,i=yw({x:a.scale,y:o.scale}),l=i.apply({x:r,y:n},{bandAware:!0});return na(t,"discard")&&!i.isInRange(l)?null:l},$m=function(e){function t(){return Kae(this,t),Xae(this,t,arguments)}return eoe(t,e),Zae(t,[{key:"render",value:function(){var n=this.props,a=n.x,o=n.y,i=n.r,l=n.alwaysShow,c=n.clipPathId,u=Yt(a),d=Yt(o);if(Ln(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=roe(this.props);if(!f)return null;var p=f.x,h=f.y,y=this.props,m=y.shape,x=y.className,w=na(this.props,"hidden")?"url(#".concat(c,")"):void 0,v=aP(aP({clipPath:w},Fe(this.props,!0)),{},{cx:p,cy:h});return B.createElement(nt,{className:Ge("recharts-reference-dot",x)},t.renderDot(m,v),nr.renderCallByParent(this.props,{x:p-i,y:h-i,width:2*i,height:2*i}))}}])}(B.Component);Im($m,"displayName","ReferenceDot");Im($m,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Im($m,"renderDot",function(e,t){var r;return B.isValidElement(e)?r=B.cloneElement(e,t):ze(e)?r=e(t):r=B.createElement(km,_v({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$v.apply(this,arguments)}function ol(e){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ol(e)}function oP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(r),!0).forEach(function(n){Rm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function noe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aoe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O_(n.key),n)}}function ooe(e,t,r){return t&&aoe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ioe(e,t,r){return t=nh(t),soe(e,T_()?Reflect.construct(t,r||[],nh(e).constructor):t.apply(e,r))}function soe(e,t){if(t&&(ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return loe(e)}function loe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T_=function(){return!!e})()}function nh(e){return nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nh(e)}function coe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rv(e,t)}function Rv(e,t){return Rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Rv(e,t)}function Rm(e,t,r){return t=O_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O_(e){var t=uoe(e,"string");return ol(t)=="symbol"?t:t+""}function uoe(e,t){if(ol(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ol(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var doe=function(t,r,n,a,o){var i=o.x1,l=o.x2,c=o.y1,u=o.y2,d=o.xAxis,f=o.yAxis;if(!d||!f)return null;var p=yw({x:d.scale,y:f.scale}),h={x:t?p.x.apply(i,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},y={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:a?p.y.apply(u,{position:"end"}):p.y.rangeMax};return na(o,"discard")&&(!p.isInRange(h)||!p.isInRange(y))?null:y_(h,y)},Dm=function(e){function t(){return noe(this,t),ioe(this,t,arguments)}return coe(t,e),ooe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,o=n.x2,i=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Ln(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Yt(a),p=Yt(o),h=Yt(i),y=Yt(l),m=this.props.shape;if(!f&&!p&&!h&&!y&&!m)return null;var x=doe(f,p,h,y,this.props);if(!x&&!m)return null;var w=na(this.props,"hidden")?"url(#".concat(d,")"):void 0;return B.createElement(nt,{className:Ge("recharts-reference-area",c)},t.renderRect(m,iP(iP({clipPath:w},Fe(this.props,!0)),x)),nr.renderCallByParent(this.props,x))}}])}(B.Component);Rm(Dm,"displayName","ReferenceArea");Rm(Dm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Rm(Dm,"renderRect",function(e,t){var r;return B.isValidElement(e)?r=B.cloneElement(e,t):ze(e)?r=e(t):r=B.createElement(gw,$v({},t,{className:"recharts-reference-area-rect"})),r});function __(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function foe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return iae(n,r)}function poe(e,t,r){var n=r==="width",a=e.x,o=e.y,i=e.width,l=e.height;return t===1?{start:n?a:o,end:n?a+i:o+l}:{start:n?a+i:o+l,end:n?a:o}}function ah(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var o=r();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-a)<=0}function hoe(e,t){return __(e,t+1)}function moe(e,t,r,n,a){for(var o=(n||[]).slice(),i=t.start,l=t.end,c=0,u=1,d=i,f=function(){var y=n==null?void 0:n[c];if(y===void 0)return{v:__(n,u)};var m=c,x,w=function(){return x===void 0&&(x=r(y,m)),x},v=y.coordinate,b=c===0||ah(e,v,w,d,l);b||(c=0,d=i,u+=1),b&&(d=v+e*(w()/2+a),c+=u)},p;u<=o.length;)if(p=f(),p)return p.v;return[]}function Lu(e){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(e)}function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(r),!0).forEach(function(n){goe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function goe(e,t,r){return t=yoe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yoe(e){var t=voe(e,"string");return Lu(t)=="symbol"?t:t+""}function voe(e,t){if(Lu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xoe(e,t,r,n,a){for(var o=(n||[]).slice(),i=o.length,l=t.start,c=t.end,u=function(p){var h=o[p],y,m=function(){return y===void 0&&(y=r(h,p)),y};if(p===i-1){var x=e*(h.coordinate+e*m()/2-c);o[p]=h=pr(pr({},h),{},{tickCoord:x>0?h.coordinate-x*e:h.coordinate})}else o[p]=h=pr(pr({},h),{},{tickCoord:h.coordinate});var w=ah(e,h.tickCoord,m,l,c);w&&(c=h.tickCoord-e*(m()/2+a),o[p]=pr(pr({},h),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return o}function boe(e,t,r,n,a,o){var i=(n||[]).slice(),l=i.length,c=t.start,u=t.end;if(o){var d=n[l-1],f=r(d,l-1),p=e*(d.coordinate+e*f/2-u);i[l-1]=d=pr(pr({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate});var h=ah(e,d.tickCoord,function(){return f},c,u);h&&(u=d.tickCoord-e*(f/2+a),i[l-1]=pr(pr({},d),{},{isShow:!0}))}for(var y=o?l-1:l,m=function(v){var b=i[v],j,S=function(){return j===void 0&&(j=r(b,v)),j};if(v===0){var k=e*(b.coordinate-e*S()/2-c);i[v]=b=pr(pr({},b),{},{tickCoord:k<0?b.coordinate-k*e:b.coordinate})}else i[v]=b=pr(pr({},b),{},{tickCoord:b.coordinate});var N=ah(e,b.tickCoord,S,c,u);N&&(c=b.tickCoord+e*(S()/2+a),i[v]=pr(pr({},b),{},{isShow:!0}))},x=0;x<y;x++)m(x);return i}function Nw(e,t,r){var n=e.tick,a=e.ticks,o=e.viewBox,i=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(Pe(c)||ta.isSsr)return hoe(a,typeof c=="number"&&Pe(c)?c:0);var p=[],h=l==="top"||l==="bottom"?"width":"height",y=d&&h==="width"?_c(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(b,j){var S=ze(u)?u(b.value,j):b.value;return h==="width"?foe(_c(S,{fontSize:t,letterSpacing:r}),y,f):_c(S,{fontSize:t,letterSpacing:r})[h]},x=a.length>=2?jr(a[1].coordinate-a[0].coordinate):1,w=poe(o,x,h);return c==="equidistantPreserveStart"?moe(x,w,m,a,i):(c==="preserveStart"||c==="preserveStartEnd"?p=boe(x,w,m,a,i,c==="preserveStartEnd"):p=xoe(x,w,m,a,i),p.filter(function(v){return v.isShow}))}var woe=["viewBox"],Soe=["viewBox"],joe=["ticks"];function il(e){"@babel/helpers - typeof";return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},il(e)}function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gs.apply(this,arguments)}function lP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(r),!0).forEach(function(n){kw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xg(e,t){if(e==null)return{};var r=Noe(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Noe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function koe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$_(n.key),n)}}function Poe(e,t,r){return t&&cP(e.prototype,t),r&&cP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eoe(e,t,r){return t=oh(t),Coe(e,I_()?Reflect.construct(t,r||[],oh(e).constructor):t.apply(e,r))}function Coe(e,t){if(t&&(il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aoe(e)}function Aoe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I_=function(){return!!e})()}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oh(e)}function Toe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dv(e,t)}function Dv(e,t){return Dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Dv(e,t)}function kw(e,t,r){return t=$_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $_(e){var t=Ooe(e,"string");return il(t)=="symbol"?t:t+""}function Ooe(e,t){if(il(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(il(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _l=function(e){function t(r){var n;return koe(this,t),n=Eoe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return Toe(t,e),Poe(t,[{key:"shouldComponentUpdate",value:function(n,a){var o=n.viewBox,i=Xg(n,woe),l=this.props,c=l.viewBox,u=Xg(l,Soe);return!Es(o,c)||!Es(i,u)||!Es(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,o=a.x,i=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,p=a.tickMargin,h,y,m,x,w,v,b=f?-1:1,j=n.tickSize||d,S=Pe(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":h=y=n.coordinate,x=i+ +!f*c,m=x-b*j,v=m-b*p,w=S;break;case"left":m=x=n.coordinate,y=o+ +!f*l,h=y-b*j,w=h-b*p,v=S;break;case"right":m=x=n.coordinate,y=o+ +f*l,h=y+b*j,w=h+b*p,v=S;break;default:h=y=n.coordinate,x=i+ +f*c,m=x+b*j,v=m+b*p,w=S;break}return{line:{x1:h,y1:m,x2:y,y2:x},tick:{x:w,y:v}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,o=n.mirror,i;switch(a){case"left":i=o?"start":"end";break;case"right":i=o?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,o=n.mirror,i="end";switch(a){case"left":case"right":i="middle";break;case"top":i=o?"start":"end";break;default:i=o?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,o=n.y,i=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=wr(wr(wr({},Fe(this.props,!1)),Fe(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);f=wr(wr({},f),{},{x1:a,y1:o+p*l,x2:a+i,y2:o+p*l})}else{var h=+(c==="left"&&!u||c==="right"&&u);f=wr(wr({},f),{},{x1:a+h*i,y1:o,x2:a+h*i,y2:o+l})}return B.createElement("line",gs({},f,{className:Ge("recharts-cartesian-axis-line",Yr(d,"className"))}))}},{key:"renderTicks",value:function(n,a,o){var i=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,p=l.unit,h=Nw(wr(wr({},this.props),{},{ticks:n}),a,o),y=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),x=Fe(this.props,!1),w=Fe(d,!1),v=wr(wr({},x),{},{fill:"none"},Fe(c,!1)),b=h.map(function(j,S){var k=i.getTickLineCoord(j),N=k.line,P=k.tick,C=wr(wr(wr(wr({textAnchor:y,verticalAnchor:m},x),{},{stroke:"none",fill:u},w),P),{},{index:S,payload:j,visibleTicksCount:h.length,tickFormatter:f});return B.createElement(nt,gs({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},yi(i.props,j,S)),c&&B.createElement("line",gs({},v,N,{className:Ge("recharts-cartesian-axis-tick-line",Yr(c,"className"))})),d&&t.renderTickItem(d,C,"".concat(ze(f)?f(j.value,S):j.value).concat(p||"")))});return B.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,o=a.axisLine,i=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,p=f.ticks,h=Xg(f,joe),y=p;return ze(c)&&(y=p&&p.length>0?c(this.props):c(h)),i<=0||l<=0||!y||!y.length?null:B.createElement(nt,{className:Ge("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},o&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),nr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,o){var i;return B.isValidElement(n)?i=B.cloneElement(n,a):ze(n)?i=n(a):i=B.createElement(vi,gs({},a,{className:"recharts-cartesian-axis-tick-value"}),o),i}}])}(g.Component);kw(_l,"displayName","CartesianAxis");kw(_l,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _oe=["x1","y1","x2","y2","key"],Ioe=["offset"];function wi(e){"@babel/helpers - typeof";return wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wi(e)}function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(r),!0).forEach(function(n){$oe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $oe(e,t,r){return t=Roe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Roe(e){var t=Doe(e,"string");return wi(t)=="symbol"?t:t+""}function Doe(e,t){if(wi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ni(){return ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ni.apply(this,arguments)}function dP(e,t){if(e==null)return{};var r=Moe(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Moe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Loe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,o=t.y,i=t.width,l=t.height,c=t.ry;return B.createElement("rect",{x:a,y:o,ry:c,width:i,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function R_(e,t){var r;if(B.isValidElement(e))r=B.cloneElement(e,t);else if(ze(e))r=e(t);else{var n=t.x1,a=t.y1,o=t.x2,i=t.y2,l=t.key,c=dP(t,_oe),u=Fe(c,!1);u.offset;var d=dP(u,Ioe);r=B.createElement("line",ni({},d,{x1:n,y1:a,x2:o,y2:i,fill:"none",key:l}))}return r}function Foe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,o=e.horizontalPoints;if(!a||!o||!o.length)return null;var i=o.map(function(l,c){var u=gr(gr({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return R_(a,u)});return B.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function Uoe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,o=e.verticalPoints;if(!a||!o||!o.length)return null;var i=o.map(function(l,c){var u=gr(gr({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return R_(a,u)});return B.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function Boe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,o=e.width,i=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(p){return Math.round(p+a-a)}).sort(function(p,h){return p-h});a!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var y=!d[h+1],m=y?a+i-p:d[h+1]-p;if(m<=0)return null;var x=h%t.length;return B.createElement("rect",{key:"react-".concat(h),y:p,x:n,height:m,width:o,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function zoe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,o=e.x,i=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(p){return Math.round(p+o-o)}).sort(function(p,h){return p-h});o!==d[0]&&d.unshift(0);var f=d.map(function(p,h){var y=!d[h+1],m=y?o+l-p:d[h+1]-p;if(m<=0)return null;var x=h%n.length;return B.createElement("rect",{key:"react-".concat(h),x:p,y:i,width:m,height:c,stroke:"none",fill:n[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var qoe=function(t,r){var n=t.xAxis,a=t.width,o=t.height,i=t.offset;return OO(Nw(gr(gr(gr({},_l.defaultProps),n),{},{ticks:Sa(n,!0),viewBox:{x:0,y:0,width:a,height:o}})),i.left,i.left+i.width,r)},Hoe=function(t,r){var n=t.yAxis,a=t.width,o=t.height,i=t.offset;return OO(Nw(gr(gr(gr({},_l.defaultProps),n),{},{ticks:Sa(n,!0),viewBox:{x:0,y:0,width:a,height:o}})),i.top,i.top+i.height,r)},Wi={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Pw(e){var t,r,n,a,o,i,l=bw(),c=ww(),u=Oae(),d=gr(gr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Wi.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Wi.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Wi.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Wi.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:Wi.vertical,verticalFill:(i=e.verticalFill)!==null&&i!==void 0?i:Wi.verticalFill,x:Pe(e.x)?e.x:u.left,y:Pe(e.y)?e.y:u.top,width:Pe(e.width)?e.width:u.width,height:Pe(e.height)?e.height:u.height}),f=d.x,p=d.y,h=d.width,y=d.height,m=d.syncWithTicks,x=d.horizontalValues,w=d.verticalValues,v=Cae(),b=Aae();if(!Pe(h)||h<=0||!Pe(y)||y<=0||!Pe(f)||f!==+f||!Pe(p)||p!==+p)return null;var j=d.verticalCoordinatesGenerator||qoe,S=d.horizontalCoordinatesGenerator||Hoe,k=d.horizontalPoints,N=d.verticalPoints;if((!k||!k.length)&&ze(S)){var P=x&&x.length,C=S({yAxis:b?gr(gr({},b),{},{ticks:P?x:b.ticks}):void 0,width:l,height:c,offset:u},P?!0:m);Ln(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(wi(C),"]")),Array.isArray(C)&&(k=C)}if((!N||!N.length)&&ze(j)){var E=w&&w.length,_=j({xAxis:v?gr(gr({},v),{},{ticks:E?w:v.ticks}):void 0,width:l,height:c,offset:u},E?!0:m);Ln(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(wi(_),"]")),Array.isArray(_)&&(N=_)}return B.createElement("g",{className:"recharts-cartesian-grid"},B.createElement(Loe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),B.createElement(Foe,ni({},d,{offset:u,horizontalPoints:k,xAxis:v,yAxis:b})),B.createElement(Uoe,ni({},d,{offset:u,verticalPoints:N,xAxis:v,yAxis:b})),B.createElement(Boe,ni({},d,{horizontalPoints:k})),B.createElement(zoe,ni({},d,{verticalPoints:N})))}Pw.displayName="CartesianGrid";var Voe=["type","layout","connectNulls","ref"],Woe=["key"];function sl(e){"@babel/helpers - typeof";return sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sl(e)}function fP(e,t){if(e==null)return{};var r=Qoe(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qoe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lc.apply(this,arguments)}function pP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(r),!0).forEach(function(n){_n(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qi(e){return Xoe(e)||Zoe(e)||Goe(e)||Koe()}function Koe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Goe(e,t){if(e){if(typeof e=="string")return Mv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mv(e,t)}}function Zoe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xoe(e){if(Array.isArray(e))return Mv(e)}function Mv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M_(n.key),n)}}function Joe(e,t,r){return t&&hP(e.prototype,t),r&&hP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function eie(e,t,r){return t=ih(t),tie(e,D_()?Reflect.construct(t,r||[],ih(e).constructor):t.apply(e,r))}function tie(e,t){if(t&&(sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rie(e)}function rie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D_=function(){return!!e})()}function ih(e){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ih(e)}function nie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lv(e,t)}function Lv(e,t){return Lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Lv(e,t)}function _n(e,t,r){return t=M_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M_(e){var t=aie(e,"string");return sl(t)=="symbol"?t:t+""}function aie(e,t){if(sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ld=function(e){function t(){var r;Yoe(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return r=eie(this,t,[].concat(a)),_n(r,"state",{isAnimationFinished:!0,totalLength:0}),_n(r,"generateSimpleStrokeDasharray",function(i,l){return"".concat(l,"px ").concat(i-l,"px")}),_n(r,"getStrokeDasharray",function(i,l,c){var u=c.reduce(function(w,v){return w+v});if(!u)return r.generateSimpleStrokeDasharray(l,i);for(var d=Math.floor(i/u),f=i%u,p=l-i,h=[],y=0,m=0;y<c.length;m+=c[y],++y)if(m+c[y]>f){h=[].concat(Qi(c.slice(0,y)),[f-m]);break}var x=h.length%2===0?[0,p]:[p];return[].concat(Qi(t.repeat(c,d)),Qi(h),x).map(function(w){return"".concat(w,"px")}).join(", ")}),_n(r,"id",kl("recharts-line-")),_n(r,"pathRef",function(i){r.mainCurve=i}),_n(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),_n(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return nie(t,e),Joe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.points,l=o.xAxis,c=o.yAxis,u=o.layout,d=o.children,f=Jr(d,sd);if(!f)return null;var p=function(m,x){return{x:m.x,y:m.y,value:m.value,errorVal:Zt(m.payload,x)}},h={clipPath:n?"url(#clipPath-".concat(a,")"):null};return B.createElement(nt,h,f.map(function(y){return B.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:i,xAxis:l,yAxis:c,layout:u,dataPointFormatter:p})}))}},{key:"renderDots",value:function(n,a,o){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=Fe(this.props,!1),p=Fe(c,!0),h=u.map(function(m,x){var w=Ur(Ur(Ur({key:"dot-".concat(x),r:3},f),p),{},{value:m.value,dataKey:d,cx:m.x,cy:m.y,index:x,payload:m.payload});return t.renderDotItem(c,w)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(o,")"):null};return B.createElement(nt,Lc({className:"recharts-line-dots",key:"dots"},y),h)}},{key:"renderCurveStatically",value:function(n,a,o,i){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=fP(l,Voe),p=Ur(Ur(Ur({},Fe(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(o,")"):null,points:n},i),{},{type:c,layout:u,connectNulls:d});return B.createElement(Up,Lc({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var o=this,i=this.props,l=i.points,c=i.strokeDasharray,u=i.isAnimationActive,d=i.animationBegin,f=i.animationDuration,p=i.animationEasing,h=i.animationId,y=i.animateNewValues,m=i.width,x=i.height,w=this.state,v=w.prevPoints,b=w.totalLength;return B.createElement(ia,{begin:d,duration:f,isActive:u,easing:p,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var S=j.t;if(v){var k=v.length/l.length,N=l.map(function(L,U){var D=Math.floor(U*k);if(v[D]){var I=v[D],A=Wr(I.x,L.x),$=Wr(I.y,L.y);return Ur(Ur({},L),{},{x:A(S),y:$(S)})}if(y){var O=Wr(m*2,L.x),R=Wr(x/2,L.y);return Ur(Ur({},L),{},{x:O(S),y:R(S)})}return Ur(Ur({},L),{},{x:L.x,y:L.y})});return o.renderCurveStatically(N,n,a)}var P=Wr(0,b),C=P(S),E;if(c){var _="".concat(c).split(/[,\s]+/gim).map(function(L){return parseFloat(L)});E=o.getStrokeDasharray(C,b,_)}else E=o.generateSimpleStrokeDasharray(b,C);return o.renderCurveStatically(l,n,a,{strokeDasharray:E})})}},{key:"renderCurve",value:function(n,a){var o=this.props,i=o.points,l=o.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&i&&i.length&&(!u&&d>0||!id(u,i))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(i,n,a)}},{key:"render",value:function(){var n,a=this.props,o=a.hide,i=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,p=a.left,h=a.width,y=a.height,m=a.isAnimationActive,x=a.id;if(o||!l||!l.length)return null;var w=this.state.isAnimationFinished,v=l.length===1,b=Ge("recharts-line",c),j=u&&u.allowDataOverflow,S=d&&d.allowDataOverflow,k=j||S,N=Qe(x)?this.id:x,P=(n=Fe(i,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},C=P.r,E=C===void 0?3:C,_=P.strokeWidth,L=_===void 0?2:_,U=EF(i)?i:{},D=U.clipDot,I=D===void 0?!0:D,A=E*2+L;return B.createElement(nt,{className:b},j||S?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(N)},B.createElement("rect",{x:j?p:p-h/2,y:S?f:f-y/2,width:j?h:h*2,height:S?y:y*2})),!I&&B.createElement("clipPath",{id:"clipPath-dots-".concat(N)},B.createElement("rect",{x:p-A/2,y:f-A/2,width:h+A,height:y+A}))):null,!v&&this.renderCurve(k,N),this.renderErrorBar(k,N),(v||i)&&this.renderDots(k,I,N),(!m||w)&&Ea.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var o=n.length%2!==0?[].concat(Qi(n),[0]):n,i=[],l=0;l<a;++l)i=[].concat(Qi(i),Qi(o));return i}},{key:"renderDotItem",value:function(n,a){var o;if(B.isValidElement(n))o=B.cloneElement(n,a);else if(ze(n))o=n(a);else{var i=a.key,l=fP(a,Woe),c=Ge("recharts-line-dot",typeof n!="boolean"?n.className:"");o=B.createElement(km,Lc({key:i},l,{className:c}))}return o}}])}(g.PureComponent);_n(ld,"displayName","Line");_n(ld,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ta.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});_n(ld,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,i=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(p,h){var y=Zt(p,i);return d==="horizontal"?{x:LN({axis:r,ticks:a,bandSize:l,entry:p,index:h}),y:Qe(y)?null:n.scale(y),value:y,payload:p}:{x:Qe(y)?null:r.scale(y),y:LN({axis:n,ticks:o,bandSize:l,entry:p,index:h}),value:y,payload:p}});return Ur({points:f,layout:d},u)});function ll(e){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(e)}function oie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U_(n.key),n)}}function sie(e,t,r){return t&&iie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lie(e,t,r){return t=sh(t),cie(e,L_()?Reflect.construct(t,r||[],sh(e).constructor):t.apply(e,r))}function cie(e,t){if(t&&(ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uie(e)}function uie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L_=function(){return!!e})()}function sh(e){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sh(e)}function die(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fv(e,t)}function Fv(e,t){return Fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fv(e,t)}function F_(e,t,r){return t=U_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U_(e){var t=fie(e,"string");return ll(t)=="symbol"?t:t+""}function fie(e,t){if(ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uv.apply(this,arguments)}function pie(e){var t=e.xAxisId,r=bw(),n=ww(),a=N_(t);return a==null?null:B.createElement(_l,Uv({},a,{className:Ge("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(i){return Sa(i,!0)}}))}var Il=function(e){function t(){return oie(this,t),lie(this,t,arguments)}return die(t,e),sie(t,[{key:"render",value:function(){return B.createElement(pie,this.props)}}])}(B.Component);F_(Il,"displayName","XAxis");F_(Il,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function cl(e){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(e)}function hie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q_(n.key),n)}}function gie(e,t,r){return t&&mie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yie(e,t,r){return t=lh(t),vie(e,B_()?Reflect.construct(t,r||[],lh(e).constructor):t.apply(e,r))}function vie(e,t){if(t&&(cl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xie(e)}function xie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B_=function(){return!!e})()}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lh(e)}function bie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bv(e,t)}function Bv(e,t){return Bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Bv(e,t)}function z_(e,t,r){return t=q_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q_(e){var t=wie(e,"string");return cl(t)=="symbol"?t:t+""}function wie(e,t){if(cl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zv.apply(this,arguments)}var Sie=function(t){var r=t.yAxisId,n=bw(),a=ww(),o=k_(r);return o==null?null:B.createElement(_l,zv({},o,{className:Ge("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Sa(l,!0)}}))},$l=function(e){function t(){return hie(this,t),yie(this,t,arguments)}return bie(t,e),gie(t,[{key:"render",value:function(){return B.createElement(Sie,this.props)}}])}(B.Component);z_($l,"displayName","YAxis");z_($l,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function mP(e){return Pie(e)||kie(e)||Nie(e)||jie()}function jie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nie(e,t){if(e){if(typeof e=="string")return qv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qv(e,t)}}function kie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pie(e){if(Array.isArray(e))return qv(e)}function qv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hv=function(t,r,n,a,o){var i=Jr(t,jw),l=Jr(t,$m),c=[].concat(mP(i),mP(l)),u=Jr(t,Dm),d="".concat(a,"Id"),f=a[0],p=r;if(c.length&&(p=c.reduce(function(m,x){if(x.props[d]===n&&na(x.props,"extendDomain")&&Pe(x.props[f])){var w=x.props[f];return[Math.min(m[0],w),Math.max(m[1],w)]}return m},p)),u.length){var h="".concat(f,"1"),y="".concat(f,"2");p=u.reduce(function(m,x){if(x.props[d]===n&&na(x.props,"extendDomain")&&Pe(x.props[h])&&Pe(x.props[y])){var w=x.props[h],v=x.props[y];return[Math.min(m[0],w,v),Math.max(m[1],w,v)]}return m},p)}return o&&o.length&&(p=o.reduce(function(m,x){return Pe(x)?[Math.min(m[0],x),Math.max(m[1],x)]:m},p)),p},H_={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function o(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,p),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],h]:c._events[y].push(h):(c._events[y]=h,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,h=f.length,y=new Array(h);p<h;p++)y[p]=f[p].fn;return y},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,p,h,y){var m=r?r+u:u;if(!this._events[m])return!1;var x=this._events[m],w=arguments.length,v,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,p),!0;case 5:return x.fn.call(x.context,d,f,p,h),!0;case 6:return x.fn.call(x.context,d,f,p,h,y),!0}for(b=1,v=new Array(w-1);b<w;b++)v[b-1]=arguments[b];x.fn.apply(x.context,v)}else{var j=x.length,S;for(b=0;b<j;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),w){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,d);break;case 3:x[b].fn.call(x[b].context,d,f);break;case 4:x[b].fn.call(x[b].context,d,f,p);break;default:if(!v)for(S=1,v=new Array(w-1);S<w;S++)v[S-1]=arguments[S];x[b].fn.apply(x[b].context,v)}}return!0},l.prototype.on=function(u,d,f){return o(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return o(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,p){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return i(this,h),this;var y=this._events[h];if(y.fn)y.fn===d&&(!p||y.once)&&(!f||y.context===f)&&i(this,h);else{for(var m=0,x=[],w=y.length;m<w;m++)(y[m].fn!==d||p&&!y[m].once||f&&y[m].context!==f)&&x.push(y[m]);x.length?this._events[h]=x.length===1?x[0]:x:i(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(H_);var Eie=H_.exports;const Cie=ot(Eie);var Yg=new Cie,Jg="recharts.syncMouseEvents";function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function Aie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V_(n.key),n)}}function Oie(e,t,r){return t&&Tie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ey(e,t,r){return t=V_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V_(e){var t=_ie(e,"string");return Fu(t)=="symbol"?t:t+""}function _ie(e,t){if(Fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Iie=function(){function e(){Aie(this,e),ey(this,"activeIndex",0),ey(this,"coordinateList",[]),ey(this,"layout","horizontal")}return Oie(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,o=a===void 0?null:a,i=r.container,l=i===void 0?null:i,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,p=r.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),o=a.x,i=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=o+c+u,p=i+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])}();function $ie(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&Pe(n)&&Pe(a))return!0}return!1}function Rie(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function W_(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,o=e.endAngle,i=wt(t,r,n,a),l=wt(t,r,n,o);return{points:[i,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:o}}function Die(e,t,r){var n,a,o,i;if(e==="horizontal")n=t.x,o=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,o=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,p=wt(l,c,u,f),h=wt(l,c,d,f);n=p.x,a=p.y,o=h.x,i=h.y}else return W_(t);return[{x:n,y:a},{x:o,y:i}]}function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}function gP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(r),!0).forEach(function(n){Mie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mie(e,t,r){return t=Lie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lie(e){var t=Fie(e,"string");return Uu(t)=="symbol"?t:t+""}function Fie(e,t){if(Uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uie(e){var t,r,n=e.element,a=e.tooltipEventType,o=e.isActive,i=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,p=e.chartName,h=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!h||!o||!i||p!=="ScatterChart"&&a!=="axis")return null;var y,m=Up;if(p==="ScatterChart")y=i,m=ate;else if(p==="BarChart")y=Rie(f,i,c,d),m=gw;else if(f==="radial"){var x=W_(i),w=x.cx,v=x.cy,b=x.radius,j=x.startAngle,S=x.endAngle;y={cx:w,cy:v,startAngle:j,endAngle:S,innerRadius:b,outerRadius:b},m=zO}else y={points:Die(f,i,c)},m=Up;var k=Qd(Qd(Qd(Qd({stroke:"#ccc",pointerEvents:"none"},c),y),Fe(h,!1)),{},{payload:l,payloadIndex:u,className:Ge("recharts-tooltip-cursor",h.className)});return g.isValidElement(h)?g.cloneElement(h,k):g.createElement(m,k)}var Bie=["item"],zie=["children","className","width","height","style","compact","title","desc"];function ul(e){"@babel/helpers - typeof";return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ul(e)}function ys(){return ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ys.apply(this,arguments)}function yP(e,t){return Vie(e)||Hie(e,t)||K_(e,t)||qie()}function qie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,i,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,t!==0)for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function Vie(e){if(Array.isArray(e))return e}function vP(e,t){if(e==null)return{};var r=Wie(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Wie(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Qie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,G_(n.key),n)}}function Gie(e,t,r){return t&&Kie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zie(e,t,r){return t=ch(t),Xie(e,Q_()?Reflect.construct(t,r||[],ch(e).constructor):t.apply(e,r))}function Xie(e,t){if(t&&(ul(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yie(e)}function Yie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q_=function(){return!!e})()}function ch(e){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ch(e)}function Jie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vv(e,t)}function Vv(e,t){return Vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vv(e,t)}function dl(e){return rse(e)||tse(e)||K_(e)||ese()}function ese(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K_(e,t){if(e){if(typeof e=="string")return Wv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wv(e,t)}}function tse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rse(e){if(Array.isArray(e))return Wv(e)}function Wv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(r),!0).forEach(function(n){Be(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Be(e,t,r){return t=G_(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G_(e){var t=nse(e,"string");return ul(t)=="symbol"?t:t+""}function nse(e,t){if(ul(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ul(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ase={xAxis:["bottom","top"],yAxis:["left","right"]},ose={width:"100%",height:"100%"},Z_={x:0,y:0};function Kd(e){return e}var ise=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},sse=function(t,r,n,a){var o=r.find(function(d){return d&&d.index===n});if(o){if(t==="horizontal")return{x:o.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:o.coordinate};if(t==="centric"){var i=o.coordinate,l=a.radius;return de(de(de({},a),wt(a.cx,a.cy,l,i)),{},{angle:i,radius:l})}var c=o.coordinate,u=a.angle;return de(de(de({},a),wt(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return Z_},Mm=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,o=r.dataEndIndex,i=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(dl(l),dl(u)):l},[]);return i.length>0?i:t&&t.length&&Pe(a)&&Pe(o)?t.slice(a,o+1):[]};function X_(e){return e==="number"?[0,"auto"]:void 0}var Qv=function(t,r,n,a){var o=t.graphicalItems,i=t.tooltipAxis,l=Mm(r,t);return n<0||!o||!o.length||n>=l.length?null:o.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(i.dataKey&&!i.allowDuplicatedCategory){var h=f===void 0?l:f;p=cp(h,i.dataKey,a)}else p=f&&f[n]||l[n];return p?[].concat(dl(c),[DO(u,p)]):c},[])},bP=function(t,r,n,a){var o=a||{x:t.chartX,y:t.chartY},i=ise(o,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=CX(i,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,p=Qv(t,r,d,f),h=sse(n,l,d,o);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:h}}return null},lse=function(t,r){var n=r.axes,a=r.graphicalItems,o=r.axisType,i=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,p=t.stackOffset,h=TO(d,o);return n.reduce(function(y,m){var x,w=m.type.defaultProps!==void 0?de(de({},m.type.defaultProps),m.props):m.props,v=w.type,b=w.dataKey,j=w.allowDataOverflow,S=w.allowDuplicatedCategory,k=w.scale,N=w.ticks,P=w.includeHidden,C=w[i];if(y[C])return y;var E=Mm(t.data,{graphicalItems:a.filter(function(z){var J,W=i in z.props?z.props[i]:(J=z.type.defaultProps)===null||J===void 0?void 0:J[i];return W===C}),dataStartIndex:c,dataEndIndex:u}),_=E.length,L,U,D;$ie(w.domain,j,v)&&(L=sv(w.domain,null,j),h&&(v==="number"||k!=="auto")&&(D=$c(E,b,"category")));var I=X_(v);if(!L||L.length===0){var A,$=(A=w.domain)!==null&&A!==void 0?A:I;if(b){if(L=$c(E,b,v),v==="category"&&h){var O=vF(L);S&&O?(U=L,L=Zp(0,_)):S||(L=zN($,L,m).reduce(function(z,J){return z.indexOf(J)>=0?z:[].concat(dl(z),[J])},[]))}else if(v==="category")S?L=L.filter(function(z){return z!==""&&!Qe(z)}):L=zN($,L,m).reduce(function(z,J){return z.indexOf(J)>=0||J===""||Qe(J)?z:[].concat(dl(z),[J])},[]);else if(v==="number"){var R=IX(E,a.filter(function(z){var J,W,F=i in z.props?z.props[i]:(J=z.type.defaultProps)===null||J===void 0?void 0:J[i],H="hide"in z.props?z.props.hide:(W=z.type.defaultProps)===null||W===void 0?void 0:W.hide;return F===C&&(P||!H)}),b,o,d);R&&(L=R)}h&&(v==="number"||k!=="auto")&&(D=$c(E,b,"category"))}else h?L=Zp(0,_):l&&l[C]&&l[C].hasStack&&v==="number"?L=p==="expand"?[0,1]:RO(l[C].stackGroups,c,u):L=AO(E,a.filter(function(z){var J=i in z.props?z.props[i]:z.type.defaultProps[i],W="hide"in z.props?z.props.hide:z.type.defaultProps.hide;return J===C&&(P||!W)}),v,d,!0);if(v==="number")L=Hv(f,L,C,o,N),$&&(L=sv($,L,j));else if(v==="category"&&$){var q=$,V=L.every(function(z){return q.indexOf(z)>=0});V&&(L=q)}}return de(de({},y),{},Be({},C,de(de({},w),{},{axisType:o,domain:L,categoricalDomain:D,duplicateDomain:U,originalDomain:(x=w.domain)!==null&&x!==void 0?x:I,isCategorical:h,layout:d})))},{})},cse=function(t,r){var n=r.graphicalItems,a=r.Axis,o=r.axisType,i=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,p=Mm(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),h=p.length,y=TO(d,o),m=-1;return n.reduce(function(x,w){var v=w.type.defaultProps!==void 0?de(de({},w.type.defaultProps),w.props):w.props,b=v[i],j=X_("number");if(!x[b]){m++;var S;return y?S=Zp(0,h):l&&l[b]&&l[b].hasStack?(S=RO(l[b].stackGroups,c,u),S=Hv(f,S,b,o)):(S=sv(j,AO(p,n.filter(function(k){var N,P,C=i in k.props?k.props[i]:(N=k.type.defaultProps)===null||N===void 0?void 0:N[i],E="hide"in k.props?k.props.hide:(P=k.type.defaultProps)===null||P===void 0?void 0:P.hide;return C===b&&!E}),"number",d),a.defaultProps.allowDataOverflow),S=Hv(f,S,b,o)),de(de({},x),{},Be({},b,de(de({axisType:o},a.defaultProps),{},{hide:!0,orientation:Yr(ase,"".concat(o,".").concat(m%2),null),domain:S,originalDomain:j,isCategorical:y,layout:d})))}return x},{})},use=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,o=r.AxisComp,i=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),p=Jr(d,o),h={};return p&&p.length?h=lse(t,{axes:p,graphicalItems:i,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):i&&i.length&&(h=cse(t,{Axis:o,graphicalItems:i,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),h},dse=function(t){var r=ro(t),n=Sa(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:qb(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Mp(r,n)}},wP=function(t){var r=t.children,n=t.defaultShowTooltip,a=Hr(r,tl),o=0,i=0;return t.data&&t.data.length!==0&&(i=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(o=a.props.startIndex),a.props.endIndex>=0&&(i=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!n}},fse=function(t){return!t||!t.length?!1:t.some(function(r){var n=Na(r&&r.type);return n&&n.indexOf("Bar")>=0})},SP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},pse=function(t,r){var n=t.props,a=t.graphicalItems,o=t.xAxisMap,i=o===void 0?{}:o,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,p=n.margin||{},h=Hr(f,tl),y=Hr(f,ka),m=Object.keys(c).reduce(function(S,k){var N=c[k],P=N.orientation;return!N.mirror&&!N.hide?de(de({},S),{},Be({},P,S[P]+N.width)):S},{left:p.left||0,right:p.right||0}),x=Object.keys(i).reduce(function(S,k){var N=i[k],P=N.orientation;return!N.mirror&&!N.hide?de(de({},S),{},Be({},P,Yr(S,"".concat(P))+N.height)):S},{top:p.top||0,bottom:p.bottom||0}),w=de(de({},x),m),v=w.bottom;h&&(w.bottom+=h.props.height||tl.defaultProps.height),y&&r&&(w=OX(w,a,n,r));var b=u-w.left-w.right,j=d-w.top-w.bottom;return de(de({brushBottom:v},w),{},{width:Math.max(b,0),height:Math.max(j,0)})},hse=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Ew=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,o=a===void 0?"axis":a,i=t.validateTooltipEventTypes,l=i===void 0?["axis"]:i,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,p=function(w,v){var b=v.graphicalItems,j=v.stackGroups,S=v.offset,k=v.updateId,N=v.dataStartIndex,P=v.dataEndIndex,C=w.barSize,E=w.layout,_=w.barGap,L=w.barCategoryGap,U=w.maxBarSize,D=SP(E),I=D.numericAxisName,A=D.cateAxisName,$=fse(b),O=[];return b.forEach(function(R,q){var V=Mm(w.data,{graphicalItems:[R],dataStartIndex:N,dataEndIndex:P}),z=R.type.defaultProps!==void 0?de(de({},R.type.defaultProps),R.props):R.props,J=z.dataKey,W=z.maxBarSize,F=z["".concat(I,"Id")],H=z["".concat(A,"Id")],X={},se=c.reduce(function(Y,ie){var fe=v["".concat(ie.axisType,"Map")],ye=z["".concat(ie.axisType,"Id")];fe&&fe[ye]||ie.axisType==="zAxis"||bi();var Re=fe[ye];return de(de({},Y),{},Be(Be({},ie.axisType,Re),"".concat(ie.axisType,"Ticks"),Sa(Re)))},X),G=se[A],oe=se["".concat(A,"Ticks")],ae=j&&j[F]&&j[F].hasStack&&zX(R,j[F].stackGroups),te=Na(R.type).indexOf("Bar")>=0,be=Mp(G,oe),ge=[],je=$&&AX({barSize:C,stackGroups:j,totalSize:hse(se,A)});if(te){var Se,Ee,Oe=Qe(W)?U:W,re=(Se=(Ee=Mp(G,oe,!0))!==null&&Ee!==void 0?Ee:Oe)!==null&&Se!==void 0?Se:0;ge=TX({barGap:_,barCategoryGap:L,bandSize:re!==be?re:be,sizeList:je[H],maxBarSize:Oe}),re!==be&&(ge=ge.map(function(Y){return de(de({},Y),{},{position:de(de({},Y.position),{},{offset:Y.position.offset-re/2})})}))}var Q=R&&R.type&&R.type.getComposedData;Q&&O.push({props:de(de({},Q(de(de({},se),{},{displayedData:V,props:w,dataKey:J,item:R,bandSize:be,barPosition:ge,offset:S,stackedData:ae,layout:E,dataStartIndex:N,dataEndIndex:P}))),{},Be(Be(Be({key:R.key||"item-".concat(q)},I,se[I]),A,se[A]),"animationId",k)),childIndex:TF(R,w.children),item:R})}),O},h=function(w,v){var b=w.props,j=w.dataStartIndex,S=w.dataEndIndex,k=w.updateId;if(!$S({props:b}))return null;var N=b.children,P=b.layout,C=b.stackOffset,E=b.data,_=b.reverseStackOrder,L=SP(P),U=L.numericAxisName,D=L.cateAxisName,I=Jr(N,n),A=UX(E,I,"".concat(U,"Id"),"".concat(D,"Id"),C,_),$=c.reduce(function(z,J){var W="".concat(J.axisType,"Map");return de(de({},z),{},Be({},W,use(b,de(de({},J),{},{graphicalItems:I,stackGroups:J.axisType===U&&A,dataStartIndex:j,dataEndIndex:S}))))},{}),O=pse(de(de({},$),{},{props:b,graphicalItems:I}),v==null?void 0:v.legendBBox);Object.keys($).forEach(function(z){$[z]=d(b,$[z],O,z.replace("Map",""),r)});var R=$["".concat(D,"Map")],q=dse(R),V=p(b,de(de({},$),{},{dataStartIndex:j,dataEndIndex:S,updateId:k,graphicalItems:I,stackGroups:A,offset:O}));return de(de({formattedGraphicalItems:V,graphicalItems:I,offset:O,stackGroups:A},q),$)},y=function(x){function w(v){var b,j,S;return Qie(this,w),S=Zie(this,w,[v]),Be(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Be(S,"accessibilityManager",new Iie),Be(S,"handleLegendBBoxUpdate",function(k){if(k){var N=S.state,P=N.dataStartIndex,C=N.dataEndIndex,E=N.updateId;S.setState(de({legendBBox:k},h({props:S.props,dataStartIndex:P,dataEndIndex:C,updateId:E},de(de({},S.state),{},{legendBBox:k}))))}}),Be(S,"handleReceiveSyncEvent",function(k,N,P){if(S.props.syncId===k){if(P===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(N)}}),Be(S,"handleBrushChange",function(k){var N=k.startIndex,P=k.endIndex;if(N!==S.state.dataStartIndex||P!==S.state.dataEndIndex){var C=S.state.updateId;S.setState(function(){return de({dataStartIndex:N,dataEndIndex:P},h({props:S.props,dataStartIndex:N,dataEndIndex:P,updateId:C},S.state))}),S.triggerSyncEvent({dataStartIndex:N,dataEndIndex:P})}}),Be(S,"handleMouseEnter",function(k){var N=S.getMouseInfo(k);if(N){var P=de(de({},N),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var C=S.props.onMouseEnter;ze(C)&&C(P,k)}}),Be(S,"triggeredAfterMouseMove",function(k){var N=S.getMouseInfo(k),P=N?de(de({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(P),S.triggerSyncEvent(P);var C=S.props.onMouseMove;ze(C)&&C(P,k)}),Be(S,"handleItemMouseEnter",function(k){S.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),Be(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),Be(S,"handleMouseMove",function(k){k.persist(),S.throttleTriggeredAfterMouseMove(k)}),Be(S,"handleMouseLeave",function(k){S.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};S.setState(N),S.triggerSyncEvent(N);var P=S.props.onMouseLeave;ze(P)&&P(N,k)}),Be(S,"handleOuterEvent",function(k){var N=AF(k),P=Yr(S.props,"".concat(N));if(N&&ze(P)){var C,E;/.*touch.*/i.test(N)?E=S.getMouseInfo(k.changedTouches[0]):E=S.getMouseInfo(k),P((C=E)!==null&&C!==void 0?C:{},k)}}),Be(S,"handleClick",function(k){var N=S.getMouseInfo(k);if(N){var P=de(de({},N),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var C=S.props.onClick;ze(C)&&C(P,k)}}),Be(S,"handleMouseDown",function(k){var N=S.props.onMouseDown;if(ze(N)){var P=S.getMouseInfo(k);N(P,k)}}),Be(S,"handleMouseUp",function(k){var N=S.props.onMouseUp;if(ze(N)){var P=S.getMouseInfo(k);N(P,k)}}),Be(S,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),Be(S,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&S.handleMouseDown(k.changedTouches[0])}),Be(S,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&S.handleMouseUp(k.changedTouches[0])}),Be(S,"handleDoubleClick",function(k){var N=S.props.onDoubleClick;if(ze(N)){var P=S.getMouseInfo(k);N(P,k)}}),Be(S,"handleContextMenu",function(k){var N=S.props.onContextMenu;if(ze(N)){var P=S.getMouseInfo(k);N(P,k)}}),Be(S,"triggerSyncEvent",function(k){S.props.syncId!==void 0&&Yg.emit(Jg,S.props.syncId,k,S.eventEmitterSymbol)}),Be(S,"applySyncEvent",function(k){var N=S.props,P=N.layout,C=N.syncMethod,E=S.state.updateId,_=k.dataStartIndex,L=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)S.setState(de({dataStartIndex:_,dataEndIndex:L},h({props:S.props,dataStartIndex:_,dataEndIndex:L,updateId:E},S.state)));else if(k.activeTooltipIndex!==void 0){var U=k.chartX,D=k.chartY,I=k.activeTooltipIndex,A=S.state,$=A.offset,O=A.tooltipTicks;if(!$)return;if(typeof C=="function")I=C(O,k);else if(C==="value"){I=-1;for(var R=0;R<O.length;R++)if(O[R].value===k.activeLabel){I=R;break}}var q=de(de({},$),{},{x:$.left,y:$.top}),V=Math.min(U,q.x+q.width),z=Math.min(D,q.y+q.height),J=O[I]&&O[I].value,W=Qv(S.state,S.props.data,I),F=O[I]?{x:P==="horizontal"?O[I].coordinate:V,y:P==="horizontal"?z:O[I].coordinate}:Z_;S.setState(de(de({},k),{},{activeLabel:J,activeCoordinate:F,activePayload:W,activeTooltipIndex:I}))}else S.setState(k)}),Be(S,"renderCursor",function(k){var N,P=S.state,C=P.isTooltipActive,E=P.activeCoordinate,_=P.activePayload,L=P.offset,U=P.activeTooltipIndex,D=P.tooltipAxisBandSize,I=S.getTooltipEventType(),A=(N=k.props.active)!==null&&N!==void 0?N:C,$=S.props.layout,O=k.key||"_recharts-cursor";return B.createElement(Uie,{key:O,activeCoordinate:E,activePayload:_,activeTooltipIndex:U,chartName:r,element:k,isActive:A,layout:$,offset:L,tooltipAxisBandSize:D,tooltipEventType:I})}),Be(S,"renderPolarAxis",function(k,N,P){var C=Yr(k,"type.axisType"),E=Yr(S.state,"".concat(C,"Map")),_=k.type.defaultProps,L=_!==void 0?de(de({},_),k.props):k.props,U=E&&E[L["".concat(C,"Id")]];return g.cloneElement(k,de(de({},U),{},{className:Ge(C,U.className),key:k.key||"".concat(N,"-").concat(P),ticks:Sa(U,!0)}))}),Be(S,"renderPolarGrid",function(k){var N=k.props,P=N.radialLines,C=N.polarAngles,E=N.polarRadius,_=S.state,L=_.radiusAxisMap,U=_.angleAxisMap,D=ro(L),I=ro(U),A=I.cx,$=I.cy,O=I.innerRadius,R=I.outerRadius;return g.cloneElement(k,{polarAngles:Array.isArray(C)?C:Sa(I,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(E)?E:Sa(D,!0).map(function(q){return q.coordinate}),cx:A,cy:$,innerRadius:O,outerRadius:R,key:k.key||"polar-grid",radialLines:P})}),Be(S,"renderLegend",function(){var k=S.state.formattedGraphicalItems,N=S.props,P=N.children,C=N.width,E=N.height,_=S.props.margin||{},L=C-(_.left||0)-(_.right||0),U=EO({children:P,formattedGraphicalItems:k,legendWidth:L,legendContent:u});if(!U)return null;var D=U.item,I=vP(U,Bie);return g.cloneElement(D,de(de({},I),{},{chartWidth:C,chartHeight:E,margin:_,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),Be(S,"renderTooltip",function(){var k,N=S.props,P=N.children,C=N.accessibilityLayer,E=Hr(P,Vr);if(!E)return null;var _=S.state,L=_.isTooltipActive,U=_.activeCoordinate,D=_.activePayload,I=_.activeLabel,A=_.offset,$=(k=E.props.active)!==null&&k!==void 0?k:L;return g.cloneElement(E,{viewBox:de(de({},A),{},{x:A.left,y:A.top}),active:$,label:I,payload:$?D:[],coordinate:U,accessibilityLayer:C})}),Be(S,"renderBrush",function(k){var N=S.props,P=N.margin,C=N.data,E=S.state,_=E.offset,L=E.dataStartIndex,U=E.dataEndIndex,D=E.updateId;return g.cloneElement(k,{key:k.key||"_recharts-brush",onChange:qd(S.handleBrushChange,k.props.onChange),data:C,x:Pe(k.props.x)?k.props.x:_.left,y:Pe(k.props.y)?k.props.y:_.top+_.height+_.brushBottom-(P.bottom||0),width:Pe(k.props.width)?k.props.width:_.width,startIndex:L,endIndex:U,updateId:"brush-".concat(D)})}),Be(S,"renderReferenceElement",function(k,N,P){if(!k)return null;var C=S,E=C.clipPathId,_=S.state,L=_.xAxisMap,U=_.yAxisMap,D=_.offset,I=k.type.defaultProps||{},A=k.props,$=A.xAxisId,O=$===void 0?I.xAxisId:$,R=A.yAxisId,q=R===void 0?I.yAxisId:R;return g.cloneElement(k,{key:k.key||"".concat(N,"-").concat(P),xAxis:L[O],yAxis:U[q],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:E})}),Be(S,"renderActivePoints",function(k){var N=k.item,P=k.activePoint,C=k.basePoint,E=k.childIndex,_=k.isRange,L=[],U=N.props.key,D=N.item.type.defaultProps!==void 0?de(de({},N.item.type.defaultProps),N.item.props):N.item.props,I=D.activeDot,A=D.dataKey,$=de(de({index:E,dataKey:A,cx:P.x,cy:P.y,r:4,fill:mw(N.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Fe(I,!1)),up(I));return L.push(w.renderActiveDot(I,$,"".concat(U,"-activePoint-").concat(E))),C?L.push(w.renderActiveDot(I,de(de({},$),{},{cx:C.x,cy:C.y}),"".concat(U,"-basePoint-").concat(E))):_&&L.push(null),L}),Be(S,"renderGraphicChild",function(k,N,P){var C=S.filterFormatItem(k,N,P);if(!C)return null;var E=S.getTooltipEventType(),_=S.state,L=_.isTooltipActive,U=_.tooltipAxis,D=_.activeTooltipIndex,I=_.activeLabel,A=S.props.children,$=Hr(A,Vr),O=C.props,R=O.points,q=O.isRange,V=O.baseLine,z=C.item.type.defaultProps!==void 0?de(de({},C.item.type.defaultProps),C.item.props):C.item.props,J=z.activeDot,W=z.hide,F=z.activeBar,H=z.activeShape,X=!!(!W&&L&&$&&(J||F||H)),se={};E!=="axis"&&$&&$.props.trigger==="click"?se={onClick:qd(S.handleItemMouseEnter,k.props.onClick)}:E!=="axis"&&(se={onMouseLeave:qd(S.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:qd(S.handleItemMouseEnter,k.props.onMouseEnter)});var G=g.cloneElement(k,de(de({},C.props),se));function oe(ie){return typeof U.dataKey=="function"?U.dataKey(ie.payload):null}if(X)if(D>=0){var ae,te;if(U.dataKey&&!U.allowDuplicatedCategory){var be=typeof U.dataKey=="function"?oe:"payload.".concat(U.dataKey.toString());ae=cp(R,be,I),te=q&&V&&cp(V,be,I)}else ae=R==null?void 0:R[D],te=q&&V&&V[D];if(H||F){var ge=k.props.activeIndex!==void 0?k.props.activeIndex:D;return[g.cloneElement(k,de(de(de({},C.props),se),{},{activeIndex:ge})),null,null]}if(!Qe(ae))return[G].concat(dl(S.renderActivePoints({item:C,activePoint:ae,basePoint:te,childIndex:D,isRange:q})))}else{var je,Se=(je=S.getItemByXY(S.state.activeCoordinate))!==null&&je!==void 0?je:{graphicalItem:G},Ee=Se.graphicalItem,Oe=Ee.item,re=Oe===void 0?k:Oe,Q=Ee.childIndex,Y=de(de(de({},C.props),se),{},{activeIndex:Q});return[g.cloneElement(re,Y),null,null]}return q?[G,null,null]:[G,null]}),Be(S,"renderCustomized",function(k,N,P){return g.cloneElement(k,de(de({key:"recharts-customized-".concat(P)},S.props),S.state))}),Be(S,"renderMap",{CartesianGrid:{handler:Kd,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:Kd},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:Kd},YAxis:{handler:Kd},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((b=v.id)!==null&&b!==void 0?b:kl("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=PT(S.triggeredAfterMouseMove,(j=v.throttleDelay)!==null&&j!==void 0?j:1e3/60),S.state={},S}return Jie(w,x),Gie(w,[{key:"componentDidMount",value:function(){var b,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,j=b.children,S=b.data,k=b.height,N=b.layout,P=Hr(j,Vr);if(P){var C=P.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,_=Qv(this.state,S,C,E),L=this.state.tooltipTicks[C].coordinate,U=(this.state.offset.top+k)/2,D=N==="horizontal",I=D?{x:L,y:U}:{y:L,x:U},A=this.state.formattedGraphicalItems.find(function(O){var R=O.item;return R.type.name==="Scatter"});A&&(I=de(de({},I),A.props.points[C].tooltipPosition),_=A.props.points[C].tooltipPayload);var $={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:E,activePayload:_,activeCoordinate:I};this.setState($),this.renderCursor(P),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var S,k;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(b){S0([Hr(b.children,Vr)],[Hr(this.props.children,Vr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Hr(this.props.children,Vr);if(b&&typeof b.props.shared=="boolean"){var j=b.props.shared?"axis":"item";return l.indexOf(j)>=0?j:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var j=this.container,S=j.getBoundingClientRect(),k=rQ(S),N={chartX:Math.round(b.pageX-k.left),chartY:Math.round(b.pageY-k.top)},P=S.width/j.offsetWidth||1,C=this.inRange(N.chartX,N.chartY,P);if(!C)return null;var E=this.state,_=E.xAxisMap,L=E.yAxisMap,U=this.getTooltipEventType();if(U!=="axis"&&_&&L){var D=ro(_).scale,I=ro(L).scale,A=D&&D.invert?D.invert(N.chartX):null,$=I&&I.invert?I.invert(N.chartY):null;return de(de({},N),{},{xValue:A,yValue:$})}var O=bP(this.state,this.props.data,this.props.layout,C);return O?de(de({},N),O):null}},{key:"inRange",value:function(b,j){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,N=b/S,P=j/S;if(k==="horizontal"||k==="vertical"){var C=this.state.offset,E=N>=C.left&&N<=C.left+C.width&&P>=C.top&&P<=C.top+C.height;return E?{x:N,y:P}:null}var _=this.state,L=_.angleAxisMap,U=_.radiusAxisMap;if(L&&U){var D=ro(L);return VN({x:N,y:P},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,j=this.getTooltipEventType(),S=Hr(b,Vr),k={};S&&j==="axis"&&(S.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=up(this.props,this.handleOuterEvent);return de(de({},N),k)}},{key:"addListener",value:function(){Yg.on(Jg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Yg.removeListener(Jg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,j,S){for(var k=this.state.formattedGraphicalItems,N=0,P=k.length;N<P;N++){var C=k[N];if(C.item===b||C.props.key===b.key||j===Na(C.item.type)&&S===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,j=this.state.offset,S=j.left,k=j.top,N=j.height,P=j.width;return B.createElement("defs",null,B.createElement("clipPath",{id:b},B.createElement("rect",{x:S,y:k,height:N,width:P})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(j,S){var k=yP(S,2),N=k[0],P=k[1];return de(de({},j),{},Be({},N,P.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(j,S){var k=yP(S,2),N=k[0],P=k[1];return de(de({},j),{},Be({},N,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[b])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(b){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[b])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(b){var j=this.state,S=j.formattedGraphicalItems,k=j.activeItem;if(S&&S.length)for(var N=0,P=S.length;N<P;N++){var C=S[N],E=C.props,_=C.item,L=_.type.defaultProps!==void 0?de(de({},_.type.defaultProps),_.props):_.props,U=Na(_.type);if(U==="Bar"){var D=(E.data||[]).find(function(O){return Lee(b,O)});if(D)return{graphicalItem:C,payload:D}}else if(U==="RadialBar"){var I=(E.data||[]).find(function(O){return VN(b,O)});if(I)return{graphicalItem:C,payload:I}}else if(Tm(C,k)||Om(C,k)||$u(C,k)){var A=Pre({graphicalItem:C,activeTooltipItem:k,itemData:L.data}),$=L.activeIndex===void 0?A:L.activeIndex;return{graphicalItem:de(de({},C),{},{childIndex:$}),payload:$u(C,k)?L.data[A]:C.props.data[A]}}}return null}},{key:"render",value:function(){var b=this;if(!$S(this))return null;var j=this.props,S=j.children,k=j.className,N=j.width,P=j.height,C=j.style,E=j.compact,_=j.title,L=j.desc,U=vP(j,zie),D=Fe(U,!1);if(E)return B.createElement(Jk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},B.createElement(N0,ys({},D,{width:N,height:P,title:_,desc:L}),this.renderClipPath(),DS(S,this.renderMap)));if(this.props.accessibilityLayer){var I,A;D.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,D.role=(A=this.props.role)!==null&&A!==void 0?A:"application",D.onKeyDown=function(O){b.accessibilityManager.keyboardEvent(O)},D.onFocus=function(){b.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return B.createElement(Jk,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},B.createElement("div",ys({className:Ge("recharts-wrapper",k),style:de({position:"relative",cursor:"default",width:N,height:P},C)},$,{ref:function(R){b.container=R}}),B.createElement(N0,ys({},D,{width:N,height:P,title:_,desc:L,style:ose}),this.renderClipPath(),DS(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(g.Component);Be(y,"displayName",r),Be(y,"defaultProps",de({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Be(y,"getDerivedStateFromProps",function(x,w){var v=x.dataKey,b=x.data,j=x.children,S=x.width,k=x.height,N=x.layout,P=x.stackOffset,C=x.margin,E=w.dataStartIndex,_=w.dataEndIndex;if(w.updateId===void 0){var L=wP(x);return de(de(de({},L),{},{updateId:0},h(de(de({props:x},L),{},{updateId:0}),w)),{},{prevDataKey:v,prevData:b,prevWidth:S,prevHeight:k,prevLayout:N,prevStackOffset:P,prevMargin:C,prevChildren:j})}if(v!==w.prevDataKey||b!==w.prevData||S!==w.prevWidth||k!==w.prevHeight||N!==w.prevLayout||P!==w.prevStackOffset||!Es(C,w.prevMargin)){var U=wP(x),D={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},I=de(de({},bP(w,b,N)),{},{updateId:w.updateId+1}),A=de(de(de({},U),D),I);return de(de(de({},A),h(de({props:x},A),w)),{},{prevDataKey:v,prevData:b,prevWidth:S,prevHeight:k,prevLayout:N,prevStackOffset:P,prevMargin:C,prevChildren:j})}if(!S0(j,w.prevChildren)){var $,O,R,q,V=Hr(j,tl),z=V&&($=(O=V.props)===null||O===void 0?void 0:O.startIndex)!==null&&$!==void 0?$:E,J=V&&(R=(q=V.props)===null||q===void 0?void 0:q.endIndex)!==null&&R!==void 0?R:_,W=z!==E||J!==_,F=!Qe(b),H=F&&!W?w.updateId:w.updateId+1;return de(de({updateId:H},h(de(de({props:x},w),{},{updateId:H,dataStartIndex:z,dataEndIndex:J}),w)),{},{prevChildren:j,dataStartIndex:z,dataEndIndex:J})}return null}),Be(y,"renderActiveDot",function(x,w,v){var b;return g.isValidElement(x)?b=g.cloneElement(x,w):ze(x)?b=x(w):b=B.createElement(km,w),B.createElement(nt,{className:"recharts-active-dot",key:v},b)});var m=g.forwardRef(function(w,v){return B.createElement(y,ys({},w,{ref:v}))});return m.displayName=y.displayName,m},mse=Ew({chartName:"LineChart",GraphicalChild:ld,axisComponents:[{axisType:"xAxis",AxisComp:Il},{axisType:"yAxis",AxisComp:$l}],formatAxisMap:g_}),gse=Ew({chartName:"BarChart",GraphicalChild:$i,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Il},{axisType:"yAxis",AxisComp:$l}],formatAxisMap:g_}),Y_=Ew({chartName:"PieChart",GraphicalChild:da,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Am},{axisType:"radiusAxis",AxisComp:Em}],formatAxisMap:YX,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const yse=()=>{const e=yt(),[t,r]=g.useState(!0),[n,a]=g.useState(null),[o,i]=g.useState(!1),[l,c]=g.useState(!1),[u,d]=g.useState({totalSales:0,totalRevenue:0,totalCustomers:0,totalProducts:0,todaysSales:0,todaysRevenue:0}),[f,p]=g.useState([]),[h,y]=g.useState([]),[m,x]=g.useState([]),[w,v]=g.useState([]),[b,j]=g.useState(null),[S,k]=g.useState(null),[N,P]=g.useState(null);if(g.useEffect(()=>{(async()=>{var _,L,U;try{r(!0),a(null);const D=new Date,I=D.getFullYear(),A=String(D.getMonth()+1).padStart(2,"0"),$=String(D.getDate()).padStart(2,"0"),O=`${I}-${A}-${$}`,[R,q,V,z,J,W]=await Promise.all([qi("/api/sales?limit=100"),qi("/api/products?limit=1000"),qi("/api/customers"),qi("/api/sales?limit=1"),qi(`/api/sales/daily-summary?startDate=1970-01-01&endDate=${O}`),qi("/api/sales/today/summary")]);if(!R.ok||!q.ok||!V.ok||!z.ok||!J.ok||!W.ok)throw new Error("Failed to fetch dashboard data");const[F,H,X,se,G,oe]=await Promise.all([R.json(),q.json(),V.json(),z.json(),J.json(),W.json()]);console.log("=== DASHBOARD DEBUG INFO ==="),console.log("Sales count:",Array.isArray(F)?F.length:((_=F==null?void 0:F.sales)==null?void 0:_.length)||0),console.log("Products count:",Array.isArray(H)?H.length:((L=H==null?void 0:H.products)==null?void 0:L.length)||0),console.log("Customers count:",Array.isArray(X)?X.length:0);let ae=[];Array.isArray(F)?ae=F:F&&Array.isArray(F.sales)?ae=F.sales:F&&Array.isArray(F.data)&&(ae=F.data),v(ae);let te=null;se&&se.pagination&&typeof se.pagination.totalCount=="number"&&(te=se.pagination.totalCount),j(te);let be=null;G&&G.data&&typeof G.data.totalSales=="number"&&(be=G.data.totalSales),k(be);let ge=null;oe&&oe.data&&typeof oe.data.totalSales=="number"&&(ge=oe.data.totalSales),P(ge);let je=[],Se=0;Array.isArray(H)?(je=H,Se=H.length):H&&Array.isArray(H.products)?(je=H.products,Se=H.total||H.products.length):H&&Array.isArray(H.data)&&(je=H.data,Se=H.total||H.data.length);let Ee=[];Array.isArray(X)?Ee=X:X&&Array.isArray(X.data)&&(Ee=X.data),console.log("=== FINAL COUNTS ==="),console.log("Processed sales count:",ae.length),console.log("Processed products count:",je.length),console.log("Processed customers count:",Ee.length),ae.length>0?console.log("Sample sale has",((U=ae[0].saleitem)==null?void 0:U.length)||0,"items"):console.log("No sales found - check if you have sales data in your database");const Oe=ae.reduce((pe,Ae)=>pe+Number(Ae.totalAmount||0),0),re=new Date().toDateString(),Q=ae.filter(pe=>new Date(pe.createdAt).toDateString()===re),Y=Q.reduce((pe,Ae)=>pe+Number(Ae.totalAmount||0),0);d({totalSales:ae.length,totalRevenue:Oe,totalCustomers:Ee.length,totalProducts:Se,todaysSales:Q.length,todaysRevenue:Y});const ie=new Map;console.log("Processing sales for top products. Sales count:",ae.length),ae.forEach(pe=>{const Ae=pe.saleitem||pe.saleItems||pe.items||[];console.log(`Sale ${pe.id} has ${Ae.length} items`),Array.isArray(Ae)&&Ae.forEach(He=>{var ht;const Ze=((ht=He.product)==null?void 0:ht.name)||"Unknown Product",Ue=Number(He.quantity||0),st=Number(He.price||0),Ft=ie.get(Ze)||{name:Ze,quantity:0,revenue:0};Ft.quantity+=Ue,Ft.revenue+=st*Ue,ie.set(Ze,Ft),console.log(`Added ${Ue} of ${Ze} (price: ${st})`)})}),console.log("Product sales map:",Array.from(ie.entries()));const fe=Array.from(ie.values()).sort((pe,Ae)=>Ae.quantity-pe.quantity).slice(0,5);console.log("Top products array:",fe),p(fe);const ye=new Map;ae.forEach(pe=>{var Ae;if(pe.customer){const He=pe.customer.id,Ze=ye.get(He)||{name:pe.customer.name,total_purchases:0,phone:((Ae=Ee.find(Ue=>Ue.id===He))==null?void 0:Ae.phone)||""};Ze.total_purchases+=Number(pe.totalAmount||0),ye.set(He,Ze)}});const Re=Array.from(ye.values()).sort((pe,Ae)=>Ae.total_purchases-pe.total_purchases).slice(0,5);y(Re);const Te=ae.sort((pe,Ae)=>new Date(Ae.createdAt).getTime()-new Date(pe.createdAt).getTime()).slice(0,10);x(Te)}catch(D){console.error("Error fetching dashboard data:",D),a(D instanceof Error?D.message:"Failed to load dashboard data")}finally{r(!1)}})()},[e]),t)return s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});if(n)return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[s.jsx("div",{className:"text-red-500 text-xl mb-4",children:"Error loading dashboard"}),s.jsx("div",{className:"text-gray-600 mb-4",children:n}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]});const C=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"];return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Sales"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b!==null?b:""})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow relative",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),s.jsx("button",{onClick:()=>i(!o),className:"p-1 hover:bg-gray-100 rounded",children:o?s.jsx(So,{className:"w-4 h-4 text-gray-600"}):s.jsx(au,{className:"w-4 h-4 text-gray-600"})})]}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:o&&S!==null?`${S.toFixed(2)}`:"****.**"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Today's Sales"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.todaysSales})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow relative",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Today's Revenue"}),s.jsx("button",{onClick:()=>c(!l),className:"p-1 hover:bg-gray-100 rounded",children:l?s.jsx(So,{className:"w-4 h-4 text-gray-600"}):s.jsx(au,{className:"w-4 h-4 text-gray-600"})})]}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:l&&N!==null?`${N.toFixed(2)}`:"****.**"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Customers"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:u.totalCustomers})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Products"}),s.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:u.totalProducts})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Top Selling Products"}),f.length>0?s.jsx("div",{className:"h-80",children:s.jsx(Ij,{width:"100%",height:"100%",children:s.jsxs(gse,{data:f,children:[s.jsx(Pw,{strokeDasharray:"3 3"}),s.jsx(Il,{dataKey:"name",tick:{fontSize:12},interval:0,angle:-45,textAnchor:"end",height:100}),s.jsx($l,{}),s.jsx(Vr,{formatter:(E,_)=>[_==="quantity"?`${E} units`:`${E.toFixed(2)}`,_==="quantity"?"Quantity Sold":"Revenue"]}),s.jsx($i,{dataKey:"quantity",fill:"#0088FE",name:"quantity"})]})})}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-80 text-gray-500",children:[s.jsx("div",{className:"text-lg font-medium mb-2",children:"No sales data available"}),s.jsx("div",{className:"text-sm text-center",children:w.length===0?s.jsxs(s.Fragment,{children:["Make some sales to see analytics here.",s.jsx("br",{}),"Go to ",s.jsx("span",{className:"font-medium",children:"POS"})," to start making sales."]}):s.jsxs(s.Fragment,{children:["Found ",w.length," sales but no product data.",s.jsx("br",{}),"Check browser console for debugging information."]})})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Top 5 Customers by Revenue"}),h.length>0?s.jsx("div",{className:"h-80",children:s.jsx(Ij,{width:"100%",height:"100%",children:s.jsxs(Y_,{children:[s.jsx(da,{data:h,dataKey:"total_purchases",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:E,value:_})=>`${E}: ${Number(_).toFixed(2)}`,children:h.map((E,_)=>s.jsx(td,{fill:C[_%C.length]},`cell-${_}`))}),s.jsx(Vr,{formatter:E=>[`${E.toFixed(2)}`,"Total Purchases"]}),s.jsx(ka,{})]})})}):s.jsx("div",{className:"flex items-center justify-center h-80 text-gray-500",children:"No customer data available"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Sales"}),m.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(E=>{var _;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",E.id]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((_=E.customer)==null?void 0:_.name)||"Walk-in Customer"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",Number(E.totalAmount||0).toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(E.createdAt).toLocaleDateString()," ",new Date(E.createdAt).toLocaleTimeString()]})]},E.id)})})]})}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No recent sales found"})]})]})},vse=({isOpen:e,onClose:t,onSave:r,baseUnit:n,productId:a})=>{const[o,i]=g.useState([]),[l,c]=g.useState([]),[u,d]=g.useState({unitId:"",conversionRate:1,price:0,upc:""});g.useEffect(()=>{const h=async()=>{try{const m=await fetch("/api/units",{credentials:"include"});if(m.ok){const x=await m.json();c(x)}}catch(m){console.error("Error fetching units:",m)}},y=async()=>{if(a)try{const m=await fetch(`/api/products/${a}`,{credentials:"include"});if(m.ok){const x=await m.json();if(x.productunit){const w=x.productunit.map(v=>({unitId:v.unitId.toString(),conversionRate:v.conversionRate,price:v.price,upc:v.upc}));i(w)}}}catch(m){console.error("Error fetching existing conversions:",m)}};e&&(h(),y())},[e,a]);const f=()=>{if(!u.unitId){alert("Please select a unit");return}if(!u.conversionRate||u.conversionRate<=0){alert("Please enter a valid conversion rate greater than 0");return}if(!u.price||u.price<0){alert("Please enter a valid price");return}if(o.some(y=>y.unitId===u.unitId)){alert("This unit has already been added");return}const h={unitId:u.unitId.toString(),conversionRate:Number(u.conversionRate),price:Number(u.price),upc:u.upc||void 0};i(y=>[...y,h]),d({unitId:"",conversionRate:1,price:0,upc:""})},p=()=>{r(o),i([]),d({unitId:"",conversionRate:1,price:0,upc:""})};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Product Units"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:s.jsx(Dt,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["Base Unit - ",n]}),s.jsx("p",{className:"text-sm text-gray-600",children:"All conversions will be relative to this base unit"})]}),s.jsxs("div",{className:"space-y-4",children:[o.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"font-medium mb-2",children:"Current Conversions"}),s.jsx("div",{className:"space-y-2",children:o.map((h,y)=>{const m=l.find(x=>x.id.toString()===h.unitId);return s.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:(m==null?void 0:m.name)||"Unknown"}),s.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["1 ",n," = ",h.conversionRate," ",(m==null?void 0:m.name)||"units"]})]}),s.jsx("button",{onClick:()=>i(o.filter((x,w)=>w!==y)),className:"text-red-500 hover:text-red-700",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},y)})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Unit Conversion"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unit"}),s.jsxs("select",{value:u.unitId,onChange:h=>d({...u,unitId:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[s.jsx("option",{value:"",children:"Select Unit"}),l.map(h=>s.jsx("option",{value:h.id,children:h.name},h.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Conversion Rate"}),s.jsx("input",{type:"number",min:"0.0001",step:"0.0001",value:u.conversionRate,onChange:h=>d({...u,conversionRate:parseFloat(h.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"Number of base units"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price"}),s.jsx("input",{type:"number",min:"0.01",step:"0.01",value:u.price,onChange:h=>d({...u,price:parseFloat(h.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"UPC (Optional)"}),s.jsx("input",{type:"text",value:u.upc||"",onChange:h=>d({...u,upc:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Add Unit"})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 border rounded-md text-gray-600 hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Save Changes"})]})]})]})}):null};var J_={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((r,n)=>{e.exports=n()})(pc,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},a,o=!n.document&&!!n.postMessage,i=n.IS_PAPA_WORKER||!1,l={},c=0,u={};function d(P){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(C){var E=S(C);E.chunkSize=parseInt(E.chunkSize),C.step||C.chunk||(E.chunkSize=null),this._handle=new m(E),(this._handle.streamer=this)._config=E}).call(this,P),this.parseChunk=function(C,E){var _=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<_){let U=this._config.newline;U||(L=this._config.quoteChar||'"',U=this._handle.guessLineEndings(C,L)),C=[...C.split(U).slice(_)].join(U)}this.isFirstChunk&&N(this._config.beforeFirstChunk)&&(L=this._config.beforeFirstChunk(C))!==void 0&&(C=L),this.isFirstChunk=!1,this._halted=!1;var _=this._partialLine+C,L=(this._partialLine="",this._handle.parse(_,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=L.meta.cursor,_=(this._finished||(this._partialLine=_.substring(C-this._baseIndex),this._baseIndex=C),L&&L.data&&(this._rowCount+=L.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),i)n.postMessage({results:L,workerId:u.WORKER_ID,finished:_});else if(N(this._config.chunk)&&!E){if(this._config.chunk(L,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=L=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(L.data),this._completeResults.errors=this._completeResults.errors.concat(L.errors),this._completeResults.meta=L.meta),this._completed||!_||!N(this._config.complete)||L&&L.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),_||L&&L.meta.paused||this._nextChunk(),L}this._halted=!0},this._sendError=function(C){N(this._config.error)?this._config.error(C):i&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:C,finished:!1})}}function f(P){var C;(P=P||{}).chunkSize||(P.chunkSize=u.RemoteChunkSize),d.call(this,P),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),o||(C.onload=k(this._chunkLoaded,this),C.onerror=k(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var E,_=this._config.downloadRequestHeaders;for(E in _)C.setRequestHeader(E,_[E])}var L;this._config.chunkSize&&(L=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+L));try{C.send(this._config.downloadRequestBody)}catch(U){this._chunkError(U.message)}o&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(E=>(E=E.getResponseHeader("Content-Range"))!==null?parseInt(E.substring(E.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(E){E=C.statusText||E,this._sendError(new Error(E))}}function p(P){(P=P||{}).chunkSize||(P.chunkSize=u.LocalChunkSize),d.call(this,P);var C,E,_=typeof FileReader<"u";this.stream=function(L){this._input=L,E=L.slice||L.webkitSlice||L.mozSlice,_?((C=new FileReader).onload=k(this._chunkLoaded,this),C.onerror=k(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var L=this._input,U=(this._config.chunkSize&&(U=Math.min(this._start+this._config.chunkSize,this._input.size),L=E.call(L,this._start,U)),C.readAsText(L,this._config.encoding));_||this._chunkLoaded({target:{result:U}})},this._chunkLoaded=function(L){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(L.target.result)},this._chunkError=function(){this._sendError(C.error)}}function h(P){var C;d.call(this,P=P||{}),this.stream=function(E){return C=E,this._nextChunk()},this._nextChunk=function(){var E,_;if(!this._finished)return E=this._config.chunkSize,C=E?(_=C.substring(0,E),C.substring(E)):(_=C,""),this._finished=!C,this.parseChunk(_)}}function y(P){d.call(this,P=P||{});var C=[],E=!0,_=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(L){this._input=L,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){_&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):E=!0},this._streamData=k(function(L){try{C.push(typeof L=="string"?L:L.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(U){this._streamError(U)}},this),this._streamError=k(function(L){this._streamCleanUp(),this._sendError(L)},this),this._streamEnd=k(function(){this._streamCleanUp(),_=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(P){var C,E,_,L,U=Math.pow(2,53),D=-U,I=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,A=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,$=this,O=0,R=0,q=!1,V=!1,z=[],J={data:[],errors:[],meta:{}};function W(se){return P.skipEmptyLines==="greedy"?se.join("").trim()==="":se.length===1&&se[0].length===0}function F(){if(J&&_&&(X("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),_=!1),P.skipEmptyLines&&(J.data=J.data.filter(function(te){return!W(te)})),H()){let te=function(be,ge){N(P.transformHeader)&&(be=P.transformHeader(be,ge)),z.push(be)};var ae=te;if(J)if(Array.isArray(J.data[0])){for(var se=0;H()&&se<J.data.length;se++)J.data[se].forEach(te);J.data.splice(0,1)}else J.data.forEach(te)}function G(te,be){for(var ge=P.header?{}:[],je=0;je<te.length;je++){var Se=je,Ee=te[je],Ee=((Oe,re)=>(Q=>(P.dynamicTypingFunction&&P.dynamicTyping[Q]===void 0&&(P.dynamicTyping[Q]=P.dynamicTypingFunction(Q)),(P.dynamicTyping[Q]||P.dynamicTyping)===!0))(Oe)?re==="true"||re==="TRUE"||re!=="false"&&re!=="FALSE"&&((Q=>{if(I.test(Q)&&(Q=parseFloat(Q),D<Q&&Q<U))return 1})(re)?parseFloat(re):A.test(re)?new Date(re):re===""?null:re):re)(Se=P.header?je>=z.length?"__parsed_extra":z[je]:Se,Ee=P.transform?P.transform(Ee,Se):Ee);Se==="__parsed_extra"?(ge[Se]=ge[Se]||[],ge[Se].push(Ee)):ge[Se]=Ee}return P.header&&(je>z.length?X("FieldMismatch","TooManyFields","Too many fields: expected "+z.length+" fields but parsed "+je,R+be):je<z.length&&X("FieldMismatch","TooFewFields","Too few fields: expected "+z.length+" fields but parsed "+je,R+be)),ge}var oe;J&&(P.header||P.dynamicTyping||P.transform)&&(oe=1,!J.data.length||Array.isArray(J.data[0])?(J.data=J.data.map(G),oe=J.data.length):J.data=G(J.data,0),P.header&&J.meta&&(J.meta.fields=z),R+=oe)}function H(){return P.header&&z.length===0}function X(se,G,oe,ae){se={type:se,code:G,message:oe},ae!==void 0&&(se.row=ae),J.errors.push(se)}N(P.step)&&(L=P.step,P.step=function(se){J=se,H()?F():(F(),J.data.length!==0&&(O+=se.data.length,P.preview&&O>P.preview?E.abort():(J.data=J.data[0],L(J,$))))}),this.parse=function(se,G,oe){var ae=P.quoteChar||'"',ae=(P.newline||(P.newline=this.guessLineEndings(se,ae)),_=!1,P.delimiter?N(P.delimiter)&&(P.delimiter=P.delimiter(se),J.meta.delimiter=P.delimiter):((ae=((te,be,ge,je,Se)=>{var Ee,Oe,re,Q;Se=Se||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Y=0;Y<Se.length;Y++){for(var ie,fe=Se[Y],ye=0,Re=0,Te=0,pe=(re=void 0,new w({comments:je,delimiter:fe,newline:be,preview:10}).parse(te)),Ae=0;Ae<pe.data.length;Ae++)ge&&W(pe.data[Ae])?Te++:(ie=pe.data[Ae].length,Re+=ie,re===void 0?re=ie:0<ie&&(ye+=Math.abs(ie-re),re=ie));0<pe.data.length&&(Re/=pe.data.length-Te),(Oe===void 0||ye<=Oe)&&(Q===void 0||Q<Re)&&1.99<Re&&(Oe=ye,Ee=fe,Q=Re)}return{successful:!!(P.delimiter=Ee),bestDelimiter:Ee}})(se,P.newline,P.skipEmptyLines,P.comments,P.delimitersToGuess)).successful?P.delimiter=ae.bestDelimiter:(_=!0,P.delimiter=u.DefaultDelimiter),J.meta.delimiter=P.delimiter),S(P));return P.preview&&P.header&&ae.preview++,C=se,E=new w(ae),J=E.parse(C,G,oe),F(),q?{meta:{paused:!0}}:J||{meta:{paused:!1}}},this.paused=function(){return q},this.pause=function(){q=!0,E.abort(),C=N(P.chunk)?"":C.substring(E.getCharIndex())},this.resume=function(){$.streamer._halted?(q=!1,$.streamer.parseChunk(C,!0)):setTimeout($.resume,3)},this.aborted=function(){return V},this.abort=function(){V=!0,E.abort(),J.meta.aborted=!0,N(P.complete)&&P.complete(J),C=""},this.guessLineEndings=function(te,ae){te=te.substring(0,1048576);var ae=new RegExp(x(ae)+"([^]*?)"+x(ae),"gm"),oe=(te=te.replace(ae,"")).split("\r"),ae=te.split(`
`),te=1<ae.length&&ae[0].length<oe[0].length;if(oe.length===1||te)return`
`;for(var be=0,ge=0;ge<oe.length;ge++)oe[ge][0]===`
`&&be++;return be>=oe.length/2?`\r
`:"\r"}}function x(P){return P.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(P){var C=(P=P||{}).delimiter,E=P.newline,_=P.comments,L=P.step,U=P.preview,D=P.fastMode,I=null,A=!1,$=P.quoteChar==null?'"':P.quoteChar,O=$;if(P.escapeChar!==void 0&&(O=P.escapeChar),(typeof C!="string"||-1<u.BAD_DELIMITERS.indexOf(C))&&(C=","),_===C)throw new Error("Comment character same as delimiter");_===!0?_="#":(typeof _!="string"||-1<u.BAD_DELIMITERS.indexOf(_))&&(_=!1),E!==`
`&&E!=="\r"&&E!==`\r
`&&(E=`
`);var R=0,q=!1;this.parse=function(V,z,J){if(typeof V!="string")throw new Error("Input must be a string");var W=V.length,F=C.length,H=E.length,X=_.length,se=N(L),G=[],oe=[],ae=[],te=R=0;if(!V)return ye();if(D||D!==!1&&V.indexOf($)===-1){for(var be=V.split(E),ge=0;ge<be.length;ge++){if(ae=be[ge],R+=ae.length,ge!==be.length-1)R+=E.length;else if(J)return ye();if(!_||ae.substring(0,X)!==_){if(se){if(G=[],Q(ae.split(C)),Re(),q)return ye()}else Q(ae.split(C));if(U&&U<=ge)return G=G.slice(0,U),ye(!0)}}return ye()}for(var je=V.indexOf(C,R),Se=V.indexOf(E,R),Ee=new RegExp(x(O)+x($),"g"),Oe=V.indexOf($,R);;)if(V[R]===$)for(Oe=R,R++;;){if((Oe=V.indexOf($,Oe+1))===-1)return J||oe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:G.length,index:R}),ie();if(Oe===W-1)return ie(V.substring(R,Oe).replace(Ee,$));if($===O&&V[Oe+1]===O)Oe++;else if($===O||Oe===0||V[Oe-1]!==O){je!==-1&&je<Oe+1&&(je=V.indexOf(C,Oe+1));var re=Y((Se=Se!==-1&&Se<Oe+1?V.indexOf(E,Oe+1):Se)===-1?je:Math.min(je,Se));if(V.substr(Oe+1+re,F)===C){ae.push(V.substring(R,Oe).replace(Ee,$)),V[R=Oe+1+re+F]!==$&&(Oe=V.indexOf($,R)),je=V.indexOf(C,R),Se=V.indexOf(E,R);break}if(re=Y(Se),V.substring(Oe+1+re,Oe+1+re+H)===E){if(ae.push(V.substring(R,Oe).replace(Ee,$)),fe(Oe+1+re+H),je=V.indexOf(C,R),Oe=V.indexOf($,R),se&&(Re(),q))return ye();if(U&&G.length>=U)return ye(!0);break}oe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:G.length,index:R}),Oe++}}else if(_&&ae.length===0&&V.substring(R,R+X)===_){if(Se===-1)return ye();R=Se+H,Se=V.indexOf(E,R),je=V.indexOf(C,R)}else if(je!==-1&&(je<Se||Se===-1))ae.push(V.substring(R,je)),R=je+F,je=V.indexOf(C,R);else{if(Se===-1)break;if(ae.push(V.substring(R,Se)),fe(Se+H),se&&(Re(),q))return ye();if(U&&G.length>=U)return ye(!0)}return ie();function Q(Te){G.push(Te),te=R}function Y(Te){var pe=0;return pe=Te!==-1&&(Te=V.substring(Oe+1,Te))&&Te.trim()===""?Te.length:pe}function ie(Te){return J||(Te===void 0&&(Te=V.substring(R)),ae.push(Te),R=W,Q(ae),se&&Re()),ye()}function fe(Te){R=Te,Q(ae),ae=[],Se=V.indexOf(E,R)}function ye(Te){if(P.header&&!z&&G.length&&!A){var pe=G[0],Ae={},He=new Set(pe);let Ze=!1;for(let Ue=0;Ue<pe.length;Ue++){let st=pe[Ue];if(Ae[st=N(P.transformHeader)?P.transformHeader(st,Ue):st]){let Ft,ht=Ae[st];for(;Ft=st+"_"+ht,ht++,He.has(Ft););He.add(Ft),pe[Ue]=Ft,Ae[st]++,Ze=!0,(I=I===null?{}:I)[Ft]=st}else Ae[st]=1,pe[Ue]=st;He.add(st)}Ze&&console.warn("Duplicate headers found and renamed."),A=!0}return{data:G,errors:oe,meta:{delimiter:C,linebreak:E,aborted:q,truncated:!!Te,cursor:te+(z||0),renamedHeaders:I}}}function Re(){L(ye()),G=[],oe=[]}},this.abort=function(){q=!0},this.getCharIndex=function(){return R}}function v(P){var C=P.data,E=l[C.workerId],_=!1;if(C.error)E.userError(C.error,C.file);else if(C.results&&C.results.data){var L={abort:function(){_=!0,b(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(N(E.userStep)){for(var U=0;U<C.results.data.length&&(E.userStep({data:C.results.data[U],errors:C.results.errors,meta:C.results.meta},L),!_);U++);delete C.results}else N(E.userChunk)&&(E.userChunk(C.results,L,C.file),delete C.results)}C.finished&&!_&&b(C.workerId,C.results)}function b(P,C){var E=l[P];N(E.userComplete)&&E.userComplete(C),E.terminate(),delete l[P]}function j(){throw new Error("Not implemented.")}function S(P){if(typeof P!="object"||P===null)return P;var C,E=Array.isArray(P)?[]:{};for(C in P)E[C]=S(P[C]);return E}function k(P,C){return function(){P.apply(C,arguments)}}function N(P){return typeof P=="function"}return u.parse=function(P,C){var E=(C=C||{}).dynamicTyping||!1;if(N(E)&&(C.dynamicTypingFunction=E,E={}),C.dynamicTyping=E,C.transform=!!N(C.transform)&&C.transform,!C.worker||!u.WORKERS_SUPPORTED)return E=null,u.NODE_STREAM_INPUT,typeof P=="string"?(P=(_=>_.charCodeAt(0)!==65279?_:_.slice(1))(P),E=new(C.download?f:h)(C)):P.readable===!0&&N(P.read)&&N(P.on)?E=new y(C):(n.File&&P instanceof File||P instanceof Object)&&(E=new p(C)),E.stream(P);(E=(()=>{var _;return!!u.WORKERS_SUPPORTED&&(_=(()=>{var L=n.URL||n.webkitURL||null,U=r.toString();return u.BLOB_URL||(u.BLOB_URL=L.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",U,")();"],{type:"text/javascript"})))})(),(_=new n.Worker(_)).onmessage=v,_.id=c++,l[_.id]=_)})()).userStep=C.step,E.userChunk=C.chunk,E.userComplete=C.complete,E.userError=C.error,C.step=N(C.step),C.chunk=N(C.chunk),C.complete=N(C.complete),C.error=N(C.error),delete C.worker,E.postMessage({input:P,config:C,workerId:E.id})},u.unparse=function(P,C){var E=!1,_=!0,L=",",U=`\r
`,D='"',I=D+D,A=!1,$=null,O=!1,R=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||u.BAD_DELIMITERS.filter(function(z){return C.delimiter.indexOf(z)!==-1}).length||(L=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(E=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(A=C.skipEmptyLines),typeof C.newline=="string"&&(U=C.newline),typeof C.quoteChar=="string"&&(D=C.quoteChar),typeof C.header=="boolean"&&(_=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");$=C.columns}C.escapeChar!==void 0&&(I=C.escapeChar+D),C.escapeFormulae instanceof RegExp?O=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(O=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(D),"g"));if(typeof P=="string"&&(P=JSON.parse(P)),Array.isArray(P)){if(!P.length||Array.isArray(P[0]))return q(null,P,A);if(typeof P[0]=="object")return q($||Object.keys(P[0]),P,A)}else if(typeof P=="object")return typeof P.data=="string"&&(P.data=JSON.parse(P.data)),Array.isArray(P.data)&&(P.fields||(P.fields=P.meta&&P.meta.fields||$),P.fields||(P.fields=Array.isArray(P.data[0])?P.fields:typeof P.data[0]=="object"?Object.keys(P.data[0]):[]),Array.isArray(P.data[0])||typeof P.data[0]=="object"||(P.data=[P.data])),q(P.fields||[],P.data||[],A);throw new Error("Unable to serialize unrecognized input");function q(z,J,W){var F="",H=(typeof z=="string"&&(z=JSON.parse(z)),typeof J=="string"&&(J=JSON.parse(J)),Array.isArray(z)&&0<z.length),X=!Array.isArray(J[0]);if(H&&_){for(var se=0;se<z.length;se++)0<se&&(F+=L),F+=V(z[se],se);0<J.length&&(F+=U)}for(var G=0;G<J.length;G++){var oe=(H?z:J[G]).length,ae=!1,te=H?Object.keys(J[G]).length===0:J[G].length===0;if(W&&!H&&(ae=W==="greedy"?J[G].join("").trim()==="":J[G].length===1&&J[G][0].length===0),W==="greedy"&&H){for(var be=[],ge=0;ge<oe;ge++){var je=X?z[ge]:ge;be.push(J[G][je])}ae=be.join("").trim()===""}if(!ae){for(var Se=0;Se<oe;Se++){0<Se&&!te&&(F+=L);var Ee=H&&X?z[Se]:Se;F+=V(J[G][Ee],Se)}G<J.length-1&&(!W||0<oe&&!te)&&(F+=U)}}return F}function V(z,J){var W,F;return z==null?"":z.constructor===Date?JSON.stringify(z).slice(1,25):(F=!1,O&&typeof z=="string"&&O.test(z)&&(z="'"+z,F=!0),W=z.toString().replace(R,I),(F=F||E===!0||typeof E=="function"&&E(z,J)||Array.isArray(E)&&E[J]||((H,X)=>{for(var se=0;se<X.length;se++)if(-1<H.indexOf(X[se]))return!0;return!1})(W,u.BAD_DELIMITERS)||-1<W.indexOf(L)||W.charAt(0)===" "||W.charAt(W.length-1)===" ")?D+W+D:W)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!o&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=w,u.ParserHandle=m,u.NetworkStreamer=f,u.FileStreamer=p,u.StringStreamer=h,u.ReadableStreamStreamer=y,n.jQuery&&((a=n.jQuery).fn.parse=function(P){var C=P.config||{},E=[];return this.each(function(U){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var D=0;D<this.files.length;D++)E.push({file:this.files[D],inputElem:this,instanceConfig:a.extend({},C)})}),_(),this;function _(){if(E.length===0)N(P.complete)&&P.complete();else{var U,D,I,A,$=E[0];if(N(P.before)){var O=P.before($.file,$.inputElem);if(typeof O=="object"){if(O.action==="abort")return U="AbortError",D=$.file,I=$.inputElem,A=O.reason,void(N(P.error)&&P.error({name:U},D,I,A));if(O.action==="skip")return void L();typeof O.config=="object"&&($.instanceConfig=a.extend($.instanceConfig,O.config))}else if(O==="skip")return void L()}var R=$.instanceConfig.complete;$.instanceConfig.complete=function(q){N(R)&&R(q,$.file,$.inputElem),L()},u.parse($.file,$.instanceConfig)}}function L(){E.splice(0,1),_()}}),i&&(n.onmessage=function(P){P=P.data,u.WORKER_ID===void 0&&P&&(u.WORKER_ID=P.workerId),typeof P.input=="string"?n.postMessage({workerId:u.WORKER_ID,results:u.parse(P.input,P.config),finished:!0}):(n.File&&P.input instanceof File||P.input instanceof Object)&&(P=u.parse(P.input,P.config))&&n.postMessage({workerId:u.WORKER_ID,results:P,finished:!0})}),(f.prototype=Object.create(d.prototype)).constructor=f,(p.prototype=Object.create(d.prototype)).constructor=p,(h.prototype=Object.create(h.prototype)).constructor=h,(y.prototype=Object.create(d.prototype)).constructor=y,u})})(J_);var xse=J_.exports;const eI=ot(xse),bse=()=>{const e=["name","description","purchasePrice","wholesalePrice","retailPrice","stock","categoryId","baseUnitId"],t=[{name:"Sample Product",description:"Sample product description",purchasePrice:10,wholesalePrice:15,retailPrice:20,stock:100,categoryId:1,baseUnitId:1}],r=eI.unparse({fields:e,data:t});return["# CSV Import Template for Products","# Instructions:","# - categoryId: Must be a valid category ID from your database","# - baseUnitId: Must be a valid unit ID from your database","# - Prices can be 0.00 or any positive number","# - Stock can be 0 or any positive number","# - Remove these comment lines before importing",""].join(`
`)+r},wse=e=>new Promise((t,r)=>{eI.parse(e,{header:!0,skipEmptyLines:!0,transform:n=>n.trim(),complete:n=>{try{if(n.errors.length>0){r(new Error(`CSV parsing errors: ${n.errors.map(o=>o.message).join(", ")}`));return}const a=n.data.map(o=>({name:o.name,description:o.description||"",purchasePrice:parseFloat(o.purchasePrice),wholesalePrice:parseFloat(o.wholesalePrice),retailPrice:parseFloat(o.retailPrice),stock:parseInt(o.stock),categoryId:parseInt(o.categoryId),baseUnitId:parseInt(o.baseUnitId)}));t(a)}catch{r(new Error("Failed to parse CSV data. Please check the file format."))}},error:n=>{r(new Error(`CSV parsing error: ${n.message}`))}})}),Sse=(e,t,r)=>{const n=[];return e.forEach((a,o)=>{const i=o+1;(!a.name||a.name.trim()==="")&&n.push(`Row ${i}: Name is required`),(isNaN(a.purchasePrice)||a.purchasePrice<0)&&n.push(`Row ${i}: Invalid purchase price (${a.purchasePrice})`),(isNaN(a.wholesalePrice)||a.wholesalePrice<0)&&n.push(`Row ${i}: Invalid wholesale price (${a.wholesalePrice})`),(isNaN(a.retailPrice)||a.retailPrice<0)&&n.push(`Row ${i}: Invalid retail price (${a.retailPrice})`),(isNaN(a.stock)||a.stock<0)&&n.push(`Row ${i}: Invalid stock quantity (${a.stock})`),(!a.categoryId||isNaN(a.categoryId)||a.categoryId<=0)&&n.push(`Row ${i}: Invalid category ID (${a.categoryId})`),(!a.baseUnitId||isNaN(a.baseUnitId)||a.baseUnitId<=0)&&n.push(`Row ${i}: Invalid base unit ID (${a.baseUnitId})`),t&&t.length>0&&(t.some(c=>c.id===a.categoryId)||n.push(`Row ${i}: Category ID ${a.categoryId} does not exist`)),r&&r.length>0&&(r.some(c=>c.id===a.baseUnitId)||n.push(`Row ${i}: Base Unit ID ${a.baseUnitId} does not exist`))}),n},jse=()=>{var I;const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,o]=g.useState([]),[i,l]=g.useState(!0),[c,u]=g.useState(!1),[d,f]=g.useState(!1),[p,h]=g.useState(null),[y,m]=g.useState(""),[x,w]=g.useState(""),[v,b]=g.useState(1),[j,S]=g.useState(1),k=30,[N,P]=g.useState({name:"",description:"",purchase_price:"",wholesale_price:"",retail_price:"",stock_quantity:"",base_unit_id:"",category_id:"",units:[]});g.useEffect(()=>{const A=setTimeout(()=>{w(y),b(1)},300);return()=>clearTimeout(A)},[y]),g.useEffect(()=>{(async()=>{try{if(l(!0),r.length===0||a.length===0){const[z,J]=await Promise.all([me("/api/categories"),me("/api/units")]);if(z.ok){const W=await z.json();n(W)}if(J.ok){const W=await J.json();o(W)}}const $=new URLSearchParams({page:v.toString(),limit:k.toString(),...x&&{search:x}}),O=await me(`/api/products?${$}`);if(!O.ok){if(O.status===401){window.location.href="/login";return}try{const z=await O.json();console.error("Error fetching products:",z),z.received?alert(`Error: ${z.error||z.message}
Received: ${JSON.stringify(z.received)}`):alert(z.error||z.message||"Failed to fetch products")}catch(z){console.error("Failed to parse error response:",z),alert(`Failed to fetch products: ${O.statusText}`)}return}const R=await O.json();if(!R||typeof R!="object"){alert("Invalid response format from server");return}const{products:q=[],totalPages:V=1}=R;t(Array.isArray(q)?q:[]),S(Math.max(1,V)),v>V&&V>0&&b(1)}catch($){console.error("Error fetching data:",$)}finally{l(!1)}})()},[v,x,r.length,a.length]);const C=g.useMemo(()=>e,[e]),E=g.useCallback(A=>{b(A),window.scrollTo(0,0)},[]),_=g.useCallback(A=>{h(A),P({name:A.name,description:A.description||"",purchase_price:A.purchasePrice.toString(),wholesale_price:A.wholesalePrice.toString(),retail_price:A.retailPrice.toString(),stock_quantity:A.stock.toString(),base_unit_id:A.baseUnitId.toString(),category_id:A.categoryId.toString(),units:A.productunit?A.productunit.map($=>({unitId:$.unitId,conversionRate:$.conversionRate,price:$.price,upc:$.upc})):[]}),u(!0)},[]),L=async A=>{A.preventDefault();try{const $=[];if(N.name.trim()||$.push("Product name is required"),N.purchase_price||$.push("Purchase price is required"),N.retail_price||$.push("Retail price is required"),N.wholesale_price||$.push("Wholesale price is required"),N.stock_quantity||$.push("Stock quantity is required"),N.base_unit_id||$.push("Base unit is required"),N.category_id||$.push("Category is required"),[{value:N.purchase_price,name:"Purchase price"},{value:N.wholesale_price,name:"Wholesale price"},{value:N.retail_price,name:"Retail price"},{value:N.stock_quantity,name:"Stock quantity"}].forEach(W=>{const F=parseFloat(W.value);(isNaN(F)||F<0)&&$.push(`${W.name} must be a valid positive number`)}),$.length>0){alert(`Please fix the following errors:
`+$.join(`
`));return}const R={name:N.name.trim(),description:N.description.trim()||null,purchasePrice:parseFloat(N.purchase_price),wholesalePrice:parseFloat(N.wholesale_price),retailPrice:parseFloat(N.retail_price),stock:parseFloat(N.stock_quantity),categoryId:parseInt(N.category_id),baseUnitId:parseInt(N.base_unit_id),units:N.units.map(W=>({unitId:Number(W.unitId),conversionRate:Number(W.conversionRate),price:Number(W.price),upc:W.upc||null}))};console.log("Sending product data:",JSON.stringify(R,null,2));const q=p?`/api/products/${p.id}`:"/api/products",V=p?"PUT":"POST";console.log("Sending product data:",R),l(!0);const z=await me(q,{method:V,headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});let J;try{J=await z.json()}catch(W){throw console.error("Failed to parse response:",W),new Error("Failed to parse server response")}if(!z.ok)throw console.error("Server error response:",J),new Error(J.message||`Failed to ${p?"update":"create"} product`);p?(t(W=>W.map(F=>F.id===p.id?J:F)),P(W=>({...W,units:J.productunit.map(F=>({unitId:F.unitId,conversionRate:F.conversionRate,price:F.price,upc:F.upc}))}))):t(W=>[...W,J]),alert(`Successfully ${p?"updated":"created"} product: ${R.name}`),l(!1),u(!1),h(null),P({name:"",description:"",purchase_price:"",wholesale_price:"",retail_price:"",stock_quantity:"",base_unit_id:"",category_id:"",units:[]})}catch($){console.error("Error saving product:",$),alert($ instanceof Error?$.message:"Failed to save product")}},U=async A=>{try{console.log("Saving units:",A);const $=A.map(q=>({unitId:Number(q.unitId),conversionRate:Number(q.conversionRate),price:Number(q.price),upc:q.upc||null}));if(!p){P(q=>({...q,units:$})),f(!1);return}const O=await me(`/api/products/${p.id}/units`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({units:$})});if(!O.ok)throw new Error("Failed to update product units");const R=await O.json();t(q=>q.map(V=>V.id===R.id?R:V)),h(R),P(q=>({...q,units:R.productunit.map(V=>({unitId:V.unitId,conversionRate:V.conversionRate,price:V.price,upc:V.upc}))})),f(!1)}catch($){console.error("Error saving units:",$),alert("Failed to save product units")}},D=async()=>{if(!window.confirm(`Are you sure you want to delete ALL products?

This action cannot be undone and will permanently remove all products from the database.`))return;if(window.prompt('To confirm deletion of ALL products, please type "DELETE ALL" (case sensitive):')!=="DELETE ALL"){alert('Deletion cancelled. You must type "DELETE ALL" exactly to confirm.');return}try{l(!0);const O=await me("/api/products/delete-all",{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!O.ok){const q=await O.json();throw new Error(q.message||"Failed to delete all products")}const R=await O.json();t([]),b(1),S(1),alert(`Successfully deleted ${R.count||"all"} products.`)}catch(O){console.error("Error deleting all products:",O),alert(O instanceof Error?O.message:"Failed to delete all products. Please try again.")}finally{l(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Products"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:async A=>{var O,R,q;const $=(O=A.target.files)==null?void 0:O[0];if($){l(!0);try{const V=await wse($),z=Sse(V,r,a);if(z.length>0){const H=`CSV validation errors:

`+z.join(`
`)+`

Please check your CSV file and ensure:
- All category IDs exist in your database
- All base unit IDs exist in your database
- All numeric values are valid`;console.error(H),alert(H);return}const J=V.map(H=>({name:H.name,description:H.description,purchasePrice:H.purchasePrice,wholesalePrice:H.wholesalePrice,retailPrice:H.retailPrice,stock:H.stock,categoryId:H.categoryId,baseUnitId:H.baseUnitId,units:[]})),W=await me("/api/products/bulk",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({products:J})});if(!W.ok){const H=await W.text();try{const X=JSON.parse(H);let se=X.message||"Failed to import products";throw X.code==="P2003"&&(((R=X.details)==null?void 0:R.field_name)==="baseUnitId"?se=`Import failed: One or more base unit IDs in your CSV do not exist in the database.

Please check your CSV file and ensure all baseUnitId values correspond to existing units.`:((q=X.details)==null?void 0:q.field_name)==="categoryId"?se=`Import failed: One or more category IDs in your CSV do not exist in the database.

Please check your CSV file and ensure all categoryId values correspond to existing categories.`:se="Import failed: Foreign key constraint violation. Please check that all ID references in your CSV exist in the database."),new Error(se)}catch(X){throw console.error("Parse error:",X),new Error(`Failed to import products: ${H}`)}}const F=await W.json();t(H=>[...H,...F]),alert(`Successfully imported ${F.length} products!`)}catch(V){console.error("Import error:",V),alert(V instanceof Error?V.message:"Failed to import products. Please try again.")}finally{l(!1),A.target.value=""}}},ref:g.useRef(null)}),s.jsxs("button",{onClick:()=>{const A=bse(),$=new Blob([A],{type:"text/csv"}),O=window.URL.createObjectURL($),R=document.createElement("a");R.href=O,R.download="products_template.csv",R.click(),window.URL.revokeObjectURL(O)},className:"bg-green-500 text-white px-4 py-2 rounded-lg flex items-center",children:[s.jsx(ip,{className:"w-4 h-4 mr-2"}),"Download Template"]}),s.jsxs("button",{onClick:()=>{const A=document.querySelector('input[type="file"]');A instanceof HTMLInputElement&&A.click()},className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center",children:[s.jsx(lp,{className:"w-4 h-4 mr-2"}),"Import CSV"]}),s.jsxs("button",{onClick:()=>{h(null),P({name:"",description:"",purchase_price:"",wholesale_price:"",retail_price:"",stock_quantity:"",base_unit_id:"",category_id:"",units:[]}),u(!0)},className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center",children:[s.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Add Product"]}),e.length>0&&s.jsxs("button",{onClick:D,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center",children:[s.jsx(br,{className:"w-4 h-4 mr-2"}),"Delete All Products"]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(zn,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Search products...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:y,onChange:A=>m(A.target.value)})]}),i?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):C.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(sp,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:y?"No products found matching your search.":"No products found. Add your first product!"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:C.map(A=>{var $;return s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(sp,{className:"w-8 h-8 text-blue-500 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:A.name}),s.jsx("p",{className:"text-sm text-gray-500",children:A.description||"No description"})]})]}),"                  ",s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>_(A),className:"text-blue-500 hover:text-blue-700",children:s.jsx(xl,{className:"w-5 h-5"})}),s.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this product?"))try{if((await me(`/api/products/${A.id}`,{method:"DELETE"})).ok)t(e.filter(R=>R.id!==A.id));else throw new Error("Failed to delete product")}catch(O){console.error("Error deleting product:",O),alert("Failed to delete product. Please try again.")}},className:"text-red-500 hover:text-red-700",children:s.jsx(br,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Purchase Price:"}),s.jsxs("span",{className:"font-medium",children:["",Number(A.purchasePrice||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Wholesale Price:"}),s.jsxs("span",{className:"font-medium",children:["",Number(A.wholesalePrice||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Retail Price:"}),s.jsxs("span",{className:"font-medium",children:["",Number(A.retailPrice||0).toFixed(2)]})]}),"                  ",s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Stock:"}),s.jsxs("span",{className:"font-medium",children:[A.stock," ",(($=A.baseUnit)==null?void 0:$.name)||"units"]})]}),A.productunit&&A.productunit.length>0&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Additional Units:"}),A.productunit.map(O=>{var R;return s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-500",children:[O.unit.name," (",O.conversionRate," ",((R=A.baseUnit)==null?void 0:R.name)||"units","):"]}),s.jsxs("span",{className:"font-medium",children:["",Number(O.price||0).toFixed(2)]})]},O.id)})]})]})]},A.id)})}),j>1&&s.jsxs("div",{className:"flex justify-center space-x-2 mt-6",children:[s.jsx("button",{onClick:()=>E(v-1),disabled:v===1,className:`px-4 py-2 rounded-md ${v===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Previous"}),s.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:j},(A,$)=>$+1).filter(A=>{const $=A===1,O=A===j,R=Math.abs(A-v)<=1;return $||O||R}).map((A,$,O)=>s.jsxs(B.Fragment,{children:[$>0&&O[$-1]!==A-1&&s.jsx("span",{className:"px-2",children:"..."}),s.jsx("button",{onClick:()=>E(A),className:`w-10 h-10 rounded-md ${v===A?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:A})]},A))}),s.jsx("button",{onClick:()=>E(v+1),disabled:v===j,className:`px-4 py-2 rounded-md ${v===j?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Next"})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px] max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:p?"Edit Product":"Add Product"}),s.jsx("button",{onClick:()=>{u(!1),h(null)},className:"text-gray-500 hover:text-gray-700",children:s.jsx(Dt,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:L,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.name,onChange:A=>P({...N,name:A.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.description,onChange:A=>P({...N,description:A.target.value}),rows:3})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Purchase Price"}),s.jsx("input",{type:"number",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.purchase_price,onChange:A=>P({...N,purchase_price:A.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Retail Price"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.retail_price,onChange:A=>P({...N,retail_price:A.target.value}),required:!0}),s.jsxs("select",{className:"mt-1 block w-32 rounded-md border-gray-300 shadow-sm",onChange:A=>{const $=parseFloat(A.target.value),O=parseFloat(N.purchase_price);if(!isNaN(O)&&!isNaN($)){const R=O*($/100),q=(O+R).toFixed(2);P({...N,retail_price:q})}},children:[s.jsx("option",{value:"",children:"Markup %"}),Array.from({length:100},(A,$)=>$+1).map(A=>s.jsxs("option",{value:A,children:[A,"%"]},A))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Wholesale Price"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.wholesale_price,onChange:A=>P({...N,wholesale_price:A.target.value}),required:!0}),s.jsxs("select",{className:"mt-1 block w-32 rounded-md border-gray-300 shadow-sm",onChange:A=>{const $=parseFloat(A.target.value),O=parseFloat(N.purchase_price);if(!isNaN(O)&&!isNaN($)){const R=O*($/100),q=(O+R).toFixed(2);P({...N,wholesale_price:q})}},children:[s.jsx("option",{value:"",children:"Markup %"}),Array.from({length:100},(A,$)=>$+1).map(A=>s.jsxs("option",{value:A,children:[A,"%"]},A))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stock Quantity"}),s.jsx("input",{type:"number",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.stock_quantity,onChange:A=>P({...N,stock_quantity:A.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Base Unit"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.base_unit_id,onChange:A=>P({...N,base_unit_id:A.target.value}),required:!0,children:[s.jsx("option",{value:"",children:"Select Unit"}),Array.isArray(a)&&a.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]}),s.jsx("button",{type:"button",className:"mt-1 px-3 py-2 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200",onClick:()=>f(!0),children:s.jsx(Cr,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),s.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",value:N.category_id,onChange:A=>P({...N,category_id:A.target.value}),required:!0,children:[s.jsx("option",{value:"",children:"Select Category"}),Array.isArray(r)&&r.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:()=>{u(!1),h(null)},className:"px-4 py-2 border rounded-md text-gray-600",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md",children:p?"Update":"Save"})]})]})]})}),s.jsx(vse,{isOpen:d,onClose:()=>f(!1),onSave:U,baseUnit:N.base_unit_id&&((I=a.find(A=>A.id.toString()===N.base_unit_id))==null?void 0:I.name)||"PCS",productId:p==null?void 0:p.id})]})},Nse=()=>{const e=yt(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[o,i]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState({name:"",description:""}),[f,p]=g.useState(""),[h,y]=g.useState(null),m=g.useCallback(async()=>{try{const S=await me("/api/categories");if(S.ok){const k=await S.json();console.log("Fetched categories:",k),r(Array.isArray(k)?k:[])}else S.status===401?e("/login"):(console.error("Failed to fetch categories"),r([]))}catch(S){console.error("Error fetching categories:",S),r([])}finally{a(!1)}},[e]);g.useEffect(()=>{m()},[m]);const x=S=>{y(null),c(S),d({name:S.name,description:S.description||""}),i(!0)},w=async S=>{if(window.confirm("Are you sure you want to delete this category?"))try{const k=await me(`/api/categories/${S}`,{method:"DELETE"});if(k.ok)r(t.filter(N=>N.id!==S));else{const N=await k.json().catch(()=>({}));y(N.message||"Failed to delete category")}}catch(k){console.error("Error deleting category:",k),y("Failed to delete category")}},v=()=>{const S=u.name.trim();return S?!l&&t.some(k=>k.name.toLowerCase()===S.toLowerCase())||l&&t.some(k=>k.id!==l.id&&k.name.toLowerCase()===S.toLowerCase())?(y("A category with this name already exists"),!1):!0:(y("Name is required"),!1)},b=async S=>{if(S.preventDefault(),y(null),!!v())try{const k=l?`/api/categories/${l.id}`:"/api/categories",N=l?"PUT":"POST",P={name:u.name.trim(),description:u.description.trim()||null};console.log("Sending request:",{method:N,url:k,data:P});const C=await me(k,{method:N,headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(C.ok){const E=await C.json();console.log("Response:",E),r(l?_=>_.map(L=>L.id===E.id?E:L):_=>[..._,E]),i(!1),c(null),d({name:"",description:""})}else{const E=await C.json().catch(()=>({})),_=E.message||E.details||"Failed to save category";y(_),C.status===401&&e("/login")}}catch(k){console.error("Error saving category:",k),y("An unexpected error occurred")}},j=t.filter(S=>{var k;return S.name.toLowerCase().includes(f.toLowerCase())||(((k=S.description)==null?void 0:k.toLowerCase())||"").includes(f.toLowerCase())});return n?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Categories"}),s.jsxs("button",{onClick:()=>{c(null),d({name:"",description:""}),i(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[s.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Add Category"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(zn,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Search categories...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:f,onChange:S=>p(S.target.value)})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:j.map(S=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:S.name}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:S.description||"No description"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>x(S),className:"text-blue-500 hover:text-blue-700",children:s.jsx(xl,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>w(S.id),className:"text-red-500 hover:text-red-700",children:s.jsx(br,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:[s.jsxs("p",{children:["Created: ",new Date(S.createdAt).toLocaleDateString()]}),s.jsxs("p",{children:["Updated: ",new Date(S.updatedAt).toLocaleDateString()]})]})]},S.id))}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:l?"Edit Category":"Add Category"}),s.jsx("button",{onClick:()=>{i(!1),c(null),y(null)},className:"text-gray-500 hover:text-gray-700",children:s.jsx(Dt,{className:"w-6 h-6"})})]}),h&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded",children:h}),s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.name,onChange:S=>{y(null),d({...u,name:S.target.value})},required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.description,onChange:S=>d({...u,description:S.target.value}),rows:3})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{i(!1),c(null),y(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:l?"Update":"Save"})]})]})]})})]})};function Ki(e,t,r){let n=r.initialDeps??[],a;function o(){var i,l,c,u;let d;r.key&&((i=r.debug)!=null&&i.call(r))&&(d=Date.now());const f=e();if(!(f.length!==n.length||f.some((y,m)=>n[m]!==y)))return a;n=f;let h;if(r.key&&((l=r.debug)!=null&&l.call(r))&&(h=Date.now()),a=t(...f),r.key&&((c=r.debug)!=null&&c.call(r))){const y=Math.round((Date.now()-d)*100)/100,m=Math.round((Date.now()-h)*100)/100,x=m/16,w=(v,b)=>{for(v=String(v);v.length<b;)v=" "+v;return v};console.info(`%c ${w(m,5)} /${w(y,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,r==null?void 0:r.key)}return(u=r==null?void 0:r.onChange)==null||u.call(r,a),a}return o.updateDeps=i=>{n=i},o}function ty(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const kse=(e,t)=>Math.abs(e-t)<=1,Pse=(e,t,r)=>{let n;return function(...a){e.clearTimeout(n),n=e.setTimeout(()=>t.apply(this,a),r)}},jP=e=>{const{offsetWidth:t,offsetHeight:r}=e;return{width:t,height:r}},Ese=e=>e,Cse=e=>{const t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let a=t;a<=r;a++)n.push(a);return n},Ase=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;const a=i=>{const{width:l,height:c}=i;t({width:Math.round(l),height:Math.round(c)})};if(a(jP(r)),!n.ResizeObserver)return()=>{};const o=new n.ResizeObserver(i=>{const l=()=>{const c=i[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){a({width:u.inlineSize,height:u.blockSize});return}}a(jP(r))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return o.observe(r,{box:"border-box"}),()=>{o.unobserve(r)}},NP={passive:!0},kP=typeof window>"u"?!0:"onscrollend"in window,Tse=(e,t)=>{const r=e.scrollElement;if(!r)return;const n=e.targetWindow;if(!n)return;let a=0;const o=e.options.useScrollendEvent&&kP?()=>{}:Pse(n,()=>{t(a,!1)},e.options.isScrollingResetDelay),i=d=>()=>{const{horizontal:f,isRtl:p}=e.options;a=f?r.scrollLeft*(p&&-1||1):r.scrollTop,o(),t(a,d)},l=i(!0),c=i(!1);c(),r.addEventListener("scroll",l,NP);const u=e.options.useScrollendEvent&&kP;return u&&r.addEventListener("scrollend",c,NP),()=>{r.removeEventListener("scroll",l),u&&r.removeEventListener("scrollend",c)}},Ose=(e,t,r)=>{if(t!=null&&t.borderBoxSize){const n=t.borderBoxSize[0];if(n)return Math.round(n[r.options.horizontal?"inlineSize":"blockSize"])}return e[r.options.horizontal?"offsetWidth":"offsetHeight"]},_se=(e,{adjustments:t=0,behavior:r},n)=>{var a,o;const i=e+t;(o=(a=n.scrollElement)==null?void 0:a.scrollTo)==null||o.call(a,{[n.options.horizontal?"left":"top"]:i,behavior:r})};class Ise{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let r=null;const n=()=>r||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:r=new this.targetWindow.ResizeObserver(a=>{a.forEach(o=>{const i=()=>{this._measureElement(o.target,o)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var a;(a=n())==null||a.disconnect(),r=null},observe:a=>{var o;return(o=n())==null?void 0:o.observe(a,{box:"border-box"})},unobserve:a=>{var o;return(o=n())==null?void 0:o.unobserve(a)}}})(),this.range=null,this.setOptions=r=>{Object.entries(r).forEach(([n,a])=>{typeof a>"u"&&delete r[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ese,rangeExtractor:Cse,onChange:()=>{},measureElement:Ose,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...r}},this.notify=r=>{var n,a;(a=(n=this.options).onChange)==null||a.call(n,this,r)},this.maybeNotify=Ki(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),r=>{this.notify(r)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(r=>r()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var r;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((r=this.scrollElement)==null?void 0:r.window)??null,this.elementsCache.forEach(a=>{this.observer.observe(a)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,a=>{this.scrollRect=a,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(a,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.getScrollOffset()<a?"forward":"backward":null,this.scrollOffset=a,this.isScrolling=o,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(r,n)=>{const a=new Map,o=new Map;for(let i=n-1;i>=0;i--){const l=r[i];if(a.has(l.lane))continue;const c=o.get(l.lane);if(c==null||l.end>c.end?o.set(l.lane,l):l.end<c.end&&a.set(l.lane,!0),a.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((i,l)=>i.end===l.end?i.index-l.index:i.end-l.end)[0]:void 0},this.getMeasurementOptions=Ki(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(r,n,a,o,i)=>(this.pendingMeasuredCacheIndexes=[],{count:r,paddingStart:n,scrollMargin:a,getItemKey:o,enabled:i}),{key:!1}),this.getMeasurements=Ki(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:r,paddingStart:n,scrollMargin:a,getItemKey:o,enabled:i},l)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let d=c;d<r;d++){const f=o(d),p=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d),h=p?p.end+this.options.gap:n+a,y=l.get(f),m=typeof y=="number"?y:this.options.estimateSize(d),x=h+m,w=p?p.lane:d%this.options.lanes;u[d]={index:d,start:h,size:m,end:x,key:f,lane:w}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Ki(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(r,n,a,o)=>this.range=r.length>0&&n>0?$se({measurements:r,outerSize:n,scrollOffset:a,lanes:o}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Ki(()=>{let r=null,n=null;const a=this.calculateRange();return a&&(r=a.startIndex,n=a.endIndex),this.maybeNotify.updateDeps([this.isScrolling,r,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,r,n]},(r,n,a,o,i)=>o===null||i===null?[]:r({startIndex:o,endIndex:i,overscan:n,count:a}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=r=>{const n=this.options.indexAttribute,a=r.getAttribute(n);return a?parseInt(a,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(r,n)=>{const a=this.indexFromElement(r),o=this.measurementsCache[a];if(!o)return;const i=o.key,l=this.elementsCache.get(i);l!==r&&(l&&this.observer.unobserve(l),this.observer.observe(r),this.elementsCache.set(i,r)),r.isConnected&&this.resizeItem(a,this.options.measureElement(r,n,this))},this.resizeItem=(r,n)=>{const a=this.measurementsCache[r];if(!a)return;const o=this.itemSizeCache.get(a.key)??a.size,i=n-o;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(a,i,this):a.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(a.index),this.itemSizeCache=new Map(this.itemSizeCache.set(a.key,n)),this.notify(!1))},this.measureElement=r=>{if(!r){this.elementsCache.forEach((n,a)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(a))});return}this._measureElement(r,void 0)},this.getVirtualItems=Ki(()=>[this.getVirtualIndexes(),this.getMeasurements()],(r,n)=>{const a=[];for(let o=0,i=r.length;o<i;o++){const l=r[o],c=n[l];a.push(c)}return a},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=r=>{const n=this.getMeasurements();if(n.length!==0)return ty(n[tI(0,n.length-1,a=>ty(n[a]).start,r)])},this.getOffsetForAlignment=(r,n,a=0)=>{const o=this.getSize(),i=this.getScrollOffset();n==="auto"&&(n=r>=i+o?"end":"start"),n==="center"?r+=(a-o)/2:n==="end"&&(r-=o);const l=this.getTotalSize()-o;return Math.max(Math.min(l,r),0)},this.getOffsetForIndex=(r,n="auto")=>{r=Math.max(0,Math.min(r,this.options.count-1));const a=this.measurementsCache[r];if(!a)return;const o=this.getSize(),i=this.getScrollOffset();if(n==="auto")if(a.end>=i+o-this.options.scrollPaddingEnd)n="end";else if(a.start<=i+this.options.scrollPaddingStart)n="start";else return[i,n];const l=n==="end"?a.end+this.options.scrollPaddingEnd:a.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,n,a.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(r,{align:n="start",behavior:a}={})=>{this.cancelScrollToIndex(),a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(r,n),{adjustments:void 0,behavior:a})},this.scrollToIndex=(r,{align:n="auto",behavior:a}={})=>{r=Math.max(0,Math.min(r,this.options.count-1)),this.cancelScrollToIndex(),a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const o=this.getOffsetForIndex(r,n);if(!o)return;const[i,l]=o;this._scrollToOffset(i,{adjustments:void 0,behavior:a}),a!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(r))){const[u]=ty(this.getOffsetForIndex(r,l)),d=this.getScrollOffset();kse(u,d)||this.scrollToIndex(r,{align:l,behavior:a})}else this.scrollToIndex(r,{align:l,behavior:a})}))},this.scrollBy=(r,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+r,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var r;const n=this.getMeasurements();let a;if(n.length===0)a=this.options.paddingStart;else if(this.options.lanes===1)a=((r=n[n.length-1])==null?void 0:r.end)??0;else{const o=Array(this.options.lanes).fill(null);let i=n.length-1;for(;i>=0&&o.some(l=>l===null);){const l=n[i];o[l.lane]===null&&(o[l.lane]=l.end),i--}a=Math.max(...o.filter(l=>l!==null))}return Math.max(a-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(r,{adjustments:n,behavior:a})=>{this.options.scrollToFn(r,{behavior:a,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const tI=(e,t,r,n)=>{for(;e<=t;){const a=(e+t)/2|0,o=r(a);if(o<n)e=a+1;else if(o>n)t=a-1;else return a}return e>0?e-1:0};function $se({measurements:e,outerSize:t,scrollOffset:r,lanes:n}){const a=e.length-1,o=c=>e[c].start;if(e.length<=n)return{startIndex:0,endIndex:a};let i=tI(0,a,o,r),l=i;if(n===1)for(;l<a&&e[l].end<r+t;)l++;else if(n>1){const c=Array(n).fill(0);for(;l<a&&c.some(d=>d<r+t);){const d=e[l];c[d.lane]=d.end,l++}const u=Array(n).fill(r+t);for(;i>=0&&u.some(d=>d>=r);){const d=e[i];u[d.lane]=d.start,i--}i=Math.max(0,i-i%n),l=Math.min(a,l+(n-1-l%n))}return{startIndex:i,endIndex:l}}const PP=typeof document<"u"?g.useLayoutEffect:g.useEffect;function Rse(e){const t=g.useReducer(()=>({}),{})[1],r={...e,onChange:(a,o)=>{var i;o?Ei.flushSync(t):t(),(i=e.onChange)==null||i.call(e,a,o)}},[n]=g.useState(()=>new Ise(r));return n.setOptions(r),PP(()=>n._didMount(),[]),PP(()=>n._willUpdate()),n}function Dse(e){return Rse({observeElementRect:Ase,observeElementOffset:Tse,scrollToFn:_se,...e})}var Mse=Object.defineProperty,Lse=(e,t,r)=>t in e?Mse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ry=(e,t,r)=>(Lse(e,typeof t!="symbol"?t+"":t,r),r);let Fse=class{constructor(){ry(this,"current",this.detect()),ry(this,"handoffState","pending"),ry(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ci=new Fse,Er=(e,t)=>{ci.isServer?g.useEffect(e,t):g.useLayoutEffect(e,t)};function cd(e){let t=g.useRef(e);return Er(()=>{t.current=e},[e]),t}function Cw(e,t){let[r,n]=g.useState(e),a=cd(e);return Er(()=>n(a.current),[a,n,...t]),r}let dt=function(e){let t=cd(e);return B.useCallback((...r)=>t.current(...r),[t])};function Use(e,t,r){let[n,a]=g.useState(r),o=e!==void 0,i=g.useRef(o),l=g.useRef(!1),c=g.useRef(!1);return o&&!i.current&&!l.current?(l.current=!0,i.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!o&&i.current&&!c.current&&(c.current=!0,i.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[o?e:n,dt(u=>(o||a(u),t==null?void 0:t(u)))]}function Bse(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function uh(){let e=[],t={addEventListener(r,n,a,o){return r.addEventListener(n,a,o),t.add(()=>r.removeEventListener(n,a,o))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return t.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Bse(()=>{n.current&&r[0]()}),t.add(()=>{n.current=!1})},style(r,n,a){let o=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:a}),this.add(()=>{Object.assign(r.style,{[n]:o})})},group(r){let n=uh();return r(n),this.add(()=>n.dispose())},add(r){return e.push(r),()=>{let n=e.indexOf(r);if(n>=0)for(let a of e.splice(n,1))a()}},dispose(){for(let r of e.splice(0))r()}};return t}function Aw(){let[e]=g.useState(uh);return g.useEffect(()=>()=>e.dispose(),[e]),e}function zse(){let e=typeof document>"u";return"useSyncExternalStore"in Tf?(t=>t.useSyncExternalStore)(Tf)(()=>()=>{},()=>!1,()=>!e):!1}function qse(){let e=zse(),[t,r]=g.useState(ci.isHandoffComplete);return t&&ci.isHandoffComplete===!1&&r(!1),g.useEffect(()=>{t!==!0&&r(!0)},[t]),g.useEffect(()=>ci.handoff(),[]),e?!1:t}var EP;let ud=(EP=B.useId)!=null?EP:function(){let e=qse(),[t,r]=B.useState(e?()=>ci.nextId():null);return Er(()=>{t===null&&r(ci.nextId())},[t]),t!=null?""+t:void 0};function Ca(e,t,...r){if(e in t){let a=t[e];return typeof a=="function"?a(...r):a}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ca),n}function Tw(e){return ci.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let CP=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Hse=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Hse||{}),Vse=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Vse||{}),Wse=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Wse||{}),rI=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(rI||{});function Qse(e,t=0){var r;return e===((r=Tw(e))==null?void 0:r.body)?!1:Ca(t,{0(){return e.matches(CP)},1(){let n=e;for(;n!==null;){if(n.matches(CP))return!0;n=n.parentElement}return!1}})}var Kse=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Kse||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Gse(e,t=r=>r){return e.slice().sort((r,n)=>{let a=t(r),o=t(n);if(a===null||o===null)return 0;let i=a.compareDocumentPosition(o);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Zse(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Xse(){return/Android/gi.test(window.navigator.userAgent)}function nI(){return Zse()||Xse()}function Gd(e,t,r){let n=cd(t);g.useEffect(()=>{function a(o){n.current(o)}return document.addEventListener(e,a,r),()=>document.removeEventListener(e,a,r)},[e,r])}function Yse(e,t,r){let n=cd(t);g.useEffect(()=>{function a(o){n.current(o)}return window.addEventListener(e,a,r),()=>window.removeEventListener(e,a,r)},[e,r])}function Jse(e,t,r=!0){let n=g.useRef(!1);g.useEffect(()=>{requestAnimationFrame(()=>{n.current=r})},[r]);function a(i,l){if(!n.current||i.defaultPrevented)return;let c=l(i);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=function d(f){return typeof f=="function"?d(f()):Array.isArray(f)||f instanceof Set?f:[f]}(e);for(let d of u){if(d===null)continue;let f=d instanceof HTMLElement?d:d.current;if(f!=null&&f.contains(c)||i.composed&&i.composedPath().includes(f))return}return!Qse(c,rI.Loose)&&c.tabIndex!==-1&&i.preventDefault(),t(i,c)}let o=g.useRef(null);Gd("pointerdown",i=>{var l,c;n.current&&(o.current=((c=(l=i.composedPath)==null?void 0:l.call(i))==null?void 0:c[0])||i.target)},!0),Gd("mousedown",i=>{var l,c;n.current&&(o.current=((c=(l=i.composedPath)==null?void 0:l.call(i))==null?void 0:c[0])||i.target)},!0),Gd("click",i=>{nI()||o.current&&(a(i,()=>o.current),o.current=null)},!0),Gd("touchend",i=>a(i,()=>i.target instanceof HTMLElement?i.target:null),!0),Yse("blur",i=>a(i,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ele(...e){return g.useMemo(()=>Tw(...e),[...e])}function AP(e){var t;if(e.type)return e.type;let r=(t=e.as)!=null?t:"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function tle(e,t){let[r,n]=g.useState(()=>AP(e));return Er(()=>{n(AP(e))},[e.type,e.as]),Er(()=>{r||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&n("button")},[r,t]),r}let rle=Symbol();function dd(...e){let t=g.useRef(e);g.useEffect(()=>{t.current=e},[e]);let r=dt(n=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(n):a.current=n)});return e.every(n=>n==null||(n==null?void 0:n[rle]))?void 0:r}function TP(e){return[e.screenX,e.screenY]}function nle(){let e=g.useRef([-1,-1]);return{wasMoved(t){let r=TP(t);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(t){e.current=TP(t)}}}function ale({container:e,accept:t,walk:r,enabled:n=!0}){let a=g.useRef(t),o=g.useRef(r);g.useEffect(()=>{a.current=t,o.current=r},[t,r]),Er(()=>{if(!e||!n)return;let i=Tw(e);if(!i)return;let l=a.current,c=o.current,u=Object.assign(f=>l(f),{acceptNode:l}),d=i.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u,!1);for(;d.nextNode();)c(d.currentNode)},[e,n,a,o])}function OP(e,t){let r=g.useRef([]),n=dt(e);g.useEffect(()=>{let a=[...r.current];for(let[o,i]of t.entries())if(r.current[o]!==i){let l=n(t,a);return r.current=t,l}},[n,...t])}function _P(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var Kv=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Kv||{}),ole=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ole||{});function Ri({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:a,visible:o=!0,name:i,mergeRefs:l}){l=l??ile;let c=aI(t,e);if(o)return Zd(c,r,n,i,l);let u=a??0;if(u&2){let{static:d=!1,...f}=c;if(d)return Zd(f,r,n,i,l)}if(u&1){let{unmount:d=!0,...f}=c;return Ca(d?0:1,{0(){return null},1(){return Zd({...f,hidden:!0,style:{display:"none"}},r,n,i,l)}})}return Zd(c,r,n,i,l)}function Zd(e,t={},r,n,a){let{as:o=r,children:i,refName:l="ref",...c}=ny(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof i=="function"?i(t):i;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let f={};if(t){let p=!1,h=[];for(let[y,m]of Object.entries(t))typeof m=="boolean"&&(p=!0),m===!0&&h.push(y);p&&(f["data-headlessui-state"]=h.join(" "))}if(o===g.Fragment&&Object.keys(Gv(c)).length>0){if(!g.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`));let p=d.props,h=typeof(p==null?void 0:p.className)=="function"?(...m)=>_P(p==null?void 0:p.className(...m),c.className):_P(p==null?void 0:p.className,c.className),y=h?{className:h}:{};return g.cloneElement(d,Object.assign({},aI(d.props,Gv(ny(c,["ref"]))),f,u,{ref:a(d.ref,u.ref)},y))}return g.createElement(o,Object.assign({},ny(c,["ref"]),o!==g.Fragment&&u,o!==g.Fragment&&f),d)}function ile(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}function aI(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let a in n)a.startsWith("on")&&typeof n[a]=="function"?(r[a]!=null||(r[a]=[]),r[a].push(n[a])):t[a]=n[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(r).map(n=>[n,void 0])));for(let n in r)Object.assign(t,{[n](a,...o){let i=r[n];for(let l of i){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;l(a,...o)}}});return t}function Di(e){var t;return Object.assign(g.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Gv(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function ny(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}let sle="div";var oI=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(oI||{});function lle(e,t){var r;let{features:n=1,...a}=e,o={ref:t,"aria-hidden":(n&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return Ri({ourProps:o,theirProps:a,slot:{},defaultTag:sle,name:"Hidden"})}let cle=Di(lle),Ow=g.createContext(null);Ow.displayName="OpenClosedContext";var Bu=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Bu||{});function ule(){return g.useContext(Ow)}function dle({value:e,children:t}){return B.createElement(Ow.Provider,{value:e},t)}function fle(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Zo=[];fle(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Zo[0]!==t.target&&(Zo.unshift(t.target),Zo=Zo.filter(r=>r!=null&&r.isConnected),Zo.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function ple(e){let t=e.parentElement,r=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(r=t),t=t.parentElement;let n=(t==null?void 0:t.getAttribute("disabled"))==="";return n&&hle(r)?!1:n}function hle(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}function mle(e){throw new Error("Unexpected object: "+e)}var Gt=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Gt||{});function IP(e,t){let r=t.resolveItems();if(r.length<=0)return null;let n=t.resolveActiveIndex(),a=n??-1;switch(e.focus){case 0:{for(let o=0;o<r.length;++o)if(!t.resolveDisabled(r[o],o,r))return o;return n}case 1:{for(let o=a-1;o>=0;--o)if(!t.resolveDisabled(r[o],o,r))return o;return n}case 2:{for(let o=a+1;o<r.length;++o)if(!t.resolveDisabled(r[o],o,r))return o;return n}case 3:{for(let o=r.length-1;o>=0;--o)if(!t.resolveDisabled(r[o],o,r))return o;return n}case 4:{for(let o=0;o<r.length;++o)if(t.resolveId(r[o],o,r)===e.id)return o;return n}case 5:return null;default:mle(e)}}function iI(e={},t=null,r=[]){for(let[n,a]of Object.entries(e))lI(r,sI(t,n),a);return r}function sI(e,t){return e?e+"["+t+"]":t}function lI(e,t,r){if(Array.isArray(r))for(let[n,a]of r.entries())lI(e,sI(t,n.toString()),a);else r instanceof Date?e.push([t,r.toISOString()]):typeof r=="boolean"?e.push([t,r?"1":"0"]):typeof r=="string"?e.push([t,r]):typeof r=="number"?e.push([t,`${r}`]):r==null?e.push([t,""]):iI(r,t,e)}var zr=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(zr||{}),gle={},yle=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(yle||{}),vle=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(vle||{}),xle=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(xle||{}),ble=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.RegisterOption=3]="RegisterOption",e[e.UnregisterOption=4]="UnregisterOption",e[e.RegisterLabel=5]="RegisterLabel",e[e.SetActivationTrigger=6]="SetActivationTrigger",e[e.UpdateVirtualOptions=7]="UpdateVirtualOptions",e))(ble||{});function ay(e,t=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=t(e.options.slice()),a=n.length>0&&n[0].dataRef.current.order!==null?n.sort((i,l)=>i.dataRef.current.order-l.dataRef.current.order):Gse(n,i=>i.dataRef.current.domRef.current),o=r?a.indexOf(r):null;return o===-1&&(o=null),{options:a,activeOptionIndex:o}}let wle={1(e){var t;return(t=e.dataRef.current)!=null&&t.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1}},0(e){var t,r;if((t=e.dataRef.current)!=null&&t.disabled||e.comboboxState===0)return e;if((r=e.dataRef.current)!=null&&r.value){let n=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(n!==-1)return{...e,activeOptionIndex:n,comboboxState:0}}return{...e,comboboxState:0}},2(e,t){var r,n,a,o,i;if((r=e.dataRef.current)!=null&&r.disabled||(n=e.dataRef.current)!=null&&n.optionsRef.current&&!((a=e.dataRef.current)!=null&&a.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let d=t.focus===Gt.Specific?t.idx:IP(t,{resolveItems:()=>e.virtual.options,resolveActiveIndex:()=>{var p,h;return(h=(p=e.activeOptionIndex)!=null?p:e.virtual.options.findIndex(y=>!e.virtual.disabled(y)))!=null?h:null},resolveDisabled:e.virtual.disabled,resolveId(){throw new Error("Function not implemented.")}}),f=(o=t.trigger)!=null?o:2;return e.activeOptionIndex===d&&e.activationTrigger===f?e:{...e,activeOptionIndex:d,activationTrigger:f}}let l=ay(e);if(l.activeOptionIndex===null){let d=l.options.findIndex(f=>!f.dataRef.current.disabled);d!==-1&&(l.activeOptionIndex=d)}let c=t.focus===Gt.Specific?t.idx:IP(t,{resolveItems:()=>l.options,resolveActiveIndex:()=>l.activeOptionIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled}),u=(i=t.trigger)!=null?i:2;return e.activeOptionIndex===c&&e.activationTrigger===u?e:{...e,...l,activeOptionIndex:c,activationTrigger:u}},3:(e,t)=>{var r,n,a;if((r=e.dataRef.current)!=null&&r.virtual)return{...e,options:[...e.options,t.payload]};let o=t.payload,i=ay(e,c=>(c.push(o),c));e.activeOptionIndex===null&&(n=e.dataRef.current)!=null&&n.isSelected(t.payload.dataRef.current.value)&&(i.activeOptionIndex=i.options.indexOf(o));let l={...e,...i,activationTrigger:2};return(a=e.dataRef.current)!=null&&a.__demoMode&&e.dataRef.current.value===void 0&&(l.activeOptionIndex=0),l},4:(e,t)=>{var r;if((r=e.dataRef.current)!=null&&r.virtual)return{...e,options:e.options.filter(a=>a.id!==t.id)};let n=ay(e,a=>{let o=a.findIndex(i=>i.id===t.id);return o!==-1&&a.splice(o,1),a});return{...e,...n,activationTrigger:2}},5:(e,t)=>e.labelId===t.id?e:{...e,labelId:t.id},6:(e,t)=>e.activationTrigger===t.trigger?e:{...e,activationTrigger:t.trigger},7:(e,t)=>{var r;if(((r=e.virtual)==null?void 0:r.options)===t.options)return e;let n=e.activeOptionIndex;if(e.activeOptionIndex!==null){let a=t.options.indexOf(e.virtual.options[e.activeOptionIndex]);a!==-1?n=a:n=null}return{...e,activeOptionIndex:n,virtual:Object.assign({},e.virtual,{options:t.options})}}},_w=g.createContext(null);_w.displayName="ComboboxActionsContext";function fd(e){let t=g.useContext(_w);if(t===null){let r=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,fd),r}return t}let cI=g.createContext(null);function Sle(e){var t;let r=Mi("VirtualProvider"),[n,a]=g.useMemo(()=>{let c=r.optionsRef.current;if(!c)return[0,0];let u=window.getComputedStyle(c);return[parseFloat(u.paddingBlockStart||u.paddingTop),parseFloat(u.paddingBlockEnd||u.paddingBottom)]},[r.optionsRef.current]),o=Dse({scrollPaddingStart:n,scrollPaddingEnd:a,count:r.virtual.options.length,estimateSize(){return 40},getScrollElement(){var c;return(c=r.optionsRef.current)!=null?c:null},overscan:12}),[i,l]=g.useState(0);return Er(()=>{l(c=>c+1)},[(t=r.virtual)==null?void 0:t.options]),B.createElement(cI.Provider,{value:o},B.createElement("div",{style:{position:"relative",width:"100%",height:`${o.getTotalSize()}px`},ref:c=>{if(c){if(typeof process<"u"&&gle.JEST_WORKER_ID!==void 0||r.activationTrigger===0)return;r.activeOptionIndex!==null&&r.virtual.options.length>r.activeOptionIndex&&o.scrollToIndex(r.activeOptionIndex)}}},o.getVirtualItems().map(c=>{var u;return B.createElement(g.Fragment,{key:c.key},B.cloneElement((u=e.children)==null?void 0:u.call(e,{option:r.virtual.options[c.index],open:r.comboboxState===0}),{key:`${i}-${c.key}`,"data-index":c.index,"aria-setsize":r.virtual.options.length,"aria-posinset":c.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${c.start}px)`,overflowAnchor:"none"}}))})))}let Iw=g.createContext(null);Iw.displayName="ComboboxDataContext";function Mi(e){let t=g.useContext(Iw);if(t===null){let r=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Mi),r}return t}function jle(e,t){return Ca(t.type,wle,e,t)}let Nle=g.Fragment;function kle(e,t){let{value:r,defaultValue:n,onChange:a,form:o,name:i,by:l=null,disabled:c=!1,__demoMode:u=!1,nullable:d=!1,multiple:f=!1,immediate:p=!1,virtual:h=null,...y}=e,m=!1,x=null,[w=f?[]:void 0,v]=Use(r,a,n),[b,j]=g.useReducer(jle,{dataRef:g.createRef(),comboboxState:u?0:1,options:[],virtual:null,activeOptionIndex:null,activationTrigger:2,labelId:null}),S=g.useRef(!1),k=g.useRef({static:!1,hold:!1}),N=g.useRef(null),P=g.useRef(null),C=g.useRef(null),E=g.useRef(null),_=dt(typeof l=="string"?(G,oe)=>{let ae=l;return(G==null?void 0:G[ae])===(oe==null?void 0:oe[ae])}:l??((G,oe)=>G===oe)),L=dt(G=>b.options.findIndex(oe=>_(oe.dataRef.current.value,G))),U=g.useCallback(G=>Ca(I.mode,{1:()=>w.some(oe=>_(oe,G)),0:()=>_(w,G)}),[w]),D=dt(G=>b.activeOptionIndex===L(G)),I=g.useMemo(()=>({...b,immediate:m,optionsPropsRef:k,labelRef:N,inputRef:P,buttonRef:C,optionsRef:E,value:w,defaultValue:n,disabled:c,mode:f?1:0,virtual:b.virtual,get activeOptionIndex(){if(S.current&&b.activeOptionIndex===null&&b.options.length>0){let G=b.options.findIndex(oe=>!oe.dataRef.current.disabled);if(G!==-1)return G}return b.activeOptionIndex},calculateIndex:L,compare:_,isSelected:U,isActive:D,nullable:d,__demoMode:u}),[w,n,c,f,d,u,b,x]);Er(()=>{},[x,void 0]),Er(()=>{b.dataRef.current=I},[I]),Jse([I.buttonRef,I.inputRef,I.optionsRef],()=>F.closeCombobox(),I.comboboxState===0);let A=g.useMemo(()=>{var G,oe,ae;return{open:I.comboboxState===0,disabled:c,activeIndex:I.activeOptionIndex,activeOption:I.activeOptionIndex===null?null:I.virtual?I.virtual.options[(G=I.activeOptionIndex)!=null?G:0]:(ae=(oe=I.options[I.activeOptionIndex])==null?void 0:oe.dataRef.current.value)!=null?ae:null,value:w}},[I,c,w]),$=dt(()=>{if(I.activeOptionIndex!==null){if(I.virtual)J(I.virtual.options[I.activeOptionIndex]);else{let{dataRef:G}=I.options[I.activeOptionIndex];J(G.current.value)}F.goToOption(Gt.Specific,I.activeOptionIndex)}}),O=dt(()=>{j({type:0}),S.current=!0}),R=dt(()=>{j({type:1}),S.current=!1}),q=dt((G,oe,ae)=>(S.current=!1,G===Gt.Specific?j({type:2,focus:Gt.Specific,idx:oe,trigger:ae}):j({type:2,focus:G,trigger:ae}))),V=dt((G,oe)=>(j({type:3,payload:{id:G,dataRef:oe}}),()=>{I.isActive(oe.current.value)&&(S.current=!0),j({type:4,id:G})})),z=dt(G=>(j({type:5,id:G}),()=>j({type:5,id:null}))),J=dt(G=>Ca(I.mode,{0(){return v==null?void 0:v(G)},1(){let oe=I.value.slice(),ae=oe.findIndex(te=>_(te,G));return ae===-1?oe.push(G):oe.splice(ae,1),v==null?void 0:v(oe)}})),W=dt(G=>{j({type:6,trigger:G})}),F=g.useMemo(()=>({onChange:J,registerOption:V,registerLabel:z,goToOption:q,closeCombobox:R,openCombobox:O,setActivationTrigger:W,selectActiveOption:$}),[]),H=t===null?{}:{ref:t},X=g.useRef(null),se=Aw();return g.useEffect(()=>{X.current&&n!==void 0&&se.addEventListener(X.current,"reset",()=>{v==null||v(n)})},[X,v]),B.createElement(_w.Provider,{value:F},B.createElement(Iw.Provider,{value:I},B.createElement(dle,{value:Ca(I.comboboxState,{0:Bu.Open,1:Bu.Closed})},i!=null&&w!=null&&iI({[i]:w}).map(([G,oe],ae)=>B.createElement(cle,{features:oI.Hidden,ref:ae===0?te=>{var be;X.current=(be=te==null?void 0:te.closest("form"))!=null?be:null}:void 0,...Gv({key:G,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:o,disabled:c,name:G,value:oe})})),Ri({ourProps:H,theirProps:y,slot:A,defaultTag:Nle,name:"Combobox"}))))}let Ple="input";function Ele(e,t){var r,n,a,o,i;let l=ud(),{id:c=`headlessui-combobox-input-${l}`,onChange:u,displayValue:d,type:f="text",...p}=e,h=Mi("Combobox.Input"),y=fd("Combobox.Input"),m=dd(h.inputRef,t),x=ele(h.inputRef),w=g.useRef(!1),v=Aw(),b=dt(()=>{y.onChange(null),h.optionsRef.current&&(h.optionsRef.current.scrollTop=0),y.goToOption(Gt.Nothing)}),j=function(){var I;return typeof d=="function"&&h.value!==void 0?(I=d(h.value))!=null?I:"":typeof h.value=="string"?h.value:""}();OP(([I,A],[$,O])=>{if(w.current)return;let R=h.inputRef.current;R&&((O===0&&A===1||I!==$)&&(R.value=I),requestAnimationFrame(()=>{if(w.current||!R||(x==null?void 0:x.activeElement)!==R)return;let{selectionStart:q,selectionEnd:V}=R;Math.abs((V??0)-(q??0))===0&&q===0&&R.setSelectionRange(R.value.length,R.value.length)}))},[j,h.comboboxState,x]),OP(([I],[A])=>{if(I===0&&A===1){if(w.current)return;let $=h.inputRef.current;if(!$)return;let O=$.value,{selectionStart:R,selectionEnd:q,selectionDirection:V}=$;$.value="",$.value=O,V!==null?$.setSelectionRange(R,q,V):$.setSelectionRange(R,q)}},[h.comboboxState]);let S=g.useRef(!1),k=dt(()=>{S.current=!0}),N=dt(()=>{v.nextFrame(()=>{S.current=!1})}),P=dt(I=>{switch(w.current=!0,I.key){case zr.Enter:if(w.current=!1,h.comboboxState!==0||S.current)return;if(I.preventDefault(),I.stopPropagation(),h.activeOptionIndex===null){y.closeCombobox();return}y.selectActiveOption(),h.mode===0&&y.closeCombobox();break;case zr.ArrowDown:return w.current=!1,I.preventDefault(),I.stopPropagation(),Ca(h.comboboxState,{0:()=>y.goToOption(Gt.Next),1:()=>y.openCombobox()});case zr.ArrowUp:return w.current=!1,I.preventDefault(),I.stopPropagation(),Ca(h.comboboxState,{0:()=>y.goToOption(Gt.Previous),1:()=>{y.openCombobox(),v.nextFrame(()=>{h.value||y.goToOption(Gt.Last)})}});case zr.Home:if(I.shiftKey)break;return w.current=!1,I.preventDefault(),I.stopPropagation(),y.goToOption(Gt.First);case zr.PageUp:return w.current=!1,I.preventDefault(),I.stopPropagation(),y.goToOption(Gt.First);case zr.End:if(I.shiftKey)break;return w.current=!1,I.preventDefault(),I.stopPropagation(),y.goToOption(Gt.Last);case zr.PageDown:return w.current=!1,I.preventDefault(),I.stopPropagation(),y.goToOption(Gt.Last);case zr.Escape:return w.current=!1,h.comboboxState!==0?void 0:(I.preventDefault(),h.optionsRef.current&&!h.optionsPropsRef.current.static&&I.stopPropagation(),h.nullable&&h.mode===0&&h.value===null&&b(),y.closeCombobox());case zr.Tab:if(w.current=!1,h.comboboxState!==0)return;h.mode===0&&h.activationTrigger!==1&&y.selectActiveOption(),y.closeCombobox();break}}),C=dt(I=>{u==null||u(I),h.nullable&&h.mode===0&&I.target.value===""&&b(),y.openCombobox()}),E=dt(I=>{var A,$,O;let R=(A=I.relatedTarget)!=null?A:Zo.find(q=>q!==I.currentTarget);if(w.current=!1,!(($=h.optionsRef.current)!=null&&$.contains(R))&&!((O=h.buttonRef.current)!=null&&O.contains(R))&&h.comboboxState===0)return I.preventDefault(),h.mode===0&&(h.nullable&&h.value===null?b():h.activationTrigger!==1&&y.selectActiveOption()),y.closeCombobox()}),_=dt(I=>{var A,$,O;let R=(A=I.relatedTarget)!=null?A:Zo.find(q=>q!==I.currentTarget);($=h.buttonRef.current)!=null&&$.contains(R)||(O=h.optionsRef.current)!=null&&O.contains(R)||h.disabled||h.immediate&&h.comboboxState!==0&&(y.openCombobox(),v.nextFrame(()=>{y.setActivationTrigger(1)}))}),L=Cw(()=>{if(h.labelId)return[h.labelId].join(" ")},[h.labelId]),U=g.useMemo(()=>({open:h.comboboxState===0,disabled:h.disabled}),[h]),D={ref:m,id:c,role:"combobox",type:f,"aria-controls":(r=h.optionsRef.current)==null?void 0:r.id,"aria-expanded":h.comboboxState===0,"aria-activedescendant":h.activeOptionIndex===null?void 0:h.virtual?(n=h.options.find(I=>{var A;return!((A=h.virtual)!=null&&A.disabled(I.dataRef.current.value))&&h.compare(I.dataRef.current.value,h.virtual.options[h.activeOptionIndex])}))==null?void 0:n.id:(a=h.options[h.activeOptionIndex])==null?void 0:a.id,"aria-labelledby":L,"aria-autocomplete":"list",defaultValue:(i=(o=e.defaultValue)!=null?o:h.defaultValue!==void 0?d==null?void 0:d(h.defaultValue):null)!=null?i:h.defaultValue,disabled:h.disabled,onCompositionStart:k,onCompositionEnd:N,onKeyDown:P,onChange:C,onFocus:_,onBlur:E};return Ri({ourProps:D,theirProps:p,slot:U,defaultTag:Ple,name:"Combobox.Input"})}let Cle="button";function Ale(e,t){var r;let n=Mi("Combobox.Button"),a=fd("Combobox.Button"),o=dd(n.buttonRef,t),i=ud(),{id:l=`headlessui-combobox-button-${i}`,...c}=e,u=Aw(),d=dt(m=>{switch(m.key){case zr.ArrowDown:return m.preventDefault(),m.stopPropagation(),n.comboboxState===1&&a.openCombobox(),u.nextFrame(()=>{var x;return(x=n.inputRef.current)==null?void 0:x.focus({preventScroll:!0})});case zr.ArrowUp:return m.preventDefault(),m.stopPropagation(),n.comboboxState===1&&(a.openCombobox(),u.nextFrame(()=>{n.value||a.goToOption(Gt.Last)})),u.nextFrame(()=>{var x;return(x=n.inputRef.current)==null?void 0:x.focus({preventScroll:!0})});case zr.Escape:return n.comboboxState!==0?void 0:(m.preventDefault(),n.optionsRef.current&&!n.optionsPropsRef.current.static&&m.stopPropagation(),a.closeCombobox(),u.nextFrame(()=>{var x;return(x=n.inputRef.current)==null?void 0:x.focus({preventScroll:!0})}));default:return}}),f=dt(m=>{if(ple(m.currentTarget))return m.preventDefault();n.comboboxState===0?a.closeCombobox():(m.preventDefault(),a.openCombobox()),u.nextFrame(()=>{var x;return(x=n.inputRef.current)==null?void 0:x.focus({preventScroll:!0})})}),p=Cw(()=>{if(n.labelId)return[n.labelId,l].join(" ")},[n.labelId,l]),h=g.useMemo(()=>({open:n.comboboxState===0,disabled:n.disabled,value:n.value}),[n]),y={ref:o,id:l,type:tle(e,n.buttonRef),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(r=n.optionsRef.current)==null?void 0:r.id,"aria-expanded":n.comboboxState===0,"aria-labelledby":p,disabled:n.disabled,onClick:f,onKeyDown:d};return Ri({ourProps:y,theirProps:c,slot:h,defaultTag:Cle,name:"Combobox.Button"})}let Tle="label";function Ole(e,t){let r=ud(),{id:n=`headlessui-combobox-label-${r}`,...a}=e,o=Mi("Combobox.Label"),i=fd("Combobox.Label"),l=dd(o.labelRef,t);Er(()=>i.registerLabel(n),[n]);let c=dt(()=>{var d;return(d=o.inputRef.current)==null?void 0:d.focus({preventScroll:!0})}),u=g.useMemo(()=>({open:o.comboboxState===0,disabled:o.disabled}),[o]);return Ri({ourProps:{ref:l,id:n,onClick:c},theirProps:a,slot:u,defaultTag:Tle,name:"Combobox.Label"})}let _le="ul",Ile=Kv.RenderStrategy|Kv.Static;function $le(e,t){let r=ud(),{id:n=`headlessui-combobox-options-${r}`,hold:a=!1,...o}=e,i=Mi("Combobox.Options"),l=dd(i.optionsRef,t),c=ule(),u=c!==null?(c&Bu.Open)===Bu.Open:i.comboboxState===0;Er(()=>{var h;i.optionsPropsRef.current.static=(h=e.static)!=null?h:!1},[i.optionsPropsRef,e.static]),Er(()=>{i.optionsPropsRef.current.hold=a},[i.optionsPropsRef,a]),ale({container:i.optionsRef.current,enabled:i.comboboxState===0,accept(h){return h.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:h.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(h){h.setAttribute("role","none")}});let d=Cw(()=>{var h,y;return(y=i.labelId)!=null?y:(h=i.buttonRef.current)==null?void 0:h.id},[i.labelId,i.buttonRef.current]),f=g.useMemo(()=>({open:i.comboboxState===0,option:void 0}),[i]),p={"aria-labelledby":d,role:"listbox","aria-multiselectable":i.mode===1?!0:void 0,id:n,ref:l};return i.virtual&&i.comboboxState===0&&Object.assign(o,{children:B.createElement(Sle,null,o.children)}),Ri({ourProps:p,theirProps:o,slot:f,defaultTag:_le,features:Ile,visible:u,name:"Combobox.Options"})}let Rle="li";function Dle(e,t){var r;let n=ud(),{id:a=`headlessui-combobox-option-${n}`,disabled:o=!1,value:i,order:l=null,...c}=e,u=Mi("Combobox.Option"),d=fd("Combobox.Option"),f=u.virtual?u.activeOptionIndex===u.calculateIndex(i):u.activeOptionIndex===null?!1:((r=u.options[u.activeOptionIndex])==null?void 0:r.id)===a,p=u.isSelected(i),h=g.useRef(null),y=cd({disabled:o,value:i,domRef:h,order:l}),m=g.useContext(cI),x=dd(t,h,m?m.measureElement:null),w=dt(()=>d.onChange(i));Er(()=>d.registerOption(a,y),[y,a]);let v=g.useRef(!(u.virtual||u.__demoMode));Er(()=>{if(!u.virtual||!u.__demoMode)return;let E=uh();return E.requestAnimationFrame(()=>{v.current=!0}),E.dispose},[u.virtual,u.__demoMode]),Er(()=>{if(!v.current||u.comboboxState!==0||!f||u.activationTrigger===0)return;let E=uh();return E.requestAnimationFrame(()=>{var _,L;(L=(_=h.current)==null?void 0:_.scrollIntoView)==null||L.call(_,{block:"nearest"})}),E.dispose},[h,f,u.comboboxState,u.activationTrigger,u.activeOptionIndex]);let b=dt(E=>{var _;if(o||(_=u.virtual)!=null&&_.disabled(i))return E.preventDefault();w(),nI()||requestAnimationFrame(()=>{var L;return(L=u.inputRef.current)==null?void 0:L.focus({preventScroll:!0})}),u.mode===0&&requestAnimationFrame(()=>d.closeCombobox())}),j=dt(()=>{var E;if(o||(E=u.virtual)!=null&&E.disabled(i))return d.goToOption(Gt.Nothing);let _=u.calculateIndex(i);d.goToOption(Gt.Specific,_)}),S=nle(),k=dt(E=>S.update(E)),N=dt(E=>{var _;if(!S.wasMoved(E)||o||(_=u.virtual)!=null&&_.disabled(i)||f)return;let L=u.calculateIndex(i);d.goToOption(Gt.Specific,L,0)}),P=dt(E=>{var _;S.wasMoved(E)&&(o||(_=u.virtual)!=null&&_.disabled(i)||f&&(u.optionsPropsRef.current.hold||d.goToOption(Gt.Nothing)))}),C=g.useMemo(()=>({active:f,selected:p,disabled:o}),[f,p,o]);return Ri({ourProps:{id:a,ref:x,role:"option",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-selected":p,disabled:void 0,onClick:b,onFocus:j,onPointerEnter:k,onMouseEnter:k,onPointerMove:N,onMouseMove:N,onPointerLeave:P,onMouseLeave:P},theirProps:c,slot:C,defaultTag:Rle,name:"Combobox.Option"})}let Mle=Di(kle),Lle=Di(Ale),Fle=Di(Ele),Ule=Di(Ole),Ble=Di($le),zle=Di(Dle),Gi=Object.assign(Mle,{Input:Fle,Button:Lle,Label:Ule,Options:Ble,Option:zle});function uI(e,t){return function(){return e.apply(t,arguments)}}const{toString:qle}=Object.prototype,{getPrototypeOf:$w}=Object,Lm=(e=>t=>{const r=qle.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Hn=e=>(e=e.toLowerCase(),t=>Lm(t)===e),Fm=e=>t=>typeof t===e,{isArray:Rl}=Array,zu=Fm("undefined");function Hle(e){return e!==null&&!zu(e)&&e.constructor!==null&&!zu(e.constructor)&&en(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const dI=Hn("ArrayBuffer");function Vle(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&dI(e.buffer),t}const Wle=Fm("string"),en=Fm("function"),fI=Fm("number"),Um=e=>e!==null&&typeof e=="object",Qle=e=>e===!0||e===!1,bf=e=>{if(Lm(e)!=="object")return!1;const t=$w(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Kle=Hn("Date"),Gle=Hn("File"),Zle=Hn("Blob"),Xle=Hn("FileList"),Yle=e=>Um(e)&&en(e.pipe),Jle=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||en(e.append)&&((t=Lm(e))==="formdata"||t==="object"&&en(e.toString)&&e.toString()==="[object FormData]"))},ece=Hn("URLSearchParams"),[tce,rce,nce,ace]=["ReadableStream","Request","Response","Headers"].map(Hn),oce=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pd(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Rl(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let l;for(n=0;n<i;n++)l=o[n],t.call(null,e[l],l,e)}}function pI(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const ai=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,hI=e=>!zu(e)&&e!==ai;function Zv(){const{caseless:e}=hI(this)&&this||{},t={},r=(n,a)=>{const o=e&&pI(t,a)||a;bf(t[o])&&bf(n)?t[o]=Zv(t[o],n):bf(n)?t[o]=Zv({},n):Rl(n)?t[o]=n.slice():t[o]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&pd(arguments[n],r);return t}const ice=(e,t,r,{allOwnKeys:n}={})=>(pd(t,(a,o)=>{r&&en(a)?e[o]=uI(a,r):e[o]=a},{allOwnKeys:n}),e),sce=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),lce=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},cce=(e,t,r,n)=>{let a,o,i;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)i=a[o],(!n||n(i,e,t))&&!l[i]&&(t[i]=e[i],l[i]=!0);e=r!==!1&&$w(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},uce=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},dce=e=>{if(!e)return null;if(Rl(e))return e;let t=e.length;if(!fI(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},fce=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&$w(Uint8Array)),pce=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=n.next())&&!a.done;){const o=a.value;t.call(e,o[0],o[1])}},hce=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},mce=Hn("HTMLFormElement"),gce=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),$P=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),yce=Hn("RegExp"),mI=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};pd(r,(a,o)=>{let i;(i=t(a,o,e))!==!1&&(n[o]=i||a)}),Object.defineProperties(e,n)},vce=e=>{mI(e,(t,r)=>{if(en(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(en(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},xce=(e,t)=>{const r={},n=a=>{a.forEach(o=>{r[o]=!0})};return Rl(e)?n(e):n(String(e).split(t)),r},bce=()=>{},wce=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,oy="abcdefghijklmnopqrstuvwxyz",RP="0123456789",gI={DIGIT:RP,ALPHA:oy,ALPHA_DIGIT:oy+oy.toUpperCase()+RP},Sce=(e=16,t=gI.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function jce(e){return!!(e&&en(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Nce=e=>{const t=new Array(10),r=(n,a)=>{if(Um(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const o=Rl(n)?[]:{};return pd(n,(i,l)=>{const c=r(i,a+1);!zu(c)&&(o[l]=c)}),t[a]=void 0,o}}return n};return r(e,0)},kce=Hn("AsyncFunction"),Pce=e=>e&&(Um(e)||en(e))&&en(e.then)&&en(e.catch),yI=((e,t)=>e?setImmediate:t?((r,n)=>(ai.addEventListener("message",({source:a,data:o})=>{a===ai&&o===r&&n.length&&n.shift()()},!1),a=>{n.push(a),ai.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",en(ai.postMessage)),Ece=typeof queueMicrotask<"u"?queueMicrotask.bind(ai):typeof process<"u"&&process.nextTick||yI,le={isArray:Rl,isArrayBuffer:dI,isBuffer:Hle,isFormData:Jle,isArrayBufferView:Vle,isString:Wle,isNumber:fI,isBoolean:Qle,isObject:Um,isPlainObject:bf,isReadableStream:tce,isRequest:rce,isResponse:nce,isHeaders:ace,isUndefined:zu,isDate:Kle,isFile:Gle,isBlob:Zle,isRegExp:yce,isFunction:en,isStream:Yle,isURLSearchParams:ece,isTypedArray:fce,isFileList:Xle,forEach:pd,merge:Zv,extend:ice,trim:oce,stripBOM:sce,inherits:lce,toFlatObject:cce,kindOf:Lm,kindOfTest:Hn,endsWith:uce,toArray:dce,forEachEntry:pce,matchAll:hce,isHTMLForm:mce,hasOwnProperty:$P,hasOwnProp:$P,reduceDescriptors:mI,freezeMethods:vce,toObjectSet:xce,toCamelCase:gce,noop:bce,toFiniteNumber:wce,findKey:pI,global:ai,isContextDefined:hI,ALPHABET:gI,generateString:Sce,isSpecCompliantForm:jce,toJSONObject:Nce,isAsyncFn:kce,isThenable:Pce,setImmediate:yI,asap:Ece};function Ke(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}le.inherits(Ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.status}}});const vI=Ke.prototype,xI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xI[e]={value:e}});Object.defineProperties(Ke,xI);Object.defineProperty(vI,"isAxiosError",{value:!0});Ke.from=(e,t,r,n,a,o)=>{const i=Object.create(vI);return le.toFlatObject(e,i,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Ke.call(i,e.message,t,r,n,a),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const Cce=null;function Xv(e){return le.isPlainObject(e)||le.isArray(e)}function bI(e){return le.endsWith(e,"[]")?e.slice(0,-2):e}function DP(e,t,r){return e?e.concat(t).map(function(a,o){return a=bI(a),!r&&o?"["+a+"]":a}).join(r?".":""):t}function Ace(e){return le.isArray(e)&&!e.some(Xv)}const Tce=le.toFlatObject(le,{},null,function(t){return/^is[A-Z]/.test(t)});function Bm(e,t,r){if(!le.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=le.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,x){return!le.isUndefined(x[m])});const n=r.metaTokens,a=r.visitor||d,o=r.dots,i=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(t);if(!le.isFunction(a))throw new TypeError("visitor must be a function");function u(y){if(y===null)return"";if(le.isDate(y))return y.toISOString();if(!c&&le.isBlob(y))throw new Ke("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(y)||le.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,m,x){let w=y;if(y&&!x&&typeof y=="object"){if(le.endsWith(m,"{}"))m=n?m:m.slice(0,-2),y=JSON.stringify(y);else if(le.isArray(y)&&Ace(y)||(le.isFileList(y)||le.endsWith(m,"[]"))&&(w=le.toArray(y)))return m=bI(m),w.forEach(function(b,j){!(le.isUndefined(b)||b===null)&&t.append(i===!0?DP([m],j,o):i===null?m:m+"[]",u(b))}),!1}return Xv(y)?!0:(t.append(DP(x,m,o),u(y)),!1)}const f=[],p=Object.assign(Tce,{defaultVisitor:d,convertValue:u,isVisitable:Xv});function h(y,m){if(!le.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(y),le.forEach(y,function(w,v){(!(le.isUndefined(w)||w===null)&&a.call(t,w,le.isString(v)?v.trim():v,m,p))===!0&&h(w,m?m.concat(v):[v])}),f.pop()}}if(!le.isObject(e))throw new TypeError("data must be an object");return h(e),t}function MP(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Rw(e,t){this._pairs=[],e&&Bm(e,this,t)}const wI=Rw.prototype;wI.append=function(t,r){this._pairs.push([t,r])};wI.toString=function(t){const r=t?function(n){return t.call(this,n,MP)}:MP;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Oce(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function SI(e,t,r){if(!t)return e;const n=r&&r.encode||Oce;le.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let o;if(a?o=a(t,r):o=le.isURLSearchParams(t)?t.toString():new Rw(t,r).toString(n),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class LP{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){le.forEach(this.handlers,function(n){n!==null&&t(n)})}}const jI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_ce=typeof URLSearchParams<"u"?URLSearchParams:Rw,Ice=typeof FormData<"u"?FormData:null,$ce=typeof Blob<"u"?Blob:null,Rce={isBrowser:!0,classes:{URLSearchParams:_ce,FormData:Ice,Blob:$ce},protocols:["http","https","file","blob","url","data"]},Dw=typeof window<"u"&&typeof document<"u",Yv=typeof navigator=="object"&&navigator||void 0,Dce=Dw&&(!Yv||["ReactNative","NativeScript","NS"].indexOf(Yv.product)<0),Mce=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Lce=Dw&&window.location.href||"http://localhost",Fce=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dw,hasStandardBrowserEnv:Dce,hasStandardBrowserWebWorkerEnv:Mce,navigator:Yv,origin:Lce},Symbol.toStringTag,{value:"Module"})),yr={...Fce,...Rce};function Uce(e,t){return Bm(e,new yr.classes.URLSearchParams,Object.assign({visitor:function(r,n,a,o){return yr.isNode&&le.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function Bce(e){return le.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function zce(e){const t={},r=Object.keys(e);let n;const a=r.length;let o;for(n=0;n<a;n++)o=r[n],t[o]=e[o];return t}function NI(e){function t(r,n,a,o){let i=r[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=r.length;return i=!i&&le.isArray(a)?a.length:i,c?(le.hasOwnProp(a,i)?a[i]=[a[i],n]:a[i]=n,!l):((!a[i]||!le.isObject(a[i]))&&(a[i]=[]),t(r,n,a[i],o)&&le.isArray(a[i])&&(a[i]=zce(a[i])),!l)}if(le.isFormData(e)&&le.isFunction(e.entries)){const r={};return le.forEachEntry(e,(n,a)=>{t(Bce(n),a,r,0)}),r}return null}function qce(e,t,r){if(le.isString(e))try{return(t||JSON.parse)(e),le.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const hd={transitional:jI,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,o=le.isObject(t);if(o&&le.isHTMLForm(t)&&(t=new FormData(t)),le.isFormData(t))return a?JSON.stringify(NI(t)):t;if(le.isArrayBuffer(t)||le.isBuffer(t)||le.isStream(t)||le.isFile(t)||le.isBlob(t)||le.isReadableStream(t))return t;if(le.isArrayBufferView(t))return t.buffer;if(le.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Uce(t,this.formSerializer).toString();if((l=le.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Bm(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||a?(r.setContentType("application/json",!1),qce(t)):t}],transformResponse:[function(t){const r=this.transitional||hd.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(le.isResponse(t)||le.isReadableStream(t))return t;if(t&&le.isString(t)&&(n&&!this.responseType||a)){const i=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(i)throw l.name==="SyntaxError"?Ke.from(l,Ke.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yr.classes.FormData,Blob:yr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],e=>{hd.headers[e]={}});const Hce=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vce=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(i){a=i.indexOf(":"),r=i.substring(0,a).trim().toLowerCase(),n=i.substring(a+1).trim(),!(!r||t[r]&&Hce[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},FP=Symbol("internals");function dc(e){return e&&String(e).trim().toLowerCase()}function wf(e){return e===!1||e==null?e:le.isArray(e)?e.map(wf):String(e)}function Wce(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Qce=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function iy(e,t,r,n,a){if(le.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!le.isString(t)){if(le.isString(n))return t.indexOf(n)!==-1;if(le.isRegExp(n))return n.test(t)}}function Kce(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Gce(e,t){const r=le.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,o,i){return this[n].call(this,t,a,o,i)},configurable:!0})})}class Mr{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function o(l,c,u){const d=dc(c);if(!d)throw new Error("header name must be a non-empty string");const f=le.findKey(a,d);(!f||a[f]===void 0||u===!0||u===void 0&&a[f]!==!1)&&(a[f||c]=wf(l))}const i=(l,c)=>le.forEach(l,(u,d)=>o(u,d,c));if(le.isPlainObject(t)||t instanceof this.constructor)i(t,r);else if(le.isString(t)&&(t=t.trim())&&!Qce(t))i(Vce(t),r);else if(le.isHeaders(t))for(const[l,c]of t.entries())o(c,l,n);else t!=null&&o(r,t,n);return this}get(t,r){if(t=dc(t),t){const n=le.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return Wce(a);if(le.isFunction(r))return r.call(this,a,n);if(le.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=dc(t),t){const n=le.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||iy(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function o(i){if(i=dc(i),i){const l=le.findKey(n,i);l&&(!r||iy(n,n[l],l,r))&&(delete n[l],a=!0)}}return le.isArray(t)?t.forEach(o):o(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const o=r[n];(!t||iy(this,this[o],o,t,!0))&&(delete this[o],a=!0)}return a}normalize(t){const r=this,n={};return le.forEach(this,(a,o)=>{const i=le.findKey(n,o);if(i){r[i]=wf(a),delete r[o];return}const l=t?Kce(o):String(o).trim();l!==o&&delete r[o],r[l]=wf(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return le.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&le.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[FP]=this[FP]={accessors:{}}).accessors,a=this.prototype;function o(i){const l=dc(i);n[l]||(Gce(a,i),n[l]=!0)}return le.isArray(t)?t.forEach(o):o(t),this}}Mr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(Mr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});le.freezeMethods(Mr);function sy(e,t){const r=this||hd,n=t||r,a=Mr.from(n.headers);let o=n.data;return le.forEach(e,function(l){o=l.call(r,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function kI(e){return!!(e&&e.__CANCEL__)}function Dl(e,t,r){Ke.call(this,e??"canceled",Ke.ERR_CANCELED,t,r),this.name="CanceledError"}le.inherits(Dl,Ke,{__CANCEL__:!0});function PI(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Ke("Request failed with status code "+r.status,[Ke.ERR_BAD_REQUEST,Ke.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Zce(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Xce(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,o=0,i;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=n[o];i||(i=u),r[a]=c,n[a]=u;let f=o,p=0;for(;f!==a;)p+=r[f++],f=f%e;if(a=(a+1)%e,a===o&&(o=(o+1)%e),u-i<t)return;const h=d&&u-d;return h?Math.round(p*1e3/h):void 0}}function Yce(e,t){let r=0,n=1e3/t,a,o;const i=(u,d=Date.now())=>{r=d,a=null,o&&(clearTimeout(o),o=null),e.apply(null,u)};return[(...u)=>{const d=Date.now(),f=d-r;f>=n?i(u,d):(a=u,o||(o=setTimeout(()=>{o=null,i(a)},n-f)))},()=>a&&i(a)]}const dh=(e,t,r=3)=>{let n=0;const a=Xce(50,250);return Yce(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-n,u=a(c),d=i<=l;n=i;const f={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-i)/u:void 0,event:o,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},r)},UP=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},BP=e=>(...t)=>le.asap(()=>e(...t)),Jce=yr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,yr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(yr.origin),yr.navigator&&/(msie|trident)/i.test(yr.navigator.userAgent)):()=>!0,eue=yr.hasStandardBrowserEnv?{write(e,t,r,n,a,o){const i=[e+"="+encodeURIComponent(t)];le.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),le.isString(n)&&i.push("path="+n),le.isString(a)&&i.push("domain="+a),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function tue(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function rue(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function EI(e,t){return e&&!tue(t)?rue(e,t):t}const zP=e=>e instanceof Mr?{...e}:e;function Si(e,t){t=t||{};const r={};function n(u,d,f,p){return le.isPlainObject(u)&&le.isPlainObject(d)?le.merge.call({caseless:p},u,d):le.isPlainObject(d)?le.merge({},d):le.isArray(d)?d.slice():d}function a(u,d,f,p){if(le.isUndefined(d)){if(!le.isUndefined(u))return n(void 0,u,f,p)}else return n(u,d,f,p)}function o(u,d){if(!le.isUndefined(d))return n(void 0,d)}function i(u,d){if(le.isUndefined(d)){if(!le.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,f){if(f in t)return n(u,d);if(f in e)return n(void 0,u)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(u,d,f)=>a(zP(u),zP(d),f,!0)};return le.forEach(Object.keys(Object.assign({},e,t)),function(d){const f=c[d]||a,p=f(e[d],t[d],d);le.isUndefined(p)&&f!==l||(r[d]=p)}),r}const CI=e=>{const t=Si({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=t;t.headers=i=Mr.from(i),t.url=SI(EI(t.baseURL,t.url),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(le.isFormData(r)){if(yr.hasStandardBrowserEnv||yr.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...d].join("; "))}}if(yr.hasStandardBrowserEnv&&(n&&le.isFunction(n)&&(n=n(t)),n||n!==!1&&Jce(t.url))){const u=a&&o&&eue.read(o);u&&i.set(a,u)}return t},nue=typeof XMLHttpRequest<"u",aue=nue&&function(e){return new Promise(function(r,n){const a=CI(e);let o=a.data;const i=Mr.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,d,f,p,h,y;function m(){h&&h(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let x=new XMLHttpRequest;x.open(a.method.toUpperCase(),a.url,!0),x.timeout=a.timeout;function w(){if(!x)return;const b=Mr.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:b,config:e,request:x};PI(function(N){r(N),m()},function(N){n(N),m()},S),x=null}"onloadend"in x?x.onloadend=w:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(w)},x.onabort=function(){x&&(n(new Ke("Request aborted",Ke.ECONNABORTED,e,x)),x=null)},x.onerror=function(){n(new Ke("Network Error",Ke.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let j=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const S=a.transitional||jI;a.timeoutErrorMessage&&(j=a.timeoutErrorMessage),n(new Ke(j,S.clarifyTimeoutError?Ke.ETIMEDOUT:Ke.ECONNABORTED,e,x)),x=null},o===void 0&&i.setContentType(null),"setRequestHeader"in x&&le.forEach(i.toJSON(),function(j,S){x.setRequestHeader(S,j)}),le.isUndefined(a.withCredentials)||(x.withCredentials=!!a.withCredentials),l&&l!=="json"&&(x.responseType=a.responseType),u&&([p,y]=dh(u,!0),x.addEventListener("progress",p)),c&&x.upload&&([f,h]=dh(c),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",h)),(a.cancelToken||a.signal)&&(d=b=>{x&&(n(!b||b.type?new Dl(null,e,x):b),x.abort(),x=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const v=Zce(a.url);if(v&&yr.protocols.indexOf(v)===-1){n(new Ke("Unsupported protocol "+v+":",Ke.ERR_BAD_REQUEST,e));return}x.send(o||null)})},oue=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const o=function(u){if(!a){a=!0,l();const d=u instanceof Error?u:this.reason;n.abort(d instanceof Ke?d:new Dl(d instanceof Error?d.message:d))}};let i=t&&setTimeout(()=>{i=null,o(new Ke(`timeout ${t} of ms exceeded`,Ke.ETIMEDOUT))},t);const l=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>le.asap(l),c}},iue=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},sue=async function*(e,t){for await(const r of lue(e))yield*iue(r,t)},lue=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},qP=(e,t,r,n)=>{const a=sue(e,t);let o=0,i,l=c=>{i||(i=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await a.next();if(u){l(),c.close();return}let f=d.byteLength;if(r){let p=o+=f;r(p)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},zm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",AI=zm&&typeof ReadableStream=="function",cue=zm&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),TI=(e,...t)=>{try{return!!e(...t)}catch{return!1}},uue=AI&&TI(()=>{let e=!1;const t=new Request(yr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),HP=64*1024,Jv=AI&&TI(()=>le.isReadableStream(new Response("").body)),fh={stream:Jv&&(e=>e.body)};zm&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!fh[t]&&(fh[t]=le.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Ke(`Response type '${t}' is not supported`,Ke.ERR_NOT_SUPPORT,n)})})})(new Response);const due=async e=>{if(e==null)return 0;if(le.isBlob(e))return e.size;if(le.isSpecCompliantForm(e))return(await new Request(yr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(le.isArrayBufferView(e)||le.isArrayBuffer(e))return e.byteLength;if(le.isURLSearchParams(e)&&(e=e+""),le.isString(e))return(await cue(e)).byteLength},fue=async(e,t)=>{const r=le.toFiniteNumber(e.getContentLength());return r??due(t)},pue=zm&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:o,timeout:i,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:p}=CI(e);u=u?(u+"").toLowerCase():"text";let h=oue([a,o&&o.toAbortSignal()],i),y;const m=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let x;try{if(c&&uue&&r!=="get"&&r!=="head"&&(x=await fue(d,n))!==0){let S=new Request(t,{method:"POST",body:n,duplex:"half"}),k;if(le.isFormData(n)&&(k=S.headers.get("content-type"))&&d.setContentType(k),S.body){const[N,P]=UP(x,dh(BP(c)));n=qP(S.body,HP,N,P)}}le.isString(f)||(f=f?"include":"omit");const w="credentials"in Request.prototype;y=new Request(t,{...p,signal:h,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:w?f:void 0});let v=await fetch(y);const b=Jv&&(u==="stream"||u==="response");if(Jv&&(l||b&&m)){const S={};["status","statusText","headers"].forEach(C=>{S[C]=v[C]});const k=le.toFiniteNumber(v.headers.get("content-length")),[N,P]=l&&UP(k,dh(BP(l),!0))||[];v=new Response(qP(v.body,HP,N,()=>{P&&P(),m&&m()}),S)}u=u||"text";let j=await fh[le.findKey(fh,u)||"text"](v,e);return!b&&m&&m(),await new Promise((S,k)=>{PI(S,k,{data:j,headers:Mr.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:y})})}catch(w){throw m&&m(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new Ke("Network Error",Ke.ERR_NETWORK,e,y),{cause:w.cause||w}):Ke.from(w,w&&w.code,e,y)}}),ex={http:Cce,xhr:aue,fetch:pue};le.forEach(ex,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const VP=e=>`- ${e}`,hue=e=>le.isFunction(e)||e===null||e===!1,OI={getAdapter:e=>{e=le.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let o=0;o<t;o++){r=e[o];let i;if(n=r,!hue(r)&&(n=ex[(i=String(r)).toLowerCase()],n===void 0))throw new Ke(`Unknown adapter '${i}'`);if(n)break;a[i||"#"+o]=n}if(!n){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=t?o.length>1?`since :
`+o.map(VP).join(`
`):" "+VP(o[0]):"as no adapter specified";throw new Ke("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:ex};function ly(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Dl(null,e)}function WP(e){return ly(e),e.headers=Mr.from(e.headers),e.data=sy.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),OI.getAdapter(e.adapter||hd.adapter)(e).then(function(n){return ly(e),n.data=sy.call(e,e.transformResponse,n),n.headers=Mr.from(n.headers),n},function(n){return kI(n)||(ly(e),n&&n.response&&(n.response.data=sy.call(e,e.transformResponse,n.response),n.response.headers=Mr.from(n.response.headers))),Promise.reject(n)})}const _I="1.7.9",qm={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{qm[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const QP={};qm.transitional=function(t,r,n){function a(o,i){return"[Axios v"+_I+"] Transitional option '"+o+"'"+i+(n?". "+n:"")}return(o,i,l)=>{if(t===!1)throw new Ke(a(i," has been removed"+(r?" in "+r:"")),Ke.ERR_DEPRECATED);return r&&!QP[i]&&(QP[i]=!0,console.warn(a(i," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,i,l):!0}};qm.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function mue(e,t,r){if(typeof e!="object")throw new Ke("options must be an object",Ke.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const o=n[a],i=t[o];if(i){const l=e[o],c=l===void 0||i(l,o,e);if(c!==!0)throw new Ke("option "+o+" must be "+c,Ke.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ke("Unknown option "+o,Ke.ERR_BAD_OPTION)}}const Sf={assertOptions:mue,validators:qm},Kn=Sf.validators;class ui{constructor(t){this.defaults=t,this.interceptors={request:new LP,response:new LP}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Si(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:o}=r;n!==void 0&&Sf.assertOptions(n,{silentJSONParsing:Kn.transitional(Kn.boolean),forcedJSONParsing:Kn.transitional(Kn.boolean),clarifyTimeoutError:Kn.transitional(Kn.boolean)},!1),a!=null&&(le.isFunction(a)?r.paramsSerializer={serialize:a}:Sf.assertOptions(a,{encode:Kn.function,serialize:Kn.function},!0)),Sf.assertOptions(r,{baseUrl:Kn.spelling("baseURL"),withXsrfToken:Kn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&le.merge(o.common,o[r.method]);o&&le.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),r.headers=Mr.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(c=c&&m.synchronous,l.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let d,f=0,p;if(!c){const y=[WP.bind(this),void 0];for(y.unshift.apply(y,l),y.push.apply(y,u),p=y.length,d=Promise.resolve(r);f<p;)d=d.then(y[f++],y[f++]);return d}p=l.length;let h=r;for(f=0;f<p;){const y=l[f++],m=l[f++];try{h=y(h)}catch(x){m.call(this,x);break}}try{d=WP.call(this,h)}catch(y){return Promise.reject(y)}for(f=0,p=u.length;f<p;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=Si(this.defaults,t);const r=EI(t.baseURL,t.url);return SI(r,t.params,t.paramsSerializer)}}le.forEach(["delete","get","head","options"],function(t){ui.prototype[t]=function(r,n){return this.request(Si(n||{},{method:t,url:r,data:(n||{}).data}))}});le.forEach(["post","put","patch"],function(t){function r(n){return function(o,i,l){return this.request(Si(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}ui.prototype[t]=r(),ui.prototype[t+"Form"]=r(!0)});class Mw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(a=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](a);n._listeners=null}),this.promise.then=a=>{let o;const i=new Promise(l=>{n.subscribe(l),o=l}).then(a);return i.cancel=function(){n.unsubscribe(o)},i},t(function(o,i,l){n.reason||(n.reason=new Dl(o,i,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Mw(function(a){t=a}),cancel:t}}}function gue(e){return function(r){return e.apply(null,r)}}function yue(e){return le.isObject(e)&&e.isAxiosError===!0}const tx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tx).forEach(([e,t])=>{tx[t]=e});function II(e){const t=new ui(e),r=uI(ui.prototype.request,t);return le.extend(r,ui.prototype,t,{allOwnKeys:!0}),le.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return II(Si(e,a))},r}const Vt=II(hd);Vt.Axios=ui;Vt.CanceledError=Dl;Vt.CancelToken=Mw;Vt.isCancel=kI;Vt.VERSION=_I;Vt.toFormData=Bm;Vt.AxiosError=Ke;Vt.Cancel=Vt.CanceledError;Vt.all=function(t){return Promise.all(t)};Vt.spread=gue;Vt.isAxiosError=yue;Vt.mergeConfig=Si;Vt.AxiosHeaders=Mr;Vt.formToJSON=e=>NI(le.isHTMLForm(e)?new FormData(e):e);Vt.getAdapter=OI.getAdapter;Vt.HttpStatusCode=tx;Vt.default=Vt;const Ja=Vt.create({baseURL:"/api",withCredentials:!0,headers:{"Content-Type":"application/json"}}),We={displayProduct:async e=>{var t,r;try{console.log("VFD API: Sending product data to backend:",e);const n=await Ja.post("/vfd/display",e);return console.log("VFD API: Response received:",n.data),n.data}catch(n){if(console.error("VFD API: Error calling VFD display API:",n),n&&typeof n=="object"&&"response"in n){const a=n;console.error("VFD API: Response status:",(t=a.response)==null?void 0:t.status),console.error("VFD API: Response data:",(r=a.response)==null?void 0:r.data)}return{success:!1,message:"Failed to display product on VFD",error:n instanceof Error?n.message:"Unknown error"}}},displayWelcome:async()=>{var e,t;try{console.log("VFD API: Sending welcome message to backend");const r=await Ja.post("/vfd/welcome");return console.log("VFD API: Welcome response received:",r.data),r.data}catch(r){if(console.error("VFD API: Error calling VFD welcome API:",r),r&&typeof r=="object"&&"response"in r){const n=r;console.error("VFD API: Response status:",(e=n.response)==null?void 0:e.status),console.error("VFD API: Response data:",(t=n.response)==null?void 0:t.data)}return{success:!1,message:"Failed to display welcome message on VFD",error:r instanceof Error?r.message:"Unknown error"}}},displayTotal:async e=>{try{return(await Ja.post("/vfd/total",{total:e})).data}catch(t){return console.error("Error calling VFD total API:",t),{success:!1,message:"Failed to display total on VFD",error:t instanceof Error?t.message:"Unknown error"}}},clearDisplay:async()=>{try{return(await Ja.post("/vfd/clear")).data}catch(e){return console.error("Error calling VFD clear API:",e),{success:!1,message:"Failed to clear VFD display",error:e instanceof Error?e.message:"Unknown error"}}},getStatus:async()=>{try{return(await Ja.get("/vfd/status")).data}catch(e){return console.error("Error calling VFD status API:",e),{success:!1,message:"Failed to get VFD status",error:e instanceof Error?e.message:"Unknown error"}}},reconnect:async()=>{try{return(await Ja.post("/vfd/reconnect")).data}catch(e){return console.error("Error calling VFD reconnect API:",e),{success:!1,message:"Failed to reconnect VFD",error:e instanceof Error?e.message:"Unknown error"}}}},vue=()=>{const{currentUser:e}=Ai(),[t,r]=g.useState([]),[n,a]=g.useState({currentPage:1,totalPages:1,totalCount:0,hasNextPage:!1,hasPrevPage:!1}),[o,i]=g.useState(!0),[l,c]=g.useState(!1),[u,d]=g.useState(""),[f,p]=g.useState(""),[h,y]=g.useState(""),[m,x]=g.useState(""),[w,v]=g.useState([]),[b,j]=g.useState(null),[S,k]=g.useState(""),[N,P]=g.useState(1),[C]=g.useState(10),[E,_]=g.useState(!1),[L,U]=g.useState(!1),D=g.useRef(null),I=yt();g.useEffect(()=>{u!==f&&c(!0);const F=setTimeout(()=>{f!==u&&(p(u),P(1))},500);return()=>clearTimeout(F)},[u,f]),g.useEffect(()=>{(async()=>{try{const H=await me("/api/users");if(H.ok){const X=await H.json();X.data&&Array.isArray(X.data.users)?v(X.data.users):Array.isArray(X)?v(X):(console.error("Unexpected user data format"),v([]))}else H.status===401?I("/login"):(console.error("Failed to fetch users"),v([]))}catch(H){console.error("Error fetching users:",H),v([])}})()},[I]),g.useEffect(()=>{(async()=>{try{const H=await We.getStatus();H.success&&H.status&&(_(H.status.connected),H.status.connected&&await We.displayWelcome())}catch(H){console.error("Error checking VFD status:",H),_(!1)}})()},[]),g.useEffect(()=>{const F=new AbortController,H=async()=>{i(!0);try{const se=new URLSearchParams({page:N.toString(),limit:C.toString()});f&&f.trim()!==""&&se.append("search",f.trim()),h&&se.append("startDate",h),m&&se.append("endDate",m),b&&se.append("userId",b.id.toString());const G=await me(`/api/sales?${se.toString()}`,{signal:F.signal});if(G.ok){const oe=await G.json();r(oe.sales),a(oe.pagination)}else if(G.status===401)I("/login");else try{const oe=await G.json();console.error("Failed to fetch sales:",oe)}catch{console.error("Failed to fetch sales:",G.statusText)}}catch(se){se instanceof Error&&se.name!=="AbortError"&&console.error("Error fetching sales:",se)}finally{F.signal.aborted||(i(!1),c(!1))}},X=setTimeout(()=>{H()},100);return()=>{clearTimeout(X),F.abort()}},[I,N,C,f,h,m,b]);const A=g.useCallback(async F=>{if(d(F),setTimeout(()=>{D.current&&D.current.focus()},0),E&&F.trim())try{await We.displayProduct({productName:`Searching: ${F.slice(0,15)}${F.length>15?"...":""}`,price:0,total:0,quantity:0})}catch(H){console.error("Error displaying search on VFD:",H)}else if(E&&!F.trim())try{await We.displayWelcome()}catch(H){console.error("Error displaying welcome on VFD:",H)}},[E]);g.useEffect(()=>{const H=setTimeout(async()=>{if(E&&!o&&t.length>=0)try{await We.displayProduct({productName:"Sales Found",price:t.length,total:n.totalCount,quantity:n.currentPage})}catch(X){console.error("Error displaying results count on VFD:",X)}},1e3);return()=>clearTimeout(H)},[t.length,n.totalCount,n.currentPage,E,o]);const $=F=>{P(F)},O=g.useCallback(async F=>{try{E&&await We.displayProduct({productName:`Sale #${F.id}`,price:Number(F.totalAmount),total:Number(F.totalAmount),quantity:1})}catch(H){console.error("Error displaying sale on VFD:",H)}},[E]),R=()=>{U(!L)},q=g.useCallback(async()=>{try{(await We.reconnect()).success&&(_(!0),await We.displayWelcome())}catch(F){console.error("Error reconnecting VFD:",F)}},[]),V=()=>s.jsxs("div",{className:"flex items-center justify-between px-6 py-3 bg-white border-t border-gray-200",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.jsx("button",{onClick:()=>$(n.currentPage-1),disabled:!n.hasPrevPage,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),s.jsx("button",{onClick:()=>$(n.currentPage+1),disabled:!n.hasNextPage,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",s.jsx("span",{className:"font-medium",children:(n.currentPage-1)*C+1})," to"," ",s.jsx("span",{className:"font-medium",children:Math.min(n.currentPage*C,n.totalCount)})," ","of ",s.jsx("span",{className:"font-medium",children:n.totalCount})," results"]})}),s.jsx("div",{children:s.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[s.jsxs("button",{onClick:()=>$(n.currentPage-1),disabled:!n.hasPrevPage,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("span",{className:"sr-only",children:"Previous"}),s.jsx(e2,{className:"h-5 w-5","aria-hidden":"true"})]}),Array.from({length:Math.min(5,n.totalPages)},(F,H)=>{let X;return n.totalPages<=5||n.currentPage<=3?X=H+1:n.currentPage>=n.totalPages-2?X=n.totalPages-4+H:X=n.currentPage-2+H,s.jsx("button",{onClick:()=>$(X),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${X===n.currentPage?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:X},X)}),s.jsxs("button",{onClick:()=>$(n.currentPage+1),disabled:!n.hasNextPage,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("span",{className:"sr-only",children:"Next"}),s.jsx(Ps,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]});if(o)return s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});const z=F=>{const H=typeof F=="string"?parseFloat(F):F;return isNaN(H)?"0.00":H.toFixed(2)},J=F=>{const H="px-2 py-1 text-xs font-medium rounded-full";switch(F){case"COMPLETED":return`${H} bg-green-100 text-green-800`;case"REFUNDED":return`${H} bg-red-100 text-red-800`;case"PARTIALLY_REFUNDED":return`${H} bg-yellow-100 text-yellow-800`;case"CANCELLED":return`${H} bg-gray-100 text-gray-800`;case"HELD":return`${H} bg-blue-100 text-blue-800`;default:return`${H} bg-gray-100 text-gray-800`}},W=F=>{const H="px-2 py-1 text-xs font-medium rounded-full";switch(F){case"RETAIL":return`${H} bg-purple-100 text-purple-800`;case"WHOLESALE":return`${H} bg-orange-100 text-orange-800`;default:return`${H} bg-gray-100 text-gray-800`}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Sales"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${E?"bg-green-500":"bg-red-500"}`}),s.jsxs("span",{className:"text-sm text-gray-600",children:["VFD ",E?"Connected":"Disconnected"]}),!E&&s.jsx("button",{onClick:q,className:"text-sm text-blue-500 hover:text-blue-700 underline",children:"Reconnect"})]}),s.jsx("button",{onClick:R,className:"text-gray-400 hover:text-gray-600",children:s.jsx(f5,{className:"w-5 h-5"})})]})]}),L&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-4 border-l-4 border-blue-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"VFD Display Status"}),s.jsx("button",{onClick:R,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${E?"bg-green-500":"bg-red-500"}`}),s.jsxs("span",{className:"text-sm font-medium",children:["Status: ",E?"Connected":"Disconnected"]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:q,disabled:E,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reconnect"}),s.jsx("button",{onClick:async()=>{try{await We.clearDisplay()}catch(F){console.error("Error clearing VFD:",F)}},disabled:!E,className:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Display"}),s.jsx("button",{onClick:async()=>{try{await We.displayWelcome()}catch(F){console.error("Error displaying welcome:",F)}},disabled:!E,className:"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Show Welcome"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Click on a sale row to display its information on the VFD."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l?s.jsx(mr,{className:"h-5 w-5 text-gray-400 animate-spin"}):s.jsx(zn,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{ref:D,type:"text",placeholder:"Search by sale ID or customer name...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:F=>A(F.target.value)})]}),s.jsx("div",{className:"relative w-72",children:s.jsxs(Gi,{as:"div",value:b,onChange:j,nullable:!0,children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(v0,{className:"h-5 w-5 text-gray-400"})}),s.jsx(Gi.Input,{className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",onChange:F=>k(F.target.value),displayValue:F=>(F==null?void 0:F.name)||"",placeholder:"Filter by salesperson..."}),s.jsx(Gi.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:s.jsx(i5,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),s.jsxs(Gi.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:[s.jsx(Gi.Option,{as:"div",value:null,className:({active:F})=>`relative cursor-default select-none py-2 pl-3 pr-9 ${F?"bg-blue-600 text-white":"text-gray-900"}`,children:"All Salespersons"}),w.filter(F=>F.name.toLowerCase().includes(S.toLowerCase())).map(F=>s.jsx(Gi.Option,{as:"div",value:F,className:({active:H})=>`relative cursor-default select-none py-2 pl-3 pr-9 ${H?"bg-blue-600 text-white":"text-gray-900"}`,children:F.name},F.id))]})]})})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",id:"start-date",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:h,onChange:F=>y(F.target.value)})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",id:"end-date",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:m,onChange:F=>x(F.target.value)})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salesperson"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Refund Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?s.jsx("tr",{children:s.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:[s.jsx(Vh,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sales found"}),s.jsx("p",{className:"text-sm text-gray-500",children:u||h||m||b?"Try adjusting your filters to see more results.":"No sales have been recorded yet."})]})}):t.map(F=>{var H;return s.jsxs("tr",{onClick:()=>O(F),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["#",F.id]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F.customer?F.customer.name:"Walk-in Customer"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((H=F.user)==null?void 0:H.name)||"Unknown"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",z(F.totalAmount)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(F.createdAt).toLocaleString()}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",z(F.refundAmount)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:J(F.status),children:F.status.replace("_"," ")})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:W(F.saleType),children:F.saleType})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-4",children:[s.jsxs("button",{onClick:async X=>{X.stopPropagation(),E&&await We.displayProduct({productName:`Viewing Sale #${F.id}`,price:Number(F.totalAmount),total:Number(F.totalAmount),quantity:1}),I(`/sales/${F.id}`)},className:"text-blue-500 hover:text-blue-700 inline-flex items-center",children:[s.jsx(So,{className:"w-4 h-4 mr-1"}),"View"]}),s.jsxs("button",{onClick:async X=>{X.stopPropagation(),E&&await We.displayProduct({productName:`Editing Sale #${F.id}`,price:Number(F.totalAmount),total:Number(F.totalAmount),quantity:1}),I(`/sales/${F.id}/edit`)},className:"text-green-500 hover:text-green-700 inline-flex items-center",children:[s.jsx(Hh,{className:"w-4 h-4 mr-1"}),"Edit"]}),(e==null?void 0:e.role)==="ADMIN"&&s.jsxs("button",{onClick:async X=>{if(X.stopPropagation(),window.confirm("Are you sure you want to delete this sale?"))try{if(E&&await We.displayProduct({productName:`Deleting Sale #${F.id}`,price:0,total:0,quantity:0}),(await me(`/api/sales/${F.id}`,{method:"DELETE"})).ok){const G=new URLSearchParams({page:N.toString(),limit:C.toString()});f&&G.append("search",f),h&&G.append("startDate",h),m&&G.append("endDate",m),b&&G.append("userId",b.id.toString());const oe=await me(`/api/sales?${G.toString()}`);if(oe.ok){const ae=await oe.json();r(ae.sales),a(ae.pagination),E&&await We.displayProduct({productName:`Sale #${F.id} Deleted`,price:0,total:ae.pagination.totalCount,quantity:1})}}else throw new Error("Failed to delete sale")}catch(se){console.error("Error deleting sale:",se),alert("Failed to delete sale. Please try again."),E&&await We.displayProduct({productName:"Delete Failed",price:0,total:0,quantity:0})}},className:"text-red-500 hover:text-red-700 inline-flex items-center",children:[s.jsx(br,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]},F.id)})})]}),n.totalPages>1&&s.jsx(V,{})]})]})},xue=({items:e,totalAmount:t,type:r,customer:n,salesperson:a,paymentMethod:o="CASH",creditPercentage:i=0,baseTotal:l,saleId:c})=>{var m;const[u,d]=g.useState(null),[f,p]=g.useState(!0);if(g.useEffect(()=>{(async()=>{try{const w=await me(`${mn()}/settings/company`);if(w.ok){const v=await w.json();console.log("Fetched settings:",v),d(v)}else console.error("Failed to fetch settings:",w.status)}catch(w){console.error("Error fetching settings:",w)}finally{p(!1)}})()},[]),f)return s.jsx("div",{children:"Loading..."});const h=new Date().toLocaleString("en-US",{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),y=c?c.toString().padStart(7,"0"):"PREVIEW";if(r==="invoice"){const v=[];let b=[...e];for(b.length>0&&(v.push(b.slice(0,18)),b=b.slice(18));b.length>0;)v.push(b.slice(0,21)),b=b.slice(21);const j=v.length,P=(((m=v[v.length-1])==null?void 0:m.length)||0)>(j===1?15:18),C=P?j+1:j;return s.jsxs(s.Fragment,{children:[v.map((E,_)=>s.jsxs("div",{className:"print-invoice bg-white",style:{width:"148mm",height:"210mm",fontFamily:"Arial",position:"relative",padding:"0",margin:"0 auto",boxSizing:"border-box"},children:[_===0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{width:"100%",marginBottom:"1px"},children:[s.jsx("div",{style:{textAlign:"center",borderBottom:"1px solid black",paddingBottom:"1px"},children:s.jsx("h1",{style:{margin:"0",marginBottom:"1px",fontSize:"20px",fontWeight:"bold"},children:(u==null?void 0:u.companyName)||"COMPANY NAME"})}),s.jsx("div",{style:{textAlign:"left",marginTop:"1px"},children:s.jsxs("p",{style:{margin:0,whiteSpace:"nowrap",fontSize:"14px"},children:[u!=null&&u.address?`P.O. Box ${u.address}. `:"",u!=null&&u.phone1?`Tel: ${u.phone1}`:"",u!=null&&u.phone2?`, ${u.phone2}`:"",u!=null&&u.location?` Loc: ${u.location}`:""]})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",marginBottom:"1px",fontSize:"14px"},children:[s.jsx("div",{style:{textAlign:"left"},children:s.jsxs("span",{children:["Receipt: ",y]})}),s.jsx("div",{style:{textAlign:"right"},children:s.jsxs("span",{children:["Customer: ",n?n.name:"WALK-IN CUSTOMER"]})})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",marginBottom:"1px",fontSize:"14px"},children:[s.jsx("div",{style:{textAlign:"left"},children:s.jsxs("span",{children:["Date: ",h]})}),s.jsx("div",{style:{textAlign:"center",fontWeight:"bold"},children:s.jsx("span",{style:{fontSize:"16px"},children:"INVOICE"})}),s.jsx("div",{style:{textAlign:"right"},children:n&&n.phone&&s.jsxs("span",{children:["Phone: ",n.phone]})})]})]}):s.jsx(s.Fragment,{}),s.jsxs("div",{style:{width:"100%",border:"1px solid black"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"55% 15% 15% 15%",borderBottom:"1px solid black"},children:[s.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",fontWeight:"bold",textAlign:"center",fontSize:"14px"},children:"Name"}),s.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",textAlign:"center",fontWeight:"bold",fontSize:"14px"},children:"Quantity"}),s.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",textAlign:"center",fontWeight:"bold",fontSize:"14px"},children:"Price"}),s.jsx("div",{style:{padding:"2px 6px",textAlign:"center",fontWeight:"bold",fontSize:"14px"},children:"Amount"})]}),E.map((L,U)=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"55% 15% 15% 15%",borderBottom:U===E.length-1?"none":"1px solid black",minHeight:"16px"},children:[s.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",fontSize:"13px"},children:L.name}),s.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",textAlign:"center",fontSize:"13px"},children:L.quantity}),s.jsx("div",{style:{padding:"2px 6px",borderRight:"1px solid black",textAlign:"center",fontSize:"13px"},children:L.price.toFixed(2)}),s.jsx("div",{style:{padding:"2px 6px",textAlign:"center",fontSize:"13px"},children:L.total.toFixed(2)})]},L.id))]}),_===v.length-1&&!P&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{borderTop:"1px solid black",paddingTop:"4px",textAlign:"right",marginBottom:"8px"},children:s.jsxs("span",{style:{fontWeight:"bold",fontSize:"16px"},children:["C: ",i," Total: GH",t.toFixed(2),i&&i>0&&s.jsx("span",{style:{marginLeft:"8px",fontSize:"14px"}})]})}),s.jsxs("div",{style:{fontSize:"14px",marginBottom:"4px",marginTop:"8px"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:0},children:"Sales Person:"}),s.jsx("p",{style:{margin:0},children:(a==null?void 0:a.name)||"Unknown"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px",marginTop:"16px",marginBottom:"8px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"bold",margin:0,whiteSpace:"nowrap"},children:"Served by:"}),s.jsx("div",{style:{borderBottom:"1px dotted black",height:"20px",flex:1}})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"bold",margin:0,whiteSpace:"nowrap"},children:"Checked by:"}),s.jsx("div",{style:{borderBottom:"1px dotted black",height:"20px",flex:1}})]})]}),s.jsx("div",{style:{textAlign:"center",fontSize:"14px",margin:"8px 0",fontWeight:"bold"},children:(u==null?void 0:u.mobileMoneyNumber)&&s.jsxs("p",{style:{margin:0},children:["Please pay through Mobile Money ",u.mobileMoneyNumber]})})]}),s.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"4px",right:"4px",fontSize:"12px"},children:[_>0&&s.jsx(s.Fragment,{children:s.jsx("div",{style:{textAlign:"center",borderBottom:"1px solid black",paddingBottom:"2px",marginBottom:"4px"},children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"30% 40% 30%",fontSize:"11px",gap:"4px"},children:[s.jsx("div",{style:{textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(u==null?void 0:u.companyName)||"COMPANY NAME"}),s.jsxs("div",{style:{textAlign:"center"},children:["Receipt: ",y]}),s.jsxs("div",{style:{textAlign:"right",display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[s.jsx("span",{style:{whiteSpace:"nowrap",marginRight:"4px"},children:"Customer:"}),s.jsx("span",{style:{whiteSpace:"nowrap"},children:n?n.name:"WALK-IN CUSTOMER"})]})]})})}),s.jsx("div",{style:{textAlign:"center",marginTop:"2px"},children:s.jsxs("span",{children:["Page ",_+1," of ",C]})})]})]},_)),P&&s.jsxs("div",{className:"print-invoice bg-white",style:{width:"148mm",height:"210mm",fontFamily:"Arial",position:"relative",padding:"0",margin:"0 auto",boxSizing:"border-box"},children:[s.jsx("div",{style:{borderTop:"1px solid black",paddingTop:"4px",textAlign:"right",marginBottom:"8px",marginTop:"20px"},children:s.jsxs("span",{style:{fontWeight:"bold",fontSize:"16px"},children:["Total: GH",t.toFixed(2),i&&i>0&&s.jsxs("span",{style:{marginLeft:"8px",fontSize:"14px"},children:["C: ",i]})]})}),s.jsxs("div",{style:{fontSize:"14px",marginBottom:"4px",marginTop:"8px"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:0},children:"Sales Person:"}),s.jsx("p",{style:{margin:0},children:(a==null?void 0:a.name)||"Unknown"})]}),s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px",marginTop:"16px",marginBottom:"8px"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"bold",margin:0,whiteSpace:"nowrap"},children:"Served by:"}),s.jsx("div",{style:{borderBottom:"1px dotted black",height:"20px",flex:1}})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("p",{style:{fontSize:"14px",fontWeight:"bold",margin:0,whiteSpace:"nowrap"},children:"Checked by:"}),s.jsx("div",{style:{borderBottom:"1px dotted black",height:"20px",flex:1}})]})]}),s.jsx("div",{style:{textAlign:"center",fontSize:"14px",margin:"8px 0",fontWeight:"bold"},children:(u==null?void 0:u.mobileMoneyNumber)&&s.jsxs("p",{style:{margin:0},children:["Please pay through Mobile Money ",u.mobileMoneyNumber]})}),s.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"4px",right:"4px",fontSize:"12px"},children:[s.jsx("div",{style:{textAlign:"center",borderBottom:"1px solid black",paddingBottom:"2px",marginBottom:"4px"},children:s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"30% 40% 30%",fontSize:"11px",gap:"4px"},children:[s.jsx("div",{style:{textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(u==null?void 0:u.companyName)||"COMPANY NAME"}),s.jsxs("div",{style:{textAlign:"center"},children:["Receipt: ",y]}),s.jsxs("div",{style:{textAlign:"right",display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[s.jsx("span",{style:{whiteSpace:"nowrap",marginRight:"4px"},children:"Customer:"}),s.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:"0"},children:n?n.name:"WALK-IN CUSTOMER"})]})]})}),s.jsx("div",{style:{textAlign:"center",marginTop:"2px"},children:s.jsxs("span",{children:["Page ",C," of ",C]})})]})]},"total-page")]})}return r==="receipt"?s.jsxs("div",{className:"print-receipt bg-white",style:{width:"80mm",fontFamily:"Arial",fontSize:"16px",lineHeight:"1.3",padding:"1mm 2mm",margin:"0 auto",boxSizing:"border-box",overflowWrap:"break-word",wordWrap:"break-word"},children:[s.jsxs("div",{className:"w-full text-center",style:{marginBottom:"1px"},children:[s.jsx("div",{style:{borderBottom:"1px solid black",marginBottom:"1px"},children:s.jsx("h1",{className:"text-lg font-bold mb-1",children:(u==null?void 0:u.companyName)||"COMPANY NAME"})}),s.jsxs("p",{className:"text-xs",style:{marginBottom:0},children:[u!=null&&u.address?`P.O. Box ${u.address}. `:"",u!=null&&u.phone1?`Tel: ${u.phone1}`:"",u!=null&&u.phone2?`, ${u.phone2}`:"",u!=null&&u.location?` Loc: ${u.location}`:""]})]}),s.jsxs("div",{className:"grid grid-cols-2 mb-1 text-xs",children:[s.jsx("div",{className:"text-left",children:s.jsxs("span",{children:["Receipt #: ",y]})}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{children:["Customer: ",(n==null?void 0:n.name)||"WALK-IN CUSTOMER"]})})]}),s.jsxs("div",{className:"grid grid-cols-3 mb-2 text-[10px]",children:[s.jsx("div",{className:"text-left",children:s.jsxs("span",{children:["Date: ",h]})}),s.jsx("div",{className:"text-center font-bold",children:s.jsx("span",{children:"RECEIPT"})}),s.jsx("div",{className:"text-right",children:(n==null?void 0:n.phone)&&s.jsxs("span",{children:["Phone: ",n.phone]})})]}),s.jsxs("div",{style:{width:"100%",border:"1px solid black"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"60% 20% 20%",borderTop:"1px solid black",borderBottom:"1px solid black"},children:[s.jsx("div",{style:{padding:"2px",borderRight:"1px solid black",fontWeight:"bold",fontSize:"13px"},children:"Item"}),s.jsx("div",{style:{padding:"2px",borderRight:"1px solid black",textAlign:"center",fontWeight:"bold",fontSize:"13px"},children:"Qty"}),s.jsx("div",{style:{padding:"2px",textAlign:"center",fontWeight:"bold",fontSize:"13px"},children:"Amount"})]}),e.map(x=>s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"60% 20% 20%",borderBottom:"1px solid black"},children:[s.jsx("div",{style:{padding:"2px",borderRight:"1px solid black",fontSize:"14px"},children:x.name}),s.jsx("div",{style:{padding:"2px",borderRight:"1px solid black",textAlign:"center",fontSize:"13px"},children:x.quantity}),s.jsx("div",{style:{padding:"2px",textAlign:"center",fontSize:"13px"},children:(x.quantity*x.price).toFixed(2)})]},x.id))]}),s.jsx("div",{className:"border-t border-black mt-1 pt-1",style:{display:"flex",justifyContent:"flex-end",width:"100%"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"2px",fontWeight:"bold",fontSize:"16px",whiteSpace:"nowrap"},children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["GH ",t.toFixed(2)]}),i&&i>0&&s.jsxs("span",{style:{marginLeft:"8px",fontSize:"14px"},children:["C: ",i]})]})}),s.jsxs("div",{className:"text-xs my-2",children:[s.jsx("p",{className:"font-bold",children:"Sales Person:"}),s.jsx("p",{children:(a==null?void 0:a.name)||"Unknown"})]}),(u==null?void 0:u.mobileMoneyNumber)&&s.jsxs("div",{className:"text-center mt-2 text-sm",children:[s.jsx("p",{className:"font-bold",children:"Payment Information"}),s.jsxs("p",{children:["Mobile Money: ",u.mobileMoneyNumber]})]}),s.jsxs("div",{className:"mt-2 text-center text-xs",children:[s.jsx("p",{children:"Thank you for your business!"}),s.jsx("span",{children:"Page 1 of 1"})]})]}):null};class vs{constructor(){this.printerSettings=null,this.settingsLoaded=!1}static getInstance(){return vs.instance||(vs.instance=new vs),vs.instance}async loadPrinterSettings(){if(this.settingsLoaded&&this.printerSettings)return this.printerSettings;try{const t=await Ja.get("/settings/printers");return this.printerSettings=t.data,this.settingsLoaded=!0,this.printerSettings}catch(t){return console.warn("No printer settings found, using defaults"),console.error("Error loading printer settings:",t),this.printerSettings={wholesale:null,retail:null},this.settingsLoaded=!0,this.printerSettings}}async getWholesalePrinter(){const t=await this.loadPrinterSettings();return(t==null?void 0:t.wholesale)||null}async getRetailPrinter(){const t=await this.loadPrinterSettings();return(t==null?void 0:t.retail)||null}async printInvoice(t){const r=await this.getWholesalePrinter();if(!r)throw new Error("No wholesale printer configured. Please set up a printer for A5 invoices in Settings > Printer Setup.");return this.sendPrintJob({type:"invoice",data:t,printerConfig:r})}async printReceipt(t){const r=await this.getRetailPrinter();if(!r)throw new Error("No retail printer configured. Please set up a printer for receipts in Settings > Printer Setup.");return this.sendPrintJob({type:"receipt",data:t,printerConfig:r})}async sendPrintJob(t){var r,n,a,o,i,l;try{const c=await this.generateHtmlContent(t),u=await Ja.post("/printer/print",{printer:t.printerConfig,type:t.type,data:t.data,htmlContent:c});return console.log("Print job successful:",u.data),!0}catch(c){if(console.error("Print job failed:",c),c&&typeof c=="object"&&"response"in c){const u=c;if(((r=u.response)==null?void 0:r.status)===500){const d=((a=(n=u.response)==null?void 0:n.data)==null?void 0:a.message)||"Printer error occurred";throw d.includes("timeout")||d.includes("Network printer timeout")?new Error("Printer connection timeout. Please check if the printer is online and accessible."):d.includes("not found")||d.includes("not available")?new Error("Printer not found. Please check printer settings and ensure the printer is connected."):new Error(`Printer error: ${d}`)}else throw((o=u.response)==null?void 0:o.status)===404?new Error("Printer service not available. Please contact support."):new Error(((l=(i=u.response)==null?void 0:i.data)==null?void 0:l.message)||u.message||"Print job failed")}else throw new Error("Print job failed with unknown error")}}async generateHtmlContent(t){const r=new Date().toLocaleDateString(),n=new Date().toLocaleTimeString();return t.type==="receipt"?`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Receipt</title>
  <style>
    @page { size: 80mm auto; margin: 0mm; }
    body { 
      font-family: Arial, sans-serif; 
      font-size: 9px; 
      line-height: 1.2; 
      margin: 0; 
      padding: 2mm; 
      width: 76mm;
    }
    .center { text-align: center; }
    .right { text-align: right; }
    .bold { font-weight: bold; }
    .header { margin-bottom: 10px; }
    .divider { border-bottom: 1px solid #000; margin: 5px 0; }
    .item-line { margin: 2px 0; }
    .total-section { margin-top: 10px; border-top: 1px solid #000; padding-top: 5px; }
  </style>
</head>
<body>
  <div class="center header">
    <div class="bold" style="font-size: 12px;">RECEIPT</div>
    <div class="divider"></div>
  </div>
  
  <div class="info-section">
    <div>Date: ${r}</div>
    <div>Time: ${n}</div>
    ${t.data.customer?`<div>Customer: ${t.data.customer.name}</div>`:""}
    <div class="divider"></div>
  </div>
  
  <div class="items-section">
    ${t.data.items.map(a=>`
      <div class="item-line">
        <div>${a.name}</div>
        <div>&nbsp;&nbsp;${a.quantity} ${a.unit} @ $${a.price.toFixed(2)} = $${a.total.toFixed(2)}</div>
      </div>
    `).join("")}
  </div>
  
  <div class="total-section">
    <div class="bold">TOTAL: $${t.data.totalAmount.toFixed(2)}</div>
    ${t.data.paymentMethod?`<div>Payment: ${t.data.paymentMethod}</div>`:""}
    <div class="divider"></div>
    <div class="center">Thank you for your business!</div>
  </div>
</body>
</html>`:`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Invoice</title>
  <style>
    @page { size: A5 portrait; margin: 10mm; }
    body { 
      font-family: Arial, sans-serif; 
      font-size: 11px; 
      line-height: 1.4; 
      margin: 0; 
      padding: 0;
    }
    .center { text-align: center; }
    .right { text-align: right; }
    .bold { font-weight: bold; }
    .header { margin-bottom: 15px; }
    .company-name { font-size: 16px; font-weight: bold; margin-bottom: 5px; }
    .divider { border-bottom: 1px solid #000; margin: 8px 0; }
    .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 10px 0; }
    .items-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
    .items-table th, .items-table td { 
      border: 1px solid #000; 
      padding: 5px; 
      text-align: left; 
    }
    .items-table th { 
      background-color: #f0f0f0; 
      font-weight: bold; 
    }
    .total-section { margin-top: 15px; }
  </style>
</head>
<body>
  <div class="center header">
    <div class="company-name">INVOICE</div>
    <div class="divider"></div>
  </div>
  
  <div class="info-grid">
    <div>
      <div>Date: ${r}</div>
      <div>Time: ${n}</div>
    </div>
    <div>
      ${t.data.customer?`
        <div><strong>Customer:</strong> ${t.data.customer.name}</div>
        ${t.data.customer.address?`<div><strong>Address:</strong> ${t.data.customer.address}</div>`:""}
        ${t.data.customer.phone?`<div><strong>Phone:</strong> ${t.data.customer.phone}</div>`:""}
      `:"<div>Customer: WALK-IN</div>"}
    </div>
  </div>
  
  <table class="items-table">
    <thead>
      <tr>
        <th>ITEM</th>
        <th>QTY</th>
        <th>UNIT PRICE</th>
        <th>TOTAL</th>
      </tr>
    </thead>
    <tbody>
      ${t.data.items.map(a=>`
        <tr>
          <td>${a.name}</td>
          <td>${a.quantity} ${a.unit}</td>
          <td>$${a.price.toFixed(2)}</td>
          <td>$${a.total.toFixed(2)}</td>
        </tr>
      `).join("")}
    </tbody>
  </table>
  
  <div class="total-section">
    <div class="divider"></div>
    <div class="right bold" style="font-size: 14px;">TOTAL AMOUNT: $${t.data.totalAmount.toFixed(2)}</div>
    ${t.data.paymentMethod?`<div class="right">Payment Method: ${t.data.paymentMethod}</div>`:""}
    ${t.data.creditPercentage?`<div class="right">Credit Surcharge: ${t.data.creditPercentage}%</div>`:""}
    <div class="divider"></div>
    <div class="center">Thank you for your business!</div>
  </div>
</body>
</html>`}refreshSettings(){this.settingsLoaded=!1,this.printerSettings=null}async checkPrinterConfiguration(){const t=await this.loadPrinterSettings();return{wholesale:!!(t!=null&&t.wholesale),retail:!!(t!=null&&t.retail)}}}const ph=vs.getInstance();var $I={exports:{}};const bue={},wue=Object.freeze(Object.defineProperty({__proto__:null,default:bue},Symbol.toStringTag,{value:"Module"})),Sue=NR(wue);(function(e,t){/**
 * @version 2.2.5
 * @overview QZ Tray Connector
 * @license LGPL-2.1-only
 * <p/>
 * Connects a web client to the QZ Tray software.
 * Enables printing and device communication from javascript.
 */var r=function(){Array.isArray||(Array.isArray=function(i){return Object.prototype.toString.call(i)==="[object Array]"}),Number.isInteger||(Number.isInteger=function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i});var n={VERSION:"2.2.5",DEBUG:!1,log:{trace:function(){n.DEBUG&&console.log.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},allay:function(){n.DEBUG&&console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}},streams:{serial:"SERIAL",usb:"USB",hid:"HID",printer:"PRINTER",file:"FILE",socket:"SOCKET"},websocket:{connection:null,shutdown:!1,connectConfig:{host:["localhost","localhost.qz.io"],hostIndex:0,usingSecure:!0,protocol:{secure:"wss://",insecure:"ws://"},port:{secure:[8181,8282,8383,8484],insecure:[8182,8283,8384,8485],portIndex:0},keepAlive:60,retries:0,delay:0},setup:{findConnection:function(i,l,c){if(n.websocket.shutdown){c(new Error("Connection attempt cancelled by user"));return}if(i.port.secure.length)!i.port.insecure.length&&!i.usingSecure&&(n.log.trace("No insecure ports specified - forcing secure connection"),i.usingSecure=!0);else if(i.port.insecure.length)i.usingSecure&&(n.log.error("No secure ports specified - forcing insecure connection"),i.usingSecure=!1);else{c(new Error("No ports have been specified to connect over"));return}var u=function(){if(n.websocket.shutdown){c(new Error("Connection attempt cancelled by user"));return}if(i.port.portIndex++,i.usingSecure&&i.port.portIndex>=i.port.secure.length||!i.usingSecure&&i.port.portIndex>=i.port.insecure.length)if(i.hostIndex>=i.host.length-1){c(new Error("Unable to establish connection with QZ"));return}else i.hostIndex++,i.port.portIndex=0;n.websocket.setup.findConnection(i,l,c)},d;i.usingSecure?d=i.protocol.secure+i.host[i.hostIndex]+":"+i.port.secure[i.port.portIndex]:d=i.protocol.insecure+i.host[i.hostIndex]+":"+i.port.insecure[i.port.portIndex];try{n.log.trace("Attempting connection",d),n.websocket.connection=new n.tools.ws(d)}catch(f){n.log.error(f),u();return}n.websocket.connection!=null?(n.websocket.connection.established=!1,n.websocket.connection.onopen=function(f){if(!n.websocket.connection.established&&(n.log.trace(f),n.log.info("Established connection with QZ Tray on "+d),n.websocket.setup.openConnection({resolve:l,reject:c}),i.keepAlive>0)){var p=setInterval(function(){if(!n.tools.isActive()||n.websocket.connection.interval!==p){clearInterval(p);return}n.websocket.connection.send("ping")},i.keepAlive*1e3);n.websocket.connection.interval=p}},n.websocket.connection.onclose=function(){n.websocket.connection&&typeof navigator<"u"&&navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&n.websocket.connection.onerror()},n.websocket.connection.onerror=function(f){n.log.trace(f),n.websocket.connection=null,u()}):c(new Error("Unable to create a websocket connection"))},openConnection:function(i){n.websocket.connection.established=!0,n.websocket.connection.onclose=function(c){n.log.trace(c),n.websocket.connection=null,n.websocket.callClose(c),n.log.info("Closed connection with QZ Tray");for(var u in n.websocket.pendingCalls)n.websocket.pendingCalls.hasOwnProperty(u)&&n.websocket.pendingCalls[u].reject(new Error("Connection closed before response received"));this.promise!=null&&this.promise.resolve()},n.websocket.connection.onerror=function(c){n.websocket.callError(c)},n.websocket.connection.sendData=function(c){n.log.trace("Preparing object for websocket",c),c.timestamp==null&&(c.timestamp=Date.now(),typeof c.timestamp!="number"&&(c.timestamp=new Date().getTime())),c.promise!=null&&(c.uid=n.websocket.setup.newUID(),n.websocket.pendingCalls[c.uid]=c.promise),c.position={x:typeof screen<"u"?(screen.availWidth||screen.width)/2+(screen.left||screen.availLeft||0):0,y:typeof screen<"u"?(screen.availHeight||screen.height)/2+(screen.top||screen.availTop||0):0};try{if(c.call!=null&&c.signature==null&&n.security.needsSigned(c.call)){var u={call:c.call,params:c.params,timestamp:c.timestamp},d=n.tools.hash(n.tools.stringify(u));d.then||(d=n.tools.promise(function(f){f(d)})),d.then(function(f){return n.security.callSign(f)}).then(function(f){n.log.trace("Signature for call",f),c.signature=f||"",c.signAlgorithm=n.security.signAlgorithm,n.signContent=void 0,n.websocket.connection.send(n.tools.stringify(c))}).catch(function(f){n.log.error("Signing failed",f),c.promise!=null&&(c.promise.reject(new Error("Failed to sign request")),delete n.websocket.pendingCalls[c.uid])})}else n.log.trace("Signature for call",c.signature),n.websocket.connection.send(n.tools.stringify(c))}catch(f){n.log.error(f),c.promise!=null&&(c.promise.reject(f),delete n.websocket.pendingCalls[c.uid])}},n.websocket.connection.onmessage=function(c){var u=JSON.parse(c.data);if(u.uid==null){if(u.type==null)n.websocket.connection.close(4003,"Connected to incompatible QZ Tray version");else switch(u.type){case n.streams.serial:u.event||(u.event=JSON.stringify({portName:u.key,output:u.data})),n.serial.callSerial(JSON.parse(u.event));break;case n.streams.socket:n.socket.callSocket(JSON.parse(u.event));break;case n.streams.usb:u.event||(u.event=JSON.stringify({vendorId:u.key[0],productId:u.key[1],output:u.data})),n.usb.callUsb(JSON.parse(u.event));break;case n.streams.hid:n.hid.callHid(JSON.parse(u.event));break;case n.streams.printer:n.printers.callPrinter(JSON.parse(u.event));break;case n.streams.file:n.file.callFile(JSON.parse(u.event));break;default:n.log.allay("Cannot determine stream type for callback",u);break}return}n.log.trace("Received response from websocket",u);var d=n.websocket.pendingCalls[u.uid];d==null?n.log.allay("No promise found for returned response"):u.error!=null?d.reject(new Error(u.error)):d.resolve(u.result),delete n.websocket.pendingCalls[u.uid]};function l(c){c===void 0&&(c=null),o.api.getVersion().then(function(u){n.websocket.connection.version=u,n.websocket.connection.semver=u.toLowerCase().replace(/-rc\./g,"-rc").split(/[\\+\\.-]/g);for(var d=0;d<n.websocket.connection.semver.length;d++){try{if(d==3&&n.websocket.connection.semver[d].toLowerCase().indexOf("rc")==0){n.websocket.connection.semver[d]=-n.websocket.connection.semver[d].replace(/\D/g,"");continue}n.websocket.connection.semver[d]=parseInt(n.websocket.connection.semver[d])}catch{}n.websocket.connection.semver.length<4&&(n.websocket.connection.semver[3]=0)}n.compatible.algorithm(!0)}).then(function(){n.websocket.connection.sendData({certificate:c,promise:i})})}n.security.callCert().then(l).catch(function(c){n.log.warn("Failed to get certificate:",c),n.security.rejectOnCertFailure?i.reject(c):l(null)})},newUID:function(){var i=6;return(new Array(i+1).join("0")+(Math.random()*Math.pow(36,i)<<0).toString(36)).slice(-i)}},dataPromise:function(i,l,c,u){return n.tools.promise(function(d,f){var p={call:i,promise:{resolve:d,reject:f},params:l,signature:c,timestamp:u};n.websocket.connection.sendData(p)})},pendingCalls:{},errorCallbacks:[],callError:function(i){if(Array.isArray(n.websocket.errorCallbacks))for(var l=0;l<n.websocket.errorCallbacks.length;l++)n.websocket.errorCallbacks[l](i);else n.websocket.errorCallbacks(i)},closedCallbacks:[],callClose:function(i){if(Array.isArray(n.websocket.closedCallbacks))for(var l=0;l<n.websocket.closedCallbacks.length;l++)n.websocket.closedCallbacks[l](i);else n.websocket.closedCallbacks(i)}},printing:{defaultConfig:{bounds:null,colorType:"color",copies:1,density:0,duplex:!1,fallbackDensity:null,interpolation:"bicubic",jobName:null,legacy:!1,margins:0,orientation:null,paperThickness:null,printerTray:null,rasterize:!1,rotation:0,scaleContent:!0,size:null,units:"in",forceRaw:!1,encoding:null,spool:null}},serial:{serialCallbacks:[],callSerial:function(i){if(Array.isArray(n.serial.serialCallbacks))for(var l=0;l<n.serial.serialCallbacks.length;l++)n.serial.serialCallbacks[l](i);else n.serial.serialCallbacks(i)}},socket:{socketCallbacks:[],callSocket:function(i){if(Array.isArray(n.socket.socketCallbacks))for(var l=0;l<n.socket.socketCallbacks.length;l++)n.socket.socketCallbacks[l](i);else n.socket.socketCallbacks(i)}},usb:{usbCallbacks:[],callUsb:function(i){if(Array.isArray(n.usb.usbCallbacks))for(var l=0;l<n.usb.usbCallbacks.length;l++)n.usb.usbCallbacks[l](i);else n.usb.usbCallbacks(i)}},hid:{hidCallbacks:[],callHid:function(i){if(Array.isArray(n.hid.hidCallbacks))for(var l=0;l<n.hid.hidCallbacks.length;l++)n.hid.hidCallbacks[l](i);else n.hid.hidCallbacks(i)}},printers:{printerCallbacks:[],callPrinter:function(i){if(Array.isArray(n.printers.printerCallbacks))for(var l=0;l<n.printers.printerCallbacks.length;l++)n.printers.printerCallbacks[l](i);else n.printers.printerCallbacks(i)}},file:{fileCallbacks:[],callFile:function(i){if(Array.isArray(n.file.fileCallbacks))for(var l=0;l<n.file.fileCallbacks.length;l++)n.file.fileCallbacks[l](i);else n.file.fileCallbacks(i)}},security:{certHandler:function(i,l){l()},callCert:function(){return typeof n.security.certHandler.then=="function"?n.security.certHandler:n.security.certHandler.constructor.name==="AsyncFunction"?n.security.certHandler():n.tools.promise(n.security.certHandler)},signatureFactory:function(){return function(i){i()}},callSign:function(i){return n.security.signatureFactory.constructor.name==="AsyncFunction"?n.security.signatureFactory(i):n.tools.promise(n.security.signatureFactory(i))},signAlgorithm:"SHA1",rejectOnCertFailure:!1,needsSigned:function(i){const l=["printers.getStatus","printers.stopListening","usb.isClaimed","usb.closeStream","usb.releaseDevice","hid.stopListening","hid.isClaimed","hid.closeStream","hid.releaseDevice","file.stopListening","getVersion"];return i!=null&&l.indexOf(i)===-1}},tools:{promise:function(i){if(typeof RSVP<"u")return new RSVP.Promise(i);if(typeof Promise<"u")return new Promise(i);n.log.error("Promise/A+ support is required.  See qz.api.setPromiseType(...)")},reject:function(i){return n.tools.promise(function(l,c){c(i)})},stringify:function(i){var l=Array.prototype.toJSON;delete Array.prototype.toJSON;function c(d,f){if(d!=="promise")return f}var u=JSON.stringify(i,c);return l&&(Array.prototype.toJSON=l),u},hash:function(i){return typeof Sha256<"u"?Sha256.hash(i):n.SHA.hash(i)},ws:typeof WebSocket<"u"?WebSocket:null,absolute:function(i){if(typeof window<"u"&&typeof document.createElement=="function"){var l=document.createElement("a");return l.href=i,l.href}else Sue.resolve(i);return i},relative:function(i){for(var l=0;l<i.length;l++)if(i[l].constructor===Object){var c=!1;i[l].data&&i[l].data.search&&i[l].data.search(/data:image\/\w+;base64,/)===0?(i[l].flavor="base64",i[l].data=i[l].data.replace(/^data:image\/\w+;base64,/,"")):i[l].flavor?["FILE","XML"].indexOf(i[l].flavor.toUpperCase())>-1&&(c=!0):(i[l].format&&["HTML","IMAGE","PDF","FILE","XML"].indexOf(i[l].format.toUpperCase())>-1||i[l].type&&(["PIXEL","IMAGE","PDF"].indexOf(i[l].type.toUpperCase())>-1&&!i[l].format||["HTML","PDF"].indexOf(i[l].type.toUpperCase())>-1&&(!i[l].format||i[l].format.toUpperCase()==="FILE")))&&(c=!0),c&&(i[l].data=n.tools.absolute(i[l].data)),i[l].options&&typeof i[l].options.overlay=="string"&&(i[l].options.overlay=n.tools.absolute(i[l].options.overlay))}},extend:function(i){typeof i!="object"&&(i={});for(var l=1;l<arguments.length;l++){var c=arguments[l];if(c){for(var u in c)if(c.hasOwnProperty(u)){if(i===c[u])continue;if(c[u]&&c[u].constructor&&c[u].constructor===Object){var d;Array.isArray(c[u])?d=i[u]||[]:d=i[u]||{},i[u]=n.tools.extend(d,c[u])}else c[u]!==void 0&&(i[u]=c[u])}}}return i},versionCompare:function(i,l,c,u){if(n.tools.assertActive()){var d=n.websocket.connection.semver;return d[0]!=i?d[0]-i:l!=null&&d[1]!=l?d[1]-l:c!=null&&d[2]!=c?d[2]-c:u!=null&&d.length>3&&d[3]!=u?Number.isInteger(d[3])&&Number.isInteger(u)?d[3]-u:d[3].toString().localeCompare(u.toString()):0}},isVersion:function(i,l,c,u){return n.tools.versionCompare(i,l,c,u)==0},isActive:function(){return!n.websocket.shutdown&&n.websocket.connection!=null&&(n.websocket.connection.readyState===n.tools.ws.OPEN||n.websocket.connection.readyState===n.tools.ws.CONNECTING)},assertActive:function(){if(n.tools.isActive())return!0;throw new Error("A connection to QZ has not been established yet")},uint8ArrayToHex:function(i){return Array.from(i).map(function(l){return l.toString(16).padStart(2,"0")}).join("")},uint8ArrayToBase64:function(i){var l=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],c="",u,d=i.length;for(u=2;u<d;u+=3)c+=l[i[u-2]>>2],c+=l[(i[u-2]&3)<<4|i[u-1]>>4],c+=l[(i[u-1]&15)<<2|i[u]>>6],c+=l[i[u]&63];return u===d+1&&(c+=l[i[u-2]>>2],c+=l[(i[u-2]&3)<<4],c+="=="),u===d&&(c+=l[i[u-2]>>2],c+=l[(i[u-2]&3)<<4|i[u-1]>>4],c+=l[(i[u-1]&15)<<2],c+="="),c}},compatible:{data:function(i){for(var l=0;l<i.length;l++)if(i[l].constructor===Object&&i[l].data instanceof Uint8Array&&i[l].flavor){var c=i[l].flavor.toString().toUpperCase();switch(c){case"BASE64":i[l].data=n.tools.uint8ArrayToBase64(i[l].data);break;case"HEX":i[l].data=n.tools.uint8ArrayToHex(i[l].data);break;default:throw new Error("Uint8Array conversion to '"+c+"' is not supported.")}}if(n.tools.versionCompare(2,2,4)<0)for(var l=0;l<i.length;l++)i[l].constructor===Object&&i[l].options&&typeof i[l].options.dotDensity=="string"&&(i[l].options.dotDensity=i[l].options.dotDensity.toLowerCase().replace("-legacy",""));if(n.tools.isVersion(2,0)){n.log.trace("Converting print data to v2.0 for "+n.websocket.connection.version);for(var l=0;l<i.length;l++)i[l].constructor===Object&&(i[l].type&&i[l].type.toUpperCase()==="RAW"&&i[l].format&&i[l].format.toUpperCase()==="IMAGE"&&(i[l].flavor&&i[l].flavor.toUpperCase()==="BASE64"&&(i[l].data="data:image/compat;base64,"+i[l].data),i[l].flavor="IMAGE"),(i[l].type&&i[l].type.toUpperCase()==="RAW"||i[l].format&&i[l].format.toUpperCase()==="COMMAND")&&(i[l].format="RAW"),i[l].type=i[l].format,i[l].format=i[l].flavor,delete i[l].flavor)}},config:function(i,l){return n.tools.isVersion(2,0)&&(l.rasterize||(i.rasterize=!0)),n.tools.versionCompare(2,2)<0&&i.forceRaw!=="undefined"&&(i.altPrinting=i.forceRaw,delete i.forceRaw),n.tools.versionCompare(2,1,2,11)<0&&i.spool&&(i.spool.size&&(i.perSpool=i.spool.size,delete i.spool.size),i.spool.end&&(i.endOfDoc=i.spool.end,delete i.spool.end),delete i.spool),i},networking:function(i,l,c,u,d){return n.tools.isVersion(2,0)?n.tools.promise(function(f,p){n.websocket.dataPromise("websocket.getNetworkInfo",{hostname:i,port:l},c,u).then(function(h){f(typeof d<"u"?d(h):h)},p)}):n.tools.promise(function(f,p){n.websocket.dataPromise("networking.device",{hostname:i,port:l},c,u).then(function(h){f({ipAddress:h.ip,macAddress:h.mac})},p)})},algorithm:function(i){return n.tools.isActive()&&n.websocket.connection.semver&&n.tools.isVersion(2,0)?(i||n.log.warn("Connected to an older version of QZ, alternate signature algorithms are not supported"),!1):!0}},SHA:{hash:function(i){i=n.SHA._utf8Encode(i)+"";for(var l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],u=i.length/4+2,d=Math.ceil(u/16),f=new Array(d),p=0;p<d;p++){f[p]=new Array(16);for(var h=0;h<16;h++)f[p][h]=i.charCodeAt(p*64+h*4)<<24|i.charCodeAt(p*64+h*4+1)<<16|i.charCodeAt(p*64+h*4+2)<<8|i.charCodeAt(p*64+h*4+3)}f[d-1][14]=(i.length-1)*8/Math.pow(2,32),f[d-1][14]=Math.floor(f[d-1][14]),f[d-1][15]=(i.length-1)*8&4294967295;for(var y=new Array(64),m,x,w,v,b,j,S,k,p=0;p<d;p++){for(var N=0;N<16;N++)y[N]=f[p][N];for(var N=16;N<64;N++)y[N]=n.SHA._dev1(y[N-2])+y[N-7]+n.SHA._dev0(y[N-15])+y[N-16]&4294967295;m=c[0],x=c[1],w=c[2],v=c[3],b=c[4],j=c[5],S=c[6],k=c[7];for(var N=0;N<64;N++){var P=k+n.SHA._sig1(b)+n.SHA._ch(b,j,S)+l[N]+y[N],C=n.SHA._sig0(m)+n.SHA._maj(m,x,w);k=S,S=j,j=b,b=v+P&4294967295,v=w,w=x,x=m,m=P+C&4294967295}c[0]=c[0]+m&4294967295,c[1]=c[1]+x&4294967295,c[2]=c[2]+w&4294967295,c[3]=c[3]+v&4294967295,c[4]=c[4]+b&4294967295,c[5]=c[5]+j&4294967295,c[6]=c[6]+S&4294967295,c[7]=c[7]+k&4294967295}return n.SHA._hexStr(c[0])+n.SHA._hexStr(c[1])+n.SHA._hexStr(c[2])+n.SHA._hexStr(c[3])+n.SHA._hexStr(c[4])+n.SHA._hexStr(c[5])+n.SHA._hexStr(c[6])+n.SHA._hexStr(c[7])},_rotr:function(i,l){return l>>>i|l<<32-i},_sig0:function(i){return n.SHA._rotr(2,i)^n.SHA._rotr(13,i)^n.SHA._rotr(22,i)},_sig1:function(i){return n.SHA._rotr(6,i)^n.SHA._rotr(11,i)^n.SHA._rotr(25,i)},_dev0:function(i){return n.SHA._rotr(7,i)^n.SHA._rotr(18,i)^i>>>3},_dev1:function(i){return n.SHA._rotr(17,i)^n.SHA._rotr(19,i)^i>>>10},_ch:function(i,l,c){return i&l^~i&c},_maj:function(i,l,c){return i&l^i&c^l&c},_hexStr:function(i){for(var l="",c,u=7;u>=0;u--)c=i>>>u*4&15,l+=c.toString(16);return l},_unescape:function(i){return i.replace(/%(u[\da-f]{4}|[\da-f]{2})/gi,function(l){if(l.length-1)return String.fromCharCode(parseInt(l.substring(l.length-3?2:1),16));var c=l.charCodeAt(0);return c<256?"%"+(0+c.toString(16)).slice(-2).toUpperCase():"%u"+("000"+c.toString(16)).slice(-4).toUpperCase()})},_utf8Encode:function(i){return n.SHA._unescape(encodeURIComponent(i))}}};function a(i,l){this.config=n.tools.extend({},n.printing.defaultConfig),this._dirtyOpts={},this.setPrinter=function(c){typeof c=="string"&&(c={name:c}),this.printer=c},this.getPrinter=function(){return this.printer},this.reconfigure=function(c){for(var u in c)c[u]!==void 0&&(this._dirtyOpts[u]=!0);n.tools.extend(this.config,c)},this.getOptions=function(){return n.compatible.config(this.config,this._dirtyOpts)},this.setPrinter(i),this.reconfigure(l)}a.prototype.print=function(i,l,c){o.print(this,i,l,c)};var o={websocket:{isActive:function(){return n.tools.isActive()},connect:function(i){return n.tools.promise(function(l,c){if(n.websocket.connection){const d=n.websocket.connection.readyState;if(d===n.tools.ws.OPEN){c(new Error("An open connection with QZ Tray already exists"));return}else if(d===n.tools.ws.CONNECTING){c(new Error("The current connection attempt has not returned yet"));return}else if(d===n.tools.ws.CLOSING){c(new Error("Waiting for previous disconnect request to complete"));return}}if(n.tools.ws){if(!n.tools.ws.CLOSED||n.tools.ws.CLOSED==2){c(new Error("Unsupported WebSocket version detected: HyBi-00/Hixie-76"));return}}else{c(new Error("WebSocket not supported by this browser"));return}i==null&&(i={}),(typeof location>"u"||location.protocol!=="https:")&&typeof i.usingSecure>"u"&&(n.log.trace("Disabling secure ports due to insecure page"),i.usingSecure=!1),typeof i.host<"u"&&!Array.isArray(i.host)&&(i.host=[i.host]),n.websocket.shutdown=!1;var u=function(d){var f=!1,p=function(){f||(f=!0,i&&d<i.retries?u(d+1):(n.websocket.connection=null,c.apply(null,arguments)))},h=function(){var y=n.tools.extend({},n.websocket.connectConfig,i);n.websocket.setup.findConnection(y,l,p)};d==0?h():setTimeout(h,i.delay*1e3)};u(0)})},disconnect:function(){return n.tools.promise(function(i,l){n.websocket.connection!=null?n.tools.isActive()?(n.websocket.shutdown=!0,n.websocket.connection.promise={resolve:i,reject:l},n.websocket.connection.close()):l(new Error("Current connection is still closing")):l(new Error("No open connection with QZ Tray"))})},setErrorCallbacks:function(i){n.websocket.errorCallbacks=i},setClosedCallbacks:function(i){n.websocket.closedCallbacks=i},getNetworkInfo:n.compatible.networking,getConnectionInfo:function(){if(n.tools.assertActive()){var i=n.websocket.connection.url.split(/[:\/]+/g);return{socket:i[0],host:i[1],port:+i[2]}}}},printers:{getDefault:function(i,l){return n.websocket.dataPromise("printers.getDefault",null,i,l)},find:function(i,l,c){return n.websocket.dataPromise("printers.find",{query:i},l,c)},details:function(){return n.websocket.dataPromise("printers.detail")},startListening:function(i,l){Array.isArray(i)||(i=[i]);var c={printerNames:i};return l&&l.jobData==!0&&(c.jobData=!0),l&&l.maxJobData&&(c.maxJobData=l.maxJobData),l&&l.flavor&&(c.flavor=l.flavor),n.websocket.dataPromise("printers.startListening",c)},clearQueue:function(i){return typeof i!="object"&&(i={printerName:i}),n.websocket.dataPromise("printers.clearQueue",i)},stopListening:function(){return n.websocket.dataPromise("printers.stopListening")},getStatus:function(){return n.websocket.dataPromise("printers.getStatus")},setPrinterCallbacks:function(i){n.printers.printerCallbacks=i}},configs:{setDefaults:function(i){n.tools.extend(n.printing.defaultConfig,i)},create:function(i,l){return new a(i,l)}},print:function(i,l){var c=!1,u=[],d=[];arguments.length>=3&&(typeof arguments[2]=="boolean"?(c=arguments[2],arguments.length>=5&&(u=arguments[3],d=arguments[4])):arguments.length>=4&&(u=arguments[2],d=arguments[3]),u&&!Array.isArray(u)&&(u=[u]),d&&!Array.isArray(d)&&(d=[d])),Array.isArray(i)||(i=[i]),Array.isArray(l[0])||(l=[l]);for(var f=0;f<l.length;f++)n.tools.relative(l[f]),n.compatible.data(l[f]);for(var p=function(v){var b={printer:v.config.getPrinter(),options:v.config.getOptions(),data:v.data};return n.websocket.dataPromise("print",b,v.signature,v.timestamp)},h=[],y=0;y<i.length||y<l.length;y++)(function(v){var b={config:i[Math.min(v,i.length-1)],data:l[Math.min(v,l.length-1)],signature:u[v],timestamp:d[v]};h.push(function(){return p(b)})})(y);var m=null;if(c){var x=[];m=function(v){x.push(v)},h.push(function(){return n.tools.promise(function(v,b){x.length?b(x):v()})})}var w=null;return h.reduce(function(v,b){return w=v.catch(m).then(b),w},n.tools.promise(function(v){v()})),w},serial:{findPorts:function(){return n.websocket.dataPromise("serial.findPorts")},setSerialCallbacks:function(i){n.serial.serialCallbacks=i},openPort:function(i,l){var c={port:i,options:l};return n.websocket.dataPromise("serial.openPort",c)},sendData:function(i,l,c){n.tools.versionCompare(2,1,0,12)>=0&&(typeof l!="object"&&(l={data:l,type:"PLAIN"}),l.type&&l.type.toUpperCase()=="FILE"&&(l.data=n.tools.absolute(l.data)));var u={port:i,data:l,options:c};return n.websocket.dataPromise("serial.sendData",u)},closePort:function(i){return n.websocket.dataPromise("serial.closePort",{port:i})}},socket:{open:function(i,l,c){var u={host:i,port:l,options:c};return n.websocket.dataPromise("socket.open",u)},close:function(i,l){var c={host:i,port:l};return n.websocket.dataPromise("socket.close",c)},sendData:function(i,l,c){typeof c!="object"&&(c={data:c,type:"PLAIN"});var u={host:i,port:l,data:c};return n.websocket.dataPromise("socket.sendData",u)},setSocketCallbacks:function(i){n.socket.socketCallbacks=i}},usb:{listDevices:function(i){return n.websocket.dataPromise("usb.listDevices",{includeHubs:i})},listInterfaces:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("usb.listInterfaces",i)},listEndpoints:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),n.websocket.dataPromise("usb.listEndpoints",i)},setUsbCallbacks:function(i){n.usb.usbCallbacks=i},claimDevice:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),n.websocket.dataPromise("usb.claimDevice",i)},isClaimed:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("usb.isClaimed",i)},sendData:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],data:arguments[3]}),n.tools.versionCompare(2,1,0,12)>=0&&(typeof i.data!="object"&&(i.data={data:i.data,type:"PLAIN"}),i.data.type&&i.data.type.toUpperCase()=="FILE"&&(i.data.data=n.tools.absolute(i.data.data))),n.websocket.dataPromise("usb.sendData",i)},readData:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3]}),n.websocket.dataPromise("usb.readData",i)},openStream:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3],interval:arguments[4]}),n.websocket.dataPromise("usb.openStream",i)},closeStream:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2]}),n.websocket.dataPromise("usb.closeStream",i)},releaseDevice:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("usb.releaseDevice",i)}},hid:{listDevices:function(){return n.websocket.dataPromise("hid.listDevices")},startListening:function(){return n.websocket.dataPromise("hid.startListening")},stopListening:function(){return n.websocket.dataPromise("hid.stopListening")},setHidCallbacks:function(i){n.hid.hidCallbacks=i},claimDevice:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("hid.claimDevice",i)},isClaimed:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("hid.isClaimed",i)},sendData:function(i){if(typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1],data:arguments[2],endpoint:arguments[3]}),n.tools.versionCompare(2,1,0,12)>=0)typeof i.data!="object"&&(i.data={data:i.data,type:"PLAIN"}),i.data.type&&i.data.type.toUpperCase()=="FILE"&&(i.data.data=n.tools.absolute(i.data.data));else if(typeof i.data=="object"){if(i.data.type.toUpperCase()!=="PLAIN"||typeof i.data.data!="string")return n.tools.reject(new Error("Data format is not supported with connected QZ Tray version "+n.websocket.connection.version));i.data=i.data.data}return n.websocket.dataPromise("hid.sendData",i)},readData:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2]}),n.websocket.dataPromise("hid.readData",i)},sendFeatureReport:function(i){return n.websocket.dataPromise("hid.sendFeatureReport",i)},getFeatureReport:function(i){return n.websocket.dataPromise("hid.getFeatureReport",i)},openStream:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2],interval:arguments[3]}),n.websocket.dataPromise("hid.openStream",i)},closeStream:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("hid.closeStream",i)},releaseDevice:function(i){return typeof i!="object"&&(i={vendorId:arguments[0],productId:arguments[1]}),n.websocket.dataPromise("hid.releaseDevice",i)}},file:{list:function(i,l){var c=n.tools.extend({path:i},l);return n.websocket.dataPromise("file.list",c)},read:function(i,l){var c=n.tools.extend({path:i},l);return n.websocket.dataPromise("file.read",c)},write:function(i,l){var c=n.tools.extend({path:i},l);return n.websocket.dataPromise("file.write",c)},remove:function(i,l){var c=n.tools.extend({path:i},l);return n.websocket.dataPromise("file.remove",c)},startListening:function(i,l){l&&typeof l.include<"u"&&!Array.isArray(l.include)&&(l.include=[l.include]),l&&typeof l.exclude<"u"&&!Array.isArray(l.exclude)&&(l.exclude=[l.exclude]);var c=n.tools.extend({path:i},l);return n.websocket.dataPromise("file.startListening",c)},stopListening:function(i,l){var c=n.tools.extend({path:i},l);return n.websocket.dataPromise("file.stopListening",c)},setFileCallbacks:function(i){n.file.fileCallbacks=i}},networking:{device:function(i,l){return n.tools.isVersion(2,0)?n.compatible.networking(i,l,null,null,function(c){return{ip:c.ipAddress,mac:c.macAddress}}):n.websocket.dataPromise("networking.device",{hostname:i,port:l})},hostname:function(i,l){return n.tools.versionCompare(2,2,2)<0?n.tools.promise(function(c,u){n.websocket.dataPromise("networking.device",{hostname:i,port:l}).then(function(d){console.log(d),c(d.hostname)})}):n.websocket.dataPromise("networking.hostname")},devices:function(i,l){return n.tools.isVersion(2,0)?n.compatible.networking(i,l,null,null,function(c){return[{ip:c.ipAddress,mac:c.macAddress}]}):n.websocket.dataPromise("networking.devices",{hostname:i,port:l})}},security:{setCertificatePromise:function(i,l){n.security.certHandler=i,n.security.rejectOnCertFailure=!!(l&&l.rejectOnFailure)},setSignaturePromise:function(i){n.security.signatureFactory=i},setSignatureAlgorithm:function(i){n.compatible.algorithm()&&(["SHA1","SHA256","SHA512"].indexOf(i.toUpperCase())<0?n.log.error("Signing algorithm '"+i+"' is not supported."):n.security.signAlgorithm=i)},getSignatureAlgorithm:function(){return n.security.signAlgorithm}},api:{showDebug:function(i){return n.DEBUG=i},getVersion:function(){return n.websocket.dataPromise("getVersion")},isVersion:n.tools.isVersion,isVersionGreater:function(i,l,c,u){return n.tools.versionCompare(i,l,c,u)>0},isVersionLess:function(i,l,c,u){return n.tools.versionCompare(i,l,c,u)<0},setPromiseType:function(i){n.tools.promise=i},setSha256Type:function(i){n.tools.hash=i},setWebSocketType:function(i){n.tools.ws=i}},version:n.VERSION};return o}();(function(){e.exports=r})()})($I);var jue=$I.exports;const ut=ot(jue);async function KP(e,t={},r){return window.__TAURI_INTERNALS__.invoke(e,t,r)}class xs{constructor(){this.isConnected=!1,this.connectionPromise=null,this.alreadyConnectedLogged=!1,this.securityInitialized=!1}static getInstance(){return xs.instance||(xs.instance=new xs),xs.instance}async initialize(){return this.connectionPromise?this.connectionPromise:(this.connectionPromise=this.connect(),this.connectionPromise)}async connect(){try{ut.websocket.isActive()?(this.isConnected=!0,this.alreadyConnectedLogged||(console.log("QZ Tray: Already connected"),this.alreadyConnectedLogged=!0)):(console.log("QZ Tray: Attempting to connect..."),this.securityInitialized||(ut.security.setCertificatePromise(async()=>{const t="__TAURI__"in window;if(console.log("QZ Tray: [CERT] Environment detection - isTauri:",t),console.log("QZ Tray: [CERT] Window.__TAURI__ exists:","__TAURI__"in window),console.log("QZ Tray: [CERT] Window location:",window.location.href),t){console.log("QZ Tray: [CERT] Using Tauri invoke for certificate");try{console.log('QZ Tray: [CERT] About to call invoke("get_qz_cert")...');const o=await KP("get_qz_cert");if(console.log("QZ Tray: [CERT] Tauri invoke returned:",typeof o,"length:",o==null?void 0:o.length),console.log("QZ Tray: [CERT] Certificate preview:",o==null?void 0:o.slice(0,80)),!o||!o.includes("BEGIN CERTIFICATE"))throw console.error("QZ Tray: [CERT] Invalid certificate from Tauri invoke:",o==null?void 0:o.slice(0,80)),new Error("Invalid certificate from Tauri invoke");return o}catch(o){console.error("QZ Tray: [CERT] Failed to get certificate via Tauri invoke:",o),console.error("QZ Tray: [CERT] Error details:",{name:o instanceof Error?o.name:"Unknown",message:o instanceof Error?o.message:String(o),stack:o instanceof Error?o.stack:void 0}),console.log("QZ Tray: [CERT] Falling back to fetch method...")}}const r=`${mn()}/qz/cert?t=${Date.now()}`;console.log("QZ Tray: [CERT] Using fetch for certificate from:",r),console.log("QZ Tray: [CERT] getApiUrl() returns:",mn()),console.log("QZ Tray: [CERT] Current window.location:",window.location.href);let n;try{n=await fetch(r),console.log("QZ Tray: [CERT] Fetch completed, status:",n.status,"ok:",n.ok),console.log("QZ Tray: [CERT] Response headers:",Object.fromEntries(n.headers.entries()))}catch(o){throw console.error("QZ Tray: [CERT] Network error:",o),new Error("network error fetching certificate: "+(o instanceof Error?o.message:String(o)))}if(!n.ok){let o;try{o=(await n.text()).slice(0,120)}catch{o="[unable to read response body]"}throw console.error("QZ Tray: [CERT] HTTP error - Status:",n.status,"StatusText:",n.statusText),console.error("QZ Tray: [CERT] Response body preview:",o),new Error(`certificate fetch failed status=${n.status}`)}const a=await n.text();if(console.log("QZ Tray: [CERT] Response body length:",a.length),console.log("QZ Tray: [CERT] Response preview:",a.slice(0,80)),!a.includes("BEGIN CERTIFICATE"))throw console.error("QZ Tray: [CERT] Invalid certificate format - preview:",a.slice(0,80)),new Error("certificate response not PEM formatted");return console.log("QZ Tray: [CERT] Certificate retrieved successfully, bytes:",a.length),a}),ut.security.setSignatureAlgorithm("SHA1"),ut.security.setSignaturePromise(async t=>{const r="__TAURI__"in window;if(console.log("QZ Tray: [SIGN] Environment detection - isTauri:",r),console.log("QZ Tray: [SIGN] Hash to sign (length):",t.length),console.log("QZ Tray: [SIGN] Hash preview:",t.slice(0,40)+"..."),r){console.log("QZ Tray: [SIGN] Using Tauri invoke for signing");try{console.log('QZ Tray: [SIGN] About to call invoke("sign_qz_hash")...');const c=await KP("sign_qz_hash",{hash:t});if(console.log("QZ Tray: [SIGN] Tauri invoke returned:",typeof c,"length:",c==null?void 0:c.length),!c)throw new Error("No signature returned from Tauri invoke");return c}catch(c){console.error("QZ Tray: [SIGN] Failed to sign hash via Tauri invoke:",c),console.error("QZ Tray: [SIGN] Error details:",{name:c instanceof Error?c.name:"Unknown",message:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0}),console.log("QZ Tray: [SIGN] Falling back to fetch method...")}}const n=`${mn()}/qz/sign`;console.log("QZ Tray: [SIGN] Using fetch for signing request to:",n);let a;try{a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})}),console.log("QZ Tray: [SIGN] Fetch completed, status:",a.status,"ok:",a.ok),console.log("QZ Tray: [SIGN] Response headers:",Object.fromEntries(a.headers.entries()))}catch(c){throw console.error("QZ Tray: [SIGN] Network error:",c),new Error("network error contacting sign endpoint: "+(c instanceof Error?c.message:String(c)))}if(!a.ok){let c;try{c=(await a.text()).slice(0,120)}catch{c="[unable to read response body]"}throw console.error("QZ Tray: [SIGN] HTTP error - Status:",a.status,"StatusText:",a.statusText),console.error("QZ Tray: [SIGN] Response body preview:",c),new Error(`sign endpoint failed status=${a.status}`)}let o,i="";try{i=await a.text(),console.log("QZ Tray: [SIGN] Response body:",i.slice(0,200)),o=JSON.parse(i)}catch(c){throw console.error("QZ Tray: [SIGN] JSON parse error:",c),console.error("QZ Tray: [SIGN] Raw response:",i.slice(0,200)),new Error("sign endpoint invalid JSON: "+(c instanceof Error?c.message:String(c)))}const l=o==null?void 0:o.signature;if(typeof l!="string")throw console.error("QZ Tray: [SIGN] Invalid signature response:",o),new Error("sign endpoint JSON missing signature");return console.log("QZ Tray: [SIGN] Signature received successfully, length:",l.length),l}),this.securityInitialized=!0),console.log("QZ Tray: Configuring for secure connections only..."),console.log("QZ Tray: Connecting with forced secure parameters..."),console.log("QZ Tray: Using wss://localhost:8181 (secure connection)"),await ut.websocket.connect({host:"localhost",port:{secure:[8181]}}),this.isConnected=!0,console.log("QZ Tray: Connected successfully"))}catch(t){throw this.isConnected=!1,console.error("QZ Tray: Connection failed:",t),new Error(`QZ Tray connection failed: ${t instanceof Error?t.message:"Unknown error"}`)}}async isAvailable(){try{if(ut.websocket.isActive())return this.isConnected=!0,this.alreadyConnectedLogged||(console.log("QZ Tray: Already connected"),this.alreadyConnectedLogged=!0),!0;console.log("QZ Tray: Forcing secure connection to localhost:8181");const t=15e3,r=[{label:"wss://localhost:8181 (secure only)"}];for(const n of r){if(ut.websocket.isActive())break;try{if(console.log(`QZ Tray: attempting ${n.label} connection...`),!this.securityInitialized){console.log("QZ Tray: Initializing security...");try{await this.initialize();break}catch(i){console.warn("QZ Tray: Security initialization failed:",i)}}const a=ut.websocket.connect({host:"localhost",port:{secure:[8181]}}),o=new Promise((i,l)=>setTimeout(()=>l(new Error("timeout")),t));if(await Promise.race([a,o]),ut.websocket.isActive()){console.log(`QZ Tray: ${n.label} connection successful`);break}}catch(a){const o=a instanceof Error?a.message:String(a);console.warn(`QZ Tray: ${n.label} connect failed:`,o),o.includes("timeout")&&console.warn("QZ Tray: Secure connection timeout - ensure QZ Tray is running and browser trusts the connection")}}return this.isConnected=ut.websocket.isActive(),this.isConnected||console.warn("QZ Tray: unable to establish connection. Ensure QZ Tray is running and browser trusts the secure connection on port 8181."),this.isConnected}catch(t){return console.debug("QZ Tray availability check fatal error:",t),this.isConnected=!1,!1}}async getPrinters(){try{await this.ensureConnection();const t=new Set,r=i=>{i&&(Array.isArray(i)?i.forEach(l=>l&&t.add(String(l))):t.add(String(i)))},n=async(i,l)=>{try{const c=await l();return r(c),console.debug(`QZ Tray: ${i} found ${Array.isArray(c)?c.length:c?1:0} printers`),!0}catch(c){return console.debug(`QZ Tray: printer enumeration step '${i}' failed:`,c),!1}};await n("base",()=>ut.printers.find());const a=["","\\\\","Microsoft","PDF","OneNote","Fax","HP","EPSON","Canon","Brother","Zebra","POS","Thermal","Generic"];for(const i of a)await n(`token:${i}`,()=>ut.printers.find(i));if(t.size===0){console.log("QZ Tray: No printers found in initial scan, trying delayed retries...");const i=[500,1e3,1500,3e3];for(const l of i)if(await new Promise(c=>setTimeout(c,l)),await n(`retry-${l}ms`,()=>ut.printers.find()),t.size>0)break}const o=Array.from(t).sort((i,l)=>i.localeCompare(l));return console.log(`QZ Tray: Final printer enumeration result: ${o.length} printers found:`,o),o.length===0&&(console.warn("QZ Tray: No printers returned after comprehensive scan. Possible causes:"),console.warn("- QZ Tray not trusted (check for green lock icon)"),console.warn("- Browser security blocking access"),console.warn("- Printers not properly installed in Windows"),console.warn("- QZ Tray version compatibility issue")),o}catch(t){throw console.error("QZ Tray: Failed to get printers:",t),new Error(`Failed to get printers: ${t instanceof Error?t.message:"Unknown error"}`)}}async getDefaultPrinter(){try{return await this.ensureConnection(),await ut.printers.getDefault()}catch(t){return console.error("QZ Tray: Failed to get default printer:",t),null}}async printHTML(t,r){try{await this.ensureConnection();const n=ut.configs.create(t.name),a=[{type:"html",format:"plain",data:r.content}];await ut.print(n,a),console.log("QZ Tray: Print job sent successfully")}catch(n){throw console.error("QZ Tray: Print failed:",n),new Error(`Print failed: ${n instanceof Error?n.message:"Unknown error"}`)}}async printRaw(t,r){try{await this.ensureConnection();const n=ut.configs.create(t.name),a=[{type:"raw",format:"plain",data:r}];await ut.print(n,a),console.log("QZ Tray: Raw print job sent successfully")}catch(n){throw console.error("QZ Tray: Raw print failed:",n),new Error(`Raw print failed: ${n instanceof Error?n.message:"Unknown error"}`)}}async printImage(t,r){try{await this.ensureConnection();const n=ut.configs.create(t.name),a=[{type:"image",format:r.startsWith("data:")?"base64":"file",data:r}];await ut.print(n,a),console.log("QZ Tray: Image print job sent successfully")}catch(n){throw console.error("QZ Tray: Image print failed:",n),new Error(`Image print failed: ${n instanceof Error?n.message:"Unknown error"}`)}}generateESCPOSReceipt(t){let r="";r+="\x1B@",r+="\x1Ba",r+="\x1BE",r+="!",r+=t.companyName+`
`,r+="!\0",r+="\x1BE\0";let n="";return t.address&&(n+=`P.O. Box ${t.address}. `),t.phone1&&(n+=`Tel: ${t.phone1}`),t.phone2&&(n+=`, ${t.phone2}`),t.location&&(n+=` Loc: ${t.location}`),n&&(r+=n+`
`),r+=`--------------------------------
`,r+="\x1Ba\0",r+=`Receipt #: ${t.receiptNumber}
`,t.customer?r+=`Customer: ${t.customer}
`:r+=`Customer: WALK-IN CUSTOMER
`,r+=`Date: ${t.date}
`,t.customerPhone&&(r+=`Phone: ${t.customerPhone}
`),r+="\x1Ba",r+="\x1BE",r+=`RECEIPT
`,r+="\x1BE\0",r+="\x1Ba\0",r+=`--------------------------------
`,r+=`Item                 Qty  Amount
`,r+=`--------------------------------
`,t.items.forEach(a=>{let o=a.name;if(o.length>18&&(r+=o.substring(0,18)+`
`,r+="  "+o.substring(18)+`
`,o=""),o){const i=o.padEnd(18),l=a.quantity.toString().padStart(3),c=a.total.toFixed(2).padStart(7);r+=`${i} ${l} ${c}
`}else{const i=a.quantity.toString().padStart(21),l=a.total.toFixed(2).padStart(7);r+=`${i} ${l}
`}}),r+=`--------------------------------
`,r+="\x1Ba",r+="\x1BE",r+="!",t.paymentMethod==="CREDIT"&&t.creditPercentage?r+=`Total (${t.creditPercentage}% credit):
`:r+=`Total:
`,r+=`GH ${t.totalAmount.toFixed(2)}
`,r+="!\0",r+="\x1BE\0",t.paymentMethod&&(r+="\x1Ba\0",r+=`Payment: ${t.paymentMethod}
`),t.salesperson&&(r+="\x1BE",r+=`Sales Person:
`,r+="\x1BE\0",r+=`${t.salesperson}
`),t.mobileMoneyNumber&&(r+="\x1Ba",r+="\x1BE",r+=`Payment Information
`,r+="\x1BE\0",r+=`Mobile Money: ${t.mobileMoneyNumber}
`),r+="\x1Ba",r+=`
`,r+=`Thank you for your business!
`,r+=`Page 1 of 1
`,r+=`


`,r+="VB\0",r}async ensureConnection(){if(this.isConnected||await this.initialize(),!ut.websocket.isActive())throw new Error("QZ Tray is not connected")}async disconnect(){try{ut.websocket.isActive()&&(await ut.websocket.disconnect(),this.isConnected=!1,this.connectionPromise=null,console.log("QZ Tray: Disconnected successfully"))}catch(t){console.error("QZ Tray: Disconnect failed:",t)}}async getVersion(){try{return await this.ensureConnection(),ut.websocket.isActive()?"QZ Tray Connected":"Unknown"}catch(t){return console.error("QZ Tray: Failed to get version:",t),"Unknown"}}async diagnose(){const t={timestamp:new Date().toISOString(),websocketActive:ut.websocket.isActive(),connectedFlag:this.isConnected,attempts:[]};try{await this.initialize(),t.postInitActive=ut.websocket.isActive()}catch(n){t.initError=n instanceof Error?n.message:String(n)}const r=async(n,a)=>{const o={label:n},i=performance.now();try{const l=await a();o.durationMs=Math.round(performance.now()-i),Array.isArray(l)?(o.count=l.length,o.sample=l.slice(0,5)):o.result=l}catch(l){o.error=l instanceof Error?l.message:String(l)}t.attempts.push(o)};if(ut.websocket.isActive()){await r("printers.find(base)",()=>ut.printers.find());const n=["Microsoft","PDF","HP","EPSON"];for(const a of n)await r(`printers.find(${a})`,()=>ut.printers.find(a));await r("printers.getDefault",()=>ut.printers.getDefault())}return t}}const vr=xs.getInstance(),Da=e=>new Promise((t,r)=>{try{const n=JSON.parse(sessionStorage.getItem("user")||"{}"),a=document.createElement("div");a.id="print-container",a.style.position="fixed",a.style.left="-9999px",a.style.top="0",document.body.appendChild(a);const o=document.createElement("style");o.textContent=`
        @media print {
          /* Hide everything except our print container */
          body > *:not(#print-container) {
            display: none !important;
          }

          /* Reset body styles */
          body {
            margin: 0;
            padding: 0;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
            background: white !important;
          }

          /* Container styles */
          #print-container {
            display: block !important;
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: auto !important;
            height: auto !important;
            overflow: visible !important;
          }

          /* Paper sizes and pagination */
          .print-invoice {
            width: 148mm !important;
            height: 210mm !important;
            padding: 5mm !important;
            margin: 0 !important;
            page-break-after: always !important;
            break-after: page !important;
            background-color: white !important;
            font-family: Arial !important;
            position: relative !important;
            box-sizing: border-box !important;
          }

          .print-invoice:last-of-type {
            page-break-after: auto !important;
            break-after: auto !important;
          }

          .print-receipt {
            width: 80mm !important;
            min-height: fit-content !important;
            padding: 0 !important;
            margin: 0 !important;
            page-break-after: always !important;
            background-color: white !important;
            font-family: Arial !important;
            font-size: 9px !important;
            line-height: 1.2 !important;
            box-sizing: border-box !important;
          }

          @page {
            size: ${e.type==="invoice"?"A5 portrait":"80mm auto"};
            margin: 0mm;
          }
        }

        /* Layout styles */
        .text-center { text-align: center !important; }
        .text-right { text-align: right !important; }
        .text-left { text-align: left !important; }
        .font-bold { font-weight: bold !important; }
        .mb-1 { margin-bottom: 0.25rem !important; }
        .mb-2 { margin-bottom: 0.5rem !important; }
        .mb-3 { margin-bottom: 0.75rem !important; }
        .mb-4 { margin-bottom: 1rem !important; }
        .mt-1 { margin-top: 0.25rem !important; }
        .mt-2 { margin-top: 0.5rem !important; }
        .mt-4 { margin-top: 1rem !important; }
        .mt-16 { margin-top: 4rem !important; }
        .mb-12 { margin-bottom: 3rem !important; }
        .px-8 { padding-left: 2rem !important; padding-right: 2rem !important; }
        .py-4 { padding-top: 1rem !important; padding-bottom: 1rem !important; }
        .p-2 { padding: 0.5rem !important; }
        
        /* Typography */
        .text-base { font-size: 1rem !important; }
        .text-sm { font-size: 0.875rem !important; }
        .text-[8px] { font-size: 8px !important; }
        .text-2xl { font-size: 1.5rem !important; }
        
        /* Grid and Table styles */
        .grid { display: grid !important; }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
        .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)) !important; }
        
        [style*="grid"] {
          border-collapse: collapse !important;
        }
        [style*="grid"] > div {
          min-height: 24px !important;
          padding: 4px 8px !important;
        }
        [style*="border-right: 1px solid black"] {
          border-right: 1px solid black !important;
        }
        [style*="border-bottom: 1px solid black"] {
          border-bottom: 1px solid black !important;
        }
        
        /* Layout utilities */
        .flex { display: flex !important; }
        .flex-col { flex-direction: column !important; }
        .items-center { align-items: center !important; }
        .justify-center { justify-content: center !important; }
        .w-full { width: 100% !important; }
        .max-w-md { max-width: 28rem !important; }
        .max-w-full { max-width: 100% !important; }
        .mx-auto { margin-left: auto !important; margin-right: auto !important; }
        .relative { position: relative !important; }
        .absolute { position: absolute !important; }
        .bottom-4 { bottom: 1rem !important; }
        .left-0 { left: 0 !important; }
        .right-0 { right: 0 !important; }
      `,document.head.appendChild(o);const i=hb(a);i.render(B.createElement(xue,{items:e.items,totalAmount:e.totalAmount,totalItems:e.totalItems,type:e.type,customer:e.customer,salesperson:e.salesperson||(n?{name:n.name}:void 0),paymentMethod:e.paymentMethod,creditPercentage:e.creditPercentage,baseTotal:e.baseTotal,saleId:e.saleId}));const l=()=>{document.head.removeChild(o),document.body.removeChild(a),i.unmount(),window.removeEventListener("afterprint",l),t()};window.addEventListener("afterprint",l),setTimeout(()=>{window.print()},500)}catch(n){r(n)}}),GP=async e=>{try{if(await Li()){console.log("QZ Tray available - attempting silent invoice printing");try{return await Fi(e)}catch(a){console.warn("QZ Tray silent printing failed, falling back to printer service:",a)}}const r={items:e.items,totalAmount:e.totalAmount,totalItems:e.totalItems,customer:e.customer,paymentMethod:e.paymentMethod,creditPercentage:e.creditPercentage,baseTotal:e.baseTotal,saleId:e.saleId},n=await ph.getWholesalePrinter();return n?(console.log("Using configured wholesale printer:",n.name),await ph.printInvoice(r),!0):(console.log("No wholesale printer configured, falling back to browser print"),await Da({...e,type:"invoice"}),!0)}catch(t){return console.error("Invoice printing failed:",t),console.log("Falling back to browser print due to error"),await Da({...e,type:"invoice"}),!0}},ZP=async e=>{try{if(await Li()){console.log("QZ Tray available - attempting silent receipt printing");try{return await Ui(e,void 0,!0)}catch(a){console.warn("QZ Tray silent printing failed, falling back to printer service:",a)}}const r={items:e.items,totalAmount:e.totalAmount,totalItems:e.totalItems,customer:e.customer,paymentMethod:e.paymentMethod,creditPercentage:e.creditPercentage,baseTotal:e.baseTotal,saleId:e.saleId},n=await ph.getRetailPrinter();return n?(console.log("Using configured retail printer:",n.name),await ph.printReceipt(r),!0):(console.log("No retail printer configured, falling back to browser print"),await Da({...e,type:"receipt"}),!0)}catch(t){return console.error("Receipt printing failed:",t),console.log("Falling back to browser print due to error"),await Da({...e,type:"receipt"}),!0}},Nue=async e=>{var o,i;let t=null;try{const l=await fetch(`${mn()}/settings/company`,{credentials:"include"});l.ok&&(t=await l.json())}catch(l){console.warn("Could not fetch company settings:",l)}const r=JSON.parse(localStorage.getItem("user")||"{}"),n=new Date().toLocaleString("en-US",{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),a=e.saleId?e.saleId.toString().padStart(7,"0"):"PREVIEW";if(e.type==="invoice"){const c=Math.ceil(e.items.length/17),u=Array.from({length:c},(f,p)=>e.items.slice(p*17,(p+1)*17));let d="";return u.forEach((f,p)=>{d+=`
        <div class="print-invoice" style="
          width: 148mm;
          height: 210mm;
          font-family: Arial;
          position: relative;
          padding: 0;
          margin: 0 auto;
          box-sizing: border-box;
          page-break-after: ${p<u.length-1?"always":"auto"};
        ">
          <!-- Company Name and Address -->
          <div style="width: 100%; margin-bottom: 1px;">
            <div style="text-align: center; border-bottom: 1px solid black; padding-bottom: 1px;">
              <h1 style="margin: 0; margin-bottom: 1px; font-size: 20px; font-weight: bold;">
                ${(t==null?void 0:t.companyName)||"COMPANY NAME"}
              </h1>
            </div>
            <div style="text-align: left; margin-top: 1px;">
              <p style="margin: 0; white-space: nowrap; font-size: 14px;">
                ${t!=null&&t.address?`P.O. Box ${t.address}. `:""}
                ${t!=null&&t.phone1?`Tel: ${t.phone1}`:""}
                ${t!=null&&t.phone2?`, ${t.phone2}`:""}
                ${t!=null&&t.location?` Loc: ${t.location}`:""}
              </p>
            </div>
          </div>

          <!-- Receipt # and Customer -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; margin-bottom: 1px; font-size: 14px;">
            <div style="text-align: left;">
              <span>Receipt: ${a}</span>
            </div>
            <div style="text-align: right;">
              <span>Customer: ${e.customer?e.customer.name:"WALK-IN CUSTOMER"}</span>
            </div>
          </div>

          <!-- Date and Centered INVOICE -->
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; margin-bottom: 1px; font-size: 14px;">
            <div style="text-align: left;">
              <span>Date: ${n}</span>
            </div>
            <div style="text-align: center; font-weight: bold;">
              <span style="font-size: 16px;">INVOICE</span>
            </div>
            <div style="text-align: right;">
              ${e.customer&&e.customer.phone?`<span>Phone: ${e.customer.phone}</span>`:""}
            </div>
          </div>

          <!-- Table -->
          <div style="width: 100%; border: 1px solid black;">
            <div style="display: grid; grid-template-columns: 55% 15% 15% 15%; border-bottom: 1px solid black;">
              <div style="padding: 2px 6px; border-right: 1px solid black; font-weight: bold; text-align: center; font-size: 14px;">Name</div>
              <div style="padding: 2px 6px; border-right: 1px solid black; text-align: center; font-weight: bold; font-size: 14px;">Quantity</div>
              <div style="padding: 2px 6px; border-right: 1px solid black; text-align: center; font-weight: bold; font-size: 14px;">Price</div>
              <div style="padding: 2px 6px; text-align: center; font-weight: bold; font-size: 14px;">Amount</div>
            </div>
            ${f.map((h,y)=>`
              <div style="display: grid; grid-template-columns: 55% 15% 15% 15%; border-bottom: ${y===f.length-1?"none":"1px solid black"}; min-height: 16px;">
                <div style="padding: 2px 6px; border-right: 1px solid black; font-size: 13px;">${h.name}</div>
                <div style="padding: 2px 6px; border-right: 1px solid black; text-align: center; font-size: 13px;">${h.quantity}</div>
                <div style="padding: 2px 6px; border-right: 1px solid black; text-align: center; font-size: 13px;">${h.price.toFixed(2)}</div>
                <div style="padding: 2px 6px; text-align: center; font-size: 13px;">${h.total.toFixed(2)}</div>
              </div>
            `).join("")}
          </div>

          ${p===u.length-1?`
            <!-- Total Amount -->
            ${e.paymentMethod==="CASH"?`
              <div style="border-top: 1px solid black; padding-top: 4px; text-align: right; margin-bottom: 8px;">
                <span style="font-weight: bold; font-size: 16px;">Total: GH${e.totalAmount.toFixed(2)}</span>
              </div>
            `:`
              <div style="display: grid; grid-template-columns: 75% 25%; border-top: 1px solid black; padding-top: 4px; margin-bottom: 8px;">
                <div style="padding: 4px 8px; text-align: right; font-weight: bold; font-size: 16px;">
                  Total (${e.creditPercentage}% credit):
                </div>
                <div style="padding: 4px 8px; text-align: right; font-weight: bold; font-size: 16px;">
                  GH${e.totalAmount.toFixed(2)}
                </div>
              </div>
            `}

            <!-- Sales Person -->
            <div style="font-size: 14px; margin-bottom: 4px; margin-top: 8px;">
              <p style="font-weight: bold; margin: 0;">Sales Person:</p>
              <p style="margin: 0;">${(r==null?void 0:r.name)||"Unknown"}</p>
            </div>

            <!-- Signature Section -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px; margin-top: 16px; margin-bottom: 8px;">
              <div>
                <p style="font-size: 14px; font-weight: bold; margin-bottom: 4px; margin: 0;">Served by:</p>
                <div style="border-bottom: 1px dotted black; height: 20px; width: 100%;"></div>
              </div>
              <div>
                <p style="font-size: 14px; font-weight: bold; margin-bottom: 4px; margin: 0;">Checked by:</p>
                <div style="border-bottom: 1px dotted black; height: 20px; width: 100%;"></div>
              </div>
            </div>

            <!-- Payment Info -->
            <div style="text-align: center; font-size: 14px; margin: 8px 0; font-weight: bold;">
              ${t!=null&&t.mobileMoneyNumber?`
                <p style="margin: 0;">Please pay through Mobile Money ${t.mobileMoneyNumber}</p>
              `:""}
            </div>
          `:""}

          <!-- Footer -->
          <div style="position: absolute; bottom: 4px; left: 0; right: 0; text-align: center; font-size: 14px;">
            <span>Page ${p+1} of ${c}</span>
          </div>
        </div>
      `}),d}else return`
      <div class="print-receipt" style="
        width: 80mm;
        font-family: Arial;
        font-size: 16px;
        line-height: 1.3;
        padding: 1mm 2mm;
        margin: 0 auto;
        box-sizing: border-box;
        overflow-wrap: break-word;
        word-wrap: break-word;
      ">
        <!-- Business Name -->
        <div style="width: 100%; text-align: center; margin-bottom: 1px;">
          <div style="border-bottom: 1px solid black; margin-bottom: 1px;">
            <h1 style="font-size: 18px; font-weight: bold; margin-bottom: 1px;">
              ${(t==null?void 0:t.companyName)||"COMPANY NAME"}
            </h1>
          </div>
          <p style="font-size: 12px; margin-bottom: 0;">
            ${t!=null&&t.address?`P.O. Box ${t.address}. `:""}
            ${t!=null&&t.phone1?`Tel: ${t.phone1}`:""}
            ${t!=null&&t.phone2?`, ${t.phone2}`:""}
            ${t!=null&&t.location?` Loc: ${t.location}`:""}
          </p>
        </div>

        <!-- Receipt Info -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; margin-bottom: 1px; font-size: 12px;">
          <div style="text-align: left;">
            <span>Receipt #: ${a}</span>
          </div>
          <div style="text-align: right;">
            <span>Customer: ${((o=e.customer)==null?void 0:o.name)||"WALK-IN CUSTOMER"}</span>
          </div>
        </div>

        <!-- Date and Label -->
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; margin-bottom: 2px; font-size: 10px;">
          <div style="text-align: left;">
            <span>Date: ${n}</span>
          </div>
          <div style="text-align: center; font-weight: bold;">
            <span>RECEIPT</span>
          </div>
          <div style="text-align: right;">
            ${(i=e.customer)!=null&&i.phone?`<span>Phone: ${e.customer.phone}</span>`:""}
          </div>
        </div>

        <!-- Table -->
        <div style="width: 100%; border: 1px solid black;">
          <div style="display: grid; grid-template-columns: 60% 20% 20%; border-top: 1px solid black; border-bottom: 1px solid black;">
            <div style="padding: 2px; border-right: 1px solid black; font-weight: bold; font-size: 13px;">Item</div>
            <div style="padding: 2px; border-right: 1px solid black; text-align: center; font-weight: bold; font-size: 13px;">Qty</div>
            <div style="padding: 2px; text-align: center; font-weight: bold; font-size: 13px;">Amount</div>
          </div>
          ${e.items.map(c=>`
            <div style="display: grid; grid-template-columns: 60% 20% 20%; border-bottom: 1px solid black;">
              <div style="padding: 2px; border-right: 1px solid black; font-size: 14px;">${c.name}</div>
              <div style="padding: 2px; border-right: 1px solid black; text-align: center; font-size: 13px;">${c.quantity}</div>
              <div style="padding: 2px; text-align: center; font-size: 13px;">${(c.quantity*c.price).toFixed(2)}</div>
            </div>
          `).join("")}
        </div>

        <!-- Total Section -->
        <div style="border-top: 1px solid black; margin-top: 1px; padding-top: 1px; display: flex; justify-content: flex-end; width: 100%;">
          <div style="display: flex; align-items: center; gap: 8px; padding: 2px; font-weight: bold; font-size: 16px; white-space: nowrap;">
            <span>Total ${e.paymentMethod==="CREDIT"&&e.creditPercentage&&e.creditPercentage>0?`(${e.creditPercentage}% credit)`:""}:</span>
            <span>GH ${e.totalAmount.toFixed(2)}</span>
          </div>
        </div>

        <!-- Sales Person -->
        <div style="font-size: 12px; margin: 2px 0;">
          <p style="font-weight: bold;">Sales Person:</p>
          <p>${(r==null?void 0:r.name)||"Unknown"}</p>
        </div>

        <!-- MoMo Info -->
        ${t!=null&&t.mobileMoneyNumber?`
          <div style="text-align: center; margin-top: 2px; font-size: 14px;">
            <p style="font-weight: bold;">Payment Information</p>
            <p>Mobile Money: ${t.mobileMoneyNumber}</p>
          </div>
        `:""}

        <!-- Footer -->
        <div style="margin-top: 2px; text-align: center; font-size: 12px;">
          <p>Thank you for your business!</p>
          <span>Page 1 of 1</span>
        </div>
      </div>
    `},Li=async()=>{try{return await vr.isAvailable()}catch{return!1}},kue=async()=>{try{return await vr.initialize(),await vr.getPrinters()}catch(e){return console.error("Failed to get QZ printers:",e),[]}},Lw=async()=>{try{return await vr.initialize(),await vr.getDefaultPrinter()}catch(e){return console.error("Failed to get QZ default printer:",e),null}},RI=async(e,t)=>{try{if(!await Li())throw new Error("QZ Tray is not available. Please ensure QZ Tray is installed and running.");let n=t;if(!n){const u=e.type==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",d=localStorage.getItem(u);d&&(n=d)}if(!n){const u=await Lw();u&&(n=u)}if(!n)throw new Error("No printer specified, persisted, or default printer found");const a=await Nue(e),o=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>${e.type==="invoice"?"Invoice":"Receipt"} ${e.saleId||"Preview"}</title>
  <style>
    ${e.type==="invoice"?`
      @page { size: A5 portrait; margin: 5mm; }
      body { 
        font-family: Arial, sans-serif; 
        margin: 0; 
        padding: 0;
        font-size: 12px;
        line-height: 1.4;
        color: black;
        background: white;
      }
      .print-invoice {
        width: 138mm;
        max-width: 138mm;
        margin: 0 auto;
        padding: 5mm;
        box-sizing: border-box;
      }
    `:`
      @page { size: 80mm auto; margin: 2mm; }
      body { 
        font-family: Arial, sans-serif; 
        margin: 0; 
        padding: 0;
        font-size: 10px;
        line-height: 1.2;
        width: 76mm;
        color: black;
        background: white;
      }
      .print-receipt {
        width: 76mm;
        max-width: 76mm;
        margin: 0 auto;
        padding: 2mm;
        box-sizing: border-box;
      }
    `}
    
    /* Ensure all elements are print-friendly */
    * {
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
      color-adjust: exact !important;
    }
    
    /* Grid and table styles */
    [style*="display: grid"] {
      border-collapse: collapse;
    }
    
    /* Border styles */
    [style*="border"] {
      border-color: black !important;
    }
  </style>
</head>
<body>
  ${a}
</body>
</html>`,i={name:n,type:"local"},l={content:o,options:{copies:1,jobName:`${e.type==="invoice"?"Invoice":"Receipt"} ${e.saleId||"Preview"}`,colorType:"blackwhite",orientation:(e.type==="invoice","portrait"),paperSize:e.type==="invoice"?{width:5.83,height:8.27,units:"in"}:{width:3.15,height:11,units:"in"},margins:{top:.1,right:.1,bottom:.1,left:.1,units:"in"}}};return await vr.printHTML(i,l),console.log(`QZ Tray: Successfully sent ${e.type} to ${n}`),!0;const c={content:a,options:{copies:1,jobName:`${e.type==="invoice"?"Invoice":"Receipt"} ${e.saleId||"Preview"}`,colorType:"blackwhite",orientation:(e.type==="invoice","portrait"),paperSize:e.type==="invoice"?{width:5.83,height:8.27,units:"in"}:{width:3.15,height:11,units:"in"},margins:{top:.1,right:.1,bottom:.1,left:.1,units:"in"}}};return await vr.printHTML(i,c),console.log(`QZ Tray: Successfully sent ${e.type} to ${n}`),!0}catch(r){throw console.error("QZ Tray silent print failed:",r),r}},Pue=async(e,t)=>{var r,n;try{if(!await Li())throw new Error("QZ Tray is not available. Please ensure QZ Tray is installed and running.");let o=t;if(!o){const d=localStorage.getItem("qz.receiptPrinter");d&&(o=d)}if(!o){const d=await Lw();d&&(o=d)}if(!o)throw new Error("No printer specified, persisted, or default printer found");let i=null;try{const d=await fetch(`${mn()}/settings/company`,{credentials:"include"});d.ok&&(i=await d.json())}catch(d){console.warn("Could not fetch company settings:",d)}const l=JSON.parse(localStorage.getItem("user")||"{}"),c=vr.generateESCPOSReceipt({companyName:(i==null?void 0:i.companyName)||"COMPANY NAME",address:(i==null?void 0:i.address)||"",phone1:(i==null?void 0:i.phone1)||"",phone2:(i==null?void 0:i.phone2)||"",location:(i==null?void 0:i.location)||"",receiptNumber:e.saleId?e.saleId.toString().padStart(7,"0"):"PREVIEW",date:new Date().toLocaleString("en-US",{year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),customer:(r=e.customer)==null?void 0:r.name,customerPhone:(n=e.customer)==null?void 0:n.phone,items:e.items,totalAmount:e.totalAmount,paymentMethod:e.paymentMethod,creditPercentage:e.creditPercentage,salesperson:l==null?void 0:l.name,mobileMoneyNumber:i==null?void 0:i.mobileMoneyNumber}),u={name:o,type:"local"};return await vr.printRaw(u,c),console.log(`QZ Tray: Successfully sent thermal receipt to ${o}`),!0}catch(a){throw console.error("QZ Tray thermal print failed:",a),a}},Fi=async(e,t)=>{try{return await Li()?(console.log("Using QZ Tray for silent invoice printing"),await RI({...e,type:"invoice"},t)):(console.log("QZ Tray not available, falling back to printer service"),await GP(e))}catch(r){return console.error("Silent invoice printing failed:",r),console.log("Falling back to browser print due to error"),await GP(e)}},Ui=async(e,t,r=!1)=>{try{return await Li()?(console.log(`Using QZ Tray for silent receipt printing${r?" (thermal)":""}`),r?await Pue({...e,type:"receipt"},t):await RI({...e,type:"receipt"},t)):(console.log("QZ Tray not available, falling back to printer service"),await ZP(e))}catch(n){return console.error("Silent receipt printing failed:",n),console.log("Falling back to browser print due to error"),await ZP(e)}},Eue=async e=>{try{await vr.initialize();const t=`
      <div style="text-align: center; font-family: Arial;">
        <h2>QZ Tray Test Print</h2>
        <p>Date: ${new Date().toLocaleString()}</p>
        <p>Printer: ${e}</p>
        <p>Status: Connection successful!</p>
      </div>
    `,r={name:e,type:"local"},n={content:t,options:{copies:1,jobName:"QZ Tray Test Print"}};return await vr.printHTML(r,n),console.log(`QZ Tray test print sent to ${e}`),!0}catch(t){return console.error("QZ Tray test print failed:",t),!1}},Cue=async()=>{try{if(!await Li())return{available:!1};const t=await vr.getVersion(),r=await kue();return{available:!0,version:t,printers:r}}catch(e){return console.error("Failed to get QZ Tray info:",e),{available:!1}}},Aue=()=>{var p,h;const{id:e}=Mh(),t=yt(),[r,n]=g.useState(null),[a,o]=g.useState(!0),[i,l]=g.useState(null),[c,u]=g.useState(!1),d=y=>{const m=typeof y=="string"?parseFloat(y):y;return isNaN(m)?"0.00":m.toFixed(2)};if(g.useEffect(()=>{(async()=>{if(!e){l("Sale ID is required"),o(!1);return}try{const m=await me(`/api/sales/${e}`);if(m.ok){const x=await m.json();if(!x||typeof x!="object")throw new Error("Invalid response format");const w={...x,items:Array.isArray(x.saleitem)?x.saleitem.map(v=>({...v,quantity:typeof v.quantity=="string"?parseFloat(v.quantity):v.quantity,price:typeof v.price=="string"?parseFloat(v.price):v.price})):[]};n(w),l(null)}else if(m.status===401)t("/login");else throw new Error(`Failed to fetch sale details: ${m.statusText}`)}catch(m){const x=m instanceof Error?m.message:"An unexpected error occurred";console.error("Error fetching sale details:",x),l(x)}finally{o(!1)}})()},[e,t]),a)return s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});if(i)return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[s.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),s.jsx("p",{className:"text-gray-600 mb-4",children:i}),s.jsx("button",{onClick:()=>t("/sales"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to Sales"})]});if(!r)return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Sale not found"}),s.jsx("button",{onClick:()=>t("/sales"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to Sales"})]});const f=async y=>{if(!r||!r.items||r.items.length===0){alert("No items to print");return}try{const m={type:y,items:r.items.map(j=>({id:j.id.toString(),name:j.product.name,price:Number(j.price),quantity:Number(j.quantity),total:Number(j.price)*Number(j.quantity),unit:j.unit})),totalAmount:Number(r.totalAmount),totalItems:r.items.reduce((j,S)=>j+Number(S.quantity),0),customer:r.customer||void 0,paymentMethod:r.paymentMethod==="CREDIT"||r.saleType==="CREDIT"?"CREDIT":"CASH",creditPercentage:r.creditPercentage?Number(r.creditPercentage):0,baseTotal:r.creditPercentage&&(r.paymentMethod==="CREDIT"||r.saleType==="CREDIT")?Number(r.totalAmount)/(1+Number(r.creditPercentage)/100):void 0,saleId:r.id},x=y==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",w=localStorage.getItem(x)||void 0;let v=!1;if((localStorage.getItem("qz.printMode")==="browser"?"browser":"silent")==="silent"&&w)try{const j={...m,salesperson:r.user?{name:r.user.name}:void 0};y==="invoice"?v=await Fi(j,w):v=await Ui(j,w)}catch(j){console.warn("Silent QZ printing failed, falling back to standard print:",j),v=!1}v||await Da({...m,salesperson:r.user?{name:r.user.name}:void 0}),u(!1)}catch(m){console.error("Error preparing print:",m),alert("Error preparing print: "+(m instanceof Error?m.message:"Unknown error"))}};return s.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[s.jsxs("div",{className:"no-print flex justify-between items-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Sale Details"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>u(!c),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:[s.jsx(dn.Printer,{className:"w-4 h-4 mr-2"}),"Print Sale"]}),c&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10",children:[s.jsx("button",{onClick:()=>{f("invoice"),u(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100",children:"Print Invoice (A5)"}),s.jsx("button",{onClick:()=>{f("receipt"),u(!1)},className:"block w-full text-left px-4 py-2 hover:bg-gray-100",children:"Print Receipt"})]})]}),s.jsx("button",{onClick:()=>t("/sales"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to Sales"})]})]}),s.jsxs("div",{className:"no-print bg-white rounded-lg shadow-lg p-6 mb-8",children:["        ",s.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Sale Information"}),s.jsxs("p",{className:"text-gray-600",children:["Sale ID: ",r.id]}),s.jsxs("p",{className:"text-gray-600",children:["Date: ",new Date(r.createdAt).toLocaleString()]}),(r.paymentMethod==="CREDIT"||r.saleType==="CREDIT")&&r.creditPercentage&&Number(r.creditPercentage)>0?s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-gray-600",children:"Payment Method: Credit Card"}),s.jsxs("p",{className:"text-gray-600",children:["Subtotal: ",d(Number(r.totalAmount)/(1+Number(r.creditPercentage)/100))]}),s.jsxs("p",{className:"text-gray-600",children:["Credit Surcharge (",Number(r.creditPercentage).toFixed(1),"%): ",d(Number(r.totalAmount)/(1+Number(r.creditPercentage)/100)*Number(r.creditPercentage)/100)]}),s.jsxs("p",{className:"text-gray-600 font-semibold",children:["Total Amount: ",d(r.totalAmount)]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-gray-600",children:"Payment Method: Cash"}),s.jsxs("p",{className:"text-gray-600",children:["Total Amount: ",d(r.totalAmount)]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Customer & Salesperson"}),s.jsxs("p",{className:"text-gray-600",children:["Customer: ",r.customer?r.customer.name:"Walk-in Customer",((p=r.customer)==null?void 0:p.phone)&&` (${r.customer.phone})`]}),s.jsxs("p",{className:"text-gray-600",children:["Salesperson: ",r.user.name]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Items"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(h=r.items)==null?void 0:h.map(y=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.product.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y.unit}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d(y.quantity)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",d(y.price)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",d(Number(y.quantity)*Number(y.price))]})]},y.id))})]})})]})]})]})},Hm=({isOpen:e,onClose:t,onSelect:r,units:n})=>{if(!e)return null;const o=n.reduce((i,l)=>{const c=i.find(u=>u.name===l.name);return!c||l.unitId>c.unitId?[...i.filter(d=>d.name!==l.name),l]:i},[]).sort((i,l)=>i.conversionRate===1?-1:l.conversionRate===1?1:i.name.localeCompare(l.name));return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden w-[400px]",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Choose Unit of Measure"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-4 grid grid-cols-2 gap-4",children:o.map(i=>s.jsxs("button",{onClick:()=>{r(i),t()},className:`p-4 rounded-lg border text-center hover:bg-blue-50 transition-colors
                ${i.conversionRate===1?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[s.jsx("div",{className:"text-lg font-semibold",children:i.name}),s.jsx("div",{className:"text-sm text-gray-600",children:i.conversionRate===1?"Base Unit":`1 ${i.name} = ${i.conversionRate} base units`}),s.jsxs("div",{className:"text-sm font-medium text-blue-600",children:["",i.price.toFixed(2)]})]},`${i.name}-${i.unitId}`))}),s.jsx("div",{className:"p-4 bg-gray-50 flex justify-end",children:s.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Cancel"})})]})})},sa=Object.create(null);sa.open="0";sa.close="1";sa.ping="2";sa.pong="3";sa.message="4";sa.upgrade="5";sa.noop="6";const jf=Object.create(null);Object.keys(sa).forEach(e=>{jf[sa[e]]=e});const rx={type:"error",data:"parser error"},DI=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",MI=typeof ArrayBuffer=="function",LI=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Fw=({type:e,data:t},r,n)=>DI&&t instanceof Blob?r?n(t):XP(t,n):MI&&(t instanceof ArrayBuffer||LI(t))?r?n(t):XP(new Blob([t]),n):n(sa[e]+(t||"")),XP=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function YP(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let cy;function Tue(e,t){if(DI&&e.data instanceof Blob)return e.data.arrayBuffer().then(YP).then(t);if(MI&&(e.data instanceof ArrayBuffer||LI(e.data)))return t(YP(e.data));Fw(e,!1,r=>{cy||(cy=new TextEncoder),t(cy.encode(r))})}const JP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<JP.length;e++)xc[JP.charCodeAt(e)]=e;const Oue=e=>{let t=e.length*.75,r=e.length,n,a=0,o,i,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(n=0;n<r;n+=4)o=xc[e.charCodeAt(n)],i=xc[e.charCodeAt(n+1)],l=xc[e.charCodeAt(n+2)],c=xc[e.charCodeAt(n+3)],d[a++]=o<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},_ue=typeof ArrayBuffer=="function",Uw=(e,t)=>{if(typeof e!="string")return{type:"message",data:FI(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:Iue(e.substring(1),t)}:jf[r]?e.length>1?{type:jf[r],data:e.substring(1)}:{type:jf[r]}:rx},Iue=(e,t)=>{if(_ue){const r=Oue(e);return FI(r,t)}else return{base64:!0,data:e}},FI=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},UI="",$ue=(e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((o,i)=>{Fw(o,!1,l=>{n[i]=l,++a===r&&t(n.join(UI))})})},Rue=(e,t)=>{const r=e.split(UI),n=[];for(let a=0;a<r.length;a++){const o=Uw(r[a],t);if(n.push(o),o.type==="error")break}return n};function Due(){return new TransformStream({transform(e,t){Tue(e,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let uy;function Xd(e){return e.reduce((t,r)=>t+r.length,0)}function Yd(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function Mue(e,t){uy||(uy=new TextDecoder);const r=[];let n=0,a=-1,o=!1;return new TransformStream({transform(i,l){for(r.push(i);;){if(n===0){if(Xd(r)<1)break;const c=Yd(r,1);o=(c[0]&128)===128,a=c[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Xd(r)<2)break;const c=Yd(r,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Xd(r)<8)break;const c=Yd(r,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(rx);break}a=d*Math.pow(2,32)+u.getUint32(4),n=3}else{if(Xd(r)<a)break;const c=Yd(r,a);l.enqueue(Uw(o?c:uy.decode(c),t)),n=0}if(a===0||a>e){l.enqueue(rx);break}}}})}const BI=4;function qt(e){if(e)return Lue(e)}function Lue(e){for(var t in qt.prototype)e[t]=qt.prototype[t];return e}qt.prototype.on=qt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};qt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};qt.prototype.off=qt.prototype.removeListener=qt.prototype.removeAllListeners=qt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};qt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};qt.prototype.emitReserved=qt.prototype.emit;qt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};qt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Vm=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),hn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Fue="arraybuffer";function zI(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const Uue=hn.setTimeout,Bue=hn.clearTimeout;function Wm(e,t){t.useNativeTimers?(e.setTimeoutFn=Uue.bind(hn),e.clearTimeoutFn=Bue.bind(hn)):(e.setTimeoutFn=hn.setTimeout.bind(hn),e.clearTimeoutFn=hn.clearTimeout.bind(hn))}const zue=1.33;function que(e){return typeof e=="string"?Hue(e):Math.ceil((e.byteLength||e.size)*zue)}function Hue(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function qI(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Vue(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function Wue(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let o=r[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class Que extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class Bw extends qt{constructor(t){super(),this.writable=!1,Wm(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new Que(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Uw(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=Vue(t);return r.length?"?"+r:""}}class Kue extends Bw{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Rue(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,$ue(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=qI()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let HI=!1;try{HI=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Gue=HI;function Zue(){}class Xue extends Kue{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let Ts=class Nf extends qt{constructor(t,r,n){super(),this.createRequest=t,Wm(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=zI(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Nf.requestsCount++,Nf.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Zue,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Nf.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Ts.requestsCount=0;Ts.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",eE);else if(typeof addEventListener=="function"){const e="onpagehide"in hn?"pagehide":"unload";addEventListener(e,eE,!1)}}function eE(){for(let e in Ts.requests)Ts.requests.hasOwnProperty(e)&&Ts.requests[e].abort()}const Yue=function(){const e=VI({xdomain:!1});return e&&e.responseType!==null}();class Jue extends Xue{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=Yue&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ts(VI,this.uri(),t)}}function VI(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Gue))return new XMLHttpRequest}catch{}if(!t)try{return new hn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const WI=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ede extends Bw{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=WI?{}:zI(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;Fw(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}a&&Vm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=qI()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const dy=hn.WebSocket||hn.MozWebSocket;class tde extends ede{createSocket(t,r,n){return WI?new dy(t,r,n):r?new dy(t,r):new dy(t)}doWrite(t,r){this.ws.send(r)}}class rde extends Bw{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=Mue(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),a=Due();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const o=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),o())}).catch(l=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;this._writer.write(n).then(()=>{a&&Vm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const nde={websocket:tde,webtransport:rde,polling:Jue},ade=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ode=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function nx(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=ade.exec(e||""),o={},i=14;for(;i--;)o[ode[i]]=a[i]||"";return r!=-1&&n!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=ide(o,o.path),o.queryKey=sde(o,o.query),o}function ide(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function sde(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,o){a&&(r[a]=o)}),r}const ax=typeof addEventListener=="function"&&typeof removeEventListener=="function",kf=[];ax&&addEventListener("offline",()=>{kf.forEach(e=>e())},!1);class xo extends qt{constructor(t,r){if(super(),this.binaryType=Fue,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=nx(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=nx(r.host).host);Wm(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Wue(this.opts.query)),ax&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},kf.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=BI,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&xo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",xo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=que(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Vm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:t,data:r,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(xo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ax&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=kf.indexOf(this._offlineEventListener);n!==-1&&kf.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}xo.protocol=BI;class lde extends xo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;xo.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;xo.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=r.name,this.emitReserved("upgradeError",p)}}))};function o(){n||(n=!0,d(),r.close(),r=null)}const i=f=>{const p=new Error("probe error: "+f);p.transport=r.name,o(),this.emitReserved("upgradeError",p)};function l(){i("transport closed")}function c(){i("socket closed")}function u(f){r&&f.name!==r.name&&o()}const d=()=>{r.removeListener("open",a),r.removeListener("error",i),r.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};r.once("open",a),r.once("error",i),r.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let cde=class extends lde{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>nde[a]).filter(a=>!!a)),super(t,n)}};function ude(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=nx(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+t,n.href=n.protocol+"://"+o+(r&&r.port===n.port?"":":"+n.port),n}const dde=typeof ArrayBuffer=="function",fde=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,QI=Object.prototype.toString,pde=typeof Blob=="function"||typeof Blob<"u"&&QI.call(Blob)==="[object BlobConstructor]",hde=typeof File=="function"||typeof File<"u"&&QI.call(File)==="[object FileConstructor]";function zw(e){return dde&&(e instanceof ArrayBuffer||fde(e))||pde&&e instanceof Blob||hde&&e instanceof File}function Pf(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Pf(e[r]))return!0;return!1}if(zw(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Pf(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Pf(e[r]))return!0;return!1}function mde(e){const t=[],r=e.data,n=e;return n.data=ox(r,t),n.attachments=t.length,{packet:n,buffers:t}}function ox(e,t){if(!e)return e;if(zw(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=ox(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=ox(e[n],t));return r}return e}function gde(e,t){return e.data=ix(e.data,t),delete e.attachments,e}function ix(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=ix(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=ix(e[r],t));return e}const yde=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],vde=5;var et;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(et||(et={}));class xde{constructor(t){this.replacer=t}encode(t){return(t.type===et.EVENT||t.type===et.ACK)&&Pf(t)?this.encodeAsBinary({type:t.type===et.EVENT?et.BINARY_EVENT:et.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===et.BINARY_EVENT||t.type===et.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=mde(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function tE(e){return Object.prototype.toString.call(e)==="[object Object]"}class qw extends qt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===et.BINARY_EVENT;n||r.type===et.BINARY_ACK?(r.type=n?et.EVENT:et.ACK,this.reconstructor=new bde(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(zw(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(et[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===et.BINARY_EVENT||n.type===et.BINARY_ACK){const o=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const i=t.substring(o,r);if(i!=Number(i)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(i)}if(t.charAt(r+1)==="/"){const o=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(o,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const o=r+1;for(;++r;){const i=t.charAt(r);if(i==null||Number(i)!=i){--r;break}if(r===t.length)break}n.id=Number(t.substring(o,r+1))}if(t.charAt(++r)){const o=this.tryParse(t.substr(r));if(qw.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case et.CONNECT:return tE(r);case et.DISCONNECT:return r===void 0;case et.CONNECT_ERROR:return typeof r=="string"||tE(r);case et.EVENT:case et.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&yde.indexOf(r[0])===-1);case et.ACK:case et.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class bde{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=gde(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const wde=Object.freeze(Object.defineProperty({__proto__:null,Decoder:qw,Encoder:xde,get PacketType(){return et},protocol:vde},Symbol.toStringTag,{value:"Module"}));function In(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const Sde=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class KI extends qt{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[In(t,"open",this.onopen.bind(this)),In(t,"packet",this.onpacket.bind(this)),In(t,"error",this.onerror.bind(this)),In(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,a,o;if(Sde.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const i={type:et.EVENT,data:r};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,f=r.pop();this._registerAckCallback(d,f),i.id=d}const l=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},a),i=(...l)=>{this.io.clearTimeoutFn(o),r.apply(this,l)};i.withError=!0,this.acks[t]=i}emitWithAck(t,...r){return new Promise((n,a)=>{const o=(i,l)=>i?a(i):n(l);o.withError=!0,r.push(o),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...o)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:et.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case et.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case et.EVENT:case et.BINARY_EVENT:this.onevent(t);break;case et.ACK:case et.BINARY_ACK:this.onack(t);break;case et.DISCONNECT:this.ondisconnect();break;case et.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:et.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Ml(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ml.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Ml.prototype.reset=function(){this.attempts=0};Ml.prototype.setMin=function(e){this.ms=e};Ml.prototype.setMax=function(e){this.max=e};Ml.prototype.setJitter=function(e){this.jitter=e};class sx extends qt{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Wm(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Ml({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||wde;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new cde(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=In(r,"open",function(){n.onopen(),t&&t()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},i=In(r,"error",o);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(In(t,"ping",this.onping.bind(this)),In(t,"data",this.ondata.bind(this)),In(t,"error",this.onerror.bind(this)),In(t,"close",this.onclose.bind(this)),In(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Vm(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new KI(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const fc={};function di(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=ude(e,t.path||"/socket.io"),n=r.source,a=r.id,o=r.path,i=fc[a]&&o in fc[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||i;let c;return l?c=new sx(n,t):(fc[a]||(fc[a]=new sx(n,t)),c=fc[a]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(di,{Manager:sx,Socket:KI,io:di,connect:di});const jde=3e4,Nde=()=>{const{id:e}=Mh(),t=yt(),[r,n]=g.useState(""),[a,o]=g.useState(!1),[i,l]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[p,h]=g.useState(!1),[y,m]=g.useState(null),[x,w]=g.useState(!1),[v,b]=g.useState(!0),[j,S]=g.useState(null),[k,N]=g.useState("retail"),[P,C]=g.useState(!1),[E,_]=g.useState(null),[L,U]=g.useState(0),[D,I]=g.useState(""),[A,$]=g.useState(""),[O,R]=g.useState(null),[q,V]=g.useState(!1),[z,J]=g.useState([]),[W,F]=g.useState(null),[H,X]=g.useState("CASH"),[se,G]=g.useState(0),[oe,ae]=g.useState(!1),[te,be]=g.useState(null),[ge,je]=g.useState(!1),[Se,Ee]=g.useState(!1),[Oe,re]=g.useState(-1),[Q,Y]=g.useState(-1),ie=g.useRef(null),fe=g.useRef(null),ye=g.useRef(null),Re=g.useRef({}),Te=g.useRef(null),pe=g.useRef(null),[Ae,He]=g.useState({});g.useEffect(()=>{const ne=di("https://localhost:5443");return ne.on("stock-update",ce=>{f(ve=>ve.map(Ce=>Ce.id===ce.productId?{...Ce,stock:ce.newStock,version:ce.version}:Ce))}),()=>{ne.disconnect()}},[]),g.useEffect(()=>{const Z=setTimeout(()=>{$(D)},300);return()=>clearTimeout(Z)},[D]),g.useEffect(()=>{A.trim().length===0&&V(!1)},[A,D]),g.useEffect(()=>{Y(-1)},[A]),g.useEffect(()=>{(async()=>{try{const ne=await We.getStatus();ne.success&&ne.status&&(je(ne.status.connected),ne.status.connected&&await We.displayWelcome())}catch(ne){console.error("Error checking VFD status:",ne),je(!1)}})()},[]),g.useEffect(()=>{(async()=>{try{e&&localStorage.setItem("activeSaleId",e);const[ne,ce]=await Promise.all([me(`/api/sales/${e}`),me("/api/products/pos")]);if(!ne.ok||!ce.ok){if(ne.status===401||ce.status===401){t("/login");return}throw new Error(`Failed to fetch data: ${ne.status} ${ce.status}`)}const[ve,Ce]=await Promise.all([ne.json(),ce.json()]);if(!ve)throw new Error("Sale data is empty");const De={...ve,items:ve.saleitem||[]};S(De),f(Ce);const Le=De.items.map(qe=>({id:qe.id,productId:qe.productId,price:Number(qe.price),quantity:Number(qe.quantity),total:Number(qe.price)*Number(qe.quantity),unit:qe.unit,baseUnits:Number(qe.baseUnits),product:{id:qe.product.id.toString(),name:qe.product.name}}));l(Le),u(Le),N(ve.saleType==="WHOLESALE"?"wholesale":"retail"),ve.paymentMethod==="CREDIT"||ve.creditPercentage>0?(X("CREDIT"),G(Number(ve.creditPercentage)||0)):(X("CASH"),G(0))}catch(ne){console.error("Error fetching data:",ne),alert(ne instanceof Error?ne.message:"Failed to fetch sale data")}finally{b(!1)}})()},[e,t]),g.useEffect(()=>()=>{localStorage.getItem("activeSaleId")===e&&(window.location.pathname.includes(`/sales/${e}/edit`)||localStorage.removeItem("activeSaleId"))},[e]);const Ze=async Z=>{var ne;if(!(!e||!j))try{const ce={customerId:(O==null?void 0:O.id)||((ne=j==null?void 0:j.customer)==null?void 0:ne.id)||null,items:Z.map(Ce=>({productId:Ce.productId,quantity:Ce.quantity,price:Ce.price,unit:Ce.unit,baseUnits:Ce.baseUnits})),totalAmount:Z.reduce((Ce,De)=>Ce+De.price*De.quantity,0),saleType:k==="wholesale"?"WHOLESALE":"RETAIL",paymentMethod:H,creditPercentage:H==="CREDIT"?se:0},ve=await me(`/api/sales/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)});if(!ve.ok){if(ve.status===401){t("/login");return}throw new Error("Failed to persist sale items")}u([...Z]),console.log("Sale items persisted successfully")}catch(ce){console.error("Error persisting sale items:",ce)}},Ue=g.useMemo(()=>{if(console.log("Filtering products - searchTerm:",r,"products count:",d.length),!r||r.trim().length===0)return console.log("No search term, returning empty array"),[];if(!d||d.length===0)return console.log("No products available, returning empty array"),[];const Z=r.toLowerCase().trim(),ne=d.filter(ve=>!ve||!ve.name?!1:ve.name.toLowerCase().startsWith(Z));return console.log("Filtered products:",ne.length,"matches for term:",r),ne.sort((ve,Ce)=>ve.name.toLowerCase().localeCompare(Ce.name.toLowerCase()))},[d,r]);g.useEffect(()=>{re(-1)},[Ue]),g.useEffect(()=>{if(Oe>=0&&Te.current){const Z=Te.current,ne=Z.children[Oe];if(ne){const ce=Z.getBoundingClientRect(),ve=ne.getBoundingClientRect();ve.bottom>ce.bottom?Z.scrollTop+=ve.bottom-ce.bottom:ve.top<ce.top&&(Z.scrollTop-=ce.top-ve.top)}}},[Oe]),g.useEffect(()=>{if(Q>=0&&pe.current){const Z=pe.current,ne=Z.children[Q];if(ne){const ce=Z.getBoundingClientRect(),ve=ne.getBoundingClientRect();ve.bottom>ce.bottom?Z.scrollTop+=ve.bottom-ce.bottom:ve.top<ce.top&&(Z.scrollTop-=ce.top-ve.top)}}},[Q]);const st=Z=>{if(Z.key==="Enter"){if(Ue.length>0){const ne=Oe>=0&&Oe<Ue.length?Ue[Oe]:Ue[0];Z.preventDefault(),console.log("Selecting product:",ne),Ft(ne)}}else Z.key==="ArrowDown"?(Z.preventDefault(),Ue.length>0&&re(ne=>ne<Ue.length-1?ne+1:0)):Z.key==="ArrowUp"?(Z.preventDefault(),Ue.length>0&&re(ne=>ne>0?ne-1:Ue.length-1)):Z.key==="Escape"&&(o(!1),re(-1))},Ft=async Z=>{const ne=Lo(Z),ce=se>0?Number((ne*(1+se/100)).toFixed(2)):ne,ve={name:Z.baseUnit.name,baseUnits:1,price:ce},Ce=i.find(Je=>Je.productId===parseInt(Z.id));let De,Le=1;if(Ce)Le=Ce.quantity+1,De=i.map(Je=>Je.productId===parseInt(Z.id)?{...Je,quantity:Le,price:ce,total:Le*ce}:Je);else{if(!Z){console.error("Error: product is undefined");return}if(!ve){console.error("Error: defaultUnit is undefined");return}const Je={id:`new-${Z.id}-${Date.now()}`,productId:parseInt(Z.id),price:ce,quantity:1,total:ce,unit:ve.name,baseUnits:ve.baseUnits,product:{id:Z.id,name:Z.name}};De=[...i,Je]}l(De),await Ze(De);const qe=De.reduce((Je,er)=>Je+er.total,0);console.log("EditSale: About to send product to VFD:",{productName:Z.name,price:ce,total:qe,quantity:Le}),ge&&We.displayProduct({productName:Z.name,price:ce,total:qe,quantity:Le}).then(Je=>{console.log("EditSale: VFD API response:",Je)}).catch(Je=>{console.error("EditSale: Failed to update VFD display:",Je)}),n(""),setTimeout(()=>{let Je;if(Ce)Je=Ce.id;else{const Wn=De.find(Wl=>Wl.productId===parseInt(Z.id)&&Wl.id.startsWith(`new-${Z.id}`));Je=Wn?Wn.id:""}const er=Re.current[Je];er&&(er.focus(),er.select())},150)},ht=async Z=>{try{const ne=[];if(Z.forEach(Ce=>{const De=c.find(Le=>Le.id===Ce.id);if(!De)ne.push({productId:Ce.productId,quantity:Ce.quantity*Ce.baseUnits});else{const Le=Ce.quantity-De.quantity;Le>0&&ne.push({productId:Ce.productId,quantity:Le*Ce.baseUnits})}}),c.forEach(Ce=>{const De=Z.find(Le=>Le.id===Ce.id);if(!De)ne.push({productId:Ce.productId,quantity:-(Ce.quantity*Ce.baseUnits)});else{const Le=De.quantity-Ce.quantity;Le<0&&ne.push({productId:Ce.productId,quantity:Le*Ce.baseUnits})}}),ne.length===0)return!0;console.log("Sending stock updates:",ne);const ce=await me("/api/products/stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:ne})});if(!ce.ok)throw ce.status===401?new Error("Authentication failed"):new Error(`Stock update failed: ${ce.statusText}`);const ve=await ce.json();if(console.log("Stock update response:",ve),!ve.success){const Ce=ve.results.filter(De=>!De.success).map(De=>{var qe;const Le=i.find(Je=>Je.productId===De.productId)||c.find(Je=>Je.productId===De.productId);return`${((qe=Le==null?void 0:Le.product)==null?void 0:qe.name)||"Unknown Product"}: ${De.message}${De.currentStock?` (Available: ${De.currentStock})`:""}`}).join(`
`);throw new Error(`Stock update failed:
${Ce}`)}return!0}catch(ne){return console.error("Error updating stock:",ne),alert(ne instanceof Error?ne.message:"An unexpected error occurred while updating stock"),!1}},Bl=async Z=>{const ne=i.filter(ce=>ce.id!==Z);if(l(ne),await Ze(ne),ge)if(ne.length>0){const ce=ne.reduce((Ce,De)=>Ce+De.total,0),ve=ne[ne.length-1];We.displayProduct({productName:ve.product.name,price:ve.price,total:ce,quantity:ve.quantity}).catch(Ce=>console.error("Failed to update VFD display:",Ce))}else We.displayWelcome().catch(ce=>console.error("Failed to update VFD display:",ce))},Lo=Z=>{if(k==="wholesale")return Number(Z.wholesalePrice);{const ne=Number(Z.retailPrice);return ne===0?Math.ceil(Number(Z.wholesalePrice)*1.2):ne}},zl=Z=>{var Ce;console.log("Getting units for product:",Z),console.log("Available products:",d);const ne=parseInt(Z.toString()),ce=d.find(De=>parseInt(De.id)===ne);if(!ce)return console.log("Product not found:",Z),console.log("Available product IDs:",d.map(De=>parseInt(De.id))),[];console.log("Found product:",ce);const ve=[{name:ce.baseUnit.name,baseUnits:1,price:Lo(ce),unitId:ce.baseUnit.id,conversionRate:1}];return((Ce=ce.productunit)==null?void 0:Ce.length)>0&&ce.productunit.forEach(De=>{ve.push({name:De.unit.name,baseUnits:Number(De.conversionRate),price:Number(De.price),unitId:De.unit.id,conversionRate:Number(De.conversionRate)})}),console.log("Available units:",ve),ve},ql=async Z=>{if(!y)return;const ne=i.find(qe=>qe.id===y);if(!ne)return;const ce=d.find(qe=>qe.id===ne.product.id);if(!ce)return;console.log("Selected unit:",Z),console.log("Current item:",ne),console.log("Found product:",ce);const ve=Z.conversionRate||1,Ce=ne.quantity*(ne.baseUnits||1);if(ce.stock<ve){alert(`Insufficient stock. Available: ${Math.floor(ce.stock/ve)} ${Z.name}(s)`);return}let De=Math.floor(Ce/ve);De<1&&ce.stock>=ve&&(De=1);const Le=i.map(qe=>qe.id===y?{...qe,unit:String(Z.name),baseUnits:Number(ve),price:Number(Z.price),quantity:Number(De),total:Number(De)*Number(Z.price)}:qe);l(Le),await Ze(Le),h(!1)},Wa=async Z=>{var ne;try{if(!j||!j.id){alert("Sale not found"),t("/sales");return}if(i.length===0){alert("No items to print");return}if(!await ht(i))return;const ve={customerId:((ne=j==null?void 0:j.customer)==null?void 0:ne.id)||null,items:i.map(lt=>({productId:lt.productId,quantity:lt.quantity,price:lt.price,unit:lt.unit,baseUnits:lt.baseUnits})),totalAmount:i.reduce((lt,Wt)=>lt+Wt.price*Wt.quantity,0),saleType:k==="wholesale"?"WHOLESALE":"RETAIL",paymentMethod:H,creditPercentage:H==="CREDIT"?se:0};console.log("Updating sale for print with data:",ve);const Ce=await me(`/api/sales/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(ve)});if(console.log("Print update response status:",Ce.status),!Ce.ok){if(Ce.status===401){t("/login");return}let lt="Failed to update sale for printing";try{const Wt=await Ce.json();console.log("Error response data:",Wt),lt=Wt.message||lt}catch{lt=`Failed to update sale: ${Ce.statusText}`}throw new Error(lt)}const De=await Ce.json();console.log("Successfully updated sale for printing:",De);const Le={type:Z,items:i.map(lt=>({id:lt.id,name:lt.product.name,quantity:lt.quantity,unit:lt.unit,price:lt.price,total:lt.price*lt.quantity})),totalAmount:i.reduce((lt,Wt)=>lt+Wt.price*Wt.quantity,0),totalItems:i.reduce((lt,Wt)=>lt+Wt.quantity,0),customer:(j==null?void 0:j.customer)||O||void 0,paymentMethod:H,creditPercentage:H==="CREDIT"?se:0,baseTotal:H==="CREDIT"&&se>0?i.reduce((lt,Wt)=>lt+Wt.price*Wt.quantity,0):void 0,saleId:(j==null?void 0:j.id)||parseInt(e||"0")},qe=Z==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",Je=localStorage.getItem(qe)||void 0;let er=!1;const Wn={...Le,salesperson:W?{name:W.name}:void 0};if((localStorage.getItem("qz.printMode")==="browser"?"browser":"silent")==="silent"&&Je)try{er=Z==="invoice"?await Fi(Wn,Je):await Ui(Wn,Je)}catch(lt){console.warn("Silent QZ printing failed, falling back:",lt),er=!1}if(er||await Da(Wn),ge){const lt=i.reduce((Wt,yd)=>Wt+yd.price*yd.quantity,0);We.displayTotal(lt).then(Wt=>{console.log("EditSale: VFD display total after print:",Wt),setTimeout(()=>{We.displayWelcome().catch(yd=>console.error("Failed to display welcome after print:",yd))},3e3)}).catch(Wt=>{console.error("EditSale: Failed to display total on VFD after print:",Wt)})}u([...i]),localStorage.removeItem("activeSaleId"),w(!1),setTimeout(()=>{t("/sales")},1500)}catch(ce){console.error("Error printing sale:",ce),alert(ce instanceof Error?ce.message:"An unexpected error occurred while preparing to print")}};g.useEffect(()=>{(async()=>{try{const ne=await me("/api/customers");if(ne.ok){const ce=await ne.json();Array.isArray(ce)&&J(ce)}else ne.status===401&&t("/login")}catch(ne){console.error("Error fetching customers:",ne)}})()},[t]),g.useEffect(()=>{(async()=>{try{const ne=await me("/api/users/me");if(ne.ok){const ce=await ne.json();F(ce.data.user)}else ne.status===401&&t("/login")}catch(ne){console.error("Error fetching current user:",ne)}})()},[t]),g.useEffect(()=>{const Z=ne=>{ie.current&&!ie.current.contains(ne.target)&&o(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]),g.useEffect(()=>{const Z=ne=>{fe.current&&!fe.current.contains(ne.target)&&V(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]),g.useEffect(()=>{(async()=>{try{const ne=await me("/api/customers");if(ne.ok){const ce=await ne.json();J(ce)}}catch(ne){console.error("Error fetching customers:",ne)}})()},[]),g.useEffect(()=>{(async()=>{try{const ne=await me("/api/users/me");if(ne.ok){const ce=await ne.json();F(ce.data.user)}else ne.status===401&&t("/login")}catch(ne){console.error("Error fetching current user:",ne)}})()},[t]);const Fo=g.useCallback(async()=>{try{if(i.length>0){const Z="/api/products/pos",ne=new URLSearchParams,ce=i.map(Le=>Le.productId.toString()).join(",");ne.append("ids",ce);const ve=await fetch(`${Z}?${ne}`,{credentials:"include"});if(!ve.ok){if(ve.status===401){t("/login");return}throw new Error("Failed to fetch products")}const Ce=await ve.json(),De=i.map(Le=>{const qe=Ce.find(Je=>parseInt(Je.id)===Le.productId);return qe?qe.stock<Le.quantity*Le.baseUnits?`${Le.product.name}: Only ${Math.floor(qe.stock/Le.baseUnits)} ${Le.unit}(s) available`:null:`${Le.product.name}: Product no longer available`}).filter(Boolean);De.length>0&&alert(`Stock has changed:
`+De.join(`
`)),f(Le=>Le.map(qe=>Ce.find(er=>er.id===qe.id)||qe))}}catch(Z){console.error("Error refreshing products:",Z)}},[t,i]);g.useEffect(()=>{if(i.length>0){const Z=setInterval(Fo,jde);return()=>clearInterval(Z)}},[Fo,i.length]);const Fr=async(Z,ne,ce)=>{try{const ve=await me(`/api/products/${Z}`);if(!ve.ok)throw new Error("Failed to fetch product stock");const Ce=await ve.json(),De=ne*ce;return f(Le=>Le.map(qe=>qe.id===Z?{...qe,stock:Ce.stock,version:Ce.version}:qe)),Number(Ce.stock)>=De}catch(ve){return console.error("Error checking stock:",ve),!1}},pa=(Z,ne)=>{He(ce=>({...ce,[Z]:ne}))},Vn=async(Z,ne)=>{const ce=parseInt(ne,10);if(isNaN(ce)||ce<1){He(ve=>({...ve,[Z]:""})),setTimeout(()=>{var ve;(ve=ye.current)==null||ve.focus()},100);return}He(ve=>({...ve,[Z]:""})),await Ct(Z,ne),setTimeout(()=>{var ve;(ve=ye.current)==null||ve.focus()},100)},Ct=async(Z,ne)=>{const ce=parseInt(ne,10);if(isNaN(ce)||ce<1)return;const ve=i.find(Ce=>Ce.id===Z);if(ve)try{if(!await Fr(ve.product.id,ce,ve.baseUnits||1)){const Le=d.find(Je=>parseInt(Je.id)===ve.productId),qe=Le?Math.floor(Le.stock/(ve.baseUnits||1)):0;if(alert(`Insufficient stock for ${ve.product.name}. Available: ${qe} ${ve.unit}(s)`),ce>ve.quantity){const Je=i.map(er=>er.id===Z?{...er,quantity:qe||1,total:(qe||1)*Number(er.price)}:er);if(l(Je),ge){const er=Je.reduce((Wn,Wl)=>Wn+Wl.total,0);We.displayProduct({productName:ve.product.name,price:Number(ve.price),total:er,quantity:qe||1}).catch(Wn=>console.error("Failed to update VFD display:",Wn))}}return}const De=i.map(Le=>Le.id===Z?{...Le,quantity:ce,total:ce*Number(Le.price)}:Le);if(l(De),await Ze(De),ge){const Le=De.reduce((qe,Je)=>qe+Je.total,0);We.displayProduct({productName:ve.product.name,price:Number(ve.price),total:Le,quantity:ce}).catch(qe=>console.error("Failed to update VFD display:",qe))}}catch(Ce){console.error("Error updating quantity:",Ce),alert("Failed to update quantity: "+(Ce instanceof Error?Ce.message:"Unknown error"))}},sn=z.filter(Z=>Z.name.toLowerCase().includes(A.toLowerCase().trim())),Uo=Z=>{const ne=Z.target.value;I(ne),V(!0)},Bi=async Z=>{R(Z),I(Z.name),V(!1),i.length>0&&await Ze(i),setTimeout(()=>{var ne;(ne=ye.current)==null||ne.focus()},100)},Hl=Z=>{var ne;if(Z.key==="Enter")if(sn.length>0){const ce=Q>=0&&Q<sn.length?sn[Q]:sn[0];Bi(ce)}else(ne=ye.current)==null||ne.focus();else Z.key==="ArrowDown"?(Z.preventDefault(),sn.length>0&&Y(ce=>ce<sn.length-1?ce+1:0)):Z.key==="ArrowUp"?(Z.preventDefault(),sn.length>0&&Y(ce=>ce>0?ce-1:sn.length-1)):Z.key==="Escape"&&(V(!1),Y(-1))},T=async()=>{if(!D.trim()){alert("Please enter a customer name");return}try{const Z=await me("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:D.trim()})});if(Z.ok){const ne=await Z.json();J(ce=>[...ce,ne]),R(ne),I(ne.name),V(!1),alert("Customer added successfully!")}else throw new Error("Failed to add customer")}catch(Z){console.error("Error adding customer:",Z),alert("Failed to add customer. Please try again.")}},M=()=>{if(i.length===0){K();return}be({title:"Clear Sale",message:"Are you sure you want to clear all items? This action cannot be undone.",onConfirm:K}),ae(!0)},K=()=>{l([]),R(null),I(""),n(""),h(!1),m(null),w(!1),X("CASH"),G(0),ae(!1),be(null)},ee=()=>{if(i.length===0){alert("No items to hold");return}if(k==="wholesale"&&!O){alert("Please select a customer for wholesale sales");return}be({title:"Hold Sale",message:"Are you sure you want to hold this sale for later?",onConfirm:ue}),ae(!0)},ue=async()=>{try{if(i.length===0){alert("No items to hold");return}if(k==="wholesale"&&!O){alert("Please select a customer for wholesale sales");return}const Z={customerId:(O==null?void 0:O.id)||null,userId:W==null?void 0:W.id,items:i.map(ce=>({productId:ce.productId,quantity:ce.quantity,price:ce.price,unit:ce.unit,baseUnits:ce.baseUnits})),totalAmount:i.reduce((ce,ve)=>ce+ve.total,0),status:"held",saleType:k==="wholesale"?"WHOLESALE":"RETAIL"},ne=await me("/api/held-sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)});if(!ne.ok){if(ne.status===401){t("/login");return}const ce=await ne.json();throw new Error(ce.message||"Failed to hold sale")}K(),alert("Sale held successfully"),Fo()}catch(Z){console.error("Error holding sale:",Z),alert("Failed to hold sale: "+(Z instanceof Error?Z.message:"Unknown error"))}},Ne=()=>{if(i.length===0){alert("No items to save");return}if(k==="wholesale"&&!O){alert("Please select a customer for wholesale sales");return}be({title:"Complete Sale",message:"Are you sure you want to complete this sale?",onConfirm:ke}),ae(!0)},ke=async()=>{try{if(i.length===0){alert("No items to save");return}if(k==="wholesale"&&!O){alert("Please select a customer for wholesale sales");return}const Z=i.reduce((De,Le)=>De+Le.total,0);if(typeof Z!="number"||Z<=0)throw new Error("Invalid total amount");if(!await ht(i))return;const ce={customerId:(O==null?void 0:O.id)||null,userId:W==null?void 0:W.id,items:i.map(De=>({productId:De.productId,quantity:De.quantity,price:De.price,unit:De.unit,baseUnits:De.baseUnits})),totalAmount:Z,saleType:k==="wholesale"?"WHOLESALE":"RETAIL"},ve=await me("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ce)});if(!ve.ok){if(ve.status===401){t("/login");return}const De=await ve.json();throw new Error(De.message||"Failed to save sale")}const Ce=await ve.json();console.log("Sale saved successfully:",Ce),localStorage.removeItem("activeSaleId"),K(),alert("Sale completed and saved successfully"),t("/sales")}catch(Z){console.error("Error completing sale:",Z),Z instanceof Error&&Z.message.includes("Stock update failed:")?alert(Z.message):alert("Failed to complete sale: "+(Z instanceof Error?Z.message:"Unknown error"))}},xe=async Z=>{X(Z),Z==="CASH"&&G(0),i.length>0&&await Ze(i)},he=()=>{ae(!1),be(null)},Me=()=>{te&&te.onConfirm(),ae(!1),be(null)},Ye=Z=>{const ne=Z.target.value;if(ne.length<r.length){n(ne);const ce=ne.trim().length>0&&d.length>0;o(ce);return}if(ne.length>r.length&&d.length>0){if(d.some(ve=>ve.name.toLowerCase().startsWith(ne.toLowerCase())))n(ne),o(!0);else try{const ve=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwF");ve.volume=.1,ve.play()}catch{console.log("Invalid character blocked")}return}n(ne),o(ne.trim().length>0)},Ve=()=>{o(r.trim().length>0)};g.useEffect(()=>{const Z=ne=>{ne.key==="Escape"&&x&&w(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[x]);const At=Z=>{console.log("Row clicked, displaying VFD info for:",Z.product.name);const ne=i.reduce((ce,ve)=>ce+ve.total,0);ge&&We.displayProduct({productName:Z.product.name,price:Z.price,total:ne,quantity:Z.quantity}).then(ce=>{console.log("EditSale: VFD API response for row click:",ce)}).catch(ce=>{console.error("EditSale: Failed to update VFD display on row click:",ce)})},Vl=async()=>{try{(await We.reconnect()).success?(je(!0),await We.displayWelcome()):je(!1)}catch(Z){console.error("Failed to reconnect VFD:",Z),je(!1)}},yR=async()=>{try{ge&&await We.clearDisplay()}catch(Z){console.error("Failed to clear VFD:",Z)}},vR=async()=>{try{ge&&await We.displayWelcome()}catch(Z){console.error("Failed to display welcome on VFD:",Z)}};if(v)return s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});if(!j)return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Sale not found"}),s.jsx("button",{onClick:()=>t("/sales"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Back to Sales"})]});const xR=i.reduce((Z,ne)=>Z+ne.price*ne.quantity,0),bR=i.length,wR=i.reduce((Z,ne)=>Z+ne.quantity,0);function SR(Z){if(!(!Z||L<=0)){if(l(ne=>ne.map(ce=>ce.id===Z.id?{...ce,refundedQuantity:(ce.refundedQuantity||0)+L}:ce)),ge){const ne=Number(Z.price)*L;We.displayProduct({productName:`REFUND: ${Z.product.name}`,price:-ne,total:ne,quantity:L}).then(ce=>{console.log("EditSale: VFD display refund:",ce),setTimeout(()=>{We.displayWelcome().catch(ve=>console.error("Failed to display welcome after refund:",ve))},3e3)}).catch(ce=>{console.error("EditSale: Failed to display refund on VFD:",ce)})}C(!1),_(null),U(0),alert(`Refunded ${L} ${Z.unit}(s) for ${Z.product.name}.`)}}return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:["Edit Sale #",j.id]}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Customer: ",j.customer?j.customer.name:"Walk-in Customer"]}),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k==="wholesale"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:k==="wholesale"?"WHOLESALE PRICING":"RETAIL PRICING"})})]}),s.jsx("button",{onClick:()=>t("/sales"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),"      "]}),s.jsxs("div",{children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search customers...",className:"w-full px-4 py-2 border rounded-lg",value:D,onChange:Uo,onKeyDown:Hl}),q&&A.trim().length>0&&s.jsxs("div",{ref:pe,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-auto",children:[z.filter(Z=>Z.name.toLowerCase().includes(A.toLowerCase())||Z.phone&&Z.phone.includes(A)||Z.email&&Z.email.toLowerCase().includes(A.toLowerCase())).map((Z,ne)=>s.jsx("button",{className:`w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${ne===Q?"bg-blue-100 dark:bg-blue-900/40":""}`,onClick:()=>Bi(Z),children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:Z.name}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Z.phone||"No phone"," - ",Z.email||"No email"]})]})},Z.id)),s.jsx("button",{onClick:T,className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"text-blue-600 font-medium",children:['+ Add "',D,'" as new customer']})})]})]}),O&&s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:O.name}),s.jsxs("div",{className:"text-sm text-gray-500",children:[O.phone||"No phone"," - ",O.email||"No email"]})]}),s.jsx("button",{onClick:()=>R(null),className:"text-red-500 hover:text-red-700",children:s.jsx(Dt,{className:"w-4 h-4"})})]})})]}),s.jsx("div",{children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:ye,type:"text",placeholder:"Search products... (type 2+ characters)",className:"w-full px-4 py-2 border rounded-lg",value:r,onChange:Ye,onKeyDown:st,onFocus:Ve}),a&&r.trim().length>0&&s.jsx("div",{ref:Te,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow-lg max-h-60 overflow-auto",children:r.trim().length===1?s.jsx("div",{className:"px-4 py-2 text-gray-500 text-sm",children:"Type at least 2 characters to search..."}):Ue.length>0?Ue.map((Z,ne)=>s.jsxs("button",{className:`w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex justify-between items-center ${ne===Oe?"bg-blue-100 dark:bg-blue-900/40":""}`,onClick:()=>Ft(Z),children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:Z.name}),Z.description&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:Z.description})]}),s.jsxs("span",{className:"text-gray-600 dark:text-gray-300 ml-2 flex-shrink-0",children:["",Lo(Z)," (Stock: ",Z.stock,")"]})]},Z.id)):s.jsx("div",{className:"px-4 py-2 text-gray-500",children:"No products found"})})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payment Method"}),s.jsxs("div",{className:"flex space-x-4 mb-4",children:[s.jsx("button",{onClick:()=>xe("CASH"),className:`px-4 py-2 rounded-lg ${H==="CASH"?"bg-green-500 text-white":"bg-gray-200 text-gray-700"} opacity-60 cursor-not-allowed`,disabled:!0,children:"Cash"}),s.jsx("button",{onClick:()=>xe("CREDIT"),className:`px-4 py-2 rounded-lg ${H==="CREDIT"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"} opacity-60 cursor-not-allowed`,disabled:!0,children:"Credit"})]}),H==="CREDIT"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Credit Surcharge (%)"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:se,onChange:()=>{},className:"w-24 px-3 py-2 border rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed",readOnly:!0,disabled:!0})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(Z=>s.jsxs("tr",{onClick:()=>At(Z),className:"hover:bg-gray-50 cursor-pointer",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Z.product.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("button",{onClick:()=>{m(Z.id),h(!0)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:Z.unit})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",Number(Z.price).toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>Ct(Z.id,(Number(Z.quantity)-1).toString()),className:"p-1 rounded-md hover:bg-gray-100",children:s.jsx(yb,{className:"w-4 h-4"})}),s.jsx("input",{ref:ne=>{Re.current[Z.id]=ne},type:"number",min:"0",step:"1",value:Ae[Z.id]||"",placeholder:Z.quantity.toString(),onChange:ne=>pa(Z.id,ne.target.value),onKeyDown:ne=>{ne.key==="Enter"&&(ne.preventDefault(),Vn(Z.id,ne.currentTarget.value),ne.currentTarget.blur())},onBlur:ne=>{ne.target.value!==""?Vn(Z.id,ne.target.value):He(ce=>({...ce,[Z.id]:""}))},onClick:ne=>ne.stopPropagation(),className:"w-16 px-2 py-1 text-center border rounded-md"}),s.jsx("button",{onClick:()=>Ct(Z.id,(Number(Z.quantity)+1).toString()),className:"p-1 rounded-md hover:bg-gray-100",children:s.jsx(Cr,{className:"w-4 h-4"})})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",(Z.price*Z.quantity).toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>Bl(Z.id),className:"text-red-500 hover:text-red-700",children:s.jsx(br,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{_(Z),C(!0),U(0)},className:`text-yellow-500 hover:text-yellow-700 ${Z.quantity<=(Z.refundedQuantity||0)?"opacity-50 cursor-not-allowed":""}`,disabled:Z.quantity<=(Z.refundedQuantity||0),children:s.jsx(y5,{className:"w-4 h-4"})})]})})]},Z.id))})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Number of Items:"}),s.jsx("span",{className:"font-medium",children:bR})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),s.jsx("span",{className:"font-medium",children:wR})]}),s.jsxs("div",{className:"flex justify-between items-center text-xl font-semibold",children:[s.jsx("span",{children:"Total Amount:"}),s.jsxs("span",{children:["",xR.toFixed(2)]})]}),"          ",s.jsxs("div",{className:"mt-4 flex justify-end space-x-4",children:[s.jsxs("button",{onClick:M,className:"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 flex items-center",children:[s.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Clear Sale"]}),s.jsxs("button",{onClick:ee,className:"px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 flex items-center",children:[s.jsx(zh,{className:"w-4 h-4 mr-2"}),"Hold Sale"]}),s.jsxs("button",{onClick:Ne,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:[s.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Save Sale"]}),"            ",s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>w(!x),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[s.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Print Sale"]}),x&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>w(!1)}),s.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-52 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:s.jsxs("div",{className:"py-2",children:[s.jsxs("button",{onClick:()=>{Wa("invoice"),w(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[s.jsx(jo,{className:"w-4 h-4 mr-3 text-blue-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Print Invoice (A5)"})]}),s.jsxs("button",{onClick:()=>{Wa("receipt"),w(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[s.jsx(No,{className:"w-4 h-4 mr-3 text-green-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Print Receipt"})]})]})})]})]})]})]})}),s.jsx(Hm,{isOpen:p,onClose:()=>h(!1),onSelect:ql,units:(()=>{const Z=i.find(ce=>ce.id===y);if(!Z)return console.log("No selected item found"),[];console.log("Selected item:",Z);const ne=parseInt(Z.product.id);return zl(ne)})()}),P&&E&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-96",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Process Refund"}),s.jsxs("p",{className:"mb-4",children:["Product: ",E.product.name,s.jsx("br",{}),"Price: ",Number(E.price).toFixed(2),s.jsx("br",{}),"Available for refund: ",E.quantity-(E.refundedQuantity||0),E.unit,s.jsx("br",{}),"Total Refund Amount: ",(Number(E.price)*L).toFixed(2)]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Quantity"}),s.jsx("input",{type:"number",min:"1",max:E.quantity-(E.refundedQuantity||0),value:L,onChange:Z=>U(Number(Z.target.value)),className:"w-full px-3 py-2 border rounded-md"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:()=>{C(!1),_(null),U(0)},className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Cancel"}),s.jsx("button",{onClick:()=>SR(E),className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600",disabled:L<=0||L>E.quantity-(E.refundedQuantity||0),children:"Process Refund"})]})]})}),oe&&te&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-96",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:te.title}),s.jsx("p",{className:"mb-6",children:te.message}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:he,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Cancel"}),s.jsx("button",{onClick:Me,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Confirm"})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${ge?"bg-green-500":"bg-red-500"}`}),s.jsxs("span",{className:"text-sm font-medium",children:["VFD Display: ",ge?"Connected":"Disconnected"]})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs("button",{onClick:()=>Ee(!Se),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:[Se?"Hide":"Show"," Controls"]})})]}),Se&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:Vl,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Reconnect"}),s.jsx("button",{onClick:yR,className:"px-3 py-1 text-sm bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"Clear"}),s.jsx("button",{onClick:vR,className:"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600",children:"Welcome"})]})})]})]})},kde=()=>{const e=yt(),[t,r]=g.useState([]),[n,a]=g.useState([]),[o,i]=g.useState(!1),[l,c]=g.useState(!0),[u,d]=g.useState(!1),[f,p]=g.useState(null),[h,y]=g.useState({name:"",email:"",phone:"",address:""}),[m,x]=g.useState(""),[w,v]=g.useState(""),[b,j]=g.useState(1),[S,k]=g.useState(1),N=30,[P,C]=g.useState(null),E=g.useRef(null);g.useEffect(()=>{const R=setTimeout(()=>{v(m),j(1)},300);return()=>clearTimeout(R)},[m]);const _=g.useCallback(async()=>{c(!0);try{const R=new URLSearchParams({page:b.toString(),limit:N.toString(),...w&&{search:w}}),q=await me(`/api/customers?${R}`);if(q.ok){const V=await q.json();if(V&&typeof V=="object")if(Array.isArray(V))a(V);else if(V.customers&&Array.isArray(V.customers)){r(V.customers),k(Math.max(1,V.totalPages||1)),i(!0),b>(V.totalPages||1)&&(V.totalPages||1)>0&&j(1);return}else a([]);else a([])}else throw new Error("Failed to fetch customers")}catch(R){console.error("Error fetching customers:",R),C("Failed to fetch customers"),a([])}finally{c(!1)}},[b,w]);g.useEffect(()=>{_()},[_]),g.useEffect(()=>{if(!o&&n.length>0){const R=n.filter(F=>{var H,X;return F.name.toLowerCase().includes(w.toLowerCase())||(((H=F.email)==null?void 0:H.toLowerCase())||"").includes(w.toLowerCase())||(((X=F.phone)==null?void 0:X.toLowerCase())||"").includes(w.toLowerCase())}),q=Math.max(1,Math.ceil(R.length/N));k(q);const V=Math.min(b,q);if(V!==b){j(V);return}const z=(V-1)*N,J=z+N,W=R.slice(z,J);r(W)}},[n,b,w,o]);const L=g.useMemo(()=>t,[t]),U=g.useCallback(R=>{j(R),window.scrollTo(0,0)},[]),D=R=>{p(R),y({name:R.name,email:R.email||"",phone:R.phone||"",address:R.address||""}),d(!0)},I=async R=>{if(window.confirm("Are you sure you want to delete this customer?"))try{if((await fetch(`/api/customers/${R}`,{method:"DELETE",credentials:"include"})).ok)o?await _():(r(t.filter(V=>V.id!==R)),a(n.filter(V=>V.id!==R)));else throw new Error("Failed to delete customer")}catch(q){console.error("Error deleting customer:",q),C("Failed to delete customer")}},A=async R=>{R.preventDefault(),C(null);try{const q=f?`/api/customers/${f.id}`:"/api/customers",V=f?"PUT":"POST",z={name:h.name.trim(),email:h.email.trim()||null,phone:h.phone.trim()||null,address:h.address.trim()||null,updatedAt:new Date().toISOString()};console.log("Sending request with data:",z);const J=await fetch(q,{method:V,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(z)});if(!J.ok){const F=await J.json();throw console.error("Server response:",F),new Error(F.message||`Failed to ${f?"update":"create"} customer. ${J.status}: ${J.statusText}`)}const W=await J.json();f?o?await _():(r(t.map(F=>F.id===W.id?W:F)),a(n.map(F=>F.id===W.id?W:F))):o?await _():(r([...t,W]),a([...n,W])),d(!1),p(null),y({name:"",email:"",phone:"",address:""})}catch(q){console.error("Error saving customer:",q),C(q instanceof Error?q.message:"Failed to save customer")}},$=R=>new Promise((q,V)=>{const z=new FileReader;z.onload=J=>{var W;try{const H=((W=J.target)==null?void 0:W.result).split(`
`).filter(ae=>ae.trim());if(H.length<2){V(new Error("CSV file must have at least a header row and one data row"));return}const X=H[0].split(",").map(ae=>ae.trim().replace(/"/g,"")),se=["name","email","phone","address"],G=se.filter(ae=>!X.some(te=>te.toLowerCase()===ae.toLowerCase()));if(G.length>0){V(new Error(`Missing required columns: ${G.join(", ")}`));return}const oe=[];for(let ae=1;ae<H.length;ae++){const te=H[ae].split(",").map(ge=>ge.trim().replace(/"/g,""));if(te.length<X.length)continue;const be={};if(X.forEach((ge,je)=>{const Se=ge.toLowerCase(),Ee=te[je]||null;if(se.includes(Se))switch(Se){case"name":be.name=Ee||"";break;case"email":be.email=Ee;break;case"phone":be.phone=Ee;break;case"address":be.address=Ee;break}}),!be.name||be.name.trim()===""){V(new Error(`Row ${ae+1}: Customer name is required`));return}oe.push(be)}q(oe)}catch(F){V(new Error(`Error parsing CSV file: ${F instanceof Error?F.message:"Unknown error"}`))}},z.onerror=()=>V(new Error("Error reading file")),z.readAsText(R)}),O=()=>{const R=["name","email","phone","address"],q=[["John Doe","john@example.com","+1234567890","123 Main St, City, Country"],["Jane Smith","jane@example.com","+0987654321","456 Oak Ave, City, Country"]],V=[R.join(","),...q.map(F=>F.map(H=>`"${H}"`).join(","))].join(`
`),z=new Blob([V],{type:"text/csv"}),J=window.URL.createObjectURL(z),W=document.createElement("a");W.href=J,W.download="customers_template.csv",W.click(),window.URL.revokeObjectURL(J)};return l?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Customers"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:async R=>{var V;const q=(V=R.target.files)==null?void 0:V[0];if(q){c(!0);try{const z=await $(q),J=await fetch("/api/customers/import",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({customers:z})});if(!J.ok){const F=J.headers.get("content-type");let H="Failed to import customers";if(F&&F.includes("application/json"))try{H=(await J.json()).message||H}catch{}else if(J.status===404){console.log("Bulk import not available, importing customers individually...");let X=0,se=0;for(const G of z)try{(await fetch("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:G.name,email:G.email,phone:G.phone,address:G.address,updatedAt:new Date().toISOString()})})).ok?X++:(se++,console.error(`Failed to import customer: ${G.name}`))}catch(oe){se++,console.error(`Error importing customer ${G.name}:`,oe)}await _(),se>0?alert(`Import completed with some errors:
${X} customers imported successfully
${se} customers failed to import`):alert(`Successfully imported ${X} customers!`);return}else if(J.status===401){H="Unauthorized. Please log in again.",e("/login");return}else H=`Server error: ${J.status} ${J.statusText}`;throw new Error(H)}let W;try{W=await J.json()}catch{W={count:z.length}}await _(),alert(`Successfully imported ${W.count||z.length} customers!`)}catch(z){console.error("Import error:",z),alert(z instanceof Error?z.message:"Failed to import customers")}finally{c(!1),R.target&&(R.target.value="")}}},ref:E}),s.jsxs("button",{onClick:O,className:"bg-green-500 text-white px-4 py-2 rounded-lg flex items-center hover:bg-green-600",children:[s.jsx(ip,{className:"w-4 h-4 mr-2"}),"Download Template"]}),s.jsxs("button",{onClick:()=>{var R;return(R=E.current)==null?void 0:R.click()},className:"bg-blue-500 text-white px-4 py-2 rounded-lg flex items-center hover:bg-blue-600",children:[s.jsx(lp,{className:"w-4 h-4 mr-2"}),"Import CSV"]}),s.jsxs("button",{onClick:()=>{p(null),y({name:"",email:"",phone:"",address:""}),d(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[s.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Add Customer"]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(zn,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Search customers...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:m,onChange:R=>x(R.target.value)})]}),P&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded relative",children:P}),!1,l?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):L.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(v0,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:m?"No customers found matching your search.":"No customers found. Add your first customer!"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:L.map(R=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(v0,{className:"w-8 h-8 text-blue-500 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:R.name}),s.jsx("p",{className:"text-sm text-gray-500",children:R.email||"No email"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>D(R),className:"text-blue-500 hover:text-blue-700",children:s.jsx(xl,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>I(R.id),className:"text-red-500 hover:text-red-700",children:s.jsx(br,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Phone:"}),s.jsx("span",{className:"font-medium",children:R.phone||"No phone"})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Address:"}),s.jsx("span",{className:"font-medium",children:R.address||"No address"})]})]})]},R.id))}),S>1&&s.jsxs("div",{className:"flex justify-center space-x-2 mt-6",children:[s.jsx("button",{onClick:()=>U(b-1),disabled:b===1,className:`px-4 py-2 rounded-md ${b===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Previous"}),s.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:S},(R,q)=>q+1).filter(R=>{const q=R===1,V=R===S,z=Math.abs(R-b)<=1;return q||V||z}).map((R,q,V)=>s.jsxs(B.Fragment,{children:[q>0&&V[q-1]!==R-1&&s.jsx("span",{className:"px-2",children:"..."}),s.jsx("button",{onClick:()=>U(R),className:`w-10 h-10 rounded-md ${b===R?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:R})]},R))}),s.jsx("button",{onClick:()=>U(b+1),disabled:b===S,className:`px-4 py-2 rounded-md ${b===S?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Next"})]})]}),u&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:f?"Edit Customer":"Add Customer"}),s.jsx("button",{onClick:()=>{d(!1),p(null),C(null)},className:"text-gray-500 hover:text-gray-700",children:s.jsx(Dt,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:A,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:h.name,onChange:R=>y({...h,name:R.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("input",{type:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:h.email,onChange:R=>y({...h,email:R.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),s.jsx("input",{type:"tel",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:h.phone,onChange:R=>y({...h,phone:R.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),s.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:h.address,onChange:R=>y({...h,address:R.target.value}),rows:3})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{d(!1),p(null),C(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:f?"Update":"Save"})]})]})]})})]})},Pde=()=>{const e=yt(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[o,i]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState({name:"",email:"",country:"",city:""}),[f,p]=g.useState(""),h=g.useCallback(async()=>{try{const v=await me("/api/suppliers");if(v.ok){const b=await v.json();r(Array.isArray(b)?b:[])}else v.status===401?e("/login"):(console.error("Failed to fetch suppliers"),r([]))}catch(v){console.error("Error fetching suppliers:",v),r([])}finally{a(!1)}},[e]);g.useEffect(()=>{h()},[h]);const y=v=>{c(v),d({name:v.name,email:v.email,country:v.country,city:v.city}),i(!0)},m=async v=>{if(window.confirm("Are you sure you want to delete this supplier?"))try{const b=await me(`/api/suppliers/${v}`,{method:"DELETE"});if(b.ok)r(t.filter(j=>j.id!==v));else{const j=await b.json().catch(()=>({}));alert(j.message||"Failed to delete supplier")}}catch(b){console.error("Error deleting supplier:",b),alert("Failed to delete supplier")}},x=async v=>{v.preventDefault();try{const b=l?`/api/suppliers/${l.id}`:"/api/suppliers",S=await me(b,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!S.ok){const N=await S.json().catch(()=>({}));throw new Error(N.message||"Failed to save supplier")}const k=await S.json();r(l?t.map(N=>N.id===k.id?k:N):[...t,k]),i(!1),c(null),d({name:"",email:"",country:"",city:""})}catch(b){console.error("Error saving supplier:",b),alert(b instanceof Error?b.message:"Failed to save supplier")}},w=t.filter(v=>v.name.toLowerCase().includes(f.toLowerCase())||v.email.toLowerCase().includes(f.toLowerCase())||v.country.toLowerCase().includes(f.toLowerCase())||v.city.toLowerCase().includes(f.toLowerCase()));return n?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Suppliers"}),s.jsxs("button",{onClick:()=>{c(null),d({name:"",email:"",country:"",city:""}),i(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[s.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Add Supplier"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(zn,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Search suppliers...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:f,onChange:v=>p(v.target.value)})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Country"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(v=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.id}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.country}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.city}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[s.jsx("button",{onClick:()=>y(v),className:"text-blue-500 hover:text-blue-700",children:s.jsx(xl,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>m(v.id),className:"text-red-500 hover:text-red-700",children:s.jsx(br,{className:"w-4 h-4"})})]})]},v.id))})]})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:l?"Edit Supplier":"Add Supplier"}),s.jsx("button",{onClick:()=>{i(!1),c(null)},className:"text-gray-500 hover:text-gray-700",children:s.jsx(Dt,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.name,onChange:v=>d({...u,name:v.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("input",{type:"email",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.email,onChange:v=>d({...u,email:v.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),s.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.country,onChange:v=>d({...u,country:v.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),s.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.city,onChange:v=>d({...u,city:v.target.value}),required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{i(!1),c(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:l?"Update":"Save"})]})]})]})})]})},Ede=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!1),[a,o]=g.useState({name:"",email:"",password:"",role:"USER"}),[i,l]=g.useState(!1),[c,u]=g.useState(!1),[d,f]=g.useState(null),[p,h]=g.useState(!1),y=g.useCallback(async()=>{var b;try{const j=await me("/api/users");if(j.ok){const S=await j.json();(b=S==null?void 0:S.data)!=null&&b.users?t(S.data.users):Array.isArray(S)?t(S):t([])}else console.error("Failed to fetch users"),t([])}catch(j){console.error("Error fetching users:",j),t([])}},[]);g.useEffect(()=>{y()},[y]);const m=async b=>{b.preventDefault();try{if(c&&d){const j=a.password?a:{name:a.name,email:a.email,role:a.role},S=await me(`/api/users/${d}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)});if(!S.ok){const k=await S.json().catch(()=>({}));throw new Error(k.message||"Failed to update user")}}else{const j=await me("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!j.ok){const S=await j.json().catch(()=>({}));throw new Error(S.message||"Failed to create user")}}n(!1),v(),await y()}catch(j){console.error("Error saving user:",j);const S=j instanceof Error?j.message:"An unexpected error occurred";alert(S)}},x=b=>{o({name:b.name,email:b.email,password:"",role:b.role}),f(b.id),u(!0),n(!0)},w=async b=>{if(window.confirm("Are you sure you want to delete this user?"))try{const j=await me(`/api/users/${b}`,{method:"DELETE"});if(!j.ok){const S=await j.json().catch(()=>({}));throw new Error(S.message||"Failed to delete user")}await y()}catch(j){console.error("Error deleting user:",j);const S=j instanceof Error?j.message:"An unexpected error occurred";alert(S)}},v=()=>{o({name:"",email:"",password:"",role:"USER"}),u(!1),f(null),l(!1),h(!1)};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Users Management"}),s.jsxs("button",{onClick:()=>{v(),n(!0)},className:"flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:[s.jsx(g5,{size:20}),"Add User"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(b=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.email}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.role}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b.isEmailVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:b.isEmailVerified?"Verified":"Pending"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>x(b),className:"text-blue-600 hover:text-blue-900",children:s.jsx(m5,{size:18})}),s.jsx("button",{onClick:()=>w(b.id),className:"text-red-600 hover:text-red-900",children:s.jsx(br,{size:18})})]})})]},b.id))})]})}),r&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:c?"Edit User":"Add New User"}),s.jsxs("form",{onSubmit:m,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",value:a.name,onChange:b=>o({...a,name:b.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("input",{type:"email",value:a.email,onChange:b=>o({...a,email:b.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:c?"New Password (leave blank to keep current)":"Password"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx("input",{type:c?p?"text":"password":i?"text":"password",value:a.password,onChange:b=>o({...a,password:b.target.value}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 pr-10",required:!c,placeholder:c?"Enter new password or leave blank":"Enter password"}),s.jsx("button",{type:"button",onClick:()=>c?h(!p):l(!i),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(c?p:i)?s.jsx(au,{className:"h-5 w-5 text-gray-400"}):s.jsx(So,{className:"h-5 w-5 text-gray-400"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),s.jsxs("select",{value:a.role,onChange:b=>o({...a,role:b.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[s.jsx("option",{value:"USER",children:"User"}),s.jsx("option",{value:"ADMIN",children:"Admin"})]})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-500 hover:bg-blue-600",children:c?"Update":"Create"})]})]})]})})]})};function Cde(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function rE(e){const t=document.documentElement;e==="dark"?t.classList.add("dark"):t.classList.remove("dark")}const GI=({className:e})=>{const[t,r]=g.useState(()=>{const a=localStorage.getItem("theme");return a==="dark"||a==="light"?a:Cde()?"dark":"light"});g.useEffect(()=>{rE(t),localStorage.setItem("theme",t)},[t]),g.useEffect(()=>{const a=localStorage.getItem("theme");if(a==="dark"||a==="light")return;const o=window.matchMedia("(prefers-color-scheme: dark)"),i=l=>{const c=l.matches?"dark":"light";r(c),rE(c)};return o.addEventListener("change",i),()=>o.removeEventListener("change",i)},[]);const n=()=>r(a=>a==="dark"?"light":"dark");return s.jsxs("button",{type:"button",onClick:n,"aria-label":"Toggle dark mode",className:"inline-flex items-center gap-2 rounded-md px-3 py-2 text-sm font-medium border transition-colors bg-white text-gray-700 border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700 "+(e||""),children:[t==="dark"?s.jsx(p5,{className:"w-4 h-4"}):s.jsx(S5,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:t==="dark"?"Dark":"Light"})]})},Ade=()=>{const e=yt(),[t,r]=g.useState({id:1,companyName:"",address:"",phone1:"",phone2:"",location:"",mobileMoneyNumber:""}),[n,a]=g.useState(!0),[o,i]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState(null),[f,p]=g.useState("checking"),[h,y]=g.useState(!1),[m,x]=g.useState([]),[w,v]=g.useState(!1),[b,j]=g.useState(null),[S,k]=g.useState(!1),[N,P]=g.useState(()=>localStorage.getItem("qz.printMode")==="browser"?"browser":"silent");g.useEffect(()=>{localStorage.setItem("qz.printMode",N)},[N]);const C=g.useCallback(async()=>{p("checking"),await E(!0),f!=="connected"&&(setTimeout(()=>E(!0),1500),setTimeout(()=>E(!0),3500))},[]);g.useEffect(()=>{L(),C()},[C]);const E=async D=>{try{y(!0),D||p("checking");const I=window.location.protocol==="https:",A=window.location.hostname==="tauri.localhost",$=I||A?3e4:12e3,O=new Promise((V,z)=>setTimeout(()=>z(new Error(`Timeout after ${$/1e3}s - QZ Tray may not be running or trusted`)),$)),R=vr.isAvailable(),q=await Promise.race([R,O]);p(q?"connected":"disconnected"),q?_():I&&console.warn("QZ Tray: HTTPS connection failed - check system tray for trust prompts")}catch(I){console.error("Failed to check QZ Tray status:",I),(I instanceof Error?I.message:String(I)).includes("Timeout")&&console.warn("QZ Tray: Connection timeout - ensure QZ Tray application is running in system tray"),p("disconnected")}finally{y(!1)}},_=async()=>{try{if(v(!0),!await vr.isAvailable()){x([]);return}const I=await vr.getPrinters();x(I)}catch(D){console.warn("Failed to load printers",D),x([])}finally{v(!1)}},L=async()=>{try{c(null);const D=await me("/api/settings/company");if(D.ok){const I=await D.json();r(I)}else throw new Error("Failed to fetch settings")}catch(D){c("Error loading settings: "+(D instanceof Error?D.message:"Unknown error"))}finally{a(!1)}},U=async D=>{D.preventDefault(),i(!0),c(null),d(null);try{if((await me("/api/settings/company",{method:"PUT",body:JSON.stringify(t)})).ok)d("Settings saved successfully");else throw new Error("Failed to save settings")}catch(I){c("Error saving settings: "+(I instanceof Error?I.message:"Unknown error"))}finally{i(!1)}};return n?s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(mr,{className:"w-8 h-8 animate-spin"})}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-gray-100",children:"Settings"}),s.jsx(GI,{})]}),l&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-600 rounded-md",children:l}),u&&s.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-600 rounded-md",children:u}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(jo,{className:"w-8 h-8 text-blue-500"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Invoice Settings"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Configure company information for invoices"})]})]}),s.jsx(Ps,{className:"w-5 h-5 text-gray-400"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:"Set up company name, address, phone numbers, and other details that appear on invoices."})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>e("/printer-setup"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Zr,{className:"w-8 h-8 text-green-500"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Printer Setup"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Configure wholesale and retail printers"})]})]}),s.jsx(Ps,{className:"w-5 h-5 text-gray-400"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:"Set up different printers for wholesale A5 invoices and retail receipts."}),s.jsxs("button",{className:"w-full px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors flex items-center justify-center gap-2",children:[s.jsx(vb,{className:"w-4 h-4"}),"Configure Printers"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>e("/qz-tray-setup"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(xS,{className:"w-8 h-8 text-purple-500"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"QZ Tray Silent Printing"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Configure silent printing without dialogs"})]})]}),s.jsx(Ps,{className:"w-5 h-5 text-gray-400"})]}),s.jsxs("div",{className:"mb-4",children:[f==="checking"&&s.jsxs("div",{className:"flex items-center gap-2 text-yellow-600",children:[s.jsx(mr,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{className:"text-sm",children:"Attempting connection..."})]}),f==="connected"&&s.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[s.jsx(Bh,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"QZ Tray Connected & Ready"})]}),f==="disconnected"&&s.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[s.jsx(A5,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"QZ Tray Not Connected"}),window.location.protocol==="https:"&&s.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"HTTPS Mode"})]})]}),f==="disconnected"&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Fh,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-medium text-red-800",children:"QZ Tray Setup Required"}),s.jsxs("ol",{className:"text-sm text-red-700 space-y-1 list-decimal ml-4",children:[s.jsxs("li",{children:["Download and install QZ Tray from ",s.jsx("a",{href:"https://qz.io/download/",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"qz.io/download"})]}),s.jsx("li",{children:"Launch the QZ Tray application (check system tray)"}),s.jsx("li",{children:'Click "Refresh Status" below once QZ Tray is running'}),s.jsx("li",{children:"Accept any browser trust/security prompts"}),window.location.protocol==="https:"&&s.jsxs(s.Fragment,{children:[s.jsx("li",{className:"font-semibold text-red-800",children:"HTTPS Setup: Look for QZ Tray trust prompts in browser"}),s.jsx("li",{className:"font-semibold text-red-800",children:"Ensure QZ Tray shows green lock icon (trusted)"}),s.jsx("li",{className:"font-semibold text-red-800",children:"QZ Tray must use secure WebSocket (WSS) for HTTPS sites"}),s.jsx("li",{className:"text-red-700",children:"If timeouts occur, QZ Tray may not be running or may need browser trust"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mt-2",children:s.jsxs("div",{className:"text-xs text-blue-800",children:[s.jsx("strong",{children:"Quick Check:"})," QZ Tray should appear in your system tray (bottom-right corner).",window.location.protocol==="https:"&&s.jsxs("span",{className:"block mt-1",children:[s.jsx("strong",{children:"HTTPS:"})," Look for security prompts in your browser when connecting."]})]})}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),window.open("https://qz.io/download/","_blank")},className:"text-xs px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Download QZ Tray"}),s.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),window.open("https://qz.io/wiki/getting-started","_blank")},className:"text-xs px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Setup Guide"}),window.location.protocol==="https:"&&s.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),window.open("https://qz.io/wiki/troubleshooting#https-ssl","_blank")},className:"text-xs px-3 py-1 bg-purple-100 text-purple-700 rounded hover:bg-purple-200",children:"HTTPS Guide"})]})]})]})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4",children:"Set up QZ Tray for seamless, silent printing without browser dialogs."}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{className:"w-full px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors flex items-center justify-center gap-2",children:[s.jsx(xS,{className:"w-4 h-4"}),"Configure QZ Tray"]}),s.jsx("button",{onClick:D=>{D.stopPropagation(),E(),_()},disabled:h,className:"w-full px-3 py-1 text-sm bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-200 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed",children:h?s.jsxs(s.Fragment,{children:[s.jsx(mr,{className:"w-3 h-3 animate-spin"}),"Checking..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ou,{className:"w-3 h-3"}),"Refresh Status"]})}),s.jsxs("button",{onClick:async D=>{D.stopPropagation(),k(!0);try{const I=window.location.protocol==="https:";console.log("QZ Diagnostics: Running diagnostics...",{isHttps:I,location:window.location.href});const $={...await vr.diagnose(),environment:{isHttps:I,protocol:window.location.protocol,host:window.location.host,userAgent:navigator.userAgent,timestamp:new Date().toISOString()},httpsNotes:I?["HTTPS detected - QZ Tray must use secure WebSocket (WSS)","Browser may block self-signed certificates","Check QZ Tray system tray for trust prompts","Ensure QZ Tray shows green lock icon (trusted)"]:["HTTP detected - Standard WebSocket (WS) should work"]};j($),console.log("QZ Diagnostics",$)}catch(I){const A={error:I instanceof Error?I.message:String(I),environment:{isHttps:window.location.protocol==="https:",protocol:window.location.protocol,host:window.location.host,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}};j(A),console.error("QZ Diagnostics Error:",A)}finally{k(!1)}},className:"w-full px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-md hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors flex items-center justify-center gap-2",disabled:S,children:[S?s.jsx(mr,{className:"w-3 h-3 animate-spin"}):s.jsx(r2,{className:"w-3 h-3"}),S?"Running Diagnostics...":"Run Diagnostics"]}),f==="connected"&&s.jsxs("div",{className:"mt-2 border rounded-md p-2 max-h-40 overflow-auto bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-300 flex items-center gap-1",children:[s.jsx(Zr,{className:"w-3 h-3"}),"Printers"]}),s.jsxs("button",{type:"button",onClick:D=>{D.stopPropagation(),_()},className:"text-[10px] px-1 py-0.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-1",children:[s.jsx(ou,{className:"w-2.5 h-2.5"}),"Reload"]})]}),w&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-300",children:[s.jsx(mr,{className:"w-3 h-3 animate-spin"}),"Loading..."]}),!w&&m.length===0&&s.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 space-y-2",children:[s.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-200",children:"No printers detected"}),s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-2 space-y-1",children:[s.jsx("div",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Troubleshooting Steps:"}),s.jsxs("ul",{className:"list-disc ml-4 space-y-0.5 text-yellow-700 dark:text-yellow-300",children:[s.jsx("li",{children:"Ensure QZ Tray application is running (system tray)"}),s.jsx("li",{children:"Look for green lock icon in QZ Tray (means trusted)"}),s.jsx("li",{children:"Accept any browser security prompts"}),s.jsx("li",{children:"Verify printers work in Windows Control Panel"}),s.jsx("li",{children:"Try printing a Windows test page first"}),s.jsx("li",{children:"Restart QZ Tray application if needed"})]})]}),s.jsxs("div",{className:"flex gap-1 mt-2",children:[s.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),window.open("https://qz.io/download/","_blank")},className:"text-[10px] px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Download QZ Tray"}),s.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),console.clear(),_()},className:"text-[10px] px-2 py-1 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Debug Reload"})]})]}),s.jsx("ul",{className:"space-y-1",children:m.map(D=>{const I=D.startsWith("\\\\")||D.startsWith("\\\\");return s.jsxs("li",{className:"text-[11px] text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[s.jsx(l5,{className:"w-3 h-3 text-gray-400"}),s.jsx("span",{className:"truncate",title:D,children:D}),s.jsx("span",{className:`ml-auto px-1.5 py-0.5 rounded text-[9px] ${I?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"}`,children:I?"Network":"Local"})]},D)})})]}),b&&s.jsx("div",{className:"mt-2 border rounded-md p-2 bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 max-h-48 overflow-auto",children:s.jsxs("div",{className:"text-[10px] font-mono whitespace-pre-wrap break-all",children:[b.environment&&s.jsxs("div",{className:"mb-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"font-bold text-blue-800 dark:text-blue-300 mb-1",children:"Environment:"}),s.jsxs("div",{children:["Protocol: ",b.environment.protocol]}),s.jsxs("div",{children:["Host: ",b.environment.host]}),s.jsxs("div",{children:["HTTPS: ",b.environment.isHttps?"Yes":"No"]})]}),b.httpsNotes&&s.jsxs("div",{className:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800",children:[s.jsx("div",{className:"font-bold text-yellow-800 dark:text-yellow-300 mb-1",children:"HTTPS Notes:"}),b.httpsNotes.map((D,I)=>s.jsxs("div",{className:"text-yellow-700 dark:text-yellow-300",children:[" ",D]},I))]}),s.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:JSON.stringify(b,null,2)})]})}),s.jsxs("div",{className:"mt-4 border rounded-md p-3 bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-700",onClick:D=>D.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(b5,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"}),s.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-200",children:"Printing Mode"}),s.jsx("span",{className:`ml-auto text-[10px] px-1.5 py-0.5 rounded ${N==="silent"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"}`,children:N==="silent"?"Silent (QZ Tray)":"Browser Dialog"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"printMode",value:"silent",checked:N==="silent",onChange:()=>P("silent"),className:"mt-0.5"}),s.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Silent (QZ Tray)"}),s.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"Use saved printers for automatic, dialog-free printing when available."})]})]}),s.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"printMode",value:"browser",checked:N==="browser",onChange:()=>P("browser"),className:"mt-0.5"}),s.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300",children:[s.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-100",children:"Browser Dialog"}),s.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"Always show the browser print dialog (ignores silent printer settings)."})]})]})]}),(localStorage.getItem("qz.invoicePrinter")||localStorage.getItem("qz.receiptPrinter"))&&s.jsxs("div",{className:"mt-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded p-2",children:[s.jsxs("div",{className:"text-[10px] font-semibold text-gray-600 dark:text-gray-300 mb-1 flex items-center gap-1",children:[s.jsx(Zr,{className:"w-3 h-3"}),"Saved Printers"]}),s.jsxs("ul",{className:"space-y-1 text-[10px] text-gray-700 dark:text-gray-300",children:[localStorage.getItem("qz.invoicePrinter")&&s.jsxs("li",{children:["Invoice: ",localStorage.getItem("qz.invoicePrinter")]}),localStorage.getItem("qz.receiptPrinter")&&s.jsxs("li",{children:["Receipt: ",localStorage.getItem("qz.receiptPrinter")]})]})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center gap-2",children:[s.jsx(jo,{className:"w-5 h-5"}),s.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:"Invoice Settings"})]}),s.jsxs("form",{onSubmit:U,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name"}),s.jsx("input",{type:"text",value:t.companyName,onChange:D=>r({...t,companyName:D.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),s.jsx("input",{type:"text",value:t.address,onChange:D=>r({...t,address:D.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone 1"}),s.jsx("input",{type:"text",value:t.phone1,onChange:D=>r({...t,phone1:D.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone 2"}),s.jsx("input",{type:"text",value:t.phone2,onChange:D=>r({...t,phone2:D.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),s.jsx("input",{type:"text",value:t.location,onChange:D=>r({...t,location:D.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile Money Number"}),s.jsx("input",{type:"text",value:t.mobileMoneyNumber,onChange:D=>r({...t,mobileMoneyNumber:D.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-700 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-2 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:o?s.jsxs(s.Fragment,{children:[s.jsx(mr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ci,{className:"w-4 h-4"}),"Save Settings"]})})})]})]})]})},Tde=()=>{const e=yt(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[o,i]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState({name:""}),[f,p]=g.useState(""),h=g.useCallback(async()=>{try{const v=await me("/api/units");if(v.ok){const b=await v.json();r(Array.isArray(b)?b:[])}else v.status===401?e("/login"):(console.error("Failed to fetch units"),r([]))}catch(v){console.error("Error fetching units:",v),r([])}finally{a(!1)}},[e]);g.useEffect(()=>{h()},[h]);const y=v=>{c(v),d({name:v.name}),i(!0)},m=async v=>{if(window.confirm("Are you sure you want to delete this unit?"))try{const b=await me(`/api/units/${v}`,{method:"DELETE"});if(b.ok)r(t.filter(j=>j.id!==v));else{const j=await b.json().catch(()=>({}));alert(j.message||"Failed to delete unit")}}catch(b){console.error("Error deleting unit:",b),alert("Failed to delete unit")}},x=async v=>{v.preventDefault();try{const b=l?`/api/units/${l.id}`:"/api/units",S=await me(b,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name})});if(console.log("Request payload:",{name:u.name}),!S.ok){const N=await S.json().catch(()=>({}));throw console.error("Error response:",N),new Error(N.message||"Failed to save unit")}const k=await S.json();console.log("Saved unit:",k),r(l?t.map(N=>N.id===k.id?k:N):[...t,k]),i(!1),c(null),d({name:""})}catch(b){console.error("Error saving unit:",b),alert(b instanceof Error?b.message:"Failed to save unit")}},w=t.filter(v=>v.name.toLowerCase().includes(f.toLowerCase()));return n?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Units"}),s.jsxs("button",{onClick:()=>{c(null),d({name:""}),i(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[s.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Add Unit"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(zn,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Search units...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:f,onChange:v=>p(v.target.value)})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(v=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.id}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.name}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[s.jsx("button",{onClick:()=>y(v),className:"text-blue-500 hover:text-blue-700",children:s.jsx(xl,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>m(v.id),className:"text-red-500 hover:text-red-700",children:s.jsx(br,{className:"w-4 h-4"})})]})]},v.id))})]})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:l?"Edit Unit":"Add Unit"}),s.jsx("button",{onClick:()=>{i(!1),c(null)},className:"text-gray-500 hover:text-gray-700",children:s.jsx(Dt,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),s.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:u.name,onChange:v=>d({...u,name:v.target.value}),required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{i(!1),c(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:l?"Update":"Save"})]})]})]})})]})},Ji=g.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,ref:n,...r}));Ji.displayName="Input";function nE(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ZI(...e){return t=>{let r=!1;const n=e.map(a=>{const o=nE(a,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():nE(e[a],null)}}}}function ur(...e){return g.useCallback(ZI(...e),e)}var fl=g.forwardRef((e,t)=>{const{children:r,...n}=e,a=g.Children.toArray(r),o=a.find(_de);if(o){const i=o.props.children,l=a.map(c=>c===o?g.Children.count(i)>1?g.Children.only(null):g.isValidElement(i)?i.props.children:null:c);return s.jsx(lx,{...n,ref:t,children:g.isValidElement(i)?g.cloneElement(i,void 0,l):null})}return s.jsx(lx,{...n,ref:t,children:r})});fl.displayName="Slot";var lx=g.forwardRef((e,t)=>{const{children:r,...n}=e;if(g.isValidElement(r)){const a=$de(r),o=Ide(n,r.props);return r.type!==g.Fragment&&(o.ref=t?ZI(t,a):a),g.cloneElement(r,o)}return g.Children.count(r)>1?g.Children.only(null):null});lx.displayName="SlotClone";var Ode=({children:e})=>s.jsx(s.Fragment,{children:e});function _de(e){return g.isValidElement(e)&&e.type===Ode}function Ide(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...l)=>{o(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}function $de(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}const aE=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,oE=Ge,Rde=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return oE(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=o==null?void 0:o[u];if(d===null)return null;const p=aE(d)||aE(f);return a[u][p]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,p]=d;return p===void 0||(u[f]=p),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:p,...h}=d;return Object.entries(h).every(y=>{let[m,x]=y;return Array.isArray(x)?x.includes({...o,...l}[m]):{...o,...l}[m]===x})?[...u,f,p]:u},[]);return oE(e,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},Dde=Rde("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),cx=g.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},o)=>{const i=n?fl:"button";return s.jsx(i,{className:Dde({variant:t,size:r,className:e}),ref:o,...a})});cx.displayName="Button";function iE(e,[t,r]){return Math.min(r,Math.max(t,e))}function Bt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Hw(e,t=[]){let r=[];function n(o,i){const l=g.createContext(i),c=r.length;r=[...r,i];const u=f=>{var w;const{scope:p,children:h,...y}=f,m=((w=p==null?void 0:p[e])==null?void 0:w[c])||l,x=g.useMemo(()=>y,Object.values(y));return s.jsx(m.Provider,{value:x,children:h})};u.displayName=o+"Provider";function d(f,p){var m;const h=((m=p==null?void 0:p[e])==null?void 0:m[c])||l,y=g.useContext(h);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,d]}const a=()=>{const o=r.map(i=>g.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return g.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,Mde(a,...t)]}function Mde(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(o)[`__scope${u}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function Lde(e){const t=e+"CollectionProvider",[r,n]=Hw(t),[a,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=h=>{const{scope:y,children:m}=h,x=B.useRef(null),w=B.useRef(new Map).current;return s.jsx(a,{scope:y,itemMap:w,collectionRef:x,children:m})};i.displayName=t;const l=e+"CollectionSlot",c=B.forwardRef((h,y)=>{const{scope:m,children:x}=h,w=o(l,m),v=ur(y,w.collectionRef);return s.jsx(fl,{ref:v,children:x})});c.displayName=l;const u=e+"CollectionItemSlot",d="data-radix-collection-item",f=B.forwardRef((h,y)=>{const{scope:m,children:x,...w}=h,v=B.useRef(null),b=ur(y,v),j=o(u,m);return B.useEffect(()=>(j.itemMap.set(v,{ref:v,...w}),()=>void j.itemMap.delete(v))),s.jsx(fl,{[d]:"",ref:b,children:x})});f.displayName=u;function p(h){const y=o(e+"CollectionConsumer",h);return B.useCallback(()=>{const x=y.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((j,S)=>w.indexOf(j.ref.current)-w.indexOf(S.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:i,Slot:c,ItemSlot:f},p,n]}var Fde=g.createContext(void 0);function Ude(e){const t=g.useContext(Fde);return e||t||"ltr"}var Bde=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Lt=Bde.reduce((e,t)=>{const r=g.forwardRef((n,a)=>{const{asChild:o,...i}=n,l=o?fl:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...i,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function zde(e,t){e&&Ei.flushSync(()=>e.dispatchEvent(t))}function Ma(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function qde(e,t=globalThis==null?void 0:globalThis.document){const r=Ma(e);g.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var Hde="DismissableLayer",ux="dismissableLayer.update",Vde="dismissableLayer.pointerDownOutside",Wde="dismissableLayer.focusOutside",sE,XI=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),YI=g.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,u=g.useContext(XI),[d,f]=g.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=g.useState({}),y=ur(t,N=>f(N)),m=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=m.indexOf(x),v=d?m.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,j=v>=w,S=Gde(N=>{const P=N.target,C=[...u.branches].some(E=>E.contains(P));!j||C||(a==null||a(N),i==null||i(N),N.defaultPrevented||l==null||l())},p),k=Zde(N=>{const P=N.target;[...u.branches].some(E=>E.contains(P))||(o==null||o(N),i==null||i(N),N.defaultPrevented||l==null||l())},p);return qde(N=>{v===u.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),g.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(sE=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),lE(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=sE)}},[d,p,r,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),lE())},[d,u]),g.useEffect(()=>{const N=()=>h({});return document.addEventListener(ux,N),()=>document.removeEventListener(ux,N)},[]),s.jsx(Lt.div,{...c,ref:y,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:Bt(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Bt(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Bt(e.onPointerDownCapture,S.onPointerDownCapture)})});YI.displayName=Hde;var Qde="DismissableLayerBranch",Kde=g.forwardRef((e,t)=>{const r=g.useContext(XI),n=g.useRef(null),a=ur(t,n);return g.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),s.jsx(Lt.div,{...e,ref:a})});Kde.displayName=Qde;function Gde(e,t=globalThis==null?void 0:globalThis.document){const r=Ma(e),n=g.useRef(!1),a=g.useRef(()=>{});return g.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){JI(Vde,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Zde(e,t=globalThis==null?void 0:globalThis.document){const r=Ma(e),n=g.useRef(!1);return g.useEffect(()=>{const a=o=>{o.target&&!n.current&&JI(Wde,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function lE(){const e=new CustomEvent(ux);document.dispatchEvent(e)}function JI(e,t,r,{discrete:n}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?zde(a,o):a.dispatchEvent(o)}var fy=0;function Xde(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??cE()),document.body.insertAdjacentElement("beforeend",e[1]??cE()),fy++,()=>{fy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),fy--}},[])}function cE(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var py="focusScope.autoFocusOnMount",hy="focusScope.autoFocusOnUnmount",uE={bubbles:!1,cancelable:!0},Yde="FocusScope",e$=g.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=g.useState(null),u=Ma(a),d=Ma(o),f=g.useRef(null),p=ur(t,m=>c(m)),h=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(n){let m=function(b){if(h.paused||!l)return;const j=b.target;l.contains(j)?f.current=j:Ka(f.current,{select:!0})},x=function(b){if(h.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||Ka(f.current,{select:!0}))},w=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&Ka(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",x);const v=new MutationObserver(w);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",x),v.disconnect()}}},[n,l,h.paused]),g.useEffect(()=>{if(l){fE.add(h);const m=document.activeElement;if(!l.contains(m)){const w=new CustomEvent(py,uE);l.addEventListener(py,u),l.dispatchEvent(w),w.defaultPrevented||(Jde(afe(t$(l)),{select:!0}),document.activeElement===m&&Ka(l))}return()=>{l.removeEventListener(py,u),setTimeout(()=>{const w=new CustomEvent(hy,uE);l.addEventListener(hy,d),l.dispatchEvent(w),w.defaultPrevented||Ka(m??document.body,{select:!0}),l.removeEventListener(hy,d),fE.remove(h)},0)}}},[l,u,d,h]);const y=g.useCallback(m=>{if(!r&&!n||h.paused)return;const x=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,w=document.activeElement;if(x&&w){const v=m.currentTarget,[b,j]=efe(v);b&&j?!m.shiftKey&&w===j?(m.preventDefault(),r&&Ka(b,{select:!0})):m.shiftKey&&w===b&&(m.preventDefault(),r&&Ka(j,{select:!0})):w===v&&m.preventDefault()}},[r,n,h.paused]);return s.jsx(Lt.div,{tabIndex:-1,...i,ref:p,onKeyDown:y})});e$.displayName=Yde;function Jde(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ka(n,{select:t}),document.activeElement!==r)return}function efe(e){const t=t$(e),r=dE(t,e),n=dE(t.reverse(),e);return[r,n]}function t$(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function dE(e,t){for(const r of e)if(!tfe(r,{upTo:t}))return r}function tfe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function rfe(e){return e instanceof HTMLInputElement&&"select"in e}function Ka(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&rfe(e)&&t&&e.select()}}var fE=nfe();function nfe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=pE(e,t),e.unshift(t)},remove(t){var r;e=pE(e,t),(r=e[0])==null||r.resume()}}}function pE(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function afe(e){return e.filter(t=>t.tagName!=="A")}var nn=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},ofe=Tf.useId||(()=>{}),ife=0;function Vw(e){const[t,r]=g.useState(ofe());return nn(()=>{r(n=>n??String(ife++))},[e]),t?`radix-${t}`:""}const sfe=["top","right","bottom","left"],ko=Math.min,Qr=Math.max,hh=Math.round,Jd=Math.floor,aa=e=>({x:e,y:e}),lfe={left:"right",right:"left",bottom:"top",top:"bottom"},cfe={start:"end",end:"start"};function dx(e,t,r){return Qr(e,ko(t,r))}function La(e,t){return typeof e=="function"?e(t):e}function Fa(e){return e.split("-")[0]}function Ll(e){return e.split("-")[1]}function Ww(e){return e==="x"?"y":"x"}function Qw(e){return e==="y"?"height":"width"}function Po(e){return["top","bottom"].includes(Fa(e))?"y":"x"}function Kw(e){return Ww(Po(e))}function ufe(e,t,r){r===void 0&&(r=!1);const n=Ll(e),a=Kw(e),o=Qw(a);let i=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=mh(i)),[i,mh(i)]}function dfe(e){const t=mh(e);return[fx(e),t,fx(t)]}function fx(e){return e.replace(/start|end/g,t=>cfe[t])}function ffe(e,t,r){const n=["left","right"],a=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?o:i;default:return[]}}function pfe(e,t,r,n){const a=Ll(e);let o=ffe(Fa(e),r==="start",n);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(fx)))),o}function mh(e){return e.replace(/left|right|bottom|top/g,t=>lfe[t])}function hfe(e){return{top:0,right:0,bottom:0,left:0,...e}}function r$(e){return typeof e!="number"?hfe(e):{top:e,right:e,bottom:e,left:e}}function gh(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function hE(e,t,r){let{reference:n,floating:a}=e;const o=Po(t),i=Kw(t),l=Qw(i),c=Fa(t),u=o==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,p=n[l]/2-a[l]/2;let h;switch(c){case"top":h={x:d,y:n.y-a.height};break;case"bottom":h={x:d,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:f};break;case"left":h={x:n.x-a.width,y:f};break;default:h={x:n.x,y:n.y}}switch(Ll(t)){case"start":h[i]-=p*(r&&u?-1:1);break;case"end":h[i]+=p*(r&&u?-1:1);break}return h}const mfe=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=hE(u,n,c),p=n,h={},y=0;for(let m=0;m<l.length;m++){const{name:x,fn:w}=l[m],{x:v,y:b,data:j,reset:S}=await w({x:d,y:f,initialPlacement:n,placement:p,strategy:a,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});d=v??d,f=b??f,h={...h,[x]:{...h[x],...j}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(u=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:d,y:f}=hE(u,p,c)),m=-1)}return{x:d,y:f,placement:p,strategy:a,middlewareData:h}};async function qu(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=La(t,e),y=r$(h),x=l[p?f==="floating"?"reference":"floating":f],w=gh(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(x)))==null||r?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=f==="floating"?{x:n,y:a,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),j=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},S=gh(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(w.top-S.top+y.top)/j.y,bottom:(S.bottom-w.bottom+y.bottom)/j.y,left:(w.left-S.left+y.left)/j.x,right:(S.right-w.right+y.right)/j.x}}const gfe=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=La(e,t)||{};if(u==null)return{};const f=r$(d),p={x:r,y:n},h=Kw(a),y=Qw(h),m=await i.getDimensions(u),x=h==="y",w=x?"top":"left",v=x?"bottom":"right",b=x?"clientHeight":"clientWidth",j=o.reference[y]+o.reference[h]-p[h]-o.floating[y],S=p[h]-o.reference[h],k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let N=k?k[b]:0;(!N||!await(i.isElement==null?void 0:i.isElement(k)))&&(N=l.floating[b]||o.floating[y]);const P=j/2-S/2,C=N/2-m[y]/2-1,E=ko(f[w],C),_=ko(f[v],C),L=E,U=N-m[y]-_,D=N/2-m[y]/2+P,I=dx(L,D,U),A=!c.arrow&&Ll(a)!=null&&D!==I&&o.reference[y]/2-(D<L?E:_)-m[y]/2<0,$=A?D<L?D-L:D-U:0;return{[h]:p[h]+$,data:{[h]:I,centerOffset:D-I-$,...A&&{alignmentOffset:$}},reset:A}}}),yfe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...x}=La(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const w=Fa(a),v=Po(l),b=Fa(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=p||(b||!m?[mh(l)]:dfe(l)),k=y!=="none";!p&&k&&S.push(...pfe(l,m,y,j));const N=[l,...S],P=await qu(t,x),C=[];let E=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&C.push(P[w]),f){const D=ufe(a,i,j);C.push(P[D[0]],P[D[1]])}if(E=[...E,{placement:a,overflows:C}],!C.every(D=>D<=0)){var _,L;const D=(((_=o.flip)==null?void 0:_.index)||0)+1,I=N[D];if(I)return{data:{index:D,overflows:E},reset:{placement:I}};let A=(L=E.filter($=>$.overflows[0]<=0).sort(($,O)=>$.overflows[1]-O.overflows[1])[0])==null?void 0:L.placement;if(!A)switch(h){case"bestFit":{var U;const $=(U=E.filter(O=>{if(k){const R=Po(O.placement);return R===v||R==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(R=>R>0).reduce((R,q)=>R+q,0)]).sort((O,R)=>O[1]-R[1])[0])==null?void 0:U[0];$&&(A=$);break}case"initialPlacement":A=l;break}if(a!==A)return{reset:{placement:A}}}return{}}}};function mE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function gE(e){return sfe.some(t=>e[t]>=0)}const vfe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=La(e,t);switch(n){case"referenceHidden":{const o=await qu(t,{...a,elementContext:"reference"}),i=mE(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:gE(i)}}}case"escaped":{const o=await qu(t,{...a,altBoundary:!0}),i=mE(o,r.floating);return{data:{escapedOffsets:i,escaped:gE(i)}}}default:return{}}}}};async function xfe(e,t){const{placement:r,platform:n,elements:a}=e,o=await(n.isRTL==null?void 0:n.isRTL(a.floating)),i=Fa(r),l=Ll(r),c=Po(r)==="y",u=["left","top"].includes(i)?-1:1,d=o&&c?-1:1,f=La(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(h=l==="end"?y*-1:y),c?{x:h*d,y:p*u}:{x:p*u,y:h*d}}const bfe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:o,placement:i,middlewareData:l}=t,c=await xfe(t,e);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},wfe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:x=>{let{x:w,y:v}=x;return{x:w,y:v}}},...c}=La(e,t),u={x:r,y:n},d=await qu(t,c),f=Po(Fa(a)),p=Ww(f);let h=u[p],y=u[f];if(o){const x=p==="y"?"top":"left",w=p==="y"?"bottom":"right",v=h+d[x],b=h-d[w];h=dx(v,h,b)}if(i){const x=f==="y"?"top":"left",w=f==="y"?"bottom":"right",v=y+d[x],b=y-d[w];y=dx(v,y,b)}const m=l.fn({...t,[p]:h,[f]:y});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[p]:o,[f]:i}}}}}},Sfe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=La(e,t),d={x:r,y:n},f=Po(a),p=Ww(f);let h=d[p],y=d[f];const m=La(l,t),x=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const b=p==="y"?"height":"width",j=o.reference[p]-o.floating[b]+x.mainAxis,S=o.reference[p]+o.reference[b]-x.mainAxis;h<j?h=j:h>S&&(h=S)}if(u){var w,v;const b=p==="y"?"width":"height",j=["top","left"].includes(Fa(a)),S=o.reference[f]-o.floating[b]+(j&&((w=i.offset)==null?void 0:w[f])||0)+(j?0:x.crossAxis),k=o.reference[f]+o.reference[b]+(j?0:((v=i.offset)==null?void 0:v[f])||0)-(j?x.crossAxis:0);y<S?y=S:y>k&&(y=k)}return{[p]:h,[f]:y}}}},jfe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...u}=La(e,t),d=await qu(t,u),f=Fa(a),p=Ll(a),h=Po(a)==="y",{width:y,height:m}=o.floating;let x,w;f==="top"||f==="bottom"?(x=f,w=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(w=f,x=p==="end"?"top":"bottom");const v=m-d.top-d.bottom,b=y-d.left-d.right,j=ko(m-d[x],v),S=ko(y-d[w],b),k=!t.middlewareData.shift;let N=j,P=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(P=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(N=v),k&&!p){const E=Qr(d.left,0),_=Qr(d.right,0),L=Qr(d.top,0),U=Qr(d.bottom,0);h?P=y-2*(E!==0||_!==0?E+_:Qr(d.left,d.right)):N=m-2*(L!==0||U!==0?L+U:Qr(d.top,d.bottom))}await c({...t,availableWidth:P,availableHeight:N});const C=await i.getDimensions(l.floating);return y!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}};function Qm(){return typeof window<"u"}function Fl(e){return n$(e)?(e.nodeName||"").toLowerCase():"#document"}function tn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fa(e){var t;return(t=(n$(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function n$(e){return Qm()?e instanceof Node||e instanceof tn(e).Node:!1}function Un(e){return Qm()?e instanceof Element||e instanceof tn(e).Element:!1}function la(e){return Qm()?e instanceof HTMLElement||e instanceof tn(e).HTMLElement:!1}function yE(e){return!Qm()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tn(e).ShadowRoot}function md(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Bn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Nfe(e){return["table","td","th"].includes(Fl(e))}function Km(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Gw(e){const t=Zw(),r=Un(e)?Bn(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function kfe(e){let t=Eo(e);for(;la(t)&&!pl(t);){if(Gw(t))return t;if(Km(t))return null;t=Eo(t)}return null}function Zw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function pl(e){return["html","body","#document"].includes(Fl(e))}function Bn(e){return tn(e).getComputedStyle(e)}function Gm(e){return Un(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Eo(e){if(Fl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||yE(e)&&e.host||fa(e);return yE(t)?t.host:t}function a$(e){const t=Eo(e);return pl(t)?e.ownerDocument?e.ownerDocument.body:e.body:la(t)&&md(t)?t:a$(t)}function Hu(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=a$(e),o=a===((n=e.ownerDocument)==null?void 0:n.body),i=tn(a);if(o){const l=px(i);return t.concat(i,i.visualViewport||[],md(a)?a:[],l&&r?Hu(l):[])}return t.concat(a,Hu(a,[],r))}function px(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function o$(e){const t=Bn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=la(e),o=a?e.offsetWidth:r,i=a?e.offsetHeight:n,l=hh(r)!==o||hh(n)!==i;return l&&(r=o,n=i),{width:r,height:n,$:l}}function Xw(e){return Un(e)?e:e.contextElement}function Os(e){const t=Xw(e);if(!la(t))return aa(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:o}=o$(t);let i=(o?hh(r.width):r.width)/n,l=(o?hh(r.height):r.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const Pfe=aa(0);function i$(e){const t=tn(e);return!Zw()||!t.visualViewport?Pfe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Efe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==tn(e)?!1:t}function ji(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),o=Xw(e);let i=aa(1);t&&(n?Un(n)&&(i=Os(n)):i=Os(e));const l=Efe(o,r,n)?i$(o):aa(0);let c=(a.left+l.x)/i.x,u=(a.top+l.y)/i.y,d=a.width/i.x,f=a.height/i.y;if(o){const p=tn(o),h=n&&Un(n)?tn(n):n;let y=p,m=px(y);for(;m&&n&&h!==y;){const x=Os(m),w=m.getBoundingClientRect(),v=Bn(m),b=w.left+(m.clientLeft+parseFloat(v.paddingLeft))*x.x,j=w.top+(m.clientTop+parseFloat(v.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,f*=x.y,c+=b,u+=j,y=tn(m),m=px(y)}}return gh({width:d,height:f,x:c,y:u})}function Yw(e,t){const r=Gm(e).scrollLeft;return t?t.left+r:ji(fa(e)).left+r}function s$(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:Yw(e,n)),o=n.top+t.scrollTop;return{x:a,y:o}}function Cfe(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const o=a==="fixed",i=fa(n),l=t?Km(t.floating):!1;if(n===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=aa(1);const d=aa(0),f=la(n);if((f||!f&&!o)&&((Fl(n)!=="body"||md(i))&&(c=Gm(n)),la(n))){const h=ji(n);u=Os(n),d.x=h.x+n.clientLeft,d.y=h.y+n.clientTop}const p=i&&!f&&!o?s$(i,c,!0):aa(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:r.y*u.y-c.scrollTop*u.y+d.y+p.y}}function Afe(e){return Array.from(e.getClientRects())}function Tfe(e){const t=fa(e),r=Gm(e),n=e.ownerDocument.body,a=Qr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Qr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Yw(e);const l=-r.scrollTop;return Bn(n).direction==="rtl"&&(i+=Qr(t.clientWidth,n.clientWidth)-a),{width:a,height:o,x:i,y:l}}function Ofe(e,t){const r=tn(e),n=fa(e),a=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const u=Zw();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:l,y:c}}function _fe(e,t){const r=ji(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,o=la(e)?Os(e):aa(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=a*o.x,u=n*o.y;return{width:i,height:l,x:c,y:u}}function vE(e,t,r){let n;if(t==="viewport")n=Ofe(e,r);else if(t==="document")n=Tfe(fa(e));else if(Un(t))n=_fe(t,r);else{const a=i$(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return gh(n)}function l$(e,t){const r=Eo(e);return r===t||!Un(r)||pl(r)?!1:Bn(r).position==="fixed"||l$(r,t)}function Ife(e,t){const r=t.get(e);if(r)return r;let n=Hu(e,[],!1).filter(l=>Un(l)&&Fl(l)!=="body"),a=null;const o=Bn(e).position==="fixed";let i=o?Eo(e):e;for(;Un(i)&&!pl(i);){const l=Bn(i),c=Gw(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||md(i)&&!c&&l$(e,i))?n=n.filter(d=>d!==i):a=l,i=Eo(i)}return t.set(e,n),n}function $fe(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const i=[...r==="clippingAncestors"?Km(t)?[]:Ife(t,this._c):[].concat(r),n],l=i[0],c=i.reduce((u,d)=>{const f=vE(t,d,a);return u.top=Qr(f.top,u.top),u.right=ko(f.right,u.right),u.bottom=ko(f.bottom,u.bottom),u.left=Qr(f.left,u.left),u},vE(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Rfe(e){const{width:t,height:r}=o$(e);return{width:t,height:r}}function Dfe(e,t,r){const n=la(t),a=fa(t),o=r==="fixed",i=ji(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=aa(0);if(n||!n&&!o)if((Fl(t)!=="body"||md(a))&&(l=Gm(t)),n){const p=ji(t,!0,o,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&(c.x=Yw(a));const u=a&&!n&&!o?s$(a,l):aa(0),d=i.left+l.scrollLeft-c.x-u.x,f=i.top+l.scrollTop-c.y-u.y;return{x:d,y:f,width:i.width,height:i.height}}function my(e){return Bn(e).position==="static"}function xE(e,t){if(!la(e)||Bn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return fa(e)===r&&(r=r.ownerDocument.body),r}function c$(e,t){const r=tn(e);if(Km(e))return r;if(!la(e)){let a=Eo(e);for(;a&&!pl(a);){if(Un(a)&&!my(a))return a;a=Eo(a)}return r}let n=xE(e,t);for(;n&&Nfe(n)&&my(n);)n=xE(n,t);return n&&pl(n)&&my(n)&&!Gw(n)?r:n||kfe(e)||r}const Mfe=async function(e){const t=this.getOffsetParent||c$,r=this.getDimensions,n=await r(e.floating);return{reference:Dfe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Lfe(e){return Bn(e).direction==="rtl"}const Ffe={convertOffsetParentRelativeRectToViewportRelativeRect:Cfe,getDocumentElement:fa,getClippingRect:$fe,getOffsetParent:c$,getElementRects:Mfe,getClientRects:Afe,getDimensions:Rfe,getScale:Os,isElement:Un,isRTL:Lfe};function u$(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ufe(e,t){let r=null,n;const a=fa(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:f,width:p,height:h}=u;if(l||t(),!p||!h)return;const y=Jd(f),m=Jd(a.clientWidth-(d+p)),x=Jd(a.clientHeight-(f+h)),w=Jd(d),b={rootMargin:-y+"px "+-m+"px "+-x+"px "+-w+"px",threshold:Qr(0,ko(1,c))||1};let j=!0;function S(k){const N=k[0].intersectionRatio;if(N!==c){if(!j)return i();N?i(!1,N):n=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!u$(u,e.getBoundingClientRect())&&i(),j=!1}try{r=new IntersectionObserver(S,{...b,root:a.ownerDocument})}catch{r=new IntersectionObserver(S,b)}r.observe(e)}return i(!0),o}function Bfe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Xw(e),d=a||o?[...u?Hu(u):[],...Hu(t)]:[];d.forEach(w=>{a&&w.addEventListener("scroll",r,{passive:!0}),o&&w.addEventListener("resize",r)});const f=u&&l?Ufe(u,r):null;let p=-1,h=null;i&&(h=new ResizeObserver(w=>{let[v]=w;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),r()}),u&&!c&&h.observe(u),h.observe(t));let y,m=c?ji(e):null;c&&x();function x(){const w=ji(e);m&&!u$(m,w)&&r(),m=w,y=requestAnimationFrame(x)}return r(),()=>{var w;d.forEach(v=>{a&&v.removeEventListener("scroll",r),o&&v.removeEventListener("resize",r)}),f==null||f(),(w=h)==null||w.disconnect(),h=null,c&&cancelAnimationFrame(y)}}const zfe=bfe,qfe=wfe,Hfe=yfe,Vfe=jfe,Wfe=vfe,bE=gfe,Qfe=Sfe,Kfe=(e,t,r)=>{const n=new Map,a={platform:Ffe,...r},o={...a.platform,_c:n};return mfe(e,t,{...a,platform:o})};var Ef=typeof document<"u"?g.useLayoutEffect:g.useEffect;function yh(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!yh(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const o=a[n];if(!(o==="_owner"&&e.$$typeof)&&!yh(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function d$(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function wE(e,t){const r=d$(e);return Math.round(t*r)/r}function gy(e){const t=g.useRef(e);return Ef(()=>{t.current=e}),t}function Gfe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=g.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=g.useState(n);yh(p,n)||h(n);const[y,m]=g.useState(null),[x,w]=g.useState(null),v=g.useCallback(O=>{O!==k.current&&(k.current=O,m(O))},[]),b=g.useCallback(O=>{O!==N.current&&(N.current=O,w(O))},[]),j=o||y,S=i||x,k=g.useRef(null),N=g.useRef(null),P=g.useRef(d),C=c!=null,E=gy(c),_=gy(a),L=gy(u),U=g.useCallback(()=>{if(!k.current||!N.current)return;const O={placement:t,strategy:r,middleware:p};_.current&&(O.platform=_.current),Kfe(k.current,N.current,O).then(R=>{const q={...R,isPositioned:L.current!==!1};D.current&&!yh(P.current,q)&&(P.current=q,Ei.flushSync(()=>{f(q)}))})},[p,t,r,_,L]);Ef(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const D=g.useRef(!1);Ef(()=>(D.current=!0,()=>{D.current=!1}),[]),Ef(()=>{if(j&&(k.current=j),S&&(N.current=S),j&&S){if(E.current)return E.current(j,S,U);U()}},[j,S,U,E,C]);const I=g.useMemo(()=>({reference:k,floating:N,setReference:v,setFloating:b}),[v,b]),A=g.useMemo(()=>({reference:j,floating:S}),[j,S]),$=g.useMemo(()=>{const O={position:r,left:0,top:0};if(!A.floating)return O;const R=wE(A.floating,d.x),q=wE(A.floating,d.y);return l?{...O,transform:"translate("+R+"px, "+q+"px)",...d$(A.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:R,top:q}},[r,l,A.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:U,refs:I,elements:A,floatingStyles:$}),[d,U,I,A,$])}const Zfe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?bE({element:n.current,padding:a}).fn(r):{}:n?bE({element:n,padding:a}).fn(r):{}}}},Xfe=(e,t)=>({...zfe(e),options:[e,t]}),Yfe=(e,t)=>({...qfe(e),options:[e,t]}),Jfe=(e,t)=>({...Qfe(e),options:[e,t]}),epe=(e,t)=>({...Hfe(e),options:[e,t]}),tpe=(e,t)=>({...Vfe(e),options:[e,t]}),rpe=(e,t)=>({...Wfe(e),options:[e,t]}),npe=(e,t)=>({...Zfe(e),options:[e,t]});var ape="Arrow",f$=g.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...o}=e;return s.jsx(Lt.svg,{...o,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});f$.displayName=ape;var ope=f$;function ipe(e){const[t,r]=g.useState(void 0);return nn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;r({width:i,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Jw="Popper",[p$,h$]=Hw(Jw),[spe,m$]=p$(Jw),g$=e=>{const{__scopePopper:t,children:r}=e,[n,a]=g.useState(null);return s.jsx(spe,{scope:t,anchor:n,onAnchorChange:a,children:r})};g$.displayName=Jw;var y$="PopperAnchor",v$=g.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,o=m$(y$,r),i=g.useRef(null),l=ur(t,i);return g.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:s.jsx(Lt.div,{...a,ref:l})});v$.displayName=y$;var e1="PopperContent",[lpe,cpe]=p$(e1),x$=g.forwardRef((e,t)=>{var X,se,G,oe,ae,te;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:y,...m}=e,x=m$(e1,r),[w,v]=g.useState(null),b=ur(t,be=>v(be)),[j,S]=g.useState(null),k=ipe(j),N=(k==null?void 0:k.width)??0,P=(k==null?void 0:k.height)??0,C=n+(o!=="center"?"-"+o:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},_=Array.isArray(u)?u:[u],L=_.length>0,U={padding:E,boundary:_.filter(dpe),altBoundary:L},{refs:D,floatingStyles:I,placement:A,isPositioned:$,middlewareData:O}=Gfe({strategy:"fixed",placement:C,whileElementsMounted:(...be)=>Bfe(...be,{animationFrame:h==="always"}),elements:{reference:x.anchor},middleware:[Xfe({mainAxis:a+P,alignmentAxis:i}),c&&Yfe({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Jfe():void 0,...U}),c&&epe({...U}),tpe({...U,apply:({elements:be,rects:ge,availableWidth:je,availableHeight:Se})=>{const{width:Ee,height:Oe}=ge.reference,re=be.floating.style;re.setProperty("--radix-popper-available-width",`${je}px`),re.setProperty("--radix-popper-available-height",`${Se}px`),re.setProperty("--radix-popper-anchor-width",`${Ee}px`),re.setProperty("--radix-popper-anchor-height",`${Oe}px`)}}),j&&npe({element:j,padding:l}),fpe({arrowWidth:N,arrowHeight:P}),p&&rpe({strategy:"referenceHidden",...U})]}),[R,q]=S$(A),V=Ma(y);nn(()=>{$&&(V==null||V())},[$,V]);const z=(X=O.arrow)==null?void 0:X.x,J=(se=O.arrow)==null?void 0:se.y,W=((G=O.arrow)==null?void 0:G.centerOffset)!==0,[F,H]=g.useState();return nn(()=>{w&&H(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:$?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:F,"--radix-popper-transform-origin":[(oe=O.transformOrigin)==null?void 0:oe.x,(ae=O.transformOrigin)==null?void 0:ae.y].join(" "),...((te=O.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(lpe,{scope:r,placedSide:R,onArrowChange:S,arrowX:z,arrowY:J,shouldHideArrow:W,children:s.jsx(Lt.div,{"data-side":R,"data-align":q,...m,ref:b,style:{...m.style,animation:$?void 0:"none"}})})})});x$.displayName=e1;var b$="PopperArrow",upe={top:"bottom",right:"left",bottom:"top",left:"right"},w$=g.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,o=cpe(b$,n),i=upe[o.placedSide];return s.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:s.jsx(ope,{...a,ref:r,style:{...a.style,display:"block"}})})});w$.displayName=b$;function dpe(e){return e!==null}var fpe=e=>({name:"transformOrigin",options:e,fn(t){var x,w,v;const{placement:r,rects:n,middlewareData:a}=t,i=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,d]=S$(r),f={start:"0%",center:"50%",end:"100%"}[d],p=(((w=a.arrow)==null?void 0:w.x)??0)+l/2,h=(((v=a.arrow)==null?void 0:v.y)??0)+c/2;let y="",m="";return u==="bottom"?(y=i?f:`${p}px`,m=`${-c}px`):u==="top"?(y=i?f:`${p}px`,m=`${n.floating.height+c}px`):u==="right"?(y=`${-c}px`,m=i?f:`${h}px`):u==="left"&&(y=`${n.floating.width+c}px`,m=i?f:`${h}px`),{data:{x:y,y:m}}}});function S$(e){const[t,r="center"]=e.split("-");return[t,r]}var ppe=g$,hpe=v$,mpe=x$,gpe=w$,ype="Portal",j$=g.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,o]=g.useState(!1);nn(()=>o(!0),[]);const i=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?Z4.createPortal(s.jsx(Lt.div,{...n,ref:t}),i):null});j$.displayName=ype;function SE({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=vpe({defaultProp:t,onChange:r}),o=e!==void 0,i=o?e:n,l=Ma(r),c=g.useCallback(u=>{if(o){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else a(u)},[o,e,a,l]);return[i,c]}function vpe({defaultProp:e,onChange:t}){const r=g.useState(e),[n]=r,a=g.useRef(n),o=Ma(t);return g.useEffect(()=>{a.current!==n&&(o(n),a.current=n)},[n,a,o]),r}function xpe(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var bpe="VisuallyHidden",N$=g.forwardRef((e,t)=>s.jsx(Lt.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));N$.displayName=bpe;var wpe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Zi=new WeakMap,ef=new WeakMap,tf={},yy=0,k$=function(e){return e&&(e.host||k$(e.parentNode))},Spe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=k$(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},jpe=function(e,t,r,n){var a=Spe(t,Array.isArray(e)?e:[e]);tf[r]||(tf[r]=new WeakMap);var o=tf[r],i=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))d(p);else try{var h=p.getAttribute(n),y=h!==null&&h!=="false",m=(Zi.get(p)||0)+1,x=(o.get(p)||0)+1;Zi.set(p,m),o.set(p,x),i.push(p),m===1&&y&&ef.set(p,!0),x===1&&p.setAttribute(r,"true"),y||p.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return d(t),l.clear(),yy++,function(){i.forEach(function(f){var p=Zi.get(f)-1,h=o.get(f)-1;Zi.set(f,p),o.set(f,h),p||(ef.has(f)||f.removeAttribute(n),ef.delete(f)),h||f.removeAttribute(r)}),yy--,yy||(Zi=new WeakMap,Zi=new WeakMap,ef=new WeakMap,tf={})}},Npe=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=wpe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),jpe(n,a,r,"aria-hidden")):function(){return null}},Xn=function(){return Xn=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Xn.apply(this,arguments)};function P$(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function kpe(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var Cf="right-scroll-bar-position",Af="width-before-scroll-bar",Ppe="with-scroll-bars-hidden",Epe="--removed-body-scroll-bar-size";function vy(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Cpe(e,t){var r=g.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var Ape=typeof window<"u"?g.useLayoutEffect:g.useEffect,jE=new WeakMap;function Tpe(e,t){var r=Cpe(null,function(n){return e.forEach(function(a){return vy(a,n)})});return Ape(function(){var n=jE.get(r);if(n){var a=new Set(n),o=new Set(e),i=r.current;a.forEach(function(l){o.has(l)||vy(l,null)}),o.forEach(function(l){a.has(l)||vy(l,i)})}jE.set(r,e)},[e]),r}function Ope(e){return e}function _pe(e,t){t===void 0&&(t=Ope);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var i=t(o,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(n=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(o),i=r}var c=function(){var d=i;i=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),r}}}};return a}function Ipe(e){e===void 0&&(e={});var t=_pe(null);return t.options=Xn({async:!0,ssr:!1},e),t}var E$=function(e){var t=e.sideCar,r=P$(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return g.createElement(n,Xn({},r))};E$.isSideCarExport=!0;function $pe(e,t){return e.useMedium(t),E$}var C$=Ipe(),xy=function(){},Zm=g.forwardRef(function(e,t){var r=g.useRef(null),n=g.useState({onScrollCapture:xy,onWheelCapture:xy,onTouchMoveCapture:xy}),a=n[0],o=n[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,p=e.sideCar,h=e.noIsolation,y=e.inert,m=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,v=e.gapMode,b=P$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,S=Tpe([r,t]),k=Xn(Xn({},b),a);return g.createElement(g.Fragment,null,d&&g.createElement(j,{sideCar:C$,removeScrollBar:u,shards:f,noIsolation:h,inert:y,setCallbacks:o,allowPinchZoom:!!m,lockRef:r,gapMode:v}),i?g.cloneElement(g.Children.only(l),Xn(Xn({},k),{ref:S})):g.createElement(w,Xn({},k,{className:c,ref:S}),l))});Zm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zm.classNames={fullWidth:Af,zeroRight:Cf};var Rpe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Dpe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Rpe();return t&&e.setAttribute("nonce",t),e}function Mpe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Lpe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Fpe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Dpe())&&(Mpe(t,r),Lpe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Upe=function(){var e=Fpe();return function(t,r){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},A$=function(){var e=Upe(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},Bpe={left:0,top:0,right:0,gap:0},by=function(e){return parseInt(e||"",10)||0},zpe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[by(r),by(n),by(a)]},qpe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Bpe;var t=zpe(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Hpe=A$(),_s="data-scroll-locked",Vpe=function(e,t,r,n){var a=e.left,o=e.top,i=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Ppe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(_s,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cf,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Af,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Cf," .").concat(Cf,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Af," .").concat(Af,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(_s,`] {
    `).concat(Epe,": ").concat(l,`px;
  }
`)},NE=function(){var e=parseInt(document.body.getAttribute(_s)||"0",10);return isFinite(e)?e:0},Wpe=function(){g.useEffect(function(){return document.body.setAttribute(_s,(NE()+1).toString()),function(){var e=NE()-1;e<=0?document.body.removeAttribute(_s):document.body.setAttribute(_s,e.toString())}},[])},Qpe=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;Wpe();var o=g.useMemo(function(){return qpe(a)},[a]);return g.createElement(Hpe,{styles:Vpe(o,!t,a,r?"":"!important")})},hx=!1;if(typeof window<"u")try{var rf=Object.defineProperty({},"passive",{get:function(){return hx=!0,!0}});window.addEventListener("test",rf,rf),window.removeEventListener("test",rf,rf)}catch{hx=!1}var Xi=hx?{passive:!1}:!1,Kpe=function(e){return e.tagName==="TEXTAREA"},T$=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Kpe(e)&&r[t]==="visible")},Gpe=function(e){return T$(e,"overflowY")},Zpe=function(e){return T$(e,"overflowX")},kE=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=O$(e,n);if(a){var o=_$(e,n),i=o[1],l=o[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Xpe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Ype=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},O$=function(e,t){return e==="v"?Gpe(t):Zpe(t)},_$=function(e,t){return e==="v"?Xpe(t):Ype(t)},Jpe=function(e,t){return e==="h"&&t==="rtl"?-1:1},ehe=function(e,t,r,n,a){var o=Jpe(e,window.getComputedStyle(t).direction),i=o*n,l=r.target,c=t.contains(l),u=!1,d=i>0,f=0,p=0;do{var h=_$(e,l),y=h[0],m=h[1],x=h[2],w=m-x-o*y;(y||w)&&O$(e,l)&&(f+=w,p+=y),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!a)||!d&&(Math.abs(p)<1||!a))&&(u=!0),u},nf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},PE=function(e){return[e.deltaX,e.deltaY]},EE=function(e){return e&&"current"in e?e.current:e},the=function(e,t){return e[0]===t[0]&&e[1]===t[1]},rhe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},nhe=0,Yi=[];function ahe(e){var t=g.useRef([]),r=g.useRef([0,0]),n=g.useRef(),a=g.useState(nhe++)[0],o=g.useState(A$)[0],i=g.useRef(e);g.useEffect(function(){i.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var m=kpe([e.lockRef.current],(e.shards||[]).map(EE),!0).filter(Boolean);return m.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),m.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=g.useCallback(function(m,x){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var w=nf(m),v=r.current,b="deltaX"in m?m.deltaX:v[0]-w[0],j="deltaY"in m?m.deltaY:v[1]-w[1],S,k=m.target,N=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in m&&N==="h"&&k.type==="range")return!1;var P=kE(N,k);if(!P)return!0;if(P?S=N:(S=N==="v"?"h":"v",P=kE(N,k)),!P)return!1;if(!n.current&&"changedTouches"in m&&(b||j)&&(n.current=S),!S)return!0;var C=n.current||S;return ehe(C,x,m,C==="h"?b:j,!0)},[]),c=g.useCallback(function(m){var x=m;if(!(!Yi.length||Yi[Yi.length-1]!==o)){var w="deltaY"in x?PE(x):nf(x),v=t.current.filter(function(S){return S.name===x.type&&(S.target===x.target||x.target===S.shadowParent)&&the(S.delta,w)})[0];if(v&&v.should){x.cancelable&&x.preventDefault();return}if(!v){var b=(i.current.shards||[]).map(EE).filter(Boolean).filter(function(S){return S.contains(x.target)}),j=b.length>0?l(x,b[0]):!i.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),u=g.useCallback(function(m,x,w,v){var b={name:m,delta:x,target:w,should:v,shadowParent:ohe(w)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),d=g.useCallback(function(m){r.current=nf(m),n.current=void 0},[]),f=g.useCallback(function(m){u(m.type,PE(m),m.target,l(m,e.lockRef.current))},[]),p=g.useCallback(function(m){u(m.type,nf(m),m.target,l(m,e.lockRef.current))},[]);g.useEffect(function(){return Yi.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Xi),document.addEventListener("touchmove",c,Xi),document.addEventListener("touchstart",d,Xi),function(){Yi=Yi.filter(function(m){return m!==o}),document.removeEventListener("wheel",c,Xi),document.removeEventListener("touchmove",c,Xi),document.removeEventListener("touchstart",d,Xi)}},[]);var h=e.removeScrollBar,y=e.inert;return g.createElement(g.Fragment,null,y?g.createElement(o,{styles:rhe(a)}):null,h?g.createElement(Qpe,{gapMode:e.gapMode}):null)}function ohe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ihe=$pe(C$,ahe);var I$=g.forwardRef(function(e,t){return g.createElement(Zm,Xn({},e,{ref:t,sideCar:ihe}))});I$.classNames=Zm.classNames;var she=[" ","Enter","ArrowUp","ArrowDown"],lhe=[" ","Enter"],gd="Select",[Xm,Ym,che]=Lde(gd),[Ul,bme]=Hw(gd,[che,h$]),Jm=h$(),[uhe,Do]=Ul(gd),[dhe,fhe]=Ul(gd),$$=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:p,required:h,form:y}=e,m=Jm(t),[x,w]=g.useState(null),[v,b]=g.useState(null),[j,S]=g.useState(!1),k=Ude(u),[N=!1,P]=SE({prop:n,defaultProp:a,onChange:o}),[C,E]=SE({prop:i,defaultProp:l,onChange:c}),_=g.useRef(null),L=x?y||!!x.closest("form"):!0,[U,D]=g.useState(new Set),I=Array.from(U).map(A=>A.props.value).join(";");return s.jsx(ppe,{...m,children:s.jsxs(uhe,{required:h,scope:t,trigger:x,onTriggerChange:w,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:Vw(),value:C,onValueChange:E,open:N,onOpenChange:P,dir:k,triggerPointerDownPosRef:_,disabled:p,children:[s.jsx(Xm.Provider,{scope:t,children:s.jsx(dhe,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(A=>{D($=>new Set($).add(A))},[]),onNativeOptionRemove:g.useCallback(A=>{D($=>{const O=new Set($);return O.delete(A),O})},[]),children:r})}),L?s.jsxs(eR,{"aria-hidden":!0,required:h,tabIndex:-1,name:d,autoComplete:f,value:C,onChange:A=>E(A.target.value),disabled:p,form:y,children:[C===void 0?s.jsx("option",{value:""}):null,Array.from(U)]},I):null]})})};$$.displayName=gd;var R$="SelectTrigger",D$=g.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,o=Jm(r),i=Do(R$,r),l=i.disabled||n,c=ur(t,i.onTriggerChange),u=Ym(r),d=g.useRef("touch"),[f,p,h]=tR(m=>{const x=u().filter(b=>!b.disabled),w=x.find(b=>b.value===i.value),v=rR(x,m,w);v!==void 0&&i.onValueChange(v.value)}),y=m=>{l||(i.onOpenChange(!0),h()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return s.jsx(hpe,{asChild:!0,...o,children:s.jsx(Lt.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":J$(i.value)?"":void 0,...a,ref:c,onClick:Bt(a.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&y(m)}),onPointerDown:Bt(a.onPointerDown,m=>{d.current=m.pointerType;const x=m.target;x.hasPointerCapture(m.pointerId)&&x.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:Bt(a.onKeyDown,m=>{const x=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&p(m.key),!(x&&m.key===" ")&&she.includes(m.key)&&(y(),m.preventDefault())})})})});D$.displayName=R$;var M$="SelectValue",L$=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:o,placeholder:i="",...l}=e,c=Do(M$,r),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,f=ur(t,c.onValueNodeChange);return nn(()=>{u(d)},[u,d]),s.jsx(Lt.span,{...l,ref:f,style:{pointerEvents:"none"},children:J$(c.value)?s.jsx(s.Fragment,{children:i}):o})});L$.displayName=M$;var phe="SelectIcon",hhe=g.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Lt.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});hhe.displayName=phe;var mhe="SelectPortal",F$=e=>s.jsx(j$,{asChild:!0,...e});F$.displayName=mhe;var Ni="SelectContent",U$=g.forwardRef((e,t)=>{const r=Do(Ni,e.__scopeSelect),[n,a]=g.useState();if(nn(()=>{a(new DocumentFragment)},[]),!r.open){const o=n;return o?Ei.createPortal(s.jsx(B$,{scope:e.__scopeSelect,children:s.jsx(Xm.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),o):null}return s.jsx(z$,{...e,ref:t})});U$.displayName=Ni;var Cn=10,[B$,Mo]=Ul(Ni),ghe="SelectContentImpl",z$=g.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:h,sticky:y,hideWhenDetached:m,avoidCollisions:x,...w}=e,v=Do(Ni,r),[b,j]=g.useState(null),[S,k]=g.useState(null),N=ur(t,X=>j(X)),[P,C]=g.useState(null),[E,_]=g.useState(null),L=Ym(r),[U,D]=g.useState(!1),I=g.useRef(!1);g.useEffect(()=>{if(b)return Npe(b)},[b]),Xde();const A=g.useCallback(X=>{const[se,...G]=L().map(te=>te.ref.current),[oe]=G.slice(-1),ae=document.activeElement;for(const te of X)if(te===ae||(te==null||te.scrollIntoView({block:"nearest"}),te===se&&S&&(S.scrollTop=0),te===oe&&S&&(S.scrollTop=S.scrollHeight),te==null||te.focus(),document.activeElement!==ae))return},[L,S]),$=g.useCallback(()=>A([P,b]),[A,P,b]);g.useEffect(()=>{U&&$()},[U,$]);const{onOpenChange:O,triggerPointerDownPosRef:R}=v;g.useEffect(()=>{if(b){let X={x:0,y:0};const se=oe=>{var ae,te;X={x:Math.abs(Math.round(oe.pageX)-(((ae=R.current)==null?void 0:ae.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((te=R.current)==null?void 0:te.y)??0))}},G=oe=>{X.x<=10&&X.y<=10?oe.preventDefault():b.contains(oe.target)||O(!1),document.removeEventListener("pointermove",se),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",G,{capture:!0})}}},[b,O,R]),g.useEffect(()=>{const X=()=>O(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[O]);const[q,V]=tR(X=>{const se=L().filter(ae=>!ae.disabled),G=se.find(ae=>ae.ref.current===document.activeElement),oe=rR(se,X,G);oe&&setTimeout(()=>oe.ref.current.focus())}),z=g.useCallback((X,se,G)=>{const oe=!I.current&&!G;(v.value!==void 0&&v.value===se||oe)&&(C(X),oe&&(I.current=!0))},[v.value]),J=g.useCallback(()=>b==null?void 0:b.focus(),[b]),W=g.useCallback((X,se,G)=>{const oe=!I.current&&!G;(v.value!==void 0&&v.value===se||oe)&&_(X)},[v.value]),F=n==="popper"?mx:q$,H=F===mx?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:h,sticky:y,hideWhenDetached:m,avoidCollisions:x}:{};return s.jsx(B$,{scope:r,content:b,viewport:S,onViewportChange:k,itemRefCallback:z,selectedItem:P,onItemLeave:J,itemTextRefCallback:W,focusSelectedItem:$,selectedItemText:E,position:n,isPositioned:U,searchRef:q,children:s.jsx(I$,{as:fl,allowPinchZoom:!0,children:s.jsx(e$,{asChild:!0,trapped:v.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:Bt(a,X=>{var se;(se=v.trigger)==null||se.focus({preventScroll:!0}),X.preventDefault()}),children:s.jsx(YI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:s.jsx(F,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:X=>X.preventDefault(),...w,...H,onPlaced:()=>D(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Bt(w.onKeyDown,X=>{const se=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!se&&X.key.length===1&&V(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let oe=L().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(X.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const ae=X.target,te=oe.indexOf(ae);oe=oe.slice(te+1)}setTimeout(()=>A(oe)),X.preventDefault()}})})})})})})});z$.displayName=ghe;var yhe="SelectItemAlignedPosition",q$=g.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,o=Do(Ni,r),i=Mo(Ni,r),[l,c]=g.useState(null),[u,d]=g.useState(null),f=ur(t,N=>d(N)),p=Ym(r),h=g.useRef(!1),y=g.useRef(!0),{viewport:m,selectedItem:x,selectedItemText:w,focusSelectedItem:v}=i,b=g.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&m&&x&&w){const N=o.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),C=o.valueNode.getBoundingClientRect(),E=w.getBoundingClientRect();if(o.dir!=="rtl"){const ae=E.left-P.left,te=C.left-ae,be=N.left-te,ge=N.width+be,je=Math.max(ge,P.width),Se=window.innerWidth-Cn,Ee=iE(te,[Cn,Math.max(Cn,Se-je)]);l.style.minWidth=ge+"px",l.style.left=Ee+"px"}else{const ae=P.right-E.right,te=window.innerWidth-C.right-ae,be=window.innerWidth-N.right-te,ge=N.width+be,je=Math.max(ge,P.width),Se=window.innerWidth-Cn,Ee=iE(te,[Cn,Math.max(Cn,Se-je)]);l.style.minWidth=ge+"px",l.style.right=Ee+"px"}const _=p(),L=window.innerHeight-Cn*2,U=m.scrollHeight,D=window.getComputedStyle(u),I=parseInt(D.borderTopWidth,10),A=parseInt(D.paddingTop,10),$=parseInt(D.borderBottomWidth,10),O=parseInt(D.paddingBottom,10),R=I+A+U+O+$,q=Math.min(x.offsetHeight*5,R),V=window.getComputedStyle(m),z=parseInt(V.paddingTop,10),J=parseInt(V.paddingBottom,10),W=N.top+N.height/2-Cn,F=L-W,H=x.offsetHeight/2,X=x.offsetTop+H,se=I+A+X,G=R-se;if(se<=W){const ae=_.length>0&&x===_[_.length-1].ref.current;l.style.bottom="0px";const te=u.clientHeight-m.offsetTop-m.offsetHeight,be=Math.max(F,H+(ae?J:0)+te+$),ge=se+be;l.style.height=ge+"px"}else{const ae=_.length>0&&x===_[0].ref.current;l.style.top="0px";const be=Math.max(W,I+m.offsetTop+(ae?z:0)+H)+G;l.style.height=be+"px",m.scrollTop=se-W+m.offsetTop}l.style.margin=`${Cn}px 0`,l.style.minHeight=q+"px",l.style.maxHeight=L+"px",n==null||n(),requestAnimationFrame(()=>h.current=!0)}},[p,o.trigger,o.valueNode,l,u,m,x,w,o.dir,n]);nn(()=>b(),[b]);const[j,S]=g.useState();nn(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const k=g.useCallback(N=>{N&&y.current===!0&&(b(),v==null||v(),y.current=!1)},[b,v]);return s.jsx(xhe,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:h,onScrollButtonChange:k,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:s.jsx(Lt.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});q$.displayName=yhe;var vhe="SelectPopperPosition",mx=g.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Cn,...o}=e,i=Jm(r);return s.jsx(mpe,{...i,...o,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});mx.displayName=vhe;var[xhe,t1]=Ul(Ni,{}),gx="SelectViewport",H$=g.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,o=Mo(gx,r),i=t1(gx,r),l=ur(t,o.onViewportChange),c=g.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(Xm.Slot,{scope:r,children:s.jsx(Lt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Bt(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&f){const h=Math.abs(c.current-d.scrollTop);if(h>0){const y=window.innerHeight-Cn*2,m=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),w=Math.max(m,x);if(w<y){const v=w+h,b=Math.min(y,v),j=v-b;f.style.height=b+"px",f.style.bottom==="0px"&&(d.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});H$.displayName=gx;var V$="SelectGroup",[bhe,whe]=Ul(V$),She=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Vw();return s.jsx(bhe,{scope:r,id:a,children:s.jsx(Lt.div,{role:"group","aria-labelledby":a,...n,ref:t})})});She.displayName=V$;var W$="SelectLabel",jhe=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=whe(W$,r);return s.jsx(Lt.div,{id:a.id,...n,ref:t})});jhe.displayName=W$;var vh="SelectItem",[Nhe,Q$]=Ul(vh),K$=g.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:o,...i}=e,l=Do(vh,r),c=Mo(vh,r),u=l.value===n,[d,f]=g.useState(o??""),[p,h]=g.useState(!1),y=ur(t,v=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,v,n,a)}),m=Vw(),x=g.useRef("touch"),w=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(Nhe,{scope:r,value:n,disabled:a,textId:m,isSelected:u,onItemTextChange:g.useCallback(v=>{f(b=>b||((v==null?void 0:v.textContent)??"").trim())},[]),children:s.jsx(Xm.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:s.jsx(Lt.div,{role:"option","aria-labelledby":m,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:y,onFocus:Bt(i.onFocus,()=>h(!0)),onBlur:Bt(i.onBlur,()=>h(!1)),onClick:Bt(i.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:Bt(i.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:Bt(i.onPointerDown,v=>{x.current=v.pointerType}),onPointerMove:Bt(i.onPointerMove,v=>{var b;x.current=v.pointerType,a?(b=c.onItemLeave)==null||b.call(c):x.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Bt(i.onPointerLeave,v=>{var b;v.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Bt(i.onKeyDown,v=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&v.key===" "||(lhe.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})})})})});K$.displayName=vh;var bc="SelectItemText",G$=g.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...o}=e,i=Do(bc,r),l=Mo(bc,r),c=Q$(bc,r),u=fhe(bc,r),[d,f]=g.useState(null),p=ur(t,w=>f(w),c.onItemTextChange,w=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,w,c.value,c.disabled)}),h=d==null?void 0:d.textContent,y=g.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:x}=u;return nn(()=>(m(y),()=>x(y)),[m,x,y]),s.jsxs(s.Fragment,{children:[s.jsx(Lt.span,{id:c.textId,...o,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ei.createPortal(o.children,i.valueNode):null]})});G$.displayName=bc;var Z$="SelectItemIndicator",X$=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return Q$(Z$,r).isSelected?s.jsx(Lt.span,{"aria-hidden":!0,...n,ref:t}):null});X$.displayName=Z$;var yx="SelectScrollUpButton",khe=g.forwardRef((e,t)=>{const r=Mo(yx,e.__scopeSelect),n=t1(yx,e.__scopeSelect),[a,o]=g.useState(!1),i=ur(t,n.onScrollButtonChange);return nn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(Y$,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});khe.displayName=yx;var vx="SelectScrollDownButton",Phe=g.forwardRef((e,t)=>{const r=Mo(vx,e.__scopeSelect),n=t1(vx,e.__scopeSelect),[a,o]=g.useState(!1),i=ur(t,n.onScrollButtonChange);return nn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(Y$,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Phe.displayName=vx;var Y$=g.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,o=Mo("SelectScrollButton",r),i=g.useRef(null),l=Ym(r),c=g.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),nn(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(Lt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Bt(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:Bt(a.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:Bt(a.onPointerLeave,()=>{c()})})}),Ehe="SelectSeparator",Che=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Lt.div,{"aria-hidden":!0,...n,ref:t})});Che.displayName=Ehe;var xx="SelectArrow",Ahe=g.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Jm(r),o=Do(xx,r),i=Mo(xx,r);return o.open&&i.position==="popper"?s.jsx(gpe,{...a,...n,ref:t}):null});Ahe.displayName=xx;function J$(e){return e===""||e===void 0}var eR=g.forwardRef((e,t)=>{const{value:r,...n}=e,a=g.useRef(null),o=ur(t,a),i=xpe(r);return g.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==r&&d){const f=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(f)}},[i,r]),s.jsx(N$,{asChild:!0,children:s.jsx("select",{...n,ref:o,defaultValue:r})})});eR.displayName="BubbleSelect";function tR(e){const t=Ma(e),r=g.useRef(""),n=g.useRef(0),a=g.useCallback(i=>{const l=r.current+i;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=g.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,o]}function rR(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let i=The(e,Math.max(o,0));a.length===1&&(i=i.filter(u=>u!==r));const c=i.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function The(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Ohe=$$,nR=D$,_he=L$,Ihe=F$,aR=U$,$he=H$,oR=K$,Rhe=G$,Dhe=X$;const Mhe=Ohe,Lhe=_he,iR=g.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(nR,{ref:n,className:`flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,...r,children:[t,s.jsx(JA,{className:"h-4 w-4 opacity-50"})]}));iR.displayName=nR.displayName;const sR=g.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(Ihe,{children:s.jsx(aR,{ref:a,className:`relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 ${e||""}`,position:r,...n,children:s.jsx($he,{className:`p-1 ${r==="popper"?"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]":""}`,children:t})})}));sR.displayName=aR.displayName;const wc=g.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(oR,{ref:n,className:`relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 ${e||""}`,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Dhe,{children:s.jsx(g0,{className:"h-4 w-4"})})}),s.jsx(Rhe,{children:t})]}));wc.displayName=oR.displayName;var Fhe="Label",lR=g.forwardRef((e,t)=>s.jsx(Lt.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));lR.displayName=Fhe;var cR=lR;const Ga=g.forwardRef(({className:e,...t},r)=>s.jsx(cR,{ref:r,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e||""}`,...t}));Ga.displayName=cR.displayName;const uR=g.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e||""}`,ref:r,...t}));uR.displayName="Textarea";const Uhe=()=>{const e=yt(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[o,i]=g.useState(""),[l,c]=g.useState(""),[u,d]=g.useState(""),[f,p]=g.useState(!1),[h,y]=g.useState(!1),[m,x]=g.useState(null),[w,v]=g.useState(!1),[b,j]=g.useState(null),[S,k]=g.useState([]),[N,P]=g.useState({date:new Date().toISOString().split("T")[0],reference:"",receivedAmount:0,payingAmount:0,change:0,paymentChoice:"CASH",note:""}),C=D=>{j(D),v(!0)},E=async()=>{if(b)try{(await fetch(`/api/purchases/${b.id}`,{method:"DELETE",credentials:"include"})).ok?(r(t.filter(I=>I.id!==b.id)),v(!1),j(null)):console.error("Failed to delete purchase")}catch(D){console.error("Error deleting purchase:",D)}},_=async()=>{try{const D=await fetch("/api/purchases",{credentials:"include"});if(D.ok){const I=await D.json();r(I)}}catch(D){console.error("Error refreshing purchases:",D)}},L=async D=>{try{const I=await fetch(`/api/payments/purchases/${D}`,{credentials:"include"});if(I.ok){const A=await I.json();k(A)}}catch(I){console.error("Error fetching payments:",I)}};g.useEffect(()=>{(async()=>{try{const I=await fetch("/api/purchases",{credentials:"include"});if(I.ok){const A=await I.json();r(A)}else I.status===401?e("/login"):console.error("Failed to fetch purchases")}catch(I){console.error("Error fetching purchases:",I)}finally{a(!1)}})()},[e]);const U=t.filter(D=>{var R,q;const I=o.toLowerCase(),A=D.reference.toLowerCase(),$=((q=(R=D.supplier)==null?void 0:R.name)==null?void 0:q.toLowerCase())||"",O=new Date(D.createdAt);if(l&&u){const V=new Date(l),z=new Date(u);if(z.setHours(23,59,59,999),O<V||O>z)return!1}return A.includes(I)||$.includes(I)});return n?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-semibold",children:"Purchases"}),s.jsxs("button",{onClick:()=>e("/purchases/create"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[s.jsx(Cr,{className:"inline-block w-5 h-5 mr-2"}),"Create Purchase"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"Search by reference or supplier...",value:o,onChange:D=>i(D.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("input",{type:"date",value:l,onChange:D=>c(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"date",value:u,onChange:D=>d(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full divide-y divide-gray-200 table-fixed",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Date"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Reference"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Supplier"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Warehouse"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Status"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Total"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Paid"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Due"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Payment"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(D=>{var I,A,$,O,R;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:new Date(D.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900 truncate",children:D.reference}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:((I=D.supplier)==null?void 0:I.name)||"N/A"}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:((A=D.warehouse)==null?void 0:A.name)||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                      ${D.status==="RECEIVED"?"bg-green-100 text-green-800":D.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:D.status})}),s.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:["",parseFloat((($=D.totalAmount)==null?void 0:$.toString())??"0").toFixed(2)]}),s.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:["",parseFloat(((O=D.amountPaid)==null?void 0:O.toString())??"0").toFixed(2)]}),s.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500 truncate",children:["",parseFloat(((R=D.amountDue)==null?void 0:R.toString())??"0").toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("button",{onClick:()=>{x(D),p(!0)},className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full cursor-pointer
                        ${D.paymentStatus==="PAID"?"bg-blue-100 text-blue-800":D.paymentStatus==="PARTIALLY_PAID"?"bg-purple-100 text-purple-800":"bg-red-100 text-red-800"}`,children:D.paymentStatus})}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>e(`/purchases/${D.id}`),className:"text-blue-600 hover:text-blue-900",title:"View Purchase",children:s.jsx(So,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{x(D),y(!0),L(D.id)},className:"text-blue-600 hover:text-blue-900",title:"View Payments",children:s.jsx(qh,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{x(D),p(!0)},className:"text-green-600 hover:text-green-900",disabled:D.paymentStatus==="PAID",title:"Add Payment",children:s.jsx(Cr,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>e(`/purchases/${D.id}/edit`),className:"text-blue-600 hover:text-blue-900",title:"Edit Purchase",children:s.jsx(Hh,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>C(D),className:"text-red-600 hover:text-red-800",title:"Delete Purchase",children:s.jsx(br,{className:"w-5 h-5"})})]})})]},D.id)})})]})})]}),m&&f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px] max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Create Payment"}),s.jsx("button",{onClick:()=>{p(!1),x(null)},className:"text-gray-500 hover:text-gray-700",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:async D=>{if(D.preventDefault(),!!m)try{const I=Math.floor(Math.random()*1e6).toString().padStart(6,"0"),A=`${m.reference}-${I}`,$={...N,reference:A,purchaseId:m.id};console.log("Payment Data being sent:",$);const O=await fetch(`/api/payments/purchases/${m.id}/payment`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...$,receivedAmount:N.payingAmount})}),R=await O.json();console.log("API Response:",{status:O.status,data:R}),O.ok?(p(!1),x(null),_(),P({date:new Date().toISOString().split("T")[0],reference:"",receivedAmount:0,payingAmount:0,change:0,paymentChoice:"CASH",note:""})):console.error("Failed to create payment")}catch(I){console.error("Error creating payment:",I)}},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ga,{htmlFor:"date",children:"Date"}),s.jsx(Ji,{id:"date",type:"date",value:N.date,onChange:D=>P({...N,date:D.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx(Ga,{htmlFor:"reference",children:"Reference"}),s.jsx(Ji,{id:"reference",type:"text",value:m.reference,readOnly:!0,className:"bg-gray-100",required:!0})]}),s.jsxs("div",{children:[s.jsx(Ga,{htmlFor:"receivedAmount",children:"Received Amount"}),s.jsx(Ji,{id:"receivedAmount",type:"number",step:"0.01",value:m.amountDue,readOnly:!0,className:"bg-gray-100",required:!0})]}),s.jsxs("div",{children:[s.jsx(Ga,{htmlFor:"payingAmount",children:"Paying Amount"}),s.jsx(Ji,{id:"payingAmount",type:"number",step:"0.01",onChange:D=>{const I=parseFloat(D.target.value)||0;P({...N,payingAmount:I,change:m.amountDue-I})},required:!0})]}),s.jsxs("div",{children:[s.jsx(Ga,{htmlFor:"change",children:"Change"}),s.jsx(Ji,{id:"change",type:"number",step:"0.01",value:N.change,readOnly:!0,className:"bg-gray-100",required:!0})]}),s.jsxs("div",{children:[s.jsx(Ga,{htmlFor:"paymentChoice",children:"Payment Method"}),s.jsxs(Mhe,{value:N.paymentChoice,onValueChange:D=>P({...N,paymentChoice:D}),children:[s.jsx(iR,{children:s.jsx(Lhe,{placeholder:"Select payment method"})}),s.jsxs(sR,{children:[s.jsx(wc,{value:"CASH",children:"Cash"}),s.jsx(wc,{value:"BANK",children:"Bank Transfer"}),s.jsx(wc,{value:"CARD",children:"Card"}),s.jsx(wc,{value:"CHEQUE",children:"Cheque"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ga,{htmlFor:"note",children:"Note"}),s.jsx(uR,{id:"note",value:N.note,onChange:D=>P({...N,note:D.target.value})})]}),s.jsxs("div",{className:"pt-4 flex justify-end space-x-4",children:[s.jsx(cx,{type:"button",variant:"outline",onClick:()=>{p(!1),x(null)},children:"Cancel"}),s.jsx(cx,{type:"submit",children:"Create Payment"})]})]})]})}),m&&h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-[500px] max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Payment Details"}),s.jsx("button",{onClick:()=>{y(!1),x(null)},className:"text-gray-500 hover:text-gray-700",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"space-y-4",children:S.map(D=>s.jsx("div",{className:"border p-4 rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Date:"}),s.jsx("p",{className:"font-medium",children:new Date(D.date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Reference:"}),s.jsx("p",{className:"font-medium",children:D.reference})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Amount:"}),s.jsxs("p",{className:"font-medium",children:["",Number(D.receivedAmount||0).toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Payment Method:"}),s.jsx("p",{className:"font-medium",children:D.paymentChoice})]}),D.note&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Note:"}),s.jsx("p",{className:"font-medium",children:D.note})]})]})},D.id))})]})}),w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg w-[400px]",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Confirm Delete"}),s.jsx("p",{className:"mb-6",children:"Are you sure you want to delete this purchase?"}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{onClick:()=>{v(!1),j(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),s.jsx("button",{onClick:E,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},r1=({isOpen:e,onClose:t,onConfirm:r,title:n,message:a,confirmText:o="Confirm",cancelText:i="Cancel"})=>e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:n}),s.jsx("p",{className:"text-gray-600 mb-6",children:a}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 rounded-lg",children:i}),s.jsx("button",{onClick:()=>{r(),t()},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:o})]})]})}):null,Bhe=3e4,zhe=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState(null),[a,o]=g.useState(""),[i,l]=g.useState(""),[c,u]=g.useState(!1),[d,f]=g.useState(()=>{const T=localStorage.getItem("currentSale");return T?JSON.parse(T):[]});g.useEffect(()=>{const M=new URLSearchParams(window.location.search).get("saleId");M&&(async()=>{try{const ee=await me(`/api/sales/${M}`);if(ee.ok){const ue=await ee.json();if(ue&&Array.isArray(ue.saleitem)){const Ne=ue.saleitem.map(ke=>({id:ke.product.id,name:ke.product.name,price:Number(ke.price),quantity:Number(ke.quantity),total:Number(ke.price)*Number(ke.quantity),unit:ke.unit,baseUnits:Number(ke.baseUnits)}));f(Ne),ue.customer&&(_(ue.customer),N(ue.customer.name),S("wholesale")),b(!0)}}}catch(ee){console.error("Error fetching sale data:",ee)}})()},[]);const[p,h]=g.useState([]),[y,m]=g.useState(!1),[x,w]=g.useState(null),[v,b]=g.useState(!1),[j,S]=g.useState(()=>{const T=localStorage.getItem("currentSale"),M=localStorage.getItem("currentPriceType");return T&&M&&JSON.parse(T).length>0&&(M==="retail"||M==="wholesale")?M:"wholesale"}),[k,N]=g.useState(()=>localStorage.getItem("currentCustomerSearch")||""),[P,C]=g.useState(()=>localStorage.getItem("currentCustomerSearch")||""),[E,_]=g.useState(()=>{const T=localStorage.getItem("currentCustomer");return T?JSON.parse(T):null}),[L,U]=g.useState(!1),[D,I]=g.useState(!1),A=g.useRef(null),$=g.useRef(null),O=g.useRef(null),R=g.useRef({}),q=g.useRef(null),V=g.useRef(null),z=yt(),[J,W]=g.useState([]),[F,H]=g.useState(null),[X,se]=g.useState(()=>{const T=localStorage.getItem("currentPaymentMethod");return T&&(T==="CASH"||T==="CREDIT")?T:"CASH"}),[G,oe]=g.useState(()=>{const T=localStorage.getItem("currentCreditPercentage");return T?Number(T):0}),[ae,te]=g.useState({}),[be,ge]=g.useState(-1),[je,Se]=g.useState(-1);g.useEffect(()=>{localStorage.setItem("currentSale",JSON.stringify(d))},[d]),g.useEffect(()=>{const T=setTimeout(()=>{l(a)},150);return()=>clearTimeout(T)},[a]),g.useEffect(()=>{const T=setTimeout(()=>{C(k)},300);return()=>clearTimeout(T)},[k]),g.useEffect(()=>{if(P.trim()&&k.trim()){const T=!E||E.name.toLowerCase()!==k.toLowerCase().trim();U(T)}else k.trim()||U(!1)},[P,k,E]),g.useEffect(()=>{Se(-1)},[P]);const Ee=g.useMemo(()=>{if(console.log("Filtering products - searchTerm:",i,"products count:",p.length),!i||i.trim().length===0)return console.log("No search term, returning empty array"),[];if(!p||p.length===0)return console.log("No products available, returning empty array"),[];const T=i.toLowerCase().trim(),M=p.filter(ee=>!ee||!ee.name?!1:ee.name.toLowerCase().startsWith(T));return console.log("Filtered products:",M.length,"matches for term:",i),M.sort((ee,ue)=>ee.name.toLowerCase().localeCompare(ue.name.toLowerCase()))},[p,i]);g.useEffect(()=>{ge(-1)},[Ee]),g.useEffect(()=>{p.length>0&&a.trim().length>0&&(console.log("Products loaded and search term exists, showing suggestions"),u(!0))},[p,a]),g.useEffect(()=>{if(be>=0&&q.current){const T=q.current,M=T.children[be];if(M){const K=T.getBoundingClientRect(),ee=M.getBoundingClientRect();ee.bottom>K.bottom?T.scrollTop+=ee.bottom-K.bottom:ee.top<K.top&&(T.scrollTop-=K.top-ee.top)}}},[be]),g.useEffect(()=>{if(je>=0&&V.current){const T=V.current,M=T.children[je];if(M){const K=T.getBoundingClientRect(),ee=M.getBoundingClientRect();ee.bottom>K.bottom?T.scrollTop+=ee.bottom-K.bottom:ee.top<K.top&&(T.scrollTop-=K.top-ee.top)}}},[je]),g.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const M=await me("/api/products/pos");if(M.ok){const K=await M.json();console.log("Products fetched successfully:",K.length,"products"),h(K)}else M.status===401?z("/login"):console.error("Failed to fetch products:",M.status,M.statusText)}catch(M){console.error("Error fetching products:",M)}})()},[z]),g.useEffect(()=>{(async()=>{try{const M=await me("/api/customers");if(M.ok){const K=await M.json();Array.isArray(K)&&W(K)}else M.status===401&&z("/login")}catch(M){console.error("Error fetching customers:",M)}})()},[z]),g.useEffect(()=>{var T;(T=O.current)==null||T.focus(),d.length===0&&We.displayWelcome().catch(M=>console.error("Failed to initialize VFD display:",M))},[d]),g.useEffect(()=>{localStorage.setItem("currentCustomerSearch",k)},[k]),g.useEffect(()=>{localStorage.setItem("currentPaymentMethod",X)},[X]),g.useEffect(()=>{localStorage.setItem("currentCreditPercentage",G.toString())},[G]),g.useEffect(()=>{localStorage.setItem("currentPriceType",j)},[j]),g.useEffect(()=>{const T=M=>{M.key==="Escape"&&v&&b(!1)};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[v]),g.useEffect(()=>{localStorage.setItem("currentCustomer",JSON.stringify(E))},[E]),g.useEffect(()=>{(async()=>{try{const M=await me("/api/users/me");if(M.ok){const K=await M.json();H(K.data.user)}else M.status===401&&z("/login")}catch(M){console.error("Error fetching current user:",M)}})()},[z]);const Oe=g.useCallback(async()=>{try{const T="/api/products/pos",M=new URLSearchParams;if(d.length>0){const K=d.map(ue=>ue.id).join(",");M.append("ids",K);const ee=await me(`${T}?${M}`);if(ee.status===401){z("/login");return}if(ee.ok){const ue=await ee.json(),Ne=d.map(ke=>{const xe=ue.find(he=>he.id===ke.id);return xe?xe.stock<ke.quantity*ke.baseUnits?`${ke.name}: Only ${Math.floor(xe.stock/ke.baseUnits)} ${ke.unit}(s) available`:null:`${ke.name}: Product no longer available`}).filter(Boolean);Ne.length>0&&alert(`Stock has changed:
`+Ne.join(`
`)),h(ke=>ke.map(xe=>ue.find(Me=>Me.id===xe.id)||xe))}}}catch(T){console.error("Error refreshing products:",T)}},[z,d]);g.useEffect(()=>{const T="https://localhost:5443";console.log("WebSocket connecting to:",T),console.log("Current page protocol:",window.location.protocol),console.log("Environment VITE_SERVER_URL:","https://localhost:5443"),console.log("Calculated getSocketUrl():",s2());const M=di(T);return M.on("connect",()=>{console.log("WebSocket connected successfully to:",T)}),M.on("connect_error",K=>{console.error("WebSocket connection error:",K)}),M.on("stock-update",K=>{h(ee=>ee.map(ue=>ue.id===K.productId?{...ue,stock:K.newStock,version:K.version}:ue))}),()=>{M.disconnect()}},[]),g.useEffect(()=>{if(d.length>0){const T=setInterval(Oe,Bhe);return()=>clearInterval(T)}},[Oe,d.length]);const re=async(T,M,K)=>{try{const ee=await me(`/api/products/${T}`);if(!ee.ok)throw new Error("Failed to fetch product stock");const ue=await ee.json(),Ne=M*K;return h(ke=>ke.map(xe=>xe.id===T?{...xe,stock:ue.stock,version:ue.version}:xe)),Number(ue.stock)>=Ne}catch(ee){return console.error("Error checking stock:",ee),!1}},Q=async T=>{let M=0;const K=3;for(;M<K;)try{if(!(F!=null&&F.id))throw new Error("User not authenticated");const ee=Date.now().toString(),ue=T.map(he=>{var Me;return{productId:parseInt(he.id),quantity:Number(he.quantity*(he.baseUnits||1)),version:(Me=p.find(Ye=>Ye.id===he.id))==null?void 0:Me.version}});if(ue.some(he=>!he.version))throw new Error("Product version information is missing");const Ne={updates:ue,transactionId:ee,userId:F.id},ke=await me("/api/products/stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)});if(!ke.ok){if(ke.status===401)return z("/login"),!1;const he=await ke.json();throw new Error(he.message||"Failed to update stock")}const xe=await ke.json();if(!xe.success){const he=xe.results.filter(Me=>!Me.success).map(Me=>{const Ye=T.find(Ve=>parseInt(Ve.id)===Me.productId);return`${(Ye==null?void 0:Ye.name)||"Unknown product"}: ${Me.message}${Me.currentStock!==void 0?` (Available: ${Math.floor(Me.currentStock/((Ye==null?void 0:Ye.baseUnits)||1))} ${(Ye==null?void 0:Ye.unit)||"units"})`:""}`}).join(`
`);throw new Error(`Stock update failed:
${he}`)}return h(p.map(he=>{const Me=xe.results.find(Ye=>parseInt(he.id)===Ye.productId);return Me?{...he,stock:Me.newStock??he.stock,version:Me.version??he.version}:he})),!0}catch(ee){if(console.error("Stock update error:",ee),M===K-1)throw ee;M++,await new Promise(ue=>setTimeout(ue,1e3*M))}return!1},Y=T=>{const M=T.target.value;if(M.length<a.length){o(M);const ee=M.trim().length>0&&p.length>0;u(ee);return}if(M.length>a.length&&p.length>0){if(p.some(ue=>ue.name.toLowerCase().startsWith(M.toLowerCase())))o(M),u(!0);else try{const ue=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwF");ue.volume=.1,ue.play()}catch{console.log("Invalid character blocked")}return}o(M),console.log("Search change - value:",M,"products count:",p.length);const K=M.trim().length>0&&p.length>0;u(K),M.trim().length>0&&p.length===0&&(console.log("Search term entered but no products loaded, fetching..."),(async()=>{try{const ue=await me("/api/products/pos");if(ue.ok){const Ne=await ue.json();console.log("Products loaded from search change:",Ne.length),h(Ne)}}catch(ue){console.error("Error fetching products on search:",ue)}})())},ie=()=>{console.log("Search focus - searchTerm:",a,"products count:",p.length),a.trim().length>0&&p.length>0&&u(!0),p.length===0&&(console.log("No products loaded, attempting to refetch..."),(async()=>{try{const M=await me("/api/products/pos");if(M.ok){const K=await M.json();console.log("Refetched products:",K.length),h(K),a.trim().length>0&&u(!0)}}catch(M){console.error("Error refetching products:",M)}})())},fe=T=>{const M=pa(T),K=Vn(M),ee={name:T.baseUnit.name,baseUnits:1,price:K},ue=d.find(he=>he.id===T.id);let Ne,ke=1;if(ue)ke=ue.quantity+1,Ne=d.map(he=>he.id===T.id?{...he,quantity:ke,price:K,total:ke*K}:he);else{const he={id:T.id,name:T.name,price:K,quantity:1,total:K,unit:ee.name,baseUnits:ee.baseUnits};Ne=[...d,he]}f(Ne);const xe=Ne.reduce((he,Me)=>he+Me.total,0);console.log("POS: About to send product to VFD:",{productName:T.name,price:K,quantity:ke,total:xe}),fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:T.name.replace(/[^\x20-\x7E]/g,""),price:K,quantity:ke,total:xe})}).then(he=>he.json()).then(he=>{console.log("POS: VFD proxy response:",he)}).catch(he=>{console.error("POS: Failed to update VFD display:",he)}),u(!1),setTimeout(()=>{o("")},50),setTimeout(()=>{const he=R.current[T.id];he&&(he.focus(),he.select())},150)},ye=T=>{if(T.key==="Enter"){if(T.preventDefault(),Ee.length>0){const M=be>=0&&be<Ee.length?Ee[be]:Ee[0];fe(M)}}else T.key==="Escape"?(u(!1),o(""),ge(-1)):T.key==="ArrowDown"?(T.preventDefault(),Ee.length>0&&ge(M=>M<Ee.length-1?M+1:0)):T.key==="ArrowUp"&&(T.preventDefault(),Ee.length>0&&ge(M=>M>0?M-1:Ee.length-1))},Re=T=>{const M=d.filter(K=>K.id!==T);if(f(M),M.length===0&&S("wholesale"),M.length>0){const K=M.reduce((ue,Ne)=>ue+Ne.total,0),ee=M[M.length-1];fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:ee.name.replace(/[^\x20-\x7E]/g,""),price:ee.price,quantity:ee.quantity,total:K})}).catch(ue=>console.error("Failed to update VFD display:",ue))}else fetch("http://localhost:5001/welcome",{method:"POST",headers:{"Content-Type":"application/json"}}).catch(K=>console.error("Failed to update VFD display:",K))},Te=(T,M)=>{te(K=>({...K,[T]:M}))},pe=async(T,M)=>{const K=parseInt(M,10);if(isNaN(K)||K<1){te(ee=>({...ee,[T]:""}));return}te(ee=>({...ee,[T]:""})),await Ae(T,M)},Ae=async(T,M)=>{const K=parseInt(M,10);if(isNaN(K)||K<1)return;const ee=d.find(ue=>ue.id===T);if(ee)try{if(!await re(T,K,ee.baseUnits||1)){const xe=p.find(Me=>Me.id===T),he=xe?Math.floor(xe.stock/(ee.baseUnits||1)):0;if(alert(`Insufficient stock for ${ee.name}. Available: ${he} ${ee.unit}(s)`),K>ee.quantity){const Me=d.map(At=>At.id===T?{...At,quantity:he||1,total:(he||1)*Number(At.price)}:At);f(Me);const Ye=Me.reduce((At,Vl)=>At+Vl.total,0);p.find(At=>At.id===T)&&fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:ee.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:Number(ee.price),quantity:he||1,total:Ye})}).catch(At=>console.error("Failed to update VFD display:",At))}return}const Ne=d.map(xe=>xe.id===T?{...xe,quantity:K,total:K*Number(xe.price)}:xe);f(Ne);const ke=Ne.reduce((xe,he)=>xe+he.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:ee.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:Number(ee.price),quantity:K,total:ke})}).catch(xe=>console.error("Failed to update VFD display:",xe))}catch(ue){console.error("Error updating quantity:",ue),alert("Failed to update quantity: "+(ue instanceof Error?ue.message:"Unknown error"))}},He=T=>{console.log("Row clicked, displaying VFD info for:",T.name);const M=d.reduce((K,ee)=>K+ee.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:T.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:T.price,quantity:T.quantity,total:M})}).then(K=>K.json()).then(K=>{console.log("POS: VFD proxy response for row click:",K)}).catch(K=>{console.error("POS: Failed to update VFD display on row click:",K)})},Ze=T=>{if(!x)return;const M=d.find(xe=>xe.id===x);if(!M)return;const K=p.find(xe=>xe.id===x);if(!K)return;const ee=T.conversionRate||1,ue=M.quantity*(M.baseUnits||1);if(K.stock<ee){alert(`Insufficient stock. Available: ${Math.floor(K.stock/ee)} ${T.name}(s)`);return}let Ne=Math.floor(ue/ee);Ne<1&&K.stock>=ee&&(Ne=1);const ke=Vn(Number(T.price));f(d.map(xe=>xe.id===x?{...xe,unit:String(T.name),baseUnits:Number(ee),price:ke,quantity:Number(Ne),total:Number(Ne)*ke}:xe)),console.log("Updated sale item with new unit:",d.find(xe=>xe.id===x)),m(!1)},Ue=T=>{const M=p.find(ee=>ee.id===T);if(!M||!M.baseUnit)return[];const K=[{name:M.baseUnit.name,baseUnits:1,price:Number(pa(M)),unitId:M.baseUnit.id,conversionRate:1}];return M.productunit&&Array.isArray(M.productunit)&&K.push(...M.productunit.map(ee=>({name:ee.unit.name,baseUnits:ee.conversionRate,price:Number(ee.price),unitId:ee.unit.id,conversionRate:ee.conversionRate}))),console.log("Available units for product:",T,K),K},st=d.length,Ft=d.reduce((T,M)=>T+M.quantity,0),ht=Number(d.reduce((T,M)=>T+M.total,0).toFixed(2)),Bl=()=>{if(d.length===0){alert("No items to hold");return}if(j==="wholesale"&&!E){alert("Please select a customer for wholesale sales");return}n({title:"Hold Sale",message:"Are you sure you want to hold this sale for later?",onConfirm:Lo}),t(!0)},Lo=async()=>{try{if(d.length===0){alert("No items to hold");return}if(j==="wholesale"&&!E){alert("Please select a customer for wholesale sales");return}const T={customerId:(E==null?void 0:E.id)||null,userId:F==null?void 0:F.id,items:d.map(K=>({productId:parseInt(K.id),quantity:K.quantity,price:K.price,unit:K.unit,baseUnits:K.baseUnits})),totalAmount:d.reduce((K,ee)=>K+ee.total,0),saleType:j.toUpperCase(),status:"held"},M=await me("/api/held-sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!M.ok){if(M.status===401){z("/login");return}const K=await M.json();throw new Error(K.message||"Failed to hold sale")}Fr(),alert("Sale held successfully"),Oe()}catch(T){console.error("Error holding sale:",T),alert("Failed to hold sale: "+(T instanceof Error?T.message:"Unknown error"))}},zl=()=>{if(d.length===0){alert("No items to save");return}if(j==="wholesale"&&!E){alert("Please select a customer for wholesale sales");return}n({title:"Complete Sale",message:"Are you sure you want to complete this sale?",onConfirm:ql}),t(!0)},ql=async()=>{try{if(d.length===0){alert("No items to save");return}if(j==="wholesale"&&!E){alert("Please select a customer for wholesale sales");return}const T=d.reduce((Ne,ke)=>Ne+ke.total,0);if(typeof T!="number"||T<=0)throw new Error("Invalid total amount");if(!await Q(d))return;const K={...j==="wholesale"&&{customerId:E==null?void 0:E.id},userId:F==null?void 0:F.id,items:d.map(Ne=>({productId:parseInt(Ne.id),quantity:Number(Ne.quantity),price:Number(Ne.price),unit:String(Ne.unit),baseUnits:Number(Ne.baseUnits)})),totalAmount:Number(ht),paymentMethod:X,saleType:j.toUpperCase(),isCreditSale:X==="CREDIT",creditPercentage:X==="CREDIT"?Number(G):null,status:"completed"},ee=await me("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)});if(!ee.ok){if(ee.status===401){z("/login");return}const Ne=await ee.json();throw new Error(Ne.message||"Failed to save sale")}const ue=await ee.json();console.log("Sale saved successfully:",ue),We.displayTotal(ht).catch(Ne=>console.error("Failed to update VFD display:",Ne)),setTimeout(()=>{Fr()},2e3),alert("Sale completed and saved successfully"),setTimeout(()=>{window.location.reload()},2e3)}catch(T){console.error("Error completing sale:",T),T instanceof Error&&T.message.includes("Stock update failed:")?alert(T.message):alert("Failed to complete sale: "+(T instanceof Error?T.message:"Unknown error"))}},Wa=async T=>{try{if(d.length===0){alert("No items to print");return}if(j==="wholesale"&&!E){alert("Please select a customer for wholesale sales");return}if(!await Q(d))return;const K={...j==="wholesale"&&{customerId:E==null?void 0:E.id},userId:F==null?void 0:F.id,items:d.map(Ve=>({productId:parseInt(Ve.id),quantity:Number(Ve.quantity),price:Number(Ve.price),unit:String(Ve.unit),baseUnits:Number(Ve.baseUnits)})),totalAmount:Number(ht),paymentMethod:X,saleType:j.toUpperCase(),isCreditSale:X==="CREDIT",creditPercentage:X==="CREDIT"?Number(G):null,status:"completed"},ee=await me("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)});if(!ee.ok){if(ee.status===401){z("/login");return}const Ve=await ee.json();throw new Error(Ve.message||"Failed to save sale")}const ue=await ee.json();console.log("Sale saved successfully:",ue),We.displayTotal(ht).catch(Ve=>console.error("Failed to update VFD display:",Ve));const Ne={type:T,items:d.map(Ve=>({id:Ve.id,name:Ve.name,price:Number(Ve.price),quantity:Number(Ve.quantity),total:Number(Ve.total),unit:Ve.unit})),totalAmount:Number(ht),totalItems:Number(Ft),customer:j==="wholesale"&&E||void 0,paymentMethod:X,creditPercentage:X==="CREDIT"?Number(G):0,baseTotal:X==="CREDIT"&&G>0?Number((ht/(1+G/100)).toFixed(2)):void 0,saleId:ue.id},ke=T==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",xe=localStorage.getItem(ke)||void 0;let he=!1;const Me={...Ne,salesperson:F?{name:F.name}:void 0};if((localStorage.getItem("qz.printMode")==="browser"?"browser":"silent")==="silent"&&xe)try{he=T==="invoice"?await Fi(Me,xe):await Ui(Me,xe)}catch(Ve){console.warn("Silent QZ printing failed, falling back:",Ve),he=!1}he||await Da(Me),Fr(),alert("Sale completed and printed successfully")}catch(M){console.error("Error during print process:",M),alert("Failed to complete print process: "+(M instanceof Error?M.message:"Unknown error"))}},Fo=()=>{if(d.length===0){Fr();return}n({title:"Clear Sale",message:"Are you sure you want to clear all items? This action cannot be undone.",onConfirm:Fr}),t(!0)},Fr=()=>{f([]),_(null),N(""),o(""),m(!1),w(null),b(!1),oe(0),S("wholesale"),localStorage.removeItem("currentSale"),localStorage.removeItem("currentCustomer"),localStorage.removeItem("currentCustomerSearch"),localStorage.removeItem("currentPriceType"),We.displayWelcome().catch(T=>console.error("Failed to update VFD display:",T)),O.current&&O.current.focus()};g.useEffect(()=>{const T=M=>{setTimeout(()=>{A.current&&!A.current.contains(M.target)&&u(!1)},100)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const pa=T=>{if(j==="wholesale")return Number(T.wholesalePrice);{const M=Number(T.retailPrice);return M===0?Math.ceil(Number(T.wholesalePrice)*1.2):M}},Vn=T=>X==="CREDIT"&&G>0?Number((T+T*G/100).toFixed(2)):T,Ct=J.filter(T=>T.name.toLowerCase().includes(P.toLowerCase().trim())),sn=T=>{const M=T.target.value;if(N(M),E&&E.name.toLowerCase()!==M.toLowerCase().trim()&&_(null),M.trim()){const K=!E||E.name.toLowerCase()!==M.toLowerCase().trim();U(K)}else U(!1)},Uo=T=>{_(T),U(!1),Se(-1),setTimeout(()=>{N(T.name)},50),setTimeout(()=>{var M;(M=O.current)==null||M.focus()},100)},Bi=T=>{var M;if(T.key==="Enter")if(T.preventDefault(),Ct.length>0){const K=je>=0&&je<Ct.length?Ct[je]:Ct[0];Uo(K)}else(M=O.current)==null||M.focus();else T.key==="Escape"?(U(!1),Se(-1)):T.key==="ArrowDown"?(T.preventDefault(),Ct.length>0&&Se(K=>K<Ct.length-1?K+1:0)):T.key==="ArrowUp"&&(T.preventDefault(),Ct.length>0&&Se(K=>K>0?K-1:Ct.length-1))};g.useEffect(()=>{const T=M=>{setTimeout(()=>{$.current&&!$.current.contains(M.target)&&U(!1)},100)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const Hl=async()=>{if(!k.trim()){alert("Please enter a customer name");return}try{I(!0);const T=await me("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k.trim()})});if(!T.ok){if(T.status===401){z("/login");return}throw new Error("Failed to add customer")}const M=await T.json();W(K=>[...K,M]),_(M),N(""),U(!1),alert("Customer added successfully")}catch(T){console.error("Error adding customer:",T),alert("Failed to add customer: "+(T instanceof Error?T.message:"Unknown error"))}finally{I(!1)}};return g.useEffect(()=>{if(d.length>0){const T=d.map(K=>{var ke;const ee=p.find(xe=>xe.id===K.id);if(!ee)return K;let ue;if(j==="wholesale")ue=Number(ee.wholesalePrice);else{const xe=Number(ee.retailPrice);xe===0?ue=Math.ceil(Number(ee.wholesalePrice)*1.2):ue=xe}if(K.baseUnits!==1){const xe=(ke=ee.productunit)==null?void 0:ke.find(he=>Math.abs(he.conversionRate-K.baseUnits)<.01);xe&&(ue=Number(xe.price))}let Ne=ue;return X==="CREDIT"&&G>0&&(Ne=Number((ue+ue*G/100).toFixed(2))),{...K,price:Ne,total:K.quantity*Ne}});T.some((K,ee)=>Math.abs(K.price-d[ee].price)>.01)&&f(T)}},[X,G,j]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Point of Sale"}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("select",{value:j,onChange:T=>S(T.target.value),className:"px-8 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-200 disabled:cursor-not-allowed",disabled:d.length>0,children:[s.jsx("option",{value:"wholesale",children:"Wholesale Price"}),s.jsx("option",{value:"retail",children:"Retail Price"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.jsxs("div",{ref:$,className:"relative",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex-1 flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search customers...",value:k,onChange:sn,onKeyDown:Bi}),L&&P&&s.jsx("div",{ref:V,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:Ct.map((T,M)=>s.jsxs("div",{className:`px-4 py-2 cursor-pointer flex justify-between items-center transition-colors ${M===je?"bg-blue-100 dark:bg-blue-900/40":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>Uo(T),children:[s.jsx("span",{children:T.name}),s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:T.phone||"No phone"})]},T.id))})]}),s.jsx("button",{onClick:Hl,disabled:D||!k.trim(),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center",children:D?s.jsx(mr,{className:"w-5 h-5 animate-spin"}):s.jsx(Cr,{className:"w-5 h-5"})})]}),E&&s.jsx("button",{onClick:()=>{_(null),N("")},className:"px-3 py-2 text-red-500 hover:text-red-700 focus:outline-none",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),E&&s.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",E.name,E.phone&&`  ${E.phone}`,E.email&&`  ${E.email}`]})]}),s.jsx("div",{ref:A,className:"relative",children:s.jsx("div",{className:"flex gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("input",{type:"text",ref:O,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search products...",value:a,onChange:Y,onFocus:ie,onKeyDown:ye}),c&&a.trim().length>0&&Ee.length>0&&s.jsx("div",{ref:q,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:Ee.map((T,M)=>s.jsxs("div",{className:`px-4 py-2 cursor-pointer flex justify-between items-center transition-colors ${M===be?"bg-blue-100 dark:bg-blue-900/40":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>fe(T),children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-base font-medium",children:T.name}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 flex items-center gap-2",children:[s.jsxs("span",{children:["",Vn(pa(T)).toFixed(2)]}),X==="CREDIT"&&G>0&&s.jsxs("span",{className:"text-red-500 text-xs",children:["+",G,"%"]}),T.description&&s.jsxs("span",{className:"text-gray-500",children:[" ",T.description]})]})]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Stock: ",T.stock]})]},T.id))})]})})}),"        ",s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(T=>s.jsxs("tr",{onClick:()=>He(T),className:"hover:bg-gray-50 cursor-pointer",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.name}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                      ",s.jsx("button",{onClick:M=>{M.stopPropagation(),w(T.id),m(!0)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:T.unit})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",Number(T.price).toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:["                        ",s.jsx("button",{onClick:M=>{M.stopPropagation(),Ae(T.id,(T.quantity-1).toString())},className:"p-1 rounded-md hover:bg-gray-100",children:s.jsx(yb,{className:"w-4 h-4"})}),s.jsx("input",{ref:M=>{R.current[T.id]=M},type:"number",min:"0",step:"1",value:ae[T.id]||"",placeholder:T.quantity.toString(),onChange:M=>Te(T.id,M.target.value),onKeyDown:M=>{M.key==="Enter"&&(M.preventDefault(),pe(T.id,M.currentTarget.value),M.currentTarget.blur())},onBlur:M=>{M.target.value!==""?pe(T.id,M.target.value):te(K=>({...K,[T.id]:""}))},onClick:M=>M.stopPropagation(),className:"w-16 px-2 py-1 text-center border rounded-md"}),"                        ",s.jsx("button",{onClick:M=>{M.stopPropagation(),Ae(T.id,(T.quantity+1).toString())},className:"p-1 rounded-md hover:bg-gray-100",children:s.jsx(Cr,{className:"w-4 h-4"})})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",Number(T.total).toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("button",{onClick:M=>{M.stopPropagation(),Re(T.id)},className:"text-red-500 hover:text-red-700",children:s.jsx(br,{className:"w-4 h-4"})})})]},T.id))})]})})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Number of Items:"}),s.jsx("span",{className:"font-medium",children:st})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),s.jsx("span",{className:"font-medium",children:Ft})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsxs("span",{className:"font-medium",children:["",ht.toFixed(2)]})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-gray-700 font-medium",children:"Payment Method:"}),s.jsxs("select",{value:X,onChange:T=>se(T.target.value),disabled:d.length>0,className:`px-8 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ${d.length>0?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`,children:[s.jsx("option",{value:"CASH",children:"Cash"}),s.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),X==="CREDIT"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-gray-700 font-medium",children:"Credit Surcharge (%):"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:G,onChange:T=>oe(Number(T.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-right",placeholder:"0"})]}),X==="CREDIT"&&G>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[s.jsxs("span",{children:["Credit Surcharge (",G,"%):"]}),s.jsxs("span",{children:["+",(ht*G/100).toFixed(2)]})]})]})}),s.jsxs("div",{className:"flex justify-between items-center text-xl font-semibold border-t pt-4",children:[s.jsx("span",{children:"Final Total:"}),s.jsxs("span",{className:X==="CREDIT"&&G>0?"text-blue-600":"",children:["",ht.toFixed(2)]})]}),s.jsxs("div",{className:"mt-4 flex justify-end space-x-4",children:[s.jsx("button",{onClick:Fo,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear"}),s.jsxs("button",{onClick:Bl,className:"px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 flex items-center",children:[s.jsx(zh,{className:"w-4 h-4 mr-2"}),"Hold Sale"]}),s.jsxs("button",{onClick:zl,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:[s.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Save Sale"]}),"              ",s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>b(!v),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[s.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Print Sale"]}),v&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>b(!1)}),s.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-52 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:s.jsxs("div",{className:"py-2",children:[s.jsxs("button",{onClick:()=>{Wa("invoice"),b(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[s.jsx(jo,{className:"w-4 h-4 mr-3 text-blue-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Print Invoice (A5)"})]}),s.jsxs("button",{onClick:()=>{Wa("receipt"),b(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[s.jsx(No,{className:"w-4 h-4 mr-3 text-green-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Print Receipt"})]})]})})]})]})]})]})})]}),s.jsx(Hm,{isOpen:y,onClose:()=>m(!1),onSelect:Ze,units:x?Ue(x):[]}),s.jsx(r1,{isOpen:e,onClose:()=>t(!1),onConfirm:()=>{r&&(r.onConfirm(),t(!1))},title:(r==null?void 0:r.title)||"",message:(r==null?void 0:r.message)||""})]})},qhe=3e4,Hhe=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState(null),[a,o]=g.useState(""),[i,l]=g.useState(""),[c,u]=g.useState(!1),[d,f]=g.useState(()=>{const T=localStorage.getItem("currentSale2");return T?JSON.parse(T):[]});g.useEffect(()=>{const M=new URLSearchParams(window.location.search).get("saleId");M&&(async()=>{try{const ee=await me(`/api/sales/${M}`);if(ee.ok){const ue=await ee.json();if(ue&&Array.isArray(ue.saleitem)){const Ne=ue.saleitem.map(ke=>({id:ke.product.id,name:ke.product.name,price:Number(ke.price),quantity:Number(ke.quantity),total:Number(ke.price)*Number(ke.quantity),unit:ke.unit,baseUnits:Number(ke.baseUnits)}));f(Ne),ue.customer&&(_(ue.customer),N(ue.customer.name),S("wholesale")),b(!0)}}}catch(ee){console.error("Error fetching sale data:",ee)}})()},[]);const[p,h]=g.useState([]),[y,m]=g.useState(!1),[x,w]=g.useState(null),[v,b]=g.useState(!1),[j,S]=g.useState(()=>{const T=localStorage.getItem("currentSale2"),M=localStorage.getItem("currentPriceType2");return T&&M&&JSON.parse(T).length>0&&(M==="retail"||M==="wholesale")?M:"wholesale"}),[k,N]=g.useState(()=>localStorage.getItem("currentCustomerSearch2")||""),[P,C]=g.useState(()=>localStorage.getItem("currentCustomerSearch2")||""),[E,_]=g.useState(()=>{const T=localStorage.getItem("currentCustomer2");return T?JSON.parse(T):null}),[L,U]=g.useState(!1),[D,I]=g.useState(!1),A=g.useRef(null),$=g.useRef(null),O=g.useRef(null),R=g.useRef({}),q=g.useRef(null),V=g.useRef(null),z=yt(),[J,W]=g.useState([]),[F,H]=g.useState(null),[X,se]=g.useState(()=>{const T=localStorage.getItem("currentPaymentMethod2");return T&&(T==="CASH"||T==="CREDIT")?T:"CASH"}),[G,oe]=g.useState(()=>{const T=localStorage.getItem("currentCreditPercentage2");return T?Number(T):0}),[ae,te]=g.useState({}),[be,ge]=g.useState(-1),[je,Se]=g.useState(-1);g.useEffect(()=>{localStorage.setItem("currentSale2",JSON.stringify(d))},[d]),g.useEffect(()=>{const T=setTimeout(()=>{l(a)},150);return()=>clearTimeout(T)},[a]),g.useEffect(()=>{const T=setTimeout(()=>{C(k)},300);return()=>clearTimeout(T)},[k]),g.useEffect(()=>{if(P.trim()&&k.trim()){const T=!E||E.name.toLowerCase()!==k.toLowerCase().trim();U(T)}else k.trim()||U(!1)},[P,k,E]),g.useEffect(()=>{Se(-1)},[P]);const Ee=g.useMemo(()=>{if(console.log("Filtering products - searchTerm:",i,"products count:",p.length),!i||i.trim().length===0)return console.log("No search term, returning empty array"),[];if(!p||p.length===0)return console.log("No products available, returning empty array"),[];const T=i.toLowerCase().trim(),M=p.filter(ee=>!ee||!ee.name?!1:ee.name.toLowerCase().startsWith(T));return console.log("Filtered products:",M.length,"matches for term:",i),M.sort((ee,ue)=>ee.name.toLowerCase().localeCompare(ue.name.toLowerCase()))},[p,i]);g.useEffect(()=>{ge(-1)},[Ee]),g.useEffect(()=>{p.length>0&&a.trim().length>0&&(console.log("Products loaded and search term exists, showing suggestions"),u(!0))},[p,a]),g.useEffect(()=>{if(be>=0&&q.current){const T=q.current,M=T.children[be];if(M){const K=T.getBoundingClientRect(),ee=M.getBoundingClientRect();ee.bottom>K.bottom?T.scrollTop+=ee.bottom-K.bottom:ee.top<K.top&&(T.scrollTop-=K.top-ee.top)}}},[be]),g.useEffect(()=>{if(je>=0&&V.current){const T=V.current,M=T.children[je];if(M){const K=T.getBoundingClientRect(),ee=M.getBoundingClientRect();ee.bottom>K.bottom?T.scrollTop+=ee.bottom-K.bottom:ee.top<K.top&&(T.scrollTop-=K.top-ee.top)}}},[je]),g.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const M=await me("/api/products/pos");if(M.ok){const K=await M.json();console.log("Products fetched successfully:",K.length,"products"),h(K)}else M.status===401?z("/login"):console.error("Failed to fetch products:",M.status,M.statusText)}catch(M){console.error("Error fetching products:",M)}})()},[z]),g.useEffect(()=>{(async()=>{try{const M=await me("/api/customers");if(M.ok){const K=await M.json();Array.isArray(K)&&W(K)}else M.status===401&&z("/login")}catch(M){console.error("Error fetching customers:",M)}})()},[z]),g.useEffect(()=>{var T;(T=O.current)==null||T.focus(),d.length===0&&We.displayWelcome().catch(M=>console.error("Failed to initialize VFD display:",M))},[d]),g.useEffect(()=>{localStorage.setItem("currentCustomerSearch2",k)},[k]),g.useEffect(()=>{localStorage.setItem("currentPaymentMethod2",X)},[X]),g.useEffect(()=>{localStorage.setItem("currentCreditPercentage2",G.toString())},[G]),g.useEffect(()=>{localStorage.setItem("currentPriceType2",j)},[j]),g.useEffect(()=>{const T=M=>{M.key==="Escape"&&v&&b(!1)};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[v]),g.useEffect(()=>{localStorage.setItem("currentCustomer2",JSON.stringify(E))},[E]),g.useEffect(()=>{(async()=>{try{const M=await me("/api/users/me");if(M.ok){const K=await M.json();H(K.data.user)}else M.status===401&&z("/login")}catch(M){console.error("Error fetching current user:",M)}})()},[z]);const Oe=g.useCallback(async()=>{try{const T="/api/products/pos",M=new URLSearchParams;if(d.length>0){const K=d.map(ue=>ue.id).join(",");M.append("ids",K);const ee=await me(`${T}?${M}`);if(ee.status===401){z("/login");return}if(ee.ok){const ue=await ee.json(),Ne=d.map(ke=>{const xe=ue.find(he=>he.id===ke.id);return xe?xe.stock<ke.quantity*ke.baseUnits?`${ke.name}: Only ${Math.floor(xe.stock/ke.baseUnits)} ${ke.unit}(s) available`:null:`${ke.name}: Product no longer available`}).filter(Boolean);Ne.length>0&&alert(`Stock has changed:
`+Ne.join(`
`)),h(ke=>ke.map(xe=>ue.find(Me=>Me.id===xe.id)||xe))}}}catch(T){console.error("Error refreshing products:",T)}},[z,d]);g.useEffect(()=>{const M=di("https://localhost:5443");return M.on("stock-update",K=>{h(ee=>ee.map(ue=>ue.id===K.productId?{...ue,stock:K.newStock,version:K.version}:ue))}),()=>{M.disconnect()}},[]),g.useEffect(()=>{if(d.length>0){const T=setInterval(Oe,qhe);return()=>clearInterval(T)}},[Oe,d.length]);const re=async(T,M,K)=>{try{const ee=await me(`/api/products/${T}`);if(!ee.ok)throw new Error("Failed to fetch product stock");const ue=await ee.json(),Ne=M*K;return h(ke=>ke.map(xe=>xe.id===T?{...xe,stock:ue.stock,version:ue.version}:xe)),Number(ue.stock)>=Ne}catch(ee){return console.error("Error checking stock:",ee),!1}},Q=async T=>{let M=0;const K=3;for(;M<K;)try{if(!(F!=null&&F.id))throw new Error("User not authenticated");const ee=Date.now().toString(),ue=T.map(he=>{var Me;return{productId:parseInt(he.id),quantity:Number(he.quantity*(he.baseUnits||1)),version:(Me=p.find(Ye=>Ye.id===he.id))==null?void 0:Me.version}});if(ue.some(he=>!he.version))throw new Error("Product version information is missing");const Ne={updates:ue,transactionId:ee,userId:F.id},ke=await me("/api/products/stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)});if(!ke.ok){if(ke.status===401)return z("/login"),!1;const he=await ke.json();throw new Error(he.message||"Failed to update stock")}const xe=await ke.json();if(!xe.success){const he=xe.results.filter(Me=>!Me.success).map(Me=>{const Ye=T.find(Ve=>parseInt(Ve.id)===Me.productId);return`${(Ye==null?void 0:Ye.name)||"Unknown product"}: ${Me.message}${Me.currentStock!==void 0?` (Available: ${Math.floor(Me.currentStock/((Ye==null?void 0:Ye.baseUnits)||1))} ${(Ye==null?void 0:Ye.unit)||"units"})`:""}`}).join(`
`);throw new Error(`Stock update failed:
${he}`)}return h(p.map(he=>{const Me=xe.results.find(Ye=>parseInt(he.id)===Ye.productId);return Me?{...he,stock:Me.newStock??he.stock,version:Me.version??he.version}:he})),!0}catch(ee){if(console.error("Stock update error:",ee),M===K-1)throw ee;M++,await new Promise(ue=>setTimeout(ue,1e3*M))}return!1},Y=T=>{const M=T.target.value;if(M.length<a.length){o(M);const ee=M.trim().length>0&&p.length>0;u(ee);return}if(M.length>a.length&&p.length>0){if(p.some(ue=>ue.name.toLowerCase().startsWith(M.toLowerCase())))o(M),u(!0);else try{const ue=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwF");ue.volume=.1,ue.play()}catch{console.log("Invalid character blocked")}return}o(M),console.log("Search change - value:",M,"products count:",p.length);const K=M.trim().length>0&&p.length>0;u(K),M.trim().length>0&&p.length===0&&(console.log("Search term entered but no products loaded, fetching..."),(async()=>{try{const ue=await me("/api/products/pos");if(ue.ok){const Ne=await ue.json();console.log("Products loaded from search change:",Ne.length),h(Ne)}}catch(ue){console.error("Error fetching products on search:",ue)}})())},ie=()=>{console.log("Search focus - searchTerm:",a,"products count:",p.length),a.trim().length>0&&p.length>0&&u(!0),p.length===0&&(console.log("No products loaded, attempting to refetch..."),(async()=>{try{const M=await me("/api/products/pos");if(M.ok){const K=await M.json();console.log("Refetched products:",K.length),h(K),a.trim().length>0&&u(!0)}}catch(M){console.error("Error refetching products:",M)}})())},fe=T=>{const M=pa(T),K=Vn(M),ee={name:T.baseUnit.name,baseUnits:1,price:K},ue=d.find(he=>he.id===T.id);let Ne,ke=1;if(ue)ke=ue.quantity+1,Ne=d.map(he=>he.id===T.id?{...he,quantity:ke,price:K,total:ke*K}:he);else{const he={id:T.id,name:T.name,price:K,quantity:1,total:K,unit:ee.name,baseUnits:ee.baseUnits};Ne=[...d,he]}f(Ne);const xe=Ne.reduce((he,Me)=>he+Me.total,0);console.log("POS2: About to send product to VFD:",{productName:T.name,price:K,total:xe,quantity:ke}),fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:T.name.replace(/[^\x20-\x7E]/g,""),price:K,total:xe})}).then(he=>he.json()).then(he=>{console.log("POS2: VFD proxy response:",he)}).catch(he=>{console.error("POS2: Failed to update VFD display:",he)}),u(!1),setTimeout(()=>{o("")},50),setTimeout(()=>{const he=R.current[T.id];he&&(he.focus(),he.select())},150)},ye=T=>{if(T.key==="Enter"){if(T.preventDefault(),Ee.length>0){const M=be>=0&&be<Ee.length?Ee[be]:Ee[0];fe(M)}}else T.key==="Escape"?(u(!1),o(""),ge(-1)):T.key==="ArrowDown"?(T.preventDefault(),Ee.length>0&&ge(M=>M<Ee.length-1?M+1:0)):T.key==="ArrowUp"&&(T.preventDefault(),Ee.length>0&&ge(M=>M>0?M-1:Ee.length-1))},Re=T=>{const M=d.filter(K=>K.id!==T);if(f(M),M.length===0&&S("wholesale"),M.length>0){const K=M.reduce((ue,Ne)=>ue+Ne.total,0),ee=M[M.length-1];fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:ee.name.replace(/[^\x20-\x7E]/g,""),price:ee.price,total:K,quantity:ee.quantity})}).catch(ue=>console.error("Failed to update VFD display:",ue))}else fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:["Welcome to","APEX TECHNOLOGY","Point of Sale"]})}).catch(K=>console.error("Failed to update VFD display:",K))},Te=(T,M)=>{te(K=>({...K,[T]:M}))},pe=async(T,M)=>{const K=parseInt(M,10);if(isNaN(K)||K<1){te(ee=>({...ee,[T]:""}));return}te(ee=>({...ee,[T]:""})),await Ae(T,M)},Ae=async(T,M)=>{const K=parseInt(M,10);if(isNaN(K)||K<1)return;const ee=d.find(ue=>ue.id===T);if(ee)try{if(!await re(T,K,ee.baseUnits||1)){const xe=p.find(Me=>Me.id===T),he=xe?Math.floor(xe.stock/(ee.baseUnits||1)):0;if(alert(`Insufficient stock for ${ee.name}. Available: ${he} ${ee.unit}(s)`),K>ee.quantity){const Me=d.map(At=>At.id===T?{...At,quantity:he||1,total:(he||1)*Number(At.price)}:At);f(Me);const Ye=Me.reduce((At,Vl)=>At+Vl.total,0);p.find(At=>At.id===T)&&fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:ee.name.replace(/[^\x20-\x7E]/g,""),price:Number(ee.price),total:Ye,quantity:he||1})}).catch(At=>console.error("Failed to update VFD display:",At))}return}const Ne=d.map(xe=>xe.id===T?{...xe,quantity:K,total:K*Number(xe.price)}:xe);f(Ne);const ke=Ne.reduce((xe,he)=>xe+he.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:ee.name.replace(/[^\x20-\x7E]/g,""),price:Number(ee.price),total:ke,quantity:K})}).catch(xe=>console.error("Failed to update VFD display:",xe))}catch(ue){console.error("Error updating quantity:",ue),alert("Failed to update quantity: "+(ue instanceof Error?ue.message:"Unknown error"))}},He=T=>{console.log("Row clicked, displaying VFD info for:",T.name);const M=d.reduce((K,ee)=>K+ee.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:T.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:T.price,quantity:T.quantity,total:M})}).then(K=>K.json()).then(K=>{console.log("POS2: VFD proxy response for row click:",K)}).catch(K=>{console.error("POS2: Failed to update VFD display on row click:",K)})},Ze=T=>{if(!x)return;const M=d.find(xe=>xe.id===x);if(!M)return;const K=p.find(xe=>xe.id===x);if(!K)return;const ee=T.conversionRate||1,ue=M.quantity*(M.baseUnits||1);if(K.stock<ee){alert(`Insufficient stock. Available: ${Math.floor(K.stock/ee)} ${T.name}(s)`);return}let Ne=Math.floor(ue/ee);Ne<1&&K.stock>=ee&&(Ne=1);const ke=Vn(Number(T.price));f(d.map(xe=>xe.id===x?{...xe,unit:String(T.name),baseUnits:Number(ee),price:ke,quantity:Number(Ne),total:Number(Ne)*ke}:xe)),console.log("Updated sale item with new unit:",d.find(xe=>xe.id===x)),m(!1)},Ue=T=>{const M=p.find(ee=>ee.id===T);if(!M||!M.baseUnit)return[];const K=[{name:M.baseUnit.name,baseUnits:1,price:Number(pa(M)),unitId:M.baseUnit.id,conversionRate:1}];return M.productunit&&Array.isArray(M.productunit)&&K.push(...M.productunit.map(ee=>({name:ee.unit.name,baseUnits:ee.conversionRate,price:Number(ee.price),unitId:ee.unit.id,conversionRate:ee.conversionRate}))),console.log("Available units for product:",T,K),K},st=d.length,Ft=d.reduce((T,M)=>T+M.quantity,0),ht=Number(d.reduce((T,M)=>T+M.total,0).toFixed(2)),Bl=()=>{if(d.length===0){alert("No items to hold");return}if(j==="wholesale"&&!E){alert("Please select a customer for wholesale sales");return}n({title:"Hold Sale",message:"Are you sure you want to hold this sale for later?",onConfirm:Lo}),t(!0)},Lo=async()=>{try{if(d.length===0){alert("No items to hold");return}if(j==="wholesale"&&!E){alert("Please select a customer for wholesale sales");return}const T={customerId:(E==null?void 0:E.id)||null,userId:F==null?void 0:F.id,items:d.map(K=>({productId:parseInt(K.id),quantity:K.quantity,price:K.price,unit:K.unit,baseUnits:K.baseUnits})),totalAmount:d.reduce((K,ee)=>K+ee.total,0),saleType:j.toUpperCase(),status:"held"},M=await me("/api/held-sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!M.ok){if(M.status===401){z("/login");return}const K=await M.json();throw new Error(K.message||"Failed to hold sale")}Fr(),alert("Sale held successfully"),Oe()}catch(T){console.error("Error holding sale:",T),alert("Failed to hold sale: "+(T instanceof Error?T.message:"Unknown error"))}},zl=()=>{if(d.length===0){alert("No items to save");return}if(j==="wholesale"&&!E){alert("Please select a customer for wholesale sales");return}n({title:"Complete Sale",message:"Are you sure you want to complete this sale?",onConfirm:ql}),t(!0)},ql=async()=>{try{if(d.length===0){alert("No items to save");return}if(j==="wholesale"&&!E){alert("Please select a customer for wholesale sales");return}const T=d.reduce((Ne,ke)=>Ne+ke.total,0);if(typeof T!="number"||T<=0)throw new Error("Invalid total amount");if(!await Q(d))return;const K={...j==="wholesale"&&{customerId:E==null?void 0:E.id},userId:F==null?void 0:F.id,items:d.map(Ne=>({productId:parseInt(Ne.id),quantity:Number(Ne.quantity),price:Number(Ne.price),unit:String(Ne.unit),baseUnits:Number(Ne.baseUnits)})),totalAmount:Number(ht),paymentMethod:X,saleType:j.toUpperCase(),isCreditSale:X==="CREDIT",creditPercentage:X==="CREDIT"?Number(G):null,status:"completed"},ee=await me("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)});if(!ee.ok){if(ee.status===401){z("/login");return}const Ne=await ee.json();throw new Error(Ne.message||"Failed to save sale")}const ue=await ee.json();console.log("Sale saved successfully:",ue),We.displayTotal(ht).catch(Ne=>console.error("Failed to update VFD display:",Ne)),setTimeout(()=>{Fr()},2e3),alert("Sale completed and saved successfully"),setTimeout(()=>{window.location.reload()},2e3)}catch(T){console.error("Error completing sale:",T),T instanceof Error&&T.message.includes("Stock update failed:")?alert(T.message):alert("Failed to complete sale: "+(T instanceof Error?T.message:"Unknown error"))}},Wa=async T=>{try{if(d.length===0){alert("No items to print");return}if(j==="wholesale"&&!E){alert("Please select a customer for wholesale sales");return}if(!await Q(d))return;const K={...j==="wholesale"&&{customerId:E==null?void 0:E.id},userId:F==null?void 0:F.id,items:d.map(Ve=>({productId:parseInt(Ve.id),quantity:Number(Ve.quantity),price:Number(Ve.price),unit:String(Ve.unit),baseUnits:Number(Ve.baseUnits)})),totalAmount:Number(ht),paymentMethod:X,saleType:j.toUpperCase(),isCreditSale:X==="CREDIT",creditPercentage:X==="CREDIT"?Number(G):null,status:"completed"},ee=await me("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)});if(!ee.ok){if(ee.status===401){z("/login");return}const Ve=await ee.json();throw new Error(Ve.message||"Failed to save sale")}const ue=await ee.json();console.log("Sale saved successfully:",ue),We.displayTotal(ht).catch(Ve=>console.error("Failed to update VFD display:",Ve));const Ne={type:T,items:d.map(Ve=>({id:Ve.id,name:Ve.name,price:Number(Ve.price),quantity:Number(Ve.quantity),total:Number(Ve.total),unit:Ve.unit})),totalAmount:Number(ht),totalItems:Number(Ft),customer:j==="wholesale"&&E||void 0,paymentMethod:X,creditPercentage:X==="CREDIT"?Number(G):0,baseTotal:X==="CREDIT"&&G>0?Number((ht/(1+G/100)).toFixed(2)):void 0,saleId:ue.id},ke=T==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",xe=localStorage.getItem(ke)||void 0;let he=!1;const Me={...Ne,salesperson:F?{name:F.name}:void 0};if((localStorage.getItem("qz.printMode")==="browser"?"browser":"silent")==="silent"&&xe)try{he=T==="invoice"?await Fi(Me,xe):await Ui(Me,xe)}catch(Ve){console.warn("Silent QZ printing failed, falling back:",Ve),he=!1}he||await Da(Me),Fr(),alert("Sale completed and printed successfully")}catch(M){console.error("Error during print process:",M),alert("Failed to complete print process: "+(M instanceof Error?M.message:"Unknown error"))}},Fo=()=>{if(d.length===0){Fr();return}n({title:"Clear Sale",message:"Are you sure you want to clear all items? This action cannot be undone.",onConfirm:Fr}),t(!0)},Fr=()=>{f([]),_(null),N(""),o(""),m(!1),w(null),b(!1),oe(0),S("wholesale"),localStorage.removeItem("currentSale2"),localStorage.removeItem("currentCustomer2"),localStorage.removeItem("currentCustomerSearch2"),localStorage.removeItem("currentPriceType2"),We.displayWelcome().catch(T=>console.error("Failed to update VFD display:",T)),O.current&&O.current.focus()};g.useEffect(()=>{const T=M=>{setTimeout(()=>{A.current&&!A.current.contains(M.target)&&u(!1)},100)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const pa=T=>{if(j==="wholesale")return Number(T.wholesalePrice);{const M=Number(T.retailPrice);return M===0?Math.ceil(Number(T.wholesalePrice)*1.2):M}},Vn=T=>X==="CREDIT"&&G>0?Number((T+T*G/100).toFixed(2)):T,Ct=J.filter(T=>T.name.toLowerCase().includes(P.toLowerCase().trim())),sn=T=>{const M=T.target.value;if(N(M),E&&E.name.toLowerCase()!==M.toLowerCase().trim()&&_(null),M.trim()){const K=!E||E.name.toLowerCase()!==M.toLowerCase().trim();U(K)}else U(!1)},Uo=T=>{_(T),U(!1),Se(-1),setTimeout(()=>{N(T.name)},50),setTimeout(()=>{var M;(M=O.current)==null||M.focus()},100)},Bi=T=>{var M;if(T.key==="Enter")if(T.preventDefault(),Ct.length>0){const K=je>=0&&je<Ct.length?Ct[je]:Ct[0];Uo(K)}else(M=O.current)==null||M.focus();else T.key==="Escape"?(U(!1),Se(-1)):T.key==="ArrowDown"?(T.preventDefault(),Ct.length>0&&Se(K=>K<Ct.length-1?K+1:0)):T.key==="ArrowUp"&&(T.preventDefault(),Ct.length>0&&Se(K=>K>0?K-1:Ct.length-1))};g.useEffect(()=>{const T=M=>{setTimeout(()=>{$.current&&!$.current.contains(M.target)&&U(!1)},100)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const Hl=async()=>{if(!k.trim()){alert("Please enter a customer name");return}try{I(!0);const T=await me("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k.trim()})});if(!T.ok){if(T.status===401){z("/login");return}throw new Error("Failed to add customer")}const M=await T.json();W(K=>[...K,M]),_(M),N(""),U(!1),alert("Customer added successfully")}catch(T){console.error("Error adding customer:",T),alert("Failed to add customer: "+(T instanceof Error?T.message:"Unknown error"))}finally{I(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Point of Sale 2"}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("select",{value:j,onChange:T=>S(T.target.value),className:"px-8 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-200 disabled:cursor-not-allowed",disabled:d.length>0,children:[s.jsx("option",{value:"wholesale",children:"Wholesale Price"}),s.jsx("option",{value:"retail",children:"Retail Price"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.jsxs("div",{ref:$,className:"relative",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex-1 flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search customers...",value:k,onChange:sn,onKeyDown:Bi}),L&&P&&s.jsx("div",{ref:V,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:Ct.map((T,M)=>s.jsxs("div",{className:`px-4 py-2 cursor-pointer flex justify-between items-center transition-colors ${M===je?"bg-blue-100 dark:bg-blue-900/40":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>Uo(T),children:[s.jsx("span",{children:T.name}),s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:T.phone||"No phone"})]},T.id))})]}),s.jsx("button",{onClick:Hl,disabled:D||!k.trim(),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center",children:D?s.jsx(mr,{className:"w-5 h-5 animate-spin"}):s.jsx(Cr,{className:"w-5 h-5"})})]}),E&&s.jsx("button",{onClick:()=>{_(null),N("")},className:"px-3 py-2 text-red-500 hover:text-red-700 focus:outline-none",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),E&&s.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",E.name,E.phone&&`  ${E.phone}`,E.email&&`  ${E.email}`]})]}),s.jsx("div",{ref:A,className:"relative",children:s.jsx("div",{className:"flex gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("input",{type:"text",ref:O,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search products...",value:a,onChange:Y,onFocus:ie,onKeyDown:ye}),c&&a.trim().length>0&&Ee.length>0&&s.jsx("div",{ref:q,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:Ee.map((T,M)=>s.jsxs("div",{className:`px-4 py-2 cursor-pointer flex justify-between items-center transition-colors ${M===be?"bg-blue-100 dark:bg-blue-900/40":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>fe(T),children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-base font-medium",children:T.name}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 flex items-center gap-2",children:[s.jsxs("span",{children:["",Vn(pa(T)).toFixed(2)]}),X==="CREDIT"&&G>0&&s.jsxs("span",{className:"text-red-500 text-xs",children:["+",G,"%"]}),T.description&&s.jsxs("span",{className:"text-gray-500",children:[" ",T.description]})]})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Stock: ",T.stock]})]},T.id))})]})})}),"        ",s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(T=>s.jsxs("tr",{onClick:()=>He(T),className:"hover:bg-gray-50 cursor-pointer",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T.name}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                      ",s.jsx("button",{onClick:M=>{M.stopPropagation(),w(T.id),m(!0)},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:T.unit})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",Number(T.price).toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:["                        ",s.jsx("button",{onClick:M=>{M.stopPropagation(),Ae(T.id,(T.quantity-1).toString())},className:"p-1 rounded-md hover:bg-gray-100",children:s.jsx(yb,{className:"w-4 h-4"})}),s.jsx("input",{ref:M=>{R.current[T.id]=M},type:"number",min:"0",step:"1",value:ae[T.id]||"",placeholder:T.quantity.toString(),onChange:M=>Te(T.id,M.target.value),onKeyDown:M=>{M.key==="Enter"&&(M.preventDefault(),pe(T.id,M.currentTarget.value),M.currentTarget.blur())},onBlur:M=>{M.target.value!==""?pe(T.id,M.target.value):te(K=>({...K,[T.id]:""}))},onClick:M=>M.stopPropagation(),className:"w-16 px-2 py-1 text-center border rounded-md"}),"                        ",s.jsx("button",{onClick:M=>{M.stopPropagation(),Ae(T.id,(T.quantity+1).toString())},className:"p-1 rounded-md hover:bg-gray-100",children:s.jsx(Cr,{className:"w-4 h-4"})})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",Number(T.total).toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("button",{onClick:M=>{M.stopPropagation(),Re(T.id)},className:"text-red-500 hover:text-red-700",children:s.jsx(br,{className:"w-4 h-4"})})})]},T.id))})]})})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Number of Items:"}),s.jsx("span",{className:"font-medium",children:st})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),s.jsx("span",{className:"font-medium",children:Ft})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsxs("span",{className:"font-medium",children:["",ht.toFixed(2)]})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-gray-700 font-medium",children:"Payment Method:"}),s.jsxs("select",{value:X,onChange:T=>se(T.target.value),disabled:d.length>0,className:`px-8 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ${d.length>0?"bg-gray-100 text-gray-500 cursor-not-allowed":""}`,children:[s.jsx("option",{value:"CASH",children:"Cash"}),s.jsx("option",{value:"CREDIT",children:"Credit"})]})]}),X==="CREDIT"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-gray-700 font-medium",children:"Credit Surcharge (%):"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:G,onChange:T=>oe(Number(T.target.value)),className:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-right",placeholder:"0"})]}),X==="CREDIT"&&G>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[s.jsxs("span",{children:["Credit Surcharge (",G,"%):"]}),s.jsxs("span",{children:["+",(ht*G/100).toFixed(2)]})]})]})}),s.jsxs("div",{className:"flex justify-between items-center text-xl font-semibold border-t pt-4",children:[s.jsx("span",{children:"Final Total:"}),s.jsxs("span",{className:X==="CREDIT"&&G>0?"text-blue-600":"",children:["",ht.toFixed(2)]})]}),s.jsxs("div",{className:"mt-4 flex justify-end space-x-4",children:[s.jsx("button",{onClick:Fo,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear"}),s.jsxs("button",{onClick:Bl,className:"px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 flex items-center",children:[s.jsx(zh,{className:"w-4 h-4 mr-2"}),"Hold Sale"]}),s.jsxs("button",{onClick:zl,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:[s.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Save Sale"]}),"              ",s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>b(!v),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[s.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Print Sale"]}),v&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>b(!1)}),s.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-52 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:s.jsxs("div",{className:"py-2",children:[s.jsxs("button",{onClick:()=>{Wa("invoice"),b(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[s.jsx(jo,{className:"w-4 h-4 mr-3 text-blue-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Print Invoice (A5)"})]}),s.jsxs("button",{onClick:()=>{Wa("receipt"),b(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 flex items-center transition-colors",children:[s.jsx(No,{className:"w-4 h-4 mr-3 text-green-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Print Receipt"})]})]})})]})]})]})]})})]}),s.jsx(Hm,{isOpen:y,onClose:()=>m(!1),onSelect:Ze,units:x?Ue(x):[]}),s.jsx(r1,{isOpen:e,onClose:()=>t(!1),onConfirm:()=>{r&&(r.onConfirm(),t(!1))},title:(r==null?void 0:r.title)||"",message:(r==null?void 0:r.message)||""})]})},Vhe=3e4,Whe=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState(null),[a,o]=g.useState(""),[i,l]=g.useState(""),[c,u]=g.useState(!1),[d,f]=g.useState(()=>{const Q=localStorage.getItem("retailCurrentSale");return Q?JSON.parse(Q):[]});g.useEffect(()=>{const Y=new URLSearchParams(window.location.search).get("saleId");Y&&(async()=>{try{const fe=await me(`/api/sales/${Y}`);if(fe.ok){const ye=await fe.json();if(ye&&Array.isArray(ye.saleitem)){const Re=ye.saleitem.map(Te=>({id:Te.product.id,name:Te.product.name,price:Number(Te.price),quantity:Number(Te.quantity),total:Number(Te.price)*Number(Te.quantity),unit:Te.unit,baseUnits:Number(Te.baseUnits)}));f(Re)}}}catch(fe){console.error("Error fetching sale data:",fe)}})()},[]);const[p,h]=g.useState([]),[y,m]=g.useState(!1),[x,w]=g.useState(null),v=g.useRef(null),b=g.useRef(null),j=g.useRef({}),S=g.useRef(null),k=yt(),[N,P]=g.useState(null),[C]=g.useState("CASH"),[E,_]=g.useState({}),[L,U]=g.useState(-1);g.useEffect(()=>{localStorage.setItem("retailCurrentSale",JSON.stringify(d))},[d]),g.useEffect(()=>{const Q=setTimeout(()=>{l(a)},150);return()=>clearTimeout(Q)},[a]);const D=g.useMemo(()=>{if(console.log("Filtering products - searchTerm:",i,"products count:",p.length),!i||i.trim().length===0)return console.log("No search term, returning empty array"),[];if(!p||p.length===0)return console.log("No products available, returning empty array"),[];const Q=i.toLowerCase().trim(),Y=p.filter(fe=>!fe||!fe.name?!1:fe.name.toLowerCase().startsWith(Q));return console.log("Filtered products:",Y.length,"matches for term:",i),Y.sort((fe,ye)=>fe.name.toLowerCase().localeCompare(ye.name.toLowerCase()))},[p,i]);g.useEffect(()=>{U(-1)},[D]),g.useEffect(()=>{p.length>0&&a.trim().length>0&&(console.log("Products loaded and search term exists, showing suggestions"),u(!0))},[p,a]),g.useEffect(()=>{if(L>=0&&S.current){const Q=S.current,Y=Q.children[L];if(Y){const ie=Q.getBoundingClientRect(),fe=Y.getBoundingClientRect();fe.bottom>ie.bottom?Q.scrollTop+=fe.bottom-ie.bottom:fe.top<ie.top&&(Q.scrollTop-=ie.top-fe.top)}}},[L]),g.useEffect(()=>{(async()=>{try{console.log("Fetching products...");const Y=await me("/api/products/pos");if(Y.ok){const ie=await Y.json();console.log("Products fetched successfully:",ie.length,"products"),h(ie)}else Y.status===401?k("/login"):console.error("Failed to fetch products:",Y.status,Y.statusText)}catch(Y){console.error("Error fetching products:",Y)}})()},[k]),g.useEffect(()=>{var Q;(Q=b.current)==null||Q.focus(),d.length===0&&We.displayWelcome().catch(Y=>console.error("Failed to initialize VFD display:",Y))},[d]),g.useEffect(()=>{(async()=>{try{const Y=await me("/api/users/me");if(Y.ok){const ie=await Y.json();P(ie.data.user)}else Y.status===401&&k("/login")}catch(Y){console.error("Error fetching current user:",Y)}})()},[k]);const I=g.useCallback(async()=>{try{const Q="/api/products/pos",Y=new URLSearchParams;if(d.length>0){const ie=d.map(ye=>ye.id).join(",");Y.append("ids",ie);const fe=await me(`${Q}?${Y}`);if(fe.status===401){k("/login");return}if(fe.ok){const ye=await fe.json(),Re=d.map(Te=>{const pe=ye.find(Ae=>Ae.id===Te.id);return pe?pe.stock<Te.quantity*Te.baseUnits?`${Te.name}: Only ${Math.floor(pe.stock/Te.baseUnits)} ${Te.unit}(s) available`:null:`${Te.name}: Product no longer available`}).filter(Boolean);Re.length>0&&alert(`Stock has changed:
`+Re.join(`
`)),h(Te=>Te.map(pe=>ye.find(He=>He.id===pe.id)||pe))}}}catch(Q){console.error("Error refreshing products:",Q)}},[k,d]);g.useEffect(()=>{const Q="https://localhost:5443";console.log("WebSocket connecting to:",Q),console.log("Current page protocol:",window.location.protocol),console.log("Environment VITE_SERVER_URL:","https://localhost:5443"),console.log("Calculated getSocketUrl():",s2());const Y=di(Q);return Y.on("connect",()=>{console.log("WebSocket connected successfully to:",Q)}),Y.on("connect_error",ie=>{console.error("WebSocket connection error:",ie)}),Y.on("stock-update",ie=>{h(fe=>fe.map(ye=>ye.id===ie.productId?{...ye,stock:ie.newStock,version:ie.version}:ye))}),()=>{Y.disconnect()}},[]),g.useEffect(()=>{if(d.length>0){const Q=setInterval(I,Vhe);return()=>clearInterval(Q)}},[I,d.length]);const A=async(Q,Y,ie)=>{try{const fe=await me(`/api/products/${Q}`);if(!fe.ok)throw new Error("Failed to fetch product stock");const ye=await fe.json(),Re=Y*ie;return h(Te=>Te.map(pe=>pe.id===Q?{...pe,stock:ye.stock,version:ye.version}:pe)),Number(ye.stock)>=Re}catch(fe){return console.error("Error checking stock:",fe),!1}},$=async Q=>{let Y=0;const ie=3;for(;Y<ie;)try{if(!(N!=null&&N.id))throw new Error("User not authenticated");const fe=Date.now().toString(),ye=Q.map(Ae=>{var He;return{productId:parseInt(Ae.id),quantity:Number(Ae.quantity*(Ae.baseUnits||1)),version:(He=p.find(Ze=>Ze.id===Ae.id))==null?void 0:He.version}});if(ye.some(Ae=>!Ae.version))throw new Error("Product version information is missing");const Re={updates:ye,transactionId:fe,userId:N.id},Te=await me("/api/products/stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Re)});if(!Te.ok){if(Te.status===401)return k("/login"),!1;const Ae=await Te.json();throw new Error(Ae.message||"Failed to update stock")}const pe=await Te.json();if(!pe.success){const Ae=pe.results.filter(He=>!He.success).map(He=>{const Ze=Q.find(Ue=>parseInt(Ue.id)===He.productId);return`${(Ze==null?void 0:Ze.name)||"Unknown product"}: ${He.message}${He.currentStock!==void 0?` (Available: ${Math.floor(He.currentStock/((Ze==null?void 0:Ze.baseUnits)||1))} ${(Ze==null?void 0:Ze.unit)||"units"})`:""}`}).join(`
`);throw new Error(`Stock update failed:
${Ae}`)}return h(p.map(Ae=>{const He=pe.results.find(Ze=>parseInt(Ae.id)===Ze.productId);return He?{...Ae,stock:He.newStock??Ae.stock,version:He.version??Ae.version}:Ae})),!0}catch(fe){if(console.error("Stock update error:",fe),Y===ie-1)throw fe;Y++,await new Promise(ye=>setTimeout(ye,1e3*Y))}return!1},O=Q=>{const Y=Q.target.value;if(Y.length<a.length){o(Y);const fe=Y.trim().length>0&&p.length>0;u(fe);return}if(Y.length>a.length&&p.length>0){if(p.some(ye=>ye.name.toLowerCase().startsWith(Y.toLowerCase())))o(Y),u(!0);else try{const ye=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeSwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwFJHfH8N2PQAoUXrTp66hVFApGn+DyvmwYBjiR1/LMeiwF");ye.volume=.1,ye.play()}catch{console.log("Invalid character blocked")}return}o(Y),console.log("Search change - value:",Y,"products count:",p.length);const ie=Y.trim().length>0&&p.length>0;u(ie),Y.trim().length>0&&p.length===0&&(console.log("Search term entered but no products loaded, fetching..."),(async()=>{try{const ye=await me("/api/products/pos");if(ye.ok){const Re=await ye.json();console.log("Products loaded from search change:",Re.length),h(Re)}}catch(ye){console.error("Error fetching products on search:",ye)}})())},R=()=>{console.log("Search focus - searchTerm:",a,"products count:",p.length),a.trim().length>0&&p.length>0&&u(!0),p.length===0&&(console.log("No products loaded, attempting to refetch..."),(async()=>{try{const Y=await me("/api/products/pos");if(Y.ok){const ie=await Y.json();console.log("Refetched products:",ie.length),h(ie),a.trim().length>0&&u(!0)}}catch(Y){console.error("Error refetching products:",Y)}})())},q=Q=>{const Y=Number(Q.retailPrice);return Y===0?Math.ceil(Number(Q.wholesalePrice)*1.2):Y},V=Q=>{const Y=q(Q),ie={name:Q.baseUnit.name,baseUnits:1,price:Y},fe=d.find(pe=>pe.id===Q.id);let ye,Re=1;if(fe)Re=fe.quantity+1,ye=d.map(pe=>pe.id===Q.id?{...pe,quantity:Re,price:Y,total:Re*Y}:pe);else{const pe={id:Q.id,name:Q.name,price:Y,quantity:1,total:Y,unit:ie.name,baseUnits:ie.baseUnits};ye=[...d,pe]}f(ye);const Te=ye.reduce((pe,Ae)=>pe+Ae.total,0);console.log("RetailPos: About to send product to VFD:",{productName:Q.name,price:Y,quantity:Re,total:Te}),fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:Q.name.replace(/[^\x20-\x7E]/g,""),price:Y,quantity:Re,total:Te})}).then(pe=>pe.json()).then(pe=>{console.log("RetailPos: VFD proxy response:",pe)}).catch(pe=>{console.error("RetailPos: Failed to update VFD display:",pe)}),u(!1),setTimeout(()=>{o("")},50),setTimeout(()=>{const pe=j.current[Q.id];pe&&(pe.focus(),pe.select())},150)},z=Q=>{if(Q.key==="Enter"){if(Q.preventDefault(),D.length>0){const Y=L>=0&&L<D.length?D[L]:D[0];V(Y)}}else Q.key==="Escape"?(u(!1),o(""),U(-1)):Q.key==="ArrowDown"?(Q.preventDefault(),D.length>0&&U(Y=>Y<D.length-1?Y+1:0)):Q.key==="ArrowUp"&&(Q.preventDefault(),D.length>0&&U(Y=>Y>0?Y-1:D.length-1))},J=Q=>{const Y=d.filter(ie=>ie.id!==Q);if(f(Y),Y.length>0){const ie=Y.reduce((ye,Re)=>ye+Re.total,0),fe=Y[Y.length-1];fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:fe.name.replace(/[^\x20-\x7E]/g,""),price:fe.price,quantity:fe.quantity,total:ie})}).catch(ye=>console.error("Failed to update VFD display:",ye))}else fetch("http://localhost:5001/welcome",{method:"POST",headers:{"Content-Type":"application/json"}}).catch(ie=>console.error("Failed to update VFD display:",ie))},W=(Q,Y)=>{_(ie=>({...ie,[Q]:Y}))},F=async(Q,Y)=>{const ie=parseInt(Y,10);if(isNaN(ie)||ie<1){_(fe=>({...fe,[Q]:""}));return}_(fe=>({...fe,[Q]:""})),await H(Q,Y)},H=async(Q,Y)=>{const ie=parseInt(Y,10);if(isNaN(ie)||ie<1)return;const fe=d.find(ye=>ye.id===Q);if(fe)try{if(!await A(Q,ie,fe.baseUnits||1)){const pe=p.find(He=>He.id===Q),Ae=pe?Math.floor(pe.stock/(fe.baseUnits||1)):0;if(alert(`Insufficient stock for ${fe.name}. Available: ${Ae} ${fe.unit}(s)`),ie>fe.quantity){const He=d.map(st=>st.id===Q?{...st,quantity:Ae||1,total:(Ae||1)*Number(st.price)}:st);f(He);const Ze=He.reduce((st,Ft)=>st+Ft.total,0);p.find(st=>st.id===Q)&&fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:fe.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:Number(fe.price),quantity:Ae||1,total:Ze})}).catch(st=>console.error("Failed to update VFD display:",st))}return}const Re=d.map(pe=>pe.id===Q?{...pe,quantity:ie,total:ie*Number(pe.price)}:pe);f(Re);const Te=Re.reduce((pe,Ae)=>pe+Ae.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:fe.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:Number(fe.price),quantity:ie,total:Te})}).catch(pe=>console.error("Failed to update VFD display:",pe))}catch(ye){console.error("Error updating quantity:",ye),alert("Failed to update quantity: "+(ye instanceof Error?ye.message:"Unknown error"))}},X=Q=>{console.log("Row clicked, displaying VFD info for:",Q.name);const Y=d.reduce((ie,fe)=>ie+fe.total,0);fetch("http://localhost:5001/display",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:Q.name.substring(0,20).replace(/[^\x20-\x7E]/g,""),price:Q.price,quantity:Q.quantity,total:Y})}).then(ie=>ie.json()).then(ie=>{console.log("RetailPos: VFD proxy response for row click:",ie)}).catch(ie=>{console.error("RetailPos: Failed to update VFD display on row click:",ie)})},se=Q=>{if(!x)return;const Y=d.find(pe=>pe.id===x);if(!Y)return;const ie=p.find(pe=>pe.id===x);if(!ie)return;const fe=Q.conversionRate||1,ye=Y.quantity*(Y.baseUnits||1);if(ie.stock<fe){alert(`Insufficient stock. Available: ${Math.floor(ie.stock/fe)} ${Q.name}(s)`);return}let Re=Math.floor(ye/fe);Re<1&&ie.stock>=fe&&(Re=1);let Te=Number(Q.price);Te===0&&(Te=q(ie)*fe),f(d.map(pe=>pe.id===x?{...pe,unit:String(Q.name),baseUnits:Number(fe),price:Te,quantity:Number(Re),total:Number(Re)*Te}:pe)),console.log("Updated sale item with new unit:",d.find(pe=>pe.id===x)),m(!1)},G=Q=>{const Y=p.find(ye=>ye.id===Q);if(!Y||!Y.baseUnit)return[];const ie=q(Y),fe=[{name:Y.baseUnit.name,baseUnits:1,price:ie,unitId:Y.baseUnit.id,conversionRate:1}];return Y.productunit&&Array.isArray(Y.productunit)&&fe.push(...Y.productunit.map(ye=>({name:ye.unit.name,baseUnits:ye.conversionRate,price:Number(ye.price)||ie*ye.conversionRate,unitId:ye.unit.id,conversionRate:ye.conversionRate}))),console.log("Available units for product:",Q,fe),fe},oe=d.length,ae=d.reduce((Q,Y)=>Q+Y.quantity,0),te=Number(d.reduce((Q,Y)=>Q+Y.total,0).toFixed(2)),be=()=>{if(d.length===0){alert("No items to hold");return}n({title:"Hold Sale",message:"Are you sure you want to hold this sale for later?",onConfirm:ge}),t(!0)},ge=async()=>{try{if(d.length===0){alert("No items to hold");return}const Q={userId:N==null?void 0:N.id,items:d.map(ie=>({productId:parseInt(ie.id),quantity:ie.quantity,price:ie.price,unit:ie.unit,baseUnits:ie.baseUnits})),totalAmount:d.reduce((ie,fe)=>ie+fe.total,0),saleType:"RETAIL",status:"held"},Y=await me("/api/held-sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!Y.ok){if(Y.status===401){k("/login");return}const ie=await Y.json();throw new Error(ie.message||"Failed to hold sale")}re(),alert("Sale held successfully"),I()}catch(Q){console.error("Error holding sale:",Q),alert("Failed to hold sale: "+(Q instanceof Error?Q.message:"Unknown error"))}},je=()=>{if(d.length===0){alert("No items to save");return}n({title:"Complete Sale",message:"Are you sure you want to complete this sale?",onConfirm:Se}),t(!0)},Se=async()=>{try{if(d.length===0){alert("No items to save");return}const Q=d.reduce((Re,Te)=>Re+Te.total,0);if(typeof Q!="number"||Q<=0)throw new Error("Invalid total amount");if(!await $(d))return;const ie={userId:N==null?void 0:N.id,items:d.map(Re=>({productId:parseInt(Re.id),quantity:Number(Re.quantity),price:Number(Re.price),unit:String(Re.unit),baseUnits:Number(Re.baseUnits)})),totalAmount:Number(te),paymentMethod:C,saleType:"RETAIL",isCreditSale:!1,creditPercentage:null,status:"completed"},fe=await me("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!fe.ok){if(fe.status===401){k("/login");return}const Re=await fe.json();throw new Error(Re.message||"Failed to save sale")}const ye=await fe.json();console.log("Sale saved successfully:",ye),We.displayTotal(te).catch(Re=>console.error("Failed to update VFD display:",Re)),setTimeout(()=>{re()},2e3),alert("Sale completed and saved successfully"),setTimeout(()=>{window.location.reload()},2e3)}catch(Q){console.error("Error completing sale:",Q),Q instanceof Error&&Q.message.includes("Stock update failed:")?alert(Q.message):alert("Failed to complete sale: "+(Q instanceof Error?Q.message:"Unknown error"))}},Ee=async Q=>{try{if(d.length===0){alert("No items to print");return}if(!await $(d))return;const ie={userId:N==null?void 0:N.id,items:d.map(Ue=>({productId:parseInt(Ue.id),quantity:Number(Ue.quantity),price:Number(Ue.price),unit:String(Ue.unit),baseUnits:Number(Ue.baseUnits)})),totalAmount:Number(te),paymentMethod:C,saleType:"RETAIL",isCreditSale:!1,creditPercentage:null,status:"completed"},fe=await me("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!fe.ok){if(fe.status===401){k("/login");return}const Ue=await fe.json();throw new Error(Ue.message||"Failed to save sale")}const ye=await fe.json();console.log("Sale saved successfully:",ye),We.displayTotal(te).catch(Ue=>console.error("Failed to update VFD display:",Ue));const Re={type:Q,items:d.map(Ue=>({id:Ue.id,name:Ue.name,price:Number(Ue.price),quantity:Number(Ue.quantity),total:Number(Ue.total),unit:Ue.unit})),totalAmount:Number(te),totalItems:Number(ae),customer:void 0,paymentMethod:C,creditPercentage:0,saleId:ye.id},Te=Q==="invoice"?"qz.invoicePrinter":"qz.receiptPrinter",pe=localStorage.getItem(Te)||void 0;let Ae=!1;const He={...Re,salesperson:N?{name:N.name}:void 0};if((localStorage.getItem("qz.printMode")==="browser"?"browser":"silent")==="silent"&&pe)try{Ae=Q==="invoice"?await Fi(He,pe):await Ui(He,pe)}catch(Ue){console.warn("Silent QZ printing failed, falling back:",Ue),Ae=!1}Ae||await Da(He),re(),alert("Sale completed and printed successfully")}catch(Y){console.error("Error during print process:",Y),alert("Failed to complete print process: "+(Y instanceof Error?Y.message:"Unknown error"))}},Oe=()=>{if(d.length===0){re();return}n({title:"Clear Sale",message:"Are you sure you want to clear all items? This action cannot be undone.",onConfirm:re}),t(!0)},re=()=>{f([]),o(""),m(!1),w(null),localStorage.removeItem("retailCurrentSale"),We.displayWelcome().catch(Q=>console.error("Failed to update VFD display:",Q)),b.current&&b.current.focus()};return g.useEffect(()=>{const Q=Y=>{setTimeout(()=>{v.current&&!v.current.contains(Y.target)&&u(!1)},100)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Retail Point of Sale"}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsx("div",{className:"px-8 py-2 rounded-lg border border-blue-300 bg-blue-50 text-blue-700 font-medium",children:"Retail Pricing Only"})})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.jsx("div",{ref:v,className:"relative",children:s.jsx("div",{className:"flex gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsx("input",{type:"text",ref:b,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Search products...",value:a,onChange:O,onFocus:R,onKeyDown:z}),c&&a.trim().length>0&&D.length>0&&s.jsx("div",{ref:S,className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:D.map((Q,Y)=>s.jsx("div",{className:`px-4 py-3 cursor-pointer border-b border-gray-100 dark:border-gray-700 last:border-b-0 hover:bg-gray-50 dark:hover:bg-gray-700 ${Y===L?"bg-blue-50 dark:bg-blue-900":""}`,onClick:()=>V(Q),children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:Q.name}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Stock: ",Q.stock," ",Q.baseUnit.name,"(s)"]})]}),s.jsxs("div",{className:"text-right ml-4",children:[s.jsxs("div",{className:"font-bold text-green-600 dark:text-green-400",children:["",q(Q).toFixed(2)]}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["per ",Q.baseUnit.name]})]})]})},Q.id))})]})})}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(Q=>s.jsxs("tr",{onClick:()=>X(Q),className:"hover:bg-gray-50 cursor-pointer",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.name})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",Q.price.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{ref:Y=>j.current[Q.id]=Y,type:"number",min:"1",className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:Q.quantity.toString(),value:E[Q.id]||"",onChange:Y=>W(Q.id,Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&F(Q.id,Y.target.value)},onBlur:Y=>{Y.target.value&&F(Q.id,Y.target.value)}}),s.jsxs("span",{className:"text-sm text-gray-500",children:["(",Q.quantity,")"]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("button",{onClick:Y=>{Y.stopPropagation(),w(Q.id),m(!0)},className:"text-sm text-blue-600 hover:text-blue-800 underline",children:Q.unit})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["",Q.total.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsx("button",{onClick:Y=>{Y.stopPropagation(),J(Q.id)},className:"text-red-600 hover:text-red-900",children:s.jsx(br,{className:"w-4 h-4"})})})]},Q.id))})]})})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Number of Items:"}),s.jsx("span",{className:"font-medium",children:oe})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Total Quantity:"}),s.jsx("span",{className:"font-medium",children:ae})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),s.jsx("span",{className:"font-medium px-3 py-1 bg-green-100 text-green-800 rounded",children:"CASH"})]})}),s.jsxs("div",{className:"flex justify-between items-center text-xl font-semibold border-t pt-4",children:[s.jsx("span",{children:"Final Total:"}),s.jsxs("span",{className:"text-green-600",children:["",te.toFixed(2)]})]}),s.jsxs("div",{className:"mt-4 flex justify-end space-x-4",children:[s.jsx("button",{onClick:Oe,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear"}),s.jsxs("button",{onClick:be,className:"px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 flex items-center",children:[s.jsx(zh,{className:"w-4 h-4 mr-2"}),"Hold Sale"]}),s.jsxs("button",{onClick:je,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center",children:[s.jsx(Ci,{className:"w-4 h-4 mr-2"}),"Save Sale"]}),s.jsxs("button",{onClick:()=>Ee("receipt"),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[s.jsx(Zr,{className:"w-4 h-4 mr-2"}),"Print Receipt & Save"]})]})]})})]}),s.jsx(Hm,{isOpen:y,onClose:()=>m(!1),onSelect:se,units:x?G(x):[]}),s.jsx(r1,{isOpen:e,onClose:()=>t(!1),onConfirm:()=>{r&&(r.onConfirm(),t(!1))},title:(r==null?void 0:r.title)||"",message:(r==null?void 0:r.message)||""})]})},Qhe=()=>{const e=yt(),{setCurrentUser:t}=Ai(),[r,n]=g.useState({name:"",password:""}),[a,o]=g.useState(""),[i,l]=g.useState(!1),[c,u]=g.useState(!1);g.useEffect(()=>{new URLSearchParams(window.location.search).get("reason")==="backend-change"?o(" Backend server changed - authentication required. This happens when switching between localhost and network deployment modes."):Zu()?o(" Backend server changed - please login again to continue."):(sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),localStorage.removeItem("user"))},[]);const d=async f=>{f.preventDefault(),o(""),l(!0);try{await xb(),console.log("Sending login request with data:",{name:r.name,password:"***"});const p=await me("/api/auth/login",{method:"POST",body:JSON.stringify(r)});console.log("Response status:",p.status);const h=await p.json();if(console.log("Response data:",h),!p.ok){const x=h.message||`Login failed with status ${p.status}`;throw console.error("Login error details:",{status:p.status,data:h}),new Error(x)}if(!h.user)throw new Error("No user data received");t(h.user,h.token);const m={ADMIN:"/dashboard",USER:"/pos"}[h.user.role]||"/pos";e(m,{replace:!0})}catch(p){console.error("Login error:",p),o(p instanceof Error?p.message:"Login failed")}finally{l(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
          @keyframes fadeIn {
            0% {
              opacity: 0;
              transform: translateY(20px);
            }
            100% {
              opacity: 1;
              transform: translateY(0);
            }
          }
          .fade-in {
            animation: fadeIn 0.8s ease-out;
          }
          @keyframes float {
            0%, 100% {
              transform: translateY(0px);
            }
            50% {
              transform: translateY(-10px);
            }
          }
          @keyframes slideRight {
            0% {
              transform: translateX(-100px);
              opacity: 0;
            }
            50% {
              opacity: 1;
            }
            100% {
              transform: translateX(100vw);
              opacity: 0;
            }
          }
          @keyframes pulse {
            0%, 100% {
              opacity: 0.3;
            }
            50% {
              opacity: 0.8;
            }
          }
          .float {
            animation: float 3s ease-in-out infinite;
          }
          .float-delay {
            animation: float 3s ease-in-out infinite;
            animation-delay: 1.5s;
          }
          .slide-right {
            animation: slideRight 15s linear infinite;
          }
          .pulse-icon {
            animation: pulse 2s ease-in-out infinite;
          }
        `}),s.jsxs("div",{className:"theme-light min-h-screen flex items-center justify-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800"}),s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"absolute top-20 left-10 text-white/20 float",children:s.jsx(Vh,{className:"w-8 h-8"})}),s.jsx("div",{className:"absolute top-40 right-20 text-white/15 float-delay",children:s.jsx(n2,{className:"w-6 h-6"})}),s.jsx("div",{className:"absolute top-32 left-1/4 text-white/20 pulse-icon",children:s.jsx(qh,{className:"w-7 h-7"})}),s.jsx("div",{className:"absolute bottom-40 right-1/4 text-white/15 float",children:s.jsx(r5,{className:"w-8 h-8"})}),s.jsx("div",{className:"absolute top-60 right-10 text-white/20 float-delay",children:s.jsx(No,{className:"w-6 h-6"})}),s.jsx("div",{className:"absolute bottom-32 left-16 text-white/15 pulse-icon",children:s.jsx(x5,{className:"w-7 h-7"})}),s.jsx("div",{className:"absolute top-1/3 right-1/3 text-white/10 float",children:s.jsx(o5,{className:"w-5 h-5"})}),s.jsx("div",{className:"absolute bottom-1/3 left-1/3 text-white/15 float-delay",children:s.jsx(sp,{className:"w-6 h-6"})}),s.jsx("div",{className:"absolute top-1/2 left-8 text-white/20 pulse-icon",children:s.jsx(y0,{className:"w-7 h-7"})}),s.jsx("div",{className:"absolute bottom-20 right-12 text-white/15 float",children:s.jsx(N5,{className:"w-6 h-6"})}),s.jsx("div",{className:"absolute top-1/4 text-white/10 slide-right",children:s.jsx(No,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='7' cy='7' r='1'/%3E%3Ccircle cx='53' cy='7' r='1'/%3E%3Ccircle cx='30' cy='30' r='1'/%3E%3Ccircle cx='7' cy='53' r='1'/%3E%3Ccircle cx='53' cy='53' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,backgroundSize:"60px 60px"}})}),s.jsxs("div",{className:"max-w-md w-full space-y-6 bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-gray-200 relative z-10 mx-4 fade-in",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-2",children:s.jsx("img",{src:"/apexlink-logo.svg",alt:"Apexlink Logo",className:"w-12 h-12"})}),s.jsx("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"Apexlink POS"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[a&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded relative",role:"alert",children:s.jsx("span",{className:"block sm:inline",children:a})}),s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"sr-only",children:"Username"}),s.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"off",required:!0,className:"appearance-none relative block w-full px-4 py-3 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-lg mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150 ease-in-out sm:text-sm",placeholder:"Username",value:r.name,onChange:f=>n({...r,name:f.target.value})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full px-4 py-3 border border-gray-300 placeholder-gray-400 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150 ease-in-out sm:text-sm",placeholder:"Password",value:r.password,onChange:f=>n({...r,password:f.target.value})}),s.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 focus:outline-none",children:c?s.jsx(au,{className:"w-5 h-5"}):s.jsx(So,{className:"w-5 h-5"})})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transform transition duration-150 ease-in-out hover:scale-[1.02] active:scale-[0.98] mt-6",children:i?s.jsx(mr,{className:"animate-spin h-5 w-5"}):"Sign in"})})]})]})]})]})};function Khe(){const[e,t]=g.useState([]),[r,n]=g.useState(""),[a,o]=g.useState(!1),[i,l]=g.useState([]),[c,u]=g.useState([]),[d]=g.useState([]),[f,p]=g.useState(""),[h,y]=g.useState(""),[m,x]=g.useState(new Date),[w,v]=g.useState("PENDING"),[b,j]=g.useState(1),[S,k]=g.useState(1),[N,P]=g.useState(!1),C=g.useRef(null),E=g.useRef(null),_=yt();g.useEffect(()=>{(async()=>{P(!0);try{const[F,H]=await Promise.all([fetch("/api/suppliers",{credentials:"include"}),fetch(`/api/products?page=${b}&limit=50${r?`&search=${encodeURIComponent(r)}`:""}`,{credentials:"include"})]);if(!F.ok)throw new Error(`Failed to fetch suppliers: ${F.status} ${F.statusText}`);if(!H.ok)throw new Error(`Failed to fetch products: ${H.status} ${H.statusText}`);const X=await F.json(),se=await H.json();if(!Array.isArray(X))throw new Error("Invalid suppliers data format: expected an array");if(!se||!Array.isArray(se.products))throw new Error("Invalid products data format: expected products array in response");u(X),l(se.products),k(se.totalPages)}catch(F){console.error("Error fetching data:",F),alert(F instanceof Error?F.message:"An unexpected error occurred while fetching data")}finally{P(!1)}})()},[b,r]),g.useEffect(()=>{const W=F=>{C.current&&!C.current.contains(F.target)&&o(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const L=i.filter(W=>W.name.toLowerCase().includes(r.toLowerCase())),U=W=>{n(W),o(!0)},D=(W,F,H,X)=>{const se=W*F,G=se*H/100,oe=se*X/100;return se+G-oe},I=W=>{const F=e.findIndex(H=>H.productId===W.id);if(F!==-1){const H=[...e];H[F].quantity+=1,H[F].subtotal=H[F].quantity*H[F].unitPrice,H[F].totalPrice=D(H[F].quantity,H[F].unitPrice,H[F].tax,H[F].discount),t(H)}else{const H={productId:W.id,name:W.name,quantity:1,stock:W.stock,unitPrice:Number(W.purchasePrice),tax:0,discount:0,subtotal:Number(W.purchasePrice),totalPrice:Number(W.purchasePrice)};t([...e,H])}n(""),o(!1),E.current&&E.current.focus()},A=(W,F)=>{const H=[...e];H[W].discount=F===""?0:parseFloat(F),H[W].totalPrice=D(H[W].quantity,H[W].unitPrice,H[W].tax,H[W].discount),t(H)},$=(W,F)=>{const H=[...e];H[W].tax=F===""?0:parseFloat(F),H[W].totalPrice=D(H[W].quantity,H[W].unitPrice,H[W].tax,H[W].discount),t(H)},O=W=>{const F=e.filter((H,X)=>X!==W);t(F)},R=(W,F)=>{const H=Math.max(1,parseInt(F)||0),X=[...e];X[W]={...X[W],quantity:H,subtotal:H*X[W].unitPrice,totalPrice:D(H,X[W].unitPrice,X[W].tax,X[W].discount)},t(X)},q=(W,F)=>{const H=Math.max(0,parseFloat(F)||0),X=[...e];X[W]={...X[W],unitPrice:H,subtotal:X[W].quantity*H,totalPrice:D(X[W].quantity,H,X[W].tax,X[W].discount)},t(X)},V=W=>{W.key==="Enter"&&L.length>0&&I(L[0])},z=()=>e.reduce((W,F)=>{const H=(F.subtotal-F.discount)*(1+F.tax/100);return W+H},0),J=async()=>{if(!h){alert("Please select a supplier");return}if(e.length===0){alert("Please add at least one item");return}const W=z(),F={date:m.toISOString(),supplierId:parseInt(h),warehouseId:parseInt(f),status:w,items:e.map(H=>({productId:H.productId,quantity:H.quantity,unitPrice:H.unitPrice,tax:H.tax,discount:H.discount,subtotal:H.subtotal})),totalTax:e.reduce((H,X)=>H+X.subtotal*(X.tax/100),0),totalDiscount:e.reduce((H,X)=>H+(X.discount||0),0),totalAmount:W,amountDue:W,amountPaid:0};try{const H=await fetch("/api/purchases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F),credentials:"include"});if(!H.ok)throw new Error(`Failed to create purchase: ${H.status} ${H.statusText}`);localStorage.removeItem("purchaseItems"),window.location.href="/purchases"}catch(H){console.error("Error creating purchase:",H),alert(H instanceof Error?H.message:"An unexpected error occurred while creating the purchase")}};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>_("/purchases"),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[s.jsx(Uh,{className:"h-5 w-5"}),"Back"]}),s.jsx("span",{className:"text-gray-400",children:"|"}),s.jsx("h1",{className:"text-2xl font-semibold",children:"Create Purchase"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:s.jsxs("div",{className:"grid gap-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date *"}),s.jsx("input",{type:"date",value:m.toISOString().split("T")[0],onChange:W=>x(new Date(W.target.value)),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status *"}),s.jsxs("select",{value:w,onChange:W=>v(W.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"PENDING",children:"PENDING"}),s.jsx("option",{value:"RECEIVED",children:"RECEIVED"}),s.jsx("option",{value:"CANCELLED",children:"CANCELLED"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Supplier *"}),s.jsxs("select",{value:h,onChange:W=>y(W.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Choose Supplier"}),c.map(W=>s.jsx("option",{value:W.id.toString(),children:W.name},W.id))]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Warehouse *"}),s.jsxs("select",{value:f,onChange:W=>p(W.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Choose Warehouse"}),d.map(W=>s.jsx("option",{value:W.id.toString(),children:W.name},W.id))]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",ref:C,children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product"}),s.jsxs("div",{className:"relative",children:[s.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{ref:E,type:"text",placeholder:"Scan/Search Product by Code Or Name",value:r,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:W=>U(W.target.value),onKeyDown:V}),N&&s.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center",children:s.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 rounded-full border-t-transparent"})}),a&&r&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white shadow-lg max-h-60 rounded-md py-1 text-base overflow-auto focus:outline-none sm:text-sm",children:L.length>0?L.map(W=>s.jsxs("div",{className:"cursor-pointer hover:bg-gray-100 px-4 py-2",onClick:()=>I(W),children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-medium",children:W.name}),s.jsxs("span",{className:"text-gray-500",children:["Stock: ",W.stock]})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Price: $",W.purchasePrice]})]},W.id)):s.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No products found"})})]})]}),s.jsxs("div",{className:"border rounded-lg p-4 overflow-x-auto",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order items *"}),s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Unit Cost"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tax"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subtotal"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"px-6 py-4 text-center text-gray-500",children:"No data Available"})}):e.map((W,F)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:String(F+1).padStart(4,"0")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:W.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"number",min:"0",step:"0.01",value:W.unitPrice,onChange:H=>q(F,H.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded-md"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:W.stock}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"number",min:"1",value:W.quantity,onChange:H=>R(F,H.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded-md"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"number",min:"0",value:W.discount||"",onChange:H=>A(F,H.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded-md"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"number",min:"0",max:"100",value:W.tax||"",onChange:H=>$(F,H.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded-md"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",W.subtotal]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("button",{onClick:()=>O(F),className:"text-red-600 hover:text-red-900",children:s.jsx(Dt,{className:"h-5 w-5"})})})]},F))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsxs("div",{className:"w-1/3 space-y-4 bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Order Tax"}),s.jsxs("span",{className:"font-medium",children:["",e.reduce((W,F)=>W+F.subtotal*(F.tax/100),0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Order Discount"}),s.jsxs("span",{className:"font-medium",children:["",e.reduce((W,F)=>W+F.discount,0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[s.jsx("span",{children:"Grand Total"}),s.jsxs("span",{children:["",z().toFixed(2)]})]})]}),s.jsx("button",{onClick:J,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 h-fit",children:"Submit Purchase"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",b," of ",S]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>j(W=>Math.max(W-1,1)),disabled:b===1,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:"Previous"}),s.jsx("button",{onClick:()=>j(W=>Math.min(W+1,S)),disabled:b===S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:"Next"})]})]})]})})]})}function Ghe(){var i,l,c;const{id:e}=Mh(),t=yt(),[r,n]=g.useState(null),[a,o]=g.useState(!0);return g.useEffect(()=>{(async()=>{try{const d=await fetch(`/api/purchases/${e}`,{credentials:"include"});if(d.status===401){t("/login");return}if(!d.ok)throw new Error(`Failed to fetch purchase: ${d.status} ${d.statusText}`);const f=await d.json();if(console.log("Full API Response:",f),!f||typeof f!="object")throw new Error("Invalid response format");(!Array.isArray(f.purchaseItems)||f.purchaseItems.length===0)&&console.error("No purchase items found in response");const p={...f,items:Array.isArray(f.purchaseItems)?f.purchaseItems.map(h=>({id:h.id,product:h.product,quantity:typeof h.quantity=="string"?parseFloat(h.quantity):h.quantity,unitPrice:typeof h.unitPrice=="string"?parseFloat(h.unitPrice):h.unitPrice,tax:typeof h.tax=="string"?parseFloat(h.tax):h.tax,discount:typeof h.discount=="string"?parseFloat(h.discount):h.discount,subtotal:(()=>{const y=Number(typeof h.quantity=="string"?parseFloat(h.quantity):h.quantity)||0,m=Number(typeof h.unitPrice=="string"?parseFloat(h.unitPrice):h.unitPrice)||0,x=Number(typeof h.tax=="string"?parseFloat(h.tax):h.tax)||0,w=Number(typeof h.discount=="string"?parseFloat(h.discount):h.discount)||0,v=y*m,b=v*(w/100),j=(v-b)*(x/100);return Number((v-b+j).toFixed(2))||0})()})):[]};console.log("Purchase data transformed:",p),console.log("Raw API Response:",f),n(p)}catch(d){console.error("Error fetching purchase details:",d),alert(d instanceof Error?d.message:"An unexpected error occurred")}finally{o(!1)}})()},[e,t]),a?s.jsx("div",{children:"Loading..."}):r?(console.log("Rendering purchase:",r),console.log("Rendering items:",r.items),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>t("/purchases"),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[s.jsx(Uh,{className:"h-5 w-5"}),"Back"]}),s.jsx("span",{className:"text-gray-400",children:"|"}),s.jsx("h1",{className:"text-2xl font-semibold",children:"Purchase Details"})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Reference"}),s.jsx("p",{className:"font-medium",children:r.reference})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),s.jsx("p",{className:"font-medium",children:new Date(r.createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Supplier"}),s.jsx("p",{className:"font-medium",children:((i=r.supplier)==null?void 0:i.name)||"N/A"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Warehouse"}),s.jsx("p",{className:"font-medium",children:((l=r.warehouse)==null?void 0:l.name)||"N/A"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),s.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full
              ${r.status==="Received"?"bg-green-100 text-green-800":r.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:r.status})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Payment Status"}),s.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full
              ${r.paymentStatus==="Paid"?"bg-green-100 text-green-800":r.paymentStatus==="Partial"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:r.paymentStatus})]})]}),s.jsx("div",{className:"border rounded-lg p-4 overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tax"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subtotal"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(c=r.items)==null?void 0:c.map((u,d)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:String(d+1).padStart(4,"0")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.product.name}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",(u.unitPrice??0).toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.quantity??0}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",(u.discount??0).toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[(u.tax??0).toFixed(2),"%"]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",(u.subtotal??0).toFixed(2)]})]},u.id))})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"w-1/3 space-y-4 bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Order Tax"}),s.jsxs("span",{className:"font-medium",children:["$",(r.totalTax??0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Order Discount"}),s.jsxs("span",{className:"font-medium",children:["$",(r.totalDiscount??0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Paid Amount"}),s.jsxs("span",{className:"font-medium",children:["$",(r.paidAmount??0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Due Amount"}),s.jsxs("span",{className:"font-medium",children:["$",(r.dueAmount??0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[s.jsx("span",{children:"Grand Total"}),s.jsxs("span",{children:["$",(Number(r.totalAmount)??0).toFixed(2)]})]})]})})]})]})):s.jsx("div",{children:"Purchase not found"})}const Zhe=()=>{var I;const{id:e}=Mh(),t=yt(),[r,n]=g.useState(""),[a,o]=g.useState(!1),[i,l]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState(!0),[p,h]=g.useState(null),y=g.useRef(null),m=g.useRef(null),[x,w]=g.useState(""),[v,b]=g.useState("PENDING"),[j,S]=g.useState("UNPAID");g.useEffect(()=>{(async()=>{try{const[$,O]=await Promise.all([fetch(`/api/purchases/${e}`,{credentials:"include"}),fetch("/api/products",{credentials:"include"})]);if(!$.ok||!O.ok){if($.status===401||O.status===401){t("/login");return}throw new Error(`Failed to fetch data: ${$.status} ${O.status}`)}const[R,q]=await Promise.all([$.json(),O.json()]);if(!R)throw new Error("Purchase data is empty");const V={...R,purchaseItems:R.purchaseItems||[]};h(V),u(q),w(V.notes||""),b(V.status||"PENDING"),S(V.paymentStatus||"UNPAID");const z=V.purchaseItems.map(J=>({id:J.id,productId:J.productId,unitPrice:Number(J.unitPrice),quantity:Number(J.quantity),tax:Number(J.tax||0),discount:Number(J.discount||0),totalPrice:D(Number(J.quantity),Number(J.unitPrice),Number(J.tax||0),Number(J.discount||0)),notes:J.notes,product:{id:J.product.id.toString(),name:J.product.name}}));l(z)}catch($){console.error("Error fetching data:",$),alert($ instanceof Error?$.message:"Failed to fetch purchase data")}finally{f(!1)}})()},[e,t]);const k=c.filter(A=>A.name.toLowerCase().includes(r.toLowerCase())),N=A=>{if(i.find(O=>O.productId===parseInt(A.id)))l(i.map(O=>O.productId===parseInt(A.id)?{...O,quantity:O.quantity+1,totalPrice:(O.quantity+1)*Number(O.unitPrice)}:O));else{if(!A){console.error("Error: product is undefined");return}l([...i,{id:`temp-${Date.now()}`,productId:parseInt(A.id),unitPrice:Number(A.purchasePrice),quantity:1,tax:0,discount:0,totalPrice:Number(A.purchasePrice),product:{id:A.id,name:A.name}}])}n(""),o(!1)},P=async()=>{var A;try{if(!p||!p.id){alert("Purchase not found"),t("/purchases");return}if(i.length===0){alert("No items to save");return}const $={supplierId:((A=p==null?void 0:p.supplier)==null?void 0:A.id)||null,status:v,paymentStatus:j,notes:x,items:i.map(q=>({productId:q.productId,quantity:q.quantity,unitPrice:q.unitPrice,totalPrice:q.quantity*q.unitPrice,notes:q.notes})),totalAmount:i.reduce((q,V)=>q+V.unitPrice*V.quantity,0)};console.log("Updating purchase with data:",$);const O=await fetch(`/api/purchases/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify($)});if(console.log("Update response status:",O.status),!O.ok){if(O.status===401){t("/login");return}let q="Failed to update purchase";try{const V=await O.json();console.log("Error response data:",V),q=V.message||q}catch{q=`Failed to update purchase: ${O.statusText}`}throw new Error(q)}const R=await O.json();console.log("Successfully updated purchase:",R),alert("Purchase updated successfully"),t("/purchases")}catch($){console.error("Error updating purchase:",$),alert($ instanceof Error?$.message:"An unexpected error occurred while updating the purchase")}},C=A=>{l(i.filter($=>$.id!==A))},E=(A,$)=>{const O=isNaN($)?0:$;l(i.map(R=>R.id===A?{...R,quantity:O,totalPrice:O*R.unitPrice}:R))},_=(A,$)=>{if($<=0){alert("Price must be greater than 0");return}l(i.map(O=>O.id===A?{...O,unitPrice:$,totalPrice:O.quantity*$}:O))},L=(A,$)=>{l(i.map(O=>O.id===A?{...O,tax:$,totalPrice:D(O.quantity,O.unitPrice,$,O.discount)}:O))},U=(A,$)=>{l(i.map(O=>O.id===A?{...O,discount:$,totalPrice:D(O.quantity,O.unitPrice,O.tax,$)}:O))},D=(A,$,O,R)=>{const q=A*$,V=q*O/100,z=q*R/100;return q+V-z};return g.useEffect(()=>{const A=$=>{y.current&&!y.current.contains($.target)&&o(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]),d?s.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:()=>t("/purchases"),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[s.jsx(Uh,{className:"h-5 w-5"}),"Back to Purchases"]}),s.jsx("span",{className:"text-gray-400",children:"|"}),s.jsx("h1",{className:"text-2xl font-semibold",children:"Edit Purchase"})]}),s.jsxs("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:[s.jsx(Ci,{className:"inline-block w-5 h-5 mr-2"}),"Save Changes"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reference"}),s.jsx("input",{type:"text",value:(p==null?void 0:p.reference)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier"}),s.jsx("input",{type:"text",value:((I=p==null?void 0:p.supplier)==null?void 0:I.name)||"N/A",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),s.jsx("input",{type:"text",value:new Date((p==null?void 0:p.createdAt)||"").toLocaleDateString(),disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-gray-100"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:v,onChange:A=>b(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"PENDING",children:"PENDING"}),s.jsx("option",{value:"RECEIVED",children:"RECEIVED"}),s.jsx("option",{value:"CANCELLED",children:"CANCELLED"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),s.jsxs("select",{value:j,onChange:A=>S(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"UNPAID",children:"UNPAID"}),s.jsx("option",{value:"PARTIALLY_PAID",children:"PARTIALLY PAID"}),s.jsx("option",{value:"PAID",children:"PAID"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:x,onChange:A=>w(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]})]}),s.jsxs("div",{className:"mb-6",ref:y,children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add Products"}),s.jsxs("div",{className:"relative",children:[s.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{ref:m,type:"text",placeholder:"Search products by name",value:r,onChange:A=>n(A.target.value),onFocus:()=>o(!0),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),a&&r&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white shadow-lg max-h-60 rounded-md py-1 text-base overflow-auto focus:outline-none sm:text-sm",children:k.length>0?k.map(A=>s.jsxs("div",{className:"cursor-pointer hover:bg-gray-100 px-4 py-2",onClick:()=>N(A),children:[s.jsx("div",{className:"flex justify-between",children:s.jsx("span",{className:"font-medium",children:A.name})}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Price: $",A.purchasePrice]})]},A.id)):s.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:"No products found"})})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tax (%)"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount (%)"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length>0?i.map(A=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.product.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("input",{type:"number",min:"0",step:"1",value:A.quantity,onChange:$=>E(A.id,parseFloat($.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("input",{type:"number",min:"0",step:"0.01",value:A.unitPrice,onChange:$=>_(A.id,parseFloat($.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:A.tax,onChange:$=>L(A.id,parseFloat($.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:A.discount,onChange:$=>U(A.id,parseFloat($.target.value)),className:"w-24 px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",A.totalPrice.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("button",{onClick:()=>C(A.id),className:"text-red-600 hover:text-red-900",children:s.jsx(br,{className:"h-5 w-5"})})})]},A.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center",children:"No items added yet"})})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-gray-50 rounded-md",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Number of Items"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:i.length})]}),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-md",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Total Quantity"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:i.reduce((A,$)=>A+$.quantity,0)})]}),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-md",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Total Amount"}),s.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["",i.reduce((A,$)=>A+$.totalPrice,0).toFixed(2)]})]})]})})]})]})},Xhe=async()=>{try{const e=await fetch("/api/permissions/roles",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch roles");return{success:!0,data:await e.json()}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to fetch roles"}}},Yhe=async(e,t,r)=>{try{const n=await fetch("/api/permissions/roles",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e,description:t,permissions:r})});if(!n.ok)throw new Error("Failed to create role");return{success:!0,data:await n.json()}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to create role"}}},Jhe=async e=>{try{if(!(await fetch(`/api/permissions/roles/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error("Failed to delete role");return{success:!0}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to delete role"}}},eme=async()=>{try{const e=await fetch("/api/permissions/permissions",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch permission groups");return{success:!0,data:await e.json()}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Failed to fetch permission groups"}}},CE=()=>{const e=yt(),[t,r]=g.useState(""),[n,a]=g.useState(!1),[o,i]=g.useState(null),[l,c]=g.useState([{id:"1",name:"Owner",description:"Owner"}]);g.useEffect(()=>{(async()=>{a(!0);const p=await Xhe();p.success?c(p.data):i(p.error||"Failed to load roles"),a(!1)})()},[]);const u=async f=>{if(window.confirm("Are you sure you want to delete this role?")){const p=await Jhe(f);p.success?c(l.filter(h=>h.id!==f)):i(p.error||"Failed to delete role")}},d=l.filter(f=>f.name.toLowerCase().includes(t.toLowerCase())||(f.description||"").toLowerCase().includes(t.toLowerCase()));return s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-2xl font-semibold",children:"Group Permissions"})}),s.jsxs("div",{className:"bg-gray-50 rounded-lg shadow",children:[s.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-gray-200",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(dn.Search,{className:"h-5 w-5 text-gray-500"})}),s.jsx("input",{type:"text",placeholder:"Search this table",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:t,onChange:f=>r(f.target.value)})]}),s.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:()=>e("/create-permission"),children:"Create"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Action"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Loading..."})}):o?s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-red-500",children:o})}):d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No roles found"})}):d.map(f=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:f.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:f.description}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-900",onClick:()=>e(`/edit-permission/${f.id}`),children:s.jsx(dn.Edit2,{className:"h-5 w-5"})}),s.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>u(f.id),children:s.jsx(dn.X,{className:"h-5 w-5"})})]})})]},f.id))})]})}),s.jsx("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50 sm:px-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"Rows per page:"}),s.jsxs("select",{className:"border border-gray-300 rounded-md text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",defaultValue:"10",children:[s.jsx("option",{value:"10",children:"10"}),s.jsx("option",{value:"25",children:"25"}),s.jsx("option",{value:"50",children:"50"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx("span",{children:"1 - 1 of 1"}),s.jsx("button",{className:"px-2 py-1 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent",disabled:!0,children:"prev"}),s.jsx("button",{className:"px-2 py-1 rounded-md hover:bg-gray-200 disabled:opacity-50 disabled:hover:bg-transparent",disabled:!0,children:"next"})]})]})})]})]})},tme=()=>{const e=yt(),[t,r]=g.useState(""),[n,a]=g.useState(""),[o,i]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState([]);g.useEffect(()=>{(async()=>{try{const h=await eme();if(h.success&&h.data){const y=h.data.map(m=>{var x;return{name:m.name,permissions:((x=m.permissions)==null?void 0:x.map(w=>({id:w.id,name:w.name,checked:!1})))||[]}});d(y)}else c(h.error||"Failed to load permission groups")}catch(h){console.error("Error loading permission groups:",h),c("Failed to load permission groups")}})()},[]);const f=async p=>{p.preventDefault(),i(!0),c(null);const h=u.flatMap(y=>y.permissions.filter(m=>m.checked).map(m=>m.id)).filter(y=>y!==void 0);try{const y=await Yhe(t,n,h);y.success?e("/group-permissions"):c(y.error||"Failed to create role")}catch(y){console.error("Error creating role:",y),c("An unexpected error occurred while creating the role")}finally{i(!1)}};return s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-2xl font-semibold",children:"Create Permission"})}),s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),s.jsx("input",{type:"text",id:"role",value:t,onChange:p=>r(p.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter Role Name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Role Description"}),s.jsx("input",{type:"text",id:"description",value:n,onChange:p=>a(p.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter Role Description"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Users management"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"users-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"users-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"users-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"users-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"users-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"users-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"users-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"users-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"users-view-all",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"users-view-all",className:"ml-2 block text-sm text-gray-900",children:"View all records of all Users"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Users Permissions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"permissions-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"permissions-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"permissions-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"permissions-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"permissions-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"permissions-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"permissions-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"permissions-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Products"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"products-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"products-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"products-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"products-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"products-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"products-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"products-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"products-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"products-barcode",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"products-barcode",className:"ml-2 block text-sm text-gray-900",children:"Barcode"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"products-category",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"products-category",className:"ml-2 block text-sm text-gray-900",children:"Category"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"products-unit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"products-unit",className:"ml-2 block text-sm text-gray-900",children:"Unit"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"products-import",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"products-import",className:"ml-2 block text-sm text-gray-900",children:"Import products"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"products-brand",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"products-brand",className:"ml-2 block text-sm text-gray-900",children:"Brand"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Adjustment"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"adjustment-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"adjustment-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"adjustment-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"adjustment-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"adjustment-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"adjustment-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"adjustment-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"adjustment-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Transfer"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"transfer-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"transfer-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"transfer-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"transfer-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"transfer-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"transfer-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"transfer-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"transfer-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Expenses"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"expenses-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"expenses-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"expenses-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"expenses-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"expenses-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"expenses-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"expenses-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"expenses-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Sales"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"sales-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"sales-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"sales-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"sales-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"sales-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"sales-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"sales-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"sales-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Purchases"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"purchases-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"purchases-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"purchases-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"purchases-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"purchases-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"purchases-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"purchases-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"purchases-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:"Quotations"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"quotations-view",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"quotations-view",className:"ml-2 block text-sm text-gray-900",children:"View"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"quotations-edit",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"quotations-edit",className:"ml-2 block text-sm text-gray-900",children:"Edit"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"quotations-create",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"quotations-create",className:"ml-2 block text-sm text-gray-900",children:"Create"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"quotations-delete",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"quotations-delete",className:"ml-2 block text-sm text-gray-900",children:"Delete"})]})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx("button",{type:"button",onClick:()=>e("/permissions"),className:"px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Create"})]})]})]})},rme=async()=>{try{const e=await me("/api/sales/today/summary");if(!e.ok){const r=await e.text();throw console.error("Summary API Error:",{status:e.status,statusText:e.statusText,errorText:r}),new Error(`HTTP error! status: ${e.status}`)}const t=await e.json();return console.log("Summary API Response:",t),t}catch(e){throw console.error("Error fetching today summary:",e),e}},dR=async(e,t)=>{try{const r=new Date().toISOString().split("T")[0],n=new Date(Date.now()-7*24*60*60*1e3).toISOString().split("T")[0],a=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0];let o="";e===n&&t===r?(o="/api/sales/weekly",console.log("Using weekly endpoint")):e===a&&t===r?(o="/api/sales/monthly",console.log("Using monthly endpoint")):(o=`/api/sales/daily-summary?startDate=${e}&endDate=${t}`,console.log("Using custom date range endpoint")),console.log(`Fetching data from: ${o}`);const i=await me(o);if(!i.ok){const c=await i.text();throw console.error("Summary API Error:",{status:i.status,statusText:i.statusText,errorText:c}),new Error(`HTTP error! status: ${i.status}`)}const l=await i.json();return console.log("Summary API Response:",l),l}catch(r){throw console.error("Error fetching date range summary:",r),r}},nme=async()=>{try{const e=await me("/api/sales/today/hourly");if(!e.ok){const r=await e.text();throw console.error("Hourly Sales API Error:",{status:e.status,statusText:e.statusText,errorText:r}),new Error(`HTTP error! status: ${e.status}`)}const t=await e.json();return console.log("Hourly Sales API Response:",t),t}catch(e){throw console.error("Error fetching today hourly sales:",e),e}},ame=async()=>{try{const e=await me("/api/sales/today/by-product");if(!e.ok){const r=await e.text();throw console.error("Product Sales API Error:",{status:e.status,statusText:e.statusText,errorText:r}),new Error(`HTTP error! status: ${e.status}`)}const t=await e.json();return console.log("Product Sales API Response:",t),t}catch(e){throw console.error("Error fetching today product sales:",e),e}},fR=async(e,t)=>{try{const r=await me(`/api/sales/by-product?startDate=${e}&endDate=${t}`);if(!r.ok){const a=await r.text();throw console.error("Product Sales API Error:",{status:r.status,statusText:r.statusText,errorText:a}),new Error(`HTTP error! status: ${r.status}`)}const n=await r.json();return console.log("Product Sales API Response:",n),n}catch(r){throw console.error("Error fetching product sales:",r),r}},ome=async()=>{try{const e=new Date().toISOString().split("T")[0],t=await me(`/api/sales/by-category?startDate=${e}&endDate=${e}`);if(!t.ok){const n=await t.text();throw console.error("Category Sales API Error:",{status:t.status,statusText:t.statusText,errorText:n}),new Error(`HTTP error! status: ${t.status}`)}const r=await t.json();return console.log("Category Sales API Response:",r),r}catch(e){throw console.error("Error fetching today category sales:",e),e}},pR=async(e,t)=>{try{const r=await me(`/api/sales/by-category?startDate=${e}&endDate=${t}`);if(!r.ok){const a=await r.text();throw console.error("Category Sales API Error:",{status:r.status,statusText:r.statusText,errorText:a}),new Error(`HTTP error! status: ${r.status}`)}const n=await r.json();return console.log("Category Sales API Response:",n),n}catch(r){throw console.error("Error fetching category sales:",r),r}},ime=async()=>{try{const e=await me("/api/sales/today/by-employee");if(!e.ok){const r=await e.text();throw console.error("Employee Sales API Error:",{status:e.status,statusText:e.statusText,errorText:r}),new Error(`HTTP error! status: ${e.status}`)}const t=await e.json();return console.log("Employee Sales API Response:",t),t}catch(e){throw console.error("Error fetching today employee sales:",e),e}},hR=async(e,t)=>{try{const r=await me(`/api/sales/by-employee?startDate=${e}&endDate=${t}`);if(!r.ok){const a=await r.text();throw console.error("Employee Sales API Error:",{status:r.status,statusText:r.statusText,errorText:a}),new Error(`HTTP error! status: ${r.status}`)}const n=await r.json();return console.log("Employee Sales API Response:",n),n}catch(r){throw console.error("Error fetching employee sales:",r),r}},sme=async()=>{try{const e=await me("/api/sales/today/by-customer");if(!e.ok){const r=await e.text();throw console.error("Customer Sales API Error:",{status:e.status,statusText:e.statusText,errorText:r}),new Error(`HTTP error! status: ${e.status}`)}const t=await e.json();return console.log("Customer Sales API Response:",t),t}catch(e){throw console.error("Error fetching today customer sales:",e),e}},mR=async(e,t)=>{try{const r=await me(`/api/sales/by-customer?startDate=${e}&endDate=${t}`);if(!r.ok){const a=await r.text();throw console.error("Customer Sales API Error:",{status:r.status,statusText:r.statusText,errorText:a}),new Error(`HTTP error! status: ${r.status}`)}const n=await r.json();return console.log("Customer Sales API Response:",n),n}catch(r){throw console.error("Error fetching customer sales:",r),r}};function lme(e){return typeof e=="object"&&e!==null&&"data"in e}const cme=()=>{const[e,t]=g.useState("daily"),[r,n]=g.useState(null),[a,o]=g.useState([]),[i,l]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[p,h]=g.useState([]),[y,m]=g.useState(!0),[x,w]=g.useState(null),v=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];if(g.useEffect(()=>{(async k=>{m(!0);try{let N,P;const C=new Date().toISOString().split("T")[0],E=new Date(Date.now()-7*24*60*60*1e3).toISOString().split("T")[0],_=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0];if(k==="daily"){const[L,U,D,I,A,$]=await Promise.all([rme(),nme(),ame(),ome(),ime(),sme()]);N=L,P=U,l(Array.isArray(D.data)?D.data:[]),u((Array.isArray(I.data)?I.data:[]).map(O=>({...O,name:O.categoryName,value:O.totalAmount}))),f(Array.isArray(A.data)?A.data:[]),h(Array.isArray($.data)?$.data:[])}else{const L=k==="weekly"?E:_,[U,D,I,A,$,O]=await Promise.all([dR(L,C),{data:[]},fR(L,C),pR(L,C),hR(L,C),mR(L,C)]);N=U,P=D,l(Array.isArray(I.data)?I.data:[]),u((Array.isArray(A.data)?A.data:[]).map(R=>({...R,name:R.categoryName,value:R.totalAmount}))),f(Array.isArray($.data)?$.data:[]),h(Array.isArray(O.data)?O.data:[])}if(N)if(k==="daily"){const L=N.data;n({totalSales:L.totalSales||0,totalRefunds:L.totalRefunds||0,refundAmount:L.refundAmount||0,netRevenue:L.netRevenue||0,date:new Date().toISOString(),transactionCount:L.transactionCount||0})}else{if(!N||!lme(N)){console.error("Invalid summary response format:",N),n({totalSales:0,totalRefunds:0,refundAmount:0,netRevenue:0,date:new Date().toISOString(),transactionCount:0});return}const L=N.data;if(typeof L!="object"||!L){console.error("Invalid response data format:",L);return}const U=L;n({totalSales:U.totalSales||0,totalRefunds:U.totalRefunds||0,refundAmount:U.refundAmount||0,netRevenue:U.netRevenue||0,transactionCount:U.transactionCount||0,date:new Date().toISOString(),dailyData:Array.isArray(U.dailyData)?U.dailyData:[]})}P!=null&&P.data&&o(P.data),w(null)}catch(N){console.error("Error details:",N),w(`Failed to fetch ${k} sales data. Please try again later.`)}finally{m(!1)}})(e)},[e]),y)return s.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."});if(x)return s.jsx("div",{className:"flex items-center justify-center h-screen text-red-600",children:x});if(!r)return s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No Data"}),s.jsx("p",{children:"No summary data available for the selected period."})]});const j=(()=>{if(e==="daily")return a.map(k=>({label:`${k.hour}:00`,value:k.totalAmount||0}));const S=r;if(!S.dailyData||!S.dailyData.length)return[];if(e==="weekly")return S.dailyData.map(k=>({label:new Date(k.date).toLocaleDateString(void 0,{weekday:"short"}),value:k.netRevenue||0}));{const k={};return S.dailyData.forEach(N=>{const P=new Date(N.date),E=`Week ${Math.ceil(P.getDate()/7)}`;k[E]=(k[E]||0)+(N.netRevenue||0)}),Object.entries(k).map(([N,P])=>({label:N,value:P}))}})();return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Sales Report"}),s.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[s.jsx("button",{type:"button",onClick:()=>t("daily"),className:`px-4 py-2 text-sm font-medium rounded-l-md border ${e==="daily"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Daily"}),s.jsx("button",{type:"button",onClick:()=>t("weekly"),className:`px-4 py-2 text-sm font-medium border-t border-b ${e==="weekly"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Weekly"}),s.jsx("button",{type:"button",onClick:()=>t("monthly"),className:`px-4 py-2 text-sm font-medium rounded-r-md border ${e==="monthly"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Monthly"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4",children:[e==="daily"?"Daily":e==="weekly"?"Weekly":"Monthly"," Summary"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Sales"}),s.jsxs("span",{className:"font-medium",children:["",((r==null?void 0:r.totalSales)??0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Refunds"}),s.jsxs("span",{className:"font-medium text-red-500",children:["-",((r==null?void 0:r.refundAmount)??0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between border-t pt-2",children:[s.jsx("span",{className:"text-gray-600 font-semibold",children:"Net Revenue"}),s.jsxs("span",{className:`font-medium ${((r==null?void 0:r.netRevenue)??0)>=0?"text-green-500":"text-red-500"}`,children:["",((r==null?void 0:r.netRevenue)??0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Period:"}),s.jsx("span",{className:"font-medium",children:e==="daily"&&(r!=null&&r.date)?new Date(r.date).toLocaleDateString():`Last ${e==="weekly"?"7":"30"} days`})]}),s.jsxs("div",{className:"flex justify-between items-center text-lg",children:[s.jsx("span",{className:"text-gray-600",children:"Transactions:"}),s.jsx("span",{className:"font-medium",children:(r==null?void 0:r.transactionCount)??0})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 md:col-span-2",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:e==="daily"?"Hourly Sales":`${e==="weekly"?"Daily":"Weekly"} Sales`}),s.jsx("div",{className:"h-64",children:j.length>0?s.jsxs(mse,{width:600,height:250,data:j,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(Pw,{strokeDasharray:"3 3"}),s.jsx(Il,{dataKey:"label"}),s.jsx($l,{}),s.jsx(Vr,{formatter:S=>`${Number(S).toFixed(2)}`}),s.jsx(ka,{}),s.jsx(ld,{type:"monotone",dataKey:"value",name:"Sales",stroke:"#8884d8"})]}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No sales data available for selected period"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top Products"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Revenue"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:i.slice(0,5).map((S,k)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.productName}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.quantity||0}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",(S.totalAmount||0).toFixed(2)]})]},k))})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Sales by Category"}),s.jsx("div",{className:"h-64",children:s.jsxs(Y_,{width:400,height:250,children:[s.jsx(da,{data:c,cx:200,cy:125,innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"totalAmount",nameKey:"categoryName",label:!0,children:c.map((S,k)=>s.jsx(td,{fill:v[k%v.length]},`cell-${k}`))}),s.jsx(Vr,{formatter:S=>`${Number(S).toFixed(2)}`}),s.jsx(ka,{})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Employee Performance"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sales"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Commission"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:d.slice(0,5).map((S,k)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.employeeName}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",(S.totalAmount||0).toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",((S.totalAmount||0)*.05).toFixed(2)]})]},k))})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top Customers"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purchases"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Spent"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Purchase"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:p.slice(0,5).map((S,k)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.customerName}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.totalPurchases||0}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["",(S.totalSpent||0).toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.lastPurchase?new Date(S.lastPurchase).toLocaleDateString():"N/A"})]},k))})]})})]})]})]})};function ume(){const[e,t]=g.useState(""),[r,n]=g.useState(""),[a,o]=g.useState(""),[i,l]=g.useState([]),c=[{value:"summary",label:"Summary Sales"},{value:"customer",label:"Customer Sales"},{value:"product",label:"Product Sales"},{value:"employee",label:"Employee Performance"},{value:"category",label:"Category Sales"}],[u,d]=g.useState(!1),[f,p]=g.useState(null),h=()=>{var k;if(i.length===0){alert("No data to print. Please generate a report first.");return}const m=window.open("","_blank");if(!m){alert("Please allow popups to print the report.");return}const x=((k=c.find(N=>N.value===a))==null?void 0:k.label)||"Report",w=`${e} to ${r}`;let v="",b="";const j={totalSales:0,totalRefunds:0,netRevenue:0,totalAmount:0,totalQuantity:0,recordCount:i.length};a==="summary"?(v=`
        <tr>
          <th>Date</th>
          <th>Total Sales</th>
          <th>Total Refunds</th>
          <th>Net Revenue</th>
        </tr>
      `,i.forEach(N=>{"netRevenue"in N&&(b+=`
            <tr>
              <td>${N.date?new Date(N.date).toLocaleDateString():"-"}</td>
              <td>{sale.totalSales.toFixed(2)}</td>
              <td>{sale.totalRefunds.toFixed(2)}</td>
              <td>{sale.netRevenue.toFixed(2)}</td>
            </tr>
          `,j.totalSales+=N.totalSales,j.totalRefunds+=N.totalRefunds,j.netRevenue+=N.netRevenue)})):a==="customer"?(v=`
        <tr>
          <th>Customer</th>
          <th>Total Spent</th>
          <th>Number of Sales</th>
          <th>Last Purchase</th>
        </tr>
      `,i.forEach(N=>{"customerName"in N&&(b+=`
            <tr>
              <td>${N.customerName}</td>
              <td>{sale.totalAmount.toFixed(2)}</td>
              <td>${N.numberOfSales}</td>
              <td>${N.lastPurchase?new Date(N.lastPurchase).toLocaleDateString():"-"}</td>
            </tr>
          `,j.totalAmount+=N.totalAmount,j.totalSales+=N.numberOfSales)})):a==="product"?(v=`
        <tr>
          <th>Product</th>
          <th>Quantity Sold</th>
          <th>Total Amount</th>
          <th>Number of Sales</th>
          <th>Salesperson</th>
        </tr>
      `,i.forEach(N=>{"productName"in N&&(b+=`
            <tr>
              <td>${N.productName}</td>
              <td>${N.quantity}</td>
              <td>{sale.totalAmount.toFixed(2)}</td>
              <td>${N.numberOfSales}</td>
              <td>${N.salesperson||"Unknown"}</td>
            </tr>
          `,j.totalAmount+=N.totalAmount,j.totalQuantity+=N.quantity,j.totalSales+=N.numberOfSales)})):a==="employee"?(v=`
        <tr>
          <th>Employee</th>
          <th>Total Sales</th>
          <th>Number of Sales</th>
        </tr>
      `,i.forEach(N=>{"employeeName"in N&&(b+=`
            <tr>
              <td>${N.employeeName}</td>
              <td>{sale.totalAmount.toFixed(2)}</td>
              <td>${N.numberOfSales}</td>
            </tr>
          `,j.totalAmount+=N.totalAmount,j.totalSales+=N.numberOfSales)})):a==="category"&&(v=`
        <tr>
          <th>Date</th>
          <th>Category</th>
          <th>Total Sales</th>
          <th>Items Sold</th>
        </tr>
      `,i.forEach(N=>{"categoryName"in N&&(b+=`
            <tr>
              <td>${new Date(N.date).toLocaleDateString()}</td>
              <td>${N.categoryName}</td>
              <td>{sale.totalAmount.toFixed(2)}</td>
              <td>${N.quantity}</td>
            </tr>
          `,j.totalAmount+=N.totalAmount,j.totalQuantity+=N.quantity)}));const S=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>${x} - ${w}</title>
          <style>
            @page {
              margin: 1in;
              size: A4;
            }
            
            body {
              font-family: 'Times New Roman', Times, serif;
              font-size: 12pt;
              line-height: 1.5;
              color: #000;
              margin: 0;
              padding: 0;
            }
            
            .header {
              text-align: center;
              margin-bottom: 30px;
              border-bottom: 2px solid #000;
              padding-bottom: 15px;
            }
            
            .company-name {
              font-size: 18pt;
              font-weight: bold;
              margin-bottom: 5px;
            }
            
            .report-title {
              font-size: 16pt;
              font-weight: bold;
              margin-bottom: 5px;
            }
            
            .date-range {
              font-size: 12pt;
              margin-bottom: 10px;
            }
            
            .generated-date {
              font-size: 10pt;
              color: #666;
            }
            
            .content {
              margin-top: 20px;
            }
            
            table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 20px;
              font-size: 11pt;
            }
            
            th, td {
              border: 1px solid #000;
              padding: 8px;
              text-align: left;
            }
            
            th {
              background-color: #f0f0f0;
              font-weight: bold;
              text-align: center;
            }
            
            td {
              vertical-align: top;
            }
            
            .summary {
              margin-top: 30px;
              padding-top: 15px;
              border-top: 1px solid #ccc;
            }
            
            .summary-item {
              margin-bottom: 5px;
            }
            
            .footer {
              margin-top: 40px;
              text-align: center;
              font-size: 10pt;
              color: #666;
              border-top: 1px solid #ccc;
              padding-top: 15px;
            }
            
            @media print {
              body {
                font-size: 10pt;
              }
              
              .no-print {
                display: none;
              }
              
              table {
                font-size: 9pt;
              }
              
              th, td {
                padding: 6px;
              }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company-name">Sales Management System</div>
            <div class="report-title">${x}</div>
            <div class="date-range">Period: ${w}</div>
            <div class="generated-date">Generated on: ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}</div>
          </div>
          
          <div class="content">
            <table>
              <thead>
                ${v}
              </thead>
              <tbody>
                ${b}
              </tbody>
            </table>
            
            <div class="summary">
              <strong>Report Summary:</strong>
              <div class="summary-item">Total Records: ${i.length}</div>
              <div class="summary-item">Report Type: ${x}</div>
              <div class="summary-item">Date Range: ${w}</div>
              ${a==="summary"?`
                <div class="summary-item">Total Sales: ${j.totalSales.toFixed(2)}</div>
                <div class="summary-item">Total Refunds: ${j.totalRefunds.toFixed(2)}</div>
                <div class="summary-item">Net Revenue: ${j.netRevenue.toFixed(2)}</div>
              `:""}
              ${a==="customer"?`
                <div class="summary-item">Total Amount: ${j.totalAmount.toFixed(2)}</div>
                <div class="summary-item">Total Sales Count: ${j.totalSales}</div>
              `:""}
              ${a==="product"?`
                <div class="summary-item">Total Amount: ${j.totalAmount.toFixed(2)}</div>
                <div class="summary-item">Total Quantity Sold: ${j.totalQuantity}</div>
                <div class="summary-item">Total Sales Count: ${j.totalSales}</div>
              `:""}
              ${a==="employee"?`
                <div class="summary-item">Total Amount: ${j.totalAmount.toFixed(2)}</div>
                <div class="summary-item">Total Sales Count: ${j.totalSales}</div>
              `:""}
              ${a==="category"?`
                <div class="summary-item">Total Amount: ${j.totalAmount.toFixed(2)}</div>
                <div class="summary-item">Total Items Sold: ${j.totalQuantity}</div>
              `:""}
            </div>
            
            <div class="footer">
              <p>This report was generated automatically by the Sales Management System.</p>
              <p>Page 1 of 1</p>
            </div>
          </div>
        </body>
      </html>
    `;m.document.write(S),m.document.close(),m.onload=()=>{setTimeout(()=>{m.print(),m.close()},250)}},y=async m=>{if(m.preventDefault(),!e||!r||!a){p("Please fill in all fields");return}d(!0),p(null);try{let x;switch(a){case"summary":x=await dR(e,r);break;case"customer":x=await mR(e,r);break;case"product":x=await fR(e,r);break;case"employee":x=await hR(e,r);break;case"category":x=await pR(e,r);break;default:throw new Error("Invalid report type")}if(x!=null&&x.data)if(a==="summary"&&!Array.isArray(x.data)){const w=x.data,v={totalSales:w.totalSales||0,totalRefunds:w.totalRefunds||0,refundAmount:w.refundAmount||0,netRevenue:w.netRevenue||0,transactionCount:w.transactionCount||0,date:new Date().toISOString()};l([v])}else l(Array.isArray(x.data)?x.data:[x.data])}catch(x){console.error("Error fetching sales data:",x),p("Failed to fetch sales data")}finally{d(!1)}};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Date Range Report"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Generate reports for any date range - daily, monthly, yearly, or custom periods."}),s.jsxs("form",{onSubmit:y,className:"mb-8 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",id:"startDate",value:e,onChange:m=>t(m.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",id:"endDate",value:r,onChange:m=>n(m.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Report Type"}),s.jsxs("select",{id:"reportType",value:a,onChange:m=>o(m.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[s.jsx("option",{value:"",children:"Select a report type"}),c.map(m=>s.jsx("option",{value:m.value,children:m.label},m.value))]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[i.length>0&&s.jsx("button",{type:"button",onClick:h,className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Print Report"}),s.jsx("button",{type:"submit",disabled:u,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:u?"Loading...":"Generate Report"})]})]}),f&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:s.jsx("p",{children:f})}),i.length>0?s.jsx("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[a==="summary"&&s.jsxs(s.Fragment,{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Refunds"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Revenue"})]}),a==="customer"&&s.jsxs(s.Fragment,{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Spent"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Number of Sales"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Purchase"})]}),a==="product"&&s.jsxs(s.Fragment,{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity Sold"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Number of Sales"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salesperson"})]}),a==="employee"&&s.jsxs(s.Fragment,{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Number of Sales"})]}),a==="category"&&s.jsxs(s.Fragment,{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Sales"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items Sold"})]})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((m,x)=>a==="summary"&&"netRevenue"in m?s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.date?new Date(m.date).toLocaleDateString():"-"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalSales.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalRefunds.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.netRevenue.toFixed(2)]})]},x):a==="customer"&&"customerName"in m?s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.customerName}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalAmount.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.numberOfSales}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.lastPurchase?new Date(m.lastPurchase).toLocaleDateString():"-"})]},x):a==="employee"&&"employeeName"in m?s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.employeeName}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalAmount.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.numberOfSales})]},x):a==="product"&&"productName"in m?s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.productName}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.quantity}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalAmount.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.numberOfSales}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.salesperson||"Unknown"})]},x):a==="category"&&"categoryName"in m?s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.date).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.categoryName}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",m.totalAmount.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.quantity})]},x):null)})]})}):!u&&s.jsx("div",{className:"text-center text-gray-500 mt-4",children:"No data available for the selected criteria"})]})}const dme=()=>{const{currentUser:e}=Ai(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[o,i]=g.useState(""),l=yt();g.useEffect(()=>{(async()=>{try{const p=await fetch("/api/held-sales",{credentials:"include"});if(p.ok){const h=await p.json();r(h)}else p.status===401?l("/login"):console.error("Failed to fetch held sales")}catch(p){console.error("Error fetching held sales:",p)}finally{a(!1)}})()},[l]);const c=t.filter(f=>{var m,x;const p=o.toLowerCase(),h=f.id.toString(),y=((x=(m=f.customer)==null?void 0:m.name)==null?void 0:x.toLowerCase())||"";return h.includes(p)||y.includes(p)}),u=async f=>{if(window.confirm("Are you sure you want to convert this held sale to a regular sale?"))try{const p=await fetch(`/api/held-sales/${f}/convert`,{method:"POST",credentials:"include"});if(p.ok){const h=await p.json();r(t.filter(y=>y.id!==f)),l(`/pos?saleId=${h.id}`)}else throw new Error("Failed to convert held sale")}catch(p){console.error("Error converting held sale:",p),alert("Failed to convert held sale. Please try again.")}};if(n)return s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});const d=f=>{const p=typeof f=="string"?parseFloat(f):f;return isNaN(p)?"0.00":p.toFixed(2)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Held Sales"}),s.jsxs("button",{onClick:()=>l("/pos"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center",children:[s.jsx(Uh,{className:"w-4 h-4 mr-2"}),"Back to POS"]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(zn,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:"Search by sale ID or customer name...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:o,onChange:f=>i(f.target.value)})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salesperson"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No held sales found"})}):c.map(f=>{var p;return s.jsxs("tr",{children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["#",f.id]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.customer?f.customer.name:"Walk-in Customer"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((p=f.user)==null?void 0:p.name)||"Unknown"}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["$",d(f.totalAmount)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(f.createdAt).toLocaleString()}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[s.jsxs("button",{onClick:()=>l(`/pos?heldSaleId=${f.id}`),className:"text-blue-500 hover:text-blue-700 inline-flex items-center",children:[s.jsx(Hh,{className:"w-4 h-4 mr-1"}),"Edit"]}),s.jsxs("button",{onClick:()=>u(f.id),className:"text-green-500 hover:text-green-700 inline-flex items-center",children:[s.jsx(Vh,{className:"w-4 h-4 mr-1"}),"Convert to Sale"]}),(e==null?void 0:e.role)==="ADMIN"&&s.jsxs("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this held sale?"))try{if((await fetch(`/api/held-sales/${f.id}`,{method:"DELETE",credentials:"include"})).ok)r(t.filter(y=>y.id!==f.id));else throw new Error("Failed to delete held sale")}catch(h){console.error("Error deleting held sale:",h),alert("Failed to delete held sale. Please try again.")}},className:"text-red-500 hover:text-red-700 inline-flex items-center",children:[s.jsx(br,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]},f.id)})})]})})]})},fme=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[a,o]=g.useState(""),[i,l]=g.useState(1),[c,u]=g.useState(1),[d,f]=g.useState(0),[p,h]=g.useState(""),[y,m]=g.useState(""),[x,w]=g.useState(""),[v,b]=g.useState(!1),[j,S]=g.useState(!1),[k,N]=g.useState(!1),[P,C]=g.useState(!1),[E,_]=g.useState([]),[L,U]=g.useState(new Date().toISOString().split("T")[0]),[D,I]=g.useState(!1),[A,$]=g.useState({dueDate:"",reminderDays:3}),[O,R]=g.useState(null),[q,V]=g.useState([]),[z,J]=g.useState({date:new Date().toISOString().split("T")[0],receivedAmount:0,payingAmount:0,change:0,paymentChoice:"cash",note:""}),W=yt(),F=10,H=g.useCallback(async()=>{try{if(n(!0),!sessionStorage.getItem("authToken")){console.error("No auth token found"),W("/login");return}const Q=new URLSearchParams({page:i.toString(),limit:F.toString(),search:a,...p&&{paymentStatus:p},...y&&{startDate:y},...x&&{endDate:x}}),Y=await me(`/api/credit-sales?${Q}`);if(Y.ok){const ie=await Y.json();t(ie.sales),u(ie.pagination.totalPages),f(ie.pagination.totalCount)}else Y.status===401?(console.error("Authentication failed - redirecting to login"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),W("/login")):console.error("Failed to fetch credit sales - status:",Y.status)}catch(re){console.error("Error fetching credit sales:",re),re instanceof Error&&re.message.includes("Authentication required")&&(console.error("Authentication error - redirecting to login"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),W("/login"))}finally{n(!1)}},[i,a,p,y,x,W]),X=async re=>{try{console.log("Fetching payments for sale:",re),console.log("Auth token exists:",!!sessionStorage.getItem("authToken"));const Q=sessionStorage.getItem("authToken");if(!Q){console.error("No auth token for fetchSalePayments");return}const Y=await fetch(`https://localhost:5443/api/credit-sales/${re}/payments`,{method:"GET",headers:{Authorization:`Bearer ${Q}`},credentials:"include"});if(Y.ok){const ie=await Y.json();V(ie),console.log("Fetched payments successfully:",ie.length,"payments")}else console.error("Failed to fetch sale payments - Response not ok:",Y.status)}catch(Q){console.error("Error fetching sale payments - Exception:",Q)}},se=async()=>{if(!O)return;const re=be();if(!re.isValid){alert(re.message);return}const Q=sessionStorage.getItem("authToken");if(!Q){alert("Authentication required. Please login again."),W("/login");return}try{console.log("Adding payment for sale:",O.id),console.log("Payment form data:",z),console.log("Auth token exists:",!!Q);const Y=await fetch(`https://localhost:5443/api/credit-sales/${O.id}/payments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},credentials:"include",body:JSON.stringify(z)});if(Y.ok){const ie=await Y.json();console.log("Payment added successfully:",ie),alert("Payment added successfully!"),b(!1),ge(),H()}else if(Y.status===401)console.error("Authentication failed for payment request"),alert("Session expired. Please login again."),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),W("/login");else{let ie;try{ie=await Y.json()}catch{ie={message:"Unknown server error"}}console.error("Error adding payment - Response not ok:",Y.status,ie),alert(`Failed to add payment: ${ie.message||`Server error (${Y.status})`}`)}}catch(Y){console.error("Error adding payment - Exception:",Y),Y instanceof Error?Y.message.includes("Authentication required")?(alert("Session expired. Please login again."),sessionStorage.removeItem("user"),sessionStorage.removeItem("authToken"),W("/login")):Y.message.includes("Failed to fetch")?alert("Network error: Cannot connect to server. Please check your connection."):alert(`Error adding payment: ${Y.message}`):alert("Error adding payment: Unknown error occurred")}},G=async re=>{if(confirm("Are you sure you want to delete this sale?"))try{const Q=await me(`/api/sales/${re}`,{method:"DELETE"});if(Q.ok)H();else{const Y=await Q.json().catch(()=>({}));console.error("Error deleting sale:",Y)}}catch(Q){console.error("Error deleting sale:",Q)}},oe=re=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(re)),ae=re=>{const Q={PAID:"bg-green-100 text-green-800",UNPAID:"bg-red-100 text-red-800",PARTIALLY_PAID:"bg-yellow-100 text-yellow-800"};return s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${Q[re]||"bg-gray-100 text-gray-800"}`,children:re.replace("_"," ")})},te=(re,Q)=>{const Y=re-Q;J(ie=>({...ie,change:Math.max(0,Y)}))},be=()=>{if(!z.date)return{isValid:!1,message:"Please select a payment date"};if(!z.receivedAmount||z.receivedAmount<0)return{isValid:!1,message:"Please enter a valid total amount (minimum 0)"};if(!z.payingAmount||z.payingAmount<=0)return{isValid:!1,message:"Please enter a valid paying amount (must be greater than 0)"};if(z.payingAmount>Number(O==null?void 0:O.amountDue))return{isValid:!1,message:"Paying amount cannot exceed the remaining amount due"};if(z.receivedAmount<z.payingAmount)return{isValid:!1,message:"Total amount cannot be less than paying amount"};const re=.01;return z.payingAmount<re?{isValid:!1,message:`Minimum payment amount is ${oe(re)}`}:{isValid:!0,message:""}},ge=()=>{J({date:new Date().toISOString().split("T")[0],receivedAmount:0,payingAmount:0,change:0,paymentChoice:"cash",note:""})},je=g.useCallback(()=>{if(!e.length)return;const re=new Date,Q=new Date(L||re),Y=e.filter(ie=>{if(ie.paymentStatus==="PAID")return!1;if(ie.dueDate)return new Date(ie.dueDate)<=Q;const fe=new Date(ie.createdAt);return Math.floor((re.getTime()-fe.getTime())/(1e3*60*60*24))>=30});_(Y),I(Y.length>0)},[e,L]),Se=async()=>{if(!O||!A.dueDate){alert("Please select a due date");return}const re=sessionStorage.getItem("authToken");if(!re){alert("Authentication required. Please login again."),W("/login");return}try{const Q=await fetch(`https://localhost:5443/api/credit-sales/${O.id}/due-date`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${re}`},credentials:"include",body:JSON.stringify({dueDate:A.dueDate,reminderDays:A.reminderDays})});if(Q.ok)alert("Due date set successfully!"),N(!1),$({dueDate:"",reminderDays:3}),H();else{const Y=await Q.json().catch(()=>({}));alert(`Failed to set due date: ${Y.message||"Server error"}`)}}catch(Q){console.error("Error setting due date:",Q),alert("Error setting due date. Please try again.")}},Ee=re=>{if(!re.dueDate)return null;const Q=new Date,Y=new Date(re.dueDate),ie=Q.getTime()-Y.getTime(),fe=Math.ceil(ie/(1e3*60*60*24));return fe>0?fe:null},Oe=re=>{const Q=Number(re.totalAmount),Y=Number(re.amountPaid);return Q>0?Y/Q*100:0};return g.useEffect(()=>{H()},[H]),g.useEffect(()=>{const re=setTimeout(()=>{l(1)},500);return()=>clearTimeout(re)},[a]),g.useEffect(()=>{z.receivedAmount&&z.payingAmount&&te(z.receivedAmount,z.payingAmount)},[z.receivedAmount,z.payingAmount]),g.useEffect(()=>{je()},[je]),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Debtors Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage credit sales and payment tracking"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>C(!0),className:`px-4 py-2 rounded-md text-sm font-medium ${E.length>0?"bg-red-500 text-white hover:bg-red-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(a5,{className:"h-4 w-4"}),"Due Payments (",E.length,")"]})}),s.jsx("button",{onClick:()=>{U(new Date().toISOString().split("T")[0]),je()},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 text-sm font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ou,{className:"h-4 w-4"}),"Check Due Payments"]})})]})]}),D&&E.length>0&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Fh,{className:"h-5 w-5 text-red-500 mr-2"}),s.jsxs("span",{className:"text-red-800 font-medium",children:[E.length," payment(s) are due or overdue!"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>C(!0),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"View Details"}),s.jsx("button",{onClick:()=>I(!1),className:"text-red-400 hover:text-red-600",children:s.jsx(Dt,{className:"h-4 w-4"})})]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(zn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx("input",{type:"text",value:a,onChange:re=>o(re.target.value),placeholder:"Search by Sale ID or Customer...",className:"pl-10 pr-3 py-2 border border-gray-300 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),s.jsxs("select",{value:p,onChange:re=>h(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Status"}),s.jsx("option",{value:"UNPAID",children:"Unpaid"}),s.jsx("option",{value:"PARTIALLY_PAID",children:"Partially Paid"}),s.jsx("option",{value:"PAID",children:"Paid"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",value:y,onChange:re=>m(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",value:x,onChange:re=>w(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{o(""),h(""),m(""),w(""),l(1)},className:"w-full px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Clear Filters"})})]})}),s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(i-1)*F+1," to ",Math.min(i*F,d)," of ",d," credit sales"]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale ID"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount Due"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Progress"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DateTime"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?s.jsx("tr",{children:s.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:[s.jsx(mr,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),"Loading credit sales..."]})}):e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"No credit sales found"})}):e.map(re=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",re.id]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:re.customer?re.customer.name:"Walk-in Customer"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:oe(re.totalAmount)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-red-600 font-medium",children:oe(re.amountDue)}),re.dueDate&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Due: ",new Date(re.dueDate).toLocaleDateString(),Ee(re)&&s.jsxs("span",{className:"text-red-500 font-medium ml-1",children:["(",Ee(re)," days overdue)"]})]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm text-green-600 font-medium",children:oe(re.amountPaid)}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:s.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Oe(re))}%`}})}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Oe(re).toFixed(1),"% paid"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(re.createdAt).toLocaleString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ae(re.paymentStatus)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>W(`/sales/${re.id}`),className:"text-blue-600 hover:text-blue-900",title:"View Purchase",children:s.jsx(So,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{R(re),X(re.id),S(!0)},className:"text-green-600 hover:text-green-900",title:"View Payments",children:s.jsx(qh,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{R(re),J({date:new Date().toISOString().split("T")[0],receivedAmount:Number(re.amountDue),payingAmount:Number(re.amountDue),change:0,paymentChoice:"cash",note:""}),b(!0)},className:"text-purple-600 hover:text-purple-900",title:"Add Payment",children:s.jsx(Cr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{R(re),$({dueDate:re.dueDate?new Date(re.dueDate).toISOString().split("T")[0]:"",reminderDays:3}),N(!0)},className:"text-orange-600 hover:text-orange-900",title:"Set Due Date",children:s.jsx(YA,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>W(`/sales/${re.id}/edit`),className:"text-yellow-600 hover:text-yellow-900",title:"Edit Purchase",children:s.jsx(Hh,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>G(re.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:s.jsx(br,{className:"h-4 w-4"})})]})})]},re.id))})]})})}),c>1&&s.jsx("div",{className:"mt-6 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>l(re=>Math.max(1,re-1)),disabled:i===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(e2,{className:"h-4 w-4"})}),s.jsxs("span",{className:"px-3 py-2 text-sm font-medium text-gray-700",children:["Page ",i," of ",c]}),s.jsx("button",{onClick:()=>l(re=>Math.min(c,re+1)),disabled:i===c,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(Ps,{className:"h-4 w-4"})})]})}),v&&O&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add Payment for Sale #",O.id]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-sm",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Total:"}),s.jsx("div",{className:"font-semibold",children:oe(O.totalAmount)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Paid:"}),s.jsx("div",{className:"font-semibold text-green-600",children:oe(O.amountPaid)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Remaining:"}),s.jsx("div",{className:"font-semibold text-red-600",children:oe(O.amountDue)})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:s.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,Oe(O))}%`}})}),s.jsxs("div",{className:"text-center text-xs text-gray-600",children:[Oe(O).toFixed(1),"% paid  Installment Payment Allowed"]}),O.dueDate&&s.jsxs("div",{className:"mt-2 text-center",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Due Date: "}),s.jsx("span",{className:"text-xs font-medium text-orange-600",children:new Date(O.dueDate).toLocaleDateString()}),Ee(O)&&s.jsxs("span",{className:"text-xs text-red-600 font-medium ml-1",children:["(",Ee(O)," days overdue)"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),s.jsx("input",{type:"date",value:z.date,onChange:re=>J(Q=>({...Q,date:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),s.jsx("input",{type:"number",value:z.receivedAmount||"",onChange:re=>{const Q=re.target.value===""?0:Number(re.target.value);J(Y=>({...Y,receivedAmount:Q}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.01",min:"0",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Paying Amount (Any amount up to ",oe(O.amountDue),")"]}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{type:"number",value:z.payingAmount||"",onChange:re=>{const Q=re.target.value===""?0:Number(re.target.value);J(Y=>({...Y,payingAmount:Q}))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",step:"0.01",min:"0.01",max:Number(O.amountDue),placeholder:"Enter any amount"}),s.jsx("button",{type:"button",onClick:()=>{const re=Number(O.amountDue);J(Q=>({...Q,payingAmount:re,receivedAmount:re}))},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 text-sm",title:"Pay full remaining amount",children:"Full"})]}),s.jsx("div",{className:"flex gap-2",children:[25,50,75].map(re=>{const Q=Number(O.amountDue)*re/100;return s.jsxs("button",{type:"button",onClick:()=>{J(Y=>({...Y,payingAmount:Q,receivedAmount:Q}))},className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs hover:bg-gray-200",children:[re,"% (",oe(Q),")"]},re)})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" You can make partial payments. Pay any amount to reduce the debt."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balance"}),s.jsx("input",{type:"number",value:z.change,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",step:"0.01"}),z.change<0&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Total amount is less than paying amount"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),s.jsxs("select",{value:z.paymentChoice,onChange:re=>J(Q=>({...Q,paymentChoice:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"cash",children:"Cash"}),s.jsx("option",{value:"card",children:"Card"}),s.jsx("option",{value:"mobile_money",children:"Mobile Money"}),s.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note"}),s.jsx("textarea",{value:z.note,onChange:re=>J(Q=>({...Q,note:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>{b(!1),ge()},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:se,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!z.payingAmount||z.payingAmount<=0,children:"Add Payment"})]})]})}),k&&O&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Set Due Date for Sale #",O.id]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),s.jsx("input",{type:"date",value:A.dueDate,onChange:re=>$(Q=>({...Q,dueDate:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reminder Days Before Due"}),s.jsxs("select",{value:A.reminderDays,onChange:re=>$(Q=>({...Q,reminderDays:Number(re.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:1,children:"1 day before"}),s.jsx("option",{value:3,children:"3 days before"}),s.jsx("option",{value:7,children:"1 week before"}),s.jsx("option",{value:14,children:"2 weeks before"}),s.jsx("option",{value:30,children:"1 month before"})]})]}),s.jsx("div",{className:"bg-blue-50 p-3 rounded-lg text-sm text-blue-800",children:s.jsx("p",{children:" Setting a due date helps track payment deadlines and sends notifications when payments are approaching or overdue."})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>{N(!1),$({dueDate:"",reminderDays:3})},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:Se,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:!A.dueDate,children:"Set Due Date"})]})]})}),P&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Due Payment Notifications"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check payments due by date:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",value:L,onChange:re=>U(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:je,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Update"})]})]}),E.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Bh,{className:"h-12 w-12 mx-auto mb-3 text-green-500"}),s.jsx("p",{children:"No payments due by the selected date!"})]}):s.jsx("div",{className:"space-y-3",children:E.map(re=>{const Q=Ee(re);return s.jsx("div",{className:`p-4 rounded-lg border ${Q?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"}`,children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900",children:["Sale #",re.id]}),s.jsx("p",{className:"text-sm text-gray-600",children:re.customer?re.customer.name:"Walk-in Customer"}),s.jsxs("p",{className:"text-sm font-medium text-red-600",children:["Amount Due: ",oe(re.amountDue)]}),re.dueDate&&s.jsxs("p",{className:"text-sm text-gray-500",children:["Due: ",new Date(re.dueDate).toLocaleDateString(),Q&&s.jsxs("span",{className:"text-red-600 font-medium ml-1",children:["(",Q," days overdue)"]})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx("button",{onClick:()=>{R(re),J({date:new Date().toISOString().split("T")[0],receivedAmount:Number(re.amountDue),payingAmount:Number(re.amountDue),change:0,paymentChoice:"cash",note:""}),C(!1),b(!0)},className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"Add Payment"})})]})},re.id)})}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})}),j&&O&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Payment History for Sale #",O.id]}),s.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Total Amount:"}),s.jsx("div",{className:"font-semibold",children:oe(O.totalAmount)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Amount Paid:"}),s.jsx("div",{className:"font-semibold text-green-600",children:oe(O.amountPaid)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Amount Due:"}),s.jsx("div",{className:"font-semibold text-red-600",children:oe(O.amountDue)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Status:"}),s.jsx("div",{children:ae(O.paymentStatus)})]})]})}),q.length===0?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No payments recorded for this sale"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Paying"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Note"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(re=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(re.date).toLocaleDateString()}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-mono",children:re.reference}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:oe(re.receivedAmount)}),s.jsx("td",{className:"px-4 py-3 text-sm text-green-600 font-medium",children:oe(re.payingAmount)}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:oe(re.change)}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 capitalize",children:re.paymentChoice.replace("_"," ")}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:re.note||"-"})]},re.id))})]})}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})})]})},pme=()=>{const e=yt(),[t,r]=g.useState({name:"",currentPassword:"",newPassword:"",confirmPassword:""}),[n,a]=g.useState(!1),[o,i]=g.useState(null),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,p]=g.useState(!1);B.useEffect(()=>{(async()=>{var x;try{const w=await fetch("/api/users/me",{credentials:"include"});if(w.ok){const v=await w.json();(x=v.data)!=null&&x.user&&r(b=>({...b,name:v.data.user.name}))}else w.status===401&&e("/login")}catch(w){console.error("Error loading user data:",w),i({type:"error",text:"Failed to load user data"})}})()},[e]);const h=async m=>{var x;if(m.preventDefault(),i(null),t.newPassword||t.confirmPassword){if(t.newPassword!==t.confirmPassword){i({type:"error",text:"New passwords do not match"});return}if(t.newPassword.length<6){i({type:"error",text:"New password must be at least 6 characters long"});return}if(!t.currentPassword){i({type:"error",text:"Current password is required to change password"});return}}a(!0);try{const w={name:t.name};t.newPassword&&(w.password=t.newPassword,w.currentPassword=t.currentPassword);const v=await fetch("/api/users/me",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(w)});if(v.ok){const b=await v.json();if((x=b.data)!=null&&x.user){const S={...JSON.parse(localStorage.getItem("user")||"{}"),...b.data.user};localStorage.setItem("user",JSON.stringify(S))}i({type:"success",text:"Profile updated successfully"}),r(j=>({...j,currentPassword:"",newPassword:"",confirmPassword:""}))}else{const b=await v.json();i({type:"error",text:b.message||"Failed to update profile"})}}catch(w){console.error("Error updating profile:",w),i({type:"error",text:"An error occurred while updating profile"})}finally{a(!1)}},y=()=>{e(-1)};return s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),s.jsx("button",{onClick:y,className:"text-gray-500 hover:text-gray-700",children:s.jsx(dn.X,{size:24})})]})}),s.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[o&&s.jsx("div",{className:`p-4 rounded-md ${o.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:o.text}),"          ",s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),s.jsx("input",{type:"text",id:"name",value:t.name,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-700 cursor-not-allowed",readOnly:!0,disabled:!0})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Leave password fields empty if you don't want to change your password."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:l?"text":"password",id:"currentPassword",value:t.currentPassword,onChange:m=>r({...t,currentPassword:m.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:l?s.jsx(dn.EyeOff,{className:"h-5 w-5 text-gray-400"}):s.jsx(dn.Eye,{className:"h-5 w-5 text-gray-400"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:u?"text":"password",id:"newPassword",value:t.newPassword,onChange:m=>r({...t,newPassword:m.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",minLength:6}),s.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u?s.jsx(dn.EyeOff,{className:"h-5 w-5 text-gray-400"}):s.jsx(dn.Eye,{className:"h-5 w-5 text-gray-400"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:f?"text":"password",id:"confirmPassword",value:t.confirmPassword,onChange:m=>r({...t,confirmPassword:m.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("button",{type:"button",onClick:()=>p(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:f?s.jsx(dn.EyeOff,{className:"h-5 w-5 text-gray-400"}):s.jsx(dn.Eye,{className:"h-5 w-5 text-gray-400"})})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:n,children:"Cancel"}),s.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Update Profile"})]})]})]})})},hme=()=>{const[e,t]=g.useState(null),[r,n]=g.useState(!0),[a,o]=g.useState(!1),[i,l]=g.useState(!1),[c,u]=g.useState(null),[d,f]=g.useState(null),[p,h]=g.useState(null),[y,m]=g.useState(""),[x,w]=g.useState(""),[v,b]=g.useState(null),[j,S]=g.useState(!1),[k,N]=g.useState(!1);g.useEffect(()=>{P()},[]);const P=async()=>{try{u(null);const I=await me("/api/database/info");if(I.ok){const A=await I.json();t(A.data)}else throw new Error("Failed to fetch database information")}catch(I){u("Error loading database information: "+(I instanceof Error?I.message:"Unknown error"))}finally{n(!1)}},C=async()=>{var I;try{o(!0),u(null),f(null);const A=await me("/api/database/export");if(A.ok){const $=A.headers.get("Content-Disposition"),O=$?(I=$.split("filename=")[1])==null?void 0:I.replace(/"/g,""):`database_backup_${new Date().toISOString().replace(/[:.]/g,"-")}.sql`,R=await A.blob(),q=window.URL.createObjectURL(R),V=document.createElement("a");V.href=q,V.download=O,document.body.appendChild(V),V.click(),window.URL.revokeObjectURL(q),document.body.removeChild(V),f("Database exported successfully")}else{const $=await A.json().catch(()=>({}));throw new Error($.message||"Failed to export database")}}catch(A){u("Export failed: "+(A instanceof Error?A.message:"Unknown error"))}finally{o(!1)}},E=I=>{var $;const A=($=I.target.files)==null?void 0:$[0];A&&(A.name.toLowerCase().endsWith(".sql")?(h(A),u(null)):(u("Please select a valid SQL file (.sql)"),h(null)))},_=async()=>{if(!p){u("Please select a SQL file to import");return}if(window.confirm("Are you sure you want to import this database? This action will replace all existing data and cannot be undone."))try{l(!0),u(null),f(null);const I=new FormData;I.append("sqlFile",p);const A=await me("/api/database/import",{method:"POST",body:I});if(A.ok){await A.json(),f("Database imported successfully"),h(null);const $=document.getElementById("sqlFileInput");$&&($.value=""),P()}else{const $=await A.json();throw new Error($.message||"Failed to import database")}}catch(I){u("Import failed: "+(I instanceof Error?I.message:"Unknown error"))}finally{l(!1)}},L=I=>{var $;const A=($=I.target.files)==null?void 0:$[0];A&&(A.name.toLowerCase().endsWith(".sql")?(b(A),u(null)):(u("Please select a valid SQL file (.sql)"),b(null)))},U=async()=>{var I;if(!y){u("Please select a table to export");return}try{S(!0),u(null),f(null);const A=await me(`/api/database/export-table/${encodeURIComponent(y)}`);if(A.ok){const $=A.headers.get("Content-Disposition"),O=$?(I=$.split("filename=")[1])==null?void 0:I.replace(/"/g,""):`table_${y}_backup_${new Date().toISOString().replace(/[:.]/g,"-")}.sql`,R=await A.blob(),q=window.URL.createObjectURL(R),V=document.createElement("a");V.href=q,V.download=O,document.body.appendChild(V),V.click(),window.URL.revokeObjectURL(q),document.body.removeChild(V),f(`Table "${y}" exported successfully`),m("")}else{const $=await A.json().catch(()=>({message:"Unknown server error"}));throw new Error($.message||"Failed to export table")}}catch(A){u("Table export failed: "+(A instanceof Error?A.message:"Unknown error"))}finally{S(!1)}},D=async()=>{if(!x){u("Please select a target table");return}if(!v){u("Please select a SQL file to import");return}if(window.confirm(`Are you sure you want to import data into table "${x}"? This will replace all existing data in this table and cannot be undone.`))try{N(!0),u(null),f(null);const I=new FormData;I.append("sqlFile",v),I.append("tableName",x);const A=await me("/api/database/import-table",{method:"POST",body:I});if(A.ok){await A.json(),f(`Data imported successfully into table "${x}"`),b(null),w("");const $=document.getElementById("tableFileInput");$&&($.value=""),P()}else{const $=await A.json().catch(()=>({message:"Unknown server error"}));throw new Error($.message||"Failed to import table data")}}catch(I){u("Table import failed: "+(I instanceof Error?I.message:"Unknown error"))}finally{N(!1)}};return r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):s.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Database Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage your database backups, imports, and view database information."})]}),c&&s.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[s.jsx(op,{className:"h-5 w-5 mr-2 flex-shrink-0"}),s.jsx("span",{children:c})]}),d&&s.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[s.jsx(Bh,{className:"h-5 w-5 mr-2 flex-shrink-0"}),s.jsx("span",{children:d})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(t2,{className:"h-6 w-6 text-blue-500 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Database Information"})]}),e?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Database Name"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.database_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Size"}),s.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[e.total_size_mb," MB"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Table Count"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.table_count})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Last Checked"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(e.last_checked).toLocaleString()})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"Database Tables"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:s.jsx("div",{className:"space-y-2",children:e.tables.map((I,A)=>s.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-white rounded border",children:[s.jsx("span",{className:"font-medium text-gray-900",children:I.name}),s.jsxs("span",{className:"text-sm text-gray-500",children:[I.size_mb," MB"]})]},A))})})]}),s.jsxs("button",{onClick:P,className:"w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center",children:[s.jsx(ou,{className:"h-4 w-4 mr-2"}),"Refresh Information"]})]}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(op,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),s.jsx("p",{children:"Unable to load database information"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(vb,{className:"h-6 w-6 text-blue-500 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Database Operations"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Database"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Create a backup of your database. This will download a SQL file containing all your data."}),s.jsx("button",{onClick:C,disabled:a,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ip,{className:"h-4 w-4 mr-2"}),"Export Database"]})})]}),s.jsx("hr",{className:"border-gray-200"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Import Database"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Replace your current database with data from a SQL file.",s.jsx("span",{className:"text-red-600 font-medium",children:" Warning: This will delete all existing data!"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"sqlFileInput",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select SQL File"}),s.jsx("input",{id:"sqlFileInput",type:"file",accept:".sql",onChange:E,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 border border-gray-300 rounded-lg"}),p&&s.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",p.name," (",(p.size/1024/1024).toFixed(2)," MB)"]})]}),s.jsx("button",{onClick:_,disabled:!p||i,className:"w-full bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white px-4 py-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(lp,{className:"h-4 w-4 mr-2"}),"Import Database"]})})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(j5,{className:"h-6 w-6 text-blue-500 mr-2"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Table Operations"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export Table"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Export a specific table to a SQL file for backup or data transfer."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"exportTableSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Table to Export"}),s.jsxs("select",{id:"exportTableSelect",value:y,onChange:I=>m(I.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"-- Select a table --"}),e==null?void 0:e.tables.map(I=>s.jsxs("option",{value:I.name,children:[I.name," (",I.size_mb," MB)"]},I.name))]})]}),s.jsx("button",{onClick:U,disabled:!y||j,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center",children:j?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ip,{className:"h-4 w-4 mr-2"}),"Export Table"]})})]})]}),s.jsx("hr",{className:"border-gray-200"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Import to Table"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Import data from a SQL file into a specific table.",s.jsx("span",{className:"text-orange-600 font-medium",children:" This will replace existing table data!"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"importTableSelect",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Target Table"}),s.jsxs("select",{id:"importTableSelect",value:x,onChange:I=>w(I.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"-- Select target table --"}),e==null?void 0:e.tables.map(I=>s.jsx("option",{value:I.name,children:I.name},I.name))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"tableFileInput",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select SQL File"}),s.jsx("input",{id:"tableFileInput",type:"file",accept:".sql",onChange:L,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 border border-gray-300 rounded-lg"}),v&&s.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Selected: ",v.name," (",(v.size/1024/1024).toFixed(2)," MB)"]})]}),s.jsx("button",{onClick:D,disabled:!x||!v||k,className:"w-full bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center",children:k?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(lp,{className:"h-4 w-4 mr-2"}),"Import to Table"]})})]})]})]})]})]}),s.jsx("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Fh,{className:"h-6 w-6 text-yellow-600 mr-3 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"Important Safety Notice"}),s.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[s.jsx("li",{children:" Always create a backup before importing a new database"}),s.jsx("li",{children:" Database imports will permanently replace all existing data"}),s.jsx("li",{children:" Table imports will replace all data in the selected table only"}),s.jsx("li",{children:" Only upload SQL files from trusted sources"}),s.jsx("li",{children:" Large database imports may take several minutes to complete"}),s.jsx("li",{children:" Ensure you have sufficient disk space before importing large files"}),s.jsx("li",{children:" Table exports are useful for selective backups and data migration"})]})]})]})})]})},mme=()=>{const[e,t]=g.useState({wholesale:null,retail:null}),[r,n]=g.useState([]),[a,o]=g.useState(!1),[i,l]=g.useState("wholesale"),[c,u]=g.useState(!0),[d,f]=g.useState(!1),[p,h]=g.useState(null),[y,m]=g.useState(null),[x,w]=g.useState(!1),[v,b]=g.useState({name:"",type:"network",ipAddress:"",port:9100,deviceName:""});g.useEffect(()=>{j(),S()},[]);const j=async()=>{try{h(null);const E=await me(`${mn()}/settings/printers`);if(E.ok){const _=await E.json();t(_)}else t({wholesale:null,retail:null})}catch(E){h("Error loading printer settings: "+(E instanceof Error?E.message:"Unknown error"))}finally{u(!1)}},S=async()=>{try{const E=await me(`${mn()}/printer/discover`),_=await me(`${mn()}/printer/local`),L=E.ok?await E.json():{printers:[]},U=_.ok?await _.json():{printers:[]},D=Array.isArray(L.printers)?L.printers:[],I=Array.isArray(U.printers)?U.printers:[];n([...D,...I])}catch(E){console.error("Error discovering printers:",E),n([{id:"default-network",name:"Network Printer (Default)",type:"network",ipAddress:"192.168.1.100",port:9100},{id:"default-local",name:"Local Printer (Default)",type:"local",deviceName:"Microsoft Print to PDF"}])}},k=async()=>{f(!0),h(null),m(null);try{if((await me(`${mn()}/settings/printers`,{method:"PUT",body:JSON.stringify(e)})).ok)m("Printer settings saved successfully");else throw new Error("Failed to save printer settings")}catch(E){h("Error saving printer settings: "+(E instanceof Error?E.message:"Unknown error"))}finally{f(!1)}},N=E=>{t(_=>({..._,[i]:E})),o(!1)},P=async()=>{if(!v.name){h("Printer name is required");return}if(v.type==="network"&&(!v.ipAddress||!v.port)){h("IP Address and Port are required for network printers");return}if(v.type==="local"&&!v.deviceName){h("Device name is required for local printers");return}const E={id:`custom-${Date.now()}`,name:v.name,type:v.type||"network",...v.type==="network"&&{ipAddress:v.ipAddress,port:v.port},...v.type==="local"&&{deviceName:v.deviceName}};n(_=>[..._,E]),w(!1),b({name:"",type:"network",ipAddress:"",port:9100,deviceName:""}),h(null)},C=async E=>{try{if((await me(`${mn()}/printer/test`,{method:"POST",body:JSON.stringify(E)})).ok)m(`Test print sent to ${E.name} successfully`);else throw new Error("Failed to send test print")}catch(_){h("Test print failed: "+(_ instanceof Error?_.message:"Unknown error"))}};return c?s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(mr,{className:"w-8 h-8 animate-spin"})}):s.jsxs("div",{className:"space-y-6",children:[p&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-600 rounded-md",children:p}),y&&s.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-600 rounded-md",children:y}),s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Printer Setup"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Wholesale Printer"}),s.jsx(jo,{className:"w-6 h-6 text-blue-500"})]}),s.jsxs("div",{className:"space-y-4",children:[e.wholesale?s.jsx("div",{className:"p-4 bg-gray-50 rounded-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800",children:e.wholesale.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.wholesale.type==="network"?`${e.wholesale.ipAddress}:${e.wholesale.port}`:e.wholesale.deviceName})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>C(e.wholesale),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Test Print",children:s.jsx(vS,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>t(E=>({...E,wholesale:null})),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Remove Printer",children:s.jsx(Dt,{className:"w-4 h-4"})})]})]})}):s.jsx("div",{className:"p-4 bg-gray-50 rounded-md text-center text-gray-500",children:"No printer selected for wholesale printing"}),s.jsxs("button",{onClick:()=>{l("wholesale"),o(!0)},className:"w-full px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center justify-center gap-2",children:[s.jsx(Zr,{className:"w-4 h-4"}),"Select Wholesale Printer"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Retail Printer"}),s.jsx(No,{className:"w-6 h-6 text-green-500"})]}),s.jsxs("div",{className:"space-y-4",children:[e.retail?s.jsx("div",{className:"p-4 bg-gray-50 rounded-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800",children:e.retail.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.retail.type==="network"?`${e.retail.ipAddress}:${e.retail.port}`:e.retail.deviceName})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>C(e.retail),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Test Print",children:s.jsx(vS,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>t(E=>({...E,retail:null})),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Remove Printer",children:s.jsx(Dt,{className:"w-4 h-4"})})]})]})}):s.jsx("div",{className:"p-4 bg-gray-50 rounded-md text-center text-gray-500",children:"No printer selected for retail printing"}),s.jsxs("button",{onClick:()=>{l("retail"),o(!0)},className:"w-full px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 flex items-center justify-center gap-2",children:[s.jsx(Zr,{className:"w-4 h-4"}),"Select Retail Printer"]})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:k,disabled:d,className:"px-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:d?s.jsxs(s.Fragment,{children:[s.jsx(mr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ci,{className:"w-4 h-4"}),"Save Printer Settings"]})})}),a&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Select ",i==="wholesale"?"Wholesale":"Retail"," Printer"]}),s.jsx("button",{onClick:()=>o(!1),className:"p-1 hover:bg-gray-100 rounded",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h4",{className:"font-medium",children:"Available Printers"}),s.jsxs("button",{onClick:()=>w(!0),className:"px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600 flex items-center gap-1",children:[s.jsx(Cr,{className:"w-3 h-3"}),"Add Printer"]})]}),r.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Zr,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"No printers found"}),s.jsx("button",{onClick:S,className:"mt-2 px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600",children:"Refresh"})]}):s.jsx("div",{className:"grid gap-2",children:r.map(E=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer",onClick:()=>N(E),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Zr,{className:"w-5 h-5 text-gray-500"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium",children:E.name}),s.jsx("p",{className:"text-sm text-gray-600",children:E.type==="network"?`Network: ${E.ipAddress}:${E.port}`:`Local: ${E.deviceName}`})]})]}),s.jsx(Ps,{className:"w-4 h-4 text-gray-400"})]},E.id))})]})]})}),x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Add Custom Printer"}),s.jsx("button",{onClick:()=>w(!1),className:"p-1 hover:bg-gray-100 rounded",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Printer Name"}),s.jsx("input",{type:"text",value:v.name,onChange:E=>b(_=>({..._,name:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter printer name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Printer Type"}),s.jsxs("select",{value:v.type,onChange:E=>b(_=>({..._,type:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"network",children:"Network Printer"}),s.jsx("option",{value:"local",children:"Local Printer"})]})]}),v.type==="network"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address"}),s.jsx("input",{type:"text",value:v.ipAddress,onChange:E=>b(_=>({..._,ipAddress:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"192.168.1.100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),s.jsx("input",{type:"number",value:v.port,onChange:E=>b(_=>({..._,port:parseInt(E.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"9100"})]})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Name"}),s.jsx("input",{type:"text",value:v.deviceName,onChange:E=>b(_=>({..._,deviceName:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Printer device name"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),s.jsx("button",{onClick:P,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Add Printer"})]})]})]})})]})},gme=({onClose:e})=>{var j;const[t,r]=g.useState({available:!1}),[n,a]=g.useState(""),[o,i]=g.useState(null),[l,c]=g.useState(null),[u,d]=g.useState(!1),[f,p]=g.useState(!1),[h,y]=g.useState(null),[m,x]=g.useState(null);g.useEffect(()=>{w()},[]);const w=async()=>{i(null);try{const S=await Cue();if(r(S),S.available&&S.printers&&S.printers.length>0){const k=await Lw();k&&S.printers.includes(k)?a(k):a(S.printers[0])}y(localStorage.getItem("qz.invoicePrinter")),x(localStorage.getItem("qz.receiptPrinter"))}catch(S){i(`Failed to check QZ Tray status: ${S instanceof Error?S.message:"Unknown error"}`)}finally{}},v=async()=>{if(!n){i("Please select a printer first");return}d(!0),i(null),c(null);try{await Eue(n)?c(`Test print sent successfully to ${n}`):i("Test print failed")}catch(S){i(`Test print failed: ${S instanceof Error?S.message:"Unknown error"}`)}finally{d(!1)}},b=async S=>{if(!n){i("Please select a printer first");return}p(!0),i(null),c(null);try{const k={type:S,items:[{id:"1",name:"Demo Product 1",price:10.5,quantity:2,total:21,unit:"pcs"},{id:"2",name:"Demo Product 2",price:15.75,quantity:1,total:15.75,unit:"pcs"},{id:"3",name:"Demo Product 3",price:8.25,quantity:3,total:24.75,unit:"pcs"}],totalAmount:61.5,totalItems:6,customer:{id:1,name:"Demo Customer",phone:"123-456-7890"},paymentMethod:"CASH",saleId:1234567};let N=!1;S==="invoice"?N=await Fi(k,n):N=await Ui(k,n,!0),N?c(`Demo ${S} sent successfully to ${n}`):i(`Demo ${S} failed`)}catch(k){i(`Demo ${S} failed: ${k instanceof Error?k.message:"Unknown error"}`)}finally{p(!1)}};return s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"QZ Tray Silent Printing Setup"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure silent printing without browser dialogs"})]}),e&&s.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg",children:s.jsx(Dt,{className:"w-5 h-5"})})]}),o&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(op,{className:"w-5 h-5 mr-2"}),o]})}),l&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Bh,{className:"w-5 h-5 mr-2"}),l]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"QZ Tray Status"}),s.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:[s.jsx(ou,{className:"w-4 h-4"}),s.jsx("span",{children:"Refresh"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${t.available?"bg-green-500":"bg-red-500"}`}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800",children:"Connection"}),s.jsx("div",{className:"text-sm text-gray-600",children:t.available?"Connected":"Disconnected"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[s.jsx(r2,{className:"w-5 h-5 text-blue-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800",children:"Version"}),s.jsx("div",{className:"text-sm text-gray-600",children:t.version||"Unknown"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[s.jsx(Zr,{className:"w-5 h-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800",children:"Printers"}),s.jsxs("div",{className:"text-sm text-gray-600",children:[((j=t.printers)==null?void 0:j.length)||0," available"]})]})]})]}),!t.available&&s.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Fh,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-yellow-800",children:"QZ Tray Not Available"}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"QZ Tray is required for silent printing. Please:"}),s.jsxs("ol",{className:"text-sm text-yellow-700 mt-2 ml-4 list-decimal space-y-1",children:[s.jsxs("li",{children:["Download and install QZ Tray from ",s.jsx("a",{href:"https://qz.io/download/",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"qz.io/download"})]}),s.jsx("li",{children:"Start the QZ Tray application"}),s.jsx("li",{children:'Click "Refresh" to check the connection'})]})]})]})})]}),t.available&&t.printers&&t.printers.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Printer Configuration"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Printer"}),s.jsxs("select",{value:n,onChange:S=>a(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Choose a printer..."}),t.printers.map(S=>s.jsx("option",{value:S,children:S},S))]})]}),n&&s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("button",{onClick:v,disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[u?s.jsx(mr,{className:"w-4 h-4 animate-spin"}):s.jsx(k5,{className:"w-4 h-4"}),s.jsx("span",{children:"Test Print"})]}),s.jsxs("button",{type:"button",onClick:()=>{localStorage.setItem("qz.invoicePrinter",n),y(n),c(`Saved ${n} as default invoice printer`)},className:`flex items-center space-x-2 px-4 py-2 rounded text-white ${h===n?"bg-emerald-600 hover:bg-emerald-700":"bg-emerald-500 hover:bg-emerald-600"}`,children:[s.jsx(jo,{className:"w-4 h-4"}),s.jsx("span",{children:h===n?"Invoice (Saved)":"Save as Invoice"})]}),s.jsxs("button",{type:"button",onClick:()=>{localStorage.setItem("qz.receiptPrinter",n),x(n),c(`Saved ${n} as default receipt printer`)},className:`flex items-center space-x-2 px-4 py-2 rounded text-white ${m===n?"bg-orange-600 hover:bg-orange-700":"bg-orange-500 hover:bg-orange-600"}`,children:[s.jsx(No,{className:"w-4 h-4"}),s.jsx("span",{children:m===n?"Receipt (Saved)":"Save as Receipt"})]}),s.jsxs("button",{onClick:()=>b("invoice"),disabled:f,className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[f?s.jsx(mr,{className:"w-4 h-4 animate-spin"}):s.jsx(jo,{className:"w-4 h-4"}),s.jsx("span",{children:"Demo Invoice"})]}),s.jsxs("button",{onClick:()=>b("receipt"),disabled:f,className:"flex items-center space-x-2 px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[f?s.jsx(mr,{className:"w-4 h-4 animate-spin"}):s.jsx(No,{className:"w-4 h-4"}),s.jsx("span",{children:"Demo Receipt"})]})]})]}),(h||m)&&s.jsxs("div",{className:"mt-4 text-xs text-gray-600 space-y-1",children:[h&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(g0,{className:"w-3 h-3 text-emerald-600"}),"Invoice: ",h]}),m&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(g0,{className:"w-3 h-3 text-orange-600"}),"Receipt: ",m]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"How to Use Silent Printing"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800",children:"Configure QZ Tray"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Install and start QZ Tray, then test your printer connection above."})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"2"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800",children:"Use in POS System"}),s.jsx("p",{className:"text-sm text-gray-600",children:"When printing from the POS, your documents will print silently without browser dialogs."})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800",children:"Printer Types"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Supports both regular printers (invoices) and thermal printers (receipts with ESC/POS commands)."})]})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(d5,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-blue-800",children:"Pro Tips"}),s.jsxs("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[s.jsx("li",{children:" QZ Tray works with any printer type (USB, Network, Bluetooth)"}),s.jsx("li",{children:" Thermal printers get optimized ESC/POS commands for better formatting"}),s.jsx("li",{children:" If QZ Tray is unavailable, the system automatically falls back to browser printing"}),s.jsx("li",{children:" For network printers, make sure they're accessible from this computer"})]})]})]})})]})]})},AE=2*60*1e3,it=({children:e})=>{const t=yt(),{currentUser:r,setCurrentUser:n,isLoading:a}=Ai(),[o,i]=g.useState(!1),[l,c]=g.useState(30),u=B.useRef(null),d=B.useRef(null),f=B.useCallback(()=>{n(null),i(!1),t("/login",{replace:!0})},[t,n]),p=B.useCallback(()=>{i(!1),c(30),u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{i(!0),c(30)},AE-3e4),u.current=setTimeout(()=>{f()},AE)},[f]);g.useEffect(()=>{let y=null;return o&&l>0&&(y=setInterval(()=>{c(m=>m<=1?(f(),0):m-1)},1e3)),()=>{y&&clearInterval(y)}},[o,l,f]);const h=B.useCallback(()=>{p()},[p]);return g.useEffect(()=>{if(r){const y=["mousedown","mousemove","keypress","scroll","touchstart","click"];return y.forEach(m=>{document.addEventListener(m,h,!0)}),p(),()=>{y.forEach(m=>{document.removeEventListener(m,h,!0)}),u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current)}}},[r,h,p]),a?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):r?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex h-screen bg-gray-100",children:[s.jsx(D5,{}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3 flex justify-end items-center",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(GI,{}),s.jsx(u2,{})]})}),s.jsx("main",{className:"flex-1 overflow-auto p-6",children:e})]})]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(op,{className:"w-6 h-6 text-orange-500 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Session Timeout Warning"})]}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["You will be logged out in ",s.jsx("span",{className:"font-bold text-red-600",children:l})," seconds due to inactivity."]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>{i(!1),p()},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Stay Logged In"}),s.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Logout Now"})]})]})})]}):s.jsx(Oc,{to:"/login",replace:!0})},yme=()=>{const[e,t]=g.useState(!1);return g.useEffect(()=>{(async()=>{try{await xb(),t(!0)}catch(n){console.error("Failed to initialize backend:",n),t(!0)}})()},[]),e?s.jsx(R5,{children:s.jsx(WM,{children:s.jsxs(LM,{children:[s.jsx(tt,{path:"/login",element:s.jsx(Qhe,{})}),s.jsx(tt,{path:"/",element:s.jsx(it,{children:s.jsx(Oc,{to:"/dashboard",replace:!0})})}),s.jsx(tt,{path:"/dashboard",element:s.jsx(it,{children:s.jsx(yse,{})})}),s.jsx(tt,{path:"/products",element:s.jsx(it,{children:s.jsx(jse,{})})}),s.jsx(tt,{path:"/categories",element:s.jsx(it,{children:s.jsx(Nse,{})})}),s.jsx(tt,{path:"/sales",element:s.jsx(it,{children:s.jsx(vue,{})})}),s.jsx(tt,{path:"/sales/:id",element:s.jsx(it,{children:s.jsx(Aue,{})})}),s.jsx(tt,{path:"/sales/:id/edit",element:s.jsx(it,{children:s.jsx(Nde,{})})}),s.jsx(tt,{path:"/customers",element:s.jsx(it,{children:s.jsx(kde,{})})}),s.jsx(tt,{path:"/pos",element:s.jsx(it,{children:s.jsx(zhe,{})})}),s.jsx(tt,{path:"/pos2",element:s.jsx(it,{children:s.jsx(Hhe,{})})}),s.jsx(tt,{path:"/retail-pos",element:s.jsx(it,{children:s.jsx(Whe,{})})}),s.jsx(tt,{path:"/purchases",element:s.jsx(it,{children:s.jsx(Uhe,{})})}),s.jsx(tt,{path:"/purchases/create",element:s.jsx(it,{children:s.jsx(Khe,{})})}),s.jsx(tt,{path:"/purchases/:id",element:s.jsx(it,{children:s.jsx(Ghe,{})})}),s.jsx(tt,{path:"/purchases/:id/edit",element:s.jsx(it,{children:s.jsx(Zhe,{})})}),s.jsx(tt,{path:"/reports/sales",element:s.jsx(it,{children:s.jsx(cme,{})})}),s.jsx(tt,{path:"/reports/date",element:s.jsx(it,{children:s.jsx(ume,{})})}),s.jsx(tt,{path:"/held-sales",element:s.jsx(it,{children:s.jsx(dme,{})})}),s.jsx(tt,{path:"/debtors",element:s.jsx(it,{children:s.jsx(fme,{})})}),s.jsx(tt,{path:"/profile",element:s.jsx(it,{children:s.jsx(pme,{})})}),s.jsx(tt,{path:"/suppliers",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(Pde,{})})})}),s.jsx(tt,{path:"/users",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(Ede,{})})})}),s.jsx(tt,{path:"/settings",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(Ade,{})})})}),s.jsx(tt,{path:"/printer-setup",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(mme,{})})})}),s.jsx(tt,{path:"/qz-tray-setup",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(gme,{})})})}),s.jsx(tt,{path:"/units",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(Tde,{})})})}),s.jsx(tt,{path:"/reports",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(Oc,{to:"/reports/sales",replace:!0})})})}),s.jsx(tt,{path:"/group-permissions",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(CE,{})})})}),s.jsx(tt,{path:"/permissions/groups",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(CE,{})})})}),s.jsx(tt,{path:"/permissions/create",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(tme,{})})})}),s.jsx(tt,{path:"/database",element:s.jsx(it,{children:s.jsx(Pn,{allowedRoles:["ADMIN"],children:s.jsx(hme,{})})})}),s.jsx(tt,{path:"*",element:s.jsx(Oc,{to:"/dashboard",replace:!0})})]})})}):s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Connecting to server..."})]})})},gR=document.getElementById("root");if(!gR)throw new Error("Failed to find the root element");hb(gR).render(s.jsx(g.StrictMode,{children:s.jsx(yme,{})}));
